{"version":3,"file":"index.73a726c7.js","sources":["../../vite/modulepreload-polyfill","../../node_modules/.pnpm/registry.npmmirror.com+@vue+shared@3.2.41/node_modules/@vue/shared/dist/shared.esm-bundler.js","../../node_modules/.pnpm/registry.npmmirror.com+@vue+reactivity@3.2.41/node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","../../node_modules/.pnpm/registry.npmmirror.com+@vue+runtime-core@3.2.41/node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js","../../node_modules/.pnpm/registry.npmmirror.com+@vue+runtime-dom@3.2.41/node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/validate.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/basic.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/props.mjs","../../node_modules/.pnpm/registry.npmmirror.com+@vant+use@1.4.3/node_modules/@vant/use/dist/index.esm.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/dom.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/format.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/deep-assign.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/locale/lang/zh-CN.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/locale/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/create.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/constant.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/utils/with-install.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/composables/use-expose.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/composables/use-route.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/badge/Badge.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/badge/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/composables/use-global-z-index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/config-provider/ConfigProvider.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/icon/Icon.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/icon/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/loading/Loading.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/loading/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/button/Button.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/button/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/cell/Cell.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/cell/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/form/Form.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/form/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/field/utils.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/composables/use-id.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/field/Field.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/field/index.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/cell-group/CellGroup.mjs","../../node_modules/.pnpm/registry.npmmirror.com+vant@3.6.5_vue@3.2.41/node_modules/vant/es/cell-group/index.mjs","../../src/components/oasisengine-demo/components/dialog.vue","../../node_modules/.pnpm/registry.npmmirror.com+@oasis-engine+math@0.8.2/node_modules/@oasis-engine/math/dist/module.js","../../node_modules/.pnpm/registry.npmmirror.com+@oasis-engine+core@0.8.2/node_modules/@oasis-engine/core/dist/module.js","../../node_modules/.pnpm/registry.npmmirror.com+@oasis-engine+rhi-webgl@0.8.2/node_modules/@oasis-engine/rhi-webgl/dist/module.js","../../node_modules/.pnpm/registry.npmmirror.com+@oasis-engine+draco@0.8.2/node_modules/@oasis-engine/draco/dist/module.js","../../node_modules/.pnpm/registry.npmmirror.com+@oasis-engine+loader@0.8.2/node_modules/@oasis-engine/loader/dist/module.js","../../node_modules/.pnpm/registry.npmmirror.com+oasis-engine@0.8.2/node_modules/oasis-engine/dist/module.js","../../src/components/oasisengine-demo/components/JoyStick.ts","../../src/components/oasisengine-demo/components/JoyStick.vue","../../node_modules/.pnpm/registry.npmmirror.com+@oasis-engine+physics-physx@0.8.2_oasis-engine@0.8.2/node_modules/@oasis-engine/physics-physx/dist/module.js","../../node_modules/_@oasis-engine-toolkit_auxiliary-lines@0.8.0-beta.3@@oasis-engine-toolkit/auxiliary-lines/dist/module.js","../../src/components/oasisengine-demo/components/process-bar.vue","../../src/components/oasisengine-demo/scences/scene.ts","../../node_modules/_@oasis-engine-toolkit_controls@0.8.0-beta.3@@oasis-engine-toolkit/controls/dist/module.js","../../node_modules/.pnpm/registry.npmmirror.com+@tweenjs+tween.js@18.6.4/node_modules/@tweenjs/tween.js/dist/tween.esm.js","../../src/components/oasisengine-demo/scences/model-scene-2.ts","../../src/components/oasisengine-demo/init.ts","../../src/components/oasisengine-demo/ControllerScript.ts","../../src/components/oasisengine-demo/index.vue","../../src/main.ts"],"sourcesContent":["__VITE_IS_MODERN__&&(function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n}());","/**\n * Make a map and return a function for checking if a key\n * is in that map.\n * IMPORTANT: all calls of this function must be prefixed with\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\n * So that rollup can tree-shake them if necessary.\n */\nfunction makeMap(str, expectsLowerCase) {\n    const map = Object.create(null);\n    const list = str.split(',');\n    for (let i = 0; i < list.length; i++) {\n        map[list[i]] = true;\n    }\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\n}\n\n/**\n * dev only flag -> name mapping\n */\nconst PatchFlagNames = {\n    [1 /* PatchFlags.TEXT */]: `TEXT`,\n    [2 /* PatchFlags.CLASS */]: `CLASS`,\n    [4 /* PatchFlags.STYLE */]: `STYLE`,\n    [8 /* PatchFlags.PROPS */]: `PROPS`,\n    [16 /* PatchFlags.FULL_PROPS */]: `FULL_PROPS`,\n    [32 /* PatchFlags.HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\n    [64 /* PatchFlags.STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\n    [128 /* PatchFlags.KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\n    [256 /* PatchFlags.UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\n    [512 /* PatchFlags.NEED_PATCH */]: `NEED_PATCH`,\n    [1024 /* PatchFlags.DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\n    [2048 /* PatchFlags.DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\n    [-1 /* PatchFlags.HOISTED */]: `HOISTED`,\n    [-2 /* PatchFlags.BAIL */]: `BAIL`\n};\n\n/**\n * Dev only\n */\nconst slotFlagsText = {\n    [1 /* SlotFlags.STABLE */]: 'STABLE',\n    [2 /* SlotFlags.DYNAMIC */]: 'DYNAMIC',\n    [3 /* SlotFlags.FORWARDED */]: 'FORWARDED'\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n    // Split the content into individual lines but capture the newline sequence\n    // that separated each line. This is important because the actual sequence is\n    // needed to properly take into account the full line length for offset\n    // comparison\n    let lines = source.split(/(\\r?\\n)/);\n    // Separate the lines and newline sequences into separate arrays for easier referencing\n    const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n    lines = lines.filter((_, idx) => idx % 2 === 0);\n    let count = 0;\n    const res = [];\n    for (let i = 0; i < lines.length; i++) {\n        count +=\n            lines[i].length +\n                ((newlineSequences[i] && newlineSequences[i].length) || 0);\n        if (count >= start) {\n            for (let j = i - range; j <= i + range || end > count; j++) {\n                if (j < 0 || j >= lines.length)\n                    continue;\n                const line = j + 1;\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\n                const lineLength = lines[j].length;\n                const newLineSeqLength = (newlineSequences[j] && newlineSequences[j].length) || 0;\n                if (j === i) {\n                    // push underline\n                    const pad = start - (count - (lineLength + newLineSeqLength));\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\n                }\n                else if (j > i) {\n                    if (end > count) {\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\n                        res.push(`   |  ` + '^'.repeat(length));\n                    }\n                    count += lineLength + newLineSeqLength;\n                }\n            }\n            break;\n        }\n    }\n    return res.join('\\n');\n}\n\n/**\n * On the client we only need to offer special cases for boolean attributes that\n * have different names from their corresponding dom properties:\n * - itemscope -> N/A\n * - allowfullscreen -> allowFullscreen\n * - formnovalidate -> formNoValidate\n * - ismap -> isMap\n * - nomodule -> noModule\n * - novalidate -> noValidate\n * - readonly -> readOnly\n */\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\n/**\n * The full list is needed during SSR to produce the correct initial markup.\n */\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\n    `loop,open,required,reversed,scoped,seamless,` +\n    `checked,muted,multiple,selected`);\n/**\n * Boolean attributes should be included if the value is truthy or ''.\n * e.g. `<select multiple>` compiles to `{ multiple: '' }`\n */\nfunction includeBooleanAttr(value) {\n    return !!value || value === '';\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n    if (attrValidationCache.hasOwnProperty(name)) {\n        return attrValidationCache[name];\n    }\n    const isUnsafe = unsafeAttrCharRE.test(name);\n    if (isUnsafe) {\n        console.error(`unsafe attribute name: ${name}`);\n    }\n    return (attrValidationCache[name] = !isUnsafe);\n}\nconst propsToAttrMap = {\n    acceptCharset: 'accept-charset',\n    className: 'class',\n    htmlFor: 'for',\n    httpEquiv: 'http-equiv'\n};\n/**\n * CSS properties that accept plain numbers\n */\nconst isNoUnitNumericStyleProp = /*#__PURE__*/ makeMap(`animation-iteration-count,border-image-outset,border-image-slice,` +\n    `border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,` +\n    `columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,` +\n    `grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,` +\n    `grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,` +\n    `line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,` +\n    // SVG\n    `fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,` +\n    `stroke-miterlimit,stroke-opacity,stroke-width`);\n/**\n * Known attributes, this is used for stringification of runtime static nodes\n * so that we don't stringify bindings that cannot be set from HTML.\n * Don't also forget to allow `data-*` and `aria-*`!\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\n */\nconst isKnownHtmlAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\n    `value,width,wrap`);\n/**\n * Generated from https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute\n */\nconst isKnownSvgAttr = /*#__PURE__*/ makeMap(`xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,` +\n    `arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,` +\n    `baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,` +\n    `clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,` +\n    `color-interpolation-filters,color-profile,color-rendering,` +\n    `contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,` +\n    `descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,` +\n    `dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,` +\n    `fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,` +\n    `font-family,font-size,font-size-adjust,font-stretch,font-style,` +\n    `font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,` +\n    `glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,` +\n    `gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,` +\n    `horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,` +\n    `k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,` +\n    `lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,` +\n    `marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,` +\n    `mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,` +\n    `name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,` +\n    `overflow,overline-position,overline-thickness,panose-1,paint-order,path,` +\n    `pathLength,patternContentUnits,patternTransform,patternUnits,ping,` +\n    `pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,` +\n    `preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,` +\n    `rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,` +\n    `restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,` +\n    `specularConstant,specularExponent,speed,spreadMethod,startOffset,` +\n    `stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,` +\n    `strikethrough-position,strikethrough-thickness,string,stroke,` +\n    `stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,` +\n    `stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,` +\n    `systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,` +\n    `text-decoration,text-rendering,textLength,to,transform,transform-origin,` +\n    `type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,` +\n    `unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,` +\n    `v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,` +\n    `vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,` +\n    `writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,` +\n    `xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,` +\n    `xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`);\n\nfunction normalizeStyle(value) {\n    if (isArray(value)) {\n        const res = {};\n        for (let i = 0; i < value.length; i++) {\n            const item = value[i];\n            const normalized = isString(item)\n                ? parseStringStyle(item)\n                : normalizeStyle(item);\n            if (normalized) {\n                for (const key in normalized) {\n                    res[key] = normalized[key];\n                }\n            }\n        }\n        return res;\n    }\n    else if (isString(value)) {\n        return value;\n    }\n    else if (isObject(value)) {\n        return value;\n    }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:(.+)/;\nfunction parseStringStyle(cssText) {\n    const ret = {};\n    cssText.split(listDelimiterRE).forEach(item => {\n        if (item) {\n            const tmp = item.split(propertyDelimiterRE);\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n        }\n    });\n    return ret;\n}\nfunction stringifyStyle(styles) {\n    let ret = '';\n    if (!styles || isString(styles)) {\n        return ret;\n    }\n    for (const key in styles) {\n        const value = styles[key];\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n        if (isString(value) ||\n            (typeof value === 'number' && isNoUnitNumericStyleProp(normalizedKey))) {\n            // only render valid values\n            ret += `${normalizedKey}:${value};`;\n        }\n    }\n    return ret;\n}\nfunction normalizeClass(value) {\n    let res = '';\n    if (isString(value)) {\n        res = value;\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            const normalized = normalizeClass(value[i]);\n            if (normalized) {\n                res += normalized + ' ';\n            }\n        }\n    }\n    else if (isObject(value)) {\n        for (const name in value) {\n            if (value[name]) {\n                res += name + ' ';\n            }\n        }\n    }\n    return res.trim();\n}\nfunction normalizeProps(props) {\n    if (!props)\n        return null;\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n        props.class = normalizeClass(klass);\n    }\n    if (style) {\n        props.style = normalizeStyle(style);\n    }\n    return props;\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\n    'header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,' +\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\n    'data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,' +\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\n    'option,output,progress,select,textarea,details,dialog,menu,' +\n    'summary,template,blockquote,iframe,tfoot';\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\n    'feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\n    'text,textPath,title,tspan,unknown,use,view';\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\n/**\n * Compiler only.\n * Do NOT use in runtime code paths unless behind `(process.env.NODE_ENV !== 'production')` flag.\n */\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n    const str = '' + string;\n    const match = escapeRE.exec(str);\n    if (!match) {\n        return str;\n    }\n    let html = '';\n    let escaped;\n    let index;\n    let lastIndex = 0;\n    for (index = match.index; index < str.length; index++) {\n        switch (str.charCodeAt(index)) {\n            case 34: // \"\n                escaped = '&quot;';\n                break;\n            case 38: // &\n                escaped = '&amp;';\n                break;\n            case 39: // '\n                escaped = '&#39;';\n                break;\n            case 60: // <\n                escaped = '&lt;';\n                break;\n            case 62: // >\n                escaped = '&gt;';\n                break;\n            default:\n                continue;\n        }\n        if (lastIndex !== index) {\n            html += str.slice(lastIndex, index);\n        }\n        lastIndex = index + 1;\n        html += escaped;\n    }\n    return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\n// https://www.w3.org/TR/html52/syntax.html#comments\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n    return src.replace(commentStripRE, '');\n}\n\nfunction looseCompareArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let equal = true;\n    for (let i = 0; equal && i < a.length; i++) {\n        equal = looseEqual(a[i], b[i]);\n    }\n    return equal;\n}\nfunction looseEqual(a, b) {\n    if (a === b)\n        return true;\n    let aValidType = isDate(a);\n    let bValidType = isDate(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n    }\n    aValidType = isSymbol(a);\n    bValidType = isSymbol(b);\n    if (aValidType || bValidType) {\n        return a === b;\n    }\n    aValidType = isArray(a);\n    bValidType = isArray(b);\n    if (aValidType || bValidType) {\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n    }\n    aValidType = isObject(a);\n    bValidType = isObject(b);\n    if (aValidType || bValidType) {\n        /* istanbul ignore if: this if will probably never be called */\n        if (!aValidType || !bValidType) {\n            return false;\n        }\n        const aKeysCount = Object.keys(a).length;\n        const bKeysCount = Object.keys(b).length;\n        if (aKeysCount !== bKeysCount) {\n            return false;\n        }\n        for (const key in a) {\n            const aHasKey = a.hasOwnProperty(key);\n            const bHasKey = b.hasOwnProperty(key);\n            if ((aHasKey && !bHasKey) ||\n                (!aHasKey && bHasKey) ||\n                !looseEqual(a[key], b[key])) {\n                return false;\n            }\n        }\n    }\n    return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n    return arr.findIndex(item => looseEqual(item, val));\n}\n\n/**\n * For converting {{ interpolation }} values to displayed strings.\n * @private\n */\nconst toDisplayString = (val) => {\n    return isString(val)\n        ? val\n        : val == null\n            ? ''\n            : isArray(val) ||\n                (isObject(val) &&\n                    (val.toString === objectToString || !isFunction(val.toString)))\n                ? JSON.stringify(val, replacer, 2)\n                : String(val);\n};\nconst replacer = (_key, val) => {\n    // can't use isRef here since @vue/shared has no deps\n    if (val && val.__v_isRef) {\n        return replacer(_key, val.value);\n    }\n    else if (isMap(val)) {\n        return {\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\n                entries[`${key} =>`] = val;\n                return entries;\n            }, {})\n        };\n    }\n    else if (isSet(val)) {\n        return {\n            [`Set(${val.size})`]: [...val.values()]\n        };\n    }\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n        return String(val);\n    }\n    return val;\n};\n\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\n    ? Object.freeze({})\n    : {};\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\nconst NOOP = () => { };\n/**\n * Always return false.\n */\nconst NO = () => false;\nconst onRE = /^on[^a-z]/;\nconst isOn = (key) => onRE.test(key);\nconst isModelListener = (key) => key.startsWith('onUpdate:');\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n    const i = arr.indexOf(el);\n    if (i > -1) {\n        arr.splice(i, 1);\n    }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === '[object Map]';\nconst isSet = (val) => toTypeString(val) === '[object Set]';\nconst isDate = (val) => toTypeString(val) === '[object Date]';\nconst isFunction = (val) => typeof val === 'function';\nconst isString = (val) => typeof val === 'string';\nconst isSymbol = (val) => typeof val === 'symbol';\nconst isObject = (val) => val !== null && typeof val === 'object';\nconst isPromise = (val) => {\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n    // extract \"RawType\" from strings like \"[object RawType]\"\n    return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\nconst isIntegerKey = (key) => isString(key) &&\n    key !== 'NaN' &&\n    key[0] !== '-' &&\n    '' + parseInt(key, 10) === key;\nconst isReservedProp = /*#__PURE__*/ makeMap(\n// the leading comma is intentional so empty string \"\" is also included\n',key,ref,ref_for,ref_key,' +\n    'onVnodeBeforeMount,onVnodeMounted,' +\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo');\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nconst camelizeRE = /-(\\w)/g;\n/**\n * @private\n */\nconst camelize = cacheStringFunction((str) => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\n});\nconst hyphenateRE = /\\B([A-Z])/g;\n/**\n * @private\n */\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\n/**\n * @private\n */\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\n/**\n * @private\n */\nconst toHandlerKey = cacheStringFunction((str) => str ? `on${capitalize(str)}` : ``);\n// compare whether a value has changed, accounting for NaN.\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, arg) => {\n    for (let i = 0; i < fns.length; i++) {\n        fns[i](arg);\n    }\n};\nconst def = (obj, key, value) => {\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable: false,\n        value\n    });\n};\nconst toNumber = (val) => {\n    const n = parseFloat(val);\n    return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n    return (_globalThis ||\n        (_globalThis =\n            typeof globalThis !== 'undefined'\n                ? globalThis\n                : typeof self !== 'undefined'\n                    ? self\n                    : typeof window !== 'undefined'\n                        ? window\n                        : typeof global !== 'undefined'\n                            ? global\n                            : {}));\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n    return identRE.test(name)\n        ? `__props.${name}`\n        : `__props[${JSON.stringify(name)}]`;\n}\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, genPropsAccessExp, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownSvgAttr, isMap, isModelListener, isNoUnitNumericStyleProp, isObject, isOn, isPlainObject, isPromise, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","import { extend, isArray, isMap, isIntegerKey, hasOwn, isSymbol, isObject, hasChanged, makeMap, capitalize, toRawType, def, isFunction, NOOP } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n    console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n    constructor(detached = false) {\n        this.detached = detached;\n        /**\n         * @internal\n         */\n        this.active = true;\n        /**\n         * @internal\n         */\n        this.effects = [];\n        /**\n         * @internal\n         */\n        this.cleanups = [];\n        this.parent = activeEffectScope;\n        if (!detached && activeEffectScope) {\n            this.index =\n                (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(this) - 1;\n        }\n    }\n    run(fn) {\n        if (this.active) {\n            const currentEffectScope = activeEffectScope;\n            try {\n                activeEffectScope = this;\n                return fn();\n            }\n            finally {\n                activeEffectScope = currentEffectScope;\n            }\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`cannot run an inactive effect scope.`);\n        }\n    }\n    /**\n     * This should only be called on non-detached scopes\n     * @internal\n     */\n    on() {\n        activeEffectScope = this;\n    }\n    /**\n     * This should only be called on non-detached scopes\n     * @internal\n     */\n    off() {\n        activeEffectScope = this.parent;\n    }\n    stop(fromParent) {\n        if (this.active) {\n            let i, l;\n            for (i = 0, l = this.effects.length; i < l; i++) {\n                this.effects[i].stop();\n            }\n            for (i = 0, l = this.cleanups.length; i < l; i++) {\n                this.cleanups[i]();\n            }\n            if (this.scopes) {\n                for (i = 0, l = this.scopes.length; i < l; i++) {\n                    this.scopes[i].stop(true);\n                }\n            }\n            // nested scope, dereference from parent to avoid memory leaks\n            if (!this.detached && this.parent && !fromParent) {\n                // optimized O(1) removal\n                const last = this.parent.scopes.pop();\n                if (last && last !== this) {\n                    this.parent.scopes[this.index] = last;\n                    last.index = this.index;\n                }\n            }\n            this.parent = undefined;\n            this.active = false;\n        }\n    }\n}\nfunction effectScope(detached) {\n    return new EffectScope(detached);\n}\nfunction recordEffectScope(effect, scope = activeEffectScope) {\n    if (scope && scope.active) {\n        scope.effects.push(effect);\n    }\n}\nfunction getCurrentScope() {\n    return activeEffectScope;\n}\nfunction onScopeDispose(fn) {\n    if (activeEffectScope) {\n        activeEffectScope.cleanups.push(fn);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`onScopeDispose() is called when there is no active effect scope` +\n            ` to be associated with.`);\n    }\n}\n\nconst createDep = (effects) => {\n    const dep = new Set(effects);\n    dep.w = 0;\n    dep.n = 0;\n    return dep;\n};\nconst wasTracked = (dep) => (dep.w & trackOpBit) > 0;\nconst newTracked = (dep) => (dep.n & trackOpBit) > 0;\nconst initDepMarkers = ({ deps }) => {\n    if (deps.length) {\n        for (let i = 0; i < deps.length; i++) {\n            deps[i].w |= trackOpBit; // set was tracked\n        }\n    }\n};\nconst finalizeDepMarkers = (effect) => {\n    const { deps } = effect;\n    if (deps.length) {\n        let ptr = 0;\n        for (let i = 0; i < deps.length; i++) {\n            const dep = deps[i];\n            if (wasTracked(dep) && !newTracked(dep)) {\n                dep.delete(effect);\n            }\n            else {\n                deps[ptr++] = dep;\n            }\n            // clear bits\n            dep.w &= ~trackOpBit;\n            dep.n &= ~trackOpBit;\n        }\n        deps.length = ptr;\n    }\n};\n\nconst targetMap = new WeakMap();\n// The number of effects currently being tracked recursively.\nlet effectTrackDepth = 0;\nlet trackOpBit = 1;\n/**\n * The bitwise track markers support at most 30 levels of recursion.\n * This value is chosen to enable modern JS engines to use a SMI on all platforms.\n * When recursion depth is greater, fall back to using a full cleanup.\n */\nconst maxMarkerBits = 30;\nlet activeEffect;\nconst ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'iterate' : '');\nconst MAP_KEY_ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'Map key iterate' : '');\nclass ReactiveEffect {\n    constructor(fn, scheduler = null, scope) {\n        this.fn = fn;\n        this.scheduler = scheduler;\n        this.active = true;\n        this.deps = [];\n        this.parent = undefined;\n        recordEffectScope(this, scope);\n    }\n    run() {\n        if (!this.active) {\n            return this.fn();\n        }\n        let parent = activeEffect;\n        let lastShouldTrack = shouldTrack;\n        while (parent) {\n            if (parent === this) {\n                return;\n            }\n            parent = parent.parent;\n        }\n        try {\n            this.parent = activeEffect;\n            activeEffect = this;\n            shouldTrack = true;\n            trackOpBit = 1 << ++effectTrackDepth;\n            if (effectTrackDepth <= maxMarkerBits) {\n                initDepMarkers(this);\n            }\n            else {\n                cleanupEffect(this);\n            }\n            return this.fn();\n        }\n        finally {\n            if (effectTrackDepth <= maxMarkerBits) {\n                finalizeDepMarkers(this);\n            }\n            trackOpBit = 1 << --effectTrackDepth;\n            activeEffect = this.parent;\n            shouldTrack = lastShouldTrack;\n            this.parent = undefined;\n            if (this.deferStop) {\n                this.stop();\n            }\n        }\n    }\n    stop() {\n        // stopped while running itself - defer the cleanup\n        if (activeEffect === this) {\n            this.deferStop = true;\n        }\n        else if (this.active) {\n            cleanupEffect(this);\n            if (this.onStop) {\n                this.onStop();\n            }\n            this.active = false;\n        }\n    }\n}\nfunction cleanupEffect(effect) {\n    const { deps } = effect;\n    if (deps.length) {\n        for (let i = 0; i < deps.length; i++) {\n            deps[i].delete(effect);\n        }\n        deps.length = 0;\n    }\n}\nfunction effect(fn, options) {\n    if (fn.effect) {\n        fn = fn.effect.fn;\n    }\n    const _effect = new ReactiveEffect(fn);\n    if (options) {\n        extend(_effect, options);\n        if (options.scope)\n            recordEffectScope(_effect, options.scope);\n    }\n    if (!options || !options.lazy) {\n        _effect.run();\n    }\n    const runner = _effect.run.bind(_effect);\n    runner.effect = _effect;\n    return runner;\n}\nfunction stop(runner) {\n    runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n    trackStack.push(shouldTrack);\n    shouldTrack = false;\n}\nfunction enableTracking() {\n    trackStack.push(shouldTrack);\n    shouldTrack = true;\n}\nfunction resetTracking() {\n    const last = trackStack.pop();\n    shouldTrack = last === undefined ? true : last;\n}\nfunction track(target, type, key) {\n    if (shouldTrack && activeEffect) {\n        let depsMap = targetMap.get(target);\n        if (!depsMap) {\n            targetMap.set(target, (depsMap = new Map()));\n        }\n        let dep = depsMap.get(key);\n        if (!dep) {\n            depsMap.set(key, (dep = createDep()));\n        }\n        const eventInfo = (process.env.NODE_ENV !== 'production')\n            ? { effect: activeEffect, target, type, key }\n            : undefined;\n        trackEffects(dep, eventInfo);\n    }\n}\nfunction trackEffects(dep, debuggerEventExtraInfo) {\n    let shouldTrack = false;\n    if (effectTrackDepth <= maxMarkerBits) {\n        if (!newTracked(dep)) {\n            dep.n |= trackOpBit; // set newly tracked\n            shouldTrack = !wasTracked(dep);\n        }\n    }\n    else {\n        // Full cleanup mode.\n        shouldTrack = !dep.has(activeEffect);\n    }\n    if (shouldTrack) {\n        dep.add(activeEffect);\n        activeEffect.deps.push(dep);\n        if ((process.env.NODE_ENV !== 'production') && activeEffect.onTrack) {\n            activeEffect.onTrack(Object.assign({ effect: activeEffect }, debuggerEventExtraInfo));\n        }\n    }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n    const depsMap = targetMap.get(target);\n    if (!depsMap) {\n        // never been tracked\n        return;\n    }\n    let deps = [];\n    if (type === \"clear\" /* TriggerOpTypes.CLEAR */) {\n        // collection being cleared\n        // trigger all effects for target\n        deps = [...depsMap.values()];\n    }\n    else if (key === 'length' && isArray(target)) {\n        depsMap.forEach((dep, key) => {\n            if (key === 'length' || key >= newValue) {\n                deps.push(dep);\n            }\n        });\n    }\n    else {\n        // schedule runs for SET | ADD | DELETE\n        if (key !== void 0) {\n            deps.push(depsMap.get(key));\n        }\n        // also run for iteration key on ADD | DELETE | Map.SET\n        switch (type) {\n            case \"add\" /* TriggerOpTypes.ADD */:\n                if (!isArray(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                    if (isMap(target)) {\n                        deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n                    }\n                }\n                else if (isIntegerKey(key)) {\n                    // new index added to array -> length changes\n                    deps.push(depsMap.get('length'));\n                }\n                break;\n            case \"delete\" /* TriggerOpTypes.DELETE */:\n                if (!isArray(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                    if (isMap(target)) {\n                        deps.push(depsMap.get(MAP_KEY_ITERATE_KEY));\n                    }\n                }\n                break;\n            case \"set\" /* TriggerOpTypes.SET */:\n                if (isMap(target)) {\n                    deps.push(depsMap.get(ITERATE_KEY));\n                }\n                break;\n        }\n    }\n    const eventInfo = (process.env.NODE_ENV !== 'production')\n        ? { target, type, key, newValue, oldValue, oldTarget }\n        : undefined;\n    if (deps.length === 1) {\n        if (deps[0]) {\n            if ((process.env.NODE_ENV !== 'production')) {\n                triggerEffects(deps[0], eventInfo);\n            }\n            else {\n                triggerEffects(deps[0]);\n            }\n        }\n    }\n    else {\n        const effects = [];\n        for (const dep of deps) {\n            if (dep) {\n                effects.push(...dep);\n            }\n        }\n        if ((process.env.NODE_ENV !== 'production')) {\n            triggerEffects(createDep(effects), eventInfo);\n        }\n        else {\n            triggerEffects(createDep(effects));\n        }\n    }\n}\nfunction triggerEffects(dep, debuggerEventExtraInfo) {\n    // spread into array for stabilization\n    const effects = isArray(dep) ? dep : [...dep];\n    for (const effect of effects) {\n        if (effect.computed) {\n            triggerEffect(effect, debuggerEventExtraInfo);\n        }\n    }\n    for (const effect of effects) {\n        if (!effect.computed) {\n            triggerEffect(effect, debuggerEventExtraInfo);\n        }\n    }\n}\nfunction triggerEffect(effect, debuggerEventExtraInfo) {\n    if (effect !== activeEffect || effect.allowRecurse) {\n        if ((process.env.NODE_ENV !== 'production') && effect.onTrigger) {\n            effect.onTrigger(extend({ effect }, debuggerEventExtraInfo));\n        }\n        if (effect.scheduler) {\n            effect.scheduler();\n        }\n        else {\n            effect.run();\n        }\n    }\n}\n\nconst isNonTrackableKeys = /*#__PURE__*/ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n/*#__PURE__*/\nObject.getOwnPropertyNames(Symbol)\n    // ios10.x Object.getOwnPropertyNames(Symbol) can enumerate 'arguments' and 'caller'\n    // but accessing them on Symbol leads to TypeError because Symbol is a strict mode\n    // function\n    .filter(key => key !== 'arguments' && key !== 'caller')\n    .map(key => Symbol[key])\n    .filter(isSymbol));\nconst get = /*#__PURE__*/ createGetter();\nconst shallowGet = /*#__PURE__*/ createGetter(false, true);\nconst readonlyGet = /*#__PURE__*/ createGetter(true);\nconst shallowReadonlyGet = /*#__PURE__*/ createGetter(true, true);\nconst arrayInstrumentations = /*#__PURE__*/ createArrayInstrumentations();\nfunction createArrayInstrumentations() {\n    const instrumentations = {};\n    ['includes', 'indexOf', 'lastIndexOf'].forEach(key => {\n        instrumentations[key] = function (...args) {\n            const arr = toRaw(this);\n            for (let i = 0, l = this.length; i < l; i++) {\n                track(arr, \"get\" /* TrackOpTypes.GET */, i + '');\n            }\n            // we run the method using the original args first (which may be reactive)\n            const res = arr[key](...args);\n            if (res === -1 || res === false) {\n                // if that didn't work, run it again using raw values.\n                return arr[key](...args.map(toRaw));\n            }\n            else {\n                return res;\n            }\n        };\n    });\n    ['push', 'pop', 'shift', 'unshift', 'splice'].forEach(key => {\n        instrumentations[key] = function (...args) {\n            pauseTracking();\n            const res = toRaw(this)[key].apply(this, args);\n            resetTracking();\n            return res;\n        };\n    });\n    return instrumentations;\n}\nfunction createGetter(isReadonly = false, shallow = false) {\n    return function get(target, key, receiver) {\n        if (key === \"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */) {\n            return !isReadonly;\n        }\n        else if (key === \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */) {\n            return isReadonly;\n        }\n        else if (key === \"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */) {\n            return shallow;\n        }\n        else if (key === \"__v_raw\" /* ReactiveFlags.RAW */ &&\n            receiver ===\n                (isReadonly\n                    ? shallow\n                        ? shallowReadonlyMap\n                        : readonlyMap\n                    : shallow\n                        ? shallowReactiveMap\n                        : reactiveMap).get(target)) {\n            return target;\n        }\n        const targetIsArray = isArray(target);\n        if (!isReadonly && targetIsArray && hasOwn(arrayInstrumentations, key)) {\n            return Reflect.get(arrayInstrumentations, key, receiver);\n        }\n        const res = Reflect.get(target, key, receiver);\n        if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n            return res;\n        }\n        if (!isReadonly) {\n            track(target, \"get\" /* TrackOpTypes.GET */, key);\n        }\n        if (shallow) {\n            return res;\n        }\n        if (isRef(res)) {\n            // ref unwrapping - skip unwrap for Array + integer key.\n            return targetIsArray && isIntegerKey(key) ? res : res.value;\n        }\n        if (isObject(res)) {\n            // Convert returned value into a proxy as well. we do the isObject check\n            // here to avoid invalid value warning. Also need to lazy access readonly\n            // and reactive here to avoid circular dependency.\n            return isReadonly ? readonly(res) : reactive(res);\n        }\n        return res;\n    };\n}\nconst set = /*#__PURE__*/ createSetter();\nconst shallowSet = /*#__PURE__*/ createSetter(true);\nfunction createSetter(shallow = false) {\n    return function set(target, key, value, receiver) {\n        let oldValue = target[key];\n        if (isReadonly(oldValue) && isRef(oldValue) && !isRef(value)) {\n            return false;\n        }\n        if (!shallow) {\n            if (!isShallow(value) && !isReadonly(value)) {\n                oldValue = toRaw(oldValue);\n                value = toRaw(value);\n            }\n            if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n                oldValue.value = value;\n                return true;\n            }\n        }\n        const hadKey = isArray(target) && isIntegerKey(key)\n            ? Number(key) < target.length\n            : hasOwn(target, key);\n        const result = Reflect.set(target, key, value, receiver);\n        // don't trigger if target is something up in the prototype chain of original\n        if (target === toRaw(receiver)) {\n            if (!hadKey) {\n                trigger(target, \"add\" /* TriggerOpTypes.ADD */, key, value);\n            }\n            else if (hasChanged(value, oldValue)) {\n                trigger(target, \"set\" /* TriggerOpTypes.SET */, key, value, oldValue);\n            }\n        }\n        return result;\n    };\n}\nfunction deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n        trigger(target, \"delete\" /* TriggerOpTypes.DELETE */, key, undefined, oldValue);\n    }\n    return result;\n}\nfunction has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n        track(target, \"has\" /* TrackOpTypes.HAS */, key);\n    }\n    return result;\n}\nfunction ownKeys(target) {\n    track(target, \"iterate\" /* TrackOpTypes.ITERATE */, isArray(target) ? 'length' : ITERATE_KEY);\n    return Reflect.ownKeys(target);\n}\nconst mutableHandlers = {\n    get,\n    set,\n    deleteProperty,\n    has,\n    ownKeys\n};\nconst readonlyHandlers = {\n    get: readonlyGet,\n    set(target, key) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        }\n        return true;\n    },\n    deleteProperty(target, key) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\n        }\n        return true;\n    }\n};\nconst shallowReactiveHandlers = /*#__PURE__*/ extend({}, mutableHandlers, {\n    get: shallowGet,\n    set: shallowSet\n});\n// Props handlers are special in the sense that it should not unwrap top-level\n// refs (in order to allow refs to be explicitly passed down), but should\n// retain the reactivity of the normal readonly object.\nconst shallowReadonlyHandlers = /*#__PURE__*/ extend({}, readonlyHandlers, {\n    get: shallowReadonlyGet\n});\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction get$1(target, key, isReadonly = false, isShallow = false) {\n    // #1772: readonly(reactive(Map)) should return readonly + reactive version\n    // of the value\n    target = target[\"__v_raw\" /* ReactiveFlags.RAW */];\n    const rawTarget = toRaw(target);\n    const rawKey = toRaw(key);\n    if (!isReadonly) {\n        if (key !== rawKey) {\n            track(rawTarget, \"get\" /* TrackOpTypes.GET */, key);\n        }\n        track(rawTarget, \"get\" /* TrackOpTypes.GET */, rawKey);\n    }\n    const { has } = getProto(rawTarget);\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n    if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n    }\n    else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n    }\n    else if (target !== rawTarget) {\n        // #3602 readonly(reactive(Map))\n        // ensure that the nested reactive `Map` can do tracking for itself\n        target.get(key);\n    }\n}\nfunction has$1(key, isReadonly = false) {\n    const target = this[\"__v_raw\" /* ReactiveFlags.RAW */];\n    const rawTarget = toRaw(target);\n    const rawKey = toRaw(key);\n    if (!isReadonly) {\n        if (key !== rawKey) {\n            track(rawTarget, \"has\" /* TrackOpTypes.HAS */, key);\n        }\n        track(rawTarget, \"has\" /* TrackOpTypes.HAS */, rawKey);\n    }\n    return key === rawKey\n        ? target.has(key)\n        : target.has(key) || target.has(rawKey);\n}\nfunction size(target, isReadonly = false) {\n    target = target[\"__v_raw\" /* ReactiveFlags.RAW */];\n    !isReadonly && track(toRaw(target), \"iterate\" /* TrackOpTypes.ITERATE */, ITERATE_KEY);\n    return Reflect.get(target, 'size', target);\n}\nfunction add(value) {\n    value = toRaw(value);\n    const target = toRaw(this);\n    const proto = getProto(target);\n    const hadKey = proto.has.call(target, value);\n    if (!hadKey) {\n        target.add(value);\n        trigger(target, \"add\" /* TriggerOpTypes.ADD */, value, value);\n    }\n    return this;\n}\nfunction set$1(key, value) {\n    value = toRaw(value);\n    const target = toRaw(this);\n    const { has, get } = getProto(target);\n    let hadKey = has.call(target, key);\n    if (!hadKey) {\n        key = toRaw(key);\n        hadKey = has.call(target, key);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        checkIdentityKeys(target, has, key);\n    }\n    const oldValue = get.call(target, key);\n    target.set(key, value);\n    if (!hadKey) {\n        trigger(target, \"add\" /* TriggerOpTypes.ADD */, key, value);\n    }\n    else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\" /* TriggerOpTypes.SET */, key, value, oldValue);\n    }\n    return this;\n}\nfunction deleteEntry(key) {\n    const target = toRaw(this);\n    const { has, get } = getProto(target);\n    let hadKey = has.call(target, key);\n    if (!hadKey) {\n        key = toRaw(key);\n        hadKey = has.call(target, key);\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        checkIdentityKeys(target, has, key);\n    }\n    const oldValue = get ? get.call(target, key) : undefined;\n    // forward the operation before queueing reactions\n    const result = target.delete(key);\n    if (hadKey) {\n        trigger(target, \"delete\" /* TriggerOpTypes.DELETE */, key, undefined, oldValue);\n    }\n    return result;\n}\nfunction clear() {\n    const target = toRaw(this);\n    const hadItems = target.size !== 0;\n    const oldTarget = (process.env.NODE_ENV !== 'production')\n        ? isMap(target)\n            ? new Map(target)\n            : new Set(target)\n        : undefined;\n    // forward the operation before queueing reactions\n    const result = target.clear();\n    if (hadItems) {\n        trigger(target, \"clear\" /* TriggerOpTypes.CLEAR */, undefined, undefined, oldTarget);\n    }\n    return result;\n}\nfunction createForEach(isReadonly, isShallow) {\n    return function forEach(callback, thisArg) {\n        const observed = this;\n        const target = observed[\"__v_raw\" /* ReactiveFlags.RAW */];\n        const rawTarget = toRaw(target);\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n        !isReadonly && track(rawTarget, \"iterate\" /* TrackOpTypes.ITERATE */, ITERATE_KEY);\n        return target.forEach((value, key) => {\n            // important: make sure the callback is\n            // 1. invoked with the reactive map as `this` and 3rd arg\n            // 2. the value received should be a corresponding reactive/readonly.\n            return callback.call(thisArg, wrap(value), wrap(key), observed);\n        });\n    };\n}\nfunction createIterableMethod(method, isReadonly, isShallow) {\n    return function (...args) {\n        const target = this[\"__v_raw\" /* ReactiveFlags.RAW */];\n        const rawTarget = toRaw(target);\n        const targetIsMap = isMap(rawTarget);\n        const isPair = method === 'entries' || (method === Symbol.iterator && targetIsMap);\n        const isKeyOnly = method === 'keys' && targetIsMap;\n        const innerIterator = target[method](...args);\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\n        !isReadonly &&\n            track(rawTarget, \"iterate\" /* TrackOpTypes.ITERATE */, isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);\n        // return a wrapped iterator which returns observed versions of the\n        // values emitted from the real iterator\n        return {\n            // iterator protocol\n            next() {\n                const { value, done } = innerIterator.next();\n                return done\n                    ? { value, done }\n                    : {\n                        value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n                        done\n                    };\n            },\n            // iterable protocol\n            [Symbol.iterator]() {\n                return this;\n            }\n        };\n    };\n}\nfunction createReadonlyMethod(type) {\n    return function (...args) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n            console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));\n        }\n        return type === \"delete\" /* TriggerOpTypes.DELETE */ ? false : this;\n    };\n}\nfunction createInstrumentations() {\n    const mutableInstrumentations = {\n        get(key) {\n            return get$1(this, key);\n        },\n        get size() {\n            return size(this);\n        },\n        has: has$1,\n        add,\n        set: set$1,\n        delete: deleteEntry,\n        clear,\n        forEach: createForEach(false, false)\n    };\n    const shallowInstrumentations = {\n        get(key) {\n            return get$1(this, key, false, true);\n        },\n        get size() {\n            return size(this);\n        },\n        has: has$1,\n        add,\n        set: set$1,\n        delete: deleteEntry,\n        clear,\n        forEach: createForEach(false, true)\n    };\n    const readonlyInstrumentations = {\n        get(key) {\n            return get$1(this, key, true);\n        },\n        get size() {\n            return size(this, true);\n        },\n        has(key) {\n            return has$1.call(this, key, true);\n        },\n        add: createReadonlyMethod(\"add\" /* TriggerOpTypes.ADD */),\n        set: createReadonlyMethod(\"set\" /* TriggerOpTypes.SET */),\n        delete: createReadonlyMethod(\"delete\" /* TriggerOpTypes.DELETE */),\n        clear: createReadonlyMethod(\"clear\" /* TriggerOpTypes.CLEAR */),\n        forEach: createForEach(true, false)\n    };\n    const shallowReadonlyInstrumentations = {\n        get(key) {\n            return get$1(this, key, true, true);\n        },\n        get size() {\n            return size(this, true);\n        },\n        has(key) {\n            return has$1.call(this, key, true);\n        },\n        add: createReadonlyMethod(\"add\" /* TriggerOpTypes.ADD */),\n        set: createReadonlyMethod(\"set\" /* TriggerOpTypes.SET */),\n        delete: createReadonlyMethod(\"delete\" /* TriggerOpTypes.DELETE */),\n        clear: createReadonlyMethod(\"clear\" /* TriggerOpTypes.CLEAR */),\n        forEach: createForEach(true, true)\n    };\n    const iteratorMethods = ['keys', 'values', 'entries', Symbol.iterator];\n    iteratorMethods.forEach(method => {\n        mutableInstrumentations[method] = createIterableMethod(method, false, false);\n        readonlyInstrumentations[method] = createIterableMethod(method, true, false);\n        shallowInstrumentations[method] = createIterableMethod(method, false, true);\n        shallowReadonlyInstrumentations[method] = createIterableMethod(method, true, true);\n    });\n    return [\n        mutableInstrumentations,\n        readonlyInstrumentations,\n        shallowInstrumentations,\n        shallowReadonlyInstrumentations\n    ];\n}\nconst [mutableInstrumentations, readonlyInstrumentations, shallowInstrumentations, shallowReadonlyInstrumentations] = /* #__PURE__*/ createInstrumentations();\nfunction createInstrumentationGetter(isReadonly, shallow) {\n    const instrumentations = shallow\n        ? isReadonly\n            ? shallowReadonlyInstrumentations\n            : shallowInstrumentations\n        : isReadonly\n            ? readonlyInstrumentations\n            : mutableInstrumentations;\n    return (target, key, receiver) => {\n        if (key === \"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */) {\n            return !isReadonly;\n        }\n        else if (key === \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */) {\n            return isReadonly;\n        }\n        else if (key === \"__v_raw\" /* ReactiveFlags.RAW */) {\n            return target;\n        }\n        return Reflect.get(hasOwn(instrumentations, key) && key in target\n            ? instrumentations\n            : target, key, receiver);\n    };\n}\nconst mutableCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n    get: /*#__PURE__*/ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n    const rawKey = toRaw(key);\n    if (rawKey !== key && has.call(target, rawKey)) {\n        const type = toRawType(target);\n        console.warn(`Reactive ${type} contains both the raw and reactive ` +\n            `versions of the same object${type === `Map` ? ` as keys` : ``}, ` +\n            `which can lead to inconsistencies. ` +\n            `Avoid differentiating between the raw and reactive versions ` +\n            `of an object and only use the reactive version if possible.`);\n    }\n}\n\nconst reactiveMap = new WeakMap();\nconst shallowReactiveMap = new WeakMap();\nconst readonlyMap = new WeakMap();\nconst shallowReadonlyMap = new WeakMap();\nfunction targetTypeMap(rawType) {\n    switch (rawType) {\n        case 'Object':\n        case 'Array':\n            return 1 /* TargetType.COMMON */;\n        case 'Map':\n        case 'Set':\n        case 'WeakMap':\n        case 'WeakSet':\n            return 2 /* TargetType.COLLECTION */;\n        default:\n            return 0 /* TargetType.INVALID */;\n    }\n}\nfunction getTargetType(value) {\n    return value[\"__v_skip\" /* ReactiveFlags.SKIP */] || !Object.isExtensible(value)\n        ? 0 /* TargetType.INVALID */\n        : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n    // if trying to observe a readonly proxy, return the readonly version.\n    if (isReadonly(target)) {\n        return target;\n    }\n    return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);\n}\n/**\n * Return a shallowly-reactive copy of the original object, where only the root\n * level properties are reactive. It also does not auto-unwrap refs (even at the\n * root level).\n */\nfunction shallowReactive(target) {\n    return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);\n}\n/**\n * Creates a readonly copy of the original object. Note the returned copy is not\n * made reactive, but `readonly` can be called on an already reactive object.\n */\nfunction readonly(target) {\n    return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);\n}\n/**\n * Returns a reactive-copy of the original object, where only the root level\n * properties are readonly, and does NOT unwrap refs nor recursively convert\n * returned properties.\n * This is used for creating the props proxy object for stateful components.\n */\nfunction shallowReadonly(target) {\n    return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);\n}\nfunction createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {\n    if (!isObject(target)) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            console.warn(`value cannot be made reactive: ${String(target)}`);\n        }\n        return target;\n    }\n    // target is already a Proxy, return it.\n    // exception: calling readonly() on a reactive object\n    if (target[\"__v_raw\" /* ReactiveFlags.RAW */] &&\n        !(isReadonly && target[\"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */])) {\n        return target;\n    }\n    // target already has corresponding Proxy\n    const existingProxy = proxyMap.get(target);\n    if (existingProxy) {\n        return existingProxy;\n    }\n    // only specific value types can be observed.\n    const targetType = getTargetType(target);\n    if (targetType === 0 /* TargetType.INVALID */) {\n        return target;\n    }\n    const proxy = new Proxy(target, targetType === 2 /* TargetType.COLLECTION */ ? collectionHandlers : baseHandlers);\n    proxyMap.set(target, proxy);\n    return proxy;\n}\nfunction isReactive(value) {\n    if (isReadonly(value)) {\n        return isReactive(value[\"__v_raw\" /* ReactiveFlags.RAW */]);\n    }\n    return !!(value && value[\"__v_isReactive\" /* ReactiveFlags.IS_REACTIVE */]);\n}\nfunction isReadonly(value) {\n    return !!(value && value[\"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */]);\n}\nfunction isShallow(value) {\n    return !!(value && value[\"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */]);\n}\nfunction isProxy(value) {\n    return isReactive(value) || isReadonly(value);\n}\nfunction toRaw(observed) {\n    const raw = observed && observed[\"__v_raw\" /* ReactiveFlags.RAW */];\n    return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n    def(value, \"__v_skip\" /* ReactiveFlags.SKIP */, true);\n    return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction trackRefValue(ref) {\n    if (shouldTrack && activeEffect) {\n        ref = toRaw(ref);\n        if ((process.env.NODE_ENV !== 'production')) {\n            trackEffects(ref.dep || (ref.dep = createDep()), {\n                target: ref,\n                type: \"get\" /* TrackOpTypes.GET */,\n                key: 'value'\n            });\n        }\n        else {\n            trackEffects(ref.dep || (ref.dep = createDep()));\n        }\n    }\n}\nfunction triggerRefValue(ref, newVal) {\n    ref = toRaw(ref);\n    if (ref.dep) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            triggerEffects(ref.dep, {\n                target: ref,\n                type: \"set\" /* TriggerOpTypes.SET */,\n                key: 'value',\n                newValue: newVal\n            });\n        }\n        else {\n            triggerEffects(ref.dep);\n        }\n    }\n}\nfunction isRef(r) {\n    return !!(r && r.__v_isRef === true);\n}\nfunction ref(value) {\n    return createRef(value, false);\n}\nfunction shallowRef(value) {\n    return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n    if (isRef(rawValue)) {\n        return rawValue;\n    }\n    return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n    constructor(value, __v_isShallow) {\n        this.__v_isShallow = __v_isShallow;\n        this.dep = undefined;\n        this.__v_isRef = true;\n        this._rawValue = __v_isShallow ? value : toRaw(value);\n        this._value = __v_isShallow ? value : toReactive(value);\n    }\n    get value() {\n        trackRefValue(this);\n        return this._value;\n    }\n    set value(newVal) {\n        const useDirectValue = this.__v_isShallow || isShallow(newVal) || isReadonly(newVal);\n        newVal = useDirectValue ? newVal : toRaw(newVal);\n        if (hasChanged(newVal, this._rawValue)) {\n            this._rawValue = newVal;\n            this._value = useDirectValue ? newVal : toReactive(newVal);\n            triggerRefValue(this, newVal);\n        }\n    }\n}\nfunction triggerRef(ref) {\n    triggerRefValue(ref, (process.env.NODE_ENV !== 'production') ? ref.value : void 0);\n}\nfunction unref(ref) {\n    return isRef(ref) ? ref.value : ref;\n}\nconst shallowUnwrapHandlers = {\n    get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),\n    set: (target, key, value, receiver) => {\n        const oldValue = target[key];\n        if (isRef(oldValue) && !isRef(value)) {\n            oldValue.value = value;\n            return true;\n        }\n        else {\n            return Reflect.set(target, key, value, receiver);\n        }\n    }\n};\nfunction proxyRefs(objectWithRefs) {\n    return isReactive(objectWithRefs)\n        ? objectWithRefs\n        : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n    constructor(factory) {\n        this.dep = undefined;\n        this.__v_isRef = true;\n        const { get, set } = factory(() => trackRefValue(this), () => triggerRefValue(this));\n        this._get = get;\n        this._set = set;\n    }\n    get value() {\n        return this._get();\n    }\n    set value(newVal) {\n        this._set(newVal);\n    }\n}\nfunction customRef(factory) {\n    return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n    if ((process.env.NODE_ENV !== 'production') && !isProxy(object)) {\n        console.warn(`toRefs() expects a reactive object but received a plain one.`);\n    }\n    const ret = isArray(object) ? new Array(object.length) : {};\n    for (const key in object) {\n        ret[key] = toRef(object, key);\n    }\n    return ret;\n}\nclass ObjectRefImpl {\n    constructor(_object, _key, _defaultValue) {\n        this._object = _object;\n        this._key = _key;\n        this._defaultValue = _defaultValue;\n        this.__v_isRef = true;\n    }\n    get value() {\n        const val = this._object[this._key];\n        return val === undefined ? this._defaultValue : val;\n    }\n    set value(newVal) {\n        this._object[this._key] = newVal;\n    }\n}\nfunction toRef(object, key, defaultValue) {\n    const val = object[key];\n    return isRef(val)\n        ? val\n        : new ObjectRefImpl(object, key, defaultValue);\n}\n\nvar _a;\nclass ComputedRefImpl {\n    constructor(getter, _setter, isReadonly, isSSR) {\n        this._setter = _setter;\n        this.dep = undefined;\n        this.__v_isRef = true;\n        this[_a] = false;\n        this._dirty = true;\n        this.effect = new ReactiveEffect(getter, () => {\n            if (!this._dirty) {\n                this._dirty = true;\n                triggerRefValue(this);\n            }\n        });\n        this.effect.computed = this;\n        this.effect.active = this._cacheable = !isSSR;\n        this[\"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */] = isReadonly;\n    }\n    get value() {\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\n        const self = toRaw(this);\n        trackRefValue(self);\n        if (self._dirty || !self._cacheable) {\n            self._dirty = false;\n            self._value = self.effect.run();\n        }\n        return self._value;\n    }\n    set value(newValue) {\n        this._setter(newValue);\n    }\n}\n_a = \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */;\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n    let getter;\n    let setter;\n    const onlyGetter = isFunction(getterOrOptions);\n    if (onlyGetter) {\n        getter = getterOrOptions;\n        setter = (process.env.NODE_ENV !== 'production')\n            ? () => {\n                console.warn('Write operation failed: computed value is readonly');\n            }\n            : NOOP;\n    }\n    else {\n        getter = getterOrOptions.get;\n        setter = getterOrOptions.set;\n    }\n    const cRef = new ComputedRefImpl(getter, setter, onlyGetter || !setter, isSSR);\n    if ((process.env.NODE_ENV !== 'production') && debugOptions && !isSSR) {\n        cRef.effect.onTrack = debugOptions.onTrack;\n        cRef.effect.onTrigger = debugOptions.onTrigger;\n    }\n    return cRef;\n}\n\nvar _a$1;\nconst tick = /*#__PURE__*/ Promise.resolve();\nconst queue = [];\nlet queued = false;\nconst scheduler = (fn) => {\n    queue.push(fn);\n    if (!queued) {\n        queued = true;\n        tick.then(flush);\n    }\n};\nconst flush = () => {\n    for (let i = 0; i < queue.length; i++) {\n        queue[i]();\n    }\n    queue.length = 0;\n    queued = false;\n};\nclass DeferredComputedRefImpl {\n    constructor(getter) {\n        this.dep = undefined;\n        this._dirty = true;\n        this.__v_isRef = true;\n        this[_a$1] = true;\n        let compareTarget;\n        let hasCompareTarget = false;\n        let scheduled = false;\n        this.effect = new ReactiveEffect(getter, (computedTrigger) => {\n            if (this.dep) {\n                if (computedTrigger) {\n                    compareTarget = this._value;\n                    hasCompareTarget = true;\n                }\n                else if (!scheduled) {\n                    const valueToCompare = hasCompareTarget ? compareTarget : this._value;\n                    scheduled = true;\n                    hasCompareTarget = false;\n                    scheduler(() => {\n                        if (this.effect.active && this._get() !== valueToCompare) {\n                            triggerRefValue(this);\n                        }\n                        scheduled = false;\n                    });\n                }\n                // chained upstream computeds are notified synchronously to ensure\n                // value invalidation in case of sync access; normal effects are\n                // deferred to be triggered in scheduler.\n                for (const e of this.dep) {\n                    if (e.computed instanceof DeferredComputedRefImpl) {\n                        e.scheduler(true /* computedTrigger */);\n                    }\n                }\n            }\n            this._dirty = true;\n        });\n        this.effect.computed = this;\n    }\n    _get() {\n        if (this._dirty) {\n            this._dirty = false;\n            return (this._value = this.effect.run());\n        }\n        return this._value;\n    }\n    get value() {\n        trackRefValue(this);\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\n        return toRaw(this)._get();\n    }\n}\n_a$1 = \"__v_isReadonly\" /* ReactiveFlags.IS_READONLY */;\nfunction deferredComputed(getter) {\n    return new DeferredComputedRefImpl(getter);\n}\n\nexport { EffectScope, ITERATE_KEY, ReactiveEffect, computed, customRef, deferredComputed, effect, effectScope, enableTracking, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, pauseTracking, proxyRefs, reactive, readonly, ref, resetTracking, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, track, trigger, triggerRef, unref };\n","import { pauseTracking, resetTracking, isRef, toRaw, isShallow as isShallow$1, isReactive, ReactiveEffect, ref, shallowReadonly, track, reactive, shallowReactive, trigger, isProxy, EffectScope, markRaw, proxyRefs, computed as computed$1, isReadonly } from '@vue/reactivity';\nexport { EffectScope, ReactiveEffect, customRef, effect, effectScope, getCurrentScope, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, proxyRefs, reactive, readonly, ref, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, triggerRef, unref } from '@vue/reactivity';\nimport { isString, isFunction, isPromise, isArray, NOOP, getGlobalThis, extend, EMPTY_OBJ, toHandlerKey, toNumber, hyphenate, camelize, isObject, isOn, hasOwn, isModelListener, hasChanged, remove, isSet, isMap, isPlainObject, invokeArrayFns, isBuiltInDirective, capitalize, isGloballyWhitelisted, def, isReservedProp, EMPTY_ARR, toRawType, makeMap, NO, normalizeClass, normalizeStyle } from '@vue/shared';\nexport { camelize, capitalize, normalizeClass, normalizeProps, normalizeStyle, toDisplayString, toHandlerKey } from '@vue/shared';\n\nconst stack = [];\nfunction pushWarningContext(vnode) {\n    stack.push(vnode);\n}\nfunction popWarningContext() {\n    stack.pop();\n}\nfunction warn(msg, ...args) {\n    // avoid props formatting or warn handler tracking deps that might be mutated\n    // during patch, leading to infinite recursion.\n    pauseTracking();\n    const instance = stack.length ? stack[stack.length - 1].component : null;\n    const appWarnHandler = instance && instance.appContext.config.warnHandler;\n    const trace = getComponentTrace();\n    if (appWarnHandler) {\n        callWithErrorHandling(appWarnHandler, instance, 11 /* ErrorCodes.APP_WARN_HANDLER */, [\n            msg + args.join(''),\n            instance && instance.proxy,\n            trace\n                .map(({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`)\n                .join('\\n'),\n            trace\n        ]);\n    }\n    else {\n        const warnArgs = [`[Vue warn]: ${msg}`, ...args];\n        /* istanbul ignore if */\n        if (trace.length &&\n            // avoid spamming console during tests\n            !false) {\n            warnArgs.push(`\\n`, ...formatTrace(trace));\n        }\n        console.warn(...warnArgs);\n    }\n    resetTracking();\n}\nfunction getComponentTrace() {\n    let currentVNode = stack[stack.length - 1];\n    if (!currentVNode) {\n        return [];\n    }\n    // we can't just use the stack because it will be incomplete during updates\n    // that did not start from the root. Re-construct the parent chain using\n    // instance parent pointers.\n    const normalizedStack = [];\n    while (currentVNode) {\n        const last = normalizedStack[0];\n        if (last && last.vnode === currentVNode) {\n            last.recurseCount++;\n        }\n        else {\n            normalizedStack.push({\n                vnode: currentVNode,\n                recurseCount: 0\n            });\n        }\n        const parentInstance = currentVNode.component && currentVNode.component.parent;\n        currentVNode = parentInstance && parentInstance.vnode;\n    }\n    return normalizedStack;\n}\n/* istanbul ignore next */\nfunction formatTrace(trace) {\n    const logs = [];\n    trace.forEach((entry, i) => {\n        logs.push(...(i === 0 ? [] : [`\\n`]), ...formatTraceEntry(entry));\n    });\n    return logs;\n}\nfunction formatTraceEntry({ vnode, recurseCount }) {\n    const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;\n    const isRoot = vnode.component ? vnode.component.parent == null : false;\n    const open = ` at <${formatComponentName(vnode.component, vnode.type, isRoot)}`;\n    const close = `>` + postfix;\n    return vnode.props\n        ? [open, ...formatProps(vnode.props), close]\n        : [open + close];\n}\n/* istanbul ignore next */\nfunction formatProps(props) {\n    const res = [];\n    const keys = Object.keys(props);\n    keys.slice(0, 3).forEach(key => {\n        res.push(...formatProp(key, props[key]));\n    });\n    if (keys.length > 3) {\n        res.push(` ...`);\n    }\n    return res;\n}\n/* istanbul ignore next */\nfunction formatProp(key, value, raw) {\n    if (isString(value)) {\n        value = JSON.stringify(value);\n        return raw ? value : [`${key}=${value}`];\n    }\n    else if (typeof value === 'number' ||\n        typeof value === 'boolean' ||\n        value == null) {\n        return raw ? value : [`${key}=${value}`];\n    }\n    else if (isRef(value)) {\n        value = formatProp(key, toRaw(value.value), true);\n        return raw ? value : [`${key}=Ref<`, value, `>`];\n    }\n    else if (isFunction(value)) {\n        return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];\n    }\n    else {\n        value = toRaw(value);\n        return raw ? value : [`${key}=`, value];\n    }\n}\n\nconst ErrorTypeStrings = {\n    [\"sp\" /* LifecycleHooks.SERVER_PREFETCH */]: 'serverPrefetch hook',\n    [\"bc\" /* LifecycleHooks.BEFORE_CREATE */]: 'beforeCreate hook',\n    [\"c\" /* LifecycleHooks.CREATED */]: 'created hook',\n    [\"bm\" /* LifecycleHooks.BEFORE_MOUNT */]: 'beforeMount hook',\n    [\"m\" /* LifecycleHooks.MOUNTED */]: 'mounted hook',\n    [\"bu\" /* LifecycleHooks.BEFORE_UPDATE */]: 'beforeUpdate hook',\n    [\"u\" /* LifecycleHooks.UPDATED */]: 'updated',\n    [\"bum\" /* LifecycleHooks.BEFORE_UNMOUNT */]: 'beforeUnmount hook',\n    [\"um\" /* LifecycleHooks.UNMOUNTED */]: 'unmounted hook',\n    [\"a\" /* LifecycleHooks.ACTIVATED */]: 'activated hook',\n    [\"da\" /* LifecycleHooks.DEACTIVATED */]: 'deactivated hook',\n    [\"ec\" /* LifecycleHooks.ERROR_CAPTURED */]: 'errorCaptured hook',\n    [\"rtc\" /* LifecycleHooks.RENDER_TRACKED */]: 'renderTracked hook',\n    [\"rtg\" /* LifecycleHooks.RENDER_TRIGGERED */]: 'renderTriggered hook',\n    [0 /* ErrorCodes.SETUP_FUNCTION */]: 'setup function',\n    [1 /* ErrorCodes.RENDER_FUNCTION */]: 'render function',\n    [2 /* ErrorCodes.WATCH_GETTER */]: 'watcher getter',\n    [3 /* ErrorCodes.WATCH_CALLBACK */]: 'watcher callback',\n    [4 /* ErrorCodes.WATCH_CLEANUP */]: 'watcher cleanup function',\n    [5 /* ErrorCodes.NATIVE_EVENT_HANDLER */]: 'native event handler',\n    [6 /* ErrorCodes.COMPONENT_EVENT_HANDLER */]: 'component event handler',\n    [7 /* ErrorCodes.VNODE_HOOK */]: 'vnode hook',\n    [8 /* ErrorCodes.DIRECTIVE_HOOK */]: 'directive hook',\n    [9 /* ErrorCodes.TRANSITION_HOOK */]: 'transition hook',\n    [10 /* ErrorCodes.APP_ERROR_HANDLER */]: 'app errorHandler',\n    [11 /* ErrorCodes.APP_WARN_HANDLER */]: 'app warnHandler',\n    [12 /* ErrorCodes.FUNCTION_REF */]: 'ref function',\n    [13 /* ErrorCodes.ASYNC_COMPONENT_LOADER */]: 'async component loader',\n    [14 /* ErrorCodes.SCHEDULER */]: 'scheduler flush. This is likely a Vue internals bug. ' +\n        'Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core'\n};\nfunction callWithErrorHandling(fn, instance, type, args) {\n    let res;\n    try {\n        res = args ? fn(...args) : fn();\n    }\n    catch (err) {\n        handleError(err, instance, type);\n    }\n    return res;\n}\nfunction callWithAsyncErrorHandling(fn, instance, type, args) {\n    if (isFunction(fn)) {\n        const res = callWithErrorHandling(fn, instance, type, args);\n        if (res && isPromise(res)) {\n            res.catch(err => {\n                handleError(err, instance, type);\n            });\n        }\n        return res;\n    }\n    const values = [];\n    for (let i = 0; i < fn.length; i++) {\n        values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));\n    }\n    return values;\n}\nfunction handleError(err, instance, type, throwInDev = true) {\n    const contextVNode = instance ? instance.vnode : null;\n    if (instance) {\n        let cur = instance.parent;\n        // the exposed instance is the render proxy to keep it consistent with 2.x\n        const exposedInstance = instance.proxy;\n        // in production the hook receives only the error code\n        const errorInfo = (process.env.NODE_ENV !== 'production') ? ErrorTypeStrings[type] : type;\n        while (cur) {\n            const errorCapturedHooks = cur.ec;\n            if (errorCapturedHooks) {\n                for (let i = 0; i < errorCapturedHooks.length; i++) {\n                    if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {\n                        return;\n                    }\n                }\n            }\n            cur = cur.parent;\n        }\n        // app-level handling\n        const appErrorHandler = instance.appContext.config.errorHandler;\n        if (appErrorHandler) {\n            callWithErrorHandling(appErrorHandler, null, 10 /* ErrorCodes.APP_ERROR_HANDLER */, [err, exposedInstance, errorInfo]);\n            return;\n        }\n    }\n    logError(err, type, contextVNode, throwInDev);\n}\nfunction logError(err, type, contextVNode, throwInDev = true) {\n    if ((process.env.NODE_ENV !== 'production')) {\n        const info = ErrorTypeStrings[type];\n        if (contextVNode) {\n            pushWarningContext(contextVNode);\n        }\n        warn(`Unhandled error${info ? ` during execution of ${info}` : ``}`);\n        if (contextVNode) {\n            popWarningContext();\n        }\n        // crash in dev by default so it's more noticeable\n        if (throwInDev) {\n            throw err;\n        }\n        else {\n            console.error(err);\n        }\n    }\n    else {\n        // recover in prod to reduce the impact on end-user\n        console.error(err);\n    }\n}\n\nlet isFlushing = false;\nlet isFlushPending = false;\nconst queue = [];\nlet flushIndex = 0;\nconst pendingPostFlushCbs = [];\nlet activePostFlushCbs = null;\nlet postFlushIndex = 0;\nconst resolvedPromise = /*#__PURE__*/ Promise.resolve();\nlet currentFlushPromise = null;\nconst RECURSION_LIMIT = 100;\nfunction nextTick(fn) {\n    const p = currentFlushPromise || resolvedPromise;\n    return fn ? p.then(this ? fn.bind(this) : fn) : p;\n}\n// #2768\n// Use binary-search to find a suitable position in the queue,\n// so that the queue maintains the increasing order of job's id,\n// which can prevent the job from being skipped and also can avoid repeated patching.\nfunction findInsertionIndex(id) {\n    // the start index should be `flushIndex + 1`\n    let start = flushIndex + 1;\n    let end = queue.length;\n    while (start < end) {\n        const middle = (start + end) >>> 1;\n        const middleJobId = getId(queue[middle]);\n        middleJobId < id ? (start = middle + 1) : (end = middle);\n    }\n    return start;\n}\nfunction queueJob(job) {\n    // the dedupe search uses the startIndex argument of Array.includes()\n    // by default the search index includes the current job that is being run\n    // so it cannot recursively trigger itself again.\n    // if the job is a watch() callback, the search will start with a +1 index to\n    // allow it recursively trigger itself - it is the user's responsibility to\n    // ensure it doesn't end up in an infinite loop.\n    if (!queue.length ||\n        !queue.includes(job, isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex)) {\n        if (job.id == null) {\n            queue.push(job);\n        }\n        else {\n            queue.splice(findInsertionIndex(job.id), 0, job);\n        }\n        queueFlush();\n    }\n}\nfunction queueFlush() {\n    if (!isFlushing && !isFlushPending) {\n        isFlushPending = true;\n        currentFlushPromise = resolvedPromise.then(flushJobs);\n    }\n}\nfunction invalidateJob(job) {\n    const i = queue.indexOf(job);\n    if (i > flushIndex) {\n        queue.splice(i, 1);\n    }\n}\nfunction queuePostFlushCb(cb) {\n    if (!isArray(cb)) {\n        if (!activePostFlushCbs ||\n            !activePostFlushCbs.includes(cb, cb.allowRecurse ? postFlushIndex + 1 : postFlushIndex)) {\n            pendingPostFlushCbs.push(cb);\n        }\n    }\n    else {\n        // if cb is an array, it is a component lifecycle hook which can only be\n        // triggered by a job, which is already deduped in the main queue, so\n        // we can skip duplicate check here to improve perf\n        pendingPostFlushCbs.push(...cb);\n    }\n    queueFlush();\n}\nfunction flushPreFlushCbs(seen, \n// if currently flushing, skip the current job itself\ni = isFlushing ? flushIndex + 1 : 0) {\n    if ((process.env.NODE_ENV !== 'production')) {\n        seen = seen || new Map();\n    }\n    for (; i < queue.length; i++) {\n        const cb = queue[i];\n        if (cb && cb.pre) {\n            if ((process.env.NODE_ENV !== 'production') && checkRecursiveUpdates(seen, cb)) {\n                continue;\n            }\n            queue.splice(i, 1);\n            i--;\n            cb();\n        }\n    }\n}\nfunction flushPostFlushCbs(seen) {\n    if (pendingPostFlushCbs.length) {\n        const deduped = [...new Set(pendingPostFlushCbs)];\n        pendingPostFlushCbs.length = 0;\n        // #1947 already has active queue, nested flushPostFlushCbs call\n        if (activePostFlushCbs) {\n            activePostFlushCbs.push(...deduped);\n            return;\n        }\n        activePostFlushCbs = deduped;\n        if ((process.env.NODE_ENV !== 'production')) {\n            seen = seen || new Map();\n        }\n        activePostFlushCbs.sort((a, b) => getId(a) - getId(b));\n        for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {\n            if ((process.env.NODE_ENV !== 'production') &&\n                checkRecursiveUpdates(seen, activePostFlushCbs[postFlushIndex])) {\n                continue;\n            }\n            activePostFlushCbs[postFlushIndex]();\n        }\n        activePostFlushCbs = null;\n        postFlushIndex = 0;\n    }\n}\nconst getId = (job) => job.id == null ? Infinity : job.id;\nconst comparator = (a, b) => {\n    const diff = getId(a) - getId(b);\n    if (diff === 0) {\n        if (a.pre && !b.pre)\n            return -1;\n        if (b.pre && !a.pre)\n            return 1;\n    }\n    return diff;\n};\nfunction flushJobs(seen) {\n    isFlushPending = false;\n    isFlushing = true;\n    if ((process.env.NODE_ENV !== 'production')) {\n        seen = seen || new Map();\n    }\n    // Sort queue before flush.\n    // This ensures that:\n    // 1. Components are updated from parent to child. (because parent is always\n    //    created before the child so its render effect will have smaller\n    //    priority number)\n    // 2. If a component is unmounted during a parent component's update,\n    //    its update can be skipped.\n    queue.sort(comparator);\n    // conditional usage of checkRecursiveUpdate must be determined out of\n    // try ... catch block since Rollup by default de-optimizes treeshaking\n    // inside try-catch. This can leave all warning code unshaked. Although\n    // they would get eventually shaken by a minifier like terser, some minifiers\n    // would fail to do that (e.g. https://github.com/evanw/esbuild/issues/1610)\n    const check = (process.env.NODE_ENV !== 'production')\n        ? (job) => checkRecursiveUpdates(seen, job)\n        : NOOP;\n    try {\n        for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {\n            const job = queue[flushIndex];\n            if (job && job.active !== false) {\n                if ((process.env.NODE_ENV !== 'production') && check(job)) {\n                    continue;\n                }\n                // console.log(`running:`, job.id)\n                callWithErrorHandling(job, null, 14 /* ErrorCodes.SCHEDULER */);\n            }\n        }\n    }\n    finally {\n        flushIndex = 0;\n        queue.length = 0;\n        flushPostFlushCbs(seen);\n        isFlushing = false;\n        currentFlushPromise = null;\n        // some postFlushCb queued jobs!\n        // keep flushing until it drains.\n        if (queue.length || pendingPostFlushCbs.length) {\n            flushJobs(seen);\n        }\n    }\n}\nfunction checkRecursiveUpdates(seen, fn) {\n    if (!seen.has(fn)) {\n        seen.set(fn, 1);\n    }\n    else {\n        const count = seen.get(fn);\n        if (count > RECURSION_LIMIT) {\n            const instance = fn.ownerInstance;\n            const componentName = instance && getComponentName(instance.type);\n            warn(`Maximum recursive updates exceeded${componentName ? ` in component <${componentName}>` : ``}. ` +\n                `This means you have a reactive effect that is mutating its own ` +\n                `dependencies and thus recursively triggering itself. Possible sources ` +\n                `include component template, render function, updated hook or ` +\n                `watcher source function.`);\n            return true;\n        }\n        else {\n            seen.set(fn, count + 1);\n        }\n    }\n}\n\n/* eslint-disable no-restricted-globals */\nlet isHmrUpdating = false;\nconst hmrDirtyComponents = new Set();\n// Expose the HMR runtime on the global object\n// This makes it entirely tree-shakable without polluting the exports and makes\n// it easier to be used in toolings like vue-loader\n// Note: for a component to be eligible for HMR it also needs the __hmrId option\n// to be set so that its instances can be registered / removed.\nif ((process.env.NODE_ENV !== 'production')) {\n    getGlobalThis().__VUE_HMR_RUNTIME__ = {\n        createRecord: tryWrap(createRecord),\n        rerender: tryWrap(rerender),\n        reload: tryWrap(reload)\n    };\n}\nconst map = new Map();\nfunction registerHMR(instance) {\n    const id = instance.type.__hmrId;\n    let record = map.get(id);\n    if (!record) {\n        createRecord(id, instance.type);\n        record = map.get(id);\n    }\n    record.instances.add(instance);\n}\nfunction unregisterHMR(instance) {\n    map.get(instance.type.__hmrId).instances.delete(instance);\n}\nfunction createRecord(id, initialDef) {\n    if (map.has(id)) {\n        return false;\n    }\n    map.set(id, {\n        initialDef: normalizeClassComponent(initialDef),\n        instances: new Set()\n    });\n    return true;\n}\nfunction normalizeClassComponent(component) {\n    return isClassComponent(component) ? component.__vccOpts : component;\n}\nfunction rerender(id, newRender) {\n    const record = map.get(id);\n    if (!record) {\n        return;\n    }\n    // update initial record (for not-yet-rendered component)\n    record.initialDef.render = newRender;\n    [...record.instances].forEach(instance => {\n        if (newRender) {\n            instance.render = newRender;\n            normalizeClassComponent(instance.type).render = newRender;\n        }\n        instance.renderCache = [];\n        // this flag forces child components with slot content to update\n        isHmrUpdating = true;\n        instance.update();\n        isHmrUpdating = false;\n    });\n}\nfunction reload(id, newComp) {\n    const record = map.get(id);\n    if (!record)\n        return;\n    newComp = normalizeClassComponent(newComp);\n    // update initial def (for not-yet-rendered components)\n    updateComponentDef(record.initialDef, newComp);\n    // create a snapshot which avoids the set being mutated during updates\n    const instances = [...record.instances];\n    for (const instance of instances) {\n        const oldComp = normalizeClassComponent(instance.type);\n        if (!hmrDirtyComponents.has(oldComp)) {\n            // 1. Update existing comp definition to match new one\n            if (oldComp !== record.initialDef) {\n                updateComponentDef(oldComp, newComp);\n            }\n            // 2. mark definition dirty. This forces the renderer to replace the\n            // component on patch.\n            hmrDirtyComponents.add(oldComp);\n        }\n        // 3. invalidate options resolution cache\n        instance.appContext.optionsCache.delete(instance.type);\n        // 4. actually update\n        if (instance.ceReload) {\n            // custom element\n            hmrDirtyComponents.add(oldComp);\n            instance.ceReload(newComp.styles);\n            hmrDirtyComponents.delete(oldComp);\n        }\n        else if (instance.parent) {\n            // 4. Force the parent instance to re-render. This will cause all updated\n            // components to be unmounted and re-mounted. Queue the update so that we\n            // don't end up forcing the same parent to re-render multiple times.\n            queueJob(instance.parent.update);\n            // instance is the inner component of an async custom element\n            // invoke to reset styles\n            if (instance.parent.type.__asyncLoader &&\n                instance.parent.ceReload) {\n                instance.parent.ceReload(newComp.styles);\n            }\n        }\n        else if (instance.appContext.reload) {\n            // root instance mounted via createApp() has a reload method\n            instance.appContext.reload();\n        }\n        else if (typeof window !== 'undefined') {\n            // root instance inside tree created via raw render(). Force reload.\n            window.location.reload();\n        }\n        else {\n            console.warn('[HMR] Root or manually mounted instance modified. Full reload required.');\n        }\n    }\n    // 5. make sure to cleanup dirty hmr components after update\n    queuePostFlushCb(() => {\n        for (const instance of instances) {\n            hmrDirtyComponents.delete(normalizeClassComponent(instance.type));\n        }\n    });\n}\nfunction updateComponentDef(oldComp, newComp) {\n    extend(oldComp, newComp);\n    for (const key in oldComp) {\n        if (key !== '__file' && !(key in newComp)) {\n            delete oldComp[key];\n        }\n    }\n}\nfunction tryWrap(fn) {\n    return (id, arg) => {\n        try {\n            return fn(id, arg);\n        }\n        catch (e) {\n            console.error(e);\n            console.warn(`[HMR] Something went wrong during Vue component hot-reload. ` +\n                `Full reload required.`);\n        }\n    };\n}\n\nlet devtools;\nlet buffer = [];\nlet devtoolsNotInstalled = false;\nfunction emit(event, ...args) {\n    if (devtools) {\n        devtools.emit(event, ...args);\n    }\n    else if (!devtoolsNotInstalled) {\n        buffer.push({ event, args });\n    }\n}\nfunction setDevtoolsHook(hook, target) {\n    var _a, _b;\n    devtools = hook;\n    if (devtools) {\n        devtools.enabled = true;\n        buffer.forEach(({ event, args }) => devtools.emit(event, ...args));\n        buffer = [];\n    }\n    else if (\n    // handle late devtools injection - only do this if we are in an actual\n    // browser environment to avoid the timer handle stalling test runner exit\n    // (#4815)\n    typeof window !== 'undefined' &&\n        // some envs mock window but not fully\n        window.HTMLElement &&\n        // also exclude jsdom\n        !((_b = (_a = window.navigator) === null || _a === void 0 ? void 0 : _a.userAgent) === null || _b === void 0 ? void 0 : _b.includes('jsdom'))) {\n        const replay = (target.__VUE_DEVTOOLS_HOOK_REPLAY__ =\n            target.__VUE_DEVTOOLS_HOOK_REPLAY__ || []);\n        replay.push((newHook) => {\n            setDevtoolsHook(newHook, target);\n        });\n        // clear buffer after 3s - the user probably doesn't have devtools installed\n        // at all, and keeping the buffer will cause memory leaks (#4738)\n        setTimeout(() => {\n            if (!devtools) {\n                target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;\n                devtoolsNotInstalled = true;\n                buffer = [];\n            }\n        }, 3000);\n    }\n    else {\n        // non-browser env, assume not installed\n        devtoolsNotInstalled = true;\n        buffer = [];\n    }\n}\nfunction devtoolsInitApp(app, version) {\n    emit(\"app:init\" /* DevtoolsHooks.APP_INIT */, app, version, {\n        Fragment,\n        Text,\n        Comment,\n        Static\n    });\n}\nfunction devtoolsUnmountApp(app) {\n    emit(\"app:unmount\" /* DevtoolsHooks.APP_UNMOUNT */, app);\n}\nconst devtoolsComponentAdded = /*#__PURE__*/ createDevtoolsComponentHook(\"component:added\" /* DevtoolsHooks.COMPONENT_ADDED */);\nconst devtoolsComponentUpdated = \n/*#__PURE__*/ createDevtoolsComponentHook(\"component:updated\" /* DevtoolsHooks.COMPONENT_UPDATED */);\nconst _devtoolsComponentRemoved = /*#__PURE__*/ createDevtoolsComponentHook(\"component:removed\" /* DevtoolsHooks.COMPONENT_REMOVED */);\nconst devtoolsComponentRemoved = (component) => {\n    if (devtools &&\n        typeof devtools.cleanupBuffer === 'function' &&\n        // remove the component if it wasn't buffered\n        !devtools.cleanupBuffer(component)) {\n        _devtoolsComponentRemoved(component);\n    }\n};\nfunction createDevtoolsComponentHook(hook) {\n    return (component) => {\n        emit(hook, component.appContext.app, component.uid, component.parent ? component.parent.uid : undefined, component);\n    };\n}\nconst devtoolsPerfStart = /*#__PURE__*/ createDevtoolsPerformanceHook(\"perf:start\" /* DevtoolsHooks.PERFORMANCE_START */);\nconst devtoolsPerfEnd = /*#__PURE__*/ createDevtoolsPerformanceHook(\"perf:end\" /* DevtoolsHooks.PERFORMANCE_END */);\nfunction createDevtoolsPerformanceHook(hook) {\n    return (component, type, time) => {\n        emit(hook, component.appContext.app, component.uid, component, type, time);\n    };\n}\nfunction devtoolsComponentEmit(component, event, params) {\n    emit(\"component:emit\" /* DevtoolsHooks.COMPONENT_EMIT */, component.appContext.app, component, event, params);\n}\n\nfunction emit$1(instance, event, ...rawArgs) {\n    if (instance.isUnmounted)\n        return;\n    const props = instance.vnode.props || EMPTY_OBJ;\n    if ((process.env.NODE_ENV !== 'production')) {\n        const { emitsOptions, propsOptions: [propsOptions] } = instance;\n        if (emitsOptions) {\n            if (!(event in emitsOptions) &&\n                !(false )) {\n                if (!propsOptions || !(toHandlerKey(event) in propsOptions)) {\n                    warn(`Component emitted event \"${event}\" but it is neither declared in ` +\n                        `the emits option nor as an \"${toHandlerKey(event)}\" prop.`);\n                }\n            }\n            else {\n                const validator = emitsOptions[event];\n                if (isFunction(validator)) {\n                    const isValid = validator(...rawArgs);\n                    if (!isValid) {\n                        warn(`Invalid event arguments: event validation failed for event \"${event}\".`);\n                    }\n                }\n            }\n        }\n    }\n    let args = rawArgs;\n    const isModelListener = event.startsWith('update:');\n    // for v-model update:xxx events, apply modifiers on args\n    const modelArg = isModelListener && event.slice(7);\n    if (modelArg && modelArg in props) {\n        const modifiersKey = `${modelArg === 'modelValue' ? 'model' : modelArg}Modifiers`;\n        const { number, trim } = props[modifiersKey] || EMPTY_OBJ;\n        if (trim) {\n            args = rawArgs.map(a => a.trim());\n        }\n        if (number) {\n            args = rawArgs.map(toNumber);\n        }\n    }\n    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentEmit(instance, event, args);\n    }\n    if ((process.env.NODE_ENV !== 'production')) {\n        const lowerCaseEvent = event.toLowerCase();\n        if (lowerCaseEvent !== event && props[toHandlerKey(lowerCaseEvent)]) {\n            warn(`Event \"${lowerCaseEvent}\" is emitted in component ` +\n                `${formatComponentName(instance, instance.type)} but the handler is registered for \"${event}\". ` +\n                `Note that HTML attributes are case-insensitive and you cannot use ` +\n                `v-on to listen to camelCase events when using in-DOM templates. ` +\n                `You should probably use \"${hyphenate(event)}\" instead of \"${event}\".`);\n        }\n    }\n    let handlerName;\n    let handler = props[(handlerName = toHandlerKey(event))] ||\n        // also try camelCase event handler (#2249)\n        props[(handlerName = toHandlerKey(camelize(event)))];\n    // for v-model update:xxx events, also trigger kebab-case equivalent\n    // for props passed via kebab-case\n    if (!handler && isModelListener) {\n        handler = props[(handlerName = toHandlerKey(hyphenate(event)))];\n    }\n    if (handler) {\n        callWithAsyncErrorHandling(handler, instance, 6 /* ErrorCodes.COMPONENT_EVENT_HANDLER */, args);\n    }\n    const onceHandler = props[handlerName + `Once`];\n    if (onceHandler) {\n        if (!instance.emitted) {\n            instance.emitted = {};\n        }\n        else if (instance.emitted[handlerName]) {\n            return;\n        }\n        instance.emitted[handlerName] = true;\n        callWithAsyncErrorHandling(onceHandler, instance, 6 /* ErrorCodes.COMPONENT_EVENT_HANDLER */, args);\n    }\n}\nfunction normalizeEmitsOptions(comp, appContext, asMixin = false) {\n    const cache = appContext.emitsCache;\n    const cached = cache.get(comp);\n    if (cached !== undefined) {\n        return cached;\n    }\n    const raw = comp.emits;\n    let normalized = {};\n    // apply mixin/extends props\n    let hasExtends = false;\n    if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n        const extendEmits = (raw) => {\n            const normalizedFromExtend = normalizeEmitsOptions(raw, appContext, true);\n            if (normalizedFromExtend) {\n                hasExtends = true;\n                extend(normalized, normalizedFromExtend);\n            }\n        };\n        if (!asMixin && appContext.mixins.length) {\n            appContext.mixins.forEach(extendEmits);\n        }\n        if (comp.extends) {\n            extendEmits(comp.extends);\n        }\n        if (comp.mixins) {\n            comp.mixins.forEach(extendEmits);\n        }\n    }\n    if (!raw && !hasExtends) {\n        if (isObject(comp)) {\n            cache.set(comp, null);\n        }\n        return null;\n    }\n    if (isArray(raw)) {\n        raw.forEach(key => (normalized[key] = null));\n    }\n    else {\n        extend(normalized, raw);\n    }\n    if (isObject(comp)) {\n        cache.set(comp, normalized);\n    }\n    return normalized;\n}\n// Check if an incoming prop key is a declared emit event listener.\n// e.g. With `emits: { click: null }`, props named `onClick` and `onclick` are\n// both considered matched listeners.\nfunction isEmitListener(options, key) {\n    if (!options || !isOn(key)) {\n        return false;\n    }\n    key = key.slice(2).replace(/Once$/, '');\n    return (hasOwn(options, key[0].toLowerCase() + key.slice(1)) ||\n        hasOwn(options, hyphenate(key)) ||\n        hasOwn(options, key));\n}\n\n/**\n * mark the current rendering instance for asset resolution (e.g.\n * resolveComponent, resolveDirective) during render\n */\nlet currentRenderingInstance = null;\nlet currentScopeId = null;\n/**\n * Note: rendering calls maybe nested. The function returns the parent rendering\n * instance if present, which should be restored after the render is done:\n *\n * ```js\n * const prev = setCurrentRenderingInstance(i)\n * // ...render\n * setCurrentRenderingInstance(prev)\n * ```\n */\nfunction setCurrentRenderingInstance(instance) {\n    const prev = currentRenderingInstance;\n    currentRenderingInstance = instance;\n    currentScopeId = (instance && instance.type.__scopeId) || null;\n    return prev;\n}\n/**\n * Set scope id when creating hoisted vnodes.\n * @private compiler helper\n */\nfunction pushScopeId(id) {\n    currentScopeId = id;\n}\n/**\n * Technically we no longer need this after 3.0.8 but we need to keep the same\n * API for backwards compat w/ code generated by compilers.\n * @private\n */\nfunction popScopeId() {\n    currentScopeId = null;\n}\n/**\n * Only for backwards compat\n * @private\n */\nconst withScopeId = (_id) => withCtx;\n/**\n * Wrap a slot function to memoize current rendering instance\n * @private compiler helper\n */\nfunction withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot // false only\n) {\n    if (!ctx)\n        return fn;\n    // already normalized\n    if (fn._n) {\n        return fn;\n    }\n    const renderFnWithContext = (...args) => {\n        // If a user calls a compiled slot inside a template expression (#1745), it\n        // can mess up block tracking, so by default we disable block tracking and\n        // force bail out when invoking a compiled slot (indicated by the ._d flag).\n        // This isn't necessary if rendering a compiled `<slot>`, so we flip the\n        // ._d flag off when invoking the wrapped fn inside `renderSlot`.\n        if (renderFnWithContext._d) {\n            setBlockTracking(-1);\n        }\n        const prevInstance = setCurrentRenderingInstance(ctx);\n        let res;\n        try {\n            res = fn(...args);\n        }\n        finally {\n            setCurrentRenderingInstance(prevInstance);\n            if (renderFnWithContext._d) {\n                setBlockTracking(1);\n            }\n        }\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n            devtoolsComponentUpdated(ctx);\n        }\n        return res;\n    };\n    // mark normalized to avoid duplicated wrapping\n    renderFnWithContext._n = true;\n    // mark this as compiled by default\n    // this is used in vnode.ts -> normalizeChildren() to set the slot\n    // rendering flag.\n    renderFnWithContext._c = true;\n    // disable block tracking by default\n    renderFnWithContext._d = true;\n    return renderFnWithContext;\n}\n\n/**\n * dev only flag to track whether $attrs was used during render.\n * If $attrs was used during render then the warning for failed attrs\n * fallthrough can be suppressed.\n */\nlet accessedAttrs = false;\nfunction markAttrsAccessed() {\n    accessedAttrs = true;\n}\nfunction renderComponentRoot(instance) {\n    const { type: Component, vnode, proxy, withProxy, props, propsOptions: [propsOptions], slots, attrs, emit, render, renderCache, data, setupState, ctx, inheritAttrs } = instance;\n    let result;\n    let fallthroughAttrs;\n    const prev = setCurrentRenderingInstance(instance);\n    if ((process.env.NODE_ENV !== 'production')) {\n        accessedAttrs = false;\n    }\n    try {\n        if (vnode.shapeFlag & 4 /* ShapeFlags.STATEFUL_COMPONENT */) {\n            // withProxy is a proxy with a different `has` trap only for\n            // runtime-compiled render functions using `with` block.\n            const proxyToUse = withProxy || proxy;\n            result = normalizeVNode(render.call(proxyToUse, proxyToUse, renderCache, props, setupState, data, ctx));\n            fallthroughAttrs = attrs;\n        }\n        else {\n            // functional\n            const render = Component;\n            // in dev, mark attrs accessed if optional props (attrs === props)\n            if ((process.env.NODE_ENV !== 'production') && attrs === props) {\n                markAttrsAccessed();\n            }\n            result = normalizeVNode(render.length > 1\n                ? render(props, (process.env.NODE_ENV !== 'production')\n                    ? {\n                        get attrs() {\n                            markAttrsAccessed();\n                            return attrs;\n                        },\n                        slots,\n                        emit\n                    }\n                    : { attrs, slots, emit })\n                : render(props, null /* we know it doesn't need it */));\n            fallthroughAttrs = Component.props\n                ? attrs\n                : getFunctionalFallthrough(attrs);\n        }\n    }\n    catch (err) {\n        blockStack.length = 0;\n        handleError(err, instance, 1 /* ErrorCodes.RENDER_FUNCTION */);\n        result = createVNode(Comment);\n    }\n    // attr merging\n    // in dev mode, comments are preserved, and it's possible for a template\n    // to have comments along side the root element which makes it a fragment\n    let root = result;\n    let setRoot = undefined;\n    if ((process.env.NODE_ENV !== 'production') &&\n        result.patchFlag > 0 &&\n        result.patchFlag & 2048 /* PatchFlags.DEV_ROOT_FRAGMENT */) {\n        [root, setRoot] = getChildRoot(result);\n    }\n    if (fallthroughAttrs && inheritAttrs !== false) {\n        const keys = Object.keys(fallthroughAttrs);\n        const { shapeFlag } = root;\n        if (keys.length) {\n            if (shapeFlag & (1 /* ShapeFlags.ELEMENT */ | 6 /* ShapeFlags.COMPONENT */)) {\n                if (propsOptions && keys.some(isModelListener)) {\n                    // If a v-model listener (onUpdate:xxx) has a corresponding declared\n                    // prop, it indicates this component expects to handle v-model and\n                    // it should not fallthrough.\n                    // related: #1543, #1643, #1989\n                    fallthroughAttrs = filterModelListeners(fallthroughAttrs, propsOptions);\n                }\n                root = cloneVNode(root, fallthroughAttrs);\n            }\n            else if ((process.env.NODE_ENV !== 'production') && !accessedAttrs && root.type !== Comment) {\n                const allAttrs = Object.keys(attrs);\n                const eventAttrs = [];\n                const extraAttrs = [];\n                for (let i = 0, l = allAttrs.length; i < l; i++) {\n                    const key = allAttrs[i];\n                    if (isOn(key)) {\n                        // ignore v-model handlers when they fail to fallthrough\n                        if (!isModelListener(key)) {\n                            // remove `on`, lowercase first letter to reflect event casing\n                            // accurately\n                            eventAttrs.push(key[2].toLowerCase() + key.slice(3));\n                        }\n                    }\n                    else {\n                        extraAttrs.push(key);\n                    }\n                }\n                if (extraAttrs.length) {\n                    warn(`Extraneous non-props attributes (` +\n                        `${extraAttrs.join(', ')}) ` +\n                        `were passed to component but could not be automatically inherited ` +\n                        `because component renders fragment or text root nodes.`);\n                }\n                if (eventAttrs.length) {\n                    warn(`Extraneous non-emits event listeners (` +\n                        `${eventAttrs.join(', ')}) ` +\n                        `were passed to component but could not be automatically inherited ` +\n                        `because component renders fragment or text root nodes. ` +\n                        `If the listener is intended to be a component custom event listener only, ` +\n                        `declare it using the \"emits\" option.`);\n                }\n            }\n        }\n    }\n    // inherit directives\n    if (vnode.dirs) {\n        if ((process.env.NODE_ENV !== 'production') && !isElementRoot(root)) {\n            warn(`Runtime directive used on component with non-element root node. ` +\n                `The directives will not function as intended.`);\n        }\n        // clone before mutating since the root may be a hoisted vnode\n        root = cloneVNode(root);\n        root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;\n    }\n    // inherit transition data\n    if (vnode.transition) {\n        if ((process.env.NODE_ENV !== 'production') && !isElementRoot(root)) {\n            warn(`Component inside <Transition> renders non-element root node ` +\n                `that cannot be animated.`);\n        }\n        root.transition = vnode.transition;\n    }\n    if ((process.env.NODE_ENV !== 'production') && setRoot) {\n        setRoot(root);\n    }\n    else {\n        result = root;\n    }\n    setCurrentRenderingInstance(prev);\n    return result;\n}\n/**\n * dev only\n * In dev mode, template root level comments are rendered, which turns the\n * template into a fragment root, but we need to locate the single element\n * root for attrs and scope id processing.\n */\nconst getChildRoot = (vnode) => {\n    const rawChildren = vnode.children;\n    const dynamicChildren = vnode.dynamicChildren;\n    const childRoot = filterSingleRoot(rawChildren);\n    if (!childRoot) {\n        return [vnode, undefined];\n    }\n    const index = rawChildren.indexOf(childRoot);\n    const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;\n    const setRoot = (updatedRoot) => {\n        rawChildren[index] = updatedRoot;\n        if (dynamicChildren) {\n            if (dynamicIndex > -1) {\n                dynamicChildren[dynamicIndex] = updatedRoot;\n            }\n            else if (updatedRoot.patchFlag > 0) {\n                vnode.dynamicChildren = [...dynamicChildren, updatedRoot];\n            }\n        }\n    };\n    return [normalizeVNode(childRoot), setRoot];\n};\nfunction filterSingleRoot(children) {\n    let singleRoot;\n    for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        if (isVNode(child)) {\n            // ignore user comment\n            if (child.type !== Comment || child.children === 'v-if') {\n                if (singleRoot) {\n                    // has more than 1 non-comment child, return now\n                    return;\n                }\n                else {\n                    singleRoot = child;\n                }\n            }\n        }\n        else {\n            return;\n        }\n    }\n    return singleRoot;\n}\nconst getFunctionalFallthrough = (attrs) => {\n    let res;\n    for (const key in attrs) {\n        if (key === 'class' || key === 'style' || isOn(key)) {\n            (res || (res = {}))[key] = attrs[key];\n        }\n    }\n    return res;\n};\nconst filterModelListeners = (attrs, props) => {\n    const res = {};\n    for (const key in attrs) {\n        if (!isModelListener(key) || !(key.slice(9) in props)) {\n            res[key] = attrs[key];\n        }\n    }\n    return res;\n};\nconst isElementRoot = (vnode) => {\n    return (vnode.shapeFlag & (6 /* ShapeFlags.COMPONENT */ | 1 /* ShapeFlags.ELEMENT */) ||\n        vnode.type === Comment // potential v-if branch switch\n    );\n};\nfunction shouldUpdateComponent(prevVNode, nextVNode, optimized) {\n    const { props: prevProps, children: prevChildren, component } = prevVNode;\n    const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;\n    const emits = component.emitsOptions;\n    // Parent component's render function was hot-updated. Since this may have\n    // caused the child component's slots content to have changed, we need to\n    // force the child to update as well.\n    if ((process.env.NODE_ENV !== 'production') && (prevChildren || nextChildren) && isHmrUpdating) {\n        return true;\n    }\n    // force child update for runtime directive or transition on component vnode.\n    if (nextVNode.dirs || nextVNode.transition) {\n        return true;\n    }\n    if (optimized && patchFlag >= 0) {\n        if (patchFlag & 1024 /* PatchFlags.DYNAMIC_SLOTS */) {\n            // slot content that references values that might have changed,\n            // e.g. in a v-for\n            return true;\n        }\n        if (patchFlag & 16 /* PatchFlags.FULL_PROPS */) {\n            if (!prevProps) {\n                return !!nextProps;\n            }\n            // presence of this flag indicates props are always non-null\n            return hasPropsChanged(prevProps, nextProps, emits);\n        }\n        else if (patchFlag & 8 /* PatchFlags.PROPS */) {\n            const dynamicProps = nextVNode.dynamicProps;\n            for (let i = 0; i < dynamicProps.length; i++) {\n                const key = dynamicProps[i];\n                if (nextProps[key] !== prevProps[key] &&\n                    !isEmitListener(emits, key)) {\n                    return true;\n                }\n            }\n        }\n    }\n    else {\n        // this path is only taken by manually written render functions\n        // so presence of any children leads to a forced update\n        if (prevChildren || nextChildren) {\n            if (!nextChildren || !nextChildren.$stable) {\n                return true;\n            }\n        }\n        if (prevProps === nextProps) {\n            return false;\n        }\n        if (!prevProps) {\n            return !!nextProps;\n        }\n        if (!nextProps) {\n            return true;\n        }\n        return hasPropsChanged(prevProps, nextProps, emits);\n    }\n    return false;\n}\nfunction hasPropsChanged(prevProps, nextProps, emitsOptions) {\n    const nextKeys = Object.keys(nextProps);\n    if (nextKeys.length !== Object.keys(prevProps).length) {\n        return true;\n    }\n    for (let i = 0; i < nextKeys.length; i++) {\n        const key = nextKeys[i];\n        if (nextProps[key] !== prevProps[key] &&\n            !isEmitListener(emitsOptions, key)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction updateHOCHostEl({ vnode, parent }, el // HostNode\n) {\n    while (parent && parent.subTree === vnode) {\n        (vnode = parent.vnode).el = el;\n        parent = parent.parent;\n    }\n}\n\nconst isSuspense = (type) => type.__isSuspense;\n// Suspense exposes a component-like API, and is treated like a component\n// in the compiler, but internally it's a special built-in type that hooks\n// directly into the renderer.\nconst SuspenseImpl = {\n    name: 'Suspense',\n    // In order to make Suspense tree-shakable, we need to avoid importing it\n    // directly in the renderer. The renderer checks for the __isSuspense flag\n    // on a vnode's type and calls the `process` method, passing in renderer\n    // internals.\n    __isSuspense: true,\n    process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, \n    // platform-specific impl passed from renderer\n    rendererInternals) {\n        if (n1 == null) {\n            mountSuspense(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals);\n        }\n        else {\n            patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, rendererInternals);\n        }\n    },\n    hydrate: hydrateSuspense,\n    create: createSuspenseBoundary,\n    normalize: normalizeSuspenseChildren\n};\n// Force-casted public typing for h and TSX props inference\nconst Suspense = (SuspenseImpl\n    );\nfunction triggerEvent(vnode, name) {\n    const eventListener = vnode.props && vnode.props[name];\n    if (isFunction(eventListener)) {\n        eventListener();\n    }\n}\nfunction mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals) {\n    const { p: patch, o: { createElement } } = rendererInternals;\n    const hiddenContainer = createElement('div');\n    const suspense = (vnode.suspense = createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals));\n    // start mounting the content subtree in an off-dom container\n    patch(null, (suspense.pendingBranch = vnode.ssContent), hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds);\n    // now check if we have encountered any async deps\n    if (suspense.deps > 0) {\n        // has async\n        // invoke @fallback event\n        triggerEvent(vnode, 'onPending');\n        triggerEvent(vnode, 'onFallback');\n        // mount the fallback tree\n        patch(null, vnode.ssFallback, container, anchor, parentComponent, null, // fallback tree will not have suspense context\n        isSVG, slotScopeIds);\n        setActiveBranch(suspense, vnode.ssFallback);\n    }\n    else {\n        // Suspense has no async deps. Just resolve.\n        suspense.resolve();\n    }\n}\nfunction patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement } }) {\n    const suspense = (n2.suspense = n1.suspense);\n    suspense.vnode = n2;\n    n2.el = n1.el;\n    const newBranch = n2.ssContent;\n    const newFallback = n2.ssFallback;\n    const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;\n    if (pendingBranch) {\n        suspense.pendingBranch = newBranch;\n        if (isSameVNodeType(newBranch, pendingBranch)) {\n            // same root type but content may have changed.\n            patch(pendingBranch, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\n            if (suspense.deps <= 0) {\n                suspense.resolve();\n            }\n            else if (isInFallback) {\n                patch(activeBranch, newFallback, container, anchor, parentComponent, null, // fallback tree will not have suspense context\n                isSVG, slotScopeIds, optimized);\n                setActiveBranch(suspense, newFallback);\n            }\n        }\n        else {\n            // toggled before pending tree is resolved\n            suspense.pendingId++;\n            if (isHydrating) {\n                // if toggled before hydration is finished, the current DOM tree is\n                // no longer valid. set it as the active branch so it will be unmounted\n                // when resolved\n                suspense.isHydrating = false;\n                suspense.activeBranch = pendingBranch;\n            }\n            else {\n                unmount(pendingBranch, parentComponent, suspense);\n            }\n            // increment pending ID. this is used to invalidate async callbacks\n            // reset suspense state\n            suspense.deps = 0;\n            // discard effects from pending branch\n            suspense.effects.length = 0;\n            // discard previous container\n            suspense.hiddenContainer = createElement('div');\n            if (isInFallback) {\n                // already in fallback state\n                patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\n                if (suspense.deps <= 0) {\n                    suspense.resolve();\n                }\n                else {\n                    patch(activeBranch, newFallback, container, anchor, parentComponent, null, // fallback tree will not have suspense context\n                    isSVG, slotScopeIds, optimized);\n                    setActiveBranch(suspense, newFallback);\n                }\n            }\n            else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n                // toggled \"back\" to current active branch\n                patch(activeBranch, newBranch, container, anchor, parentComponent, suspense, isSVG, slotScopeIds, optimized);\n                // force resolve\n                suspense.resolve(true);\n            }\n            else {\n                // switched to a 3rd branch\n                patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\n                if (suspense.deps <= 0) {\n                    suspense.resolve();\n                }\n            }\n        }\n    }\n    else {\n        if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n            // root did not change, just normal patch\n            patch(activeBranch, newBranch, container, anchor, parentComponent, suspense, isSVG, slotScopeIds, optimized);\n            setActiveBranch(suspense, newBranch);\n        }\n        else {\n            // root node toggled\n            // invoke @pending event\n            triggerEvent(n2, 'onPending');\n            // mount pending branch in off-dom container\n            suspense.pendingBranch = newBranch;\n            suspense.pendingId++;\n            patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\n            if (suspense.deps <= 0) {\n                // incoming branch has no async deps, resolve now.\n                suspense.resolve();\n            }\n            else {\n                const { timeout, pendingId } = suspense;\n                if (timeout > 0) {\n                    setTimeout(() => {\n                        if (suspense.pendingId === pendingId) {\n                            suspense.fallback(newFallback);\n                        }\n                    }, timeout);\n                }\n                else if (timeout === 0) {\n                    suspense.fallback(newFallback);\n                }\n            }\n        }\n    }\n}\nlet hasWarned = false;\nfunction createSuspenseBoundary(vnode, parent, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals, isHydrating = false) {\n    /* istanbul ignore if */\n    if ((process.env.NODE_ENV !== 'production') && !false && !hasWarned) {\n        hasWarned = true;\n        // @ts-ignore `console.info` cannot be null error\n        console[console.info ? 'info' : 'log'](`<Suspense> is an experimental feature and its API will likely change.`);\n    }\n    const { p: patch, m: move, um: unmount, n: next, o: { parentNode, remove } } = rendererInternals;\n    const timeout = toNumber(vnode.props && vnode.props.timeout);\n    const suspense = {\n        vnode,\n        parent,\n        parentComponent,\n        isSVG,\n        container,\n        hiddenContainer,\n        anchor,\n        deps: 0,\n        pendingId: 0,\n        timeout: typeof timeout === 'number' ? timeout : -1,\n        activeBranch: null,\n        pendingBranch: null,\n        isInFallback: true,\n        isHydrating,\n        isUnmounted: false,\n        effects: [],\n        resolve(resume = false) {\n            if ((process.env.NODE_ENV !== 'production')) {\n                if (!resume && !suspense.pendingBranch) {\n                    throw new Error(`suspense.resolve() is called without a pending branch.`);\n                }\n                if (suspense.isUnmounted) {\n                    throw new Error(`suspense.resolve() is called on an already unmounted suspense boundary.`);\n                }\n            }\n            const { vnode, activeBranch, pendingBranch, pendingId, effects, parentComponent, container } = suspense;\n            if (suspense.isHydrating) {\n                suspense.isHydrating = false;\n            }\n            else if (!resume) {\n                const delayEnter = activeBranch &&\n                    pendingBranch.transition &&\n                    pendingBranch.transition.mode === 'out-in';\n                if (delayEnter) {\n                    activeBranch.transition.afterLeave = () => {\n                        if (pendingId === suspense.pendingId) {\n                            move(pendingBranch, container, anchor, 0 /* MoveType.ENTER */);\n                        }\n                    };\n                }\n                // this is initial anchor on mount\n                let { anchor } = suspense;\n                // unmount current active tree\n                if (activeBranch) {\n                    // if the fallback tree was mounted, it may have been moved\n                    // as part of a parent suspense. get the latest anchor for insertion\n                    anchor = next(activeBranch);\n                    unmount(activeBranch, parentComponent, suspense, true);\n                }\n                if (!delayEnter) {\n                    // move content from off-dom container to actual container\n                    move(pendingBranch, container, anchor, 0 /* MoveType.ENTER */);\n                }\n            }\n            setActiveBranch(suspense, pendingBranch);\n            suspense.pendingBranch = null;\n            suspense.isInFallback = false;\n            // flush buffered effects\n            // check if there is a pending parent suspense\n            let parent = suspense.parent;\n            let hasUnresolvedAncestor = false;\n            while (parent) {\n                if (parent.pendingBranch) {\n                    // found a pending parent suspense, merge buffered post jobs\n                    // into that parent\n                    parent.effects.push(...effects);\n                    hasUnresolvedAncestor = true;\n                    break;\n                }\n                parent = parent.parent;\n            }\n            // no pending parent suspense, flush all jobs\n            if (!hasUnresolvedAncestor) {\n                queuePostFlushCb(effects);\n            }\n            suspense.effects = [];\n            // invoke @resolve event\n            triggerEvent(vnode, 'onResolve');\n        },\n        fallback(fallbackVNode) {\n            if (!suspense.pendingBranch) {\n                return;\n            }\n            const { vnode, activeBranch, parentComponent, container, isSVG } = suspense;\n            // invoke @fallback event\n            triggerEvent(vnode, 'onFallback');\n            const anchor = next(activeBranch);\n            const mountFallback = () => {\n                if (!suspense.isInFallback) {\n                    return;\n                }\n                // mount the fallback tree\n                patch(null, fallbackVNode, container, anchor, parentComponent, null, // fallback tree will not have suspense context\n                isSVG, slotScopeIds, optimized);\n                setActiveBranch(suspense, fallbackVNode);\n            };\n            const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === 'out-in';\n            if (delayEnter) {\n                activeBranch.transition.afterLeave = mountFallback;\n            }\n            suspense.isInFallback = true;\n            // unmount current active branch\n            unmount(activeBranch, parentComponent, null, // no suspense so unmount hooks fire now\n            true // shouldRemove\n            );\n            if (!delayEnter) {\n                mountFallback();\n            }\n        },\n        move(container, anchor, type) {\n            suspense.activeBranch &&\n                move(suspense.activeBranch, container, anchor, type);\n            suspense.container = container;\n        },\n        next() {\n            return suspense.activeBranch && next(suspense.activeBranch);\n        },\n        registerDep(instance, setupRenderEffect) {\n            const isInPendingSuspense = !!suspense.pendingBranch;\n            if (isInPendingSuspense) {\n                suspense.deps++;\n            }\n            const hydratedEl = instance.vnode.el;\n            instance\n                .asyncDep.catch(err => {\n                handleError(err, instance, 0 /* ErrorCodes.SETUP_FUNCTION */);\n            })\n                .then(asyncSetupResult => {\n                // retry when the setup() promise resolves.\n                // component may have been unmounted before resolve.\n                if (instance.isUnmounted ||\n                    suspense.isUnmounted ||\n                    suspense.pendingId !== instance.suspenseId) {\n                    return;\n                }\n                // retry from this component\n                instance.asyncResolved = true;\n                const { vnode } = instance;\n                if ((process.env.NODE_ENV !== 'production')) {\n                    pushWarningContext(vnode);\n                }\n                handleSetupResult(instance, asyncSetupResult, false);\n                if (hydratedEl) {\n                    // vnode may have been replaced if an update happened before the\n                    // async dep is resolved.\n                    vnode.el = hydratedEl;\n                }\n                const placeholder = !hydratedEl && instance.subTree.el;\n                setupRenderEffect(instance, vnode, \n                // component may have been moved before resolve.\n                // if this is not a hydration, instance.subTree will be the comment\n                // placeholder.\n                parentNode(hydratedEl || instance.subTree.el), \n                // anchor will not be used if this is hydration, so only need to\n                // consider the comment placeholder case.\n                hydratedEl ? null : next(instance.subTree), suspense, isSVG, optimized);\n                if (placeholder) {\n                    remove(placeholder);\n                }\n                updateHOCHostEl(instance, vnode.el);\n                if ((process.env.NODE_ENV !== 'production')) {\n                    popWarningContext();\n                }\n                // only decrease deps count if suspense is not already resolved\n                if (isInPendingSuspense && --suspense.deps === 0) {\n                    suspense.resolve();\n                }\n            });\n        },\n        unmount(parentSuspense, doRemove) {\n            suspense.isUnmounted = true;\n            if (suspense.activeBranch) {\n                unmount(suspense.activeBranch, parentComponent, parentSuspense, doRemove);\n            }\n            if (suspense.pendingBranch) {\n                unmount(suspense.pendingBranch, parentComponent, parentSuspense, doRemove);\n            }\n        }\n    };\n    return suspense;\n}\nfunction hydrateSuspense(node, vnode, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals, hydrateNode) {\n    /* eslint-disable no-restricted-globals */\n    const suspense = (vnode.suspense = createSuspenseBoundary(vnode, parentSuspense, parentComponent, node.parentNode, document.createElement('div'), null, isSVG, slotScopeIds, optimized, rendererInternals, true /* hydrating */));\n    // there are two possible scenarios for server-rendered suspense:\n    // - success: ssr content should be fully resolved\n    // - failure: ssr content should be the fallback branch.\n    // however, on the client we don't really know if it has failed or not\n    // attempt to hydrate the DOM assuming it has succeeded, but we still\n    // need to construct a suspense boundary first\n    const result = hydrateNode(node, (suspense.pendingBranch = vnode.ssContent), parentComponent, suspense, slotScopeIds, optimized);\n    if (suspense.deps === 0) {\n        suspense.resolve();\n    }\n    return result;\n    /* eslint-enable no-restricted-globals */\n}\nfunction normalizeSuspenseChildren(vnode) {\n    const { shapeFlag, children } = vnode;\n    const isSlotChildren = shapeFlag & 32 /* ShapeFlags.SLOTS_CHILDREN */;\n    vnode.ssContent = normalizeSuspenseSlot(isSlotChildren ? children.default : children);\n    vnode.ssFallback = isSlotChildren\n        ? normalizeSuspenseSlot(children.fallback)\n        : createVNode(Comment);\n}\nfunction normalizeSuspenseSlot(s) {\n    let block;\n    if (isFunction(s)) {\n        const trackBlock = isBlockTreeEnabled && s._c;\n        if (trackBlock) {\n            // disableTracking: false\n            // allow block tracking for compiled slots\n            // (see ./componentRenderContext.ts)\n            s._d = false;\n            openBlock();\n        }\n        s = s();\n        if (trackBlock) {\n            s._d = true;\n            block = currentBlock;\n            closeBlock();\n        }\n    }\n    if (isArray(s)) {\n        const singleChild = filterSingleRoot(s);\n        if ((process.env.NODE_ENV !== 'production') && !singleChild) {\n            warn(`<Suspense> slots expect a single root node.`);\n        }\n        s = singleChild;\n    }\n    s = normalizeVNode(s);\n    if (block && !s.dynamicChildren) {\n        s.dynamicChildren = block.filter(c => c !== s);\n    }\n    return s;\n}\nfunction queueEffectWithSuspense(fn, suspense) {\n    if (suspense && suspense.pendingBranch) {\n        if (isArray(fn)) {\n            suspense.effects.push(...fn);\n        }\n        else {\n            suspense.effects.push(fn);\n        }\n    }\n    else {\n        queuePostFlushCb(fn);\n    }\n}\nfunction setActiveBranch(suspense, branch) {\n    suspense.activeBranch = branch;\n    const { vnode, parentComponent } = suspense;\n    const el = (vnode.el = branch.el);\n    // in case suspense is the root node of a component,\n    // recursively update the HOC el\n    if (parentComponent && parentComponent.subTree === vnode) {\n        parentComponent.vnode.el = el;\n        updateHOCHostEl(parentComponent, el);\n    }\n}\n\nfunction provide(key, value) {\n    if (!currentInstance) {\n        if ((process.env.NODE_ENV !== 'production')) {\n            warn(`provide() can only be used inside setup().`);\n        }\n    }\n    else {\n        let provides = currentInstance.provides;\n        // by default an instance inherits its parent's provides object\n        // but when it needs to provide values of its own, it creates its\n        // own provides object using parent provides object as prototype.\n        // this way in `inject` we can simply look up injections from direct\n        // parent and let the prototype chain do the work.\n        const parentProvides = currentInstance.parent && currentInstance.parent.provides;\n        if (parentProvides === provides) {\n            provides = currentInstance.provides = Object.create(parentProvides);\n        }\n        // TS doesn't allow symbol as index type\n        provides[key] = value;\n    }\n}\nfunction inject(key, defaultValue, treatDefaultAsFactory = false) {\n    // fallback to `currentRenderingInstance` so that this can be called in\n    // a functional component\n    const instance = currentInstance || currentRenderingInstance;\n    if (instance) {\n        // #2400\n        // to support `app.use` plugins,\n        // fallback to appContext's `provides` if the instance is at root\n        const provides = instance.parent == null\n            ? instance.vnode.appContext && instance.vnode.appContext.provides\n            : instance.parent.provides;\n        if (provides && key in provides) {\n            // TS doesn't allow symbol as index type\n            return provides[key];\n        }\n        else if (arguments.length > 1) {\n            return treatDefaultAsFactory && isFunction(defaultValue)\n                ? defaultValue.call(instance.proxy)\n                : defaultValue;\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`injection \"${String(key)}\" not found.`);\n        }\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`inject() can only be used inside setup() or functional components.`);\n    }\n}\n\n// Simple effect.\nfunction watchEffect(effect, options) {\n    return doWatch(effect, null, options);\n}\nfunction watchPostEffect(effect, options) {\n    return doWatch(effect, null, ((process.env.NODE_ENV !== 'production')\n        ? Object.assign(Object.assign({}, options), { flush: 'post' }) : { flush: 'post' }));\n}\nfunction watchSyncEffect(effect, options) {\n    return doWatch(effect, null, ((process.env.NODE_ENV !== 'production')\n        ? Object.assign(Object.assign({}, options), { flush: 'sync' }) : { flush: 'sync' }));\n}\n// initial value for watchers to trigger on undefined initial values\nconst INITIAL_WATCHER_VALUE = {};\n// implementation\nfunction watch(source, cb, options) {\n    if ((process.env.NODE_ENV !== 'production') && !isFunction(cb)) {\n        warn(`\\`watch(fn, options?)\\` signature has been moved to a separate API. ` +\n            `Use \\`watchEffect(fn, options?)\\` instead. \\`watch\\` now only ` +\n            `supports \\`watch(source, cb, options?) signature.`);\n    }\n    return doWatch(source, cb, options);\n}\nfunction doWatch(source, cb, { immediate, deep, flush, onTrack, onTrigger } = EMPTY_OBJ) {\n    if ((process.env.NODE_ENV !== 'production') && !cb) {\n        if (immediate !== undefined) {\n            warn(`watch() \"immediate\" option is only respected when using the ` +\n                `watch(source, callback, options?) signature.`);\n        }\n        if (deep !== undefined) {\n            warn(`watch() \"deep\" option is only respected when using the ` +\n                `watch(source, callback, options?) signature.`);\n        }\n    }\n    const warnInvalidSource = (s) => {\n        warn(`Invalid watch source: `, s, `A watch source can only be a getter/effect function, a ref, ` +\n            `a reactive object, or an array of these types.`);\n    };\n    const instance = currentInstance;\n    let getter;\n    let forceTrigger = false;\n    let isMultiSource = false;\n    if (isRef(source)) {\n        getter = () => source.value;\n        forceTrigger = isShallow$1(source);\n    }\n    else if (isReactive(source)) {\n        getter = () => source;\n        deep = true;\n    }\n    else if (isArray(source)) {\n        isMultiSource = true;\n        forceTrigger = source.some(s => isReactive(s) || isShallow$1(s));\n        getter = () => source.map(s => {\n            if (isRef(s)) {\n                return s.value;\n            }\n            else if (isReactive(s)) {\n                return traverse(s);\n            }\n            else if (isFunction(s)) {\n                return callWithErrorHandling(s, instance, 2 /* ErrorCodes.WATCH_GETTER */);\n            }\n            else {\n                (process.env.NODE_ENV !== 'production') && warnInvalidSource(s);\n            }\n        });\n    }\n    else if (isFunction(source)) {\n        if (cb) {\n            // getter with cb\n            getter = () => callWithErrorHandling(source, instance, 2 /* ErrorCodes.WATCH_GETTER */);\n        }\n        else {\n            // no cb -> simple effect\n            getter = () => {\n                if (instance && instance.isUnmounted) {\n                    return;\n                }\n                if (cleanup) {\n                    cleanup();\n                }\n                return callWithAsyncErrorHandling(source, instance, 3 /* ErrorCodes.WATCH_CALLBACK */, [onCleanup]);\n            };\n        }\n    }\n    else {\n        getter = NOOP;\n        (process.env.NODE_ENV !== 'production') && warnInvalidSource(source);\n    }\n    if (cb && deep) {\n        const baseGetter = getter;\n        getter = () => traverse(baseGetter());\n    }\n    let cleanup;\n    let onCleanup = (fn) => {\n        cleanup = effect.onStop = () => {\n            callWithErrorHandling(fn, instance, 4 /* ErrorCodes.WATCH_CLEANUP */);\n        };\n    };\n    // in SSR there is no need to setup an actual effect, and it should be noop\n    // unless it's eager\n    if (isInSSRComponentSetup) {\n        // we will also not call the invalidate callback (+ runner is not set up)\n        onCleanup = NOOP;\n        if (!cb) {\n            getter();\n        }\n        else if (immediate) {\n            callWithAsyncErrorHandling(cb, instance, 3 /* ErrorCodes.WATCH_CALLBACK */, [\n                getter(),\n                isMultiSource ? [] : undefined,\n                onCleanup\n            ]);\n        }\n        return NOOP;\n    }\n    let oldValue = isMultiSource ? [] : INITIAL_WATCHER_VALUE;\n    const job = () => {\n        if (!effect.active) {\n            return;\n        }\n        if (cb) {\n            // watch(source, cb)\n            const newValue = effect.run();\n            if (deep ||\n                forceTrigger ||\n                (isMultiSource\n                    ? newValue.some((v, i) => hasChanged(v, oldValue[i]))\n                    : hasChanged(newValue, oldValue)) ||\n                (false  )) {\n                // cleanup before running cb again\n                if (cleanup) {\n                    cleanup();\n                }\n                callWithAsyncErrorHandling(cb, instance, 3 /* ErrorCodes.WATCH_CALLBACK */, [\n                    newValue,\n                    // pass undefined as the old value when it's changed for the first time\n                    oldValue === INITIAL_WATCHER_VALUE ? undefined : oldValue,\n                    onCleanup\n                ]);\n                oldValue = newValue;\n            }\n        }\n        else {\n            // watchEffect\n            effect.run();\n        }\n    };\n    // important: mark the job as a watcher callback so that scheduler knows\n    // it is allowed to self-trigger (#1727)\n    job.allowRecurse = !!cb;\n    let scheduler;\n    if (flush === 'sync') {\n        scheduler = job; // the scheduler function gets called directly\n    }\n    else if (flush === 'post') {\n        scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);\n    }\n    else {\n        // default: 'pre'\n        job.pre = true;\n        if (instance)\n            job.id = instance.uid;\n        scheduler = () => queueJob(job);\n    }\n    const effect = new ReactiveEffect(getter, scheduler);\n    if ((process.env.NODE_ENV !== 'production')) {\n        effect.onTrack = onTrack;\n        effect.onTrigger = onTrigger;\n    }\n    // initial run\n    if (cb) {\n        if (immediate) {\n            job();\n        }\n        else {\n            oldValue = effect.run();\n        }\n    }\n    else if (flush === 'post') {\n        queuePostRenderEffect(effect.run.bind(effect), instance && instance.suspense);\n    }\n    else {\n        effect.run();\n    }\n    return () => {\n        effect.stop();\n        if (instance && instance.scope) {\n            remove(instance.scope.effects, effect);\n        }\n    };\n}\n// this.$watch\nfunction instanceWatch(source, value, options) {\n    const publicThis = this.proxy;\n    const getter = isString(source)\n        ? source.includes('.')\n            ? createPathGetter(publicThis, source)\n            : () => publicThis[source]\n        : source.bind(publicThis, publicThis);\n    let cb;\n    if (isFunction(value)) {\n        cb = value;\n    }\n    else {\n        cb = value.handler;\n        options = value;\n    }\n    const cur = currentInstance;\n    setCurrentInstance(this);\n    const res = doWatch(getter, cb.bind(publicThis), options);\n    if (cur) {\n        setCurrentInstance(cur);\n    }\n    else {\n        unsetCurrentInstance();\n    }\n    return res;\n}\nfunction createPathGetter(ctx, path) {\n    const segments = path.split('.');\n    return () => {\n        let cur = ctx;\n        for (let i = 0; i < segments.length && cur; i++) {\n            cur = cur[segments[i]];\n        }\n        return cur;\n    };\n}\nfunction traverse(value, seen) {\n    if (!isObject(value) || value[\"__v_skip\" /* ReactiveFlags.SKIP */]) {\n        return value;\n    }\n    seen = seen || new Set();\n    if (seen.has(value)) {\n        return value;\n    }\n    seen.add(value);\n    if (isRef(value)) {\n        traverse(value.value, seen);\n    }\n    else if (isArray(value)) {\n        for (let i = 0; i < value.length; i++) {\n            traverse(value[i], seen);\n        }\n    }\n    else if (isSet(value) || isMap(value)) {\n        value.forEach((v) => {\n            traverse(v, seen);\n        });\n    }\n    else if (isPlainObject(value)) {\n        for (const key in value) {\n            traverse(value[key], seen);\n        }\n    }\n    return value;\n}\n\nfunction useTransitionState() {\n    const state = {\n        isMounted: false,\n        isLeaving: false,\n        isUnmounting: false,\n        leavingVNodes: new Map()\n    };\n    onMounted(() => {\n        state.isMounted = true;\n    });\n    onBeforeUnmount(() => {\n        state.isUnmounting = true;\n    });\n    return state;\n}\nconst TransitionHookValidator = [Function, Array];\nconst BaseTransitionImpl = {\n    name: `BaseTransition`,\n    props: {\n        mode: String,\n        appear: Boolean,\n        persisted: Boolean,\n        // enter\n        onBeforeEnter: TransitionHookValidator,\n        onEnter: TransitionHookValidator,\n        onAfterEnter: TransitionHookValidator,\n        onEnterCancelled: TransitionHookValidator,\n        // leave\n        onBeforeLeave: TransitionHookValidator,\n        onLeave: TransitionHookValidator,\n        onAfterLeave: TransitionHookValidator,\n        onLeaveCancelled: TransitionHookValidator,\n        // appear\n        onBeforeAppear: TransitionHookValidator,\n        onAppear: TransitionHookValidator,\n        onAfterAppear: TransitionHookValidator,\n        onAppearCancelled: TransitionHookValidator\n    },\n    setup(props, { slots }) {\n        const instance = getCurrentInstance();\n        const state = useTransitionState();\n        let prevTransitionKey;\n        return () => {\n            const children = slots.default && getTransitionRawChildren(slots.default(), true);\n            if (!children || !children.length) {\n                return;\n            }\n            let child = children[0];\n            if (children.length > 1) {\n                let hasFound = false;\n                // locate first non-comment child\n                for (const c of children) {\n                    if (c.type !== Comment) {\n                        if ((process.env.NODE_ENV !== 'production') && hasFound) {\n                            // warn more than one non-comment child\n                            warn('<transition> can only be used on a single element or component. ' +\n                                'Use <transition-group> for lists.');\n                            break;\n                        }\n                        child = c;\n                        hasFound = true;\n                        if (!(process.env.NODE_ENV !== 'production'))\n                            break;\n                    }\n                }\n            }\n            // there's no need to track reactivity for these props so use the raw\n            // props for a bit better perf\n            const rawProps = toRaw(props);\n            const { mode } = rawProps;\n            // check mode\n            if ((process.env.NODE_ENV !== 'production') &&\n                mode &&\n                mode !== 'in-out' &&\n                mode !== 'out-in' &&\n                mode !== 'default') {\n                warn(`invalid <transition> mode: ${mode}`);\n            }\n            if (state.isLeaving) {\n                return emptyPlaceholder(child);\n            }\n            // in the case of <transition><keep-alive/></transition>, we need to\n            // compare the type of the kept-alive children.\n            const innerChild = getKeepAliveChild(child);\n            if (!innerChild) {\n                return emptyPlaceholder(child);\n            }\n            const enterHooks = resolveTransitionHooks(innerChild, rawProps, state, instance);\n            setTransitionHooks(innerChild, enterHooks);\n            const oldChild = instance.subTree;\n            const oldInnerChild = oldChild && getKeepAliveChild(oldChild);\n            let transitionKeyChanged = false;\n            const { getTransitionKey } = innerChild.type;\n            if (getTransitionKey) {\n                const key = getTransitionKey();\n                if (prevTransitionKey === undefined) {\n                    prevTransitionKey = key;\n                }\n                else if (key !== prevTransitionKey) {\n                    prevTransitionKey = key;\n                    transitionKeyChanged = true;\n                }\n            }\n            // handle mode\n            if (oldInnerChild &&\n                oldInnerChild.type !== Comment &&\n                (!isSameVNodeType(innerChild, oldInnerChild) || transitionKeyChanged)) {\n                const leavingHooks = resolveTransitionHooks(oldInnerChild, rawProps, state, instance);\n                // update old tree's hooks in case of dynamic transition\n                setTransitionHooks(oldInnerChild, leavingHooks);\n                // switching between different views\n                if (mode === 'out-in') {\n                    state.isLeaving = true;\n                    // return placeholder node and queue update when leave finishes\n                    leavingHooks.afterLeave = () => {\n                        state.isLeaving = false;\n                        instance.update();\n                    };\n                    return emptyPlaceholder(child);\n                }\n                else if (mode === 'in-out' && innerChild.type !== Comment) {\n                    leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {\n                        const leavingVNodesCache = getLeavingNodesForType(state, oldInnerChild);\n                        leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;\n                        // early removal callback\n                        el._leaveCb = () => {\n                            earlyRemove();\n                            el._leaveCb = undefined;\n                            delete enterHooks.delayedLeave;\n                        };\n                        enterHooks.delayedLeave = delayedLeave;\n                    };\n                }\n            }\n            return child;\n        };\n    }\n};\n// export the public type for h/tsx inference\n// also to avoid inline import() in generated d.ts files\nconst BaseTransition = BaseTransitionImpl;\nfunction getLeavingNodesForType(state, vnode) {\n    const { leavingVNodes } = state;\n    let leavingVNodesCache = leavingVNodes.get(vnode.type);\n    if (!leavingVNodesCache) {\n        leavingVNodesCache = Object.create(null);\n        leavingVNodes.set(vnode.type, leavingVNodesCache);\n    }\n    return leavingVNodesCache;\n}\n// The transition hooks are attached to the vnode as vnode.transition\n// and will be called at appropriate timing in the renderer.\nfunction resolveTransitionHooks(vnode, props, state, instance) {\n    const { appear, mode, persisted = false, onBeforeEnter, onEnter, onAfterEnter, onEnterCancelled, onBeforeLeave, onLeave, onAfterLeave, onLeaveCancelled, onBeforeAppear, onAppear, onAfterAppear, onAppearCancelled } = props;\n    const key = String(vnode.key);\n    const leavingVNodesCache = getLeavingNodesForType(state, vnode);\n    const callHook = (hook, args) => {\n        hook &&\n            callWithAsyncErrorHandling(hook, instance, 9 /* ErrorCodes.TRANSITION_HOOK */, args);\n    };\n    const callAsyncHook = (hook, args) => {\n        const done = args[1];\n        callHook(hook, args);\n        if (isArray(hook)) {\n            if (hook.every(hook => hook.length <= 1))\n                done();\n        }\n        else if (hook.length <= 1) {\n            done();\n        }\n    };\n    const hooks = {\n        mode,\n        persisted,\n        beforeEnter(el) {\n            let hook = onBeforeEnter;\n            if (!state.isMounted) {\n                if (appear) {\n                    hook = onBeforeAppear || onBeforeEnter;\n                }\n                else {\n                    return;\n                }\n            }\n            // for same element (v-show)\n            if (el._leaveCb) {\n                el._leaveCb(true /* cancelled */);\n            }\n            // for toggled element with same key (v-if)\n            const leavingVNode = leavingVNodesCache[key];\n            if (leavingVNode &&\n                isSameVNodeType(vnode, leavingVNode) &&\n                leavingVNode.el._leaveCb) {\n                // force early removal (not cancelled)\n                leavingVNode.el._leaveCb();\n            }\n            callHook(hook, [el]);\n        },\n        enter(el) {\n            let hook = onEnter;\n            let afterHook = onAfterEnter;\n            let cancelHook = onEnterCancelled;\n            if (!state.isMounted) {\n                if (appear) {\n                    hook = onAppear || onEnter;\n                    afterHook = onAfterAppear || onAfterEnter;\n                    cancelHook = onAppearCancelled || onEnterCancelled;\n                }\n                else {\n                    return;\n                }\n            }\n            let called = false;\n            const done = (el._enterCb = (cancelled) => {\n                if (called)\n                    return;\n                called = true;\n                if (cancelled) {\n                    callHook(cancelHook, [el]);\n                }\n                else {\n                    callHook(afterHook, [el]);\n                }\n                if (hooks.delayedLeave) {\n                    hooks.delayedLeave();\n                }\n                el._enterCb = undefined;\n            });\n            if (hook) {\n                callAsyncHook(hook, [el, done]);\n            }\n            else {\n                done();\n            }\n        },\n        leave(el, remove) {\n            const key = String(vnode.key);\n            if (el._enterCb) {\n                el._enterCb(true /* cancelled */);\n            }\n            if (state.isUnmounting) {\n                return remove();\n            }\n            callHook(onBeforeLeave, [el]);\n            let called = false;\n            const done = (el._leaveCb = (cancelled) => {\n                if (called)\n                    return;\n                called = true;\n                remove();\n                if (cancelled) {\n                    callHook(onLeaveCancelled, [el]);\n                }\n                else {\n                    callHook(onAfterLeave, [el]);\n                }\n                el._leaveCb = undefined;\n                if (leavingVNodesCache[key] === vnode) {\n                    delete leavingVNodesCache[key];\n                }\n            });\n            leavingVNodesCache[key] = vnode;\n            if (onLeave) {\n                callAsyncHook(onLeave, [el, done]);\n            }\n            else {\n                done();\n            }\n        },\n        clone(vnode) {\n            return resolveTransitionHooks(vnode, props, state, instance);\n        }\n    };\n    return hooks;\n}\n// the placeholder really only handles one special case: KeepAlive\n// in the case of a KeepAlive in a leave phase we need to return a KeepAlive\n// placeholder with empty content to avoid the KeepAlive instance from being\n// unmounted.\nfunction emptyPlaceholder(vnode) {\n    if (isKeepAlive(vnode)) {\n        vnode = cloneVNode(vnode);\n        vnode.children = null;\n        return vnode;\n    }\n}\nfunction getKeepAliveChild(vnode) {\n    return isKeepAlive(vnode)\n        ? vnode.children\n            ? vnode.children[0]\n            : undefined\n        : vnode;\n}\nfunction setTransitionHooks(vnode, hooks) {\n    if (vnode.shapeFlag & 6 /* ShapeFlags.COMPONENT */ && vnode.component) {\n        setTransitionHooks(vnode.component.subTree, hooks);\n    }\n    else if (vnode.shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n        vnode.ssContent.transition = hooks.clone(vnode.ssContent);\n        vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);\n    }\n    else {\n        vnode.transition = hooks;\n    }\n}\nfunction getTransitionRawChildren(children, keepComment = false, parentKey) {\n    let ret = [];\n    let keyedFragmentCount = 0;\n    for (let i = 0; i < children.length; i++) {\n        let child = children[i];\n        // #5360 inherit parent key in case of <template v-for>\n        const key = parentKey == null\n            ? child.key\n            : String(parentKey) + String(child.key != null ? child.key : i);\n        // handle fragment children case, e.g. v-for\n        if (child.type === Fragment) {\n            if (child.patchFlag & 128 /* PatchFlags.KEYED_FRAGMENT */)\n                keyedFragmentCount++;\n            ret = ret.concat(getTransitionRawChildren(child.children, keepComment, key));\n        }\n        // comment placeholders should be skipped, e.g. v-if\n        else if (keepComment || child.type !== Comment) {\n            ret.push(key != null ? cloneVNode(child, { key }) : child);\n        }\n    }\n    // #1126 if a transition children list contains multiple sub fragments, these\n    // fragments will be merged into a flat children array. Since each v-for\n    // fragment may contain different static bindings inside, we need to de-op\n    // these children to force full diffs to ensure correct behavior.\n    if (keyedFragmentCount > 1) {\n        for (let i = 0; i < ret.length; i++) {\n            ret[i].patchFlag = -2 /* PatchFlags.BAIL */;\n        }\n    }\n    return ret;\n}\n\n// implementation, close to no-op\nfunction defineComponent(options) {\n    return isFunction(options) ? { setup: options, name: options.name } : options;\n}\n\nconst isAsyncWrapper = (i) => !!i.type.__asyncLoader;\nfunction defineAsyncComponent(source) {\n    if (isFunction(source)) {\n        source = { loader: source };\n    }\n    const { loader, loadingComponent, errorComponent, delay = 200, timeout, // undefined = never times out\n    suspensible = true, onError: userOnError } = source;\n    let pendingRequest = null;\n    let resolvedComp;\n    let retries = 0;\n    const retry = () => {\n        retries++;\n        pendingRequest = null;\n        return load();\n    };\n    const load = () => {\n        let thisRequest;\n        return (pendingRequest ||\n            (thisRequest = pendingRequest =\n                loader()\n                    .catch(err => {\n                    err = err instanceof Error ? err : new Error(String(err));\n                    if (userOnError) {\n                        return new Promise((resolve, reject) => {\n                            const userRetry = () => resolve(retry());\n                            const userFail = () => reject(err);\n                            userOnError(err, userRetry, userFail, retries + 1);\n                        });\n                    }\n                    else {\n                        throw err;\n                    }\n                })\n                    .then((comp) => {\n                    if (thisRequest !== pendingRequest && pendingRequest) {\n                        return pendingRequest;\n                    }\n                    if ((process.env.NODE_ENV !== 'production') && !comp) {\n                        warn(`Async component loader resolved to undefined. ` +\n                            `If you are using retry(), make sure to return its return value.`);\n                    }\n                    // interop module default\n                    if (comp &&\n                        (comp.__esModule || comp[Symbol.toStringTag] === 'Module')) {\n                        comp = comp.default;\n                    }\n                    if ((process.env.NODE_ENV !== 'production') && comp && !isObject(comp) && !isFunction(comp)) {\n                        throw new Error(`Invalid async component load result: ${comp}`);\n                    }\n                    resolvedComp = comp;\n                    return comp;\n                })));\n    };\n    return defineComponent({\n        name: 'AsyncComponentWrapper',\n        __asyncLoader: load,\n        get __asyncResolved() {\n            return resolvedComp;\n        },\n        setup() {\n            const instance = currentInstance;\n            // already resolved\n            if (resolvedComp) {\n                return () => createInnerComp(resolvedComp, instance);\n            }\n            const onError = (err) => {\n                pendingRequest = null;\n                handleError(err, instance, 13 /* ErrorCodes.ASYNC_COMPONENT_LOADER */, !errorComponent /* do not throw in dev if user provided error component */);\n            };\n            // suspense-controlled or SSR.\n            if ((suspensible && instance.suspense) ||\n                (isInSSRComponentSetup)) {\n                return load()\n                    .then(comp => {\n                    return () => createInnerComp(comp, instance);\n                })\n                    .catch(err => {\n                    onError(err);\n                    return () => errorComponent\n                        ? createVNode(errorComponent, {\n                            error: err\n                        })\n                        : null;\n                });\n            }\n            const loaded = ref(false);\n            const error = ref();\n            const delayed = ref(!!delay);\n            if (delay) {\n                setTimeout(() => {\n                    delayed.value = false;\n                }, delay);\n            }\n            if (timeout != null) {\n                setTimeout(() => {\n                    if (!loaded.value && !error.value) {\n                        const err = new Error(`Async component timed out after ${timeout}ms.`);\n                        onError(err);\n                        error.value = err;\n                    }\n                }, timeout);\n            }\n            load()\n                .then(() => {\n                loaded.value = true;\n                if (instance.parent && isKeepAlive(instance.parent.vnode)) {\n                    // parent is keep-alive, force update so the loaded component's\n                    // name is taken into account\n                    queueJob(instance.parent.update);\n                }\n            })\n                .catch(err => {\n                onError(err);\n                error.value = err;\n            });\n            return () => {\n                if (loaded.value && resolvedComp) {\n                    return createInnerComp(resolvedComp, instance);\n                }\n                else if (error.value && errorComponent) {\n                    return createVNode(errorComponent, {\n                        error: error.value\n                    });\n                }\n                else if (loadingComponent && !delayed.value) {\n                    return createVNode(loadingComponent);\n                }\n            };\n        }\n    });\n}\nfunction createInnerComp(comp, { vnode: { ref, props, children, shapeFlag }, parent }) {\n    const vnode = createVNode(comp, props, children);\n    // ensure inner component inherits the async wrapper's ref owner\n    vnode.ref = ref;\n    return vnode;\n}\n\nconst isKeepAlive = (vnode) => vnode.type.__isKeepAlive;\nconst KeepAliveImpl = {\n    name: `KeepAlive`,\n    // Marker for special handling inside the renderer. We are not using a ===\n    // check directly on KeepAlive in the renderer, because importing it directly\n    // would prevent it from being tree-shaken.\n    __isKeepAlive: true,\n    props: {\n        include: [String, RegExp, Array],\n        exclude: [String, RegExp, Array],\n        max: [String, Number]\n    },\n    setup(props, { slots }) {\n        const instance = getCurrentInstance();\n        // KeepAlive communicates with the instantiated renderer via the\n        // ctx where the renderer passes in its internals,\n        // and the KeepAlive instance exposes activate/deactivate implementations.\n        // The whole point of this is to avoid importing KeepAlive directly in the\n        // renderer to facilitate tree-shaking.\n        const sharedContext = instance.ctx;\n        // if the internal renderer is not registered, it indicates that this is server-side rendering,\n        // for KeepAlive, we just need to render its children\n        if (!sharedContext.renderer) {\n            return () => {\n                const children = slots.default && slots.default();\n                return children && children.length === 1 ? children[0] : children;\n            };\n        }\n        const cache = new Map();\n        const keys = new Set();\n        let current = null;\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n            instance.__v_cache = cache;\n        }\n        const parentSuspense = instance.suspense;\n        const { renderer: { p: patch, m: move, um: _unmount, o: { createElement } } } = sharedContext;\n        const storageContainer = createElement('div');\n        sharedContext.activate = (vnode, container, anchor, isSVG, optimized) => {\n            const instance = vnode.component;\n            move(vnode, container, anchor, 0 /* MoveType.ENTER */, parentSuspense);\n            // in case props have changed\n            patch(instance.vnode, vnode, container, anchor, instance, parentSuspense, isSVG, vnode.slotScopeIds, optimized);\n            queuePostRenderEffect(() => {\n                instance.isDeactivated = false;\n                if (instance.a) {\n                    invokeArrayFns(instance.a);\n                }\n                const vnodeHook = vnode.props && vnode.props.onVnodeMounted;\n                if (vnodeHook) {\n                    invokeVNodeHook(vnodeHook, instance.parent, vnode);\n                }\n            }, parentSuspense);\n            if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n                // Update components tree\n                devtoolsComponentAdded(instance);\n            }\n        };\n        sharedContext.deactivate = (vnode) => {\n            const instance = vnode.component;\n            move(vnode, storageContainer, null, 1 /* MoveType.LEAVE */, parentSuspense);\n            queuePostRenderEffect(() => {\n                if (instance.da) {\n                    invokeArrayFns(instance.da);\n                }\n                const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;\n                if (vnodeHook) {\n                    invokeVNodeHook(vnodeHook, instance.parent, vnode);\n                }\n                instance.isDeactivated = true;\n            }, parentSuspense);\n            if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n                // Update components tree\n                devtoolsComponentAdded(instance);\n            }\n        };\n        function unmount(vnode) {\n            // reset the shapeFlag so it can be properly unmounted\n            resetShapeFlag(vnode);\n            _unmount(vnode, instance, parentSuspense, true);\n        }\n        function pruneCache(filter) {\n            cache.forEach((vnode, key) => {\n                const name = getComponentName(vnode.type);\n                if (name && (!filter || !filter(name))) {\n                    pruneCacheEntry(key);\n                }\n            });\n        }\n        function pruneCacheEntry(key) {\n            const cached = cache.get(key);\n            if (!current || cached.type !== current.type) {\n                unmount(cached);\n            }\n            else if (current) {\n                // current active instance should no longer be kept-alive.\n                // we can't unmount it now but it might be later, so reset its flag now.\n                resetShapeFlag(current);\n            }\n            cache.delete(key);\n            keys.delete(key);\n        }\n        // prune cache on include/exclude prop change\n        watch(() => [props.include, props.exclude], ([include, exclude]) => {\n            include && pruneCache(name => matches(include, name));\n            exclude && pruneCache(name => !matches(exclude, name));\n        }, \n        // prune post-render after `current` has been updated\n        { flush: 'post', deep: true });\n        // cache sub tree after render\n        let pendingCacheKey = null;\n        const cacheSubtree = () => {\n            // fix #1621, the pendingCacheKey could be 0\n            if (pendingCacheKey != null) {\n                cache.set(pendingCacheKey, getInnerChild(instance.subTree));\n            }\n        };\n        onMounted(cacheSubtree);\n        onUpdated(cacheSubtree);\n        onBeforeUnmount(() => {\n            cache.forEach(cached => {\n                const { subTree, suspense } = instance;\n                const vnode = getInnerChild(subTree);\n                if (cached.type === vnode.type) {\n                    // current instance will be unmounted as part of keep-alive's unmount\n                    resetShapeFlag(vnode);\n                    // but invoke its deactivated hook here\n                    const da = vnode.component.da;\n                    da && queuePostRenderEffect(da, suspense);\n                    return;\n                }\n                unmount(cached);\n            });\n        });\n        return () => {\n            pendingCacheKey = null;\n            if (!slots.default) {\n                return null;\n            }\n            const children = slots.default();\n            const rawVNode = children[0];\n            if (children.length > 1) {\n                if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`KeepAlive should contain exactly one component child.`);\n                }\n                current = null;\n                return children;\n            }\n            else if (!isVNode(rawVNode) ||\n                (!(rawVNode.shapeFlag & 4 /* ShapeFlags.STATEFUL_COMPONENT */) &&\n                    !(rawVNode.shapeFlag & 128 /* ShapeFlags.SUSPENSE */))) {\n                current = null;\n                return rawVNode;\n            }\n            let vnode = getInnerChild(rawVNode);\n            const comp = vnode.type;\n            // for async components, name check should be based in its loaded\n            // inner component if available\n            const name = getComponentName(isAsyncWrapper(vnode)\n                ? vnode.type.__asyncResolved || {}\n                : comp);\n            const { include, exclude, max } = props;\n            if ((include && (!name || !matches(include, name))) ||\n                (exclude && name && matches(exclude, name))) {\n                current = vnode;\n                return rawVNode;\n            }\n            const key = vnode.key == null ? comp : vnode.key;\n            const cachedVNode = cache.get(key);\n            // clone vnode if it's reused because we are going to mutate it\n            if (vnode.el) {\n                vnode = cloneVNode(vnode);\n                if (rawVNode.shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n                    rawVNode.ssContent = vnode;\n                }\n            }\n            // #1513 it's possible for the returned vnode to be cloned due to attr\n            // fallthrough or scopeId, so the vnode here may not be the final vnode\n            // that is mounted. Instead of caching it directly, we store the pending\n            // key and cache `instance.subTree` (the normalized vnode) in\n            // beforeMount/beforeUpdate hooks.\n            pendingCacheKey = key;\n            if (cachedVNode) {\n                // copy over mounted state\n                vnode.el = cachedVNode.el;\n                vnode.component = cachedVNode.component;\n                if (vnode.transition) {\n                    // recursively update transition hooks on subTree\n                    setTransitionHooks(vnode, vnode.transition);\n                }\n                // avoid vnode being mounted as fresh\n                vnode.shapeFlag |= 512 /* ShapeFlags.COMPONENT_KEPT_ALIVE */;\n                // make this key the freshest\n                keys.delete(key);\n                keys.add(key);\n            }\n            else {\n                keys.add(key);\n                // prune oldest entry\n                if (max && keys.size > parseInt(max, 10)) {\n                    pruneCacheEntry(keys.values().next().value);\n                }\n            }\n            // avoid vnode being unmounted\n            vnode.shapeFlag |= 256 /* ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE */;\n            current = vnode;\n            return isSuspense(rawVNode.type) ? rawVNode : vnode;\n        };\n    }\n};\n// export the public type for h/tsx inference\n// also to avoid inline import() in generated d.ts files\nconst KeepAlive = KeepAliveImpl;\nfunction matches(pattern, name) {\n    if (isArray(pattern)) {\n        return pattern.some((p) => matches(p, name));\n    }\n    else if (isString(pattern)) {\n        return pattern.split(',').includes(name);\n    }\n    else if (pattern.test) {\n        return pattern.test(name);\n    }\n    /* istanbul ignore next */\n    return false;\n}\nfunction onActivated(hook, target) {\n    registerKeepAliveHook(hook, \"a\" /* LifecycleHooks.ACTIVATED */, target);\n}\nfunction onDeactivated(hook, target) {\n    registerKeepAliveHook(hook, \"da\" /* LifecycleHooks.DEACTIVATED */, target);\n}\nfunction registerKeepAliveHook(hook, type, target = currentInstance) {\n    // cache the deactivate branch check wrapper for injected hooks so the same\n    // hook can be properly deduped by the scheduler. \"__wdc\" stands for \"with\n    // deactivation check\".\n    const wrappedHook = hook.__wdc ||\n        (hook.__wdc = () => {\n            // only fire the hook if the target instance is NOT in a deactivated branch.\n            let current = target;\n            while (current) {\n                if (current.isDeactivated) {\n                    return;\n                }\n                current = current.parent;\n            }\n            return hook();\n        });\n    injectHook(type, wrappedHook, target);\n    // In addition to registering it on the target instance, we walk up the parent\n    // chain and register it on all ancestor instances that are keep-alive roots.\n    // This avoids the need to walk the entire component tree when invoking these\n    // hooks, and more importantly, avoids the need to track child components in\n    // arrays.\n    if (target) {\n        let current = target.parent;\n        while (current && current.parent) {\n            if (isKeepAlive(current.parent.vnode)) {\n                injectToKeepAliveRoot(wrappedHook, type, target, current);\n            }\n            current = current.parent;\n        }\n    }\n}\nfunction injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {\n    // injectHook wraps the original for error handling, so make sure to remove\n    // the wrapped version.\n    const injected = injectHook(type, hook, keepAliveRoot, true /* prepend */);\n    onUnmounted(() => {\n        remove(keepAliveRoot[type], injected);\n    }, target);\n}\nfunction resetShapeFlag(vnode) {\n    let shapeFlag = vnode.shapeFlag;\n    if (shapeFlag & 256 /* ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE */) {\n        shapeFlag -= 256 /* ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE */;\n    }\n    if (shapeFlag & 512 /* ShapeFlags.COMPONENT_KEPT_ALIVE */) {\n        shapeFlag -= 512 /* ShapeFlags.COMPONENT_KEPT_ALIVE */;\n    }\n    vnode.shapeFlag = shapeFlag;\n}\nfunction getInnerChild(vnode) {\n    return vnode.shapeFlag & 128 /* ShapeFlags.SUSPENSE */ ? vnode.ssContent : vnode;\n}\n\nfunction injectHook(type, hook, target = currentInstance, prepend = false) {\n    if (target) {\n        const hooks = target[type] || (target[type] = []);\n        // cache the error handling wrapper for injected hooks so the same hook\n        // can be properly deduped by the scheduler. \"__weh\" stands for \"with error\n        // handling\".\n        const wrappedHook = hook.__weh ||\n            (hook.__weh = (...args) => {\n                if (target.isUnmounted) {\n                    return;\n                }\n                // disable tracking inside all lifecycle hooks\n                // since they can potentially be called inside effects.\n                pauseTracking();\n                // Set currentInstance during hook invocation.\n                // This assumes the hook does not synchronously trigger other hooks, which\n                // can only be false when the user does something really funky.\n                setCurrentInstance(target);\n                const res = callWithAsyncErrorHandling(hook, target, type, args);\n                unsetCurrentInstance();\n                resetTracking();\n                return res;\n            });\n        if (prepend) {\n            hooks.unshift(wrappedHook);\n        }\n        else {\n            hooks.push(wrappedHook);\n        }\n        return wrappedHook;\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        const apiName = toHandlerKey(ErrorTypeStrings[type].replace(/ hook$/, ''));\n        warn(`${apiName} is called when there is no active component instance to be ` +\n            `associated with. ` +\n            `Lifecycle injection APIs can only be used during execution of setup().` +\n            (` If you are using async setup(), make sure to register lifecycle ` +\n                    `hooks before the first await statement.`\n                ));\n    }\n}\nconst createHook = (lifecycle) => (hook, target = currentInstance) => \n// post-create lifecycle registrations are noops during SSR (except for serverPrefetch)\n(!isInSSRComponentSetup || lifecycle === \"sp\" /* LifecycleHooks.SERVER_PREFETCH */) &&\n    injectHook(lifecycle, (...args) => hook(...args), target);\nconst onBeforeMount = createHook(\"bm\" /* LifecycleHooks.BEFORE_MOUNT */);\nconst onMounted = createHook(\"m\" /* LifecycleHooks.MOUNTED */);\nconst onBeforeUpdate = createHook(\"bu\" /* LifecycleHooks.BEFORE_UPDATE */);\nconst onUpdated = createHook(\"u\" /* LifecycleHooks.UPDATED */);\nconst onBeforeUnmount = createHook(\"bum\" /* LifecycleHooks.BEFORE_UNMOUNT */);\nconst onUnmounted = createHook(\"um\" /* LifecycleHooks.UNMOUNTED */);\nconst onServerPrefetch = createHook(\"sp\" /* LifecycleHooks.SERVER_PREFETCH */);\nconst onRenderTriggered = createHook(\"rtg\" /* LifecycleHooks.RENDER_TRIGGERED */);\nconst onRenderTracked = createHook(\"rtc\" /* LifecycleHooks.RENDER_TRACKED */);\nfunction onErrorCaptured(hook, target = currentInstance) {\n    injectHook(\"ec\" /* LifecycleHooks.ERROR_CAPTURED */, hook, target);\n}\n\n/**\nRuntime helper for applying directives to a vnode. Example usage:\n\nconst comp = resolveComponent('comp')\nconst foo = resolveDirective('foo')\nconst bar = resolveDirective('bar')\n\nreturn withDirectives(h(comp), [\n  [foo, this.x],\n  [bar, this.y]\n])\n*/\nfunction validateDirectiveName(name) {\n    if (isBuiltInDirective(name)) {\n        warn('Do not use built-in directive ids as custom directive id: ' + name);\n    }\n}\n/**\n * Adds directives to a VNode.\n */\nfunction withDirectives(vnode, directives) {\n    const internalInstance = currentRenderingInstance;\n    if (internalInstance === null) {\n        (process.env.NODE_ENV !== 'production') && warn(`withDirectives can only be used inside render functions.`);\n        return vnode;\n    }\n    const instance = getExposeProxy(internalInstance) ||\n        internalInstance.proxy;\n    const bindings = vnode.dirs || (vnode.dirs = []);\n    for (let i = 0; i < directives.length; i++) {\n        let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];\n        if (isFunction(dir)) {\n            dir = {\n                mounted: dir,\n                updated: dir\n            };\n        }\n        if (dir.deep) {\n            traverse(value);\n        }\n        bindings.push({\n            dir,\n            instance,\n            value,\n            oldValue: void 0,\n            arg,\n            modifiers\n        });\n    }\n    return vnode;\n}\nfunction invokeDirectiveHook(vnode, prevVNode, instance, name) {\n    const bindings = vnode.dirs;\n    const oldBindings = prevVNode && prevVNode.dirs;\n    for (let i = 0; i < bindings.length; i++) {\n        const binding = bindings[i];\n        if (oldBindings) {\n            binding.oldValue = oldBindings[i].value;\n        }\n        let hook = binding.dir[name];\n        if (hook) {\n            // disable tracking inside all lifecycle hooks\n            // since they can potentially be called inside effects.\n            pauseTracking();\n            callWithAsyncErrorHandling(hook, instance, 8 /* ErrorCodes.DIRECTIVE_HOOK */, [\n                vnode.el,\n                binding,\n                vnode,\n                prevVNode\n            ]);\n            resetTracking();\n        }\n    }\n}\n\nconst COMPONENTS = 'components';\nconst DIRECTIVES = 'directives';\n/**\n * @private\n */\nfunction resolveComponent(name, maybeSelfReference) {\n    return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;\n}\nconst NULL_DYNAMIC_COMPONENT = Symbol();\n/**\n * @private\n */\nfunction resolveDynamicComponent(component) {\n    if (isString(component)) {\n        return resolveAsset(COMPONENTS, component, false) || component;\n    }\n    else {\n        // invalid types will fallthrough to createVNode and raise warning\n        return (component || NULL_DYNAMIC_COMPONENT);\n    }\n}\n/**\n * @private\n */\nfunction resolveDirective(name) {\n    return resolveAsset(DIRECTIVES, name);\n}\n// implementation\nfunction resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {\n    const instance = currentRenderingInstance || currentInstance;\n    if (instance) {\n        const Component = instance.type;\n        // explicit self name has highest priority\n        if (type === COMPONENTS) {\n            const selfName = getComponentName(Component, false /* do not include inferred name to avoid breaking existing code */);\n            if (selfName &&\n                (selfName === name ||\n                    selfName === camelize(name) ||\n                    selfName === capitalize(camelize(name)))) {\n                return Component;\n            }\n        }\n        const res = \n        // local registration\n        // check instance[type] first which is resolved for options API\n        resolve(instance[type] || Component[type], name) ||\n            // global registration\n            resolve(instance.appContext[type], name);\n        if (!res && maybeSelfReference) {\n            // fallback to implicit self-reference\n            return Component;\n        }\n        if ((process.env.NODE_ENV !== 'production') && warnMissing && !res) {\n            const extra = type === COMPONENTS\n                ? `\\nIf this is a native custom element, make sure to exclude it from ` +\n                    `component resolution via compilerOptions.isCustomElement.`\n                : ``;\n            warn(`Failed to resolve ${type.slice(0, -1)}: ${name}${extra}`);\n        }\n        return res;\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`resolve${capitalize(type.slice(0, -1))} ` +\n            `can only be used in render() or setup().`);\n    }\n}\nfunction resolve(registry, name) {\n    return (registry &&\n        (registry[name] ||\n            registry[camelize(name)] ||\n            registry[capitalize(camelize(name))]));\n}\n\n/**\n * Actual implementation\n */\nfunction renderList(source, renderItem, cache, index) {\n    let ret;\n    const cached = (cache && cache[index]);\n    if (isArray(source) || isString(source)) {\n        ret = new Array(source.length);\n        for (let i = 0, l = source.length; i < l; i++) {\n            ret[i] = renderItem(source[i], i, undefined, cached && cached[i]);\n        }\n    }\n    else if (typeof source === 'number') {\n        if ((process.env.NODE_ENV !== 'production') && !Number.isInteger(source)) {\n            warn(`The v-for range expect an integer value but got ${source}.`);\n        }\n        ret = new Array(source);\n        for (let i = 0; i < source; i++) {\n            ret[i] = renderItem(i + 1, i, undefined, cached && cached[i]);\n        }\n    }\n    else if (isObject(source)) {\n        if (source[Symbol.iterator]) {\n            ret = Array.from(source, (item, i) => renderItem(item, i, undefined, cached && cached[i]));\n        }\n        else {\n            const keys = Object.keys(source);\n            ret = new Array(keys.length);\n            for (let i = 0, l = keys.length; i < l; i++) {\n                const key = keys[i];\n                ret[i] = renderItem(source[key], key, i, cached && cached[i]);\n            }\n        }\n    }\n    else {\n        ret = [];\n    }\n    if (cache) {\n        cache[index] = ret;\n    }\n    return ret;\n}\n\n/**\n * Compiler runtime helper for creating dynamic slots object\n * @private\n */\nfunction createSlots(slots, dynamicSlots) {\n    for (let i = 0; i < dynamicSlots.length; i++) {\n        const slot = dynamicSlots[i];\n        // array of dynamic slot generated by <template v-for=\"...\" #[...]>\n        if (isArray(slot)) {\n            for (let j = 0; j < slot.length; j++) {\n                slots[slot[j].name] = slot[j].fn;\n            }\n        }\n        else if (slot) {\n            // conditional single slot generated by <template v-if=\"...\" #foo>\n            slots[slot.name] = slot.key\n                ? (...args) => {\n                    const res = slot.fn(...args);\n                    // attach branch key so each conditional branch is considered a\n                    // different fragment\n                    if (res)\n                        res.key = slot.key;\n                    return res;\n                }\n                : slot.fn;\n        }\n    }\n    return slots;\n}\n\n/**\n * Compiler runtime helper for rendering `<slot/>`\n * @private\n */\nfunction renderSlot(slots, name, props = {}, \n// this is not a user-facing function, so the fallback is always generated by\n// the compiler and guaranteed to be a function returning an array\nfallback, noSlotted) {\n    if (currentRenderingInstance.isCE ||\n        (currentRenderingInstance.parent &&\n            isAsyncWrapper(currentRenderingInstance.parent) &&\n            currentRenderingInstance.parent.isCE)) {\n        return createVNode('slot', name === 'default' ? null : { name }, fallback && fallback());\n    }\n    let slot = slots[name];\n    if ((process.env.NODE_ENV !== 'production') && slot && slot.length > 1) {\n        warn(`SSR-optimized slot function detected in a non-SSR-optimized render ` +\n            `function. You need to mark this component with $dynamic-slots in the ` +\n            `parent template.`);\n        slot = () => [];\n    }\n    // a compiled slot disables block tracking by default to avoid manual\n    // invocation interfering with template-based block tracking, but in\n    // `renderSlot` we can be sure that it's template-based so we can force\n    // enable it.\n    if (slot && slot._c) {\n        slot._d = false;\n    }\n    openBlock();\n    const validSlotContent = slot && ensureValidVNode(slot(props));\n    const rendered = createBlock(Fragment, {\n        key: props.key ||\n            // slot content array of a dynamic conditional slot may have a branch\n            // key attached in the `createSlots` helper, respect that\n            (validSlotContent && validSlotContent.key) ||\n            `_${name}`\n    }, validSlotContent || (fallback ? fallback() : []), validSlotContent && slots._ === 1 /* SlotFlags.STABLE */\n        ? 64 /* PatchFlags.STABLE_FRAGMENT */\n        : -2 /* PatchFlags.BAIL */);\n    if (!noSlotted && rendered.scopeId) {\n        rendered.slotScopeIds = [rendered.scopeId + '-s'];\n    }\n    if (slot && slot._c) {\n        slot._d = true;\n    }\n    return rendered;\n}\nfunction ensureValidVNode(vnodes) {\n    return vnodes.some(child => {\n        if (!isVNode(child))\n            return true;\n        if (child.type === Comment)\n            return false;\n        if (child.type === Fragment &&\n            !ensureValidVNode(child.children))\n            return false;\n        return true;\n    })\n        ? vnodes\n        : null;\n}\n\n/**\n * For prefixing keys in v-on=\"obj\" with \"on\"\n * @private\n */\nfunction toHandlers(obj, preserveCaseIfNecessary) {\n    const ret = {};\n    if ((process.env.NODE_ENV !== 'production') && !isObject(obj)) {\n        warn(`v-on with no argument expects an object value.`);\n        return ret;\n    }\n    for (const key in obj) {\n        ret[preserveCaseIfNecessary && /[A-Z]/.test(key)\n            ? `on:${key}`\n            : toHandlerKey(key)] = obj[key];\n    }\n    return ret;\n}\n\n/**\n * #2437 In Vue 3, functional components do not have a public instance proxy but\n * they exist in the internal parent chain. For code that relies on traversing\n * public $parent chains, skip functional ones and go to the parent instead.\n */\nconst getPublicInstance = (i) => {\n    if (!i)\n        return null;\n    if (isStatefulComponent(i))\n        return getExposeProxy(i) || i.proxy;\n    return getPublicInstance(i.parent);\n};\nconst publicPropertiesMap = \n// Move PURE marker to new line to workaround compiler discarding it\n// due to type annotation\n/*#__PURE__*/ extend(Object.create(null), {\n    $: i => i,\n    $el: i => i.vnode.el,\n    $data: i => i.data,\n    $props: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.props) : i.props),\n    $attrs: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.attrs) : i.attrs),\n    $slots: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.slots) : i.slots),\n    $refs: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.refs) : i.refs),\n    $parent: i => getPublicInstance(i.parent),\n    $root: i => getPublicInstance(i.root),\n    $emit: i => i.emit,\n    $options: i => (__VUE_OPTIONS_API__ ? resolveMergedOptions(i) : i.type),\n    $forceUpdate: i => i.f || (i.f = () => queueJob(i.update)),\n    $nextTick: i => i.n || (i.n = nextTick.bind(i.proxy)),\n    $watch: i => (__VUE_OPTIONS_API__ ? instanceWatch.bind(i) : NOOP)\n});\nconst isReservedPrefix = (key) => key === '_' || key === '$';\nconst PublicInstanceProxyHandlers = {\n    get({ _: instance }, key) {\n        const { ctx, setupState, data, props, accessCache, type, appContext } = instance;\n        // for internal formatters to know that this is a Vue instance\n        if ((process.env.NODE_ENV !== 'production') && key === '__isVue') {\n            return true;\n        }\n        // prioritize <script setup> bindings during dev.\n        // this allows even properties that start with _ or $ to be used - so that\n        // it aligns with the production behavior where the render fn is inlined and\n        // indeed has access to all declared variables.\n        if ((process.env.NODE_ENV !== 'production') &&\n            setupState !== EMPTY_OBJ &&\n            setupState.__isScriptSetup &&\n            hasOwn(setupState, key)) {\n            return setupState[key];\n        }\n        // data / props / ctx\n        // This getter gets called for every property access on the render context\n        // during render and is a major hotspot. The most expensive part of this\n        // is the multiple hasOwn() calls. It's much faster to do a simple property\n        // access on a plain object, so we use an accessCache object (with null\n        // prototype) to memoize what access type a key corresponds to.\n        let normalizedProps;\n        if (key[0] !== '$') {\n            const n = accessCache[key];\n            if (n !== undefined) {\n                switch (n) {\n                    case 1 /* AccessTypes.SETUP */:\n                        return setupState[key];\n                    case 2 /* AccessTypes.DATA */:\n                        return data[key];\n                    case 4 /* AccessTypes.CONTEXT */:\n                        return ctx[key];\n                    case 3 /* AccessTypes.PROPS */:\n                        return props[key];\n                    // default: just fallthrough\n                }\n            }\n            else if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {\n                accessCache[key] = 1 /* AccessTypes.SETUP */;\n                return setupState[key];\n            }\n            else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n                accessCache[key] = 2 /* AccessTypes.DATA */;\n                return data[key];\n            }\n            else if (\n            // only cache other properties when instance has declared (thus stable)\n            // props\n            (normalizedProps = instance.propsOptions[0]) &&\n                hasOwn(normalizedProps, key)) {\n                accessCache[key] = 3 /* AccessTypes.PROPS */;\n                return props[key];\n            }\n            else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n                accessCache[key] = 4 /* AccessTypes.CONTEXT */;\n                return ctx[key];\n            }\n            else if (!__VUE_OPTIONS_API__ || shouldCacheAccess) {\n                accessCache[key] = 0 /* AccessTypes.OTHER */;\n            }\n        }\n        const publicGetter = publicPropertiesMap[key];\n        let cssModule, globalProperties;\n        // public $xxx properties\n        if (publicGetter) {\n            if (key === '$attrs') {\n                track(instance, \"get\" /* TrackOpTypes.GET */, key);\n                (process.env.NODE_ENV !== 'production') && markAttrsAccessed();\n            }\n            return publicGetter(instance);\n        }\n        else if (\n        // css module (injected by vue-loader)\n        (cssModule = type.__cssModules) &&\n            (cssModule = cssModule[key])) {\n            return cssModule;\n        }\n        else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n            // user may set custom properties to `this` that start with `$`\n            accessCache[key] = 4 /* AccessTypes.CONTEXT */;\n            return ctx[key];\n        }\n        else if (\n        // global properties\n        ((globalProperties = appContext.config.globalProperties),\n            hasOwn(globalProperties, key))) {\n            {\n                return globalProperties[key];\n            }\n        }\n        else if ((process.env.NODE_ENV !== 'production') &&\n            currentRenderingInstance &&\n            (!isString(key) ||\n                // #1091 avoid internal isRef/isVNode checks on component instance leading\n                // to infinite warning loop\n                key.indexOf('__v') !== 0)) {\n            if (data !== EMPTY_OBJ && isReservedPrefix(key[0]) && hasOwn(data, key)) {\n                warn(`Property ${JSON.stringify(key)} must be accessed via $data because it starts with a reserved ` +\n                    `character (\"$\" or \"_\") and is not proxied on the render context.`);\n            }\n            else if (instance === currentRenderingInstance) {\n                warn(`Property ${JSON.stringify(key)} was accessed during render ` +\n                    `but is not defined on instance.`);\n            }\n        }\n    },\n    set({ _: instance }, key, value) {\n        const { data, setupState, ctx } = instance;\n        if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {\n            setupState[key] = value;\n            return true;\n        }\n        else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n            data[key] = value;\n            return true;\n        }\n        else if (hasOwn(instance.props, key)) {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`Attempting to mutate prop \"${key}\". Props are readonly.`, instance);\n            return false;\n        }\n        if (key[0] === '$' && key.slice(1) in instance) {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`Attempting to mutate public property \"${key}\". ` +\n                    `Properties starting with $ are reserved and readonly.`, instance);\n            return false;\n        }\n        else {\n            if ((process.env.NODE_ENV !== 'production') && key in instance.appContext.config.globalProperties) {\n                Object.defineProperty(ctx, key, {\n                    enumerable: true,\n                    configurable: true,\n                    value\n                });\n            }\n            else {\n                ctx[key] = value;\n            }\n        }\n        return true;\n    },\n    has({ _: { data, setupState, accessCache, ctx, appContext, propsOptions } }, key) {\n        let normalizedProps;\n        return (!!accessCache[key] ||\n            (data !== EMPTY_OBJ && hasOwn(data, key)) ||\n            (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) ||\n            ((normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key)) ||\n            hasOwn(ctx, key) ||\n            hasOwn(publicPropertiesMap, key) ||\n            hasOwn(appContext.config.globalProperties, key));\n    },\n    defineProperty(target, key, descriptor) {\n        if (descriptor.get != null) {\n            // invalidate key cache of a getter based property #5417\n            target._.accessCache[key] = 0;\n        }\n        else if (hasOwn(descriptor, 'value')) {\n            this.set(target, key, descriptor.value, null);\n        }\n        return Reflect.defineProperty(target, key, descriptor);\n    }\n};\nif ((process.env.NODE_ENV !== 'production') && !false) {\n    PublicInstanceProxyHandlers.ownKeys = (target) => {\n        warn(`Avoid app logic that relies on enumerating keys on a component instance. ` +\n            `The keys will be empty in production mode to avoid performance overhead.`);\n        return Reflect.ownKeys(target);\n    };\n}\nconst RuntimeCompiledPublicInstanceProxyHandlers = /*#__PURE__*/ extend({}, PublicInstanceProxyHandlers, {\n    get(target, key) {\n        // fast path for unscopables when using `with` block\n        if (key === Symbol.unscopables) {\n            return;\n        }\n        return PublicInstanceProxyHandlers.get(target, key, target);\n    },\n    has(_, key) {\n        const has = key[0] !== '_' && !isGloballyWhitelisted(key);\n        if ((process.env.NODE_ENV !== 'production') && !has && PublicInstanceProxyHandlers.has(_, key)) {\n            warn(`Property ${JSON.stringify(key)} should not start with _ which is a reserved prefix for Vue internals.`);\n        }\n        return has;\n    }\n});\n// dev only\n// In dev mode, the proxy target exposes the same properties as seen on `this`\n// for easier console inspection. In prod mode it will be an empty object so\n// these properties definitions can be skipped.\nfunction createDevRenderContext(instance) {\n    const target = {};\n    // expose internal instance for proxy handlers\n    Object.defineProperty(target, `_`, {\n        configurable: true,\n        enumerable: false,\n        get: () => instance\n    });\n    // expose public properties\n    Object.keys(publicPropertiesMap).forEach(key => {\n        Object.defineProperty(target, key, {\n            configurable: true,\n            enumerable: false,\n            get: () => publicPropertiesMap[key](instance),\n            // intercepted by the proxy so no need for implementation,\n            // but needed to prevent set errors\n            set: NOOP\n        });\n    });\n    return target;\n}\n// dev only\nfunction exposePropsOnRenderContext(instance) {\n    const { ctx, propsOptions: [propsOptions] } = instance;\n    if (propsOptions) {\n        Object.keys(propsOptions).forEach(key => {\n            Object.defineProperty(ctx, key, {\n                enumerable: true,\n                configurable: true,\n                get: () => instance.props[key],\n                set: NOOP\n            });\n        });\n    }\n}\n// dev only\nfunction exposeSetupStateOnRenderContext(instance) {\n    const { ctx, setupState } = instance;\n    Object.keys(toRaw(setupState)).forEach(key => {\n        if (!setupState.__isScriptSetup) {\n            if (isReservedPrefix(key[0])) {\n                warn(`setup() return property ${JSON.stringify(key)} should not start with \"$\" or \"_\" ` +\n                    `which are reserved prefixes for Vue internals.`);\n                return;\n            }\n            Object.defineProperty(ctx, key, {\n                enumerable: true,\n                configurable: true,\n                get: () => setupState[key],\n                set: NOOP\n            });\n        }\n    });\n}\n\nfunction createDuplicateChecker() {\n    const cache = Object.create(null);\n    return (type, key) => {\n        if (cache[key]) {\n            warn(`${type} property \"${key}\" is already defined in ${cache[key]}.`);\n        }\n        else {\n            cache[key] = type;\n        }\n    };\n}\nlet shouldCacheAccess = true;\nfunction applyOptions(instance) {\n    const options = resolveMergedOptions(instance);\n    const publicThis = instance.proxy;\n    const ctx = instance.ctx;\n    // do not cache property access on public proxy during state initialization\n    shouldCacheAccess = false;\n    // call beforeCreate first before accessing other options since\n    // the hook may mutate resolved options (#2791)\n    if (options.beforeCreate) {\n        callHook(options.beforeCreate, instance, \"bc\" /* LifecycleHooks.BEFORE_CREATE */);\n    }\n    const { \n    // state\n    data: dataOptions, computed: computedOptions, methods, watch: watchOptions, provide: provideOptions, inject: injectOptions, \n    // lifecycle\n    created, beforeMount, mounted, beforeUpdate, updated, activated, deactivated, beforeDestroy, beforeUnmount, destroyed, unmounted, render, renderTracked, renderTriggered, errorCaptured, serverPrefetch, \n    // public API\n    expose, inheritAttrs, \n    // assets\n    components, directives, filters } = options;\n    const checkDuplicateProperties = (process.env.NODE_ENV !== 'production') ? createDuplicateChecker() : null;\n    if ((process.env.NODE_ENV !== 'production')) {\n        const [propsOptions] = instance.propsOptions;\n        if (propsOptions) {\n            for (const key in propsOptions) {\n                checkDuplicateProperties(\"Props\" /* OptionTypes.PROPS */, key);\n            }\n        }\n    }\n    // options initialization order (to be consistent with Vue 2):\n    // - props (already done outside of this function)\n    // - inject\n    // - methods\n    // - data (deferred since it relies on `this` access)\n    // - computed\n    // - watch (deferred since it relies on `this` access)\n    if (injectOptions) {\n        resolveInjections(injectOptions, ctx, checkDuplicateProperties, instance.appContext.config.unwrapInjectedRef);\n    }\n    if (methods) {\n        for (const key in methods) {\n            const methodHandler = methods[key];\n            if (isFunction(methodHandler)) {\n                // In dev mode, we use the `createRenderContext` function to define\n                // methods to the proxy target, and those are read-only but\n                // reconfigurable, so it needs to be redefined here\n                if ((process.env.NODE_ENV !== 'production')) {\n                    Object.defineProperty(ctx, key, {\n                        value: methodHandler.bind(publicThis),\n                        configurable: true,\n                        enumerable: true,\n                        writable: true\n                    });\n                }\n                else {\n                    ctx[key] = methodHandler.bind(publicThis);\n                }\n                if ((process.env.NODE_ENV !== 'production')) {\n                    checkDuplicateProperties(\"Methods\" /* OptionTypes.METHODS */, key);\n                }\n            }\n            else if ((process.env.NODE_ENV !== 'production')) {\n                warn(`Method \"${key}\" has type \"${typeof methodHandler}\" in the component definition. ` +\n                    `Did you reference the function correctly?`);\n            }\n        }\n    }\n    if (dataOptions) {\n        if ((process.env.NODE_ENV !== 'production') && !isFunction(dataOptions)) {\n            warn(`The data option must be a function. ` +\n                `Plain object usage is no longer supported.`);\n        }\n        const data = dataOptions.call(publicThis, publicThis);\n        if ((process.env.NODE_ENV !== 'production') && isPromise(data)) {\n            warn(`data() returned a Promise - note data() cannot be async; If you ` +\n                `intend to perform data fetching before component renders, use ` +\n                `async setup() + <Suspense>.`);\n        }\n        if (!isObject(data)) {\n            (process.env.NODE_ENV !== 'production') && warn(`data() should return an object.`);\n        }\n        else {\n            instance.data = reactive(data);\n            if ((process.env.NODE_ENV !== 'production')) {\n                for (const key in data) {\n                    checkDuplicateProperties(\"Data\" /* OptionTypes.DATA */, key);\n                    // expose data on ctx during dev\n                    if (!isReservedPrefix(key[0])) {\n                        Object.defineProperty(ctx, key, {\n                            configurable: true,\n                            enumerable: true,\n                            get: () => data[key],\n                            set: NOOP\n                        });\n                    }\n                }\n            }\n        }\n    }\n    // state initialization complete at this point - start caching access\n    shouldCacheAccess = true;\n    if (computedOptions) {\n        for (const key in computedOptions) {\n            const opt = computedOptions[key];\n            const get = isFunction(opt)\n                ? opt.bind(publicThis, publicThis)\n                : isFunction(opt.get)\n                    ? opt.get.bind(publicThis, publicThis)\n                    : NOOP;\n            if ((process.env.NODE_ENV !== 'production') && get === NOOP) {\n                warn(`Computed property \"${key}\" has no getter.`);\n            }\n            const set = !isFunction(opt) && isFunction(opt.set)\n                ? opt.set.bind(publicThis)\n                : (process.env.NODE_ENV !== 'production')\n                    ? () => {\n                        warn(`Write operation failed: computed property \"${key}\" is readonly.`);\n                    }\n                    : NOOP;\n            const c = computed({\n                get,\n                set\n            });\n            Object.defineProperty(ctx, key, {\n                enumerable: true,\n                configurable: true,\n                get: () => c.value,\n                set: v => (c.value = v)\n            });\n            if ((process.env.NODE_ENV !== 'production')) {\n                checkDuplicateProperties(\"Computed\" /* OptionTypes.COMPUTED */, key);\n            }\n        }\n    }\n    if (watchOptions) {\n        for (const key in watchOptions) {\n            createWatcher(watchOptions[key], ctx, publicThis, key);\n        }\n    }\n    if (provideOptions) {\n        const provides = isFunction(provideOptions)\n            ? provideOptions.call(publicThis)\n            : provideOptions;\n        Reflect.ownKeys(provides).forEach(key => {\n            provide(key, provides[key]);\n        });\n    }\n    if (created) {\n        callHook(created, instance, \"c\" /* LifecycleHooks.CREATED */);\n    }\n    function registerLifecycleHook(register, hook) {\n        if (isArray(hook)) {\n            hook.forEach(_hook => register(_hook.bind(publicThis)));\n        }\n        else if (hook) {\n            register(hook.bind(publicThis));\n        }\n    }\n    registerLifecycleHook(onBeforeMount, beforeMount);\n    registerLifecycleHook(onMounted, mounted);\n    registerLifecycleHook(onBeforeUpdate, beforeUpdate);\n    registerLifecycleHook(onUpdated, updated);\n    registerLifecycleHook(onActivated, activated);\n    registerLifecycleHook(onDeactivated, deactivated);\n    registerLifecycleHook(onErrorCaptured, errorCaptured);\n    registerLifecycleHook(onRenderTracked, renderTracked);\n    registerLifecycleHook(onRenderTriggered, renderTriggered);\n    registerLifecycleHook(onBeforeUnmount, beforeUnmount);\n    registerLifecycleHook(onUnmounted, unmounted);\n    registerLifecycleHook(onServerPrefetch, serverPrefetch);\n    if (isArray(expose)) {\n        if (expose.length) {\n            const exposed = instance.exposed || (instance.exposed = {});\n            expose.forEach(key => {\n                Object.defineProperty(exposed, key, {\n                    get: () => publicThis[key],\n                    set: val => (publicThis[key] = val)\n                });\n            });\n        }\n        else if (!instance.exposed) {\n            instance.exposed = {};\n        }\n    }\n    // options that are handled when creating the instance but also need to be\n    // applied from mixins\n    if (render && instance.render === NOOP) {\n        instance.render = render;\n    }\n    if (inheritAttrs != null) {\n        instance.inheritAttrs = inheritAttrs;\n    }\n    // asset options.\n    if (components)\n        instance.components = components;\n    if (directives)\n        instance.directives = directives;\n}\nfunction resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP, unwrapRef = false) {\n    if (isArray(injectOptions)) {\n        injectOptions = normalizeInject(injectOptions);\n    }\n    for (const key in injectOptions) {\n        const opt = injectOptions[key];\n        let injected;\n        if (isObject(opt)) {\n            if ('default' in opt) {\n                injected = inject(opt.from || key, opt.default, true /* treat default function as factory */);\n            }\n            else {\n                injected = inject(opt.from || key);\n            }\n        }\n        else {\n            injected = inject(opt);\n        }\n        if (isRef(injected)) {\n            // TODO remove the check in 3.3\n            if (unwrapRef) {\n                Object.defineProperty(ctx, key, {\n                    enumerable: true,\n                    configurable: true,\n                    get: () => injected.value,\n                    set: v => (injected.value = v)\n                });\n            }\n            else {\n                if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`injected property \"${key}\" is a ref and will be auto-unwrapped ` +\n                        `and no longer needs \\`.value\\` in the next minor release. ` +\n                        `To opt-in to the new behavior now, ` +\n                        `set \\`app.config.unwrapInjectedRef = true\\` (this config is ` +\n                        `temporary and will not be needed in the future.)`);\n                }\n                ctx[key] = injected;\n            }\n        }\n        else {\n            ctx[key] = injected;\n        }\n        if ((process.env.NODE_ENV !== 'production')) {\n            checkDuplicateProperties(\"Inject\" /* OptionTypes.INJECT */, key);\n        }\n    }\n}\nfunction callHook(hook, instance, type) {\n    callWithAsyncErrorHandling(isArray(hook)\n        ? hook.map(h => h.bind(instance.proxy))\n        : hook.bind(instance.proxy), instance, type);\n}\nfunction createWatcher(raw, ctx, publicThis, key) {\n    const getter = key.includes('.')\n        ? createPathGetter(publicThis, key)\n        : () => publicThis[key];\n    if (isString(raw)) {\n        const handler = ctx[raw];\n        if (isFunction(handler)) {\n            watch(getter, handler);\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Invalid watch handler specified by key \"${raw}\"`, handler);\n        }\n    }\n    else if (isFunction(raw)) {\n        watch(getter, raw.bind(publicThis));\n    }\n    else if (isObject(raw)) {\n        if (isArray(raw)) {\n            raw.forEach(r => createWatcher(r, ctx, publicThis, key));\n        }\n        else {\n            const handler = isFunction(raw.handler)\n                ? raw.handler.bind(publicThis)\n                : ctx[raw.handler];\n            if (isFunction(handler)) {\n                watch(getter, handler, raw);\n            }\n            else if ((process.env.NODE_ENV !== 'production')) {\n                warn(`Invalid watch handler specified by key \"${raw.handler}\"`, handler);\n            }\n        }\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`Invalid watch option: \"${key}\"`, raw);\n    }\n}\n/**\n * Resolve merged options and cache it on the component.\n * This is done only once per-component since the merging does not involve\n * instances.\n */\nfunction resolveMergedOptions(instance) {\n    const base = instance.type;\n    const { mixins, extends: extendsOptions } = base;\n    const { mixins: globalMixins, optionsCache: cache, config: { optionMergeStrategies } } = instance.appContext;\n    const cached = cache.get(base);\n    let resolved;\n    if (cached) {\n        resolved = cached;\n    }\n    else if (!globalMixins.length && !mixins && !extendsOptions) {\n        {\n            resolved = base;\n        }\n    }\n    else {\n        resolved = {};\n        if (globalMixins.length) {\n            globalMixins.forEach(m => mergeOptions(resolved, m, optionMergeStrategies, true));\n        }\n        mergeOptions(resolved, base, optionMergeStrategies);\n    }\n    if (isObject(base)) {\n        cache.set(base, resolved);\n    }\n    return resolved;\n}\nfunction mergeOptions(to, from, strats, asMixin = false) {\n    const { mixins, extends: extendsOptions } = from;\n    if (extendsOptions) {\n        mergeOptions(to, extendsOptions, strats, true);\n    }\n    if (mixins) {\n        mixins.forEach((m) => mergeOptions(to, m, strats, true));\n    }\n    for (const key in from) {\n        if (asMixin && key === 'expose') {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`\"expose\" option is ignored when declared in mixins or extends. ` +\n                    `It should only be declared in the base component itself.`);\n        }\n        else {\n            const strat = internalOptionMergeStrats[key] || (strats && strats[key]);\n            to[key] = strat ? strat(to[key], from[key]) : from[key];\n        }\n    }\n    return to;\n}\nconst internalOptionMergeStrats = {\n    data: mergeDataFn,\n    props: mergeObjectOptions,\n    emits: mergeObjectOptions,\n    // objects\n    methods: mergeObjectOptions,\n    computed: mergeObjectOptions,\n    // lifecycle\n    beforeCreate: mergeAsArray,\n    created: mergeAsArray,\n    beforeMount: mergeAsArray,\n    mounted: mergeAsArray,\n    beforeUpdate: mergeAsArray,\n    updated: mergeAsArray,\n    beforeDestroy: mergeAsArray,\n    beforeUnmount: mergeAsArray,\n    destroyed: mergeAsArray,\n    unmounted: mergeAsArray,\n    activated: mergeAsArray,\n    deactivated: mergeAsArray,\n    errorCaptured: mergeAsArray,\n    serverPrefetch: mergeAsArray,\n    // assets\n    components: mergeObjectOptions,\n    directives: mergeObjectOptions,\n    // watch\n    watch: mergeWatchOptions,\n    // provide / inject\n    provide: mergeDataFn,\n    inject: mergeInject\n};\nfunction mergeDataFn(to, from) {\n    if (!from) {\n        return to;\n    }\n    if (!to) {\n        return from;\n    }\n    return function mergedDataFn() {\n        return (extend)(isFunction(to) ? to.call(this, this) : to, isFunction(from) ? from.call(this, this) : from);\n    };\n}\nfunction mergeInject(to, from) {\n    return mergeObjectOptions(normalizeInject(to), normalizeInject(from));\n}\nfunction normalizeInject(raw) {\n    if (isArray(raw)) {\n        const res = {};\n        for (let i = 0; i < raw.length; i++) {\n            res[raw[i]] = raw[i];\n        }\n        return res;\n    }\n    return raw;\n}\nfunction mergeAsArray(to, from) {\n    return to ? [...new Set([].concat(to, from))] : from;\n}\nfunction mergeObjectOptions(to, from) {\n    return to ? extend(extend(Object.create(null), to), from) : from;\n}\nfunction mergeWatchOptions(to, from) {\n    if (!to)\n        return from;\n    if (!from)\n        return to;\n    const merged = extend(Object.create(null), to);\n    for (const key in from) {\n        merged[key] = mergeAsArray(to[key], from[key]);\n    }\n    return merged;\n}\n\nfunction initProps(instance, rawProps, isStateful, // result of bitwise flag comparison\nisSSR = false) {\n    const props = {};\n    const attrs = {};\n    def(attrs, InternalObjectKey, 1);\n    instance.propsDefaults = Object.create(null);\n    setFullProps(instance, rawProps, props, attrs);\n    // ensure all declared prop keys are present\n    for (const key in instance.propsOptions[0]) {\n        if (!(key in props)) {\n            props[key] = undefined;\n        }\n    }\n    // validation\n    if ((process.env.NODE_ENV !== 'production')) {\n        validateProps(rawProps || {}, props, instance);\n    }\n    if (isStateful) {\n        // stateful\n        instance.props = isSSR ? props : shallowReactive(props);\n    }\n    else {\n        if (!instance.type.props) {\n            // functional w/ optional props, props === attrs\n            instance.props = attrs;\n        }\n        else {\n            // functional w/ declared props\n            instance.props = props;\n        }\n    }\n    instance.attrs = attrs;\n}\nfunction isInHmrContext(instance) {\n    while (instance) {\n        if (instance.type.__hmrId)\n            return true;\n        instance = instance.parent;\n    }\n}\nfunction updateProps(instance, rawProps, rawPrevProps, optimized) {\n    const { props, attrs, vnode: { patchFlag } } = instance;\n    const rawCurrentProps = toRaw(props);\n    const [options] = instance.propsOptions;\n    let hasAttrsChanged = false;\n    if (\n    // always force full diff in dev\n    // - #1942 if hmr is enabled with sfc component\n    // - vite#872 non-sfc component used by sfc component\n    !((process.env.NODE_ENV !== 'production') && isInHmrContext(instance)) &&\n        (optimized || patchFlag > 0) &&\n        !(patchFlag & 16 /* PatchFlags.FULL_PROPS */)) {\n        if (patchFlag & 8 /* PatchFlags.PROPS */) {\n            // Compiler-generated props & no keys change, just set the updated\n            // the props.\n            const propsToUpdate = instance.vnode.dynamicProps;\n            for (let i = 0; i < propsToUpdate.length; i++) {\n                let key = propsToUpdate[i];\n                // skip if the prop key is a declared emit event listener\n                if (isEmitListener(instance.emitsOptions, key)) {\n                    continue;\n                }\n                // PROPS flag guarantees rawProps to be non-null\n                const value = rawProps[key];\n                if (options) {\n                    // attr / props separation was done on init and will be consistent\n                    // in this code path, so just check if attrs have it.\n                    if (hasOwn(attrs, key)) {\n                        if (value !== attrs[key]) {\n                            attrs[key] = value;\n                            hasAttrsChanged = true;\n                        }\n                    }\n                    else {\n                        const camelizedKey = camelize(key);\n                        props[camelizedKey] = resolvePropValue(options, rawCurrentProps, camelizedKey, value, instance, false /* isAbsent */);\n                    }\n                }\n                else {\n                    if (value !== attrs[key]) {\n                        attrs[key] = value;\n                        hasAttrsChanged = true;\n                    }\n                }\n            }\n        }\n    }\n    else {\n        // full props update.\n        if (setFullProps(instance, rawProps, props, attrs)) {\n            hasAttrsChanged = true;\n        }\n        // in case of dynamic props, check if we need to delete keys from\n        // the props object\n        let kebabKey;\n        for (const key in rawCurrentProps) {\n            if (!rawProps ||\n                // for camelCase\n                (!hasOwn(rawProps, key) &&\n                    // it's possible the original props was passed in as kebab-case\n                    // and converted to camelCase (#955)\n                    ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey)))) {\n                if (options) {\n                    if (rawPrevProps &&\n                        // for camelCase\n                        (rawPrevProps[key] !== undefined ||\n                            // for kebab-case\n                            rawPrevProps[kebabKey] !== undefined)) {\n                        props[key] = resolvePropValue(options, rawCurrentProps, key, undefined, instance, true /* isAbsent */);\n                    }\n                }\n                else {\n                    delete props[key];\n                }\n            }\n        }\n        // in the case of functional component w/o props declaration, props and\n        // attrs point to the same object so it should already have been updated.\n        if (attrs !== rawCurrentProps) {\n            for (const key in attrs) {\n                if (!rawProps ||\n                    (!hasOwn(rawProps, key) &&\n                        (!false ))) {\n                    delete attrs[key];\n                    hasAttrsChanged = true;\n                }\n            }\n        }\n    }\n    // trigger updates for $attrs in case it's used in component slots\n    if (hasAttrsChanged) {\n        trigger(instance, \"set\" /* TriggerOpTypes.SET */, '$attrs');\n    }\n    if ((process.env.NODE_ENV !== 'production')) {\n        validateProps(rawProps || {}, props, instance);\n    }\n}\nfunction setFullProps(instance, rawProps, props, attrs) {\n    const [options, needCastKeys] = instance.propsOptions;\n    let hasAttrsChanged = false;\n    let rawCastValues;\n    if (rawProps) {\n        for (let key in rawProps) {\n            // key, ref are reserved and never passed down\n            if (isReservedProp(key)) {\n                continue;\n            }\n            const value = rawProps[key];\n            // prop option names are camelized during normalization, so to support\n            // kebab -> camel conversion here we need to camelize the key.\n            let camelKey;\n            if (options && hasOwn(options, (camelKey = camelize(key)))) {\n                if (!needCastKeys || !needCastKeys.includes(camelKey)) {\n                    props[camelKey] = value;\n                }\n                else {\n                    (rawCastValues || (rawCastValues = {}))[camelKey] = value;\n                }\n            }\n            else if (!isEmitListener(instance.emitsOptions, key)) {\n                if (!(key in attrs) || value !== attrs[key]) {\n                    attrs[key] = value;\n                    hasAttrsChanged = true;\n                }\n            }\n        }\n    }\n    if (needCastKeys) {\n        const rawCurrentProps = toRaw(props);\n        const castValues = rawCastValues || EMPTY_OBJ;\n        for (let i = 0; i < needCastKeys.length; i++) {\n            const key = needCastKeys[i];\n            props[key] = resolvePropValue(options, rawCurrentProps, key, castValues[key], instance, !hasOwn(castValues, key));\n        }\n    }\n    return hasAttrsChanged;\n}\nfunction resolvePropValue(options, props, key, value, instance, isAbsent) {\n    const opt = options[key];\n    if (opt != null) {\n        const hasDefault = hasOwn(opt, 'default');\n        // default values\n        if (hasDefault && value === undefined) {\n            const defaultValue = opt.default;\n            if (opt.type !== Function && isFunction(defaultValue)) {\n                const { propsDefaults } = instance;\n                if (key in propsDefaults) {\n                    value = propsDefaults[key];\n                }\n                else {\n                    setCurrentInstance(instance);\n                    value = propsDefaults[key] = defaultValue.call(null, props);\n                    unsetCurrentInstance();\n                }\n            }\n            else {\n                value = defaultValue;\n            }\n        }\n        // boolean casting\n        if (opt[0 /* BooleanFlags.shouldCast */]) {\n            if (isAbsent && !hasDefault) {\n                value = false;\n            }\n            else if (opt[1 /* BooleanFlags.shouldCastTrue */] &&\n                (value === '' || value === hyphenate(key))) {\n                value = true;\n            }\n        }\n    }\n    return value;\n}\nfunction normalizePropsOptions(comp, appContext, asMixin = false) {\n    const cache = appContext.propsCache;\n    const cached = cache.get(comp);\n    if (cached) {\n        return cached;\n    }\n    const raw = comp.props;\n    const normalized = {};\n    const needCastKeys = [];\n    // apply mixin/extends props\n    let hasExtends = false;\n    if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n        const extendProps = (raw) => {\n            hasExtends = true;\n            const [props, keys] = normalizePropsOptions(raw, appContext, true);\n            extend(normalized, props);\n            if (keys)\n                needCastKeys.push(...keys);\n        };\n        if (!asMixin && appContext.mixins.length) {\n            appContext.mixins.forEach(extendProps);\n        }\n        if (comp.extends) {\n            extendProps(comp.extends);\n        }\n        if (comp.mixins) {\n            comp.mixins.forEach(extendProps);\n        }\n    }\n    if (!raw && !hasExtends) {\n        if (isObject(comp)) {\n            cache.set(comp, EMPTY_ARR);\n        }\n        return EMPTY_ARR;\n    }\n    if (isArray(raw)) {\n        for (let i = 0; i < raw.length; i++) {\n            if ((process.env.NODE_ENV !== 'production') && !isString(raw[i])) {\n                warn(`props must be strings when using array syntax.`, raw[i]);\n            }\n            const normalizedKey = camelize(raw[i]);\n            if (validatePropName(normalizedKey)) {\n                normalized[normalizedKey] = EMPTY_OBJ;\n            }\n        }\n    }\n    else if (raw) {\n        if ((process.env.NODE_ENV !== 'production') && !isObject(raw)) {\n            warn(`invalid props options`, raw);\n        }\n        for (const key in raw) {\n            const normalizedKey = camelize(key);\n            if (validatePropName(normalizedKey)) {\n                const opt = raw[key];\n                const prop = (normalized[normalizedKey] =\n                    isArray(opt) || isFunction(opt) ? { type: opt } : opt);\n                if (prop) {\n                    const booleanIndex = getTypeIndex(Boolean, prop.type);\n                    const stringIndex = getTypeIndex(String, prop.type);\n                    prop[0 /* BooleanFlags.shouldCast */] = booleanIndex > -1;\n                    prop[1 /* BooleanFlags.shouldCastTrue */] =\n                        stringIndex < 0 || booleanIndex < stringIndex;\n                    // if the prop needs boolean casting or default value\n                    if (booleanIndex > -1 || hasOwn(prop, 'default')) {\n                        needCastKeys.push(normalizedKey);\n                    }\n                }\n            }\n        }\n    }\n    const res = [normalized, needCastKeys];\n    if (isObject(comp)) {\n        cache.set(comp, res);\n    }\n    return res;\n}\nfunction validatePropName(key) {\n    if (key[0] !== '$') {\n        return true;\n    }\n    else if ((process.env.NODE_ENV !== 'production')) {\n        warn(`Invalid prop name: \"${key}\" is a reserved property.`);\n    }\n    return false;\n}\n// use function string name to check type constructors\n// so that it works across vms / iframes.\nfunction getType(ctor) {\n    const match = ctor && ctor.toString().match(/^\\s*function (\\w+)/);\n    return match ? match[1] : ctor === null ? 'null' : '';\n}\nfunction isSameType(a, b) {\n    return getType(a) === getType(b);\n}\nfunction getTypeIndex(type, expectedTypes) {\n    if (isArray(expectedTypes)) {\n        return expectedTypes.findIndex(t => isSameType(t, type));\n    }\n    else if (isFunction(expectedTypes)) {\n        return isSameType(expectedTypes, type) ? 0 : -1;\n    }\n    return -1;\n}\n/**\n * dev only\n */\nfunction validateProps(rawProps, props, instance) {\n    const resolvedValues = toRaw(props);\n    const options = instance.propsOptions[0];\n    for (const key in options) {\n        let opt = options[key];\n        if (opt == null)\n            continue;\n        validateProp(key, resolvedValues[key], opt, !hasOwn(rawProps, key) && !hasOwn(rawProps, hyphenate(key)));\n    }\n}\n/**\n * dev only\n */\nfunction validateProp(name, value, prop, isAbsent) {\n    const { type, required, validator } = prop;\n    // required!\n    if (required && isAbsent) {\n        warn('Missing required prop: \"' + name + '\"');\n        return;\n    }\n    // missing but optional\n    if (value == null && !prop.required) {\n        return;\n    }\n    // type check\n    if (type != null && type !== true) {\n        let isValid = false;\n        const types = isArray(type) ? type : [type];\n        const expectedTypes = [];\n        // value is valid as long as one of the specified types match\n        for (let i = 0; i < types.length && !isValid; i++) {\n            const { valid, expectedType } = assertType(value, types[i]);\n            expectedTypes.push(expectedType || '');\n            isValid = valid;\n        }\n        if (!isValid) {\n            warn(getInvalidTypeMessage(name, value, expectedTypes));\n            return;\n        }\n    }\n    // custom validator\n    if (validator && !validator(value)) {\n        warn('Invalid prop: custom validator check failed for prop \"' + name + '\".');\n    }\n}\nconst isSimpleType = /*#__PURE__*/ makeMap('String,Number,Boolean,Function,Symbol,BigInt');\n/**\n * dev only\n */\nfunction assertType(value, type) {\n    let valid;\n    const expectedType = getType(type);\n    if (isSimpleType(expectedType)) {\n        const t = typeof value;\n        valid = t === expectedType.toLowerCase();\n        // for primitive wrapper objects\n        if (!valid && t === 'object') {\n            valid = value instanceof type;\n        }\n    }\n    else if (expectedType === 'Object') {\n        valid = isObject(value);\n    }\n    else if (expectedType === 'Array') {\n        valid = isArray(value);\n    }\n    else if (expectedType === 'null') {\n        valid = value === null;\n    }\n    else {\n        valid = value instanceof type;\n    }\n    return {\n        valid,\n        expectedType\n    };\n}\n/**\n * dev only\n */\nfunction getInvalidTypeMessage(name, value, expectedTypes) {\n    let message = `Invalid prop: type check failed for prop \"${name}\".` +\n        ` Expected ${expectedTypes.map(capitalize).join(' | ')}`;\n    const expectedType = expectedTypes[0];\n    const receivedType = toRawType(value);\n    const expectedValue = styleValue(value, expectedType);\n    const receivedValue = styleValue(value, receivedType);\n    // check if we need to specify expected value\n    if (expectedTypes.length === 1 &&\n        isExplicable(expectedType) &&\n        !isBoolean(expectedType, receivedType)) {\n        message += ` with value ${expectedValue}`;\n    }\n    message += `, got ${receivedType} `;\n    // check if we need to specify received value\n    if (isExplicable(receivedType)) {\n        message += `with value ${receivedValue}.`;\n    }\n    return message;\n}\n/**\n * dev only\n */\nfunction styleValue(value, type) {\n    if (type === 'String') {\n        return `\"${value}\"`;\n    }\n    else if (type === 'Number') {\n        return `${Number(value)}`;\n    }\n    else {\n        return `${value}`;\n    }\n}\n/**\n * dev only\n */\nfunction isExplicable(type) {\n    const explicitTypes = ['string', 'number', 'boolean'];\n    return explicitTypes.some(elem => type.toLowerCase() === elem);\n}\n/**\n * dev only\n */\nfunction isBoolean(...args) {\n    return args.some(elem => elem.toLowerCase() === 'boolean');\n}\n\nconst isInternalKey = (key) => key[0] === '_' || key === '$stable';\nconst normalizeSlotValue = (value) => isArray(value)\n    ? value.map(normalizeVNode)\n    : [normalizeVNode(value)];\nconst normalizeSlot = (key, rawSlot, ctx) => {\n    if (rawSlot._n) {\n        // already normalized - #5353\n        return rawSlot;\n    }\n    const normalized = withCtx((...args) => {\n        if ((process.env.NODE_ENV !== 'production') && currentInstance) {\n            warn(`Slot \"${key}\" invoked outside of the render function: ` +\n                `this will not track dependencies used in the slot. ` +\n                `Invoke the slot function inside the render function instead.`);\n        }\n        return normalizeSlotValue(rawSlot(...args));\n    }, ctx);\n    normalized._c = false;\n    return normalized;\n};\nconst normalizeObjectSlots = (rawSlots, slots, instance) => {\n    const ctx = rawSlots._ctx;\n    for (const key in rawSlots) {\n        if (isInternalKey(key))\n            continue;\n        const value = rawSlots[key];\n        if (isFunction(value)) {\n            slots[key] = normalizeSlot(key, value, ctx);\n        }\n        else if (value != null) {\n            if ((process.env.NODE_ENV !== 'production') &&\n                !(false )) {\n                warn(`Non-function value encountered for slot \"${key}\". ` +\n                    `Prefer function slots for better performance.`);\n            }\n            const normalized = normalizeSlotValue(value);\n            slots[key] = () => normalized;\n        }\n    }\n};\nconst normalizeVNodeSlots = (instance, children) => {\n    if ((process.env.NODE_ENV !== 'production') &&\n        !isKeepAlive(instance.vnode) &&\n        !(false )) {\n        warn(`Non-function value encountered for default slot. ` +\n            `Prefer function slots for better performance.`);\n    }\n    const normalized = normalizeSlotValue(children);\n    instance.slots.default = () => normalized;\n};\nconst initSlots = (instance, children) => {\n    if (instance.vnode.shapeFlag & 32 /* ShapeFlags.SLOTS_CHILDREN */) {\n        const type = children._;\n        if (type) {\n            // users can get the shallow readonly version of the slots object through `this.$slots`,\n            // we should avoid the proxy object polluting the slots of the internal instance\n            instance.slots = toRaw(children);\n            // make compiler marker non-enumerable\n            def(children, '_', type);\n        }\n        else {\n            normalizeObjectSlots(children, (instance.slots = {}));\n        }\n    }\n    else {\n        instance.slots = {};\n        if (children) {\n            normalizeVNodeSlots(instance, children);\n        }\n    }\n    def(instance.slots, InternalObjectKey, 1);\n};\nconst updateSlots = (instance, children, optimized) => {\n    const { vnode, slots } = instance;\n    let needDeletionCheck = true;\n    let deletionComparisonTarget = EMPTY_OBJ;\n    if (vnode.shapeFlag & 32 /* ShapeFlags.SLOTS_CHILDREN */) {\n        const type = children._;\n        if (type) {\n            // compiled slots.\n            if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\n                // Parent was HMR updated so slot content may have changed.\n                // force update slots and mark instance for hmr as well\n                extend(slots, children);\n            }\n            else if (optimized && type === 1 /* SlotFlags.STABLE */) {\n                // compiled AND stable.\n                // no need to update, and skip stale slots removal.\n                needDeletionCheck = false;\n            }\n            else {\n                // compiled but dynamic (v-if/v-for on slots) - update slots, but skip\n                // normalization.\n                extend(slots, children);\n                // #2893\n                // when rendering the optimized slots by manually written render function,\n                // we need to delete the `slots._` flag if necessary to make subsequent updates reliable,\n                // i.e. let the `renderSlot` create the bailed Fragment\n                if (!optimized && type === 1 /* SlotFlags.STABLE */) {\n                    delete slots._;\n                }\n            }\n        }\n        else {\n            needDeletionCheck = !children.$stable;\n            normalizeObjectSlots(children, slots);\n        }\n        deletionComparisonTarget = children;\n    }\n    else if (children) {\n        // non slot object children (direct value) passed to a component\n        normalizeVNodeSlots(instance, children);\n        deletionComparisonTarget = { default: 1 };\n    }\n    // delete stale slots\n    if (needDeletionCheck) {\n        for (const key in slots) {\n            if (!isInternalKey(key) && !(key in deletionComparisonTarget)) {\n                delete slots[key];\n            }\n        }\n    }\n};\n\nfunction createAppContext() {\n    return {\n        app: null,\n        config: {\n            isNativeTag: NO,\n            performance: false,\n            globalProperties: {},\n            optionMergeStrategies: {},\n            errorHandler: undefined,\n            warnHandler: undefined,\n            compilerOptions: {}\n        },\n        mixins: [],\n        components: {},\n        directives: {},\n        provides: Object.create(null),\n        optionsCache: new WeakMap(),\n        propsCache: new WeakMap(),\n        emitsCache: new WeakMap()\n    };\n}\nlet uid = 0;\nfunction createAppAPI(render, hydrate) {\n    return function createApp(rootComponent, rootProps = null) {\n        if (!isFunction(rootComponent)) {\n            rootComponent = Object.assign({}, rootComponent);\n        }\n        if (rootProps != null && !isObject(rootProps)) {\n            (process.env.NODE_ENV !== 'production') && warn(`root props passed to app.mount() must be an object.`);\n            rootProps = null;\n        }\n        const context = createAppContext();\n        const installedPlugins = new Set();\n        let isMounted = false;\n        const app = (context.app = {\n            _uid: uid++,\n            _component: rootComponent,\n            _props: rootProps,\n            _container: null,\n            _context: context,\n            _instance: null,\n            version,\n            get config() {\n                return context.config;\n            },\n            set config(v) {\n                if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`app.config cannot be replaced. Modify individual options instead.`);\n                }\n            },\n            use(plugin, ...options) {\n                if (installedPlugins.has(plugin)) {\n                    (process.env.NODE_ENV !== 'production') && warn(`Plugin has already been applied to target app.`);\n                }\n                else if (plugin && isFunction(plugin.install)) {\n                    installedPlugins.add(plugin);\n                    plugin.install(app, ...options);\n                }\n                else if (isFunction(plugin)) {\n                    installedPlugins.add(plugin);\n                    plugin(app, ...options);\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`A plugin must either be a function or an object with an \"install\" ` +\n                        `function.`);\n                }\n                return app;\n            },\n            mixin(mixin) {\n                if (__VUE_OPTIONS_API__) {\n                    if (!context.mixins.includes(mixin)) {\n                        context.mixins.push(mixin);\n                    }\n                    else if ((process.env.NODE_ENV !== 'production')) {\n                        warn('Mixin has already been applied to target app' +\n                            (mixin.name ? `: ${mixin.name}` : ''));\n                    }\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn('Mixins are only available in builds supporting Options API');\n                }\n                return app;\n            },\n            component(name, component) {\n                if ((process.env.NODE_ENV !== 'production')) {\n                    validateComponentName(name, context.config);\n                }\n                if (!component) {\n                    return context.components[name];\n                }\n                if ((process.env.NODE_ENV !== 'production') && context.components[name]) {\n                    warn(`Component \"${name}\" has already been registered in target app.`);\n                }\n                context.components[name] = component;\n                return app;\n            },\n            directive(name, directive) {\n                if ((process.env.NODE_ENV !== 'production')) {\n                    validateDirectiveName(name);\n                }\n                if (!directive) {\n                    return context.directives[name];\n                }\n                if ((process.env.NODE_ENV !== 'production') && context.directives[name]) {\n                    warn(`Directive \"${name}\" has already been registered in target app.`);\n                }\n                context.directives[name] = directive;\n                return app;\n            },\n            mount(rootContainer, isHydrate, isSVG) {\n                if (!isMounted) {\n                    // #5571\n                    if ((process.env.NODE_ENV !== 'production') && rootContainer.__vue_app__) {\n                        warn(`There is already an app instance mounted on the host container.\\n` +\n                            ` If you want to mount another app on the same host container,` +\n                            ` you need to unmount the previous app by calling \\`app.unmount()\\` first.`);\n                    }\n                    const vnode = createVNode(rootComponent, rootProps);\n                    // store app context on the root VNode.\n                    // this will be set on the root instance on initial mount.\n                    vnode.appContext = context;\n                    // HMR root reload\n                    if ((process.env.NODE_ENV !== 'production')) {\n                        context.reload = () => {\n                            render(cloneVNode(vnode), rootContainer, isSVG);\n                        };\n                    }\n                    if (isHydrate && hydrate) {\n                        hydrate(vnode, rootContainer);\n                    }\n                    else {\n                        render(vnode, rootContainer, isSVG);\n                    }\n                    isMounted = true;\n                    app._container = rootContainer;\n                    rootContainer.__vue_app__ = app;\n                    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n                        app._instance = vnode.component;\n                        devtoolsInitApp(app, version);\n                    }\n                    return getExposeProxy(vnode.component) || vnode.component.proxy;\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`App has already been mounted.\\n` +\n                        `If you want to remount the same app, move your app creation logic ` +\n                        `into a factory function and create fresh app instances for each ` +\n                        `mount - e.g. \\`const createMyApp = () => createApp(App)\\``);\n                }\n            },\n            unmount() {\n                if (isMounted) {\n                    render(null, app._container);\n                    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n                        app._instance = null;\n                        devtoolsUnmountApp(app);\n                    }\n                    delete app._container.__vue_app__;\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`Cannot unmount an app that is not mounted.`);\n                }\n            },\n            provide(key, value) {\n                if ((process.env.NODE_ENV !== 'production') && key in context.provides) {\n                    warn(`App already provides property with key \"${String(key)}\". ` +\n                        `It will be overwritten with the new value.`);\n                }\n                context.provides[key] = value;\n                return app;\n            }\n        });\n        return app;\n    };\n}\n\n/**\n * Function for handling a template ref\n */\nfunction setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {\n    if (isArray(rawRef)) {\n        rawRef.forEach((r, i) => setRef(r, oldRawRef && (isArray(oldRawRef) ? oldRawRef[i] : oldRawRef), parentSuspense, vnode, isUnmount));\n        return;\n    }\n    if (isAsyncWrapper(vnode) && !isUnmount) {\n        // when mounting async components, nothing needs to be done,\n        // because the template ref is forwarded to inner component\n        return;\n    }\n    const refValue = vnode.shapeFlag & 4 /* ShapeFlags.STATEFUL_COMPONENT */\n        ? getExposeProxy(vnode.component) || vnode.component.proxy\n        : vnode.el;\n    const value = isUnmount ? null : refValue;\n    const { i: owner, r: ref } = rawRef;\n    if ((process.env.NODE_ENV !== 'production') && !owner) {\n        warn(`Missing ref owner context. ref cannot be used on hoisted vnodes. ` +\n            `A vnode with ref must be created inside the render function.`);\n        return;\n    }\n    const oldRef = oldRawRef && oldRawRef.r;\n    const refs = owner.refs === EMPTY_OBJ ? (owner.refs = {}) : owner.refs;\n    const setupState = owner.setupState;\n    // dynamic ref changed. unset old ref\n    if (oldRef != null && oldRef !== ref) {\n        if (isString(oldRef)) {\n            refs[oldRef] = null;\n            if (hasOwn(setupState, oldRef)) {\n                setupState[oldRef] = null;\n            }\n        }\n        else if (isRef(oldRef)) {\n            oldRef.value = null;\n        }\n    }\n    if (isFunction(ref)) {\n        callWithErrorHandling(ref, owner, 12 /* ErrorCodes.FUNCTION_REF */, [value, refs]);\n    }\n    else {\n        const _isString = isString(ref);\n        const _isRef = isRef(ref);\n        if (_isString || _isRef) {\n            const doSet = () => {\n                if (rawRef.f) {\n                    const existing = _isString\n                        ? hasOwn(setupState, ref)\n                            ? setupState[ref]\n                            : refs[ref]\n                        : ref.value;\n                    if (isUnmount) {\n                        isArray(existing) && remove(existing, refValue);\n                    }\n                    else {\n                        if (!isArray(existing)) {\n                            if (_isString) {\n                                refs[ref] = [refValue];\n                                if (hasOwn(setupState, ref)) {\n                                    setupState[ref] = refs[ref];\n                                }\n                            }\n                            else {\n                                ref.value = [refValue];\n                                if (rawRef.k)\n                                    refs[rawRef.k] = ref.value;\n                            }\n                        }\n                        else if (!existing.includes(refValue)) {\n                            existing.push(refValue);\n                        }\n                    }\n                }\n                else if (_isString) {\n                    refs[ref] = value;\n                    if (hasOwn(setupState, ref)) {\n                        setupState[ref] = value;\n                    }\n                }\n                else if (_isRef) {\n                    ref.value = value;\n                    if (rawRef.k)\n                        refs[rawRef.k] = value;\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn('Invalid template ref type:', ref, `(${typeof ref})`);\n                }\n            };\n            if (value) {\n                doSet.id = -1;\n                queuePostRenderEffect(doSet, parentSuspense);\n            }\n            else {\n                doSet();\n            }\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn('Invalid template ref type:', ref, `(${typeof ref})`);\n        }\n    }\n}\n\nlet hasMismatch = false;\nconst isSVGContainer = (container) => /svg/.test(container.namespaceURI) && container.tagName !== 'foreignObject';\nconst isComment = (node) => node.nodeType === 8 /* DOMNodeTypes.COMMENT */;\n// Note: hydration is DOM-specific\n// But we have to place it in core due to tight coupling with core - splitting\n// it out creates a ton of unnecessary complexity.\n// Hydration also depends on some renderer internal logic which needs to be\n// passed in via arguments.\nfunction createHydrationFunctions(rendererInternals) {\n    const { mt: mountComponent, p: patch, o: { patchProp, createText, nextSibling, parentNode, remove, insert, createComment } } = rendererInternals;\n    const hydrate = (vnode, container) => {\n        if (!container.hasChildNodes()) {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`Attempting to hydrate existing markup but container is empty. ` +\n                    `Performing full mount instead.`);\n            patch(null, vnode, container);\n            flushPostFlushCbs();\n            container._vnode = vnode;\n            return;\n        }\n        hasMismatch = false;\n        hydrateNode(container.firstChild, vnode, null, null, null);\n        flushPostFlushCbs();\n        container._vnode = vnode;\n        if (hasMismatch && !false) {\n            // this error should show up in production\n            console.error(`Hydration completed but contains mismatches.`);\n        }\n    };\n    const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {\n        const isFragmentStart = isComment(node) && node.data === '[';\n        const onMismatch = () => handleMismatch(node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragmentStart);\n        const { type, ref, shapeFlag, patchFlag } = vnode;\n        let domType = node.nodeType;\n        vnode.el = node;\n        if (patchFlag === -2 /* PatchFlags.BAIL */) {\n            optimized = false;\n            vnode.dynamicChildren = null;\n        }\n        let nextNode = null;\n        switch (type) {\n            case Text:\n                if (domType !== 3 /* DOMNodeTypes.TEXT */) {\n                    // #5728 empty text node inside a slot can cause hydration failure\n                    // because the server rendered HTML won't contain a text node\n                    if (vnode.children === '') {\n                        insert((vnode.el = createText('')), parentNode(node), node);\n                        nextNode = node;\n                    }\n                    else {\n                        nextNode = onMismatch();\n                    }\n                }\n                else {\n                    if (node.data !== vnode.children) {\n                        hasMismatch = true;\n                        (process.env.NODE_ENV !== 'production') &&\n                            warn(`Hydration text mismatch:` +\n                                `\\n- Client: ${JSON.stringify(node.data)}` +\n                                `\\n- Server: ${JSON.stringify(vnode.children)}`);\n                        node.data = vnode.children;\n                    }\n                    nextNode = nextSibling(node);\n                }\n                break;\n            case Comment:\n                if (domType !== 8 /* DOMNodeTypes.COMMENT */ || isFragmentStart) {\n                    nextNode = onMismatch();\n                }\n                else {\n                    nextNode = nextSibling(node);\n                }\n                break;\n            case Static:\n                if (isFragmentStart) {\n                    // entire template is static but SSRed as a fragment\n                    node = nextSibling(node);\n                    domType = node.nodeType;\n                }\n                if (domType === 1 /* DOMNodeTypes.ELEMENT */ || domType === 3 /* DOMNodeTypes.TEXT */) {\n                    // determine anchor, adopt content\n                    nextNode = node;\n                    // if the static vnode has its content stripped during build,\n                    // adopt it from the server-rendered HTML.\n                    const needToAdoptContent = !vnode.children.length;\n                    for (let i = 0; i < vnode.staticCount; i++) {\n                        if (needToAdoptContent)\n                            vnode.children +=\n                                nextNode.nodeType === 1 /* DOMNodeTypes.ELEMENT */\n                                    ? nextNode.outerHTML\n                                    : nextNode.data;\n                        if (i === vnode.staticCount - 1) {\n                            vnode.anchor = nextNode;\n                        }\n                        nextNode = nextSibling(nextNode);\n                    }\n                    return isFragmentStart ? nextSibling(nextNode) : nextNode;\n                }\n                else {\n                    onMismatch();\n                }\n                break;\n            case Fragment:\n                if (!isFragmentStart) {\n                    nextNode = onMismatch();\n                }\n                else {\n                    nextNode = hydrateFragment(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);\n                }\n                break;\n            default:\n                if (shapeFlag & 1 /* ShapeFlags.ELEMENT */) {\n                    if (domType !== 1 /* DOMNodeTypes.ELEMENT */ ||\n                        vnode.type.toLowerCase() !==\n                            node.tagName.toLowerCase()) {\n                        nextNode = onMismatch();\n                    }\n                    else {\n                        nextNode = hydrateElement(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);\n                    }\n                }\n                else if (shapeFlag & 6 /* ShapeFlags.COMPONENT */) {\n                    // when setting up the render effect, if the initial vnode already\n                    // has .el set, the component will perform hydration instead of mount\n                    // on its sub-tree.\n                    vnode.slotScopeIds = slotScopeIds;\n                    const container = parentNode(node);\n                    mountComponent(vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), optimized);\n                    // component may be async, so in the case of fragments we cannot rely\n                    // on component's rendered output to determine the end of the fragment\n                    // instead, we do a lookahead to find the end anchor node.\n                    nextNode = isFragmentStart\n                        ? locateClosingAsyncAnchor(node)\n                        : nextSibling(node);\n                    // #4293 teleport as component root\n                    if (nextNode &&\n                        isComment(nextNode) &&\n                        nextNode.data === 'teleport end') {\n                        nextNode = nextSibling(nextNode);\n                    }\n                    // #3787\n                    // if component is async, it may get moved / unmounted before its\n                    // inner component is loaded, so we need to give it a placeholder\n                    // vnode that matches its adopted DOM.\n                    if (isAsyncWrapper(vnode)) {\n                        let subTree;\n                        if (isFragmentStart) {\n                            subTree = createVNode(Fragment);\n                            subTree.anchor = nextNode\n                                ? nextNode.previousSibling\n                                : container.lastChild;\n                        }\n                        else {\n                            subTree =\n                                node.nodeType === 3 ? createTextVNode('') : createVNode('div');\n                        }\n                        subTree.el = node;\n                        vnode.component.subTree = subTree;\n                    }\n                }\n                else if (shapeFlag & 64 /* ShapeFlags.TELEPORT */) {\n                    if (domType !== 8 /* DOMNodeTypes.COMMENT */) {\n                        nextNode = onMismatch();\n                    }\n                    else {\n                        nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, rendererInternals, hydrateChildren);\n                    }\n                }\n                else if (shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n                    nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, isSVGContainer(parentNode(node)), slotScopeIds, optimized, rendererInternals, hydrateNode);\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn('Invalid HostVNode type:', type, `(${typeof type})`);\n                }\n        }\n        if (ref != null) {\n            setRef(ref, null, parentSuspense, vnode);\n        }\n        return nextNode;\n    };\n    const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n        optimized = optimized || !!vnode.dynamicChildren;\n        const { type, props, patchFlag, shapeFlag, dirs } = vnode;\n        // #4006 for form elements with non-string v-model value bindings\n        // e.g. <option :value=\"obj\">, <input type=\"checkbox\" :true-value=\"1\">\n        const forcePatchValue = (type === 'input' && dirs) || type === 'option';\n        // skip props & children if this is hoisted static nodes\n        // #5405 in dev, always hydrate children for HMR\n        if ((process.env.NODE_ENV !== 'production') || forcePatchValue || patchFlag !== -1 /* PatchFlags.HOISTED */) {\n            if (dirs) {\n                invokeDirectiveHook(vnode, null, parentComponent, 'created');\n            }\n            // props\n            if (props) {\n                if (forcePatchValue ||\n                    !optimized ||\n                    patchFlag & (16 /* PatchFlags.FULL_PROPS */ | 32 /* PatchFlags.HYDRATE_EVENTS */)) {\n                    for (const key in props) {\n                        if ((forcePatchValue && key.endsWith('value')) ||\n                            (isOn(key) && !isReservedProp(key))) {\n                            patchProp(el, key, null, props[key], false, undefined, parentComponent);\n                        }\n                    }\n                }\n                else if (props.onClick) {\n                    // Fast path for click listeners (which is most often) to avoid\n                    // iterating through props.\n                    patchProp(el, 'onClick', null, props.onClick, false, undefined, parentComponent);\n                }\n            }\n            // vnode / directive hooks\n            let vnodeHooks;\n            if ((vnodeHooks = props && props.onVnodeBeforeMount)) {\n                invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n            }\n            if (dirs) {\n                invokeDirectiveHook(vnode, null, parentComponent, 'beforeMount');\n            }\n            if ((vnodeHooks = props && props.onVnodeMounted) || dirs) {\n                queueEffectWithSuspense(() => {\n                    vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n                    dirs && invokeDirectiveHook(vnode, null, parentComponent, 'mounted');\n                }, parentSuspense);\n            }\n            // children\n            if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */ &&\n                // skip if element has innerHTML / textContent\n                !(props && (props.innerHTML || props.textContent))) {\n                let next = hydrateChildren(el.firstChild, vnode, el, parentComponent, parentSuspense, slotScopeIds, optimized);\n                let hasWarned = false;\n                while (next) {\n                    hasMismatch = true;\n                    if ((process.env.NODE_ENV !== 'production') && !hasWarned) {\n                        warn(`Hydration children mismatch in <${vnode.type}>: ` +\n                            `server rendered element contains more child nodes than client vdom.`);\n                        hasWarned = true;\n                    }\n                    // The SSRed DOM contains more nodes than it should. Remove them.\n                    const cur = next;\n                    next = next.nextSibling;\n                    remove(cur);\n                }\n            }\n            else if (shapeFlag & 8 /* ShapeFlags.TEXT_CHILDREN */) {\n                if (el.textContent !== vnode.children) {\n                    hasMismatch = true;\n                    (process.env.NODE_ENV !== 'production') &&\n                        warn(`Hydration text content mismatch in <${vnode.type}>:\\n` +\n                            `- Client: ${el.textContent}\\n` +\n                            `- Server: ${vnode.children}`);\n                    el.textContent = vnode.children;\n                }\n            }\n        }\n        return el.nextSibling;\n    };\n    const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n        optimized = optimized || !!parentVNode.dynamicChildren;\n        const children = parentVNode.children;\n        const l = children.length;\n        let hasWarned = false;\n        for (let i = 0; i < l; i++) {\n            const vnode = optimized\n                ? children[i]\n                : (children[i] = normalizeVNode(children[i]));\n            if (node) {\n                node = hydrateNode(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);\n            }\n            else if (vnode.type === Text && !vnode.children) {\n                continue;\n            }\n            else {\n                hasMismatch = true;\n                if ((process.env.NODE_ENV !== 'production') && !hasWarned) {\n                    warn(`Hydration children mismatch in <${container.tagName.toLowerCase()}>: ` +\n                        `server rendered element contains fewer child nodes than client vdom.`);\n                    hasWarned = true;\n                }\n                // the SSRed DOM didn't contain enough nodes. Mount the missing ones.\n                patch(null, vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);\n            }\n        }\n        return node;\n    };\n    const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n        const { slotScopeIds: fragmentSlotScopeIds } = vnode;\n        if (fragmentSlotScopeIds) {\n            slotScopeIds = slotScopeIds\n                ? slotScopeIds.concat(fragmentSlotScopeIds)\n                : fragmentSlotScopeIds;\n        }\n        const container = parentNode(node);\n        const next = hydrateChildren(nextSibling(node), vnode, container, parentComponent, parentSuspense, slotScopeIds, optimized);\n        if (next && isComment(next) && next.data === ']') {\n            return nextSibling((vnode.anchor = next));\n        }\n        else {\n            // fragment didn't hydrate successfully, since we didn't get a end anchor\n            // back. This should have led to node/children mismatch warnings.\n            hasMismatch = true;\n            // since the anchor is missing, we need to create one and insert it\n            insert((vnode.anchor = createComment(`]`)), container, next);\n            return next;\n        }\n    };\n    const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {\n        hasMismatch = true;\n        (process.env.NODE_ENV !== 'production') &&\n            warn(`Hydration node mismatch:\\n- Client vnode:`, vnode.type, `\\n- Server rendered DOM:`, node, node.nodeType === 3 /* DOMNodeTypes.TEXT */\n                ? `(text)`\n                : isComment(node) && node.data === '['\n                    ? `(start of fragment)`\n                    : ``);\n        vnode.el = null;\n        if (isFragment) {\n            // remove excessive fragment nodes\n            const end = locateClosingAsyncAnchor(node);\n            while (true) {\n                const next = nextSibling(node);\n                if (next && next !== end) {\n                    remove(next);\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        const next = nextSibling(node);\n        const container = parentNode(node);\n        remove(node);\n        patch(null, vnode, container, next, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);\n        return next;\n    };\n    const locateClosingAsyncAnchor = (node) => {\n        let match = 0;\n        while (node) {\n            node = nextSibling(node);\n            if (node && isComment(node)) {\n                if (node.data === '[')\n                    match++;\n                if (node.data === ']') {\n                    if (match === 0) {\n                        return nextSibling(node);\n                    }\n                    else {\n                        match--;\n                    }\n                }\n            }\n        }\n        return node;\n    };\n    return [hydrate, hydrateNode];\n}\n\n/* eslint-disable no-restricted-globals */\nlet supported;\nlet perf;\nfunction startMeasure(instance, type) {\n    if (instance.appContext.config.performance && isSupported()) {\n        perf.mark(`vue-${type}-${instance.uid}`);\n    }\n    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n        devtoolsPerfStart(instance, type, isSupported() ? perf.now() : Date.now());\n    }\n}\nfunction endMeasure(instance, type) {\n    if (instance.appContext.config.performance && isSupported()) {\n        const startTag = `vue-${type}-${instance.uid}`;\n        const endTag = startTag + `:end`;\n        perf.mark(endTag);\n        perf.measure(`<${formatComponentName(instance, instance.type)}> ${type}`, startTag, endTag);\n        perf.clearMarks(startTag);\n        perf.clearMarks(endTag);\n    }\n    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n        devtoolsPerfEnd(instance, type, isSupported() ? perf.now() : Date.now());\n    }\n}\nfunction isSupported() {\n    if (supported !== undefined) {\n        return supported;\n    }\n    if (typeof window !== 'undefined' && window.performance) {\n        supported = true;\n        perf = window.performance;\n    }\n    else {\n        supported = false;\n    }\n    return supported;\n}\n\n/**\n * This is only called in esm-bundler builds.\n * It is called when a renderer is created, in `baseCreateRenderer` so that\n * importing runtime-core is side-effects free.\n *\n * istanbul-ignore-next\n */\nfunction initFeatureFlags() {\n    const needWarn = [];\n    if (typeof __VUE_OPTIONS_API__ !== 'boolean') {\n        (process.env.NODE_ENV !== 'production') && needWarn.push(`__VUE_OPTIONS_API__`);\n        getGlobalThis().__VUE_OPTIONS_API__ = true;\n    }\n    if (typeof __VUE_PROD_DEVTOOLS__ !== 'boolean') {\n        (process.env.NODE_ENV !== 'production') && needWarn.push(`__VUE_PROD_DEVTOOLS__`);\n        getGlobalThis().__VUE_PROD_DEVTOOLS__ = false;\n    }\n    if ((process.env.NODE_ENV !== 'production') && needWarn.length) {\n        const multi = needWarn.length > 1;\n        console.warn(`Feature flag${multi ? `s` : ``} ${needWarn.join(', ')} ${multi ? `are` : `is`} not explicitly defined. You are running the esm-bundler build of Vue, ` +\n            `which expects these compile-time feature flags to be globally injected ` +\n            `via the bundler config in order to get better tree-shaking in the ` +\n            `production bundle.\\n\\n` +\n            `For more details, see https://link.vuejs.org/feature-flags.`);\n    }\n}\n\nconst queuePostRenderEffect = queueEffectWithSuspense\n    ;\n/**\n * The createRenderer function accepts two generic arguments:\n * HostNode and HostElement, corresponding to Node and Element types in the\n * host environment. For example, for runtime-dom, HostNode would be the DOM\n * `Node` interface and HostElement would be the DOM `Element` interface.\n *\n * Custom renderers can pass in the platform specific types like this:\n *\n * ``` js\n * const { render, createApp } = createRenderer<Node, Element>({\n *   patchProp,\n *   ...nodeOps\n * })\n * ```\n */\nfunction createRenderer(options) {\n    return baseCreateRenderer(options);\n}\n// Separate API for creating hydration-enabled renderer.\n// Hydration logic is only used when calling this function, making it\n// tree-shakable.\nfunction createHydrationRenderer(options) {\n    return baseCreateRenderer(options, createHydrationFunctions);\n}\n// implementation\nfunction baseCreateRenderer(options, createHydrationFns) {\n    // compile-time feature flags check\n    {\n        initFeatureFlags();\n    }\n    const target = getGlobalThis();\n    target.__VUE__ = true;\n    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n        setDevtoolsHook(target.__VUE_DEVTOOLS_GLOBAL_HOOK__, target);\n    }\n    const { insert: hostInsert, remove: hostRemove, patchProp: hostPatchProp, createElement: hostCreateElement, createText: hostCreateText, createComment: hostCreateComment, setText: hostSetText, setElementText: hostSetElementText, parentNode: hostParentNode, nextSibling: hostNextSibling, setScopeId: hostSetScopeId = NOOP, insertStaticContent: hostInsertStaticContent } = options;\n    // Note: functions inside this closure should use `const xxx = () => {}`\n    // style in order to prevent being inlined by minifiers.\n    const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, isSVG = false, slotScopeIds = null, optimized = (process.env.NODE_ENV !== 'production') && isHmrUpdating ? false : !!n2.dynamicChildren) => {\n        if (n1 === n2) {\n            return;\n        }\n        // patching & not same type, unmount old tree\n        if (n1 && !isSameVNodeType(n1, n2)) {\n            anchor = getNextHostNode(n1);\n            unmount(n1, parentComponent, parentSuspense, true);\n            n1 = null;\n        }\n        if (n2.patchFlag === -2 /* PatchFlags.BAIL */) {\n            optimized = false;\n            n2.dynamicChildren = null;\n        }\n        const { type, ref, shapeFlag } = n2;\n        switch (type) {\n            case Text:\n                processText(n1, n2, container, anchor);\n                break;\n            case Comment:\n                processCommentNode(n1, n2, container, anchor);\n                break;\n            case Static:\n                if (n1 == null) {\n                    mountStaticNode(n2, container, anchor, isSVG);\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    patchStaticNode(n1, n2, container, isSVG);\n                }\n                break;\n            case Fragment:\n                processFragment(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                break;\n            default:\n                if (shapeFlag & 1 /* ShapeFlags.ELEMENT */) {\n                    processElement(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                }\n                else if (shapeFlag & 6 /* ShapeFlags.COMPONENT */) {\n                    processComponent(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                }\n                else if (shapeFlag & 64 /* ShapeFlags.TELEPORT */) {\n                    type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);\n                }\n                else if (shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n                    type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn('Invalid VNode type:', type, `(${typeof type})`);\n                }\n        }\n        // set ref\n        if (ref != null && parentComponent) {\n            setRef(ref, n1 && n1.ref, parentSuspense, n2 || n1, !n2);\n        }\n    };\n    const processText = (n1, n2, container, anchor) => {\n        if (n1 == null) {\n            hostInsert((n2.el = hostCreateText(n2.children)), container, anchor);\n        }\n        else {\n            const el = (n2.el = n1.el);\n            if (n2.children !== n1.children) {\n                hostSetText(el, n2.children);\n            }\n        }\n    };\n    const processCommentNode = (n1, n2, container, anchor) => {\n        if (n1 == null) {\n            hostInsert((n2.el = hostCreateComment(n2.children || '')), container, anchor);\n        }\n        else {\n            // there's no support for dynamic comments\n            n2.el = n1.el;\n        }\n    };\n    const mountStaticNode = (n2, container, anchor, isSVG) => {\n        [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG, n2.el, n2.anchor);\n    };\n    /**\n     * Dev / HMR only\n     */\n    const patchStaticNode = (n1, n2, container, isSVG) => {\n        // static nodes are only patched during dev for HMR\n        if (n2.children !== n1.children) {\n            const anchor = hostNextSibling(n1.anchor);\n            // remove existing\n            removeStaticNode(n1);\n            [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG);\n        }\n        else {\n            n2.el = n1.el;\n            n2.anchor = n1.anchor;\n        }\n    };\n    const moveStaticNode = ({ el, anchor }, container, nextSibling) => {\n        let next;\n        while (el && el !== anchor) {\n            next = hostNextSibling(el);\n            hostInsert(el, container, nextSibling);\n            el = next;\n        }\n        hostInsert(anchor, container, nextSibling);\n    };\n    const removeStaticNode = ({ el, anchor }) => {\n        let next;\n        while (el && el !== anchor) {\n            next = hostNextSibling(el);\n            hostRemove(el);\n            el = next;\n        }\n        hostRemove(anchor);\n    };\n    const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        isSVG = isSVG || n2.type === 'svg';\n        if (n1 == null) {\n            mountElement(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n        }\n        else {\n            patchElement(n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n        }\n    };\n    const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        let el;\n        let vnodeHook;\n        const { type, props, shapeFlag, transition, dirs } = vnode;\n        el = vnode.el = hostCreateElement(vnode.type, isSVG, props && props.is, props);\n        // mount children first, since some props may rely on child content\n        // being already rendered, e.g. `<select value>`\n        if (shapeFlag & 8 /* ShapeFlags.TEXT_CHILDREN */) {\n            hostSetElementText(el, vnode.children);\n        }\n        else if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n            mountChildren(vnode.children, el, null, parentComponent, parentSuspense, isSVG && type !== 'foreignObject', slotScopeIds, optimized);\n        }\n        if (dirs) {\n            invokeDirectiveHook(vnode, null, parentComponent, 'created');\n        }\n        // props\n        if (props) {\n            for (const key in props) {\n                if (key !== 'value' && !isReservedProp(key)) {\n                    hostPatchProp(el, key, null, props[key], isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);\n                }\n            }\n            /**\n             * Special case for setting value on DOM elements:\n             * - it can be order-sensitive (e.g. should be set *after* min/max, #2325, #4024)\n             * - it needs to be forced (#1471)\n             * #2353 proposes adding another renderer option to configure this, but\n             * the properties affects are so finite it is worth special casing it\n             * here to reduce the complexity. (Special casing it also should not\n             * affect non-DOM renderers)\n             */\n            if ('value' in props) {\n                hostPatchProp(el, 'value', null, props.value);\n            }\n            if ((vnodeHook = props.onVnodeBeforeMount)) {\n                invokeVNodeHook(vnodeHook, parentComponent, vnode);\n            }\n        }\n        // scopeId\n        setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n            Object.defineProperty(el, '__vnode', {\n                value: vnode,\n                enumerable: false\n            });\n            Object.defineProperty(el, '__vueParentComponent', {\n                value: parentComponent,\n                enumerable: false\n            });\n        }\n        if (dirs) {\n            invokeDirectiveHook(vnode, null, parentComponent, 'beforeMount');\n        }\n        // #1583 For inside suspense + suspense not resolved case, enter hook should call when suspense resolved\n        // #1689 For inside suspense + suspense resolved case, just call it\n        const needCallTransitionHooks = (!parentSuspense || (parentSuspense && !parentSuspense.pendingBranch)) &&\n            transition &&\n            !transition.persisted;\n        if (needCallTransitionHooks) {\n            transition.beforeEnter(el);\n        }\n        hostInsert(el, container, anchor);\n        if ((vnodeHook = props && props.onVnodeMounted) ||\n            needCallTransitionHooks ||\n            dirs) {\n            queuePostRenderEffect(() => {\n                vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n                needCallTransitionHooks && transition.enter(el);\n                dirs && invokeDirectiveHook(vnode, null, parentComponent, 'mounted');\n            }, parentSuspense);\n        }\n    };\n    const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {\n        if (scopeId) {\n            hostSetScopeId(el, scopeId);\n        }\n        if (slotScopeIds) {\n            for (let i = 0; i < slotScopeIds.length; i++) {\n                hostSetScopeId(el, slotScopeIds[i]);\n            }\n        }\n        if (parentComponent) {\n            let subTree = parentComponent.subTree;\n            if ((process.env.NODE_ENV !== 'production') &&\n                subTree.patchFlag > 0 &&\n                subTree.patchFlag & 2048 /* PatchFlags.DEV_ROOT_FRAGMENT */) {\n                subTree =\n                    filterSingleRoot(subTree.children) || subTree;\n            }\n            if (vnode === subTree) {\n                const parentVNode = parentComponent.vnode;\n                setScopeId(el, parentVNode, parentVNode.scopeId, parentVNode.slotScopeIds, parentComponent.parent);\n            }\n        }\n    };\n    const mountChildren = (children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, start = 0) => {\n        for (let i = start; i < children.length; i++) {\n            const child = (children[i] = optimized\n                ? cloneIfMounted(children[i])\n                : normalizeVNode(children[i]));\n            patch(null, child, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n        }\n    };\n    const patchElement = (n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        const el = (n2.el = n1.el);\n        let { patchFlag, dynamicChildren, dirs } = n2;\n        // #1426 take the old vnode's patch flag into account since user may clone a\n        // compiler-generated vnode, which de-opts to FULL_PROPS\n        patchFlag |= n1.patchFlag & 16 /* PatchFlags.FULL_PROPS */;\n        const oldProps = n1.props || EMPTY_OBJ;\n        const newProps = n2.props || EMPTY_OBJ;\n        let vnodeHook;\n        // disable recurse in beforeUpdate hooks\n        parentComponent && toggleRecurse(parentComponent, false);\n        if ((vnodeHook = newProps.onVnodeBeforeUpdate)) {\n            invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n        }\n        if (dirs) {\n            invokeDirectiveHook(n2, n1, parentComponent, 'beforeUpdate');\n        }\n        parentComponent && toggleRecurse(parentComponent, true);\n        if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\n            // HMR updated, force full diff\n            patchFlag = 0;\n            optimized = false;\n            dynamicChildren = null;\n        }\n        const areChildrenSVG = isSVG && n2.type !== 'foreignObject';\n        if (dynamicChildren) {\n            patchBlockChildren(n1.dynamicChildren, dynamicChildren, el, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds);\n            if ((process.env.NODE_ENV !== 'production') && parentComponent && parentComponent.type.__hmrId) {\n                traverseStaticChildren(n1, n2);\n            }\n        }\n        else if (!optimized) {\n            // full diff\n            patchChildren(n1, n2, el, null, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds, false);\n        }\n        if (patchFlag > 0) {\n            // the presence of a patchFlag means this element's render code was\n            // generated by the compiler and can take the fast path.\n            // in this path old node and new node are guaranteed to have the same shape\n            // (i.e. at the exact same position in the source template)\n            if (patchFlag & 16 /* PatchFlags.FULL_PROPS */) {\n                // element props contain dynamic keys, full diff needed\n                patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);\n            }\n            else {\n                // class\n                // this flag is matched when the element has dynamic class bindings.\n                if (patchFlag & 2 /* PatchFlags.CLASS */) {\n                    if (oldProps.class !== newProps.class) {\n                        hostPatchProp(el, 'class', null, newProps.class, isSVG);\n                    }\n                }\n                // style\n                // this flag is matched when the element has dynamic style bindings\n                if (patchFlag & 4 /* PatchFlags.STYLE */) {\n                    hostPatchProp(el, 'style', oldProps.style, newProps.style, isSVG);\n                }\n                // props\n                // This flag is matched when the element has dynamic prop/attr bindings\n                // other than class and style. The keys of dynamic prop/attrs are saved for\n                // faster iteration.\n                // Note dynamic keys like :[foo]=\"bar\" will cause this optimization to\n                // bail out and go through a full diff because we need to unset the old key\n                if (patchFlag & 8 /* PatchFlags.PROPS */) {\n                    // if the flag is present then dynamicProps must be non-null\n                    const propsToUpdate = n2.dynamicProps;\n                    for (let i = 0; i < propsToUpdate.length; i++) {\n                        const key = propsToUpdate[i];\n                        const prev = oldProps[key];\n                        const next = newProps[key];\n                        // #1471 force patch value\n                        if (next !== prev || key === 'value') {\n                            hostPatchProp(el, key, prev, next, isSVG, n1.children, parentComponent, parentSuspense, unmountChildren);\n                        }\n                    }\n                }\n            }\n            // text\n            // This flag is matched when the element has only dynamic text children.\n            if (patchFlag & 1 /* PatchFlags.TEXT */) {\n                if (n1.children !== n2.children) {\n                    hostSetElementText(el, n2.children);\n                }\n            }\n        }\n        else if (!optimized && dynamicChildren == null) {\n            // unoptimized, full diff\n            patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);\n        }\n        if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {\n            queuePostRenderEffect(() => {\n                vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n                dirs && invokeDirectiveHook(n2, n1, parentComponent, 'updated');\n            }, parentSuspense);\n        }\n    };\n    // The fast path for blocks.\n    const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, isSVG, slotScopeIds) => {\n        for (let i = 0; i < newChildren.length; i++) {\n            const oldVNode = oldChildren[i];\n            const newVNode = newChildren[i];\n            // Determine the container (parent element) for the patch.\n            const container = \n            // oldVNode may be an errored async setup() component inside Suspense\n            // which will not have a mounted element\n            oldVNode.el &&\n                // - In the case of a Fragment, we need to provide the actual parent\n                // of the Fragment itself so it can move its children.\n                (oldVNode.type === Fragment ||\n                    // - In the case of different nodes, there is going to be a replacement\n                    // which also requires the correct parent container\n                    !isSameVNodeType(oldVNode, newVNode) ||\n                    // - In the case of a component, it could contain anything.\n                    oldVNode.shapeFlag & (6 /* ShapeFlags.COMPONENT */ | 64 /* ShapeFlags.TELEPORT */))\n                ? hostParentNode(oldVNode.el)\n                : // In other cases, the parent container is not actually used so we\n                    // just pass the block element here to avoid a DOM parentNode call.\n                    fallbackContainer;\n            patch(oldVNode, newVNode, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, true);\n        }\n    };\n    const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, isSVG) => {\n        if (oldProps !== newProps) {\n            if (oldProps !== EMPTY_OBJ) {\n                for (const key in oldProps) {\n                    if (!isReservedProp(key) && !(key in newProps)) {\n                        hostPatchProp(el, key, oldProps[key], null, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);\n                    }\n                }\n            }\n            for (const key in newProps) {\n                // empty string is not valid prop\n                if (isReservedProp(key))\n                    continue;\n                const next = newProps[key];\n                const prev = oldProps[key];\n                // defer patching value\n                if (next !== prev && key !== 'value') {\n                    hostPatchProp(el, key, prev, next, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);\n                }\n            }\n            if ('value' in newProps) {\n                hostPatchProp(el, 'value', oldProps.value, newProps.value);\n            }\n        }\n    };\n    const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        const fragmentStartAnchor = (n2.el = n1 ? n1.el : hostCreateText(''));\n        const fragmentEndAnchor = (n2.anchor = n1 ? n1.anchor : hostCreateText(''));\n        let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;\n        if ((process.env.NODE_ENV !== 'production') &&\n            // #5523 dev root fragment may inherit directives\n            (isHmrUpdating || patchFlag & 2048 /* PatchFlags.DEV_ROOT_FRAGMENT */)) {\n            // HMR updated / Dev root fragment (w/ comments), force full diff\n            patchFlag = 0;\n            optimized = false;\n            dynamicChildren = null;\n        }\n        // check if this is a slot fragment with :slotted scope ids\n        if (fragmentSlotScopeIds) {\n            slotScopeIds = slotScopeIds\n                ? slotScopeIds.concat(fragmentSlotScopeIds)\n                : fragmentSlotScopeIds;\n        }\n        if (n1 == null) {\n            hostInsert(fragmentStartAnchor, container, anchor);\n            hostInsert(fragmentEndAnchor, container, anchor);\n            // a fragment can only have array children\n            // since they are either generated by the compiler, or implicitly created\n            // from arrays.\n            mountChildren(n2.children, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n        }\n        else {\n            if (patchFlag > 0 &&\n                patchFlag & 64 /* PatchFlags.STABLE_FRAGMENT */ &&\n                dynamicChildren &&\n                // #2715 the previous fragment could've been a BAILed one as a result\n                // of renderSlot() with no valid children\n                n1.dynamicChildren) {\n                // a stable fragment (template root or <template v-for>) doesn't need to\n                // patch children order, but it may contain dynamicChildren.\n                patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds);\n                if ((process.env.NODE_ENV !== 'production') && parentComponent && parentComponent.type.__hmrId) {\n                    traverseStaticChildren(n1, n2);\n                }\n                else if (\n                // #2080 if the stable fragment has a key, it's a <template v-for> that may\n                //  get moved around. Make sure all root level vnodes inherit el.\n                // #2134 or if it's a component root, it may also get moved around\n                // as the component is being moved.\n                n2.key != null ||\n                    (parentComponent && n2 === parentComponent.subTree)) {\n                    traverseStaticChildren(n1, n2, true /* shallow */);\n                }\n            }\n            else {\n                // keyed / unkeyed, or manual fragments.\n                // for keyed & unkeyed, since they are compiler generated from v-for,\n                // each child is guaranteed to be a block so the fragment will never\n                // have dynamicChildren.\n                patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n            }\n        }\n    };\n    const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        n2.slotScopeIds = slotScopeIds;\n        if (n1 == null) {\n            if (n2.shapeFlag & 512 /* ShapeFlags.COMPONENT_KEPT_ALIVE */) {\n                parentComponent.ctx.activate(n2, container, anchor, isSVG, optimized);\n            }\n            else {\n                mountComponent(n2, container, anchor, parentComponent, parentSuspense, isSVG, optimized);\n            }\n        }\n        else {\n            updateComponent(n1, n2, optimized);\n        }\n    };\n    const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, isSVG, optimized) => {\n        const instance = (initialVNode.component = createComponentInstance(initialVNode, parentComponent, parentSuspense));\n        if ((process.env.NODE_ENV !== 'production') && instance.type.__hmrId) {\n            registerHMR(instance);\n        }\n        if ((process.env.NODE_ENV !== 'production')) {\n            pushWarningContext(initialVNode);\n            startMeasure(instance, `mount`);\n        }\n        // inject renderer internals for keepAlive\n        if (isKeepAlive(initialVNode)) {\n            instance.ctx.renderer = internals;\n        }\n        // resolve props and slots for setup context\n        {\n            if ((process.env.NODE_ENV !== 'production')) {\n                startMeasure(instance, `init`);\n            }\n            setupComponent(instance);\n            if ((process.env.NODE_ENV !== 'production')) {\n                endMeasure(instance, `init`);\n            }\n        }\n        // setup() is async. This component relies on async logic to be resolved\n        // before proceeding\n        if (instance.asyncDep) {\n            parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);\n            // Give it a placeholder if this is not hydration\n            // TODO handle self-defined fallback\n            if (!initialVNode.el) {\n                const placeholder = (instance.subTree = createVNode(Comment));\n                processCommentNode(null, placeholder, container, anchor);\n            }\n            return;\n        }\n        setupRenderEffect(instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized);\n        if ((process.env.NODE_ENV !== 'production')) {\n            popWarningContext();\n            endMeasure(instance, `mount`);\n        }\n    };\n    const updateComponent = (n1, n2, optimized) => {\n        const instance = (n2.component = n1.component);\n        if (shouldUpdateComponent(n1, n2, optimized)) {\n            if (instance.asyncDep &&\n                !instance.asyncResolved) {\n                // async & still pending - just update props and slots\n                // since the component's reactive effect for render isn't set-up yet\n                if ((process.env.NODE_ENV !== 'production')) {\n                    pushWarningContext(n2);\n                }\n                updateComponentPreRender(instance, n2, optimized);\n                if ((process.env.NODE_ENV !== 'production')) {\n                    popWarningContext();\n                }\n                return;\n            }\n            else {\n                // normal update\n                instance.next = n2;\n                // in case the child component is also queued, remove it to avoid\n                // double updating the same child component in the same flush.\n                invalidateJob(instance.update);\n                // instance.update is the reactive effect.\n                instance.update();\n            }\n        }\n        else {\n            // no update needed. just copy over properties\n            n2.el = n1.el;\n            instance.vnode = n2;\n        }\n    };\n    const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized) => {\n        const componentUpdateFn = () => {\n            if (!instance.isMounted) {\n                let vnodeHook;\n                const { el, props } = initialVNode;\n                const { bm, m, parent } = instance;\n                const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);\n                toggleRecurse(instance, false);\n                // beforeMount hook\n                if (bm) {\n                    invokeArrayFns(bm);\n                }\n                // onVnodeBeforeMount\n                if (!isAsyncWrapperVNode &&\n                    (vnodeHook = props && props.onVnodeBeforeMount)) {\n                    invokeVNodeHook(vnodeHook, parent, initialVNode);\n                }\n                toggleRecurse(instance, true);\n                if (el && hydrateNode) {\n                    // vnode has adopted host node - perform hydration instead of mount.\n                    const hydrateSubTree = () => {\n                        if ((process.env.NODE_ENV !== 'production')) {\n                            startMeasure(instance, `render`);\n                        }\n                        instance.subTree = renderComponentRoot(instance);\n                        if ((process.env.NODE_ENV !== 'production')) {\n                            endMeasure(instance, `render`);\n                        }\n                        if ((process.env.NODE_ENV !== 'production')) {\n                            startMeasure(instance, `hydrate`);\n                        }\n                        hydrateNode(el, instance.subTree, instance, parentSuspense, null);\n                        if ((process.env.NODE_ENV !== 'production')) {\n                            endMeasure(instance, `hydrate`);\n                        }\n                    };\n                    if (isAsyncWrapperVNode) {\n                        initialVNode.type.__asyncLoader().then(\n                        // note: we are moving the render call into an async callback,\n                        // which means it won't track dependencies - but it's ok because\n                        // a server-rendered async wrapper is already in resolved state\n                        // and it will never need to change.\n                        () => !instance.isUnmounted && hydrateSubTree());\n                    }\n                    else {\n                        hydrateSubTree();\n                    }\n                }\n                else {\n                    if ((process.env.NODE_ENV !== 'production')) {\n                        startMeasure(instance, `render`);\n                    }\n                    const subTree = (instance.subTree = renderComponentRoot(instance));\n                    if ((process.env.NODE_ENV !== 'production')) {\n                        endMeasure(instance, `render`);\n                    }\n                    if ((process.env.NODE_ENV !== 'production')) {\n                        startMeasure(instance, `patch`);\n                    }\n                    patch(null, subTree, container, anchor, instance, parentSuspense, isSVG);\n                    if ((process.env.NODE_ENV !== 'production')) {\n                        endMeasure(instance, `patch`);\n                    }\n                    initialVNode.el = subTree.el;\n                }\n                // mounted hook\n                if (m) {\n                    queuePostRenderEffect(m, parentSuspense);\n                }\n                // onVnodeMounted\n                if (!isAsyncWrapperVNode &&\n                    (vnodeHook = props && props.onVnodeMounted)) {\n                    const scopedInitialVNode = initialVNode;\n                    queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode), parentSuspense);\n                }\n                // activated hook for keep-alive roots.\n                // #1742 activated hook must be accessed after first render\n                // since the hook may be injected by a child keep-alive\n                if (initialVNode.shapeFlag & 256 /* ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE */ ||\n                    (parent &&\n                        isAsyncWrapper(parent.vnode) &&\n                        parent.vnode.shapeFlag & 256 /* ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE */)) {\n                    instance.a && queuePostRenderEffect(instance.a, parentSuspense);\n                }\n                instance.isMounted = true;\n                if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n                    devtoolsComponentAdded(instance);\n                }\n                // #2458: deference mount-only object parameters to prevent memleaks\n                initialVNode = container = anchor = null;\n            }\n            else {\n                // updateComponent\n                // This is triggered by mutation of component's own state (next: null)\n                // OR parent calling processComponent (next: VNode)\n                let { next, bu, u, parent, vnode } = instance;\n                let originNext = next;\n                let vnodeHook;\n                if ((process.env.NODE_ENV !== 'production')) {\n                    pushWarningContext(next || instance.vnode);\n                }\n                // Disallow component effect recursion during pre-lifecycle hooks.\n                toggleRecurse(instance, false);\n                if (next) {\n                    next.el = vnode.el;\n                    updateComponentPreRender(instance, next, optimized);\n                }\n                else {\n                    next = vnode;\n                }\n                // beforeUpdate hook\n                if (bu) {\n                    invokeArrayFns(bu);\n                }\n                // onVnodeBeforeUpdate\n                if ((vnodeHook = next.props && next.props.onVnodeBeforeUpdate)) {\n                    invokeVNodeHook(vnodeHook, parent, next, vnode);\n                }\n                toggleRecurse(instance, true);\n                // render\n                if ((process.env.NODE_ENV !== 'production')) {\n                    startMeasure(instance, `render`);\n                }\n                const nextTree = renderComponentRoot(instance);\n                if ((process.env.NODE_ENV !== 'production')) {\n                    endMeasure(instance, `render`);\n                }\n                const prevTree = instance.subTree;\n                instance.subTree = nextTree;\n                if ((process.env.NODE_ENV !== 'production')) {\n                    startMeasure(instance, `patch`);\n                }\n                patch(prevTree, nextTree, \n                // parent may have changed if it's in a teleport\n                hostParentNode(prevTree.el), \n                // anchor may have changed if it's in a fragment\n                getNextHostNode(prevTree), instance, parentSuspense, isSVG);\n                if ((process.env.NODE_ENV !== 'production')) {\n                    endMeasure(instance, `patch`);\n                }\n                next.el = nextTree.el;\n                if (originNext === null) {\n                    // self-triggered update. In case of HOC, update parent component\n                    // vnode el. HOC is indicated by parent instance's subTree pointing\n                    // to child component's vnode\n                    updateHOCHostEl(instance, nextTree.el);\n                }\n                // updated hook\n                if (u) {\n                    queuePostRenderEffect(u, parentSuspense);\n                }\n                // onVnodeUpdated\n                if ((vnodeHook = next.props && next.props.onVnodeUpdated)) {\n                    queuePostRenderEffect(() => invokeVNodeHook(vnodeHook, parent, next, vnode), parentSuspense);\n                }\n                if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n                    devtoolsComponentUpdated(instance);\n                }\n                if ((process.env.NODE_ENV !== 'production')) {\n                    popWarningContext();\n                }\n            }\n        };\n        // create reactive effect for rendering\n        const effect = (instance.effect = new ReactiveEffect(componentUpdateFn, () => queueJob(update), instance.scope // track it in component's effect scope\n        ));\n        const update = (instance.update = () => effect.run());\n        update.id = instance.uid;\n        // allowRecurse\n        // #1801, #2043 component render effects should allow recursive updates\n        toggleRecurse(instance, true);\n        if ((process.env.NODE_ENV !== 'production')) {\n            effect.onTrack = instance.rtc\n                ? e => invokeArrayFns(instance.rtc, e)\n                : void 0;\n            effect.onTrigger = instance.rtg\n                ? e => invokeArrayFns(instance.rtg, e)\n                : void 0;\n            update.ownerInstance = instance;\n        }\n        update();\n    };\n    const updateComponentPreRender = (instance, nextVNode, optimized) => {\n        nextVNode.component = instance;\n        const prevProps = instance.vnode.props;\n        instance.vnode = nextVNode;\n        instance.next = null;\n        updateProps(instance, nextVNode.props, prevProps, optimized);\n        updateSlots(instance, nextVNode.children, optimized);\n        pauseTracking();\n        // props update may have triggered pre-flush watchers.\n        // flush them before the render update.\n        flushPreFlushCbs();\n        resetTracking();\n    };\n    const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized = false) => {\n        const c1 = n1 && n1.children;\n        const prevShapeFlag = n1 ? n1.shapeFlag : 0;\n        const c2 = n2.children;\n        const { patchFlag, shapeFlag } = n2;\n        // fast path\n        if (patchFlag > 0) {\n            if (patchFlag & 128 /* PatchFlags.KEYED_FRAGMENT */) {\n                // this could be either fully-keyed or mixed (some keyed some not)\n                // presence of patchFlag means children are guaranteed to be arrays\n                patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                return;\n            }\n            else if (patchFlag & 256 /* PatchFlags.UNKEYED_FRAGMENT */) {\n                // unkeyed\n                patchUnkeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                return;\n            }\n        }\n        // children has 3 possibilities: text, array or no children.\n        if (shapeFlag & 8 /* ShapeFlags.TEXT_CHILDREN */) {\n            // text children fast path\n            if (prevShapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n                unmountChildren(c1, parentComponent, parentSuspense);\n            }\n            if (c2 !== c1) {\n                hostSetElementText(container, c2);\n            }\n        }\n        else {\n            if (prevShapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n                // prev children was array\n                if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n                    // two arrays, cannot assume anything, do full diff\n                    patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                }\n                else {\n                    // no new children, just unmount old\n                    unmountChildren(c1, parentComponent, parentSuspense, true);\n                }\n            }\n            else {\n                // prev children was text OR null\n                // new children is array OR null\n                if (prevShapeFlag & 8 /* ShapeFlags.TEXT_CHILDREN */) {\n                    hostSetElementText(container, '');\n                }\n                // mount new if array\n                if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n                    mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                }\n            }\n        }\n    };\n    const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        c1 = c1 || EMPTY_ARR;\n        c2 = c2 || EMPTY_ARR;\n        const oldLength = c1.length;\n        const newLength = c2.length;\n        const commonLength = Math.min(oldLength, newLength);\n        let i;\n        for (i = 0; i < commonLength; i++) {\n            const nextChild = (c2[i] = optimized\n                ? cloneIfMounted(c2[i])\n                : normalizeVNode(c2[i]));\n            patch(c1[i], nextChild, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n        }\n        if (oldLength > newLength) {\n            // remove old\n            unmountChildren(c1, parentComponent, parentSuspense, true, false, commonLength);\n        }\n        else {\n            // mount new\n            mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, commonLength);\n        }\n    };\n    // can be all-keyed or mixed\n    const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\n        let i = 0;\n        const l2 = c2.length;\n        let e1 = c1.length - 1; // prev ending index\n        let e2 = l2 - 1; // next ending index\n        // 1. sync from start\n        // (a b) c\n        // (a b) d e\n        while (i <= e1 && i <= e2) {\n            const n1 = c1[i];\n            const n2 = (c2[i] = optimized\n                ? cloneIfMounted(c2[i])\n                : normalizeVNode(c2[i]));\n            if (isSameVNodeType(n1, n2)) {\n                patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n            }\n            else {\n                break;\n            }\n            i++;\n        }\n        // 2. sync from end\n        // a (b c)\n        // d e (b c)\n        while (i <= e1 && i <= e2) {\n            const n1 = c1[e1];\n            const n2 = (c2[e2] = optimized\n                ? cloneIfMounted(c2[e2])\n                : normalizeVNode(c2[e2]));\n            if (isSameVNodeType(n1, n2)) {\n                patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n            }\n            else {\n                break;\n            }\n            e1--;\n            e2--;\n        }\n        // 3. common sequence + mount\n        // (a b)\n        // (a b) c\n        // i = 2, e1 = 1, e2 = 2\n        // (a b)\n        // c (a b)\n        // i = 0, e1 = -1, e2 = 0\n        if (i > e1) {\n            if (i <= e2) {\n                const nextPos = e2 + 1;\n                const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;\n                while (i <= e2) {\n                    patch(null, (c2[i] = optimized\n                        ? cloneIfMounted(c2[i])\n                        : normalizeVNode(c2[i])), container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                    i++;\n                }\n            }\n        }\n        // 4. common sequence + unmount\n        // (a b) c\n        // (a b)\n        // i = 2, e1 = 2, e2 = 1\n        // a (b c)\n        // (b c)\n        // i = 0, e1 = 0, e2 = -1\n        else if (i > e2) {\n            while (i <= e1) {\n                unmount(c1[i], parentComponent, parentSuspense, true);\n                i++;\n            }\n        }\n        // 5. unknown sequence\n        // [i ... e1 + 1]: a b [c d e] f g\n        // [i ... e2 + 1]: a b [e d c h] f g\n        // i = 2, e1 = 4, e2 = 5\n        else {\n            const s1 = i; // prev starting index\n            const s2 = i; // next starting index\n            // 5.1 build key:index map for newChildren\n            const keyToNewIndexMap = new Map();\n            for (i = s2; i <= e2; i++) {\n                const nextChild = (c2[i] = optimized\n                    ? cloneIfMounted(c2[i])\n                    : normalizeVNode(c2[i]));\n                if (nextChild.key != null) {\n                    if ((process.env.NODE_ENV !== 'production') && keyToNewIndexMap.has(nextChild.key)) {\n                        warn(`Duplicate keys found during update:`, JSON.stringify(nextChild.key), `Make sure keys are unique.`);\n                    }\n                    keyToNewIndexMap.set(nextChild.key, i);\n                }\n            }\n            // 5.2 loop through old children left to be patched and try to patch\n            // matching nodes & remove nodes that are no longer present\n            let j;\n            let patched = 0;\n            const toBePatched = e2 - s2 + 1;\n            let moved = false;\n            // used to track whether any node has moved\n            let maxNewIndexSoFar = 0;\n            // works as Map<newIndex, oldIndex>\n            // Note that oldIndex is offset by +1\n            // and oldIndex = 0 is a special value indicating the new node has\n            // no corresponding old node.\n            // used for determining longest stable subsequence\n            const newIndexToOldIndexMap = new Array(toBePatched);\n            for (i = 0; i < toBePatched; i++)\n                newIndexToOldIndexMap[i] = 0;\n            for (i = s1; i <= e1; i++) {\n                const prevChild = c1[i];\n                if (patched >= toBePatched) {\n                    // all new children have been patched so this can only be a removal\n                    unmount(prevChild, parentComponent, parentSuspense, true);\n                    continue;\n                }\n                let newIndex;\n                if (prevChild.key != null) {\n                    newIndex = keyToNewIndexMap.get(prevChild.key);\n                }\n                else {\n                    // key-less node, try to locate a key-less node of the same type\n                    for (j = s2; j <= e2; j++) {\n                        if (newIndexToOldIndexMap[j - s2] === 0 &&\n                            isSameVNodeType(prevChild, c2[j])) {\n                            newIndex = j;\n                            break;\n                        }\n                    }\n                }\n                if (newIndex === undefined) {\n                    unmount(prevChild, parentComponent, parentSuspense, true);\n                }\n                else {\n                    newIndexToOldIndexMap[newIndex - s2] = i + 1;\n                    if (newIndex >= maxNewIndexSoFar) {\n                        maxNewIndexSoFar = newIndex;\n                    }\n                    else {\n                        moved = true;\n                    }\n                    patch(prevChild, c2[newIndex], container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                    patched++;\n                }\n            }\n            // 5.3 move and mount\n            // generate longest stable subsequence only when nodes have moved\n            const increasingNewIndexSequence = moved\n                ? getSequence(newIndexToOldIndexMap)\n                : EMPTY_ARR;\n            j = increasingNewIndexSequence.length - 1;\n            // looping backwards so that we can use last patched node as anchor\n            for (i = toBePatched - 1; i >= 0; i--) {\n                const nextIndex = s2 + i;\n                const nextChild = c2[nextIndex];\n                const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;\n                if (newIndexToOldIndexMap[i] === 0) {\n                    // mount new\n                    patch(null, nextChild, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                }\n                else if (moved) {\n                    // move if:\n                    // There is no stable subsequence (e.g. a reverse)\n                    // OR current node is not among the stable sequence\n                    if (j < 0 || i !== increasingNewIndexSequence[j]) {\n                        move(nextChild, container, anchor, 2 /* MoveType.REORDER */);\n                    }\n                    else {\n                        j--;\n                    }\n                }\n            }\n        }\n    };\n    const move = (vnode, container, anchor, moveType, parentSuspense = null) => {\n        const { el, type, transition, children, shapeFlag } = vnode;\n        if (shapeFlag & 6 /* ShapeFlags.COMPONENT */) {\n            move(vnode.component.subTree, container, anchor, moveType);\n            return;\n        }\n        if (shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n            vnode.suspense.move(container, anchor, moveType);\n            return;\n        }\n        if (shapeFlag & 64 /* ShapeFlags.TELEPORT */) {\n            type.move(vnode, container, anchor, internals);\n            return;\n        }\n        if (type === Fragment) {\n            hostInsert(el, container, anchor);\n            for (let i = 0; i < children.length; i++) {\n                move(children[i], container, anchor, moveType);\n            }\n            hostInsert(vnode.anchor, container, anchor);\n            return;\n        }\n        if (type === Static) {\n            moveStaticNode(vnode, container, anchor);\n            return;\n        }\n        // single nodes\n        const needTransition = moveType !== 2 /* MoveType.REORDER */ &&\n            shapeFlag & 1 /* ShapeFlags.ELEMENT */ &&\n            transition;\n        if (needTransition) {\n            if (moveType === 0 /* MoveType.ENTER */) {\n                transition.beforeEnter(el);\n                hostInsert(el, container, anchor);\n                queuePostRenderEffect(() => transition.enter(el), parentSuspense);\n            }\n            else {\n                const { leave, delayLeave, afterLeave } = transition;\n                const remove = () => hostInsert(el, container, anchor);\n                const performLeave = () => {\n                    leave(el, () => {\n                        remove();\n                        afterLeave && afterLeave();\n                    });\n                };\n                if (delayLeave) {\n                    delayLeave(el, remove, performLeave);\n                }\n                else {\n                    performLeave();\n                }\n            }\n        }\n        else {\n            hostInsert(el, container, anchor);\n        }\n    };\n    const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {\n        const { type, props, ref, children, dynamicChildren, shapeFlag, patchFlag, dirs } = vnode;\n        // unset ref\n        if (ref != null) {\n            setRef(ref, null, parentSuspense, vnode, true);\n        }\n        if (shapeFlag & 256 /* ShapeFlags.COMPONENT_SHOULD_KEEP_ALIVE */) {\n            parentComponent.ctx.deactivate(vnode);\n            return;\n        }\n        const shouldInvokeDirs = shapeFlag & 1 /* ShapeFlags.ELEMENT */ && dirs;\n        const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);\n        let vnodeHook;\n        if (shouldInvokeVnodeHook &&\n            (vnodeHook = props && props.onVnodeBeforeUnmount)) {\n            invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        }\n        if (shapeFlag & 6 /* ShapeFlags.COMPONENT */) {\n            unmountComponent(vnode.component, parentSuspense, doRemove);\n        }\n        else {\n            if (shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n                vnode.suspense.unmount(parentSuspense, doRemove);\n                return;\n            }\n            if (shouldInvokeDirs) {\n                invokeDirectiveHook(vnode, null, parentComponent, 'beforeUnmount');\n            }\n            if (shapeFlag & 64 /* ShapeFlags.TELEPORT */) {\n                vnode.type.remove(vnode, parentComponent, parentSuspense, optimized, internals, doRemove);\n            }\n            else if (dynamicChildren &&\n                // #1153: fast path should not be taken for non-stable (v-for) fragments\n                (type !== Fragment ||\n                    (patchFlag > 0 && patchFlag & 64 /* PatchFlags.STABLE_FRAGMENT */))) {\n                // fast path for block nodes: only need to unmount dynamic children.\n                unmountChildren(dynamicChildren, parentComponent, parentSuspense, false, true);\n            }\n            else if ((type === Fragment &&\n                patchFlag &\n                    (128 /* PatchFlags.KEYED_FRAGMENT */ | 256 /* PatchFlags.UNKEYED_FRAGMENT */)) ||\n                (!optimized && shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */)) {\n                unmountChildren(children, parentComponent, parentSuspense);\n            }\n            if (doRemove) {\n                remove(vnode);\n            }\n        }\n        if ((shouldInvokeVnodeHook &&\n            (vnodeHook = props && props.onVnodeUnmounted)) ||\n            shouldInvokeDirs) {\n            queuePostRenderEffect(() => {\n                vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n                shouldInvokeDirs &&\n                    invokeDirectiveHook(vnode, null, parentComponent, 'unmounted');\n            }, parentSuspense);\n        }\n    };\n    const remove = vnode => {\n        const { type, el, anchor, transition } = vnode;\n        if (type === Fragment) {\n            if ((process.env.NODE_ENV !== 'production') &&\n                vnode.patchFlag > 0 &&\n                vnode.patchFlag & 2048 /* PatchFlags.DEV_ROOT_FRAGMENT */ &&\n                transition &&\n                !transition.persisted) {\n                vnode.children.forEach(child => {\n                    if (child.type === Comment) {\n                        hostRemove(child.el);\n                    }\n                    else {\n                        remove(child);\n                    }\n                });\n            }\n            else {\n                removeFragment(el, anchor);\n            }\n            return;\n        }\n        if (type === Static) {\n            removeStaticNode(vnode);\n            return;\n        }\n        const performRemove = () => {\n            hostRemove(el);\n            if (transition && !transition.persisted && transition.afterLeave) {\n                transition.afterLeave();\n            }\n        };\n        if (vnode.shapeFlag & 1 /* ShapeFlags.ELEMENT */ &&\n            transition &&\n            !transition.persisted) {\n            const { leave, delayLeave } = transition;\n            const performLeave = () => leave(el, performRemove);\n            if (delayLeave) {\n                delayLeave(vnode.el, performRemove, performLeave);\n            }\n            else {\n                performLeave();\n            }\n        }\n        else {\n            performRemove();\n        }\n    };\n    const removeFragment = (cur, end) => {\n        // For fragments, directly remove all contained DOM nodes.\n        // (fragment child nodes cannot have transition)\n        let next;\n        while (cur !== end) {\n            next = hostNextSibling(cur);\n            hostRemove(cur);\n            cur = next;\n        }\n        hostRemove(end);\n    };\n    const unmountComponent = (instance, parentSuspense, doRemove) => {\n        if ((process.env.NODE_ENV !== 'production') && instance.type.__hmrId) {\n            unregisterHMR(instance);\n        }\n        const { bum, scope, update, subTree, um } = instance;\n        // beforeUnmount hook\n        if (bum) {\n            invokeArrayFns(bum);\n        }\n        // stop effects in component scope\n        scope.stop();\n        // update may be null if a component is unmounted before its async\n        // setup has resolved.\n        if (update) {\n            // so that scheduler will no longer invoke it\n            update.active = false;\n            unmount(subTree, instance, parentSuspense, doRemove);\n        }\n        // unmounted hook\n        if (um) {\n            queuePostRenderEffect(um, parentSuspense);\n        }\n        queuePostRenderEffect(() => {\n            instance.isUnmounted = true;\n        }, parentSuspense);\n        // A component with async dep inside a pending suspense is unmounted before\n        // its async dep resolves. This should remove the dep from the suspense, and\n        // cause the suspense to resolve immediately if that was the last dep.\n        if (parentSuspense &&\n            parentSuspense.pendingBranch &&\n            !parentSuspense.isUnmounted &&\n            instance.asyncDep &&\n            !instance.asyncResolved &&\n            instance.suspenseId === parentSuspense.pendingId) {\n            parentSuspense.deps--;\n            if (parentSuspense.deps === 0) {\n                parentSuspense.resolve();\n            }\n        }\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n            devtoolsComponentRemoved(instance);\n        }\n    };\n    const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {\n        for (let i = start; i < children.length; i++) {\n            unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);\n        }\n    };\n    const getNextHostNode = vnode => {\n        if (vnode.shapeFlag & 6 /* ShapeFlags.COMPONENT */) {\n            return getNextHostNode(vnode.component.subTree);\n        }\n        if (vnode.shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n            return vnode.suspense.next();\n        }\n        return hostNextSibling((vnode.anchor || vnode.el));\n    };\n    const render = (vnode, container, isSVG) => {\n        if (vnode == null) {\n            if (container._vnode) {\n                unmount(container._vnode, null, null, true);\n            }\n        }\n        else {\n            patch(container._vnode || null, vnode, container, null, null, null, isSVG);\n        }\n        flushPreFlushCbs();\n        flushPostFlushCbs();\n        container._vnode = vnode;\n    };\n    const internals = {\n        p: patch,\n        um: unmount,\n        m: move,\n        r: remove,\n        mt: mountComponent,\n        mc: mountChildren,\n        pc: patchChildren,\n        pbc: patchBlockChildren,\n        n: getNextHostNode,\n        o: options\n    };\n    let hydrate;\n    let hydrateNode;\n    if (createHydrationFns) {\n        [hydrate, hydrateNode] = createHydrationFns(internals);\n    }\n    return {\n        render,\n        hydrate,\n        createApp: createAppAPI(render, hydrate)\n    };\n}\nfunction toggleRecurse({ effect, update }, allowed) {\n    effect.allowRecurse = update.allowRecurse = allowed;\n}\n/**\n * #1156\n * When a component is HMR-enabled, we need to make sure that all static nodes\n * inside a block also inherit the DOM element from the previous tree so that\n * HMR updates (which are full updates) can retrieve the element for patching.\n *\n * #2080\n * Inside keyed `template` fragment static children, if a fragment is moved,\n * the children will always be moved. Therefore, in order to ensure correct move\n * position, el should be inherited from previous nodes.\n */\nfunction traverseStaticChildren(n1, n2, shallow = false) {\n    const ch1 = n1.children;\n    const ch2 = n2.children;\n    if (isArray(ch1) && isArray(ch2)) {\n        for (let i = 0; i < ch1.length; i++) {\n            // this is only called in the optimized path so array children are\n            // guaranteed to be vnodes\n            const c1 = ch1[i];\n            let c2 = ch2[i];\n            if (c2.shapeFlag & 1 /* ShapeFlags.ELEMENT */ && !c2.dynamicChildren) {\n                if (c2.patchFlag <= 0 || c2.patchFlag === 32 /* PatchFlags.HYDRATE_EVENTS */) {\n                    c2 = ch2[i] = cloneIfMounted(ch2[i]);\n                    c2.el = c1.el;\n                }\n                if (!shallow)\n                    traverseStaticChildren(c1, c2);\n            }\n            // also inherit for comment nodes, but not placeholders (e.g. v-if which\n            // would have received .el during block patch)\n            if ((process.env.NODE_ENV !== 'production') && c2.type === Comment && !c2.el) {\n                c2.el = c1.el;\n            }\n        }\n    }\n}\n// https://en.wikipedia.org/wiki/Longest_increasing_subsequence\nfunction getSequence(arr) {\n    const p = arr.slice();\n    const result = [0];\n    let i, j, u, v, c;\n    const len = arr.length;\n    for (i = 0; i < len; i++) {\n        const arrI = arr[i];\n        if (arrI !== 0) {\n            j = result[result.length - 1];\n            if (arr[j] < arrI) {\n                p[i] = j;\n                result.push(i);\n                continue;\n            }\n            u = 0;\n            v = result.length - 1;\n            while (u < v) {\n                c = (u + v) >> 1;\n                if (arr[result[c]] < arrI) {\n                    u = c + 1;\n                }\n                else {\n                    v = c;\n                }\n            }\n            if (arrI < arr[result[u]]) {\n                if (u > 0) {\n                    p[i] = result[u - 1];\n                }\n                result[u] = i;\n            }\n        }\n    }\n    u = result.length;\n    v = result[u - 1];\n    while (u-- > 0) {\n        result[u] = v;\n        v = p[v];\n    }\n    return result;\n}\n\nconst isTeleport = (type) => type.__isTeleport;\nconst isTeleportDisabled = (props) => props && (props.disabled || props.disabled === '');\nconst isTargetSVG = (target) => typeof SVGElement !== 'undefined' && target instanceof SVGElement;\nconst resolveTarget = (props, select) => {\n    const targetSelector = props && props.to;\n    if (isString(targetSelector)) {\n        if (!select) {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`Current renderer does not support string target for Teleports. ` +\n                    `(missing querySelector renderer option)`);\n            return null;\n        }\n        else {\n            const target = select(targetSelector);\n            if (!target) {\n                (process.env.NODE_ENV !== 'production') &&\n                    warn(`Failed to locate Teleport target with selector \"${targetSelector}\". ` +\n                        `Note the target element must exist before the component is mounted - ` +\n                        `i.e. the target cannot be rendered by the component itself, and ` +\n                        `ideally should be outside of the entire Vue component tree.`);\n            }\n            return target;\n        }\n    }\n    else {\n        if ((process.env.NODE_ENV !== 'production') && !targetSelector && !isTeleportDisabled(props)) {\n            warn(`Invalid Teleport target: ${targetSelector}`);\n        }\n        return targetSelector;\n    }\n};\nconst TeleportImpl = {\n    __isTeleport: true,\n    process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals) {\n        const { mc: mountChildren, pc: patchChildren, pbc: patchBlockChildren, o: { insert, querySelector, createText, createComment } } = internals;\n        const disabled = isTeleportDisabled(n2.props);\n        let { shapeFlag, children, dynamicChildren } = n2;\n        // #3302\n        // HMR updated, force full diff\n        if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\n            optimized = false;\n            dynamicChildren = null;\n        }\n        if (n1 == null) {\n            // insert anchors in the main view\n            const placeholder = (n2.el = (process.env.NODE_ENV !== 'production')\n                ? createComment('teleport start')\n                : createText(''));\n            const mainAnchor = (n2.anchor = (process.env.NODE_ENV !== 'production')\n                ? createComment('teleport end')\n                : createText(''));\n            insert(placeholder, container, anchor);\n            insert(mainAnchor, container, anchor);\n            const target = (n2.target = resolveTarget(n2.props, querySelector));\n            const targetAnchor = (n2.targetAnchor = createText(''));\n            if (target) {\n                insert(targetAnchor, target);\n                // #2652 we could be teleporting from a non-SVG tree into an SVG tree\n                isSVG = isSVG || isTargetSVG(target);\n            }\n            else if ((process.env.NODE_ENV !== 'production') && !disabled) {\n                warn('Invalid Teleport target on mount:', target, `(${typeof target})`);\n            }\n            const mount = (container, anchor) => {\n                // Teleport *always* has Array children. This is enforced in both the\n                // compiler and vnode children normalization.\n                if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n                    mountChildren(children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\n                }\n            };\n            if (disabled) {\n                mount(container, mainAnchor);\n            }\n            else if (target) {\n                mount(target, targetAnchor);\n            }\n        }\n        else {\n            // update content\n            n2.el = n1.el;\n            const mainAnchor = (n2.anchor = n1.anchor);\n            const target = (n2.target = n1.target);\n            const targetAnchor = (n2.targetAnchor = n1.targetAnchor);\n            const wasDisabled = isTeleportDisabled(n1.props);\n            const currentContainer = wasDisabled ? container : target;\n            const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;\n            isSVG = isSVG || isTargetSVG(target);\n            if (dynamicChildren) {\n                // fast path when the teleport happens to be a block root\n                patchBlockChildren(n1.dynamicChildren, dynamicChildren, currentContainer, parentComponent, parentSuspense, isSVG, slotScopeIds);\n                // even in block tree mode we need to make sure all root-level nodes\n                // in the teleport inherit previous DOM references so that they can\n                // be moved in future patches.\n                traverseStaticChildren(n1, n2, true);\n            }\n            else if (!optimized) {\n                patchChildren(n1, n2, currentContainer, currentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, false);\n            }\n            if (disabled) {\n                if (!wasDisabled) {\n                    // enabled -> disabled\n                    // move into main container\n                    moveTeleport(n2, container, mainAnchor, internals, 1 /* TeleportMoveTypes.TOGGLE */);\n                }\n            }\n            else {\n                // target changed\n                if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {\n                    const nextTarget = (n2.target = resolveTarget(n2.props, querySelector));\n                    if (nextTarget) {\n                        moveTeleport(n2, nextTarget, null, internals, 0 /* TeleportMoveTypes.TARGET_CHANGE */);\n                    }\n                    else if ((process.env.NODE_ENV !== 'production')) {\n                        warn('Invalid Teleport target on update:', target, `(${typeof target})`);\n                    }\n                }\n                else if (wasDisabled) {\n                    // disabled -> enabled\n                    // move into teleport target\n                    moveTeleport(n2, target, targetAnchor, internals, 1 /* TeleportMoveTypes.TOGGLE */);\n                }\n            }\n        }\n    },\n    remove(vnode, parentComponent, parentSuspense, optimized, { um: unmount, o: { remove: hostRemove } }, doRemove) {\n        const { shapeFlag, children, anchor, targetAnchor, target, props } = vnode;\n        if (target) {\n            hostRemove(targetAnchor);\n        }\n        // an unmounted teleport should always remove its children if not disabled\n        if (doRemove || !isTeleportDisabled(props)) {\n            hostRemove(anchor);\n            if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n                for (let i = 0; i < children.length; i++) {\n                    const child = children[i];\n                    unmount(child, parentComponent, parentSuspense, true, !!child.dynamicChildren);\n                }\n            }\n        }\n    },\n    move: moveTeleport,\n    hydrate: hydrateTeleport\n};\nfunction moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2 /* TeleportMoveTypes.REORDER */) {\n    // move target anchor if this is a target change.\n    if (moveType === 0 /* TeleportMoveTypes.TARGET_CHANGE */) {\n        insert(vnode.targetAnchor, container, parentAnchor);\n    }\n    const { el, anchor, shapeFlag, children, props } = vnode;\n    const isReorder = moveType === 2 /* TeleportMoveTypes.REORDER */;\n    // move main view anchor if this is a re-order.\n    if (isReorder) {\n        insert(el, container, parentAnchor);\n    }\n    // if this is a re-order and teleport is enabled (content is in target)\n    // do not move children. So the opposite is: only move children if this\n    // is not a reorder, or the teleport is disabled\n    if (!isReorder || isTeleportDisabled(props)) {\n        // Teleport has either Array children or no children.\n        if (shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n            for (let i = 0; i < children.length; i++) {\n                move(children[i], container, parentAnchor, 2 /* MoveType.REORDER */);\n            }\n        }\n    }\n    // move main view anchor if this is a re-order.\n    if (isReorder) {\n        insert(anchor, container, parentAnchor);\n    }\n}\nfunction hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, { o: { nextSibling, parentNode, querySelector } }, hydrateChildren) {\n    const target = (vnode.target = resolveTarget(vnode.props, querySelector));\n    if (target) {\n        // if multiple teleports rendered to the same target element, we need to\n        // pick up from where the last teleport finished instead of the first node\n        const targetNode = target._lpa || target.firstChild;\n        if (vnode.shapeFlag & 16 /* ShapeFlags.ARRAY_CHILDREN */) {\n            if (isTeleportDisabled(vnode.props)) {\n                vnode.anchor = hydrateChildren(nextSibling(node), vnode, parentNode(node), parentComponent, parentSuspense, slotScopeIds, optimized);\n                vnode.targetAnchor = targetNode;\n            }\n            else {\n                vnode.anchor = nextSibling(node);\n                // lookahead until we find the target anchor\n                // we cannot rely on return value of hydrateChildren() because there\n                // could be nested teleports\n                let targetAnchor = targetNode;\n                while (targetAnchor) {\n                    targetAnchor = nextSibling(targetAnchor);\n                    if (targetAnchor &&\n                        targetAnchor.nodeType === 8 &&\n                        targetAnchor.data === 'teleport anchor') {\n                        vnode.targetAnchor = targetAnchor;\n                        target._lpa =\n                            vnode.targetAnchor && nextSibling(vnode.targetAnchor);\n                        break;\n                    }\n                }\n                hydrateChildren(targetNode, vnode, target, parentComponent, parentSuspense, slotScopeIds, optimized);\n            }\n        }\n    }\n    return vnode.anchor && nextSibling(vnode.anchor);\n}\n// Force-casted public typing for h and TSX props inference\nconst Teleport = TeleportImpl;\n\nconst Fragment = Symbol((process.env.NODE_ENV !== 'production') ? 'Fragment' : undefined);\nconst Text = Symbol((process.env.NODE_ENV !== 'production') ? 'Text' : undefined);\nconst Comment = Symbol((process.env.NODE_ENV !== 'production') ? 'Comment' : undefined);\nconst Static = Symbol((process.env.NODE_ENV !== 'production') ? 'Static' : undefined);\n// Since v-if and v-for are the two possible ways node structure can dynamically\n// change, once we consider v-if branches and each v-for fragment a block, we\n// can divide a template into nested blocks, and within each block the node\n// structure would be stable. This allows us to skip most children diffing\n// and only worry about the dynamic nodes (indicated by patch flags).\nconst blockStack = [];\nlet currentBlock = null;\n/**\n * Open a block.\n * This must be called before `createBlock`. It cannot be part of `createBlock`\n * because the children of the block are evaluated before `createBlock` itself\n * is called. The generated code typically looks like this:\n *\n * ```js\n * function render() {\n *   return (openBlock(),createBlock('div', null, [...]))\n * }\n * ```\n * disableTracking is true when creating a v-for fragment block, since a v-for\n * fragment always diffs its children.\n *\n * @private\n */\nfunction openBlock(disableTracking = false) {\n    blockStack.push((currentBlock = disableTracking ? null : []));\n}\nfunction closeBlock() {\n    blockStack.pop();\n    currentBlock = blockStack[blockStack.length - 1] || null;\n}\n// Whether we should be tracking dynamic child nodes inside a block.\n// Only tracks when this value is > 0\n// We are not using a simple boolean because this value may need to be\n// incremented/decremented by nested usage of v-once (see below)\nlet isBlockTreeEnabled = 1;\n/**\n * Block tracking sometimes needs to be disabled, for example during the\n * creation of a tree that needs to be cached by v-once. The compiler generates\n * code like this:\n *\n * ``` js\n * _cache[1] || (\n *   setBlockTracking(-1),\n *   _cache[1] = createVNode(...),\n *   setBlockTracking(1),\n *   _cache[1]\n * )\n * ```\n *\n * @private\n */\nfunction setBlockTracking(value) {\n    isBlockTreeEnabled += value;\n}\nfunction setupBlock(vnode) {\n    // save current block children on the block vnode\n    vnode.dynamicChildren =\n        isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;\n    // close block\n    closeBlock();\n    // a block is always going to be patched, so track it as a child of its\n    // parent block\n    if (isBlockTreeEnabled > 0 && currentBlock) {\n        currentBlock.push(vnode);\n    }\n    return vnode;\n}\n/**\n * @private\n */\nfunction createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {\n    return setupBlock(createBaseVNode(type, props, children, patchFlag, dynamicProps, shapeFlag, true /* isBlock */));\n}\n/**\n * Create a block root vnode. Takes the same exact arguments as `createVNode`.\n * A block root keeps track of dynamic nodes within the block in the\n * `dynamicChildren` array.\n *\n * @private\n */\nfunction createBlock(type, props, children, patchFlag, dynamicProps) {\n    return setupBlock(createVNode(type, props, children, patchFlag, dynamicProps, true /* isBlock: prevent a block from tracking itself */));\n}\nfunction isVNode(value) {\n    return value ? value.__v_isVNode === true : false;\n}\nfunction isSameVNodeType(n1, n2) {\n    if ((process.env.NODE_ENV !== 'production') &&\n        n2.shapeFlag & 6 /* ShapeFlags.COMPONENT */ &&\n        hmrDirtyComponents.has(n2.type)) {\n        // HMR only: if the component has been hot-updated, force a reload.\n        return false;\n    }\n    return n1.type === n2.type && n1.key === n2.key;\n}\nlet vnodeArgsTransformer;\n/**\n * Internal API for registering an arguments transform for createVNode\n * used for creating stubs in the test-utils\n * It is *internal* but needs to be exposed for test-utils to pick up proper\n * typings\n */\nfunction transformVNodeArgs(transformer) {\n    vnodeArgsTransformer = transformer;\n}\nconst createVNodeWithArgsTransform = (...args) => {\n    return _createVNode(...(vnodeArgsTransformer\n        ? vnodeArgsTransformer(args, currentRenderingInstance)\n        : args));\n};\nconst InternalObjectKey = `__vInternal`;\nconst normalizeKey = ({ key }) => key != null ? key : null;\nconst normalizeRef = ({ ref, ref_key, ref_for }) => {\n    return (ref != null\n        ? isString(ref) || isRef(ref) || isFunction(ref)\n            ? { i: currentRenderingInstance, r: ref, k: ref_key, f: !!ref_for }\n            : ref\n        : null);\n};\nfunction createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1 /* ShapeFlags.ELEMENT */, isBlockNode = false, needFullChildrenNormalization = false) {\n    const vnode = {\n        __v_isVNode: true,\n        __v_skip: true,\n        type,\n        props,\n        key: props && normalizeKey(props),\n        ref: props && normalizeRef(props),\n        scopeId: currentScopeId,\n        slotScopeIds: null,\n        children,\n        component: null,\n        suspense: null,\n        ssContent: null,\n        ssFallback: null,\n        dirs: null,\n        transition: null,\n        el: null,\n        anchor: null,\n        target: null,\n        targetAnchor: null,\n        staticCount: 0,\n        shapeFlag,\n        patchFlag,\n        dynamicProps,\n        dynamicChildren: null,\n        appContext: null\n    };\n    if (needFullChildrenNormalization) {\n        normalizeChildren(vnode, children);\n        // normalize suspense children\n        if (shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n            type.normalize(vnode);\n        }\n    }\n    else if (children) {\n        // compiled element vnode - if children is passed, only possible types are\n        // string or Array.\n        vnode.shapeFlag |= isString(children)\n            ? 8 /* ShapeFlags.TEXT_CHILDREN */\n            : 16 /* ShapeFlags.ARRAY_CHILDREN */;\n    }\n    // validate key\n    if ((process.env.NODE_ENV !== 'production') && vnode.key !== vnode.key) {\n        warn(`VNode created with invalid key (NaN). VNode type:`, vnode.type);\n    }\n    // track vnode for block tree\n    if (isBlockTreeEnabled > 0 &&\n        // avoid a block node from tracking itself\n        !isBlockNode &&\n        // has current parent block\n        currentBlock &&\n        // presence of a patch flag indicates this node needs patching on updates.\n        // component nodes also should always be patched, because even if the\n        // component doesn't need to update, it needs to persist the instance on to\n        // the next vnode so that it can be properly unmounted later.\n        (vnode.patchFlag > 0 || shapeFlag & 6 /* ShapeFlags.COMPONENT */) &&\n        // the EVENTS flag is only for hydration and if it is the only flag, the\n        // vnode should not be considered dynamic due to handler caching.\n        vnode.patchFlag !== 32 /* PatchFlags.HYDRATE_EVENTS */) {\n        currentBlock.push(vnode);\n    }\n    return vnode;\n}\nconst createVNode = ((process.env.NODE_ENV !== 'production') ? createVNodeWithArgsTransform : _createVNode);\nfunction _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {\n    if (!type || type === NULL_DYNAMIC_COMPONENT) {\n        if ((process.env.NODE_ENV !== 'production') && !type) {\n            warn(`Invalid vnode type when creating vnode: ${type}.`);\n        }\n        type = Comment;\n    }\n    if (isVNode(type)) {\n        // createVNode receiving an existing vnode. This happens in cases like\n        // <component :is=\"vnode\"/>\n        // #2078 make sure to merge refs during the clone instead of overwriting it\n        const cloned = cloneVNode(type, props, true /* mergeRef: true */);\n        if (children) {\n            normalizeChildren(cloned, children);\n        }\n        if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {\n            if (cloned.shapeFlag & 6 /* ShapeFlags.COMPONENT */) {\n                currentBlock[currentBlock.indexOf(type)] = cloned;\n            }\n            else {\n                currentBlock.push(cloned);\n            }\n        }\n        cloned.patchFlag |= -2 /* PatchFlags.BAIL */;\n        return cloned;\n    }\n    // class component normalization.\n    if (isClassComponent(type)) {\n        type = type.__vccOpts;\n    }\n    // class & style normalization.\n    if (props) {\n        // for reactive or proxy objects, we need to clone it to enable mutation.\n        props = guardReactiveProps(props);\n        let { class: klass, style } = props;\n        if (klass && !isString(klass)) {\n            props.class = normalizeClass(klass);\n        }\n        if (isObject(style)) {\n            // reactive state objects need to be cloned since they are likely to be\n            // mutated\n            if (isProxy(style) && !isArray(style)) {\n                style = extend({}, style);\n            }\n            props.style = normalizeStyle(style);\n        }\n    }\n    // encode the vnode type information into a bitmap\n    const shapeFlag = isString(type)\n        ? 1 /* ShapeFlags.ELEMENT */\n        : isSuspense(type)\n            ? 128 /* ShapeFlags.SUSPENSE */\n            : isTeleport(type)\n                ? 64 /* ShapeFlags.TELEPORT */\n                : isObject(type)\n                    ? 4 /* ShapeFlags.STATEFUL_COMPONENT */\n                    : isFunction(type)\n                        ? 2 /* ShapeFlags.FUNCTIONAL_COMPONENT */\n                        : 0;\n    if ((process.env.NODE_ENV !== 'production') && shapeFlag & 4 /* ShapeFlags.STATEFUL_COMPONENT */ && isProxy(type)) {\n        type = toRaw(type);\n        warn(`Vue received a Component which was made a reactive object. This can ` +\n            `lead to unnecessary performance overhead, and should be avoided by ` +\n            `marking the component with \\`markRaw\\` or using \\`shallowRef\\` ` +\n            `instead of \\`ref\\`.`, `\\nComponent that was made reactive: `, type);\n    }\n    return createBaseVNode(type, props, children, patchFlag, dynamicProps, shapeFlag, isBlockNode, true);\n}\nfunction guardReactiveProps(props) {\n    if (!props)\n        return null;\n    return isProxy(props) || InternalObjectKey in props\n        ? extend({}, props)\n        : props;\n}\nfunction cloneVNode(vnode, extraProps, mergeRef = false) {\n    // This is intentionally NOT using spread or extend to avoid the runtime\n    // key enumeration cost.\n    const { props, ref, patchFlag, children } = vnode;\n    const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;\n    const cloned = {\n        __v_isVNode: true,\n        __v_skip: true,\n        type: vnode.type,\n        props: mergedProps,\n        key: mergedProps && normalizeKey(mergedProps),\n        ref: extraProps && extraProps.ref\n            ? // #2078 in the case of <component :is=\"vnode\" ref=\"extra\"/>\n                // if the vnode itself already has a ref, cloneVNode will need to merge\n                // the refs so the single vnode can be set on multiple refs\n                mergeRef && ref\n                    ? isArray(ref)\n                        ? ref.concat(normalizeRef(extraProps))\n                        : [ref, normalizeRef(extraProps)]\n                    : normalizeRef(extraProps)\n            : ref,\n        scopeId: vnode.scopeId,\n        slotScopeIds: vnode.slotScopeIds,\n        children: (process.env.NODE_ENV !== 'production') && patchFlag === -1 /* PatchFlags.HOISTED */ && isArray(children)\n            ? children.map(deepCloneVNode)\n            : children,\n        target: vnode.target,\n        targetAnchor: vnode.targetAnchor,\n        staticCount: vnode.staticCount,\n        shapeFlag: vnode.shapeFlag,\n        // if the vnode is cloned with extra props, we can no longer assume its\n        // existing patch flag to be reliable and need to add the FULL_PROPS flag.\n        // note: preserve flag for fragments since they use the flag for children\n        // fast paths only.\n        patchFlag: extraProps && vnode.type !== Fragment\n            ? patchFlag === -1 // hoisted node\n                ? 16 /* PatchFlags.FULL_PROPS */\n                : patchFlag | 16 /* PatchFlags.FULL_PROPS */\n            : patchFlag,\n        dynamicProps: vnode.dynamicProps,\n        dynamicChildren: vnode.dynamicChildren,\n        appContext: vnode.appContext,\n        dirs: vnode.dirs,\n        transition: vnode.transition,\n        // These should technically only be non-null on mounted VNodes. However,\n        // they *should* be copied for kept-alive vnodes. So we just always copy\n        // them since them being non-null during a mount doesn't affect the logic as\n        // they will simply be overwritten.\n        component: vnode.component,\n        suspense: vnode.suspense,\n        ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),\n        ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),\n        el: vnode.el,\n        anchor: vnode.anchor\n    };\n    return cloned;\n}\n/**\n * Dev only, for HMR of hoisted vnodes reused in v-for\n * https://github.com/vitejs/vite/issues/2022\n */\nfunction deepCloneVNode(vnode) {\n    const cloned = cloneVNode(vnode);\n    if (isArray(vnode.children)) {\n        cloned.children = vnode.children.map(deepCloneVNode);\n    }\n    return cloned;\n}\n/**\n * @private\n */\nfunction createTextVNode(text = ' ', flag = 0) {\n    return createVNode(Text, null, text, flag);\n}\n/**\n * @private\n */\nfunction createStaticVNode(content, numberOfNodes) {\n    // A static vnode can contain multiple stringified elements, and the number\n    // of elements is necessary for hydration.\n    const vnode = createVNode(Static, null, content);\n    vnode.staticCount = numberOfNodes;\n    return vnode;\n}\n/**\n * @private\n */\nfunction createCommentVNode(text = '', \n// when used as the v-else branch, the comment node must be created as a\n// block to ensure correct updates.\nasBlock = false) {\n    return asBlock\n        ? (openBlock(), createBlock(Comment, null, text))\n        : createVNode(Comment, null, text);\n}\nfunction normalizeVNode(child) {\n    if (child == null || typeof child === 'boolean') {\n        // empty placeholder\n        return createVNode(Comment);\n    }\n    else if (isArray(child)) {\n        // fragment\n        return createVNode(Fragment, null, \n        // #3666, avoid reference pollution when reusing vnode\n        child.slice());\n    }\n    else if (typeof child === 'object') {\n        // already vnode, this should be the most common since compiled templates\n        // always produce all-vnode children arrays\n        return cloneIfMounted(child);\n    }\n    else {\n        // strings and numbers\n        return createVNode(Text, null, String(child));\n    }\n}\n// optimized normalization for template-compiled render fns\nfunction cloneIfMounted(child) {\n    return (child.el === null && child.patchFlag !== -1 /* PatchFlags.HOISTED */) ||\n        child.memo\n        ? child\n        : cloneVNode(child);\n}\nfunction normalizeChildren(vnode, children) {\n    let type = 0;\n    const { shapeFlag } = vnode;\n    if (children == null) {\n        children = null;\n    }\n    else if (isArray(children)) {\n        type = 16 /* ShapeFlags.ARRAY_CHILDREN */;\n    }\n    else if (typeof children === 'object') {\n        if (shapeFlag & (1 /* ShapeFlags.ELEMENT */ | 64 /* ShapeFlags.TELEPORT */)) {\n            // Normalize slot to plain children for plain element and Teleport\n            const slot = children.default;\n            if (slot) {\n                // _c marker is added by withCtx() indicating this is a compiled slot\n                slot._c && (slot._d = false);\n                normalizeChildren(vnode, slot());\n                slot._c && (slot._d = true);\n            }\n            return;\n        }\n        else {\n            type = 32 /* ShapeFlags.SLOTS_CHILDREN */;\n            const slotFlag = children._;\n            if (!slotFlag && !(InternalObjectKey in children)) {\n                children._ctx = currentRenderingInstance;\n            }\n            else if (slotFlag === 3 /* SlotFlags.FORWARDED */ && currentRenderingInstance) {\n                // a child component receives forwarded slots from the parent.\n                // its slot type is determined by its parent's slot type.\n                if (currentRenderingInstance.slots._ === 1 /* SlotFlags.STABLE */) {\n                    children._ = 1 /* SlotFlags.STABLE */;\n                }\n                else {\n                    children._ = 2 /* SlotFlags.DYNAMIC */;\n                    vnode.patchFlag |= 1024 /* PatchFlags.DYNAMIC_SLOTS */;\n                }\n            }\n        }\n    }\n    else if (isFunction(children)) {\n        children = { default: children, _ctx: currentRenderingInstance };\n        type = 32 /* ShapeFlags.SLOTS_CHILDREN */;\n    }\n    else {\n        children = String(children);\n        // force teleport children to array so it can be moved around\n        if (shapeFlag & 64 /* ShapeFlags.TELEPORT */) {\n            type = 16 /* ShapeFlags.ARRAY_CHILDREN */;\n            children = [createTextVNode(children)];\n        }\n        else {\n            type = 8 /* ShapeFlags.TEXT_CHILDREN */;\n        }\n    }\n    vnode.children = children;\n    vnode.shapeFlag |= type;\n}\nfunction mergeProps(...args) {\n    const ret = {};\n    for (let i = 0; i < args.length; i++) {\n        const toMerge = args[i];\n        for (const key in toMerge) {\n            if (key === 'class') {\n                if (ret.class !== toMerge.class) {\n                    ret.class = normalizeClass([ret.class, toMerge.class]);\n                }\n            }\n            else if (key === 'style') {\n                ret.style = normalizeStyle([ret.style, toMerge.style]);\n            }\n            else if (isOn(key)) {\n                const existing = ret[key];\n                const incoming = toMerge[key];\n                if (incoming &&\n                    existing !== incoming &&\n                    !(isArray(existing) && existing.includes(incoming))) {\n                    ret[key] = existing\n                        ? [].concat(existing, incoming)\n                        : incoming;\n                }\n            }\n            else if (key !== '') {\n                ret[key] = toMerge[key];\n            }\n        }\n    }\n    return ret;\n}\nfunction invokeVNodeHook(hook, instance, vnode, prevVNode = null) {\n    callWithAsyncErrorHandling(hook, instance, 7 /* ErrorCodes.VNODE_HOOK */, [\n        vnode,\n        prevVNode\n    ]);\n}\n\nconst emptyAppContext = createAppContext();\nlet uid$1 = 0;\nfunction createComponentInstance(vnode, parent, suspense) {\n    const type = vnode.type;\n    // inherit parent app context - or - if root, adopt from root vnode\n    const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;\n    const instance = {\n        uid: uid$1++,\n        vnode,\n        type,\n        parent,\n        appContext,\n        root: null,\n        next: null,\n        subTree: null,\n        effect: null,\n        update: null,\n        scope: new EffectScope(true /* detached */),\n        render: null,\n        proxy: null,\n        exposed: null,\n        exposeProxy: null,\n        withProxy: null,\n        provides: parent ? parent.provides : Object.create(appContext.provides),\n        accessCache: null,\n        renderCache: [],\n        // local resolved assets\n        components: null,\n        directives: null,\n        // resolved props and emits options\n        propsOptions: normalizePropsOptions(type, appContext),\n        emitsOptions: normalizeEmitsOptions(type, appContext),\n        // emit\n        emit: null,\n        emitted: null,\n        // props default value\n        propsDefaults: EMPTY_OBJ,\n        // inheritAttrs\n        inheritAttrs: type.inheritAttrs,\n        // state\n        ctx: EMPTY_OBJ,\n        data: EMPTY_OBJ,\n        props: EMPTY_OBJ,\n        attrs: EMPTY_OBJ,\n        slots: EMPTY_OBJ,\n        refs: EMPTY_OBJ,\n        setupState: EMPTY_OBJ,\n        setupContext: null,\n        // suspense related\n        suspense,\n        suspenseId: suspense ? suspense.pendingId : 0,\n        asyncDep: null,\n        asyncResolved: false,\n        // lifecycle hooks\n        // not using enums here because it results in computed properties\n        isMounted: false,\n        isUnmounted: false,\n        isDeactivated: false,\n        bc: null,\n        c: null,\n        bm: null,\n        m: null,\n        bu: null,\n        u: null,\n        um: null,\n        bum: null,\n        da: null,\n        a: null,\n        rtg: null,\n        rtc: null,\n        ec: null,\n        sp: null\n    };\n    if ((process.env.NODE_ENV !== 'production')) {\n        instance.ctx = createDevRenderContext(instance);\n    }\n    else {\n        instance.ctx = { _: instance };\n    }\n    instance.root = parent ? parent.root : instance;\n    instance.emit = emit$1.bind(null, instance);\n    // apply custom element special handling\n    if (vnode.ce) {\n        vnode.ce(instance);\n    }\n    return instance;\n}\nlet currentInstance = null;\nconst getCurrentInstance = () => currentInstance || currentRenderingInstance;\nconst setCurrentInstance = (instance) => {\n    currentInstance = instance;\n    instance.scope.on();\n};\nconst unsetCurrentInstance = () => {\n    currentInstance && currentInstance.scope.off();\n    currentInstance = null;\n};\nconst isBuiltInTag = /*#__PURE__*/ makeMap('slot,component');\nfunction validateComponentName(name, config) {\n    const appIsNativeTag = config.isNativeTag || NO;\n    if (isBuiltInTag(name) || appIsNativeTag(name)) {\n        warn('Do not use built-in or reserved HTML elements as component id: ' + name);\n    }\n}\nfunction isStatefulComponent(instance) {\n    return instance.vnode.shapeFlag & 4 /* ShapeFlags.STATEFUL_COMPONENT */;\n}\nlet isInSSRComponentSetup = false;\nfunction setupComponent(instance, isSSR = false) {\n    isInSSRComponentSetup = isSSR;\n    const { props, children } = instance.vnode;\n    const isStateful = isStatefulComponent(instance);\n    initProps(instance, props, isStateful, isSSR);\n    initSlots(instance, children);\n    const setupResult = isStateful\n        ? setupStatefulComponent(instance, isSSR)\n        : undefined;\n    isInSSRComponentSetup = false;\n    return setupResult;\n}\nfunction setupStatefulComponent(instance, isSSR) {\n    var _a;\n    const Component = instance.type;\n    if ((process.env.NODE_ENV !== 'production')) {\n        if (Component.name) {\n            validateComponentName(Component.name, instance.appContext.config);\n        }\n        if (Component.components) {\n            const names = Object.keys(Component.components);\n            for (let i = 0; i < names.length; i++) {\n                validateComponentName(names[i], instance.appContext.config);\n            }\n        }\n        if (Component.directives) {\n            const names = Object.keys(Component.directives);\n            for (let i = 0; i < names.length; i++) {\n                validateDirectiveName(names[i]);\n            }\n        }\n        if (Component.compilerOptions && isRuntimeOnly()) {\n            warn(`\"compilerOptions\" is only supported when using a build of Vue that ` +\n                `includes the runtime compiler. Since you are using a runtime-only ` +\n                `build, the options should be passed via your build tool config instead.`);\n        }\n    }\n    // 0. create render proxy property access cache\n    instance.accessCache = Object.create(null);\n    // 1. create public instance / render proxy\n    // also mark it raw so it's never observed\n    instance.proxy = markRaw(new Proxy(instance.ctx, PublicInstanceProxyHandlers));\n    if ((process.env.NODE_ENV !== 'production')) {\n        exposePropsOnRenderContext(instance);\n    }\n    // 2. call setup()\n    const { setup } = Component;\n    if (setup) {\n        const setupContext = (instance.setupContext =\n            setup.length > 1 ? createSetupContext(instance) : null);\n        setCurrentInstance(instance);\n        pauseTracking();\n        const setupResult = callWithErrorHandling(setup, instance, 0 /* ErrorCodes.SETUP_FUNCTION */, [(process.env.NODE_ENV !== 'production') ? shallowReadonly(instance.props) : instance.props, setupContext]);\n        resetTracking();\n        unsetCurrentInstance();\n        if (isPromise(setupResult)) {\n            setupResult.then(unsetCurrentInstance, unsetCurrentInstance);\n            if (isSSR) {\n                // return the promise so server-renderer can wait on it\n                return setupResult\n                    .then((resolvedResult) => {\n                    handleSetupResult(instance, resolvedResult, isSSR);\n                })\n                    .catch(e => {\n                    handleError(e, instance, 0 /* ErrorCodes.SETUP_FUNCTION */);\n                });\n            }\n            else {\n                // async setup returned Promise.\n                // bail here and wait for re-entry.\n                instance.asyncDep = setupResult;\n                if ((process.env.NODE_ENV !== 'production') && !instance.suspense) {\n                    const name = (_a = Component.name) !== null && _a !== void 0 ? _a : 'Anonymous';\n                    warn(`Component <${name}>: setup function returned a promise, but no ` +\n                        `<Suspense> boundary was found in the parent component tree. ` +\n                        `A component with async setup() must be nested in a <Suspense> ` +\n                        `in order to be rendered.`);\n                }\n            }\n        }\n        else {\n            handleSetupResult(instance, setupResult, isSSR);\n        }\n    }\n    else {\n        finishComponentSetup(instance, isSSR);\n    }\n}\nfunction handleSetupResult(instance, setupResult, isSSR) {\n    if (isFunction(setupResult)) {\n        // setup returned an inline render function\n        if (instance.type.__ssrInlineRender) {\n            // when the function's name is `ssrRender` (compiled by SFC inline mode),\n            // set it as ssrRender instead.\n            instance.ssrRender = setupResult;\n        }\n        else {\n            instance.render = setupResult;\n        }\n    }\n    else if (isObject(setupResult)) {\n        if ((process.env.NODE_ENV !== 'production') && isVNode(setupResult)) {\n            warn(`setup() should not return VNodes directly - ` +\n                `return a render function instead.`);\n        }\n        // setup returned bindings.\n        // assuming a render function compiled from template is present.\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\n            instance.devtoolsRawSetupState = setupResult;\n        }\n        instance.setupState = proxyRefs(setupResult);\n        if ((process.env.NODE_ENV !== 'production')) {\n            exposeSetupStateOnRenderContext(instance);\n        }\n    }\n    else if ((process.env.NODE_ENV !== 'production') && setupResult !== undefined) {\n        warn(`setup() should return an object. Received: ${setupResult === null ? 'null' : typeof setupResult}`);\n    }\n    finishComponentSetup(instance, isSSR);\n}\nlet compile;\nlet installWithProxy;\n/**\n * For runtime-dom to register the compiler.\n * Note the exported method uses any to avoid d.ts relying on the compiler types.\n */\nfunction registerRuntimeCompiler(_compile) {\n    compile = _compile;\n    installWithProxy = i => {\n        if (i.render._rc) {\n            i.withProxy = new Proxy(i.ctx, RuntimeCompiledPublicInstanceProxyHandlers);\n        }\n    };\n}\n// dev only\nconst isRuntimeOnly = () => !compile;\nfunction finishComponentSetup(instance, isSSR, skipOptions) {\n    const Component = instance.type;\n    // template / render function normalization\n    // could be already set when returned from setup()\n    if (!instance.render) {\n        // only do on-the-fly compile if not in SSR - SSR on-the-fly compilation\n        // is done by server-renderer\n        if (!isSSR && compile && !Component.render) {\n            const template = Component.template ||\n                resolveMergedOptions(instance).template;\n            if (template) {\n                if ((process.env.NODE_ENV !== 'production')) {\n                    startMeasure(instance, `compile`);\n                }\n                const { isCustomElement, compilerOptions } = instance.appContext.config;\n                const { delimiters, compilerOptions: componentCompilerOptions } = Component;\n                const finalCompilerOptions = extend(extend({\n                    isCustomElement,\n                    delimiters\n                }, compilerOptions), componentCompilerOptions);\n                Component.render = compile(template, finalCompilerOptions);\n                if ((process.env.NODE_ENV !== 'production')) {\n                    endMeasure(instance, `compile`);\n                }\n            }\n        }\n        instance.render = (Component.render || NOOP);\n        // for runtime-compiled render functions using `with` blocks, the render\n        // proxy used needs a different `has` handler which is more performant and\n        // also only allows a whitelist of globals to fallthrough.\n        if (installWithProxy) {\n            installWithProxy(instance);\n        }\n    }\n    // support for 2.x options\n    if (__VUE_OPTIONS_API__ && !(false )) {\n        setCurrentInstance(instance);\n        pauseTracking();\n        applyOptions(instance);\n        resetTracking();\n        unsetCurrentInstance();\n    }\n    // warn missing template/render\n    // the runtime compilation of template in SSR is done by server-render\n    if ((process.env.NODE_ENV !== 'production') && !Component.render && instance.render === NOOP && !isSSR) {\n        /* istanbul ignore if */\n        if (!compile && Component.template) {\n            warn(`Component provided template option but ` +\n                `runtime compilation is not supported in this build of Vue.` +\n                (` Configure your bundler to alias \"vue\" to \"vue/dist/vue.esm-bundler.js\".`\n                    ) /* should not happen */);\n        }\n        else {\n            warn(`Component is missing template or render function.`);\n        }\n    }\n}\nfunction createAttrsProxy(instance) {\n    return new Proxy(instance.attrs, (process.env.NODE_ENV !== 'production')\n        ? {\n            get(target, key) {\n                markAttrsAccessed();\n                track(instance, \"get\" /* TrackOpTypes.GET */, '$attrs');\n                return target[key];\n            },\n            set() {\n                warn(`setupContext.attrs is readonly.`);\n                return false;\n            },\n            deleteProperty() {\n                warn(`setupContext.attrs is readonly.`);\n                return false;\n            }\n        }\n        : {\n            get(target, key) {\n                track(instance, \"get\" /* TrackOpTypes.GET */, '$attrs');\n                return target[key];\n            }\n        });\n}\nfunction createSetupContext(instance) {\n    const expose = exposed => {\n        if ((process.env.NODE_ENV !== 'production') && instance.exposed) {\n            warn(`expose() should be called only once per setup().`);\n        }\n        instance.exposed = exposed || {};\n    };\n    let attrs;\n    if ((process.env.NODE_ENV !== 'production')) {\n        // We use getters in dev in case libs like test-utils overwrite instance\n        // properties (overwrites should not be done in prod)\n        return Object.freeze({\n            get attrs() {\n                return attrs || (attrs = createAttrsProxy(instance));\n            },\n            get slots() {\n                return shallowReadonly(instance.slots);\n            },\n            get emit() {\n                return (event, ...args) => instance.emit(event, ...args);\n            },\n            expose\n        });\n    }\n    else {\n        return {\n            get attrs() {\n                return attrs || (attrs = createAttrsProxy(instance));\n            },\n            slots: instance.slots,\n            emit: instance.emit,\n            expose\n        };\n    }\n}\nfunction getExposeProxy(instance) {\n    if (instance.exposed) {\n        return (instance.exposeProxy ||\n            (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {\n                get(target, key) {\n                    if (key in target) {\n                        return target[key];\n                    }\n                    else if (key in publicPropertiesMap) {\n                        return publicPropertiesMap[key](instance);\n                    }\n                }\n            })));\n    }\n}\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str) => str.replace(classifyRE, c => c.toUpperCase()).replace(/[-_]/g, '');\nfunction getComponentName(Component, includeInferred = true) {\n    return isFunction(Component)\n        ? Component.displayName || Component.name\n        : Component.name || (includeInferred && Component.__name);\n}\n/* istanbul ignore next */\nfunction formatComponentName(instance, Component, isRoot = false) {\n    let name = getComponentName(Component);\n    if (!name && Component.__file) {\n        const match = Component.__file.match(/([^/\\\\]+)\\.\\w+$/);\n        if (match) {\n            name = match[1];\n        }\n    }\n    if (!name && instance && instance.parent) {\n        // try to infer the name based on reverse resolution\n        const inferFromRegistry = (registry) => {\n            for (const key in registry) {\n                if (registry[key] === Component) {\n                    return key;\n                }\n            }\n        };\n        name =\n            inferFromRegistry(instance.components ||\n                instance.parent.type.components) || inferFromRegistry(instance.appContext.components);\n    }\n    return name ? classify(name) : isRoot ? `App` : `Anonymous`;\n}\nfunction isClassComponent(value) {\n    return isFunction(value) && '__vccOpts' in value;\n}\n\nconst computed = ((getterOrOptions, debugOptions) => {\n    // @ts-ignore\n    return computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);\n});\n\n// dev only\nconst warnRuntimeUsage = (method) => warn(`${method}() is a compiler-hint helper that is only usable inside ` +\n    `<script setup> of a single file component. Its arguments should be ` +\n    `compiled away and passing it at runtime has no effect.`);\n// implementation\nfunction defineProps() {\n    if ((process.env.NODE_ENV !== 'production')) {\n        warnRuntimeUsage(`defineProps`);\n    }\n    return null;\n}\n// implementation\nfunction defineEmits() {\n    if ((process.env.NODE_ENV !== 'production')) {\n        warnRuntimeUsage(`defineEmits`);\n    }\n    return null;\n}\n/**\n * Vue `<script setup>` compiler macro for declaring a component's exposed\n * instance properties when it is accessed by a parent component via template\n * refs.\n *\n * `<script setup>` components are closed by default - i.e. variables inside\n * the `<script setup>` scope is not exposed to parent unless explicitly exposed\n * via `defineExpose`.\n *\n * This is only usable inside `<script setup>`, is compiled away in the\n * output and should **not** be actually called at runtime.\n */\nfunction defineExpose(exposed) {\n    if ((process.env.NODE_ENV !== 'production')) {\n        warnRuntimeUsage(`defineExpose`);\n    }\n}\n/**\n * Vue `<script setup>` compiler macro for providing props default values when\n * using type-based `defineProps` declaration.\n *\n * Example usage:\n * ```ts\n * withDefaults(defineProps<{\n *   size?: number\n *   labels?: string[]\n * }>(), {\n *   size: 3,\n *   labels: () => ['default label']\n * })\n * ```\n *\n * This is only usable inside `<script setup>`, is compiled away in the output\n * and should **not** be actually called at runtime.\n */\nfunction withDefaults(props, defaults) {\n    if ((process.env.NODE_ENV !== 'production')) {\n        warnRuntimeUsage(`withDefaults`);\n    }\n    return null;\n}\nfunction useSlots() {\n    return getContext().slots;\n}\nfunction useAttrs() {\n    return getContext().attrs;\n}\nfunction getContext() {\n    const i = getCurrentInstance();\n    if ((process.env.NODE_ENV !== 'production') && !i) {\n        warn(`useContext() called without active instance.`);\n    }\n    return i.setupContext || (i.setupContext = createSetupContext(i));\n}\n/**\n * Runtime helper for merging default declarations. Imported by compiled code\n * only.\n * @internal\n */\nfunction mergeDefaults(raw, defaults) {\n    const props = isArray(raw)\n        ? raw.reduce((normalized, p) => ((normalized[p] = {}), normalized), {})\n        : raw;\n    for (const key in defaults) {\n        const opt = props[key];\n        if (opt) {\n            if (isArray(opt) || isFunction(opt)) {\n                props[key] = { type: opt, default: defaults[key] };\n            }\n            else {\n                opt.default = defaults[key];\n            }\n        }\n        else if (opt === null) {\n            props[key] = { default: defaults[key] };\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`props default key \"${key}\" has no corresponding declaration.`);\n        }\n    }\n    return props;\n}\n/**\n * Used to create a proxy for the rest element when destructuring props with\n * defineProps().\n * @internal\n */\nfunction createPropsRestProxy(props, excludedKeys) {\n    const ret = {};\n    for (const key in props) {\n        if (!excludedKeys.includes(key)) {\n            Object.defineProperty(ret, key, {\n                enumerable: true,\n                get: () => props[key]\n            });\n        }\n    }\n    return ret;\n}\n/**\n * `<script setup>` helper for persisting the current instance context over\n * async/await flows.\n *\n * `@vue/compiler-sfc` converts the following:\n *\n * ```ts\n * const x = await foo()\n * ```\n *\n * into:\n *\n * ```ts\n * let __temp, __restore\n * const x = (([__temp, __restore] = withAsyncContext(() => foo())),__temp=await __temp,__restore(),__temp)\n * ```\n * @internal\n */\nfunction withAsyncContext(getAwaitable) {\n    const ctx = getCurrentInstance();\n    if ((process.env.NODE_ENV !== 'production') && !ctx) {\n        warn(`withAsyncContext called without active current instance. ` +\n            `This is likely a bug.`);\n    }\n    let awaitable = getAwaitable();\n    unsetCurrentInstance();\n    if (isPromise(awaitable)) {\n        awaitable = awaitable.catch(e => {\n            setCurrentInstance(ctx);\n            throw e;\n        });\n    }\n    return [awaitable, () => setCurrentInstance(ctx)];\n}\n\n// Actual implementation\nfunction h(type, propsOrChildren, children) {\n    const l = arguments.length;\n    if (l === 2) {\n        if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n            // single vnode without props\n            if (isVNode(propsOrChildren)) {\n                return createVNode(type, null, [propsOrChildren]);\n            }\n            // props without children\n            return createVNode(type, propsOrChildren);\n        }\n        else {\n            // omit props\n            return createVNode(type, null, propsOrChildren);\n        }\n    }\n    else {\n        if (l > 3) {\n            children = Array.prototype.slice.call(arguments, 2);\n        }\n        else if (l === 3 && isVNode(children)) {\n            children = [children];\n        }\n        return createVNode(type, propsOrChildren, children);\n    }\n}\n\nconst ssrContextKey = Symbol((process.env.NODE_ENV !== 'production') ? `ssrContext` : ``);\nconst useSSRContext = () => {\n    {\n        const ctx = inject(ssrContextKey);\n        if (!ctx) {\n            warn(`Server rendering context not provided. Make sure to only call ` +\n                `useSSRContext() conditionally in the server build.`);\n        }\n        return ctx;\n    }\n};\n\nfunction isShallow(value) {\n    return !!(value && value[\"__v_isShallow\" /* ReactiveFlags.IS_SHALLOW */]);\n}\n\nfunction initCustomFormatter() {\n    /* eslint-disable no-restricted-globals */\n    if (!(process.env.NODE_ENV !== 'production') || typeof window === 'undefined') {\n        return;\n    }\n    const vueStyle = { style: 'color:#3ba776' };\n    const numberStyle = { style: 'color:#0b1bc9' };\n    const stringStyle = { style: 'color:#b62e24' };\n    const keywordStyle = { style: 'color:#9d288c' };\n    // custom formatter for Chrome\n    // https://www.mattzeunert.com/2016/02/19/custom-chrome-devtools-object-formatters.html\n    const formatter = {\n        header(obj) {\n            // TODO also format ComponentPublicInstance & ctx.slots/attrs in setup\n            if (!isObject(obj)) {\n                return null;\n            }\n            if (obj.__isVue) {\n                return ['div', vueStyle, `VueInstance`];\n            }\n            else if (isRef(obj)) {\n                return [\n                    'div',\n                    {},\n                    ['span', vueStyle, genRefFlag(obj)],\n                    '<',\n                    formatValue(obj.value),\n                    `>`\n                ];\n            }\n            else if (isReactive(obj)) {\n                return [\n                    'div',\n                    {},\n                    ['span', vueStyle, isShallow(obj) ? 'ShallowReactive' : 'Reactive'],\n                    '<',\n                    formatValue(obj),\n                    `>${isReadonly(obj) ? ` (readonly)` : ``}`\n                ];\n            }\n            else if (isReadonly(obj)) {\n                return [\n                    'div',\n                    {},\n                    ['span', vueStyle, isShallow(obj) ? 'ShallowReadonly' : 'Readonly'],\n                    '<',\n                    formatValue(obj),\n                    '>'\n                ];\n            }\n            return null;\n        },\n        hasBody(obj) {\n            return obj && obj.__isVue;\n        },\n        body(obj) {\n            if (obj && obj.__isVue) {\n                return [\n                    'div',\n                    {},\n                    ...formatInstance(obj.$)\n                ];\n            }\n        }\n    };\n    function formatInstance(instance) {\n        const blocks = [];\n        if (instance.type.props && instance.props) {\n            blocks.push(createInstanceBlock('props', toRaw(instance.props)));\n        }\n        if (instance.setupState !== EMPTY_OBJ) {\n            blocks.push(createInstanceBlock('setup', instance.setupState));\n        }\n        if (instance.data !== EMPTY_OBJ) {\n            blocks.push(createInstanceBlock('data', toRaw(instance.data)));\n        }\n        const computed = extractKeys(instance, 'computed');\n        if (computed) {\n            blocks.push(createInstanceBlock('computed', computed));\n        }\n        const injected = extractKeys(instance, 'inject');\n        if (injected) {\n            blocks.push(createInstanceBlock('injected', injected));\n        }\n        blocks.push([\n            'div',\n            {},\n            [\n                'span',\n                {\n                    style: keywordStyle.style + ';opacity:0.66'\n                },\n                '$ (internal): '\n            ],\n            ['object', { object: instance }]\n        ]);\n        return blocks;\n    }\n    function createInstanceBlock(type, target) {\n        target = extend({}, target);\n        if (!Object.keys(target).length) {\n            return ['span', {}];\n        }\n        return [\n            'div',\n            { style: 'line-height:1.25em;margin-bottom:0.6em' },\n            [\n                'div',\n                {\n                    style: 'color:#476582'\n                },\n                type\n            ],\n            [\n                'div',\n                {\n                    style: 'padding-left:1.25em'\n                },\n                ...Object.keys(target).map(key => {\n                    return [\n                        'div',\n                        {},\n                        ['span', keywordStyle, key + ': '],\n                        formatValue(target[key], false)\n                    ];\n                })\n            ]\n        ];\n    }\n    function formatValue(v, asRaw = true) {\n        if (typeof v === 'number') {\n            return ['span', numberStyle, v];\n        }\n        else if (typeof v === 'string') {\n            return ['span', stringStyle, JSON.stringify(v)];\n        }\n        else if (typeof v === 'boolean') {\n            return ['span', keywordStyle, v];\n        }\n        else if (isObject(v)) {\n            return ['object', { object: asRaw ? toRaw(v) : v }];\n        }\n        else {\n            return ['span', stringStyle, String(v)];\n        }\n    }\n    function extractKeys(instance, type) {\n        const Comp = instance.type;\n        if (isFunction(Comp)) {\n            return;\n        }\n        const extracted = {};\n        for (const key in instance.ctx) {\n            if (isKeyOfType(Comp, key, type)) {\n                extracted[key] = instance.ctx[key];\n            }\n        }\n        return extracted;\n    }\n    function isKeyOfType(Comp, key, type) {\n        const opts = Comp[type];\n        if ((isArray(opts) && opts.includes(key)) ||\n            (isObject(opts) && key in opts)) {\n            return true;\n        }\n        if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {\n            return true;\n        }\n        if (Comp.mixins && Comp.mixins.some(m => isKeyOfType(m, key, type))) {\n            return true;\n        }\n    }\n    function genRefFlag(v) {\n        if (isShallow(v)) {\n            return `ShallowRef`;\n        }\n        if (v.effect) {\n            return `ComputedRef`;\n        }\n        return `Ref`;\n    }\n    if (window.devtoolsFormatters) {\n        window.devtoolsFormatters.push(formatter);\n    }\n    else {\n        window.devtoolsFormatters = [formatter];\n    }\n}\n\nfunction withMemo(memo, render, cache, index) {\n    const cached = cache[index];\n    if (cached && isMemoSame(cached, memo)) {\n        return cached;\n    }\n    const ret = render();\n    // shallow clone\n    ret.memo = memo.slice();\n    return (cache[index] = ret);\n}\nfunction isMemoSame(cached, memo) {\n    const prev = cached.memo;\n    if (prev.length != memo.length) {\n        return false;\n    }\n    for (let i = 0; i < prev.length; i++) {\n        if (hasChanged(prev[i], memo[i])) {\n            return false;\n        }\n    }\n    // make sure to let parent block track it when returning cached\n    if (isBlockTreeEnabled > 0 && currentBlock) {\n        currentBlock.push(cached);\n    }\n    return true;\n}\n\n// Core API ------------------------------------------------------------------\nconst version = \"3.2.41\";\nconst _ssrUtils = {\n    createComponentInstance,\n    setupComponent,\n    renderComponentRoot,\n    setCurrentRenderingInstance,\n    isVNode,\n    normalizeVNode\n};\n/**\n * SSR utils for \\@vue/server-renderer. Only exposed in ssr-possible builds.\n * @internal\n */\nconst ssrUtils = (_ssrUtils );\n/**\n * @internal only exposed in compat builds\n */\nconst resolveFilter = null;\n/**\n * @internal only exposed in compat builds.\n */\nconst compatUtils = (null);\n\nexport { BaseTransition, Comment, Fragment, KeepAlive, Static, Suspense, Teleport, Text, callWithAsyncErrorHandling, callWithErrorHandling, cloneVNode, compatUtils, computed, createBlock, createCommentVNode, createElementBlock, createBaseVNode as createElementVNode, createHydrationRenderer, createPropsRestProxy, createRenderer, createSlots, createStaticVNode, createTextVNode, createVNode, defineAsyncComponent, defineComponent, defineEmits, defineExpose, defineProps, devtools, getCurrentInstance, getTransitionRawChildren, guardReactiveProps, h, handleError, initCustomFormatter, inject, isMemoSame, isRuntimeOnly, isVNode, mergeDefaults, mergeProps, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onRenderTracked, onRenderTriggered, onServerPrefetch, onUnmounted, onUpdated, openBlock, popScopeId, provide, pushScopeId, queuePostFlushCb, registerRuntimeCompiler, renderList, renderSlot, resolveComponent, resolveDirective, resolveDynamicComponent, resolveFilter, resolveTransitionHooks, setBlockTracking, setDevtoolsHook, setTransitionHooks, ssrContextKey, ssrUtils, toHandlers, transformVNodeArgs, useAttrs, useSSRContext, useSlots, useTransitionState, version, warn, watch, watchEffect, watchPostEffect, watchSyncEffect, withAsyncContext, withCtx, withDefaults, withDirectives, withMemo, withScopeId };\n","import { camelize, warn, callWithAsyncErrorHandling, defineComponent, nextTick, createVNode, getCurrentInstance, watchPostEffect, onMounted, onUnmounted, Fragment, Static, h, BaseTransition, useTransitionState, onUpdated, toRaw, getTransitionRawChildren, setTransitionHooks, resolveTransitionHooks, createRenderer, isRuntimeOnly, createHydrationRenderer } from '@vue/runtime-core';\nexport * from '@vue/runtime-core';\nimport { isString, isArray, hyphenate, capitalize, isSpecialBooleanAttr, includeBooleanAttr, isOn, isModelListener, isFunction, toNumber, camelize as camelize$1, extend, EMPTY_OBJ, isObject, invokeArrayFns, looseIndexOf, isSet, looseEqual, isHTMLTag, isSVGTag } from '@vue/shared';\n\nconst svgNS = 'http://www.w3.org/2000/svg';\nconst doc = (typeof document !== 'undefined' ? document : null);\nconst templateContainer = doc && /*#__PURE__*/ doc.createElement('template');\nconst nodeOps = {\n    insert: (child, parent, anchor) => {\n        parent.insertBefore(child, anchor || null);\n    },\n    remove: child => {\n        const parent = child.parentNode;\n        if (parent) {\n            parent.removeChild(child);\n        }\n    },\n    createElement: (tag, isSVG, is, props) => {\n        const el = isSVG\n            ? doc.createElementNS(svgNS, tag)\n            : doc.createElement(tag, is ? { is } : undefined);\n        if (tag === 'select' && props && props.multiple != null) {\n            el.setAttribute('multiple', props.multiple);\n        }\n        return el;\n    },\n    createText: text => doc.createTextNode(text),\n    createComment: text => doc.createComment(text),\n    setText: (node, text) => {\n        node.nodeValue = text;\n    },\n    setElementText: (el, text) => {\n        el.textContent = text;\n    },\n    parentNode: node => node.parentNode,\n    nextSibling: node => node.nextSibling,\n    querySelector: selector => doc.querySelector(selector),\n    setScopeId(el, id) {\n        el.setAttribute(id, '');\n    },\n    // __UNSAFE__\n    // Reason: innerHTML.\n    // Static content here can only come from compiled templates.\n    // As long as the user only uses trusted templates, this is safe.\n    insertStaticContent(content, parent, anchor, isSVG, start, end) {\n        // <parent> before | first ... last | anchor </parent>\n        const before = anchor ? anchor.previousSibling : parent.lastChild;\n        // #5308 can only take cached path if:\n        // - has a single root node\n        // - nextSibling info is still available\n        if (start && (start === end || start.nextSibling)) {\n            // cached\n            while (true) {\n                parent.insertBefore(start.cloneNode(true), anchor);\n                if (start === end || !(start = start.nextSibling))\n                    break;\n            }\n        }\n        else {\n            // fresh insert\n            templateContainer.innerHTML = isSVG ? `<svg>${content}</svg>` : content;\n            const template = templateContainer.content;\n            if (isSVG) {\n                // remove outer svg wrapper\n                const wrapper = template.firstChild;\n                while (wrapper.firstChild) {\n                    template.appendChild(wrapper.firstChild);\n                }\n                template.removeChild(wrapper);\n            }\n            parent.insertBefore(template, anchor);\n        }\n        return [\n            // first\n            before ? before.nextSibling : parent.firstChild,\n            // last\n            anchor ? anchor.previousSibling : parent.lastChild\n        ];\n    }\n};\n\n// compiler should normalize class + :class bindings on the same element\n// into a single binding ['staticClass', dynamic]\nfunction patchClass(el, value, isSVG) {\n    // directly setting className should be faster than setAttribute in theory\n    // if this is an element during a transition, take the temporary transition\n    // classes into account.\n    const transitionClasses = el._vtc;\n    if (transitionClasses) {\n        value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(' ');\n    }\n    if (value == null) {\n        el.removeAttribute('class');\n    }\n    else if (isSVG) {\n        el.setAttribute('class', value);\n    }\n    else {\n        el.className = value;\n    }\n}\n\nfunction patchStyle(el, prev, next) {\n    const style = el.style;\n    const isCssString = isString(next);\n    if (next && !isCssString) {\n        for (const key in next) {\n            setStyle(style, key, next[key]);\n        }\n        if (prev && !isString(prev)) {\n            for (const key in prev) {\n                if (next[key] == null) {\n                    setStyle(style, key, '');\n                }\n            }\n        }\n    }\n    else {\n        const currentDisplay = style.display;\n        if (isCssString) {\n            if (prev !== next) {\n                style.cssText = next;\n            }\n        }\n        else if (prev) {\n            el.removeAttribute('style');\n        }\n        // indicates that the `display` of the element is controlled by `v-show`,\n        // so we always keep the current `display` value regardless of the `style`\n        // value, thus handing over control to `v-show`.\n        if ('_vod' in el) {\n            style.display = currentDisplay;\n        }\n    }\n}\nconst importantRE = /\\s*!important$/;\nfunction setStyle(style, name, val) {\n    if (isArray(val)) {\n        val.forEach(v => setStyle(style, name, v));\n    }\n    else {\n        if (val == null)\n            val = '';\n        if (name.startsWith('--')) {\n            // custom property definition\n            style.setProperty(name, val);\n        }\n        else {\n            const prefixed = autoPrefix(style, name);\n            if (importantRE.test(val)) {\n                // !important\n                style.setProperty(hyphenate(prefixed), val.replace(importantRE, ''), 'important');\n            }\n            else {\n                style[prefixed] = val;\n            }\n        }\n    }\n}\nconst prefixes = ['Webkit', 'Moz', 'ms'];\nconst prefixCache = {};\nfunction autoPrefix(style, rawName) {\n    const cached = prefixCache[rawName];\n    if (cached) {\n        return cached;\n    }\n    let name = camelize(rawName);\n    if (name !== 'filter' && name in style) {\n        return (prefixCache[rawName] = name);\n    }\n    name = capitalize(name);\n    for (let i = 0; i < prefixes.length; i++) {\n        const prefixed = prefixes[i] + name;\n        if (prefixed in style) {\n            return (prefixCache[rawName] = prefixed);\n        }\n    }\n    return rawName;\n}\n\nconst xlinkNS = 'http://www.w3.org/1999/xlink';\nfunction patchAttr(el, key, value, isSVG, instance) {\n    if (isSVG && key.startsWith('xlink:')) {\n        if (value == null) {\n            el.removeAttributeNS(xlinkNS, key.slice(6, key.length));\n        }\n        else {\n            el.setAttributeNS(xlinkNS, key, value);\n        }\n    }\n    else {\n        // note we are only checking boolean attributes that don't have a\n        // corresponding dom prop of the same name here.\n        const isBoolean = isSpecialBooleanAttr(key);\n        if (value == null || (isBoolean && !includeBooleanAttr(value))) {\n            el.removeAttribute(key);\n        }\n        else {\n            el.setAttribute(key, isBoolean ? '' : value);\n        }\n    }\n}\n\n// __UNSAFE__\n// functions. The user is responsible for using them with only trusted content.\nfunction patchDOMProp(el, key, value, \n// the following args are passed only due to potential innerHTML/textContent\n// overriding existing VNodes, in which case the old tree must be properly\n// unmounted.\nprevChildren, parentComponent, parentSuspense, unmountChildren) {\n    if (key === 'innerHTML' || key === 'textContent') {\n        if (prevChildren) {\n            unmountChildren(prevChildren, parentComponent, parentSuspense);\n        }\n        el[key] = value == null ? '' : value;\n        return;\n    }\n    if (key === 'value' &&\n        el.tagName !== 'PROGRESS' &&\n        // custom elements may use _value internally\n        !el.tagName.includes('-')) {\n        // store value as _value as well since\n        // non-string values will be stringified.\n        el._value = value;\n        const newValue = value == null ? '' : value;\n        if (el.value !== newValue ||\n            // #4956: always set for OPTION elements because its value falls back to\n            // textContent if no value attribute is present. And setting .value for\n            // OPTION has no side effect\n            el.tagName === 'OPTION') {\n            el.value = newValue;\n        }\n        if (value == null) {\n            el.removeAttribute(key);\n        }\n        return;\n    }\n    let needRemove = false;\n    if (value === '' || value == null) {\n        const type = typeof el[key];\n        if (type === 'boolean') {\n            // e.g. <select multiple> compiles to { multiple: '' }\n            value = includeBooleanAttr(value);\n        }\n        else if (value == null && type === 'string') {\n            // e.g. <div :id=\"null\">\n            value = '';\n            needRemove = true;\n        }\n        else if (type === 'number') {\n            // e.g. <img :width=\"null\">\n            value = 0;\n            needRemove = true;\n        }\n    }\n    // some properties perform value validation and throw,\n    // some properties has getter, no setter, will error in 'use strict'\n    // eg. <select :type=\"null\"></select> <select :willValidate=\"null\"></select>\n    try {\n        el[key] = value;\n    }\n    catch (e) {\n        // do not warn if value is auto-coerced from nullish values\n        if ((process.env.NODE_ENV !== 'production') && !needRemove) {\n            warn(`Failed setting prop \"${key}\" on <${el.tagName.toLowerCase()}>: ` +\n                `value ${value} is invalid.`, e);\n        }\n    }\n    needRemove && el.removeAttribute(key);\n}\n\nfunction addEventListener(el, event, handler, options) {\n    el.addEventListener(event, handler, options);\n}\nfunction removeEventListener(el, event, handler, options) {\n    el.removeEventListener(event, handler, options);\n}\nfunction patchEvent(el, rawName, prevValue, nextValue, instance = null) {\n    // vei = vue event invokers\n    const invokers = el._vei || (el._vei = {});\n    const existingInvoker = invokers[rawName];\n    if (nextValue && existingInvoker) {\n        // patch\n        existingInvoker.value = nextValue;\n    }\n    else {\n        const [name, options] = parseName(rawName);\n        if (nextValue) {\n            // add\n            const invoker = (invokers[rawName] = createInvoker(nextValue, instance));\n            addEventListener(el, name, invoker, options);\n        }\n        else if (existingInvoker) {\n            // remove\n            removeEventListener(el, name, existingInvoker, options);\n            invokers[rawName] = undefined;\n        }\n    }\n}\nconst optionsModifierRE = /(?:Once|Passive|Capture)$/;\nfunction parseName(name) {\n    let options;\n    if (optionsModifierRE.test(name)) {\n        options = {};\n        let m;\n        while ((m = name.match(optionsModifierRE))) {\n            name = name.slice(0, name.length - m[0].length);\n            options[m[0].toLowerCase()] = true;\n        }\n    }\n    const event = name[2] === ':' ? name.slice(3) : hyphenate(name.slice(2));\n    return [event, options];\n}\n// To avoid the overhead of repeatedly calling Date.now(), we cache\n// and use the same timestamp for all event listeners attached in the same tick.\nlet cachedNow = 0;\nconst p = /*#__PURE__*/ Promise.resolve();\nconst getNow = () => cachedNow || (p.then(() => (cachedNow = 0)), (cachedNow = Date.now()));\nfunction createInvoker(initialValue, instance) {\n    const invoker = (e) => {\n        // async edge case vuejs/vue#6566\n        // inner click event triggers patch, event handler\n        // attached to outer element during patch, and triggered again. This\n        // happens because browsers fire microtask ticks between event propagation.\n        // this no longer happens for templates in Vue 3, but could still be\n        // theoretically possible for hand-written render functions.\n        // the solution: we save the timestamp when a handler is attached,\n        // and also attach the timestamp to any event that was handled by vue\n        // for the first time (to avoid inconsistent event timestamp implementations\n        // or events fired from iframes, e.g. #2513)\n        // The handler would only fire if the event passed to it was fired\n        // AFTER it was attached.\n        if (!e._vts) {\n            e._vts = Date.now();\n        }\n        else if (e._vts <= invoker.attached) {\n            return;\n        }\n        callWithAsyncErrorHandling(patchStopImmediatePropagation(e, invoker.value), instance, 5 /* ErrorCodes.NATIVE_EVENT_HANDLER */, [e]);\n    };\n    invoker.value = initialValue;\n    invoker.attached = getNow();\n    return invoker;\n}\nfunction patchStopImmediatePropagation(e, value) {\n    if (isArray(value)) {\n        const originalStop = e.stopImmediatePropagation;\n        e.stopImmediatePropagation = () => {\n            originalStop.call(e);\n            e._stopped = true;\n        };\n        return value.map(fn => (e) => !e._stopped && fn && fn(e));\n    }\n    else {\n        return value;\n    }\n}\n\nconst nativeOnRE = /^on[a-z]/;\nconst patchProp = (el, key, prevValue, nextValue, isSVG = false, prevChildren, parentComponent, parentSuspense, unmountChildren) => {\n    if (key === 'class') {\n        patchClass(el, nextValue, isSVG);\n    }\n    else if (key === 'style') {\n        patchStyle(el, prevValue, nextValue);\n    }\n    else if (isOn(key)) {\n        // ignore v-model listeners\n        if (!isModelListener(key)) {\n            patchEvent(el, key, prevValue, nextValue, parentComponent);\n        }\n    }\n    else if (key[0] === '.'\n        ? ((key = key.slice(1)), true)\n        : key[0] === '^'\n            ? ((key = key.slice(1)), false)\n            : shouldSetAsProp(el, key, nextValue, isSVG)) {\n        patchDOMProp(el, key, nextValue, prevChildren, parentComponent, parentSuspense, unmountChildren);\n    }\n    else {\n        // special case for <input v-model type=\"checkbox\"> with\n        // :true-value & :false-value\n        // store value as dom properties since non-string values will be\n        // stringified.\n        if (key === 'true-value') {\n            el._trueValue = nextValue;\n        }\n        else if (key === 'false-value') {\n            el._falseValue = nextValue;\n        }\n        patchAttr(el, key, nextValue, isSVG);\n    }\n};\nfunction shouldSetAsProp(el, key, value, isSVG) {\n    if (isSVG) {\n        // most keys must be set as attribute on svg elements to work\n        // ...except innerHTML & textContent\n        if (key === 'innerHTML' || key === 'textContent') {\n            return true;\n        }\n        // or native onclick with function values\n        if (key in el && nativeOnRE.test(key) && isFunction(value)) {\n            return true;\n        }\n        return false;\n    }\n    // these are enumerated attrs, however their corresponding DOM properties\n    // are actually booleans - this leads to setting it with a string \"false\"\n    // value leading it to be coerced to `true`, so we need to always treat\n    // them as attributes.\n    // Note that `contentEditable` doesn't have this problem: its DOM\n    // property is also enumerated string values.\n    if (key === 'spellcheck' || key === 'draggable' || key === 'translate') {\n        return false;\n    }\n    // #1787, #2840 form property on form elements is readonly and must be set as\n    // attribute.\n    if (key === 'form') {\n        return false;\n    }\n    // #1526 <input list> must be set as attribute\n    if (key === 'list' && el.tagName === 'INPUT') {\n        return false;\n    }\n    // #2766 <textarea type> must be set as attribute\n    if (key === 'type' && el.tagName === 'TEXTAREA') {\n        return false;\n    }\n    // native onclick with string value, must be set as attribute\n    if (nativeOnRE.test(key) && isString(value)) {\n        return false;\n    }\n    return key in el;\n}\n\nfunction defineCustomElement(options, hydrate) {\n    const Comp = defineComponent(options);\n    class VueCustomElement extends VueElement {\n        constructor(initialProps) {\n            super(Comp, initialProps, hydrate);\n        }\n    }\n    VueCustomElement.def = Comp;\n    return VueCustomElement;\n}\nconst defineSSRCustomElement = ((options) => {\n    // @ts-ignore\n    return defineCustomElement(options, hydrate);\n});\nconst BaseClass = (typeof HTMLElement !== 'undefined' ? HTMLElement : class {\n});\nclass VueElement extends BaseClass {\n    constructor(_def, _props = {}, hydrate) {\n        super();\n        this._def = _def;\n        this._props = _props;\n        /**\n         * @internal\n         */\n        this._instance = null;\n        this._connected = false;\n        this._resolved = false;\n        this._numberProps = null;\n        if (this.shadowRoot && hydrate) {\n            hydrate(this._createVNode(), this.shadowRoot);\n        }\n        else {\n            if ((process.env.NODE_ENV !== 'production') && this.shadowRoot) {\n                warn(`Custom element has pre-rendered declarative shadow root but is not ` +\n                    `defined as hydratable. Use \\`defineSSRCustomElement\\`.`);\n            }\n            this.attachShadow({ mode: 'open' });\n        }\n    }\n    connectedCallback() {\n        this._connected = true;\n        if (!this._instance) {\n            this._resolveDef();\n        }\n    }\n    disconnectedCallback() {\n        this._connected = false;\n        nextTick(() => {\n            if (!this._connected) {\n                render(null, this.shadowRoot);\n                this._instance = null;\n            }\n        });\n    }\n    /**\n     * resolve inner component definition (handle possible async component)\n     */\n    _resolveDef() {\n        if (this._resolved) {\n            return;\n        }\n        this._resolved = true;\n        // set initial attrs\n        for (let i = 0; i < this.attributes.length; i++) {\n            this._setAttr(this.attributes[i].name);\n        }\n        // watch future attr changes\n        new MutationObserver(mutations => {\n            for (const m of mutations) {\n                this._setAttr(m.attributeName);\n            }\n        }).observe(this, { attributes: true });\n        const resolve = (def) => {\n            const { props, styles } = def;\n            const hasOptions = !isArray(props);\n            const rawKeys = props ? (hasOptions ? Object.keys(props) : props) : [];\n            // cast Number-type props set before resolve\n            let numberProps;\n            if (hasOptions) {\n                for (const key in this._props) {\n                    const opt = props[key];\n                    if (opt === Number || (opt && opt.type === Number)) {\n                        this._props[key] = toNumber(this._props[key]);\n                        (numberProps || (numberProps = Object.create(null)))[key] = true;\n                    }\n                }\n            }\n            this._numberProps = numberProps;\n            // check if there are props set pre-upgrade or connect\n            for (const key of Object.keys(this)) {\n                if (key[0] !== '_') {\n                    this._setProp(key, this[key], true, false);\n                }\n            }\n            // defining getter/setters on prototype\n            for (const key of rawKeys.map(camelize$1)) {\n                Object.defineProperty(this, key, {\n                    get() {\n                        return this._getProp(key);\n                    },\n                    set(val) {\n                        this._setProp(key, val);\n                    }\n                });\n            }\n            // apply CSS\n            this._applyStyles(styles);\n            // initial render\n            this._update();\n        };\n        const asyncDef = this._def.__asyncLoader;\n        if (asyncDef) {\n            asyncDef().then(resolve);\n        }\n        else {\n            resolve(this._def);\n        }\n    }\n    _setAttr(key) {\n        let value = this.getAttribute(key);\n        if (this._numberProps && this._numberProps[key]) {\n            value = toNumber(value);\n        }\n        this._setProp(camelize$1(key), value, false);\n    }\n    /**\n     * @internal\n     */\n    _getProp(key) {\n        return this._props[key];\n    }\n    /**\n     * @internal\n     */\n    _setProp(key, val, shouldReflect = true, shouldUpdate = true) {\n        if (val !== this._props[key]) {\n            this._props[key] = val;\n            if (shouldUpdate && this._instance) {\n                this._update();\n            }\n            // reflect\n            if (shouldReflect) {\n                if (val === true) {\n                    this.setAttribute(hyphenate(key), '');\n                }\n                else if (typeof val === 'string' || typeof val === 'number') {\n                    this.setAttribute(hyphenate(key), val + '');\n                }\n                else if (!val) {\n                    this.removeAttribute(hyphenate(key));\n                }\n            }\n        }\n    }\n    _update() {\n        render(this._createVNode(), this.shadowRoot);\n    }\n    _createVNode() {\n        const vnode = createVNode(this._def, extend({}, this._props));\n        if (!this._instance) {\n            vnode.ce = instance => {\n                this._instance = instance;\n                instance.isCE = true;\n                // HMR\n                if ((process.env.NODE_ENV !== 'production')) {\n                    instance.ceReload = newStyles => {\n                        // always reset styles\n                        if (this._styles) {\n                            this._styles.forEach(s => this.shadowRoot.removeChild(s));\n                            this._styles.length = 0;\n                        }\n                        this._applyStyles(newStyles);\n                        // if this is an async component, ceReload is called from the inner\n                        // component so no need to reload the async wrapper\n                        if (!this._def.__asyncLoader) {\n                            // reload\n                            this._instance = null;\n                            this._update();\n                        }\n                    };\n                }\n                // intercept emit\n                instance.emit = (event, ...args) => {\n                    this.dispatchEvent(new CustomEvent(event, {\n                        detail: args\n                    }));\n                };\n                // locate nearest Vue custom element parent for provide/inject\n                let parent = this;\n                while ((parent =\n                    parent && (parent.parentNode || parent.host))) {\n                    if (parent instanceof VueElement) {\n                        instance.parent = parent._instance;\n                        break;\n                    }\n                }\n            };\n        }\n        return vnode;\n    }\n    _applyStyles(styles) {\n        if (styles) {\n            styles.forEach(css => {\n                const s = document.createElement('style');\n                s.textContent = css;\n                this.shadowRoot.appendChild(s);\n                // record for HMR\n                if ((process.env.NODE_ENV !== 'production')) {\n                    (this._styles || (this._styles = [])).push(s);\n                }\n            });\n        }\n    }\n}\n\nfunction useCssModule(name = '$style') {\n    /* istanbul ignore else */\n    {\n        const instance = getCurrentInstance();\n        if (!instance) {\n            (process.env.NODE_ENV !== 'production') && warn(`useCssModule must be called inside setup()`);\n            return EMPTY_OBJ;\n        }\n        const modules = instance.type.__cssModules;\n        if (!modules) {\n            (process.env.NODE_ENV !== 'production') && warn(`Current instance does not have CSS modules injected.`);\n            return EMPTY_OBJ;\n        }\n        const mod = modules[name];\n        if (!mod) {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`Current instance does not have CSS module named \"${name}\".`);\n            return EMPTY_OBJ;\n        }\n        return mod;\n    }\n}\n\n/**\n * Runtime helper for SFC's CSS variable injection feature.\n * @private\n */\nfunction useCssVars(getter) {\n    const instance = getCurrentInstance();\n    /* istanbul ignore next */\n    if (!instance) {\n        (process.env.NODE_ENV !== 'production') &&\n            warn(`useCssVars is called without current active component instance.`);\n        return;\n    }\n    const setVars = () => setVarsOnVNode(instance.subTree, getter(instance.proxy));\n    watchPostEffect(setVars);\n    onMounted(() => {\n        const ob = new MutationObserver(setVars);\n        ob.observe(instance.subTree.el.parentNode, { childList: true });\n        onUnmounted(() => ob.disconnect());\n    });\n}\nfunction setVarsOnVNode(vnode, vars) {\n    if (vnode.shapeFlag & 128 /* ShapeFlags.SUSPENSE */) {\n        const suspense = vnode.suspense;\n        vnode = suspense.activeBranch;\n        if (suspense.pendingBranch && !suspense.isHydrating) {\n            suspense.effects.push(() => {\n                setVarsOnVNode(suspense.activeBranch, vars);\n            });\n        }\n    }\n    // drill down HOCs until it's a non-component vnode\n    while (vnode.component) {\n        vnode = vnode.component.subTree;\n    }\n    if (vnode.shapeFlag & 1 /* ShapeFlags.ELEMENT */ && vnode.el) {\n        setVarsOnNode(vnode.el, vars);\n    }\n    else if (vnode.type === Fragment) {\n        vnode.children.forEach(c => setVarsOnVNode(c, vars));\n    }\n    else if (vnode.type === Static) {\n        let { el, anchor } = vnode;\n        while (el) {\n            setVarsOnNode(el, vars);\n            if (el === anchor)\n                break;\n            el = el.nextSibling;\n        }\n    }\n}\nfunction setVarsOnNode(el, vars) {\n    if (el.nodeType === 1) {\n        const style = el.style;\n        for (const key in vars) {\n            style.setProperty(`--${key}`, vars[key]);\n        }\n    }\n}\n\nconst TRANSITION = 'transition';\nconst ANIMATION = 'animation';\n// DOM Transition is a higher-order-component based on the platform-agnostic\n// base Transition component, with DOM-specific logic.\nconst Transition = (props, { slots }) => h(BaseTransition, resolveTransitionProps(props), slots);\nTransition.displayName = 'Transition';\nconst DOMTransitionPropsValidators = {\n    name: String,\n    type: String,\n    css: {\n        type: Boolean,\n        default: true\n    },\n    duration: [String, Number, Object],\n    enterFromClass: String,\n    enterActiveClass: String,\n    enterToClass: String,\n    appearFromClass: String,\n    appearActiveClass: String,\n    appearToClass: String,\n    leaveFromClass: String,\n    leaveActiveClass: String,\n    leaveToClass: String\n};\nconst TransitionPropsValidators = (Transition.props =\n    /*#__PURE__*/ extend({}, BaseTransition.props, DOMTransitionPropsValidators));\n/**\n * #3227 Incoming hooks may be merged into arrays when wrapping Transition\n * with custom HOCs.\n */\nconst callHook = (hook, args = []) => {\n    if (isArray(hook)) {\n        hook.forEach(h => h(...args));\n    }\n    else if (hook) {\n        hook(...args);\n    }\n};\n/**\n * Check if a hook expects a callback (2nd arg), which means the user\n * intends to explicitly control the end of the transition.\n */\nconst hasExplicitCallback = (hook) => {\n    return hook\n        ? isArray(hook)\n            ? hook.some(h => h.length > 1)\n            : hook.length > 1\n        : false;\n};\nfunction resolveTransitionProps(rawProps) {\n    const baseProps = {};\n    for (const key in rawProps) {\n        if (!(key in DOMTransitionPropsValidators)) {\n            baseProps[key] = rawProps[key];\n        }\n    }\n    if (rawProps.css === false) {\n        return baseProps;\n    }\n    const { name = 'v', type, duration, enterFromClass = `${name}-enter-from`, enterActiveClass = `${name}-enter-active`, enterToClass = `${name}-enter-to`, appearFromClass = enterFromClass, appearActiveClass = enterActiveClass, appearToClass = enterToClass, leaveFromClass = `${name}-leave-from`, leaveActiveClass = `${name}-leave-active`, leaveToClass = `${name}-leave-to` } = rawProps;\n    const durations = normalizeDuration(duration);\n    const enterDuration = durations && durations[0];\n    const leaveDuration = durations && durations[1];\n    const { onBeforeEnter, onEnter, onEnterCancelled, onLeave, onLeaveCancelled, onBeforeAppear = onBeforeEnter, onAppear = onEnter, onAppearCancelled = onEnterCancelled } = baseProps;\n    const finishEnter = (el, isAppear, done) => {\n        removeTransitionClass(el, isAppear ? appearToClass : enterToClass);\n        removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);\n        done && done();\n    };\n    const finishLeave = (el, done) => {\n        el._isLeaving = false;\n        removeTransitionClass(el, leaveFromClass);\n        removeTransitionClass(el, leaveToClass);\n        removeTransitionClass(el, leaveActiveClass);\n        done && done();\n    };\n    const makeEnterHook = (isAppear) => {\n        return (el, done) => {\n            const hook = isAppear ? onAppear : onEnter;\n            const resolve = () => finishEnter(el, isAppear, done);\n            callHook(hook, [el, resolve]);\n            nextFrame(() => {\n                removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);\n                addTransitionClass(el, isAppear ? appearToClass : enterToClass);\n                if (!hasExplicitCallback(hook)) {\n                    whenTransitionEnds(el, type, enterDuration, resolve);\n                }\n            });\n        };\n    };\n    return extend(baseProps, {\n        onBeforeEnter(el) {\n            callHook(onBeforeEnter, [el]);\n            addTransitionClass(el, enterFromClass);\n            addTransitionClass(el, enterActiveClass);\n        },\n        onBeforeAppear(el) {\n            callHook(onBeforeAppear, [el]);\n            addTransitionClass(el, appearFromClass);\n            addTransitionClass(el, appearActiveClass);\n        },\n        onEnter: makeEnterHook(false),\n        onAppear: makeEnterHook(true),\n        onLeave(el, done) {\n            el._isLeaving = true;\n            const resolve = () => finishLeave(el, done);\n            addTransitionClass(el, leaveFromClass);\n            // force reflow so *-leave-from classes immediately take effect (#2593)\n            forceReflow();\n            addTransitionClass(el, leaveActiveClass);\n            nextFrame(() => {\n                if (!el._isLeaving) {\n                    // cancelled\n                    return;\n                }\n                removeTransitionClass(el, leaveFromClass);\n                addTransitionClass(el, leaveToClass);\n                if (!hasExplicitCallback(onLeave)) {\n                    whenTransitionEnds(el, type, leaveDuration, resolve);\n                }\n            });\n            callHook(onLeave, [el, resolve]);\n        },\n        onEnterCancelled(el) {\n            finishEnter(el, false);\n            callHook(onEnterCancelled, [el]);\n        },\n        onAppearCancelled(el) {\n            finishEnter(el, true);\n            callHook(onAppearCancelled, [el]);\n        },\n        onLeaveCancelled(el) {\n            finishLeave(el);\n            callHook(onLeaveCancelled, [el]);\n        }\n    });\n}\nfunction normalizeDuration(duration) {\n    if (duration == null) {\n        return null;\n    }\n    else if (isObject(duration)) {\n        return [NumberOf(duration.enter), NumberOf(duration.leave)];\n    }\n    else {\n        const n = NumberOf(duration);\n        return [n, n];\n    }\n}\nfunction NumberOf(val) {\n    const res = toNumber(val);\n    if ((process.env.NODE_ENV !== 'production'))\n        validateDuration(res);\n    return res;\n}\nfunction validateDuration(val) {\n    if (typeof val !== 'number') {\n        warn(`<transition> explicit duration is not a valid number - ` +\n            `got ${JSON.stringify(val)}.`);\n    }\n    else if (isNaN(val)) {\n        warn(`<transition> explicit duration is NaN - ` +\n            'the duration expression might be incorrect.');\n    }\n}\nfunction addTransitionClass(el, cls) {\n    cls.split(/\\s+/).forEach(c => c && el.classList.add(c));\n    (el._vtc ||\n        (el._vtc = new Set())).add(cls);\n}\nfunction removeTransitionClass(el, cls) {\n    cls.split(/\\s+/).forEach(c => c && el.classList.remove(c));\n    const { _vtc } = el;\n    if (_vtc) {\n        _vtc.delete(cls);\n        if (!_vtc.size) {\n            el._vtc = undefined;\n        }\n    }\n}\nfunction nextFrame(cb) {\n    requestAnimationFrame(() => {\n        requestAnimationFrame(cb);\n    });\n}\nlet endId = 0;\nfunction whenTransitionEnds(el, expectedType, explicitTimeout, resolve) {\n    const id = (el._endId = ++endId);\n    const resolveIfNotStale = () => {\n        if (id === el._endId) {\n            resolve();\n        }\n    };\n    if (explicitTimeout) {\n        return setTimeout(resolveIfNotStale, explicitTimeout);\n    }\n    const { type, timeout, propCount } = getTransitionInfo(el, expectedType);\n    if (!type) {\n        return resolve();\n    }\n    const endEvent = type + 'end';\n    let ended = 0;\n    const end = () => {\n        el.removeEventListener(endEvent, onEnd);\n        resolveIfNotStale();\n    };\n    const onEnd = (e) => {\n        if (e.target === el && ++ended >= propCount) {\n            end();\n        }\n    };\n    setTimeout(() => {\n        if (ended < propCount) {\n            end();\n        }\n    }, timeout + 1);\n    el.addEventListener(endEvent, onEnd);\n}\nfunction getTransitionInfo(el, expectedType) {\n    const styles = window.getComputedStyle(el);\n    // JSDOM may return undefined for transition properties\n    const getStyleProperties = (key) => (styles[key] || '').split(', ');\n    const transitionDelays = getStyleProperties(TRANSITION + 'Delay');\n    const transitionDurations = getStyleProperties(TRANSITION + 'Duration');\n    const transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n    const animationDelays = getStyleProperties(ANIMATION + 'Delay');\n    const animationDurations = getStyleProperties(ANIMATION + 'Duration');\n    const animationTimeout = getTimeout(animationDelays, animationDurations);\n    let type = null;\n    let timeout = 0;\n    let propCount = 0;\n    /* istanbul ignore if */\n    if (expectedType === TRANSITION) {\n        if (transitionTimeout > 0) {\n            type = TRANSITION;\n            timeout = transitionTimeout;\n            propCount = transitionDurations.length;\n        }\n    }\n    else if (expectedType === ANIMATION) {\n        if (animationTimeout > 0) {\n            type = ANIMATION;\n            timeout = animationTimeout;\n            propCount = animationDurations.length;\n        }\n    }\n    else {\n        timeout = Math.max(transitionTimeout, animationTimeout);\n        type =\n            timeout > 0\n                ? transitionTimeout > animationTimeout\n                    ? TRANSITION\n                    : ANIMATION\n                : null;\n        propCount = type\n            ? type === TRANSITION\n                ? transitionDurations.length\n                : animationDurations.length\n            : 0;\n    }\n    const hasTransform = type === TRANSITION &&\n        /\\b(transform|all)(,|$)/.test(styles[TRANSITION + 'Property']);\n    return {\n        type,\n        timeout,\n        propCount,\n        hasTransform\n    };\n}\nfunction getTimeout(delays, durations) {\n    while (delays.length < durations.length) {\n        delays = delays.concat(delays);\n    }\n    return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));\n}\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer\n// numbers in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down\n// (i.e. acting as a floor function) causing unexpected behaviors\nfunction toMs(s) {\n    return Number(s.slice(0, -1).replace(',', '.')) * 1000;\n}\n// synchronously force layout to put elements into a certain state\nfunction forceReflow() {\n    return document.body.offsetHeight;\n}\n\nconst positionMap = new WeakMap();\nconst newPositionMap = new WeakMap();\nconst TransitionGroupImpl = {\n    name: 'TransitionGroup',\n    props: /*#__PURE__*/ extend({}, TransitionPropsValidators, {\n        tag: String,\n        moveClass: String\n    }),\n    setup(props, { slots }) {\n        const instance = getCurrentInstance();\n        const state = useTransitionState();\n        let prevChildren;\n        let children;\n        onUpdated(() => {\n            // children is guaranteed to exist after initial render\n            if (!prevChildren.length) {\n                return;\n            }\n            const moveClass = props.moveClass || `${props.name || 'v'}-move`;\n            if (!hasCSSTransform(prevChildren[0].el, instance.vnode.el, moveClass)) {\n                return;\n            }\n            // we divide the work into three loops to avoid mixing DOM reads and writes\n            // in each iteration - which helps prevent layout thrashing.\n            prevChildren.forEach(callPendingCbs);\n            prevChildren.forEach(recordPosition);\n            const movedChildren = prevChildren.filter(applyTranslation);\n            // force reflow to put everything in position\n            forceReflow();\n            movedChildren.forEach(c => {\n                const el = c.el;\n                const style = el.style;\n                addTransitionClass(el, moveClass);\n                style.transform = style.webkitTransform = style.transitionDuration = '';\n                const cb = (el._moveCb = (e) => {\n                    if (e && e.target !== el) {\n                        return;\n                    }\n                    if (!e || /transform$/.test(e.propertyName)) {\n                        el.removeEventListener('transitionend', cb);\n                        el._moveCb = null;\n                        removeTransitionClass(el, moveClass);\n                    }\n                });\n                el.addEventListener('transitionend', cb);\n            });\n        });\n        return () => {\n            const rawProps = toRaw(props);\n            const cssTransitionProps = resolveTransitionProps(rawProps);\n            let tag = rawProps.tag || Fragment;\n            prevChildren = children;\n            children = slots.default ? getTransitionRawChildren(slots.default()) : [];\n            for (let i = 0; i < children.length; i++) {\n                const child = children[i];\n                if (child.key != null) {\n                    setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));\n                }\n                else if ((process.env.NODE_ENV !== 'production')) {\n                    warn(`<TransitionGroup> children must be keyed.`);\n                }\n            }\n            if (prevChildren) {\n                for (let i = 0; i < prevChildren.length; i++) {\n                    const child = prevChildren[i];\n                    setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));\n                    positionMap.set(child, child.el.getBoundingClientRect());\n                }\n            }\n            return createVNode(tag, null, children);\n        };\n    }\n};\nconst TransitionGroup = TransitionGroupImpl;\nfunction callPendingCbs(c) {\n    const el = c.el;\n    if (el._moveCb) {\n        el._moveCb();\n    }\n    if (el._enterCb) {\n        el._enterCb();\n    }\n}\nfunction recordPosition(c) {\n    newPositionMap.set(c, c.el.getBoundingClientRect());\n}\nfunction applyTranslation(c) {\n    const oldPos = positionMap.get(c);\n    const newPos = newPositionMap.get(c);\n    const dx = oldPos.left - newPos.left;\n    const dy = oldPos.top - newPos.top;\n    if (dx || dy) {\n        const s = c.el.style;\n        s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;\n        s.transitionDuration = '0s';\n        return c;\n    }\n}\nfunction hasCSSTransform(el, root, moveClass) {\n    // Detect whether an element with the move class applied has\n    // CSS transitions. Since the element may be inside an entering\n    // transition at this very moment, we make a clone of it and remove\n    // all other transition classes applied to ensure only the move class\n    // is applied.\n    const clone = el.cloneNode();\n    if (el._vtc) {\n        el._vtc.forEach(cls => {\n            cls.split(/\\s+/).forEach(c => c && clone.classList.remove(c));\n        });\n    }\n    moveClass.split(/\\s+/).forEach(c => c && clone.classList.add(c));\n    clone.style.display = 'none';\n    const container = (root.nodeType === 1 ? root : root.parentNode);\n    container.appendChild(clone);\n    const { hasTransform } = getTransitionInfo(clone);\n    container.removeChild(clone);\n    return hasTransform;\n}\n\nconst getModelAssigner = (vnode) => {\n    const fn = vnode.props['onUpdate:modelValue'] ||\n        (false );\n    return isArray(fn) ? value => invokeArrayFns(fn, value) : fn;\n};\nfunction onCompositionStart(e) {\n    e.target.composing = true;\n}\nfunction onCompositionEnd(e) {\n    const target = e.target;\n    if (target.composing) {\n        target.composing = false;\n        target.dispatchEvent(new Event('input'));\n    }\n}\n// We are exporting the v-model runtime directly as vnode hooks so that it can\n// be tree-shaken in case v-model is never used.\nconst vModelText = {\n    created(el, { modifiers: { lazy, trim, number } }, vnode) {\n        el._assign = getModelAssigner(vnode);\n        const castToNumber = number || (vnode.props && vnode.props.type === 'number');\n        addEventListener(el, lazy ? 'change' : 'input', e => {\n            if (e.target.composing)\n                return;\n            let domValue = el.value;\n            if (trim) {\n                domValue = domValue.trim();\n            }\n            if (castToNumber) {\n                domValue = toNumber(domValue);\n            }\n            el._assign(domValue);\n        });\n        if (trim) {\n            addEventListener(el, 'change', () => {\n                el.value = el.value.trim();\n            });\n        }\n        if (!lazy) {\n            addEventListener(el, 'compositionstart', onCompositionStart);\n            addEventListener(el, 'compositionend', onCompositionEnd);\n            // Safari < 10.2 & UIWebView doesn't fire compositionend when\n            // switching focus before confirming composition choice\n            // this also fixes the issue where some browsers e.g. iOS Chrome\n            // fires \"change\" instead of \"input\" on autocomplete.\n            addEventListener(el, 'change', onCompositionEnd);\n        }\n    },\n    // set value on mounted so it's after min/max for type=\"range\"\n    mounted(el, { value }) {\n        el.value = value == null ? '' : value;\n    },\n    beforeUpdate(el, { value, modifiers: { lazy, trim, number } }, vnode) {\n        el._assign = getModelAssigner(vnode);\n        // avoid clearing unresolved text. #2302\n        if (el.composing)\n            return;\n        if (document.activeElement === el && el.type !== 'range') {\n            if (lazy) {\n                return;\n            }\n            if (trim && el.value.trim() === value) {\n                return;\n            }\n            if ((number || el.type === 'number') && toNumber(el.value) === value) {\n                return;\n            }\n        }\n        const newValue = value == null ? '' : value;\n        if (el.value !== newValue) {\n            el.value = newValue;\n        }\n    }\n};\nconst vModelCheckbox = {\n    // #4096 array checkboxes need to be deep traversed\n    deep: true,\n    created(el, _, vnode) {\n        el._assign = getModelAssigner(vnode);\n        addEventListener(el, 'change', () => {\n            const modelValue = el._modelValue;\n            const elementValue = getValue(el);\n            const checked = el.checked;\n            const assign = el._assign;\n            if (isArray(modelValue)) {\n                const index = looseIndexOf(modelValue, elementValue);\n                const found = index !== -1;\n                if (checked && !found) {\n                    assign(modelValue.concat(elementValue));\n                }\n                else if (!checked && found) {\n                    const filtered = [...modelValue];\n                    filtered.splice(index, 1);\n                    assign(filtered);\n                }\n            }\n            else if (isSet(modelValue)) {\n                const cloned = new Set(modelValue);\n                if (checked) {\n                    cloned.add(elementValue);\n                }\n                else {\n                    cloned.delete(elementValue);\n                }\n                assign(cloned);\n            }\n            else {\n                assign(getCheckboxValue(el, checked));\n            }\n        });\n    },\n    // set initial checked on mount to wait for true-value/false-value\n    mounted: setChecked,\n    beforeUpdate(el, binding, vnode) {\n        el._assign = getModelAssigner(vnode);\n        setChecked(el, binding, vnode);\n    }\n};\nfunction setChecked(el, { value, oldValue }, vnode) {\n    el._modelValue = value;\n    if (isArray(value)) {\n        el.checked = looseIndexOf(value, vnode.props.value) > -1;\n    }\n    else if (isSet(value)) {\n        el.checked = value.has(vnode.props.value);\n    }\n    else if (value !== oldValue) {\n        el.checked = looseEqual(value, getCheckboxValue(el, true));\n    }\n}\nconst vModelRadio = {\n    created(el, { value }, vnode) {\n        el.checked = looseEqual(value, vnode.props.value);\n        el._assign = getModelAssigner(vnode);\n        addEventListener(el, 'change', () => {\n            el._assign(getValue(el));\n        });\n    },\n    beforeUpdate(el, { value, oldValue }, vnode) {\n        el._assign = getModelAssigner(vnode);\n        if (value !== oldValue) {\n            el.checked = looseEqual(value, vnode.props.value);\n        }\n    }\n};\nconst vModelSelect = {\n    // <select multiple> value need to be deep traversed\n    deep: true,\n    created(el, { value, modifiers: { number } }, vnode) {\n        const isSetModel = isSet(value);\n        addEventListener(el, 'change', () => {\n            const selectedVal = Array.prototype.filter\n                .call(el.options, (o) => o.selected)\n                .map((o) => number ? toNumber(getValue(o)) : getValue(o));\n            el._assign(el.multiple\n                ? isSetModel\n                    ? new Set(selectedVal)\n                    : selectedVal\n                : selectedVal[0]);\n        });\n        el._assign = getModelAssigner(vnode);\n    },\n    // set value in mounted & updated because <select> relies on its children\n    // <option>s.\n    mounted(el, { value }) {\n        setSelected(el, value);\n    },\n    beforeUpdate(el, _binding, vnode) {\n        el._assign = getModelAssigner(vnode);\n    },\n    updated(el, { value }) {\n        setSelected(el, value);\n    }\n};\nfunction setSelected(el, value) {\n    const isMultiple = el.multiple;\n    if (isMultiple && !isArray(value) && !isSet(value)) {\n        (process.env.NODE_ENV !== 'production') &&\n            warn(`<select multiple v-model> expects an Array or Set value for its binding, ` +\n                `but got ${Object.prototype.toString.call(value).slice(8, -1)}.`);\n        return;\n    }\n    for (let i = 0, l = el.options.length; i < l; i++) {\n        const option = el.options[i];\n        const optionValue = getValue(option);\n        if (isMultiple) {\n            if (isArray(value)) {\n                option.selected = looseIndexOf(value, optionValue) > -1;\n            }\n            else {\n                option.selected = value.has(optionValue);\n            }\n        }\n        else {\n            if (looseEqual(getValue(option), value)) {\n                if (el.selectedIndex !== i)\n                    el.selectedIndex = i;\n                return;\n            }\n        }\n    }\n    if (!isMultiple && el.selectedIndex !== -1) {\n        el.selectedIndex = -1;\n    }\n}\n// retrieve raw value set via :value bindings\nfunction getValue(el) {\n    return '_value' in el ? el._value : el.value;\n}\n// retrieve raw value for true-value and false-value set via :true-value or :false-value bindings\nfunction getCheckboxValue(el, checked) {\n    const key = checked ? '_trueValue' : '_falseValue';\n    return key in el ? el[key] : checked;\n}\nconst vModelDynamic = {\n    created(el, binding, vnode) {\n        callModelHook(el, binding, vnode, null, 'created');\n    },\n    mounted(el, binding, vnode) {\n        callModelHook(el, binding, vnode, null, 'mounted');\n    },\n    beforeUpdate(el, binding, vnode, prevVNode) {\n        callModelHook(el, binding, vnode, prevVNode, 'beforeUpdate');\n    },\n    updated(el, binding, vnode, prevVNode) {\n        callModelHook(el, binding, vnode, prevVNode, 'updated');\n    }\n};\nfunction resolveDynamicModel(tagName, type) {\n    switch (tagName) {\n        case 'SELECT':\n            return vModelSelect;\n        case 'TEXTAREA':\n            return vModelText;\n        default:\n            switch (type) {\n                case 'checkbox':\n                    return vModelCheckbox;\n                case 'radio':\n                    return vModelRadio;\n                default:\n                    return vModelText;\n            }\n    }\n}\nfunction callModelHook(el, binding, vnode, prevVNode, hook) {\n    const modelToUse = resolveDynamicModel(el.tagName, vnode.props && vnode.props.type);\n    const fn = modelToUse[hook];\n    fn && fn(el, binding, vnode, prevVNode);\n}\n// SSR vnode transforms, only used when user includes client-oriented render\n// function in SSR\nfunction initVModelForSSR() {\n    vModelText.getSSRProps = ({ value }) => ({ value });\n    vModelRadio.getSSRProps = ({ value }, vnode) => {\n        if (vnode.props && looseEqual(vnode.props.value, value)) {\n            return { checked: true };\n        }\n    };\n    vModelCheckbox.getSSRProps = ({ value }, vnode) => {\n        if (isArray(value)) {\n            if (vnode.props && looseIndexOf(value, vnode.props.value) > -1) {\n                return { checked: true };\n            }\n        }\n        else if (isSet(value)) {\n            if (vnode.props && value.has(vnode.props.value)) {\n                return { checked: true };\n            }\n        }\n        else if (value) {\n            return { checked: true };\n        }\n    };\n    vModelDynamic.getSSRProps = (binding, vnode) => {\n        if (typeof vnode.type !== 'string') {\n            return;\n        }\n        const modelToUse = resolveDynamicModel(\n        // resolveDynamicModel expects an uppercase tag name, but vnode.type is lowercase\n        vnode.type.toUpperCase(), vnode.props && vnode.props.type);\n        if (modelToUse.getSSRProps) {\n            return modelToUse.getSSRProps(binding, vnode);\n        }\n    };\n}\n\nconst systemModifiers = ['ctrl', 'shift', 'alt', 'meta'];\nconst modifierGuards = {\n    stop: e => e.stopPropagation(),\n    prevent: e => e.preventDefault(),\n    self: e => e.target !== e.currentTarget,\n    ctrl: e => !e.ctrlKey,\n    shift: e => !e.shiftKey,\n    alt: e => !e.altKey,\n    meta: e => !e.metaKey,\n    left: e => 'button' in e && e.button !== 0,\n    middle: e => 'button' in e && e.button !== 1,\n    right: e => 'button' in e && e.button !== 2,\n    exact: (e, modifiers) => systemModifiers.some(m => e[`${m}Key`] && !modifiers.includes(m))\n};\n/**\n * @private\n */\nconst withModifiers = (fn, modifiers) => {\n    return (event, ...args) => {\n        for (let i = 0; i < modifiers.length; i++) {\n            const guard = modifierGuards[modifiers[i]];\n            if (guard && guard(event, modifiers))\n                return;\n        }\n        return fn(event, ...args);\n    };\n};\n// Kept for 2.x compat.\n// Note: IE11 compat for `spacebar` and `del` is removed for now.\nconst keyNames = {\n    esc: 'escape',\n    space: ' ',\n    up: 'arrow-up',\n    left: 'arrow-left',\n    right: 'arrow-right',\n    down: 'arrow-down',\n    delete: 'backspace'\n};\n/**\n * @private\n */\nconst withKeys = (fn, modifiers) => {\n    return (event) => {\n        if (!('key' in event)) {\n            return;\n        }\n        const eventKey = hyphenate(event.key);\n        if (modifiers.some(k => k === eventKey || keyNames[k] === eventKey)) {\n            return fn(event);\n        }\n    };\n};\n\nconst vShow = {\n    beforeMount(el, { value }, { transition }) {\n        el._vod = el.style.display === 'none' ? '' : el.style.display;\n        if (transition && value) {\n            transition.beforeEnter(el);\n        }\n        else {\n            setDisplay(el, value);\n        }\n    },\n    mounted(el, { value }, { transition }) {\n        if (transition && value) {\n            transition.enter(el);\n        }\n    },\n    updated(el, { value, oldValue }, { transition }) {\n        if (!value === !oldValue)\n            return;\n        if (transition) {\n            if (value) {\n                transition.beforeEnter(el);\n                setDisplay(el, true);\n                transition.enter(el);\n            }\n            else {\n                transition.leave(el, () => {\n                    setDisplay(el, false);\n                });\n            }\n        }\n        else {\n            setDisplay(el, value);\n        }\n    },\n    beforeUnmount(el, { value }) {\n        setDisplay(el, value);\n    }\n};\nfunction setDisplay(el, value) {\n    el.style.display = value ? el._vod : 'none';\n}\n// SSR vnode transforms, only used when user includes client-oriented render\n// function in SSR\nfunction initVShowForSSR() {\n    vShow.getSSRProps = ({ value }) => {\n        if (!value) {\n            return { style: { display: 'none' } };\n        }\n    };\n}\n\nconst rendererOptions = /*#__PURE__*/ extend({ patchProp }, nodeOps);\n// lazy create the renderer - this makes core renderer logic tree-shakable\n// in case the user only imports reactivity utilities from Vue.\nlet renderer;\nlet enabledHydration = false;\nfunction ensureRenderer() {\n    return (renderer ||\n        (renderer = createRenderer(rendererOptions)));\n}\nfunction ensureHydrationRenderer() {\n    renderer = enabledHydration\n        ? renderer\n        : createHydrationRenderer(rendererOptions);\n    enabledHydration = true;\n    return renderer;\n}\n// use explicit type casts here to avoid import() calls in rolled-up d.ts\nconst render = ((...args) => {\n    ensureRenderer().render(...args);\n});\nconst hydrate = ((...args) => {\n    ensureHydrationRenderer().hydrate(...args);\n});\nconst createApp = ((...args) => {\n    const app = ensureRenderer().createApp(...args);\n    if ((process.env.NODE_ENV !== 'production')) {\n        injectNativeTagCheck(app);\n        injectCompilerOptionsCheck(app);\n    }\n    const { mount } = app;\n    app.mount = (containerOrSelector) => {\n        const container = normalizeContainer(containerOrSelector);\n        if (!container)\n            return;\n        const component = app._component;\n        if (!isFunction(component) && !component.render && !component.template) {\n            // __UNSAFE__\n            // Reason: potential execution of JS expressions in in-DOM template.\n            // The user must make sure the in-DOM template is trusted. If it's\n            // rendered by the server, the template should not contain any user data.\n            component.template = container.innerHTML;\n        }\n        // clear content before mounting\n        container.innerHTML = '';\n        const proxy = mount(container, false, container instanceof SVGElement);\n        if (container instanceof Element) {\n            container.removeAttribute('v-cloak');\n            container.setAttribute('data-v-app', '');\n        }\n        return proxy;\n    };\n    return app;\n});\nconst createSSRApp = ((...args) => {\n    const app = ensureHydrationRenderer().createApp(...args);\n    if ((process.env.NODE_ENV !== 'production')) {\n        injectNativeTagCheck(app);\n        injectCompilerOptionsCheck(app);\n    }\n    const { mount } = app;\n    app.mount = (containerOrSelector) => {\n        const container = normalizeContainer(containerOrSelector);\n        if (container) {\n            return mount(container, true, container instanceof SVGElement);\n        }\n    };\n    return app;\n});\nfunction injectNativeTagCheck(app) {\n    // Inject `isNativeTag`\n    // this is used for component name validation (dev only)\n    Object.defineProperty(app.config, 'isNativeTag', {\n        value: (tag) => isHTMLTag(tag) || isSVGTag(tag),\n        writable: false\n    });\n}\n// dev only\nfunction injectCompilerOptionsCheck(app) {\n    if (isRuntimeOnly()) {\n        const isCustomElement = app.config.isCustomElement;\n        Object.defineProperty(app.config, 'isCustomElement', {\n            get() {\n                return isCustomElement;\n            },\n            set() {\n                warn(`The \\`isCustomElement\\` config option is deprecated. Use ` +\n                    `\\`compilerOptions.isCustomElement\\` instead.`);\n            }\n        });\n        const compilerOptions = app.config.compilerOptions;\n        const msg = `The \\`compilerOptions\\` config option is only respected when using ` +\n            `a build of Vue.js that includes the runtime compiler (aka \"full build\"). ` +\n            `Since you are using the runtime-only build, \\`compilerOptions\\` ` +\n            `must be passed to \\`@vue/compiler-dom\\` in the build setup instead.\\n` +\n            `- For vue-loader: pass it via vue-loader's \\`compilerOptions\\` loader option.\\n` +\n            `- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\\n` +\n            `- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom`;\n        Object.defineProperty(app.config, 'compilerOptions', {\n            get() {\n                warn(msg);\n                return compilerOptions;\n            },\n            set() {\n                warn(msg);\n            }\n        });\n    }\n}\nfunction normalizeContainer(container) {\n    if (isString(container)) {\n        const res = document.querySelector(container);\n        if ((process.env.NODE_ENV !== 'production') && !res) {\n            warn(`Failed to mount app: mount target selector \"${container}\" returned null.`);\n        }\n        return res;\n    }\n    if ((process.env.NODE_ENV !== 'production') &&\n        window.ShadowRoot &&\n        container instanceof window.ShadowRoot &&\n        container.mode === 'closed') {\n        warn(`mounting on a ShadowRoot with \\`{mode: \"closed\"}\\` may lead to unpredictable bugs`);\n    }\n    return container;\n}\nlet ssrDirectiveInitialized = false;\n/**\n * @internal\n */\nconst initDirectivesForSSR = () => {\n        if (!ssrDirectiveInitialized) {\n            ssrDirectiveInitialized = true;\n            initVModelForSSR();\n            initVShowForSSR();\n        }\n    }\n    ;\n\nexport { Transition, TransitionGroup, VueElement, createApp, createSSRApp, defineCustomElement, defineSSRCustomElement, hydrate, initDirectivesForSSR, render, useCssModule, useCssVars, vModelCheckbox, vModelDynamic, vModelRadio, vModelSelect, vModelText, vShow, withKeys, withModifiers };\n","import { inBrowser } from \"./basic.mjs\";\nconst isDef = (val) => val !== void 0 && val !== null;\nconst isFunction = (val) => typeof val === \"function\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => isObject(val) && isFunction(val.then) && isFunction(val.catch);\nconst isDate = (val) => Object.prototype.toString.call(val) === \"[object Date]\" && !Number.isNaN(val.getTime());\nfunction isMobile(value) {\n  value = value.replace(/[^-|\\d]/g, \"\");\n  return /^((\\+86)|(86))?(1)\\d{10}$/.test(value) || /^0[0-9-]{10,13}$/.test(value);\n}\nconst isNumeric = (val) => typeof val === \"number\" || /^\\d+(\\.\\d+)?$/.test(val);\nconst isIOS = () => inBrowser ? /ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()) : false;\nexport {\n  isDate,\n  isDef,\n  isFunction,\n  isIOS,\n  isMobile,\n  isNumeric,\n  isObject,\n  isPromise\n};\n","import { isObject } from \"./validate.mjs\";\nfunction noop() {\n}\nconst extend = Object.assign;\nconst inBrowser = typeof window !== \"undefined\";\nfunction get(object, path) {\n  const keys = path.split(\".\");\n  let result = object;\n  keys.forEach((key) => {\n    var _a;\n    result = isObject(result) ? (_a = result[key]) != null ? _a : \"\" : \"\";\n  });\n  return result;\n}\nfunction pick(obj, keys, ignoreUndefined) {\n  return keys.reduce((ret, key) => {\n    if (!ignoreUndefined || obj[key] !== void 0) {\n      ret[key] = obj[key];\n    }\n    return ret;\n  }, {});\n}\nconst toArray = (item) => Array.isArray(item) ? item : [item];\nexport {\n  extend,\n  get,\n  inBrowser,\n  noop,\n  pick,\n  toArray\n};\n","const unknownProp = null;\nconst numericProp = [Number, String];\nconst truthProp = {\n  type: Boolean,\n  default: true\n};\nconst makeRequiredProp = (type) => ({\n  type,\n  required: true\n});\nconst makeArrayProp = () => ({\n  type: Array,\n  default: () => []\n});\nconst makeNumberProp = (defaultVal) => ({\n  type: Number,\n  default: defaultVal\n});\nconst makeNumericProp = (defaultVal) => ({\n  type: numericProp,\n  default: defaultVal\n});\nconst makeStringProp = (defaultVal) => ({\n  type: String,\n  default: defaultVal\n});\nexport {\n  makeArrayProp,\n  makeNumberProp,\n  makeNumericProp,\n  makeRequiredProp,\n  makeStringProp,\n  numericProp,\n  truthProp,\n  unknownProp\n};\n","// src/utils.ts\nvar inBrowser = typeof window !== \"undefined\";\nvar supportsPassive = true;\nfunction raf(fn) {\n  return inBrowser ? requestAnimationFrame(fn) : -1;\n}\nfunction cancelRaf(id) {\n  if (inBrowser) {\n    cancelAnimationFrame(id);\n  }\n}\nfunction doubleRaf(fn) {\n  raf(() => raf(fn));\n}\n\n// src/useRect/index.ts\nimport { unref } from \"vue\";\nvar isWindow = (val) => val === window;\nvar makeDOMRect = (width2, height2) => ({\n  top: 0,\n  left: 0,\n  right: width2,\n  bottom: height2,\n  width: width2,\n  height: height2\n});\nvar useRect = (elementOrRef) => {\n  const element = unref(elementOrRef);\n  if (isWindow(element)) {\n    const width2 = element.innerWidth;\n    const height2 = element.innerHeight;\n    return makeDOMRect(width2, height2);\n  }\n  if (element == null ? void 0 : element.getBoundingClientRect) {\n    return element.getBoundingClientRect();\n  }\n  return makeDOMRect(0, 0);\n};\n\n// src/useToggle/index.ts\nimport { ref } from \"vue\";\nfunction useToggle(defaultValue = false) {\n  const state = ref(defaultValue);\n  const toggle = (value = !state.value) => {\n    state.value = value;\n  };\n  return [state, toggle];\n}\n\n// src/useRelation/useParent.ts\nimport {\n  ref as ref2,\n  inject,\n  computed,\n  onUnmounted,\n  getCurrentInstance\n} from \"vue\";\nfunction useParent(key) {\n  const parent = inject(key, null);\n  if (parent) {\n    const instance = getCurrentInstance();\n    const { link, unlink, internalChildren } = parent;\n    link(instance);\n    onUnmounted(() => unlink(instance));\n    const index = computed(() => internalChildren.indexOf(instance));\n    return {\n      parent,\n      index\n    };\n  }\n  return {\n    parent: null,\n    index: ref2(-1)\n  };\n}\n\n// src/useRelation/useChildren.ts\nimport {\n  isVNode,\n  provide,\n  reactive,\n  getCurrentInstance as getCurrentInstance2\n} from \"vue\";\nfunction flattenVNodes(children) {\n  const result = [];\n  const traverse = (children2) => {\n    if (Array.isArray(children2)) {\n      children2.forEach((child) => {\n        var _a;\n        if (isVNode(child)) {\n          result.push(child);\n          if ((_a = child.component) == null ? void 0 : _a.subTree) {\n            result.push(child.component.subTree);\n            traverse(child.component.subTree.children);\n          }\n          if (child.children) {\n            traverse(child.children);\n          }\n        }\n      });\n    }\n  };\n  traverse(children);\n  return result;\n}\nfunction sortChildren(parent, publicChildren, internalChildren) {\n  const vnodes = flattenVNodes(parent.subTree.children);\n  internalChildren.sort(\n    (a, b) => vnodes.indexOf(a.vnode) - vnodes.indexOf(b.vnode)\n  );\n  const orderedPublicChildren = internalChildren.map((item) => item.proxy);\n  publicChildren.sort((a, b) => {\n    const indexA = orderedPublicChildren.indexOf(a);\n    const indexB = orderedPublicChildren.indexOf(b);\n    return indexA - indexB;\n  });\n}\nfunction useChildren(key) {\n  const publicChildren = reactive([]);\n  const internalChildren = reactive([]);\n  const parent = getCurrentInstance2();\n  const linkChildren = (value) => {\n    const link = (child) => {\n      if (child.proxy) {\n        internalChildren.push(child);\n        publicChildren.push(child.proxy);\n        sortChildren(parent, publicChildren, internalChildren);\n      }\n    };\n    const unlink = (child) => {\n      const index = internalChildren.indexOf(child);\n      publicChildren.splice(index, 1);\n      internalChildren.splice(index, 1);\n    };\n    provide(\n      key,\n      Object.assign(\n        {\n          link,\n          unlink,\n          children: publicChildren,\n          internalChildren\n        },\n        value\n      )\n    );\n  };\n  return {\n    children: publicChildren,\n    linkChildren\n  };\n}\n\n// src/useCountDown/index.ts\nimport {\n  ref as ref3,\n  computed as computed2,\n  onActivated,\n  onDeactivated,\n  onBeforeUnmount\n} from \"vue\";\nvar SECOND = 1e3;\nvar MINUTE = 60 * SECOND;\nvar HOUR = 60 * MINUTE;\nvar DAY = 24 * HOUR;\nfunction parseTime(time) {\n  const days = Math.floor(time / DAY);\n  const hours = Math.floor(time % DAY / HOUR);\n  const minutes = Math.floor(time % HOUR / MINUTE);\n  const seconds = Math.floor(time % MINUTE / SECOND);\n  const milliseconds = Math.floor(time % SECOND);\n  return {\n    total: time,\n    days,\n    hours,\n    minutes,\n    seconds,\n    milliseconds\n  };\n}\nfunction isSameSecond(time1, time2) {\n  return Math.floor(time1 / 1e3) === Math.floor(time2 / 1e3);\n}\nfunction useCountDown(options) {\n  let rafId;\n  let endTime;\n  let counting;\n  let deactivated;\n  const remain = ref3(options.time);\n  const current = computed2(() => parseTime(remain.value));\n  const pause = () => {\n    counting = false;\n    cancelRaf(rafId);\n  };\n  const getCurrentRemain = () => Math.max(endTime - Date.now(), 0);\n  const setRemain = (value) => {\n    var _a, _b;\n    remain.value = value;\n    (_a = options.onChange) == null ? void 0 : _a.call(options, current.value);\n    if (value === 0) {\n      pause();\n      (_b = options.onFinish) == null ? void 0 : _b.call(options);\n    }\n  };\n  const microTick = () => {\n    rafId = raf(() => {\n      if (counting) {\n        setRemain(getCurrentRemain());\n        if (remain.value > 0) {\n          microTick();\n        }\n      }\n    });\n  };\n  const macroTick = () => {\n    rafId = raf(() => {\n      if (counting) {\n        const remainRemain = getCurrentRemain();\n        if (!isSameSecond(remainRemain, remain.value) || remainRemain === 0) {\n          setRemain(remainRemain);\n        }\n        if (remain.value > 0) {\n          macroTick();\n        }\n      }\n    });\n  };\n  const tick = () => {\n    if (!inBrowser) {\n      return;\n    }\n    if (options.millisecond) {\n      microTick();\n    } else {\n      macroTick();\n    }\n  };\n  const start = () => {\n    if (!counting) {\n      endTime = Date.now() + remain.value;\n      counting = true;\n      tick();\n    }\n  };\n  const reset = (totalTime = options.time) => {\n    pause();\n    remain.value = totalTime;\n  };\n  onBeforeUnmount(pause);\n  onActivated(() => {\n    if (deactivated) {\n      counting = true;\n      deactivated = false;\n      tick();\n    }\n  });\n  onDeactivated(() => {\n    if (counting) {\n      pause();\n      deactivated = true;\n    }\n  });\n  return {\n    start,\n    pause,\n    reset,\n    current\n  };\n}\n\n// src/useClickAway/index.ts\nimport { unref as unref3 } from \"vue\";\n\n// src/useEventListener/index.ts\nimport { watch, isRef, unref as unref2, onUnmounted as onUnmounted2, onDeactivated as onDeactivated2 } from \"vue\";\n\n// src/onMountedOrActivated/index.ts\nimport { nextTick, onMounted, onActivated as onActivated2 } from \"vue\";\nfunction onMountedOrActivated(hook) {\n  let mounted;\n  onMounted(() => {\n    hook();\n    nextTick(() => {\n      mounted = true;\n    });\n  });\n  onActivated2(() => {\n    if (mounted) {\n      hook();\n    }\n  });\n}\n\n// src/useEventListener/index.ts\nfunction useEventListener(type, listener, options = {}) {\n  if (!inBrowser) {\n    return;\n  }\n  const { target = window, passive = false, capture = false } = options;\n  let attached;\n  const add = (target2) => {\n    const element = unref2(target2);\n    if (element && !attached) {\n      element.addEventListener(type, listener, {\n        capture,\n        passive\n      });\n      attached = true;\n    }\n  };\n  const remove = (target2) => {\n    const element = unref2(target2);\n    if (element && attached) {\n      element.removeEventListener(type, listener, capture);\n      attached = false;\n    }\n  };\n  onUnmounted2(() => remove(target));\n  onDeactivated2(() => remove(target));\n  onMountedOrActivated(() => add(target));\n  if (isRef(target)) {\n    watch(target, (val, oldVal) => {\n      remove(oldVal);\n      add(val);\n    });\n  }\n}\n\n// src/useClickAway/index.ts\nfunction useClickAway(target, listener, options = {}) {\n  if (!inBrowser) {\n    return;\n  }\n  const { eventName = \"click\" } = options;\n  const onClick = (event) => {\n    const targets = Array.isArray(target) ? target : [target];\n    const isClickAway = targets.every((item) => {\n      const element = unref3(item);\n      return element && !element.contains(event.target);\n    });\n    if (isClickAway) {\n      listener(event);\n    }\n  };\n  useEventListener(eventName, onClick, { target: document });\n}\n\n// src/useWindowSize/index.ts\nimport { ref as ref4 } from \"vue\";\nvar width;\nvar height;\nfunction useWindowSize() {\n  if (!width) {\n    width = ref4(0);\n    height = ref4(0);\n    if (inBrowser) {\n      const update = () => {\n        width.value = window.innerWidth;\n        height.value = window.innerHeight;\n      };\n      update();\n      window.addEventListener(\"resize\", update, { passive: true });\n      window.addEventListener(\"orientationchange\", update, { passive: true });\n    }\n  }\n  return { width, height };\n}\n\n// src/useScrollParent/index.ts\nimport { ref as ref5, onMounted as onMounted2 } from \"vue\";\nvar overflowScrollReg = /scroll|auto|overlay/i;\nvar defaultRoot = inBrowser ? window : void 0;\nfunction isElement(node) {\n  const ELEMENT_NODE_TYPE = 1;\n  return node.tagName !== \"HTML\" && node.tagName !== \"BODY\" && node.nodeType === ELEMENT_NODE_TYPE;\n}\nfunction getScrollParent(el, root = defaultRoot) {\n  let node = el;\n  while (node && node !== root && isElement(node)) {\n    const { overflowY } = window.getComputedStyle(node);\n    if (overflowScrollReg.test(overflowY)) {\n      return node;\n    }\n    node = node.parentNode;\n  }\n  return root;\n}\nfunction useScrollParent(el, root = defaultRoot) {\n  const scrollParent = ref5();\n  onMounted2(() => {\n    if (el.value) {\n      scrollParent.value = getScrollParent(el.value, root);\n    }\n  });\n  return scrollParent;\n}\n\n// src/usePageVisibility/index.ts\nimport { ref as ref6 } from \"vue\";\nvar visibility;\nfunction usePageVisibility() {\n  if (!visibility) {\n    visibility = ref6(\"visible\");\n    if (inBrowser) {\n      const update = () => {\n        visibility.value = document.hidden ? \"hidden\" : \"visible\";\n      };\n      update();\n      window.addEventListener(\"visibilitychange\", update);\n    }\n  }\n  return visibility;\n}\n\n// src/useCustomFieldValue/index.ts\nimport { watch as watch2, inject as inject2 } from \"vue\";\nvar CUSTOM_FIELD_INJECTION_KEY = Symbol(\"van-field\");\nfunction useCustomFieldValue(customValue) {\n  const field = inject2(CUSTOM_FIELD_INJECTION_KEY, null);\n  if (field && !field.customValue.value) {\n    field.customValue.value = customValue;\n    watch2(customValue, () => {\n      field.resetValidation();\n      field.validateWithTrigger(\"onChange\");\n    });\n  }\n}\nexport {\n  CUSTOM_FIELD_INJECTION_KEY,\n  cancelRaf,\n  doubleRaf,\n  flattenVNodes,\n  getScrollParent,\n  inBrowser,\n  onMountedOrActivated,\n  raf,\n  sortChildren,\n  supportsPassive,\n  useChildren,\n  useClickAway,\n  useCountDown,\n  useCustomFieldValue,\n  useEventListener,\n  usePageVisibility,\n  useParent,\n  useRect,\n  useScrollParent,\n  useToggle,\n  useWindowSize\n};\n","import { useRect, useWindowSize } from \"@vant/use\";\nimport { unref } from \"vue\";\nimport { isIOS as checkIsIOS } from \"./validate.mjs\";\nfunction getScrollTop(el) {\n  const top = \"scrollTop\" in el ? el.scrollTop : el.pageYOffset;\n  return Math.max(top, 0);\n}\nfunction setScrollTop(el, value) {\n  if (\"scrollTop\" in el) {\n    el.scrollTop = value;\n  } else {\n    el.scrollTo(el.scrollX, value);\n  }\n}\nfunction getRootScrollTop() {\n  return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n}\nfunction setRootScrollTop(value) {\n  setScrollTop(window, value);\n  setScrollTop(document.body, value);\n}\nfunction getElementTop(el, scroller) {\n  if (el === window) {\n    return 0;\n  }\n  const scrollTop = scroller ? getScrollTop(scroller) : getRootScrollTop();\n  return useRect(el).top + scrollTop;\n}\nconst isIOS = checkIsIOS();\nfunction resetScroll() {\n  if (isIOS) {\n    setRootScrollTop(getRootScrollTop());\n  }\n}\nconst stopPropagation = (event) => event.stopPropagation();\nfunction preventDefault(event, isStopPropagation) {\n  if (typeof event.cancelable !== \"boolean\" || event.cancelable) {\n    event.preventDefault();\n  }\n  if (isStopPropagation) {\n    stopPropagation(event);\n  }\n}\nfunction isHidden(elementRef) {\n  const el = unref(elementRef);\n  if (!el) {\n    return false;\n  }\n  const style = window.getComputedStyle(el);\n  const hidden = style.display === \"none\";\n  const parentHidden = el.offsetParent === null && style.position !== \"fixed\";\n  return hidden || parentHidden;\n}\nconst { width: windowWidth, height: windowHeight } = useWindowSize();\nexport {\n  getElementTop,\n  getRootScrollTop,\n  getScrollTop,\n  isHidden,\n  preventDefault,\n  resetScroll,\n  setRootScrollTop,\n  setScrollTop,\n  stopPropagation,\n  windowHeight,\n  windowWidth\n};\n","import { inBrowser } from \"./basic.mjs\";\nimport { windowWidth, windowHeight } from \"./dom.mjs\";\nimport { isDef, isNumeric } from \"./validate.mjs\";\nfunction addUnit(value) {\n  if (isDef(value)) {\n    return isNumeric(value) ? `${value}px` : String(value);\n  }\n  return void 0;\n}\nfunction getSizeStyle(originSize) {\n  if (isDef(originSize)) {\n    if (Array.isArray(originSize)) {\n      return {\n        width: addUnit(originSize[0]),\n        height: addUnit(originSize[1])\n      };\n    }\n    const size = addUnit(originSize);\n    return {\n      width: size,\n      height: size\n    };\n  }\n}\nfunction getZIndexStyle(zIndex) {\n  const style = {};\n  if (zIndex !== void 0) {\n    style.zIndex = +zIndex;\n  }\n  return style;\n}\nlet rootFontSize;\nfunction getRootFontSize() {\n  if (!rootFontSize) {\n    const doc = document.documentElement;\n    const fontSize = doc.style.fontSize || window.getComputedStyle(doc).fontSize;\n    rootFontSize = parseFloat(fontSize);\n  }\n  return rootFontSize;\n}\nfunction convertRem(value) {\n  value = value.replace(/rem/g, \"\");\n  return +value * getRootFontSize();\n}\nfunction convertVw(value) {\n  value = value.replace(/vw/g, \"\");\n  return +value * windowWidth.value / 100;\n}\nfunction convertVh(value) {\n  value = value.replace(/vh/g, \"\");\n  return +value * windowHeight.value / 100;\n}\nfunction unitToPx(value) {\n  if (typeof value === \"number\") {\n    return value;\n  }\n  if (inBrowser) {\n    if (value.includes(\"rem\")) {\n      return convertRem(value);\n    }\n    if (value.includes(\"vw\")) {\n      return convertVw(value);\n    }\n    if (value.includes(\"vh\")) {\n      return convertVh(value);\n    }\n  }\n  return parseFloat(value);\n}\nconst camelizeRE = /-(\\w)/g;\nconst camelize = (str) => str.replace(camelizeRE, (_, c) => c.toUpperCase());\nconst kebabCase = (str) => str.replace(/([A-Z])/g, \"-$1\").toLowerCase().replace(/^-/, \"\");\nfunction padZero(num, targetLength = 2) {\n  let str = num + \"\";\n  while (str.length < targetLength) {\n    str = \"0\" + str;\n  }\n  return str;\n}\nconst clamp = (num, min, max) => Math.min(Math.max(num, min), max);\nfunction trimExtraChar(value, char, regExp) {\n  const index = value.indexOf(char);\n  if (index === -1) {\n    return value;\n  }\n  if (char === \"-\" && index !== 0) {\n    return value.slice(0, index);\n  }\n  return value.slice(0, index + 1) + value.slice(index).replace(regExp, \"\");\n}\nfunction formatNumber(value, allowDot = true, allowMinus = true) {\n  if (allowDot) {\n    value = trimExtraChar(value, \".\", /\\./g);\n  } else {\n    value = value.split(\".\")[0];\n  }\n  if (allowMinus) {\n    value = trimExtraChar(value, \"-\", /-/g);\n  } else {\n    value = value.replace(/-/, \"\");\n  }\n  const regExp = allowDot ? /[^-0-9.]/g : /[^-0-9]/g;\n  return value.replace(regExp, \"\");\n}\nfunction addNumber(num1, num2) {\n  const cardinal = 10 ** 10;\n  return Math.round((num1 + num2) * cardinal) / cardinal;\n}\nexport {\n  addNumber,\n  addUnit,\n  camelize,\n  clamp,\n  formatNumber,\n  getSizeStyle,\n  getZIndexStyle,\n  kebabCase,\n  padZero,\n  unitToPx\n};\n","import { isDef, isObject } from \"./validate.mjs\";\nconst { hasOwnProperty } = Object.prototype;\nfunction assignKey(to, from, key) {\n  const val = from[key];\n  if (!isDef(val)) {\n    return;\n  }\n  if (!hasOwnProperty.call(to, key) || !isObject(val)) {\n    to[key] = val;\n  } else {\n    to[key] = deepAssign(Object(to[key]), val);\n  }\n}\nfunction deepAssign(to, from) {\n  Object.keys(from).forEach((key) => {\n    assignKey(to, from, key);\n  });\n  return to;\n}\nexport {\n  deepAssign\n};\n","var stdin_default = {\n  name: \"\\u59D3\\u540D\",\n  tel: \"\\u7535\\u8BDD\",\n  save: \"\\u4FDD\\u5B58\",\n  confirm: \"\\u786E\\u8BA4\",\n  cancel: \"\\u53D6\\u6D88\",\n  delete: \"\\u5220\\u9664\",\n  loading: \"\\u52A0\\u8F7D\\u4E2D...\",\n  noCoupon: \"\\u6682\\u65E0\\u4F18\\u60E0\\u5238\",\n  nameEmpty: \"\\u8BF7\\u586B\\u5199\\u59D3\\u540D\",\n  addContact: \"\\u6DFB\\u52A0\\u8054\\u7CFB\\u4EBA\",\n  telInvalid: \"\\u8BF7\\u586B\\u5199\\u6B63\\u786E\\u7684\\u7535\\u8BDD\",\n  vanCalendar: {\n    end: \"\\u7ED3\\u675F\",\n    start: \"\\u5F00\\u59CB\",\n    title: \"\\u65E5\\u671F\\u9009\\u62E9\",\n    weekdays: [\"\\u65E5\", \"\\u4E00\", \"\\u4E8C\", \"\\u4E09\", \"\\u56DB\", \"\\u4E94\", \"\\u516D\"],\n    monthTitle: (year, month) => `${year}\\u5E74${month}\\u6708`,\n    rangePrompt: (maxRange) => `\\u6700\\u591A\\u9009\\u62E9 ${maxRange} \\u5929`\n  },\n  vanCascader: {\n    select: \"\\u8BF7\\u9009\\u62E9\"\n  },\n  vanPagination: {\n    prev: \"\\u4E0A\\u4E00\\u9875\",\n    next: \"\\u4E0B\\u4E00\\u9875\"\n  },\n  vanPullRefresh: {\n    pulling: \"\\u4E0B\\u62C9\\u5373\\u53EF\\u5237\\u65B0...\",\n    loosing: \"\\u91CA\\u653E\\u5373\\u53EF\\u5237\\u65B0...\"\n  },\n  vanSubmitBar: {\n    label: \"\\u5408\\u8BA1:\"\n  },\n  vanCoupon: {\n    unlimited: \"\\u65E0\\u95E8\\u69DB\",\n    discount: (discount) => `${discount}\\u6298`,\n    condition: (condition) => `\\u6EE1${condition}\\u5143\\u53EF\\u7528`\n  },\n  vanCouponCell: {\n    title: \"\\u4F18\\u60E0\\u5238\",\n    count: (count) => `${count}\\u5F20\\u53EF\\u7528`\n  },\n  vanCouponList: {\n    exchange: \"\\u5151\\u6362\",\n    close: \"\\u4E0D\\u4F7F\\u7528\",\n    enable: \"\\u53EF\\u7528\",\n    disabled: \"\\u4E0D\\u53EF\\u7528\",\n    placeholder: \"\\u8F93\\u5165\\u4F18\\u60E0\\u7801\"\n  },\n  vanAddressEdit: {\n    area: \"\\u5730\\u533A\",\n    postal: \"\\u90AE\\u653F\\u7F16\\u7801\",\n    areaEmpty: \"\\u8BF7\\u9009\\u62E9\\u5730\\u533A\",\n    addressEmpty: \"\\u8BF7\\u586B\\u5199\\u8BE6\\u7EC6\\u5730\\u5740\",\n    postalEmpty: \"\\u90AE\\u653F\\u7F16\\u7801\\u4E0D\\u6B63\\u786E\",\n    addressDetail: \"\\u8BE6\\u7EC6\\u5730\\u5740\",\n    defaultAddress: \"\\u8BBE\\u4E3A\\u9ED8\\u8BA4\\u6536\\u8D27\\u5730\\u5740\"\n  },\n  vanAddressList: {\n    add: \"\\u65B0\\u589E\\u5730\\u5740\"\n  }\n};\nexport {\n  stdin_default as default\n};\n","import { ref, reactive } from \"vue\";\nimport { deepAssign } from \"../utils/deep-assign.mjs\";\nimport defaultMessages from \"./lang/zh-CN.mjs\";\nconst lang = ref(\"zh-CN\");\nconst messages = reactive({\n  \"zh-CN\": defaultMessages\n});\nconst Locale = {\n  messages() {\n    return messages[lang.value];\n  },\n  use(newLang, newMessages) {\n    lang.value = newLang;\n    this.add({ [newLang]: newMessages });\n  },\n  add(newMessages = {}) {\n    deepAssign(messages, newMessages);\n  }\n};\nvar stdin_default = Locale;\nexport {\n  Locale,\n  stdin_default as default\n};\n","import { get } from \"./basic.mjs\";\nimport { camelize } from \"./format.mjs\";\nimport { isFunction } from \"./validate.mjs\";\nimport locale from \"../locale/index.mjs\";\nfunction createTranslate(name) {\n  const prefix = camelize(name) + \".\";\n  return (path, ...args) => {\n    const messages = locale.messages();\n    const message = get(messages, prefix + path) || get(messages, path);\n    return isFunction(message) ? message(...args) : message;\n  };\n}\nfunction genBem(name, mods) {\n  if (!mods) {\n    return \"\";\n  }\n  if (typeof mods === \"string\") {\n    return ` ${name}--${mods}`;\n  }\n  if (Array.isArray(mods)) {\n    return mods.reduce(\n      (ret, item) => ret + genBem(name, item),\n      \"\"\n    );\n  }\n  return Object.keys(mods).reduce(\n    (ret, key) => ret + (mods[key] ? genBem(name, key) : \"\"),\n    \"\"\n  );\n}\nfunction createBEM(name) {\n  return (el, mods) => {\n    if (el && typeof el !== \"string\") {\n      mods = el;\n      el = \"\";\n    }\n    el = el ? `${name}__${el}` : name;\n    return `${el}${genBem(el, mods)}`;\n  };\n}\nfunction createNamespace(name) {\n  const prefixedName = `van-${name}`;\n  return [\n    prefixedName,\n    createBEM(prefixedName),\n    createTranslate(prefixedName)\n  ];\n}\nexport {\n  createBEM,\n  createNamespace,\n  createTranslate\n};\n","const BORDER = \"van-hairline\";\nconst BORDER_TOP = `${BORDER}--top`;\nconst BORDER_LEFT = `${BORDER}--left`;\nconst BORDER_BOTTOM = `${BORDER}--bottom`;\nconst BORDER_SURROUND = `${BORDER}--surround`;\nconst BORDER_TOP_BOTTOM = `${BORDER}--top-bottom`;\nconst BORDER_UNSET_TOP_BOTTOM = `${BORDER}-unset--top-bottom`;\nconst HAPTICS_FEEDBACK = \"van-haptics-feedback\";\nconst FORM_KEY = Symbol(\"van-form\");\nexport {\n  BORDER,\n  BORDER_BOTTOM,\n  BORDER_LEFT,\n  BORDER_SURROUND,\n  BORDER_TOP,\n  BORDER_TOP_BOTTOM,\n  BORDER_UNSET_TOP_BOTTOM,\n  FORM_KEY,\n  HAPTICS_FEEDBACK\n};\n","import { camelize } from \"./format.mjs\";\nfunction withInstall(options) {\n  options.install = (app) => {\n    const { name } = options;\n    if (name) {\n      app.component(name, options);\n      app.component(camelize(`-${name}`), options);\n    }\n  };\n  return options;\n}\nexport {\n  withInstall\n};\n","import { getCurrentInstance } from \"vue\";\nimport { extend } from \"../utils/index.mjs\";\nfunction useExpose(apis) {\n  const instance = getCurrentInstance();\n  if (instance) {\n    extend(instance.proxy, apis);\n  }\n}\nexport {\n  useExpose\n};\n","import {\n  getCurrentInstance\n} from \"vue\";\nconst routeProps = {\n  to: [String, Object],\n  url: String,\n  replace: Boolean\n};\nfunction route({\n  to,\n  url,\n  replace,\n  $router: router\n}) {\n  if (to && router) {\n    router[replace ? \"replace\" : \"push\"](to);\n  } else if (url) {\n    replace ? location.replace(url) : location.href = url;\n  }\n}\nfunction useRoute() {\n  const vm = getCurrentInstance().proxy;\n  return () => route(vm);\n}\nexport {\n  route,\n  routeProps,\n  useRoute\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent } from \"vue\";\nimport { isDef, addUnit, isNumeric, truthProp, numericProp, makeStringProp, createNamespace } from \"../utils/index.mjs\";\nconst [name, bem] = createNamespace(\"badge\");\nconst badgeProps = {\n  dot: Boolean,\n  max: numericProp,\n  tag: makeStringProp(\"div\"),\n  color: String,\n  offset: Array,\n  content: numericProp,\n  showZero: truthProp,\n  position: makeStringProp(\"top-right\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: badgeProps,\n  setup(props, {\n    slots\n  }) {\n    const hasContent = () => {\n      if (slots.content) {\n        return true;\n      }\n      const {\n        content,\n        showZero\n      } = props;\n      return isDef(content) && content !== \"\" && (showZero || content !== 0 && content !== \"0\");\n    };\n    const renderContent = () => {\n      const {\n        dot,\n        max,\n        content\n      } = props;\n      if (!dot && hasContent()) {\n        if (slots.content) {\n          return slots.content();\n        }\n        if (isDef(max) && isNumeric(content) && +content > max) {\n          return `${max}+`;\n        }\n        return content;\n      }\n    };\n    const style = computed(() => {\n      const style2 = {\n        background: props.color\n      };\n      if (props.offset) {\n        const [x, y] = props.offset;\n        if (slots.default) {\n          style2.top = addUnit(y);\n          if (typeof x === \"number\") {\n            style2.right = addUnit(-x);\n          } else {\n            style2.right = x.startsWith(\"-\") ? x.replace(\"-\", \"\") : `-${x}`;\n          }\n        } else {\n          style2.marginTop = addUnit(y);\n          style2.marginLeft = addUnit(x);\n        }\n      }\n      return style2;\n    });\n    const renderBadge = () => {\n      if (hasContent() || props.dot) {\n        return _createVNode(\"div\", {\n          \"class\": bem([props.position, {\n            dot: props.dot,\n            fixed: !!slots.default\n          }]),\n          \"style\": style.value\n        }, [renderContent()]);\n      }\n    };\n    return () => {\n      if (slots.default) {\n        const {\n          tag\n        } = props;\n        return _createVNode(tag, {\n          \"class\": bem(\"wrapper\")\n        }, {\n          default: () => [slots.default(), renderBadge()]\n        });\n      }\n      return renderBadge();\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Badge from \"./Badge.mjs\";\nconst Badge = withInstall(_Badge);\nvar stdin_default = Badge;\nexport {\n  Badge,\n  stdin_default as default\n};\n","let globalZIndex = 2e3;\nconst useGlobalZIndex = () => ++globalZIndex;\nconst setGlobalZIndex = (val) => {\n  globalZIndex = val;\n};\nexport {\n  setGlobalZIndex,\n  useGlobalZIndex\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { provide, computed, watchEffect, defineComponent } from \"vue\";\nimport { kebabCase, makeStringProp, createNamespace } from \"../utils/index.mjs\";\nimport { setGlobalZIndex } from \"../composables/use-global-z-index.mjs\";\nconst [name, bem] = createNamespace(\"config-provider\");\nconst CONFIG_PROVIDER_KEY = Symbol(name);\nconst configProviderProps = {\n  tag: makeStringProp(\"div\"),\n  zIndex: Number,\n  themeVars: Object,\n  iconPrefix: String\n};\nfunction mapThemeVarsToCSSVars(themeVars) {\n  const cssVars = {};\n  Object.keys(themeVars).forEach((key) => {\n    cssVars[`--van-${kebabCase(key)}`] = themeVars[key];\n  });\n  return cssVars;\n}\nvar stdin_default = defineComponent({\n  name,\n  props: configProviderProps,\n  setup(props, {\n    slots\n  }) {\n    const style = computed(() => {\n      if (props.themeVars) {\n        return mapThemeVarsToCSSVars(props.themeVars);\n      }\n    });\n    provide(CONFIG_PROVIDER_KEY, props);\n    watchEffect(() => {\n      if (props.zIndex !== void 0) {\n        setGlobalZIndex(props.zIndex);\n      }\n    });\n    return () => _createVNode(props.tag, {\n      \"class\": bem(),\n      \"style\": style.value\n    }, {\n      default: () => {\n        var _a;\n        return [(_a = slots.default) == null ? void 0 : _a.call(slots)];\n      }\n    });\n  }\n});\nexport {\n  CONFIG_PROVIDER_KEY,\n  stdin_default as default\n};\n","import { mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { inject, computed, defineComponent } from \"vue\";\nimport { addUnit, numericProp, makeStringProp, createNamespace } from \"../utils/index.mjs\";\nimport { Badge } from \"../badge/index.mjs\";\nimport { CONFIG_PROVIDER_KEY } from \"../config-provider/ConfigProvider.mjs\";\nconst [name, bem] = createNamespace(\"icon\");\nconst isImage = (name2) => name2 == null ? void 0 : name2.includes(\"/\");\nconst iconProps = {\n  dot: Boolean,\n  tag: makeStringProp(\"i\"),\n  name: String,\n  size: numericProp,\n  badge: numericProp,\n  color: String,\n  badgeProps: Object,\n  classPrefix: String\n};\nvar stdin_default = defineComponent({\n  name,\n  props: iconProps,\n  setup(props, {\n    slots\n  }) {\n    const config = inject(CONFIG_PROVIDER_KEY, null);\n    const classPrefix = computed(() => props.classPrefix || (config == null ? void 0 : config.iconPrefix) || bem());\n    return () => {\n      const {\n        tag,\n        dot,\n        name: name2,\n        size,\n        badge,\n        color\n      } = props;\n      const isImageIcon = isImage(name2);\n      return _createVNode(Badge, _mergeProps({\n        \"dot\": dot,\n        \"tag\": tag,\n        \"class\": [classPrefix.value, isImageIcon ? \"\" : `${classPrefix.value}-${name2}`],\n        \"style\": {\n          color,\n          fontSize: addUnit(size)\n        },\n        \"content\": badge\n      }, props.badgeProps), {\n        default: () => {\n          var _a;\n          return [(_a = slots.default) == null ? void 0 : _a.call(slots), isImageIcon && _createVNode(\"img\", {\n            \"class\": bem(\"image\"),\n            \"src\": name2\n          }, null)];\n        }\n      });\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Icon from \"./Icon.mjs\";\nconst Icon = withInstall(_Icon);\nvar stdin_default = Icon;\nexport {\n  Icon,\n  stdin_default as default\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent } from \"vue\";\nimport { extend, addUnit, numericProp, getSizeStyle, makeStringProp, createNamespace } from \"../utils/index.mjs\";\nconst [name, bem] = createNamespace(\"loading\");\nconst SpinIcon = Array(12).fill(null).map((_, index) => _createVNode(\"i\", {\n  \"class\": bem(\"line\", String(index + 1))\n}, null));\nconst CircularIcon = _createVNode(\"svg\", {\n  \"class\": bem(\"circular\"),\n  \"viewBox\": \"25 25 50 50\"\n}, [_createVNode(\"circle\", {\n  \"cx\": \"50\",\n  \"cy\": \"50\",\n  \"r\": \"20\",\n  \"fill\": \"none\"\n}, null)]);\nconst loadingProps = {\n  size: numericProp,\n  type: makeStringProp(\"circular\"),\n  color: String,\n  vertical: Boolean,\n  textSize: numericProp,\n  textColor: String\n};\nvar stdin_default = defineComponent({\n  name,\n  props: loadingProps,\n  setup(props, {\n    slots\n  }) {\n    const spinnerStyle = computed(() => extend({\n      color: props.color\n    }, getSizeStyle(props.size)));\n    const renderText = () => {\n      var _a;\n      if (slots.default) {\n        return _createVNode(\"span\", {\n          \"class\": bem(\"text\"),\n          \"style\": {\n            fontSize: addUnit(props.textSize),\n            color: (_a = props.textColor) != null ? _a : props.color\n          }\n        }, [slots.default()]);\n      }\n    };\n    return () => {\n      const {\n        type,\n        vertical\n      } = props;\n      return _createVNode(\"div\", {\n        \"class\": bem([type, {\n          vertical\n        }]),\n        \"aria-live\": \"polite\",\n        \"aria-busy\": true\n      }, [_createVNode(\"span\", {\n        \"class\": bem(\"spinner\", type),\n        \"style\": spinnerStyle.value\n      }, [type === \"spinner\" ? SpinIcon : CircularIcon]), renderText()]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Loading from \"./Loading.mjs\";\nconst Loading = withInstall(_Loading);\nvar stdin_default = Loading;\nexport {\n  Loading,\n  stdin_default as default\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { extend, numericProp, preventDefault, makeStringProp, createNamespace, BORDER_SURROUND } from \"../utils/index.mjs\";\nimport { useRoute, routeProps } from \"../composables/use-route.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nimport { Loading } from \"../loading/index.mjs\";\nconst [name, bem] = createNamespace(\"button\");\nconst buttonProps = extend({}, routeProps, {\n  tag: makeStringProp(\"button\"),\n  text: String,\n  icon: String,\n  type: makeStringProp(\"default\"),\n  size: makeStringProp(\"normal\"),\n  color: String,\n  block: Boolean,\n  plain: Boolean,\n  round: Boolean,\n  square: Boolean,\n  loading: Boolean,\n  hairline: Boolean,\n  disabled: Boolean,\n  iconPrefix: String,\n  nativeType: makeStringProp(\"button\"),\n  loadingSize: numericProp,\n  loadingText: String,\n  loadingType: String,\n  iconPosition: makeStringProp(\"left\")\n});\nvar stdin_default = defineComponent({\n  name,\n  props: buttonProps,\n  emits: [\"click\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const route = useRoute();\n    const renderLoadingIcon = () => {\n      if (slots.loading) {\n        return slots.loading();\n      }\n      return _createVNode(Loading, {\n        \"size\": props.loadingSize,\n        \"type\": props.loadingType,\n        \"class\": bem(\"loading\")\n      }, null);\n    };\n    const renderIcon = () => {\n      if (props.loading) {\n        return renderLoadingIcon();\n      }\n      if (slots.icon) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"icon\")\n        }, [slots.icon()]);\n      }\n      if (props.icon) {\n        return _createVNode(Icon, {\n          \"name\": props.icon,\n          \"class\": bem(\"icon\"),\n          \"classPrefix\": props.iconPrefix\n        }, null);\n      }\n    };\n    const renderText = () => {\n      let text;\n      if (props.loading) {\n        text = props.loadingText;\n      } else {\n        text = slots.default ? slots.default() : props.text;\n      }\n      if (text) {\n        return _createVNode(\"span\", {\n          \"class\": bem(\"text\")\n        }, [text]);\n      }\n    };\n    const getStyle = () => {\n      const {\n        color,\n        plain\n      } = props;\n      if (color) {\n        const style = {\n          color: plain ? color : \"white\"\n        };\n        if (!plain) {\n          style.background = color;\n        }\n        if (color.includes(\"gradient\")) {\n          style.border = 0;\n        } else {\n          style.borderColor = color;\n        }\n        return style;\n      }\n    };\n    const onClick = (event) => {\n      if (props.loading) {\n        preventDefault(event);\n      } else if (!props.disabled) {\n        emit(\"click\", event);\n        route();\n      }\n    };\n    return () => {\n      const {\n        tag,\n        type,\n        size,\n        block,\n        round,\n        plain,\n        square,\n        loading,\n        disabled,\n        hairline,\n        nativeType,\n        iconPosition\n      } = props;\n      const classes = [bem([type, size, {\n        plain,\n        block,\n        round,\n        square,\n        loading,\n        disabled,\n        hairline\n      }]), {\n        [BORDER_SURROUND]: hairline\n      }];\n      return _createVNode(tag, {\n        \"type\": nativeType,\n        \"class\": classes,\n        \"style\": getStyle(),\n        \"disabled\": disabled,\n        \"onClick\": onClick\n      }, {\n        default: () => [_createVNode(\"div\", {\n          \"class\": bem(\"content\")\n        }, [iconPosition === \"left\" && renderIcon(), renderText(), iconPosition === \"right\" && renderIcon()])]\n      });\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Button from \"./Button.mjs\";\nconst Button = withInstall(_Button);\nvar stdin_default = Button;\nexport {\n  Button,\n  stdin_default as default\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { isDef, extend, truthProp, unknownProp, numericProp, createNamespace } from \"../utils/index.mjs\";\nimport { useRoute, routeProps } from \"../composables/use-route.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nconst [name, bem] = createNamespace(\"cell\");\nconst cellSharedProps = {\n  icon: String,\n  size: String,\n  title: numericProp,\n  value: numericProp,\n  label: numericProp,\n  center: Boolean,\n  isLink: Boolean,\n  border: truthProp,\n  required: Boolean,\n  iconPrefix: String,\n  valueClass: unknownProp,\n  labelClass: unknownProp,\n  titleClass: unknownProp,\n  titleStyle: null,\n  arrowDirection: String,\n  clickable: {\n    type: Boolean,\n    default: null\n  }\n};\nconst cellProps = extend({}, cellSharedProps, routeProps);\nvar stdin_default = defineComponent({\n  name,\n  props: cellProps,\n  setup(props, {\n    slots\n  }) {\n    const route = useRoute();\n    const renderLabel = () => {\n      const showLabel = slots.label || isDef(props.label);\n      if (showLabel) {\n        return _createVNode(\"div\", {\n          \"class\": [bem(\"label\"), props.labelClass]\n        }, [slots.label ? slots.label() : props.label]);\n      }\n    };\n    const renderTitle = () => {\n      if (slots.title || isDef(props.title)) {\n        return _createVNode(\"div\", {\n          \"class\": [bem(\"title\"), props.titleClass],\n          \"style\": props.titleStyle\n        }, [slots.title ? slots.title() : _createVNode(\"span\", null, [props.title]), renderLabel()]);\n      }\n    };\n    const renderValue = () => {\n      const slot = slots.value || slots.default;\n      const hasValue = slot || isDef(props.value);\n      if (hasValue) {\n        const hasTitle = slots.title || isDef(props.title);\n        return _createVNode(\"div\", {\n          \"class\": [bem(\"value\", {\n            alone: !hasTitle\n          }), props.valueClass]\n        }, [slot ? slot() : _createVNode(\"span\", null, [props.value])]);\n      }\n    };\n    const renderLeftIcon = () => {\n      if (slots.icon) {\n        return slots.icon();\n      }\n      if (props.icon) {\n        return _createVNode(Icon, {\n          \"name\": props.icon,\n          \"class\": bem(\"left-icon\"),\n          \"classPrefix\": props.iconPrefix\n        }, null);\n      }\n    };\n    const renderRightIcon = () => {\n      if (slots[\"right-icon\"]) {\n        return slots[\"right-icon\"]();\n      }\n      if (props.isLink) {\n        const name2 = props.arrowDirection ? `arrow-${props.arrowDirection}` : \"arrow\";\n        return _createVNode(Icon, {\n          \"name\": name2,\n          \"class\": bem(\"right-icon\")\n        }, null);\n      }\n    };\n    return () => {\n      var _a, _b;\n      const {\n        size,\n        center,\n        border,\n        isLink,\n        required\n      } = props;\n      const clickable = (_a = props.clickable) != null ? _a : isLink;\n      const classes = {\n        center,\n        required,\n        clickable,\n        borderless: !border\n      };\n      if (size) {\n        classes[size] = !!size;\n      }\n      return _createVNode(\"div\", {\n        \"class\": bem(classes),\n        \"role\": clickable ? \"button\" : void 0,\n        \"tabindex\": clickable ? 0 : void 0,\n        \"onClick\": route\n      }, [renderLeftIcon(), renderTitle(), renderValue(), renderRightIcon(), (_b = slots.extra) == null ? void 0 : _b.call(slots)]);\n    };\n  }\n});\nexport {\n  cellSharedProps,\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Cell from \"./Cell.mjs\";\nconst Cell = withInstall(_Cell);\nvar stdin_default = Cell;\nexport {\n  Cell,\n  stdin_default as default\n};\n","import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"form\");\nconst formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    default: \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      children,\n      linkChildren\n    } = useChildren(FORM_KEY);\n    const getFieldsByNames = (names) => {\n      if (names) {\n        return children.filter((field) => names.includes(field.name));\n      }\n      return children;\n    };\n    const validateSeq = (names) => new Promise((resolve, reject) => {\n      const errors = [];\n      const fields = getFieldsByNames(names);\n      fields.reduce((promise, field) => promise.then(() => {\n        if (!errors.length) {\n          return field.validate().then((error) => {\n            if (error) {\n              errors.push(error);\n            }\n          });\n        }\n      }), Promise.resolve()).then(() => {\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateAll = (names) => new Promise((resolve, reject) => {\n      const fields = getFieldsByNames(names);\n      Promise.all(fields.map((item) => item.validate())).then((errors) => {\n        errors = errors.filter(Boolean);\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateField = (name2) => {\n      const matched = children.find((item) => item.name === name2);\n      if (matched) {\n        return new Promise((resolve, reject) => {\n          matched.validate().then((error) => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    const validate = (name2) => {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    const resetValidation = (name2) => {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      const fields = getFieldsByNames(name2);\n      fields.forEach((item) => {\n        item.resetValidation();\n      });\n    };\n    const getValidationStatus = () => children.reduce((form, field) => {\n      form[field.name] = field.getValidationStatus();\n      return form;\n    }, {});\n    const scrollToField = (name2, options) => {\n      children.some((item) => {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    const getValues = () => children.reduce((form, field) => {\n      form[field.name] = field.formValue.value;\n      return form;\n    }, {});\n    const submit = () => {\n      const values = getValues();\n      validate().then(() => emit(\"submit\", values)).catch((errors) => {\n        emit(\"failed\", {\n          values,\n          errors\n        });\n        if (props.scrollToError && errors[0].name) {\n          scrollToField(errors[0].name);\n        }\n      });\n    };\n    const onSubmit = (event) => {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props\n    });\n    useExpose({\n      submit,\n      validate,\n      getValues,\n      scrollToField,\n      resetValidation,\n      getValidationStatus\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Form from \"./Form.mjs\";\nconst Form = withInstall(_Form);\nvar stdin_default = Form;\nexport {\n  Form,\n  stdin_default as default\n};\n","import {\n  isObject,\n  isPromise,\n  isFunction,\n  getRootScrollTop,\n  setRootScrollTop\n} from \"../utils/index.mjs\";\nfunction isEmptyValue(value) {\n  if (Array.isArray(value)) {\n    return !value.length;\n  }\n  if (value === 0) {\n    return false;\n  }\n  return !value;\n}\nfunction runSyncRule(value, rule) {\n  if (isEmptyValue(value)) {\n    if (rule.required) {\n      return false;\n    }\n    if (rule.validateEmpty === false) {\n      return true;\n    }\n  }\n  if (rule.pattern && !rule.pattern.test(String(value))) {\n    return false;\n  }\n  return true;\n}\nfunction runRuleValidator(value, rule) {\n  return new Promise((resolve) => {\n    const returnVal = rule.validator(value, rule);\n    if (isPromise(returnVal)) {\n      returnVal.then(resolve);\n      return;\n    }\n    resolve(returnVal);\n  });\n}\nfunction getRuleMessage(value, rule) {\n  const { message } = rule;\n  if (isFunction(message)) {\n    return message(value, rule);\n  }\n  return message || \"\";\n}\nfunction startComposing({ target }) {\n  target.composing = true;\n}\nfunction endComposing({ target }) {\n  if (target.composing) {\n    target.composing = false;\n    target.dispatchEvent(new Event(\"input\"));\n  }\n}\nfunction resizeTextarea(input, autosize) {\n  const scrollTop = getRootScrollTop();\n  input.style.height = \"auto\";\n  let height = input.scrollHeight;\n  if (isObject(autosize)) {\n    const { maxHeight, minHeight } = autosize;\n    if (maxHeight !== void 0) {\n      height = Math.min(height, maxHeight);\n    }\n    if (minHeight !== void 0) {\n      height = Math.max(height, minHeight);\n    }\n  }\n  if (height) {\n    input.style.height = `${height}px`;\n    setRootScrollTop(scrollTop);\n  }\n}\nfunction mapInputType(type) {\n  if (type === \"number\") {\n    return {\n      type: \"text\",\n      inputmode: \"decimal\"\n    };\n  }\n  if (type === \"digit\") {\n    return {\n      type: \"tel\",\n      inputmode: \"numeric\"\n    };\n  }\n  return { type };\n}\nfunction getStringLength(str) {\n  return [...str].length;\n}\nfunction cutString(str, maxlength) {\n  return [...str].slice(0, maxlength).join(\"\");\n}\nexport {\n  cutString,\n  endComposing,\n  getRuleMessage,\n  getStringLength,\n  isEmptyValue,\n  mapInputType,\n  resizeTextarea,\n  runRuleValidator,\n  runSyncRule,\n  startComposing\n};\n","import { getCurrentInstance } from \"vue\";\nlet current = 0;\nfunction useId() {\n  const vm = getCurrentInstance();\n  const { name = \"unknown\" } = (vm == null ? void 0 : vm.type) || {};\n  if (process.env.NODE_ENV === \"test\") {\n    return name;\n  }\n  return `${name}-${++current}`;\n}\nexport {\n  useId\n};\n","import { createTextVNode as _createTextVNode, mergeProps as _mergeProps, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, provide, computed, nextTick, reactive, onMounted, defineComponent } from \"vue\";\nimport { isDef, extend, addUnit, toArray, FORM_KEY, numericProp, unknownProp, resetScroll, formatNumber, preventDefault, makeStringProp, makeNumericProp, createNamespace } from \"../utils/index.mjs\";\nimport { cutString, runSyncRule, endComposing, mapInputType, isEmptyValue, startComposing, getRuleMessage, resizeTextarea, getStringLength, runRuleValidator } from \"./utils.mjs\";\nimport { cellSharedProps } from \"../cell/Cell.mjs\";\nimport { useParent, useEventListener, CUSTOM_FIELD_INJECTION_KEY } from \"@vant/use\";\nimport { useId } from \"../composables/use-id.mjs\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nimport { Icon } from \"../icon/index.mjs\";\nimport { Cell } from \"../cell/index.mjs\";\nconst [name, bem] = createNamespace(\"field\");\nconst fieldSharedProps = {\n  id: String,\n  name: String,\n  leftIcon: String,\n  rightIcon: String,\n  autofocus: Boolean,\n  clearable: Boolean,\n  maxlength: numericProp,\n  formatter: Function,\n  clearIcon: makeStringProp(\"clear\"),\n  modelValue: makeNumericProp(\"\"),\n  inputAlign: String,\n  placeholder: String,\n  autocomplete: String,\n  errorMessage: String,\n  enterkeyhint: String,\n  clearTrigger: makeStringProp(\"focus\"),\n  formatTrigger: makeStringProp(\"onChange\"),\n  error: {\n    type: Boolean,\n    default: null\n  },\n  disabled: {\n    type: Boolean,\n    default: null\n  },\n  readonly: {\n    type: Boolean,\n    default: null\n  }\n};\nconst fieldProps = extend({}, cellSharedProps, fieldSharedProps, {\n  rows: numericProp,\n  type: makeStringProp(\"text\"),\n  rules: Array,\n  autosize: [Boolean, Object],\n  labelWidth: numericProp,\n  labelClass: unknownProp,\n  labelAlign: String,\n  showWordLimit: Boolean,\n  errorMessageAlign: String,\n  colon: {\n    type: Boolean,\n    default: null\n  }\n});\nvar stdin_default = defineComponent({\n  name,\n  props: fieldProps,\n  emits: [\"blur\", \"focus\", \"clear\", \"keypress\", \"click-input\", \"end-validate\", \"start-validate\", \"click-left-icon\", \"click-right-icon\", \"update:modelValue\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const id = useId();\n    const state = reactive({\n      status: \"unvalidated\",\n      focused: false,\n      validateMessage: \"\"\n    });\n    const inputRef = ref();\n    const clearIconRef = ref();\n    const customValue = ref();\n    const {\n      parent: form\n    } = useParent(FORM_KEY);\n    const getModelValue = () => {\n      var _a;\n      return String((_a = props.modelValue) != null ? _a : \"\");\n    };\n    const getProp = (key) => {\n      if (isDef(props[key])) {\n        return props[key];\n      }\n      if (form && isDef(form.props[key])) {\n        return form.props[key];\n      }\n    };\n    const showClear = computed(() => {\n      const readonly = getProp(\"readonly\");\n      if (props.clearable && !readonly) {\n        const hasValue = getModelValue() !== \"\";\n        const trigger = props.clearTrigger === \"always\" || props.clearTrigger === \"focus\" && state.focused;\n        return hasValue && trigger;\n      }\n      return false;\n    });\n    const formValue = computed(() => {\n      if (customValue.value && slots.input) {\n        return customValue.value();\n      }\n      return props.modelValue;\n    });\n    const runRules = (rules) => rules.reduce((promise, rule) => promise.then(() => {\n      if (state.status === \"failed\") {\n        return;\n      }\n      let {\n        value\n      } = formValue;\n      if (rule.formatter) {\n        value = rule.formatter(value, rule);\n      }\n      if (!runSyncRule(value, rule)) {\n        state.status = \"failed\";\n        state.validateMessage = getRuleMessage(value, rule);\n        return;\n      }\n      if (rule.validator) {\n        if (isEmptyValue(value) && rule.validateEmpty === false) {\n          return;\n        }\n        return runRuleValidator(value, rule).then((result) => {\n          if (result && typeof result === \"string\") {\n            state.status = \"failed\";\n            state.validateMessage = result;\n          } else if (result === false) {\n            state.status = \"failed\";\n            state.validateMessage = getRuleMessage(value, rule);\n          }\n        });\n      }\n    }), Promise.resolve());\n    const resetValidation = () => {\n      state.status = \"unvalidated\";\n      state.validateMessage = \"\";\n    };\n    const endValidate = () => emit(\"end-validate\", {\n      status: state.status\n    });\n    const validate = (rules = props.rules) => new Promise((resolve) => {\n      resetValidation();\n      if (rules) {\n        emit(\"start-validate\");\n        runRules(rules).then(() => {\n          if (state.status === \"failed\") {\n            resolve({\n              name: props.name,\n              message: state.validateMessage\n            });\n            endValidate();\n          } else {\n            state.status = \"passed\";\n            resolve();\n            endValidate();\n          }\n        });\n      } else {\n        resolve();\n      }\n    });\n    const validateWithTrigger = (trigger) => {\n      if (form && props.rules) {\n        const {\n          validateTrigger\n        } = form.props;\n        const defaultTrigger = toArray(validateTrigger).includes(trigger);\n        const rules = props.rules.filter((rule) => {\n          if (rule.trigger) {\n            return toArray(rule.trigger).includes(trigger);\n          }\n          return defaultTrigger;\n        });\n        if (rules.length) {\n          validate(rules);\n        }\n      }\n    };\n    const limitValueLength = (value) => {\n      const {\n        maxlength\n      } = props;\n      if (isDef(maxlength) && getStringLength(value) > maxlength) {\n        const modelValue = getModelValue();\n        if (modelValue && getStringLength(modelValue) === +maxlength) {\n          return modelValue;\n        }\n        return cutString(value, +maxlength);\n      }\n      return value;\n    };\n    const updateValue = (value, trigger = \"onChange\") => {\n      value = limitValueLength(value);\n      if (props.type === \"number\" || props.type === \"digit\") {\n        const isNumber = props.type === \"number\";\n        value = formatNumber(value, isNumber, isNumber);\n      }\n      if (props.formatter && trigger === props.formatTrigger) {\n        value = props.formatter(value);\n      }\n      if (inputRef.value && inputRef.value.value !== value) {\n        inputRef.value.value = value;\n      }\n      if (value !== props.modelValue) {\n        emit(\"update:modelValue\", value);\n      }\n    };\n    const onInput = (event) => {\n      if (!event.target.composing) {\n        updateValue(event.target.value);\n      }\n    };\n    const blur = () => {\n      var _a;\n      return (_a = inputRef.value) == null ? void 0 : _a.blur();\n    };\n    const focus = () => {\n      var _a;\n      return (_a = inputRef.value) == null ? void 0 : _a.focus();\n    };\n    const adjustTextareaSize = () => {\n      const input = inputRef.value;\n      if (props.type === \"textarea\" && props.autosize && input) {\n        resizeTextarea(input, props.autosize);\n      }\n    };\n    const onFocus = (event) => {\n      state.focused = true;\n      emit(\"focus\", event);\n      nextTick(adjustTextareaSize);\n      if (getProp(\"readonly\")) {\n        blur();\n      }\n    };\n    const onBlur = (event) => {\n      if (getProp(\"readonly\")) {\n        return;\n      }\n      state.focused = false;\n      updateValue(getModelValue(), \"onBlur\");\n      emit(\"blur\", event);\n      validateWithTrigger(\"onBlur\");\n      nextTick(adjustTextareaSize);\n      resetScroll();\n    };\n    const onClickInput = (event) => emit(\"click-input\", event);\n    const onClickLeftIcon = (event) => emit(\"click-left-icon\", event);\n    const onClickRightIcon = (event) => emit(\"click-right-icon\", event);\n    const onClear = (event) => {\n      preventDefault(event);\n      emit(\"update:modelValue\", \"\");\n      emit(\"clear\", event);\n    };\n    const showError = computed(() => {\n      if (typeof props.error === \"boolean\") {\n        return props.error;\n      }\n      if (form && form.props.showError && state.status === \"failed\") {\n        return true;\n      }\n    });\n    const labelStyle = computed(() => {\n      const labelWidth = getProp(\"labelWidth\");\n      if (labelWidth) {\n        return {\n          width: addUnit(labelWidth)\n        };\n      }\n    });\n    const onKeypress = (event) => {\n      const ENTER_CODE = 13;\n      if (event.keyCode === ENTER_CODE) {\n        const submitOnEnter = form && form.props.submitOnEnter;\n        if (!submitOnEnter && props.type !== \"textarea\") {\n          preventDefault(event);\n        }\n        if (props.type === \"search\") {\n          blur();\n        }\n      }\n      emit(\"keypress\", event);\n    };\n    const getInputId = () => props.id || `${id}-input`;\n    const getValidationStatus = () => state.status;\n    const renderInput = () => {\n      const controlClass = bem(\"control\", [getProp(\"inputAlign\"), {\n        error: showError.value,\n        custom: !!slots.input,\n        \"min-height\": props.type === \"textarea\" && !props.autosize\n      }]);\n      if (slots.input) {\n        return _createVNode(\"div\", {\n          \"class\": controlClass,\n          \"onClick\": onClickInput\n        }, [slots.input()]);\n      }\n      const inputAttrs = {\n        id: getInputId(),\n        ref: inputRef,\n        name: props.name,\n        rows: props.rows !== void 0 ? +props.rows : void 0,\n        class: controlClass,\n        disabled: getProp(\"disabled\"),\n        readonly: getProp(\"readonly\"),\n        autofocus: props.autofocus,\n        placeholder: props.placeholder,\n        autocomplete: props.autocomplete,\n        enterkeyhint: props.enterkeyhint,\n        \"aria-labelledby\": props.label ? `${id}-label` : void 0,\n        onBlur,\n        onFocus,\n        onInput,\n        onClick: onClickInput,\n        onChange: endComposing,\n        onKeypress,\n        onCompositionend: endComposing,\n        onCompositionstart: startComposing\n      };\n      if (props.type === \"textarea\") {\n        return _createVNode(\"textarea\", inputAttrs, null);\n      }\n      return _createVNode(\"input\", _mergeProps(mapInputType(props.type), inputAttrs), null);\n    };\n    const renderLeftIcon = () => {\n      const leftIconSlot = slots[\"left-icon\"];\n      if (props.leftIcon || leftIconSlot) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"left-icon\"),\n          \"onClick\": onClickLeftIcon\n        }, [leftIconSlot ? leftIconSlot() : _createVNode(Icon, {\n          \"name\": props.leftIcon,\n          \"classPrefix\": props.iconPrefix\n        }, null)]);\n      }\n    };\n    const renderRightIcon = () => {\n      const rightIconSlot = slots[\"right-icon\"];\n      if (props.rightIcon || rightIconSlot) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"right-icon\"),\n          \"onClick\": onClickRightIcon\n        }, [rightIconSlot ? rightIconSlot() : _createVNode(Icon, {\n          \"name\": props.rightIcon,\n          \"classPrefix\": props.iconPrefix\n        }, null)]);\n      }\n    };\n    const renderWordLimit = () => {\n      if (props.showWordLimit && props.maxlength) {\n        const count = getStringLength(getModelValue());\n        return _createVNode(\"div\", {\n          \"class\": bem(\"word-limit\")\n        }, [_createVNode(\"span\", {\n          \"class\": bem(\"word-num\")\n        }, [count]), _createTextVNode(\"/\"), props.maxlength]);\n      }\n    };\n    const renderMessage = () => {\n      if (form && form.props.showErrorMessage === false) {\n        return;\n      }\n      const message = props.errorMessage || state.validateMessage;\n      if (message) {\n        const slot = slots[\"error-message\"];\n        const errorMessageAlign = getProp(\"errorMessageAlign\");\n        return _createVNode(\"div\", {\n          \"class\": bem(\"error-message\", errorMessageAlign)\n        }, [slot ? slot({\n          message\n        }) : message]);\n      }\n    };\n    const renderLabel = () => {\n      const colon = getProp(\"colon\") ? \":\" : \"\";\n      if (slots.label) {\n        return [slots.label(), colon];\n      }\n      if (props.label) {\n        return _createVNode(\"label\", {\n          \"id\": `${id}-label`,\n          \"for\": getInputId()\n        }, [props.label + colon]);\n      }\n    };\n    const renderFieldBody = () => [_createVNode(\"div\", {\n      \"class\": bem(\"body\")\n    }, [renderInput(), showClear.value && _createVNode(Icon, {\n      \"ref\": clearIconRef,\n      \"name\": props.clearIcon,\n      \"class\": bem(\"clear\")\n    }, null), renderRightIcon(), slots.button && _createVNode(\"div\", {\n      \"class\": bem(\"button\")\n    }, [slots.button()])]), renderWordLimit(), renderMessage()];\n    useExpose({\n      blur,\n      focus,\n      validate,\n      formValue,\n      resetValidation,\n      getValidationStatus\n    });\n    provide(CUSTOM_FIELD_INJECTION_KEY, {\n      customValue,\n      resetValidation,\n      validateWithTrigger\n    });\n    watch(() => props.modelValue, () => {\n      updateValue(getModelValue());\n      resetValidation();\n      validateWithTrigger(\"onChange\");\n      nextTick(adjustTextareaSize);\n    });\n    onMounted(() => {\n      updateValue(getModelValue(), props.formatTrigger);\n      nextTick(adjustTextareaSize);\n    });\n    useEventListener(\"touchstart\", onClear, {\n      target: computed(() => {\n        var _a;\n        return (_a = clearIconRef.value) == null ? void 0 : _a.$el;\n      })\n    });\n    return () => {\n      const disabled = getProp(\"disabled\");\n      const labelAlign = getProp(\"labelAlign\");\n      const Label = renderLabel();\n      const LeftIcon = renderLeftIcon();\n      return _createVNode(Cell, {\n        \"size\": props.size,\n        \"icon\": props.leftIcon,\n        \"class\": bem({\n          error: showError.value,\n          disabled,\n          [`label-${labelAlign}`]: labelAlign\n        }),\n        \"center\": props.center,\n        \"border\": props.border,\n        \"isLink\": props.isLink,\n        \"clickable\": props.clickable,\n        \"titleStyle\": labelStyle.value,\n        \"valueClass\": bem(\"value\"),\n        \"titleClass\": [bem(\"label\", [labelAlign, {\n          required: props.required\n        }]), props.labelClass],\n        \"arrowDirection\": props.arrowDirection\n      }, {\n        icon: LeftIcon ? () => LeftIcon : null,\n        title: Label ? () => Label : null,\n        value: renderFieldBody,\n        extra: slots.extra\n      });\n    };\n  }\n});\nexport {\n  stdin_default as default,\n  fieldSharedProps\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _Field from \"./Field.mjs\";\nconst Field = withInstall(_Field);\nvar stdin_default = Field;\nexport {\n  Field,\n  stdin_default as default\n};\n","import { Fragment as _Fragment, createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { truthProp, createNamespace, BORDER_TOP_BOTTOM } from \"../utils/index.mjs\";\nconst [name, bem] = createNamespace(\"cell-group\");\nconst cellGroupProps = {\n  title: String,\n  inset: Boolean,\n  border: truthProp\n};\nvar stdin_default = defineComponent({\n  name,\n  inheritAttrs: false,\n  props: cellGroupProps,\n  setup(props, {\n    slots,\n    attrs\n  }) {\n    const renderGroup = () => {\n      var _a;\n      return _createVNode(\"div\", _mergeProps({\n        \"class\": [bem({\n          inset: props.inset\n        }), {\n          [BORDER_TOP_BOTTOM]: props.border && !props.inset\n        }]\n      }, attrs), [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n    const renderTitle = () => _createVNode(\"div\", {\n      \"class\": bem(\"title\", {\n        inset: props.inset\n      })\n    }, [slots.title ? slots.title() : props.title]);\n    return () => {\n      if (props.title || slots.title) {\n        return _createVNode(_Fragment, null, [renderTitle(), renderGroup()]);\n      }\n      return renderGroup();\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n","import { withInstall } from \"../utils/index.mjs\";\nimport _CellGroup from \"./CellGroup.mjs\";\nconst CellGroup = withInstall(_CellGroup);\nvar stdin_default = CellGroup;\nexport {\n  CellGroup,\n  stdin_default as default\n};\n","<template>\n  <div class=\"tip\" ref=\"divDom\">\n    <!-- <input type=\"text\" />\n    <button>23</button> -->\n    <van-form @submit=\"onSubmit\">\n      <van-cell-group inset>\n        <van-field\n          v-model=\"username\"\n          name=\"用户名\"\n          label=\"用户名\"\n          placeholder=\"用户名\"\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\n        />\n        <van-field\n          v-model=\"password\"\n          name=\"手机号\"\n          label=\"手机号\"\n          placeholder=\"手机号\"\n          :rules=\"[{ required: true, message: '请填写手机号' }]\"\n        />\n      </van-cell-group>\n      <div style=\"margin: 16px\">\n        <van-button round block type=\"primary\" native-type=\"submit\">\n          提交\n        </van-button>\n      </div>\n    </van-form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { onMounted, ref, defineEmits } from \"vue\";\nconst emit = defineEmits<{\n  (e: \"onload\"): void;\n}>();\nconst username = ref(\"\");\nconst password = ref(\"\");\nconst onSubmit = (values) => {\n  console.log(\"submit\", values);\n};\n\nlet divDom = ref<HTMLElement | null>(null);\nonMounted(() => {\n  emit(\"onload\");\n});\nconst getDom = () => {\n  return divDom.value;\n};\ndefineExpose({\n  getDom,\n});\n</script>\n\n<style scoped>\n.tip {\n  position: absolute;\n  left: -1000px;\n  top: -1000px;\n  color: #333;\n  width: 300px;\n  height: 180px;\n  box-sizing: border-box;\n  background-color: #5c575799;\n  border-radius: 10px;\n  transform: translateX(-150px) translateY(-190px);\n  padding-top: 19px;\n  display: none;\n}\n</style>\n","/**\n * Defines how the bounding volumes intersects or contain one another.\n */\nvar ContainmentType;\n(function (ContainmentType) {\n  ContainmentType[ContainmentType[\"Disjoint\"] = 0] = \"Disjoint\";\n  ContainmentType[ContainmentType[\"Contains\"] = 1] = \"Contains\";\n  ContainmentType[ContainmentType[\"Intersects\"] = 2] = \"Intersects\";\n})(ContainmentType || (ContainmentType = {}));\n\n/**\n * Defines the intersection between a plane and a bounding volume.\n */\nvar PlaneIntersectionType;\n(function (PlaneIntersectionType) {\n  PlaneIntersectionType[PlaneIntersectionType[\"Back\"] = 0] = \"Back\";\n  PlaneIntersectionType[PlaneIntersectionType[\"Front\"] = 1] = \"Front\";\n  PlaneIntersectionType[PlaneIntersectionType[\"Intersecting\"] = 2] = \"Intersecting\";\n})(PlaneIntersectionType || (PlaneIntersectionType = {}));\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\n/**\n * Common utility methods for math operations.\n */\nvar MathUtil = /*#__PURE__*/function () {\n  function MathUtil() {}\n  /** The value for which all absolute numbers smaller than are considered equal to zero. */\n  /** The conversion factor that radian to degree. */\n  /** The conversion factor that degree to radian. */\n  /**\n   * Clamps the specified value.\n   * @param v - The specified value\n   * @param min - The min value\n   * @param max - The max value\n   * @returns The result of clamping a value between min and max\n   */\n  MathUtil.clamp = function clamp(v, min, max) {\n    return Math.max(min, Math.min(max, v));\n  }\n\n  /**\n   * Checks if a and b are almost equals.\n   * The absolute value of the difference between a and b is close to zero.\n   * @param a - The left value to compare\n   * @param b - The right value to compare\n   * @returns True if a almost equal to b, false otherwise\n   */;\n  MathUtil.equals = function equals(a, b) {\n    return Math.abs(a - b) <= MathUtil.zeroTolerance;\n  }\n\n  /**\n   * Determines whether the specified v is pow2.\n   * @param v - The specified v\n   * @returns True if the specified v is pow2, false otherwise\n   */;\n  MathUtil.isPowerOf2 = function isPowerOf2(v) {\n    return (v & v - 1) === 0;\n  }\n\n  /**\n   * Modify the specified r from radian to degree.\n   * @param r - The specified r\n   * @returns The degree value\n   */;\n  MathUtil.radianToDegree = function radianToDegree(r) {\n    return r * MathUtil.radToDegreeFactor;\n  }\n\n  /**\n   * Modify the specified d from degree to radian.\n   * @param d - The specified d\n   * @returns The radian value\n   */;\n  MathUtil.degreeToRadian = function degreeToRadian(d) {\n    return d * MathUtil.degreeToRadFactor;\n  };\n  return MathUtil;\n}();\nMathUtil.zeroTolerance = 1e-6;\nMathUtil.radToDegreeFactor = 180 / Math.PI;\nMathUtil.degreeToRadFactor = Math.PI / 180;\n\n/**\n * Describes a 3D-vector.\n */\nvar Vector3 = /*#__PURE__*/function () {\n  /** @internal */\n  /** @internal */\n  /**\n   * Determines the sum of two vectors.\n   * @param left - The first vector to add\n   * @param right - The second vector to add\n   * @param out - The sum of two vectors\n   */\n  Vector3.add = function add(left, right, out) {\n    out._x = left._x + right._x;\n    out._y = left._y + right._y;\n    out._z = left._z + right._z;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the difference between two vectors.\n   * @param left - The first vector to subtract\n   * @param right - The second vector to subtract\n   * @param out - The difference between two vectors\n   */;\n  Vector3.subtract = function subtract(left, right, out) {\n    out._x = left._x - right._x;\n    out._y = left._y - right._y;\n    out._z = left._z - right._z;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the product of two vectors.\n   * @param left - The first vector to multiply\n   * @param right - The second vector to multiply\n   * @param out - The product of two vectors\n   */;\n  Vector3.multiply = function multiply(left, right, out) {\n    out._x = left._x * right._x;\n    out._y = left._y * right._y;\n    out._z = left._z * right._z;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the divisor of two vectors.\n   * @param left - The first vector to divide\n   * @param right - The second vector to divide\n   * @param out - The divisor of two vectors\n   */;\n  Vector3.divide = function divide(left, right, out) {\n    out._x = left._x / right._x;\n    out._y = left._y / right._y;\n    out._z = left._z / right._z;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the dot product of two vectors.\n   * @param left - The first vector to dot\n   * @param right - The second vector to dot\n   * @returns The dot product of two vectors\n   */;\n  Vector3.dot = function dot(left, right) {\n    return left._x * right._x + left._y * right._y + left._z * right._z;\n  }\n\n  /**\n   * Determines the cross product of two vectors.\n   * @param left - The first vector to cross\n   * @param right - The second vector to cross\n   * @param out - The cross product of two vectors\n   */;\n  Vector3.cross = function cross(left, right, out) {\n    var ax = left._x;\n    var ay = left._y;\n    var az = left._z;\n    var bx = right._x;\n    var by = right._y;\n    var bz = right._z;\n    out.set(ay * bz - az * by, az * bx - ax * bz, ax * by - ay * bx);\n  }\n\n  /**\n   * Determines the distance of two vectors.\n   * @param a - The first vector\n   * @param b - The second vector\n   * @returns The distance of two vectors\n   */;\n  Vector3.distance = function distance(a, b) {\n    var x = b._x - a._x;\n    var y = b._y - a._y;\n    var z = b._z - a._z;\n    return Math.sqrt(x * x + y * y + z * z);\n  }\n\n  /**\n   * Determines the squared distance of two vectors.\n   * @param a - The first vector\n   * @param b - The second vector\n   * @returns The squared distance of two vectors\n   */;\n  Vector3.distanceSquared = function distanceSquared(a, b) {\n    var x = b._x - a._x;\n    var y = b._y - a._y;\n    var z = b._z - a._z;\n    return x * x + y * y + z * z;\n  }\n\n  /**\n   * Determines whether the specified vectors are equals.\n   * @param left - The first vector to compare\n   * @param right - The second vector to compare\n   * @returns True if the specified vectors are equals, false otherwise\n   */;\n  Vector3.equals = function equals(left, right) {\n    return MathUtil.equals(left._x, right._x) && MathUtil.equals(left._y, right._y) && MathUtil.equals(left._z, right._z);\n  }\n\n  /**\n   * Performs a linear interpolation between two vectors.\n   * @param start - The first vector\n   * @param end - The second vector\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of linear blending between two vectors\n   */;\n  Vector3.lerp = function lerp(start, end, t, out) {\n    var _x = start._x,\n      _y = start._y,\n      _z = start._z;\n    out._x = _x + (end._x - _x) * t;\n    out._y = _y + (end._y - _y) * t;\n    out._z = _z + (end._z - _z) * t;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a vector containing the largest components of the specified vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param out - The vector containing the largest components of the specified vectors\n   */;\n  Vector3.max = function max(left, right, out) {\n    out._x = Math.max(left._x, right._x);\n    out._y = Math.max(left._y, right._y);\n    out._z = Math.max(left._z, right._z);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a vector containing the smallest components of the specified vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param out - The vector containing the smallest components of the specified vectors\n   */;\n  Vector3.min = function min(left, right, out) {\n    out._x = Math.min(left._x, right._x);\n    out._y = Math.min(left._y, right._y);\n    out._z = Math.min(left._z, right._z);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Reverses the direction of a given vector.\n   * @param a - The vector to negate\n   * @param out - The vector facing in the opposite direction\n   */;\n  Vector3.negate = function negate(a, out) {\n    out._x = -a._x;\n    out._y = -a._y;\n    out._z = -a._z;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Converts the vector into a unit vector.\n   * @param a - The vector to normalize\n   * @param out - The normalized vector\n   */;\n  Vector3.normalize = function normalize(a, out) {\n    var _x = a._x,\n      _y = a._y,\n      _z = a._z;\n    var len = Math.sqrt(_x * _x + _y * _y + _z * _z);\n    if (len > MathUtil.zeroTolerance) {\n      len = 1 / len;\n      out.set(_x * len, _y * len, _z * len);\n    }\n  }\n\n  /**\n   * Scale a vector by the given value.\n   * @param a - The vector to scale\n   * @param s - The amount by which to scale the vector\n   * @param out - The scaled vector\n   */;\n  Vector3.scale = function scale(a, s, out) {\n    out._x = a._x * s;\n    out._y = a._y * s;\n    out._z = a._z * s;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a normal transformation using the given 4x4 matrix.\n   * @remarks\n   * A normal transform performs the transformation with the assumption that the w component\n   * is zero. This causes the fourth row and fourth column of the matrix to be unused. The\n   * end result is a vector that is not translated, but all other transformation properties\n   * apply. This is often preferred for normal vectors as normals purely represent direction\n   * rather than location because normal vectors should not be translated.\n   * @param v - The normal vector to transform\n   * @param m - The transform matrix\n   * @param out - The transformed normal\n   */;\n  Vector3.transformNormal = function transformNormal(v, m, out) {\n    var _x = v._x,\n      _y = v._y,\n      _z = v._z;\n    var e = m.elements;\n    out._x = _x * e[0] + _y * e[4] + _z * e[8];\n    out._y = _x * e[1] + _y * e[5] + _z * e[9];\n    out._z = _x * e[2] + _y * e[6] + _z * e[10];\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a transformation using the given 4x4 matrix.\n   * @param v - The vector to transform\n   * @param m - The transform matrix\n   * @param out - The transformed vector3\n   */;\n  Vector3.transformToVec3 = function transformToVec3(v, m, out) {\n    var _x = v._x,\n      _y = v._y,\n      _z = v._z;\n    var e = m.elements;\n    out._x = _x * e[0] + _y * e[4] + _z * e[8] + e[12];\n    out._y = _x * e[1] + _y * e[5] + _z * e[9] + e[13];\n    out._z = _x * e[2] + _y * e[6] + _z * e[10] + e[14];\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a transformation from vector3 to vector4 using the given 4x4 matrix.\n   * @param v - The vector to transform\n   * @param m - The transform matrix\n   * @param out - The transformed vector4\n   */;\n  Vector3.transformToVec4 = function transformToVec4(v, m, out) {\n    var _x = v._x,\n      _y = v._y,\n      _z = v._z;\n    var e = m.elements;\n    out._x = _x * e[0] + _y * e[4] + _z * e[8] + e[12];\n    out._y = _x * e[1] + _y * e[5] + _z * e[9] + e[13];\n    out._z = _x * e[2] + _y * e[6] + _z * e[10] + e[14];\n    out._w = _x * e[3] + _y * e[7] + _z * e[11] + e[15];\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a coordinate transformation using the given 4x4 matrix.\n   *\n   * @remarks\n   * A coordinate transform performs the transformation with the assumption that the w component\n   * is one. The four dimensional vector obtained from the transformation operation has each\n   * component in the vector divided by the w component. This forces the w-component to be one and\n   * therefore makes the vector homogeneous. The homogeneous vector is often preferred when working\n   * with coordinates as the w component can safely be ignored.\n   * @param v - The coordinate vector to transform\n   * @param m - The transform matrix\n   * @param out - The transformed coordinates\n   */;\n  Vector3.transformCoordinate = function transformCoordinate(v, m, out) {\n    var _x = v._x,\n      _y = v._y,\n      _z = v._z;\n    var e = m.elements;\n    var w = _x * e[3] + _y * e[7] + _z * e[11] + e[15];\n    w = 1.0 / w;\n    out._x = (_x * e[0] + _y * e[4] + _z * e[8] + e[12]) * w;\n    out._y = (_x * e[1] + _y * e[5] + _z * e[9] + e[13]) * w;\n    out._z = (_x * e[2] + _y * e[6] + _z * e[10] + e[14]) * w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a transformation using the given quaternion.\n   * @param v - The vector to transform\n   * @param quaternion - The transform quaternion\n   * @param out - The transformed vector\n   */;\n  Vector3.transformByQuat = function transformByQuat(v, quaternion, out) {\n    var _x = v._x,\n      _y = v._y,\n      _z = v._z;\n    var qx = quaternion._x,\n      qy = quaternion._y,\n      qz = quaternion._z,\n      qw = quaternion._w;\n\n    // calculate quat * vec\n    var ix = qw * _x + qy * _z - qz * _y;\n    var iy = qw * _y + qz * _x - qx * _z;\n    var iz = qw * _z + qx * _y - qy * _x;\n    var iw = -qx * _x - qy * _y - qz * _z;\n\n    // calculate result * inverse quat\n    out._x = ix * qw - iw * qx - iy * qz + iz * qy;\n    out._y = iy * qw - iw * qy - iz * qx + ix * qz;\n    out._z = iz * qw - iw * qz - ix * qy + iy * qx;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /** @internal */;\n\n  /**\n   * Constructor of Vector3.\n   * @param x - The x component of the vector, default 0\n   * @param y - The y component of the vector, default 0\n   * @param z - The z component of the vector, default 0\n   */\n  function Vector3(x, y, z) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    this._x = void 0;\n    this._y = void 0;\n    this._z = void 0;\n    this._onValueChanged = null;\n    this._x = x;\n    this._y = y;\n    this._z = z;\n  }\n\n  /**\n   * Set the value of this vector.\n   * @param x - The x component of the vector\n   * @param y - The y component of the vector\n   * @param z - The z component of the vector\n   * @returns This vector\n   */\n  var _proto = Vector3.prototype;\n  _proto.set = function set(x, y, z) {\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the sum of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.add = function add(right) {\n    this._x += right._x;\n    this._y += right._y;\n    this._z += right._z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the difference of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.subtract = function subtract(right) {\n    this._x -= right._x;\n    this._y -= right._y;\n    this._z -= right._z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the product of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.multiply = function multiply(right) {\n    this._x *= right._x;\n    this._y *= right._y;\n    this._z *= right._z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the divisor of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.divide = function divide(right) {\n    this._x /= right._x;\n    this._y /= right._y;\n    this._z /= right._z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Calculate the length of this vector.\n   * @returns The length of this vector\n   */;\n  _proto.length = function length() {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z;\n    return Math.sqrt(_x * _x + _y * _y + _z * _z);\n  }\n\n  /**\n   * Calculate the squared length of this vector.\n   * @returns The squared length of this vector\n   */;\n  _proto.lengthSquared = function lengthSquared() {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z;\n    return _x * _x + _y * _y + _z * _z;\n  }\n\n  /**\n   * Reverses the direction of this vector.\n   * @returns This vector\n   */;\n  _proto.negate = function negate() {\n    this._x = -this._x;\n    this._y = -this._y;\n    this._z = -this._z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Converts this vector into a unit vector.\n   * @returns This vector\n   */;\n  _proto.normalize = function normalize() {\n    Vector3.normalize(this, this);\n    return this;\n  }\n\n  /**\n   * Scale this vector by the given value.\n   * @param s - The amount by which to scale the vector\n   * @returns This vector\n   */;\n  _proto.scale = function scale(s) {\n    this._x *= s;\n    this._y *= s;\n    this._z *= s;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * This vector performs a normal transformation using the given 4x4 matrix.\n   * @remarks\n   * A normal transform performs the transformation with the assumption that the w component\n   * is zero. This causes the fourth row and fourth column of the matrix to be unused. The\n   * end result is a vector that is not translated, but all other transformation properties\n   * apply. This is often preferred for normal vectors as normals purely represent direction\n   * rather than location because normal vectors should not be translated.\n   * @param m - The transform matrix\n   * @returns This vector\n   */;\n  _proto.transformNormal = function transformNormal(m) {\n    Vector3.transformNormal(this, m, this);\n    return this;\n  }\n\n  /**\n   * This vector performs a transformation using the given 4x4 matrix.\n   * @param m - The transform matrix\n   * @returns This vector\n   */;\n  _proto.transformToVec3 = function transformToVec3(m) {\n    Vector3.transformToVec3(this, m, this);\n    return this;\n  }\n\n  /**\n   * This vector performs a coordinate transformation using the given 4x4 matrix.\n   * @remarks\n   * A coordinate transform performs the transformation with the assumption that the w component\n   * is one. The four dimensional vector obtained from the transformation operation has each\n   * component in the vector divided by the w component. This forces the w-component to be one and\n   * therefore makes the vector homogeneous. The homogeneous vector is often preferred when working\n   * with coordinates as the w component can safely be ignored.\n   * @param m - The transform matrix\n   * @returns This vector\n   */;\n  _proto.transformCoordinate = function transformCoordinate(m) {\n    Vector3.transformCoordinate(this, m, this);\n    return this;\n  }\n\n  /**\n   * This vector performs a transformation using the given quaternion.\n   * @param quaternion - The transform quaternion\n   * @returns This vector\n   */;\n  _proto.transformByQuat = function transformByQuat(quaternion) {\n    Vector3.transformByQuat(this, quaternion, this);\n    return this;\n  }\n\n  /**\n   * Creates a clone of this vector.\n   * @returns A clone of this vector\n   */;\n  _proto.clone = function clone() {\n    return new Vector3(this._x, this._y, this._z);\n  }\n\n  /**\n   * Copy from vector3 like object.\n   * @param source - Vector3 like object.\n   * @returns This vector\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this._x = source.x;\n    this._y = source.y;\n    this._z = source.z;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this vector from an array.\n   * @param array - The array\n   * @param offset - The start offset of the array\n   * @returns This vector\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    this._x = array[offset];\n    this._y = array[offset + 1];\n    this._z = array[offset + 2];\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this vector to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    out[outOffset] = this._x;\n    out[outOffset + 1] = this._y;\n    out[outOffset + 2] = this._z;\n  };\n  _createClass(Vector3, [{\n    key: \"x\",\n    get:\n    /**\n     * The x component of the vector.\n     */\n    function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The y component of the vector.\n     */\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The z component of the vector.\n     */\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this._z;\n    },\n    set: function set(value) {\n      this._z = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n  }]);\n  return Vector3;\n}();\nVector3._zero = new Vector3(0.0, 0.0, 0.0);\nVector3._one = new Vector3(1.0, 1.0, 1.0);\n\n/**\n * A bounding sphere.\n * */\nvar BoundingSphere = /*#__PURE__*/function () {\n  /**\n   * Calculate a bounding sphere that fully contains the given points.\n   * @param points - The given points\n   * @param out - The calculated bounding sphere\n   */\n  BoundingSphere.fromPoints = function fromPoints(points, out) {\n    if (!points || points.length === 0) {\n      throw new Error(\"points must be array and length must > 0\");\n    }\n    var len = points.length;\n    var center = BoundingSphere._tempVec30;\n    center.x = center.y = center.z = 0;\n\n    // Calculate the center of the sphere.\n    for (var i = 0; i < len; ++i) {\n      Vector3.add(points[i], center, center);\n    }\n\n    // The center of the sphere.\n    Vector3.scale(center, 1 / len, out.center);\n\n    // Calculate the radius of the sphere.\n    var radius = 0.0;\n    for (var _i = 0; _i < len; ++_i) {\n      var distance = Vector3.distanceSquared(center, points[_i]);\n      distance > radius && (radius = distance);\n    }\n    // The radius of the sphere.\n    out.radius = Math.sqrt(radius);\n  }\n\n  /**\n   * Calculate a bounding sphere from a given box.\n   * @param box - The given box\n   * @param out - The calculated bounding sphere\n   */;\n  BoundingSphere.fromBox = function fromBox(box, out) {\n    var center = out.center;\n    var min = box.min,\n      max = box.max;\n    center.x = (min.x + max.x) * 0.5;\n    center.y = (min.y + max.y) * 0.5;\n    center.z = (min.z + max.z) * 0.5;\n    out.radius = Vector3.distance(center, max);\n  }\n\n  /** The center point of the sphere. */;\n\n  /**\n   * Constructor of BoundingSphere.\n   * @param center - The center point of the sphere\n   * @param radius - The radius of the sphere\n   */\n  function BoundingSphere(center, radius) {\n    if (center === void 0) {\n      center = null;\n    }\n    if (radius === void 0) {\n      radius = 0;\n    }\n    this.center = new Vector3();\n    this.radius = 0;\n    center && this.center.copyFrom(center);\n    this.radius = radius;\n  }\n\n  /**\n   * Creates a clone of this sphere.\n   * @returns A clone of this sphere\n   */\n  var _proto = BoundingSphere.prototype;\n  _proto.clone = function clone() {\n    return new BoundingSphere(this.center, this.radius);\n  }\n\n  /**\n   * Copy this sphere from the specified sphere.\n   * @param source - The specified sphere\n   * @returns This sphere\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this.center.copyFrom(source.center);\n    this.radius = source.radius;\n    return this;\n  };\n  return BoundingSphere;\n}();\nBoundingSphere._tempVec30 = new Vector3();\n\n/**\n * Axis Aligned Bound Box (AABB).\n */\nvar BoundingBox = /*#__PURE__*/function () {\n  /**\n   * Calculate a bounding box from the center point and the extent of the bounding box.\n   * @param center - The center point\n   * @param extent - The extent of the bounding box\n   * @param out - The calculated bounding box\n   */\n  BoundingBox.fromCenterAndExtent = function fromCenterAndExtent(center, extent, out) {\n    Vector3.subtract(center, extent, out.min);\n    Vector3.add(center, extent, out.max);\n  }\n\n  /**\n   * Calculate a bounding box that fully contains the given points.\n   * @param points - The given points\n   * @param out - The calculated bounding box\n   */;\n  BoundingBox.fromPoints = function fromPoints(points, out) {\n    if (!points || points.length === 0) {\n      throw new Error(\"points must be array and length must > 0\");\n    }\n    var min = out.min,\n      max = out.max;\n    min.x = min.y = min.z = Number.MAX_VALUE;\n    max.x = max.y = max.z = -Number.MAX_VALUE;\n    for (var i = 0, l = points.length; i < l; ++i) {\n      var point = points[i];\n      Vector3.min(min, point, min);\n      Vector3.max(max, point, max);\n    }\n  }\n\n  /**\n   * Calculate a bounding box from a given sphere.\n   * @param sphere - The given sphere\n   * @param out - The calculated bounding box\n   */;\n  BoundingBox.fromSphere = function fromSphere(sphere, out) {\n    var center = sphere.center,\n      radius = sphere.radius;\n    var min = out.min,\n      max = out.max;\n    min.x = center.x - radius;\n    min.y = center.y - radius;\n    min.z = center.z - radius;\n    max.x = center.x + radius;\n    max.y = center.y + radius;\n    max.z = center.z + radius;\n  }\n\n  /**\n   * Transform a bounding box.\n   * @param source - The original bounding box\n   * @param matrix - The transform to apply to the bounding box\n   * @param out - The transformed bounding box\n   */;\n  BoundingBox.transform = function transform(source, matrix, out) {\n    // https://zeux.io/2010/10/17/aabb-from-obb-with-component-wise-abs/\n    var center = BoundingBox._tempVec30;\n    var extent = BoundingBox._tempVec31;\n    source.getCenter(center);\n    source.getExtent(extent);\n    Vector3.transformCoordinate(center, matrix, center);\n    var x = extent.x,\n      y = extent.y,\n      z = extent.z;\n    var e = matrix.elements;\n    extent.x = Math.abs(x * e[0]) + Math.abs(y * e[4]) + Math.abs(z * e[8]);\n    extent.y = Math.abs(x * e[1]) + Math.abs(y * e[5]) + Math.abs(z * e[9]);\n    extent.z = Math.abs(x * e[2]) + Math.abs(y * e[6]) + Math.abs(z * e[10]);\n\n    // set min、max\n    Vector3.subtract(center, extent, out.min);\n    Vector3.add(center, extent, out.max);\n  }\n\n  /**\n   * Calculate a bounding box that is as large as the total combined area of the two specified boxes.\n   * @param box1 - The first box to merge\n   * @param box2 - The second box to merge\n   * @param out - The merged bounding box\n   * @returns The merged bounding box\n   */;\n  BoundingBox.merge = function merge(box1, box2, out) {\n    Vector3.min(box1.min, box2.min, out.min);\n    Vector3.max(box1.max, box2.max, out.max);\n    return out;\n  }\n\n  /** The minimum point of the box. */;\n\n  /**\n   * Constructor of BoundingBox.\n   * @param min - The minimum point of the box\n   * @param max - The maximum point of the box\n   */\n  function BoundingBox(min, max) {\n    if (min === void 0) {\n      min = null;\n    }\n    if (max === void 0) {\n      max = null;\n    }\n    this.min = new Vector3();\n    this.max = new Vector3();\n    min && this.min.copyFrom(min);\n    max && this.max.copyFrom(max);\n  }\n\n  /**\n   * Get the center point of this bounding box.\n   * @param out - The center point of this bounding box\n   * @returns The center point of this bounding box\n   */\n  var _proto = BoundingBox.prototype;\n  _proto.getCenter = function getCenter(out) {\n    Vector3.add(this.min, this.max, out);\n    Vector3.scale(out, 0.5, out);\n    return out;\n  }\n\n  /**\n   * Get the extent of this bounding box.\n   * @param out - The extent of this bounding box\n   * @returns The extent of this bounding box\n   */;\n  _proto.getExtent = function getExtent(out) {\n    Vector3.subtract(this.max, this.min, out);\n    Vector3.scale(out, 0.5, out);\n    return out;\n  }\n\n  /**\n   * Get the eight corners of this bounding box.\n   * @param out - An array of points representing the eight corners of this bounding box\n   * @returns An array of points representing the eight corners of this bounding box\n   */;\n  _proto.getCorners = function getCorners(out) {\n    if (out === void 0) {\n      out = [];\n    }\n    var min = this.min,\n      max = this.max;\n    var minX = min.x;\n    var minY = min.y;\n    var minZ = min.z;\n    var maxX = max.x;\n    var maxY = max.y;\n    var maxZ = max.z;\n    var len = out.length;\n\n    // The array length is less than 8 to make up\n    if (len < 8) {\n      for (var i = 0, l = 8 - len; i < l; ++i) {\n        out[len + i] = new Vector3();\n      }\n    }\n    out[0].set(minX, maxY, maxZ);\n    out[1].set(maxX, maxY, maxZ);\n    out[2].set(maxX, minY, maxZ);\n    out[3].set(minX, minY, maxZ);\n    out[4].set(minX, maxY, minZ);\n    out[5].set(maxX, maxY, minZ);\n    out[6].set(maxX, minY, minZ);\n    out[7].set(minX, minY, minZ);\n    return out;\n  }\n\n  /**\n   * Transform a bounding box.\n   * @param matrix - The transform to apply to the bounding box\n   * @returns The transformed bounding box\n   */;\n  _proto.transform = function transform(matrix) {\n    BoundingBox.transform(this, matrix, this);\n    return this;\n  }\n\n  /**\n   * Creates a clone of this box.\n   * @returns A clone of this box\n   */;\n  _proto.clone = function clone() {\n    return new BoundingBox(this.min, this.max);\n  }\n\n  /**\n   * Copy this bounding box from the specified box.\n   * @param source - The specified box\n   * @returns This bounding box\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this.min.copyFrom(source.min);\n    this.max.copyFrom(source.max);\n    return this;\n  };\n  return BoundingBox;\n}();\nBoundingBox._tempVec30 = new Vector3();\nBoundingBox._tempVec31 = new Vector3();\n\n/**\n * Contains static methods to help in determining intersections, containment, etc.\n */\nvar CollisionUtil = /*#__PURE__*/function () {\n  function CollisionUtil() {}\n  /**\n   * Calculate the distance from a point to a plane.\n   * @param plane - The plane\n   * @param point - The point\n   * @returns The distance from a point to a plane\n   */\n  CollisionUtil.distancePlaneAndPoint = function distancePlaneAndPoint(plane, point) {\n    return Vector3.dot(plane.normal, point) + plane.distance;\n  }\n\n  /**\n   * Get the intersection type between a plane and a point.\n   * @param plane - The plane\n   * @param point - The point\n   * @returns The intersection type\n   */;\n  CollisionUtil.intersectsPlaneAndPoint = function intersectsPlaneAndPoint(plane, point) {\n    var distance = CollisionUtil.distancePlaneAndPoint(plane, point);\n    if (distance > 0) {\n      return PlaneIntersectionType.Front;\n    }\n    if (distance < 0) {\n      return PlaneIntersectionType.Back;\n    }\n    return PlaneIntersectionType.Intersecting;\n  }\n\n  /**\n   * Get the intersection type between a plane and a box (AABB).\n   * @param plane - The plane\n   * @param box - The box\n   * @returns The intersection type\n   */;\n  CollisionUtil.intersectsPlaneAndBox = function intersectsPlaneAndBox(plane, box) {\n    var min = box.min,\n      max = box.max;\n    var normal = plane.normal;\n    var front = CollisionUtil._tempVec30;\n    var back = CollisionUtil._tempVec31;\n    if (normal.x >= 0) {\n      front.x = max.x;\n      back.x = min.x;\n    } else {\n      front.x = min.x;\n      back.x = max.x;\n    }\n    if (normal.y >= 0) {\n      front.y = max.y;\n      back.y = min.y;\n    } else {\n      front.y = min.y;\n      back.y = max.y;\n    }\n    if (normal.z >= 0) {\n      front.z = max.z;\n      back.z = min.z;\n    } else {\n      front.z = min.z;\n      back.z = max.z;\n    }\n    if (CollisionUtil.distancePlaneAndPoint(plane, front) < 0) {\n      return PlaneIntersectionType.Back;\n    }\n    if (CollisionUtil.distancePlaneAndPoint(plane, back) > 0) {\n      return PlaneIntersectionType.Front;\n    }\n    return PlaneIntersectionType.Intersecting;\n  }\n\n  /**\n   * Get the intersection type between a plane and a sphere.\n   * @param plane - The plane\n   * @param sphere - The sphere\n   * @returns The intersection type\n   */;\n  CollisionUtil.intersectsPlaneAndSphere = function intersectsPlaneAndSphere(plane, sphere) {\n    var center = sphere.center,\n      radius = sphere.radius;\n    var distance = CollisionUtil.distancePlaneAndPoint(plane, center);\n    if (distance > radius) {\n      return PlaneIntersectionType.Front;\n    }\n    if (distance < -radius) {\n      return PlaneIntersectionType.Back;\n    }\n    return PlaneIntersectionType.Intersecting;\n  }\n\n  /**\n   * Get the intersection type between a ray and a plane.\n   * @param ray - The ray\n   * @param plane - The plane\n   * @returns The distance from ray to plane if intersecting, -1 otherwise\n   */;\n  CollisionUtil.intersectsRayAndPlane = function intersectsRayAndPlane(ray, plane) {\n    var normal = plane.normal;\n    var zeroTolerance = MathUtil.zeroTolerance;\n    var dir = Vector3.dot(normal, ray.direction);\n    // Parallel\n    if (Math.abs(dir) < zeroTolerance) {\n      return -1;\n    }\n    var position = Vector3.dot(normal, ray.origin);\n    var distance = (-plane.distance - position) / dir;\n    if (distance < 0) {\n      if (distance < -zeroTolerance) {\n        return -1;\n      }\n      distance = 0;\n    }\n    return distance;\n  }\n\n  /**\n   * Get the intersection type between a ray and a box (AABB).\n   * @param ray - The ray\n   * @param box - The box\n   * @returns The distance from ray to box if intersecting, -1 otherwise\n   */;\n  CollisionUtil.intersectsRayAndBox = function intersectsRayAndBox(ray, box) {\n    var zeroTolerance = MathUtil.zeroTolerance;\n    var origin = ray.origin,\n      direction = ray.direction;\n    var min = box.min,\n      max = box.max;\n    var dirX = direction.x;\n    var dirY = direction.y;\n    var dirZ = direction.z;\n    var oriX = origin.x;\n    var oriY = origin.y;\n    var oriZ = origin.z;\n    var distance = 0;\n    var tmax = Number.MAX_VALUE;\n    if (Math.abs(dirX) < zeroTolerance) {\n      if (oriX < min.x || oriX > max.x) {\n        return -1;\n      }\n    } else {\n      var inverse = 1.0 / dirX;\n      var t1 = (min.x - oriX) * inverse;\n      var t2 = (max.x - oriX) * inverse;\n      if (t1 > t2) {\n        var temp = t1;\n        t1 = t2;\n        t2 = temp;\n      }\n      distance = Math.max(t1, distance);\n      tmax = Math.min(t2, tmax);\n      if (distance > tmax) {\n        return -1;\n      }\n    }\n    if (Math.abs(dirY) < zeroTolerance) {\n      if (oriY < min.y || oriY > max.y) {\n        return -1;\n      }\n    } else {\n      var _inverse = 1.0 / dirY;\n      var _t = (min.y - oriY) * _inverse;\n      var _t2 = (max.y - oriY) * _inverse;\n      if (_t > _t2) {\n        var _temp = _t;\n        _t = _t2;\n        _t2 = _temp;\n      }\n      distance = Math.max(_t, distance);\n      tmax = Math.min(_t2, tmax);\n      if (distance > tmax) {\n        return -1;\n      }\n    }\n    if (Math.abs(dirZ) < zeroTolerance) {\n      if (oriZ < min.z || oriZ > max.z) {\n        return -1;\n      }\n    } else {\n      var _inverse2 = 1.0 / dirZ;\n      var _t3 = (min.z - oriZ) * _inverse2;\n      var _t4 = (max.z - oriZ) * _inverse2;\n      if (_t3 > _t4) {\n        var _temp2 = _t3;\n        _t3 = _t4;\n        _t4 = _temp2;\n      }\n      distance = Math.max(_t3, distance);\n      tmax = Math.min(_t4, tmax);\n      if (distance > tmax) {\n        return -1;\n      }\n    }\n    return distance;\n  }\n\n  /**\n   * Get the intersection type between a ray and a sphere.\n   * @param ray - The ray\n   * @param sphere - The sphere\n   * @returns The distance from ray to sphere if intersecting, -1 otherwise\n   */;\n  CollisionUtil.intersectsRayAndSphere = function intersectsRayAndSphere(ray, sphere) {\n    var origin = ray.origin,\n      direction = ray.direction;\n    var center = sphere.center,\n      radius = sphere.radius;\n    var m = CollisionUtil._tempVec30;\n    Vector3.subtract(origin, center, m);\n    var b = Vector3.dot(m, direction);\n    var c = Vector3.dot(m, m) - radius * radius;\n    if (b > 0 && c > 0) {\n      return -1;\n    }\n    var discriminant = b * b - c;\n    if (discriminant < 0) {\n      return -1;\n    }\n    var distance = -b - Math.sqrt(discriminant);\n    if (distance < 0) {\n      distance = 0;\n    }\n    return distance;\n  }\n\n  /**\n   * Check whether the boxes intersect.\n   * @param boxA - The first box to check\n   * @param boxB - The second box to check\n   * @returns True if the boxes intersect, false otherwise\n   */;\n  CollisionUtil.intersectsBoxAndBox = function intersectsBoxAndBox(boxA, boxB) {\n    if (boxA.min.x > boxB.max.x || boxB.min.x > boxA.max.x) {\n      return false;\n    }\n    if (boxA.min.y > boxB.max.y || boxB.min.y > boxA.max.y) {\n      return false;\n    }\n    return !(boxA.min.z > boxB.max.z || boxB.min.z > boxA.max.z);\n  }\n\n  /**\n   * Check whether the spheres intersect.\n   * @param sphereA - The first sphere to check\n   * @param sphereB - The second sphere to check\n   * @returns True if the spheres intersect, false otherwise\n   */;\n  CollisionUtil.intersectsSphereAndSphere = function intersectsSphereAndSphere(sphereA, sphereB) {\n    var radiisum = sphereA.radius + sphereB.radius;\n    return Vector3.distanceSquared(sphereA.center, sphereB.center) < radiisum * radiisum;\n  }\n\n  /**\n   * Check whether the sphere and the box intersect.\n   * @param sphere - The sphere to check\n   * @param box - The box to check\n   * @returns True if the sphere and the box intersect, false otherwise\n   */;\n  CollisionUtil.intersectsSphereAndBox = function intersectsSphereAndBox(sphere, box) {\n    var center = sphere.center;\n    var max = box.max;\n    var min = box.min;\n    var closestPoint = CollisionUtil._tempVec30;\n    closestPoint.set(Math.max(min.x, Math.min(center.x, max.x)), Math.max(min.y, Math.min(center.y, max.y)), Math.max(min.z, Math.min(center.z, max.z)));\n    var distance = Vector3.distanceSquared(center, closestPoint);\n    return distance <= sphere.radius * sphere.radius;\n  }\n\n  /**\n   * Get whether or not a specified bounding box intersects with this frustum (Contains or Intersects).\n   * @param frustum - The frustum\n   * @param box - The box\n   * @returns True if bounding box intersects with this frustum, false otherwise\n   */;\n  CollisionUtil.intersectsFrustumAndBox = function intersectsFrustumAndBox(frustum, box) {\n    var min = box.min,\n      max = box.max;\n    var back = CollisionUtil._tempVec30;\n    for (var i = 0; i < 6; ++i) {\n      var plane = frustum.getPlane(i);\n      var normal = plane.normal;\n      back.set(normal.x >= 0 ? min.x : max.x, normal.y >= 0 ? min.y : max.y, normal.z >= 0 ? min.z : max.z);\n      if (Vector3.dot(normal, back) > -plane.distance) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Get the containment type between a frustum and a box (AABB).\n   * @param frustum - The frustum\n   * @param box - The box\n   * @returns The containment type\n   */;\n  CollisionUtil.frustumContainsBox = function frustumContainsBox(frustum, box) {\n    var min = box.min,\n      max = box.max;\n    var front = CollisionUtil._tempVec30;\n    var back = CollisionUtil._tempVec31;\n    var result = ContainmentType.Contains;\n    for (var i = 0; i < 6; ++i) {\n      var plane = frustum.getPlane(i);\n      var normal = plane.normal;\n      if (normal.x >= 0) {\n        front.x = max.x;\n        back.x = min.x;\n      } else {\n        front.x = min.x;\n        back.x = max.x;\n      }\n      if (normal.y >= 0) {\n        front.y = max.y;\n        back.y = min.y;\n      } else {\n        front.y = min.y;\n        back.y = max.y;\n      }\n      if (normal.z >= 0) {\n        front.z = max.z;\n        back.z = min.z;\n      } else {\n        front.z = min.z;\n        back.z = max.z;\n      }\n      if (CollisionUtil.intersectsPlaneAndPoint(plane, back) === PlaneIntersectionType.Front) {\n        return ContainmentType.Disjoint;\n      }\n      if (CollisionUtil.intersectsPlaneAndPoint(plane, front) === PlaneIntersectionType.Front) {\n        result = ContainmentType.Intersects;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Get the containment type between a frustum and a sphere.\n   * @param frustum - The frustum\n   * @param sphere - The sphere\n   * @returns The containment type\n   */;\n  CollisionUtil.frustumContainsSphere = function frustumContainsSphere(frustum, sphere) {\n    var result = ContainmentType.Contains;\n    for (var i = 0; i < 6; ++i) {\n      var plane = frustum.getPlane(i);\n      var intersectionType = CollisionUtil.intersectsPlaneAndSphere(plane, sphere);\n      if (intersectionType === PlaneIntersectionType.Front) {\n        return ContainmentType.Disjoint;\n      } else if (intersectionType === PlaneIntersectionType.Intersecting) {\n        result = ContainmentType.Intersects;\n        break;\n      }\n    }\n    return result;\n  };\n  return CollisionUtil;\n}();\nCollisionUtil._tempVec30 = new Vector3();\nCollisionUtil._tempVec31 = new Vector3();\n\n/**\n * Represents a plane in three dimensional space.\n */\nvar Plane = /*#__PURE__*/function () {\n  /**\n   * Normalize the normal vector of the specified plane.\n   * @param p - The specified plane\n   * @param out - A normalized version of the specified plane\n   */\n  Plane.normalize = function normalize(p, out) {\n    var normal = p.normal;\n    var factor = 1.0 / normal.length();\n    Vector3.scale(normal, factor, out.normal);\n    out.distance = p.distance * factor;\n  }\n\n  /**\n   * Calculate the plane that contains the three specified points.\n   * @param point0 - The first point\n   * @param point1 - The second point\n   * @param point2 - The third point\n   * @param out - The calculated plane\n   */;\n  Plane.fromPoints = function fromPoints(point0, point1, point2, out) {\n    var x0 = point0.x;\n    var y0 = point0.y;\n    var z0 = point0.z;\n    var x1 = point1.x - x0;\n    var y1 = point1.y - y0;\n    var z1 = point1.z - z0;\n    var x2 = point2.x - x0;\n    var y2 = point2.y - y0;\n    var z2 = point2.z - z0;\n    var yz = y1 * z2 - z1 * y2;\n    var xz = z1 * x2 - x1 * z2;\n    var xy = x1 * y2 - y1 * x2;\n    var invPyth = 1.0 / Math.sqrt(yz * yz + xz * xz + xy * xy);\n    var x = yz * invPyth;\n    var y = xz * invPyth;\n    var z = xy * invPyth;\n    var normal = out.normal;\n    normal.x = x;\n    normal.y = y;\n    normal.z = z;\n    out.distance = -(x * x0 + y * y0 + z * z0);\n  }\n\n  /** The normal of the plane. */;\n\n  /**\n   * Constructor of Plane.\n   * @param normal - The normal vector\n   * @param distance - The distance of the plane along its normal to the origin\n   */\n  function Plane(normal, distance) {\n    if (normal === void 0) {\n      normal = null;\n    }\n    if (distance === void 0) {\n      distance = 0;\n    }\n    this.normal = new Vector3();\n    this.distance = 0;\n    normal && this.normal.copyFrom(normal);\n    this.distance = distance;\n  }\n\n  /**\n   * Normalize the normal vector of this plane.\n   * @returns The plane after normalize\n   */\n  var _proto = Plane.prototype;\n  _proto.normalize = function normalize() {\n    Plane.normalize(this, this);\n    return this;\n  }\n\n  /**\n   * Creates a clone of this plane.\n   * @returns A clone of this plane\n   */;\n  _proto.clone = function clone() {\n    var out = new Plane();\n    out.copyFrom(this);\n    return out;\n  }\n\n  /**\n   * Copy this plane from the specified plane.\n   * @param source - The specified plane\n   * @returns This plane\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this.normal.copyFrom(source.normal);\n    this.distance = source.distance;\n    return this;\n  };\n  return Plane;\n}();\n\n/**\n * A bounding frustum.\n */\nvar BoundingFrustum = /*#__PURE__*/function () {\n  /** The near plane of this frustum. */\n\n  /** The far plane of this frustum. */\n\n  /** The left plane of this frustum. */\n\n  /** The right plane of this frustum. */\n\n  /** The top plane of this frustum. */\n\n  /** The bottom plane of this frustum. */\n\n  /**\n   * Constructor of BoundingFrustum.\n   * @param matrix - The view-projection matrix\n   */\n  function BoundingFrustum(matrix) {\n    if (matrix === void 0) {\n      matrix = null;\n    }\n    this.near = void 0;\n    this.far = void 0;\n    this.left = void 0;\n    this.right = void 0;\n    this.top = void 0;\n    this.bottom = void 0;\n    this.near = new Plane();\n    this.far = new Plane();\n    this.left = new Plane();\n    this.right = new Plane();\n    this.top = new Plane();\n    this.bottom = new Plane();\n    matrix && this.calculateFromMatrix(matrix);\n  }\n\n  /**\n   * Get the plane by the given index.\n   * 0: near\n   * 1: far\n   * 2: left\n   * 3: right\n   * 4: top\n   * 5: bottom\n   * @param index - The index\n   * @returns The plane get\n   */\n  var _proto = BoundingFrustum.prototype;\n  _proto.getPlane = function getPlane(index) {\n    switch (index) {\n      case 0:\n        return this.near;\n      case 1:\n        return this.far;\n      case 2:\n        return this.left;\n      case 3:\n        return this.right;\n      case 4:\n        return this.top;\n      case 5:\n        return this.bottom;\n      default:\n        return null;\n    }\n  }\n\n  /**\n   * Update all planes from the given matrix.\n   * @param matrix - The given view-projection matrix\n   */;\n  _proto.calculateFromMatrix = function calculateFromMatrix(matrix) {\n    var me = matrix.elements;\n    var m11 = me[0];\n    var m12 = me[1];\n    var m13 = me[2];\n    var m14 = me[3];\n    var m21 = me[4];\n    var m22 = me[5];\n    var m23 = me[6];\n    var m24 = me[7];\n    var m31 = me[8];\n    var m32 = me[9];\n    var m33 = me[10];\n    var m34 = me[11];\n    var m41 = me[12];\n    var m42 = me[13];\n    var m43 = me[14];\n    var m44 = me[15];\n\n    // near\n    var nearNormal = this.near.normal;\n    nearNormal.set(-m14 - m13, -m24 - m23, -m34 - m33);\n    this.near.distance = -m44 - m43;\n    this.near.normalize();\n\n    // far\n    var farNormal = this.far.normal;\n    farNormal.set(m13 - m14, m23 - m24, m33 - m34);\n    this.far.distance = m43 - m44;\n    this.far.normalize();\n\n    // left\n    var leftNormal = this.left.normal;\n    leftNormal.set(-m14 - m11, -m24 - m21, -m34 - m31);\n    this.left.distance = -m44 - m41;\n    this.left.normalize();\n\n    // right\n    var rightNormal = this.right.normal;\n    rightNormal.set(m11 - m14, m21 - m24, m31 - m34);\n    this.right.distance = m41 - m44;\n    this.right.normalize();\n\n    // top\n    var topNormal = this.top.normal;\n    topNormal.set(m12 - m14, m22 - m24, m32 - m34);\n    this.top.distance = m42 - m44;\n    this.top.normalize();\n\n    // bottom\n    var bottomNormal = this.bottom.normal;\n    bottomNormal.set(-m14 - m12, -m24 - m22, -m34 - m32);\n    this.bottom.distance = -m44 - m42;\n    this.bottom.normalize();\n  }\n\n  /**\n   * Get whether or not a specified bounding box intersects with this frustum (Contains or Intersects).\n   * @param box - The box for testing\n   * @returns True if bounding box intersects with this frustum, false otherwise\n   */;\n  _proto.intersectsBox = function intersectsBox(box) {\n    return CollisionUtil.intersectsFrustumAndBox(this, box);\n  }\n\n  /**\n   * Get whether or not a specified bounding sphere intersects with this frustum (Contains or Intersects).\n   * @param sphere - The sphere for testing\n   * @returns True if bounding sphere intersects with this frustum, false otherwise\n   */;\n  _proto.intersectsSphere = function intersectsSphere(sphere) {\n    return CollisionUtil.frustumContainsSphere(this, sphere) !== ContainmentType.Disjoint;\n  }\n\n  /**\n   * Creates a clone of this frustum.\n   * @returns A clone of this frustum\n   */;\n  _proto.clone = function clone() {\n    var out = new BoundingFrustum();\n    out.copyFrom(this);\n    return out;\n  }\n\n  /**\n   * Copy this frustum from the specified frustum.\n   * @param source - The specified frustum\n   * @returns This frustum\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this.near.copyFrom(source.near);\n    this.far.copyFrom(source.far);\n    this.left.copyFrom(source.left);\n    this.right.copyFrom(source.right);\n    this.top.copyFrom(source.top);\n    this.bottom.copyFrom(source.bottom);\n    return this;\n  };\n  return BoundingFrustum;\n}();\n\n/**\n * Represents a 3x3 mathematical matrix.\n */\nvar Matrix3x3 = /*#__PURE__*/function () {\n  /**\n   * Determines the sum of two matrices.\n   * @param left - The first matrix to add\n   * @param right - The second matrix to add\n   * @param out - The sum of two matrices\n   */\n  Matrix3x3.add = function add(left, right, out) {\n    var le = left.elements;\n    var re = right.elements;\n    var oe = out.elements;\n    oe[0] = le[0] + re[0];\n    oe[1] = le[1] + re[1];\n    oe[2] = le[2] + re[2];\n    oe[3] = le[3] + re[3];\n    oe[4] = le[4] + re[4];\n    oe[5] = le[5] + re[5];\n    oe[6] = le[6] + re[6];\n    oe[7] = le[7] + re[7];\n    oe[8] = le[8] + re[8];\n  }\n\n  /**\n   * Determines the difference between two matrices.\n   * @param left - The first matrix to subtract\n   * @param right - The second matrix to subtract\n   * @param out - The difference between two matrices\n   */;\n  Matrix3x3.subtract = function subtract(left, right, out) {\n    var le = left.elements;\n    var re = right.elements;\n    var oe = out.elements;\n    oe[0] = le[0] - re[0];\n    oe[1] = le[1] - re[1];\n    oe[2] = le[2] - re[2];\n    oe[3] = le[3] - re[3];\n    oe[4] = le[4] - re[4];\n    oe[5] = le[5] - re[5];\n    oe[6] = le[6] - re[6];\n    oe[7] = le[7] - re[7];\n    oe[8] = le[8] - re[8];\n  }\n\n  /**\n   * Determines the product of two matrices.\n   * @param left - The first matrix to multiply\n   * @param right - The second matrix to multiply\n   * @param out - The product of two matrices\n   */;\n  Matrix3x3.multiply = function multiply(left, right, out) {\n    var le = left.elements;\n    var re = right.elements;\n    var oe = out.elements;\n    var l11 = le[0],\n      l12 = le[1],\n      l13 = le[2];\n    var l21 = le[3],\n      l22 = le[4],\n      l23 = le[5];\n    var l31 = le[6],\n      l32 = le[7],\n      l33 = le[8];\n    var r11 = re[0],\n      r12 = re[1],\n      r13 = re[2];\n    var r21 = re[3],\n      r22 = re[4],\n      r23 = re[5];\n    var r31 = re[6],\n      r32 = re[7],\n      r33 = re[8];\n    oe[0] = l11 * r11 + l21 * r12 + l31 * r13;\n    oe[1] = l12 * r11 + l22 * r12 + l32 * r13;\n    oe[2] = l13 * r11 + l23 * r12 + l33 * r13;\n    oe[3] = l11 * r21 + l21 * r22 + l31 * r23;\n    oe[4] = l12 * r21 + l22 * r22 + l32 * r23;\n    oe[5] = l13 * r21 + l23 * r22 + l33 * r23;\n    oe[6] = l11 * r31 + l21 * r32 + l31 * r33;\n    oe[7] = l12 * r31 + l22 * r32 + l32 * r33;\n    oe[8] = l13 * r31 + l23 * r32 + l33 * r33;\n  }\n\n  /**\n   * Determines whether the specified matrices are equals.\n   * @param left - The first matrix to compare\n   * @param right - The second matrix to compare\n   * @returns True if the specified matrices are equals, false otherwise\n   */;\n  Matrix3x3.equals = function equals(left, right) {\n    var le = left.elements;\n    var re = right.elements;\n    return MathUtil.equals(le[0], re[0]) && MathUtil.equals(le[1], re[1]) && MathUtil.equals(le[2], re[2]) && MathUtil.equals(le[3], re[3]) && MathUtil.equals(le[4], re[4]) && MathUtil.equals(le[5], re[5]) && MathUtil.equals(le[6], re[6]) && MathUtil.equals(le[7], re[7]) && MathUtil.equals(le[8], re[8]);\n  }\n\n  /**\n   * Performs a linear interpolation between two matrices.\n   * @param start - The first matrix\n   * @param end - The second matrix\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of linear blending between two matrices\n   */;\n  Matrix3x3.lerp = function lerp(start, end, t, out) {\n    var se = start.elements;\n    var ee = end.elements;\n    var oe = out.elements;\n    var inv = 1.0 - t;\n    oe[0] = se[0] * inv + ee[0] * t;\n    oe[1] = se[1] * inv + ee[1] * t;\n    oe[2] = se[2] * inv + ee[2] * t;\n    oe[3] = se[3] * inv + ee[3] * t;\n    oe[4] = se[4] * inv + ee[4] * t;\n    oe[5] = se[5] * inv + ee[5] * t;\n    oe[6] = se[6] * inv + ee[6] * t;\n    oe[7] = se[7] * inv + ee[7] * t;\n    oe[8] = se[8] * inv + ee[8] * t;\n  }\n\n  /**\n   * Calculate a rotation matrix from a quaternion.\n   * @param quaternion - The quaternion used to calculate the matrix\n   * @param out - The calculated rotation matrix\n   */;\n  Matrix3x3.rotationQuaternion = function rotationQuaternion(quaternion, out) {\n    var oe = out.elements;\n    var x = quaternion._x,\n      y = quaternion._y,\n      z = quaternion._z,\n      w = quaternion._w;\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var yx = y * x2;\n    var yy = y * y2;\n    var zx = z * x2;\n    var zy = z * y2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    oe[0] = 1 - yy - zz;\n    oe[3] = yx - wz;\n    oe[6] = zx + wy;\n    oe[1] = yx + wz;\n    oe[4] = 1 - xx - zz;\n    oe[7] = zy - wx;\n    oe[2] = zx - wy;\n    oe[5] = zy + wx;\n    oe[8] = 1 - xx - yy;\n  }\n\n  /**\n   * Calculate a matrix from scale vector.\n   * @param s - The scale vector\n   * @param out - The calculated matrix\n   */;\n  Matrix3x3.scaling = function scaling(s, out) {\n    var oe = out.elements;\n    oe[0] = s._x;\n    oe[1] = 0;\n    oe[2] = 0;\n    oe[3] = 0;\n    oe[4] = s._y;\n    oe[5] = 0;\n    oe[6] = 0;\n    oe[7] = 0;\n    oe[8] = 1;\n  }\n\n  /**\n   * Calculate a matrix from translation vector.\n   * @param translation - The translation vector\n   * @param out - The calculated matrix\n   */;\n  Matrix3x3.translation = function translation(_translation, out) {\n    var oe = out.elements;\n    oe[0] = 1;\n    oe[1] = 0;\n    oe[2] = 0;\n    oe[3] = 0;\n    oe[4] = 1;\n    oe[5] = 0;\n    oe[6] = _translation._x;\n    oe[7] = _translation._y;\n    oe[8] = 1;\n  }\n\n  /**\n   * Calculate the inverse of the specified matrix.\n   * @param a - The matrix whose inverse is to be calculated\n   * @param out - The inverse of the specified matrix\n   */;\n  Matrix3x3.invert = function invert(a, out) {\n    var ae = a.elements;\n    var oe = out.elements;\n    var a11 = ae[0],\n      a12 = ae[1],\n      a13 = ae[2];\n    var a21 = ae[3],\n      a22 = ae[4],\n      a23 = ae[5];\n    var a31 = ae[6],\n      a32 = ae[7],\n      a33 = ae[8];\n    var b12 = a33 * a22 - a23 * a32;\n    var b22 = -a33 * a21 + a23 * a31;\n    var b32 = a32 * a21 - a22 * a31;\n    var det = a11 * b12 + a12 * b22 + a13 * b32;\n    if (!det) {\n      return;\n    }\n    det = 1.0 / det;\n    oe[0] = b12 * det;\n    oe[1] = (-a33 * a12 + a13 * a32) * det;\n    oe[2] = (a23 * a12 - a13 * a22) * det;\n    oe[3] = b22 * det;\n    oe[4] = (a33 * a11 - a13 * a31) * det;\n    oe[5] = (-a23 * a11 + a13 * a21) * det;\n    oe[6] = b32 * det;\n    oe[7] = (-a32 * a11 + a12 * a31) * det;\n    oe[8] = (a22 * a11 - a12 * a21) * det;\n  }\n\n  /**\n   * Calculate a 3x3 normal matrix from a 4x4 matrix.\n   * @remarks The calculation process is the transpose matrix of the inverse matrix.\n   * @param mat4 - The 4x4 matrix\n   * @param out - THe 3x3 normal matrix\n   */;\n  Matrix3x3.normalMatrix = function normalMatrix(mat4, out) {\n    var ae = mat4.elements;\n    var oe = out.elements;\n    var a11 = ae[0],\n      a12 = ae[1],\n      a13 = ae[2],\n      a14 = ae[3];\n    var a21 = ae[4],\n      a22 = ae[5],\n      a23 = ae[6],\n      a24 = ae[7];\n    var a31 = ae[8],\n      a32 = ae[9],\n      a33 = ae[10],\n      a34 = ae[11];\n    var a41 = ae[12],\n      a42 = ae[13],\n      a43 = ae[14],\n      a44 = ae[15];\n    var b00 = a11 * a22 - a12 * a21;\n    var b01 = a11 * a23 - a13 * a21;\n    var b02 = a11 * a24 - a14 * a21;\n    var b03 = a12 * a23 - a13 * a22;\n    var b04 = a12 * a24 - a14 * a22;\n    var b05 = a13 * a24 - a14 * a23;\n    var b06 = a31 * a42 - a32 * a41;\n    var b07 = a31 * a43 - a33 * a41;\n    var b08 = a31 * a44 - a34 * a41;\n    var b09 = a32 * a43 - a33 * a42;\n    var b10 = a32 * a44 - a34 * a42;\n    var b11 = a33 * a44 - a34 * a43;\n    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    oe[0] = (a22 * b11 - a23 * b10 + a24 * b09) * det;\n    oe[1] = (a23 * b08 - a21 * b11 - a24 * b07) * det;\n    oe[2] = (a21 * b10 - a22 * b08 + a24 * b06) * det;\n    oe[3] = (a13 * b10 - a12 * b11 - a14 * b09) * det;\n    oe[4] = (a11 * b11 - a13 * b08 + a14 * b07) * det;\n    oe[5] = (a12 * b08 - a11 * b10 - a14 * b06) * det;\n    oe[6] = (a42 * b05 - a43 * b04 + a44 * b03) * det;\n    oe[7] = (a43 * b02 - a41 * b05 - a44 * b01) * det;\n    oe[8] = (a41 * b04 - a42 * b02 + a44 * b00) * det;\n  }\n\n  /**\n   * The specified matrix rotates around an angle.\n   * @param a - The specified matrix\n   * @param r - The rotation angle in radians\n   * @param out - The rotated matrix\n   */;\n  Matrix3x3.rotate = function rotate(a, r, out) {\n    var ae = a.elements;\n    var oe = out.elements;\n    var s = Math.sin(r);\n    var c = Math.cos(r);\n    var a11 = ae[0],\n      a12 = ae[1],\n      a13 = ae[2];\n    var a21 = ae[3],\n      a22 = ae[4],\n      a23 = ae[5];\n    var a31 = ae[6],\n      a32 = ae[7],\n      a33 = ae[8];\n    oe[0] = c * a11 + s * a21;\n    oe[1] = c * a12 + s * a22;\n    oe[2] = c * a13 + s * a23;\n    oe[3] = c * a21 - s * a11;\n    oe[4] = c * a22 - s * a12;\n    oe[5] = c * a23 - s * a13;\n    oe[6] = a31;\n    oe[7] = a32;\n    oe[8] = a33;\n  }\n\n  /**\n   * Scale a matrix by a given vector.\n   * @param m - The matrix\n   * @param s - The given vector\n   * @param out - The scaled matrix\n   */;\n  Matrix3x3.scale = function scale(m, s, out) {\n    var x = s._x,\n      y = s._y;\n    var ae = m.elements;\n    var oe = out.elements;\n    oe[0] = x * ae[0];\n    oe[1] = x * ae[1];\n    oe[2] = x * ae[2];\n    oe[3] = y * ae[3];\n    oe[4] = y * ae[4];\n    oe[5] = y * ae[5];\n    oe[6] = ae[6];\n    oe[7] = ae[7];\n    oe[8] = ae[8];\n  }\n\n  /**\n   * Translate a matrix by a given vector.\n   * @param m - The matrix\n   * @param translation - The given vector\n   * @param out - The translated matrix\n   */;\n  Matrix3x3.translate = function translate(m, translation, out) {\n    var x = translation._x,\n      y = translation._y;\n    var ae = m.elements;\n    var oe = out.elements;\n    var a11 = ae[0],\n      a12 = ae[1],\n      a13 = ae[2];\n    var a21 = ae[3],\n      a22 = ae[4],\n      a23 = ae[5];\n    var a31 = ae[6],\n      a32 = ae[7],\n      a33 = ae[8];\n    oe[0] = a11;\n    oe[1] = a12;\n    oe[2] = a13;\n    oe[3] = a21;\n    oe[4] = a22;\n    oe[5] = a23;\n    oe[6] = x * a11 + y * a21 + a31;\n    oe[7] = x * a12 + y * a22 + a32;\n    oe[8] = x * a13 + y * a23 + a33;\n  }\n\n  /**\n   * Calculate the transpose of the specified matrix.\n   * @param a - The specified matrix\n   * @param out - The transpose of the specified matrix\n   */;\n  Matrix3x3.transpose = function transpose(a, out) {\n    var ae = a.elements;\n    var oe = out.elements;\n    if (out === a) {\n      var a12 = ae[1];\n      var a13 = ae[2];\n      var a23 = ae[5];\n      oe[1] = ae[3];\n      oe[2] = ae[6];\n      oe[3] = a12;\n      oe[5] = ae[7];\n      oe[6] = a13;\n      oe[7] = a23;\n    } else {\n      oe[0] = ae[0];\n      oe[1] = ae[3];\n      oe[2] = ae[6];\n      oe[3] = ae[1];\n      oe[4] = ae[4];\n      oe[5] = ae[7];\n      oe[6] = ae[2];\n      oe[7] = ae[5];\n      oe[8] = ae[8];\n    }\n  }\n\n  /**\n   * An array containing the elements of the matrix (column matrix).\n   * @remarks\n   * elements[0] first column and first row value m11\n   * elements[1] first column and second row value m12\n   * elements[2] first column and third row value m13\n   * elements[3] second column and first row value m21\n   * and so on\n   */;\n\n  /**\n   * Constructor of 3*3 matrix.\n   * @param m11 - Default 1 column 1, row 1\n   * @param m12 - Default 0 column 1, row 2\n   * @param m13 - Default 0 column 1, row 3\n   * @param m21 - Default 0 column 2, row 1\n   * @param m22 - Default 1 column 2, row 2\n   * @param m23 - Default 0 column 2, row 3\n   * @param m31 - Default 0 column 3, row 1\n   * @param m32 - Default 0 column 3, row 2\n   * @param m33 - Default 1 column 3, row 3\n   */\n  function Matrix3x3(m11, m12, m13, m21, m22, m23, m31, m32, m33) {\n    if (m11 === void 0) {\n      m11 = 1;\n    }\n    if (m12 === void 0) {\n      m12 = 0;\n    }\n    if (m13 === void 0) {\n      m13 = 0;\n    }\n    if (m21 === void 0) {\n      m21 = 0;\n    }\n    if (m22 === void 0) {\n      m22 = 1;\n    }\n    if (m23 === void 0) {\n      m23 = 0;\n    }\n    if (m31 === void 0) {\n      m31 = 0;\n    }\n    if (m32 === void 0) {\n      m32 = 0;\n    }\n    if (m33 === void 0) {\n      m33 = 1;\n    }\n    this.elements = new Float32Array(9);\n    var e = this.elements;\n    e[0] = m11;\n    e[1] = m12;\n    e[2] = m13;\n    e[3] = m21;\n    e[4] = m22;\n    e[5] = m23;\n    e[6] = m31;\n    e[7] = m32;\n    e[8] = m33;\n  }\n\n  /**\n   * Set the value of this matrix, and return this matrix.\n   * @param m11\n   * @param m12\n   * @param m13\n   * @param m21\n   * @param m22\n   * @param m23\n   * @param m31\n   * @param m32\n   * @param m33\n   * @returns This matrix\n   */\n  var _proto = Matrix3x3.prototype;\n  _proto.set = function set(m11, m12, m13, m21, m22, m23, m31, m32, m33) {\n    var e = this.elements;\n    e[0] = m11;\n    e[1] = m12;\n    e[2] = m13;\n    e[3] = m21;\n    e[4] = m22;\n    e[5] = m23;\n    e[6] = m31;\n    e[7] = m32;\n    e[8] = m33;\n    return this;\n  }\n\n  /**\n   * Determines the sum of this matrix and the specified matrix.\n   * @param right - The specified matrix\n   * @returns This matrix that store the sum of the two matrices\n   */;\n  _proto.add = function add(right) {\n    Matrix3x3.add(this, right, this);\n    return this;\n  }\n\n  /**\n   * Determines the difference between this matrix and the specified matrix.\n   * @param right - The specified matrix\n   * @returns This matrix that store the difference between the two matrices\n   */;\n  _proto.subtract = function subtract(right) {\n    Matrix3x3.subtract(this, right, this);\n    return this;\n  }\n\n  /**\n   * Determines the product of this matrix and the specified matrix.\n   * @param right - The specified matrix\n   * @returns This matrix that store the product of the two matrices\n   */;\n  _proto.multiply = function multiply(right) {\n    Matrix3x3.multiply(this, right, this);\n    return this;\n  }\n\n  /**\n   * Calculate a determinant of this matrix.\n   * @returns The determinant of this matrix\n   */;\n  _proto.determinant = function determinant() {\n    var e = this.elements;\n    var a11 = e[0],\n      a12 = e[1],\n      a13 = e[2];\n    var a21 = e[3],\n      a22 = e[4],\n      a23 = e[5];\n    var a31 = e[6],\n      a32 = e[7],\n      a33 = e[8];\n    var b12 = a33 * a22 - a23 * a32;\n    var b22 = -a33 * a21 + a23 * a31;\n    var b32 = a32 * a21 - a22 * a31;\n    return a11 * b12 + a12 * b22 + a13 * b32;\n  }\n\n  /**\n   * Identity this matrix.\n   * @returns This matrix after identity\n   */;\n  _proto.identity = function identity() {\n    var e = this.elements;\n    e[0] = 1;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 0;\n    e[4] = 1;\n    e[5] = 0;\n    e[6] = 0;\n    e[7] = 0;\n    e[8] = 1;\n    return this;\n  }\n\n  /**\n   * Invert the matrix.\n   * @returns The matrix after invert\n   */;\n  _proto.invert = function invert() {\n    Matrix3x3.invert(this, this);\n    return this;\n  }\n\n  /**\n   * This matrix rotates around an angle.\n   * @param r - The rotation angle in radians\n   * @returns This matrix after rotate\n   */;\n  _proto.rotate = function rotate(r) {\n    Matrix3x3.rotate(this, r, this);\n    return this;\n  }\n\n  /**\n   * Scale this matrix by a given vector.\n   * @param s - The given vector\n   * @returns This matrix after scale\n   */;\n  _proto.scale = function scale(s) {\n    Matrix3x3.scale(this, s, this);\n    return this;\n  }\n\n  /**\n   * Translate this matrix by a given vector.\n   * @param translation - The given vector\n   * @returns This matrix after translate\n   */;\n  _proto.translate = function translate(translation) {\n    Matrix3x3.translate(this, translation, this);\n    return this;\n  }\n\n  /**\n   * Calculate the transpose of this matrix.\n   * @returns This matrix after transpose\n   */;\n  _proto.transpose = function transpose() {\n    Matrix3x3.transpose(this, this);\n    return this;\n  }\n\n  /**\n   * Creates a clone of this matrix.\n   * @returns A clone of this matrix\n   */;\n  _proto.clone = function clone() {\n    var e = this.elements;\n    var ret = new Matrix3x3(e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8]);\n    return ret;\n  }\n\n  /**\n   * Copy this matrix from the specified matrix.\n   * @param source - The specified matrix\n   * @returns This matrix\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    var e = this.elements;\n    var se = source.elements;\n    e[0] = se[0];\n    e[1] = se[1];\n    e[2] = se[2];\n    e[3] = se[3];\n    e[4] = se[4];\n    e[5] = se[5];\n    e[6] = se[6];\n    e[7] = se[7];\n    e[8] = se[8];\n    return this;\n  }\n\n  /**\n   * Copy the value of this matrix from an array.\n   * @param array - The array\n   * @param offset - The start offset of the array\n   * @returns This matrix\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    var srce = this.elements;\n    for (var i = 0; i < 12; i++) {\n      srce[i] = array[i + offset];\n    }\n    return this;\n  }\n\n  /**\n   * Copy the value of this matrix to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    var e = this.elements;\n    out[outOffset] = e[0];\n    out[outOffset + 1] = e[1];\n    out[outOffset + 2] = e[2];\n    out[outOffset + 3] = e[3];\n    out[outOffset + 4] = e[4];\n    out[outOffset + 5] = e[5];\n    out[outOffset + 6] = e[6];\n    out[outOffset + 7] = e[7];\n    out[outOffset + 8] = e[8];\n  }\n\n  /**\n   * Copy the value of this 3x3 matrix from the specified 4x4 matrix.\n   * upper-left principle\n   * @param source - The specified 4x4 matrix\n   * @returns This 3x3 matrix\n   */;\n  _proto.copyFromMatrix = function copyFromMatrix(source) {\n    var ae = source.elements;\n    var e = this.elements;\n    e[0] = ae[0];\n    e[1] = ae[1];\n    e[2] = ae[2];\n    e[3] = ae[4];\n    e[4] = ae[5];\n    e[5] = ae[6];\n    e[6] = ae[8];\n    e[7] = ae[9];\n    e[8] = ae[10];\n    return this;\n  };\n  return Matrix3x3;\n}();\n\n/**\n * Represents a four dimensional mathematical quaternion.\n */\nvar Quaternion = /*#__PURE__*/function () {\n  /** @internal */\n  /** @internal */\n  /**\n   * Determines the sum of two quaternions.\n   * @param left - The first quaternion to add\n   * @param right - The second quaternion to add\n   * @param out - The sum of two quaternions\n   */\n  Quaternion.add = function add(left, right, out) {\n    out._x = left._x + right._x;\n    out._y = left._y + right._y;\n    out._z = left._z + right._z;\n    out._w = left._w + right._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the product of two quaternions.\n   * @param left - The first quaternion to multiply\n   * @param right - The second quaternion to multiply\n   * @param out - The product of two quaternions\n   */;\n  Quaternion.multiply = function multiply(left, right, out) {\n    var ax = left._x,\n      ay = left._y,\n      az = left._z,\n      aw = left._w;\n    var bx = right._x,\n      by = right._y,\n      bz = right._z,\n      bw = right._w;\n    out._x = ax * bw + aw * bx + ay * bz - az * by;\n    out._y = ay * bw + aw * by + az * bx - ax * bz;\n    out._z = az * bw + aw * bz + ax * by - ay * bx;\n    out._w = aw * bw - ax * bx - ay * by - az * bz;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate quaternion that contains conjugated version of the specified quaternion.\n   * @param a - The specified quaternion\n   * @param out - The conjugate version of the specified quaternion\n   */;\n  Quaternion.conjugate = function conjugate(a, out) {\n    out._x = -a._x;\n    out._y = -a._y;\n    out._z = -a._z;\n    out._w = a._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the dot product of two quaternions.\n   * @param left - The first quaternion to dot\n   * @param right - The second quaternion to dot\n   * @returns The dot product of two quaternions\n   */;\n  Quaternion.dot = function dot(left, right) {\n    return left._x * right._x + left._y * right._y + left._z * right._z + left._w * right._w;\n  }\n\n  /**\n   * Determines whether the specified quaternions are equals.\n   * @param left - The first quaternion to compare\n   * @param right - The second quaternion to compare\n   * @returns True if the specified quaternions are equals, false otherwise\n   */;\n  Quaternion.equals = function equals(left, right) {\n    return MathUtil.equals(left._x, right._x) && MathUtil.equals(left._y, right._y) && MathUtil.equals(left._z, right._z) && MathUtil.equals(left._w, right._w);\n  }\n\n  /**\n   * Calculate a quaternion rotates around an arbitrary axis.\n   * @param axis - The axis\n   * @param rad - The rotation angle in radians\n   * @param out - The quaternion after rotate\n   */;\n  Quaternion.rotationAxisAngle = function rotationAxisAngle(axis, rad, out) {\n    var normalAxis = Quaternion._tempVector3;\n    Vector3.normalize(axis, normalAxis);\n    rad *= 0.5;\n    var s = Math.sin(rad);\n    out._x = normalAxis._x * s;\n    out._y = normalAxis._y * s;\n    out._z = normalAxis._z * s;\n    out._w = Math.cos(rad);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion rotates around x, y, z axis (pitch/yaw/roll).\n   * @param x - The radian of rotation around X (pitch)\n   * @param y - The radian of rotation around Y (yaw)\n   * @param z - The radian of rotation around Z (roll)\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotationEuler = function rotationEuler(x, y, z, out) {\n    Quaternion.rotationYawPitchRoll(y, x, z, out);\n  }\n\n  /**\n   * Calculate a quaternion from the specified yaw, pitch and roll angles.\n   * @param yaw - Yaw around the y axis in radians\n   * @param pitch - Pitch around the x axis in radians\n   * @param roll - Roll around the z axis in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotationYawPitchRoll = function rotationYawPitchRoll(yaw, pitch, roll, out) {\n    var halfRoll = roll * 0.5;\n    var halfPitch = pitch * 0.5;\n    var halfYaw = yaw * 0.5;\n    var sinRoll = Math.sin(halfRoll);\n    var cosRoll = Math.cos(halfRoll);\n    var sinPitch = Math.sin(halfPitch);\n    var cosPitch = Math.cos(halfPitch);\n    var sinYaw = Math.sin(halfYaw);\n    var cosYaw = Math.cos(halfYaw);\n    var cosYawPitch = cosYaw * cosPitch;\n    var sinYawPitch = sinYaw * sinPitch;\n    out._x = cosYaw * sinPitch * cosRoll + sinYaw * cosPitch * sinRoll;\n    out._y = sinYaw * cosPitch * cosRoll - cosYaw * sinPitch * sinRoll;\n    out._z = cosYawPitch * sinRoll - sinYawPitch * cosRoll;\n    out._w = cosYawPitch * cosRoll + sinYawPitch * sinRoll;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion from the specified 3x3 matrix.\n   * @param m - The specified 3x3 matrix\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotationMatrix3x3 = function rotationMatrix3x3(m, out) {\n    var me = m.elements;\n    var m11 = me[0],\n      m12 = me[1],\n      m13 = me[2];\n    var m21 = me[3],\n      m22 = me[4],\n      m23 = me[5];\n    var m31 = me[6],\n      m32 = me[7],\n      m33 = me[8];\n    var scale = m11 + m22 + m33;\n    var sqrt, half;\n    if (scale > 0) {\n      sqrt = Math.sqrt(scale + 1.0);\n      out._w = sqrt * 0.5;\n      sqrt = 0.5 / sqrt;\n      out._x = (m23 - m32) * sqrt;\n      out._y = (m31 - m13) * sqrt;\n      out._z = (m12 - m21) * sqrt;\n    } else if (m11 >= m22 && m11 >= m33) {\n      sqrt = Math.sqrt(1.0 + m11 - m22 - m33);\n      half = 0.5 / sqrt;\n      out._x = 0.5 * sqrt;\n      out._y = (m12 + m21) * half;\n      out._z = (m13 + m31) * half;\n      out._w = (m23 - m32) * half;\n    } else if (m22 > m33) {\n      sqrt = Math.sqrt(1.0 + m22 - m11 - m33);\n      half = 0.5 / sqrt;\n      out._x = (m21 + m12) * half;\n      out._y = 0.5 * sqrt;\n      out._z = (m32 + m23) * half;\n      out._w = (m31 - m13) * half;\n    } else {\n      sqrt = Math.sqrt(1.0 + m33 - m11 - m22);\n      half = 0.5 / sqrt;\n      out._x = (m13 + m31) * half;\n      out._y = (m23 + m32) * half;\n      out._z = 0.5 * sqrt;\n      out._w = (m12 - m21) * half;\n    }\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate the inverse of the specified quaternion.\n   * @param a - The quaternion whose inverse is to be calculated\n   * @param out - The inverse of the specified quaternion\n   */;\n  Quaternion.invert = function invert(a, out) {\n    var x = a._x,\n      y = a._y,\n      z = a._z,\n      w = a._w;\n    var dot = x * x + y * y + z * z + w * w;\n    if (dot > MathUtil.zeroTolerance) {\n      var invDot = 1.0 / dot;\n      out._x = -x * invDot;\n      out._y = -y * invDot;\n      out._z = -z * invDot;\n      out._w = w * invDot;\n      out._onValueChanged && out._onValueChanged();\n    }\n  }\n\n  /**\n   * Performs a linear blend between two quaternions.\n   * @param start - The first quaternion\n   * @param end - The second quaternion\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of linear blending between two quaternions\n   */;\n  Quaternion.lerp = function lerp(start, end, t, out) {\n    var inv = 1.0 - t;\n    if (Quaternion.dot(start, end) >= 0) {\n      out._x = start._x * inv + end._x * t;\n      out._y = start._y * inv + end._y * t;\n      out._z = start._z * inv + end._z * t;\n      out._w = start._w * inv + end._w * t;\n    } else {\n      out._x = start._x * inv - end._x * t;\n      out._y = start._y * inv - end._y * t;\n      out._z = start._z * inv - end._z * t;\n      out._w = start._w * inv - end._w * t;\n    }\n    out.normalize();\n  }\n\n  /**\n   * Performs a spherical linear blend between two quaternions.\n   * @param start - The first quaternion\n   * @param end - The second quaternion\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of spherical linear blending between two quaternions\n   */;\n  Quaternion.slerp = function slerp(start, end, t, out) {\n    var ax = start._x;\n    var ay = start._y;\n    var az = start._z;\n    var aw = start._w;\n    var bx = end._x;\n    var by = end._y;\n    var bz = end._z;\n    var bw = end._w;\n    var scale0, scale1;\n    // calc cosine\n    var cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if (cosom < 0.0) {\n      cosom = -cosom;\n      bx = -bx;\n      by = -by;\n      bz = -bz;\n      bw = -bw;\n    }\n    // calculate coefficients\n    if (1.0 - cosom > MathUtil.zeroTolerance) {\n      // standard case (slerp)\n      var omega = Math.acos(cosom);\n      var sinom = Math.sin(omega);\n      scale0 = Math.sin((1.0 - t) * omega) / sinom;\n      scale1 = Math.sin(t * omega) / sinom;\n    } else {\n      // \"from\" and \"to\" quaternions are very close\n      //  ... so we can do a linear interpolation\n      scale0 = 1.0 - t;\n      scale1 = t;\n    }\n    // calculate final values\n    out._x = scale0 * ax + scale1 * bx;\n    out._y = scale0 * ay + scale1 * by;\n    out._z = scale0 * az + scale1 * bz;\n    out._w = scale0 * aw + scale1 * bw;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Scales the specified quaternion magnitude to unit length.\n   * @param a - The specified quaternion\n   * @param out - The normalized quaternion\n   */;\n  Quaternion.normalize = function normalize(a, out) {\n    var _x = a._x,\n      _y = a._y,\n      _z = a._z,\n      _w = a._w;\n    var len = Math.sqrt(_x * _x + _y * _y + _z * _z + _w * _w);\n    if (len > MathUtil.zeroTolerance) {\n      len = 1 / len;\n      out._x = _x * len;\n      out._y = _y * len;\n      out._z = _z * len;\n      out._w = _w * len;\n      out._onValueChanged && out._onValueChanged();\n    }\n  }\n\n  /**\n   * Calculate a quaternion rotate around X axis.\n   * @param rad - The rotation angle in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotationX = function rotationX(rad, out) {\n    rad *= 0.5;\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    out._x = s;\n    out._y = 0;\n    out._z = 0;\n    out._w = c;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion rotate around Y axis.\n   * @param rad - The rotation angle in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotationY = function rotationY(rad, out) {\n    rad *= 0.5;\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    out._x = 0;\n    out._y = s;\n    out._z = 0;\n    out._w = c;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion rotate around Z axis.\n   * @param rad - The rotation angle in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotationZ = function rotationZ(rad, out) {\n    rad *= 0.5;\n    var s = Math.sin(rad);\n    var c = Math.cos(rad);\n    out._x = 0;\n    out._y = 0;\n    out._z = s;\n    out._w = c;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion that the specified quaternion rotate around X axis.\n   * @param quaternion - The specified quaternion\n   * @param rad - The rotation angle in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotateX = function rotateX(quaternion, rad, out) {\n    var _x = quaternion._x,\n      _y = quaternion._y,\n      _z = quaternion._z,\n      _w = quaternion._w;\n    rad *= 0.5;\n    var bx = Math.sin(rad);\n    var bw = Math.cos(rad);\n    out._x = _x * bw + _w * bx;\n    out._y = _y * bw + _z * bx;\n    out._z = _z * bw - _y * bx;\n    out._w = _w * bw - _x * bx;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion that the specified quaternion rotate around Y axis.\n   * @param quaternion - The specified quaternion\n   * @param rad - The rotation angle in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotateY = function rotateY(quaternion, rad, out) {\n    var _x = quaternion._x,\n      _y = quaternion._y,\n      _z = quaternion._z,\n      _w = quaternion._w;\n    rad *= 0.5;\n    var by = Math.sin(rad);\n    var bw = Math.cos(rad);\n    out._x = _x * bw - _z * by;\n    out._y = _y * bw + _w * by;\n    out._z = _z * bw + _x * by;\n    out._w = _w * bw - _y * by;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a quaternion that the specified quaternion rotate around Z axis.\n   * @param quaternion - The specified quaternion\n   * @param rad - The rotation angle in radians\n   * @param out - The calculated quaternion\n   */;\n  Quaternion.rotateZ = function rotateZ(quaternion, rad, out) {\n    var _x = quaternion._x,\n      _y = quaternion._y,\n      _z = quaternion._z,\n      _w = quaternion._w;\n    rad *= 0.5;\n    var bz = Math.sin(rad);\n    var bw = Math.cos(rad);\n    out._x = _x * bw + _y * bz;\n    out._y = _y * bw - _x * bz;\n    out._z = _z * bw + _w * bz;\n    out._w = _w * bw - _z * bz;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Scale a quaternion by a given number.\n   * @param a - The quaternion\n   * @param s - The given number\n   * @param out - The scaled quaternion\n   */;\n  Quaternion.scale = function scale(a, s, out) {\n    out._x = a._x * s;\n    out._y = a._y * s;\n    out._z = a._z * s;\n    out._w = a._w * s;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /** @internal */;\n\n  /**\n   * Constructor of Quaternion.\n   * @param x - The x component of the quaternion, default 0\n   * @param y - The y component of the quaternion, default 0\n   * @param z - The z component of the quaternion, default 0\n   * @param w - The w component of the quaternion, default 1\n   */\n  function Quaternion(x, y, z, w) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    if (w === void 0) {\n      w = 1;\n    }\n    this._x = void 0;\n    this._y = void 0;\n    this._z = void 0;\n    this._w = void 0;\n    this._onValueChanged = null;\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._w = w;\n  }\n\n  /**\n   * Set the value of this quaternion, and return this quaternion.\n   * @param x - The x component of the quaternion\n   * @param y - The y component of the quaternion\n   * @param z - The z component of the quaternion\n   * @param w - The w component of the quaternion\n   * @returns This quaternion\n   */\n  var _proto = Quaternion.prototype;\n  _proto.set = function set(x, y, z, w) {\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._w = w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Transforms this quaternion into its conjugated version.\n   * @returns This quaternion\n   */;\n  _proto.conjugate = function conjugate() {\n    this._x *= -1;\n    this._y *= -1;\n    this._z *= -1;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Get the rotation axis and rotation angle of the quaternion (unit: radians).\n   * @param out - The axis as an output parameter\n   * @returns The rotation angle (unit: radians)\n   */;\n  _proto.getAxisAngle = function getAxisAngle(out) {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z;\n    var length = _x * _x + _y * _y + _z * _z;\n    if (length < MathUtil.zeroTolerance) {\n      out._x = 1;\n      out._y = 0;\n      out._z = 0;\n      return 0;\n    } else {\n      var inv = 1.0 / length;\n      out._x = this._x * inv;\n      out._y = this._y * inv;\n      out._z = this._z * inv;\n      return Math.acos(this._w) * 2.0;\n    }\n  }\n\n  /**\n   * Identity this quaternion.\n   * @returns This quaternion after identity\n   */;\n  _proto.identity = function identity() {\n    this._x = 0;\n    this._y = 0;\n    this._z = 0;\n    this._w = 1;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Calculate the length of this quaternion.\n   * @returns The length of this quaternion\n   */;\n  _proto.length = function length() {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z,\n      _w = this._w;\n    return Math.sqrt(_x * _x + _y * _y + _z * _z + _w * _w);\n  }\n\n  /**\n   * Calculates the squared length of this quaternion.\n   * @returns The squared length of this quaternion\n   */;\n  _proto.lengthSquared = function lengthSquared() {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z,\n      _w = this._w;\n    return _x * _x + _y * _y + _z * _z + _w * _w;\n  }\n\n  /**\n   * Converts this quaternion into a unit quaternion.\n   * @returns This quaternion\n   */;\n  _proto.normalize = function normalize() {\n    Quaternion.normalize(this, this);\n    return this;\n  }\n\n  /**\n   * Get the euler of this quaternion.\n   * @param out - The euler (in radians) as an output parameter\n   * @returns Euler x->pitch y->yaw z->roll\n   */;\n  _proto.toEuler = function toEuler(out) {\n    this._toYawPitchRoll(out);\n    var t = out._x;\n    out._x = out._y;\n    out._y = t;\n    out._onValueChanged && out._onValueChanged();\n    return out;\n  }\n\n  /**\n   * Get the euler of this quaternion.\n   * @param out - The euler (in radians) as an output parameter\n   * @returns Euler x->yaw y->pitch z->roll\n   */;\n  _proto.toYawPitchRoll = function toYawPitchRoll(out) {\n    this._toYawPitchRoll(out);\n    out._onValueChanged && out._onValueChanged();\n    return out;\n  }\n\n  /**\n   * Calculate this quaternion rotate around X axis.\n   * @param rad - The rotation angle in radians\n   * @returns This quaternion\n   */;\n  _proto.rotateX = function rotateX(rad) {\n    Quaternion.rotateX(this, rad, this);\n    return this;\n  }\n\n  /**\n   * Calculate this quaternion rotate around Y axis.\n   * @param rad - The rotation angle in radians\n   * @returns This quaternion\n   */;\n  _proto.rotateY = function rotateY(rad) {\n    Quaternion.rotateY(this, rad, this);\n    return this;\n  }\n\n  /**\n   * Calculate this quaternion rotate around Z axis.\n   * @param rad - The rotation angle in radians\n   * @returns This quaternion\n   */;\n  _proto.rotateZ = function rotateZ(rad) {\n    Quaternion.rotateZ(this, rad, this);\n    return this;\n  }\n\n  /**\n   * Calculate this quaternion rotates around an arbitrary axis.\n   * @param axis - The axis\n   * @param rad - The rotation angle in radians\n   * @returns This quaternion\n   */;\n  _proto.rotationAxisAngle = function rotationAxisAngle(axis, rad) {\n    Quaternion.rotationAxisAngle(axis, rad, this);\n    return this;\n  }\n\n  /**\n   * Determines the product of this quaternion and the specified quaternion.\n   * @param quat - The specified quaternion\n   * @returns The product of the two quaternions\n   */;\n  _proto.multiply = function multiply(quat) {\n    Quaternion.multiply(this, quat, this);\n    return this;\n  }\n\n  /**\n   * Invert this quaternion.\n   * @returns This quaternion after invert\n   */;\n  _proto.invert = function invert() {\n    Quaternion.invert(this, this);\n    return this;\n  }\n\n  /**\n   * Determines the dot product of this quaternion and the specified quaternion.\n   * @param quat - The specified quaternion\n   * @returns The dot product of two quaternions\n   */;\n  _proto.dot = function dot(quat) {\n    return Quaternion.dot(this, quat);\n  }\n\n  /**\n   * Performs a linear blend between this quaternion and the specified quaternion.\n   * @param quat - The specified quaternion\n   * @param t - The blend amount where 0 returns this and 1 quat\n   * @returns - The result of linear blending between two quaternions\n   */;\n  _proto.lerp = function lerp(quat, t) {\n    Quaternion.lerp(this, quat, t, this);\n    return this;\n  }\n\n  /**\n   * Calculate this quaternion rotation around an arbitrary axis.\n   * @param axis - The axis\n   * @param rad - The rotation angle in radians\n   * @returns This quaternion\n   */;\n  _proto.rotateAxisAngle = function rotateAxisAngle(axis, rad) {\n    Quaternion._tempQuat1.rotationAxisAngle(axis, rad);\n    this.multiply(Quaternion._tempQuat1);\n    return this;\n  }\n\n  /**\n   * Creates a clone of this quaternion.\n   * @returns A clone of this quaternion\n   */;\n  _proto.clone = function clone() {\n    return new Quaternion(this._x, this._y, this._z, this._w);\n  }\n\n  /**\n   * Copy this quaternion from the specified quaternion.\n   * @param source - The specified quaternion\n   * @returns This quaternion\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this._x = source.x;\n    this._y = source.y;\n    this._z = source.z;\n    this._w = source.w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this quaternion from an array.\n   * @param array - The array\n   * @param offset - The start offset of the array\n   * @returns This quaternion\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    this._x = array[offset];\n    this._y = array[offset + 1];\n    this._z = array[offset + 2];\n    this._w = array[offset + 3];\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this quaternion to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    out[outOffset] = this._x;\n    out[outOffset + 1] = this._y;\n    out[outOffset + 2] = this._z;\n    out[outOffset + 3] = this._w;\n  };\n  _proto._toYawPitchRoll = function _toYawPitchRoll(out) {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z,\n      _w = this._w;\n    var xx = _x * _x;\n    var yy = _y * _y;\n    var zz = _z * _z;\n    var xy = _x * _y;\n    var zw = _z * _w;\n    var zx = _z * _x;\n    var yw = _y * _w;\n    var yz = _y * _z;\n    var xw = _x * _w;\n    out._y = Math.asin(2.0 * (xw - yz));\n    if (Math.cos(out.y) > MathUtil.zeroTolerance) {\n      out._z = Math.atan2(2.0 * (xy + zw), 1.0 - 2.0 * (zz + xx));\n      out._x = Math.atan2(2.0 * (zx + yw), 1.0 - 2.0 * (yy + xx));\n    } else {\n      out._z = Math.atan2(-2.0 * (xy - zw), 1.0 - 2.0 * (yy + zz));\n      out._x = 0.0;\n    }\n    return out;\n  };\n  _createClass(Quaternion, [{\n    key: \"x\",\n    get:\n    /**\n     * The x component of the quaternion.\n     */\n    function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The y component of the quaternion.\n     */\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The z component of the quaternion.\n     */\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this._z;\n    },\n    set: function set(value) {\n      this._z = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * Indicting whether this instance is normalized.\n     */\n  }, {\n    key: \"normalized\",\n    get: function get() {\n      return Math.abs(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w - 1) < MathUtil.zeroTolerance;\n    }\n\n    /**\n     * The w component of the quaternion.\n     */\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this._w;\n    },\n    set: function set(value) {\n      this._w = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n  }]);\n  return Quaternion;\n}();\nQuaternion._tempVector3 = new Vector3();\nQuaternion._tempQuat1 = new Quaternion();\n\n/**\n * Represents a 4x4 mathematical matrix.\n */\nvar Matrix = /*#__PURE__*/function () {\n  /** @internal Identity matrix. */\n  /**\n   * Determines the product of two matrices.\n   * @param left - The first matrix to multiply\n   * @param right - The second matrix to multiply\n   * @param out - The product of the two matrices\n   */\n  Matrix.multiply = function multiply(left, right, out) {\n    var le = left.elements;\n    var re = right.elements;\n    var oe = out.elements;\n    var l11 = le[0],\n      l12 = le[1],\n      l13 = le[2],\n      l14 = le[3];\n    var l21 = le[4],\n      l22 = le[5],\n      l23 = le[6],\n      l24 = le[7];\n    var l31 = le[8],\n      l32 = le[9],\n      l33 = le[10],\n      l34 = le[11];\n    var l41 = le[12],\n      l42 = le[13],\n      l43 = le[14],\n      l44 = le[15];\n    var r11 = re[0],\n      r12 = re[1],\n      r13 = re[2],\n      r14 = re[3];\n    var r21 = re[4],\n      r22 = re[5],\n      r23 = re[6],\n      r24 = re[7];\n    var r31 = re[8],\n      r32 = re[9],\n      r33 = re[10],\n      r34 = re[11];\n    var r41 = re[12],\n      r42 = re[13],\n      r43 = re[14],\n      r44 = re[15];\n    oe[0] = l11 * r11 + l21 * r12 + l31 * r13 + l41 * r14;\n    oe[1] = l12 * r11 + l22 * r12 + l32 * r13 + l42 * r14;\n    oe[2] = l13 * r11 + l23 * r12 + l33 * r13 + l43 * r14;\n    oe[3] = l14 * r11 + l24 * r12 + l34 * r13 + l44 * r14;\n    oe[4] = l11 * r21 + l21 * r22 + l31 * r23 + l41 * r24;\n    oe[5] = l12 * r21 + l22 * r22 + l32 * r23 + l42 * r24;\n    oe[6] = l13 * r21 + l23 * r22 + l33 * r23 + l43 * r24;\n    oe[7] = l14 * r21 + l24 * r22 + l34 * r23 + l44 * r24;\n    oe[8] = l11 * r31 + l21 * r32 + l31 * r33 + l41 * r34;\n    oe[9] = l12 * r31 + l22 * r32 + l32 * r33 + l42 * r34;\n    oe[10] = l13 * r31 + l23 * r32 + l33 * r33 + l43 * r34;\n    oe[11] = l14 * r31 + l24 * r32 + l34 * r33 + l44 * r34;\n    oe[12] = l11 * r41 + l21 * r42 + l31 * r43 + l41 * r44;\n    oe[13] = l12 * r41 + l22 * r42 + l32 * r43 + l42 * r44;\n    oe[14] = l13 * r41 + l23 * r42 + l33 * r43 + l43 * r44;\n    oe[15] = l14 * r41 + l24 * r42 + l34 * r43 + l44 * r44;\n  }\n\n  /**\n   * Determines whether the specified matrices are equals.\n   * @param left - The first matrix to compare\n   * @param right - The second matrix to compare\n   * @returns True if the specified matrices are equals, false otherwise\n   */;\n  Matrix.equals = function equals(left, right) {\n    var le = left.elements;\n    var re = right.elements;\n    return MathUtil.equals(le[0], re[0]) && MathUtil.equals(le[1], re[1]) && MathUtil.equals(le[2], re[2]) && MathUtil.equals(le[3], re[3]) && MathUtil.equals(le[4], re[4]) && MathUtil.equals(le[5], re[5]) && MathUtil.equals(le[6], re[6]) && MathUtil.equals(le[7], re[7]) && MathUtil.equals(le[8], re[8]) && MathUtil.equals(le[9], re[9]) && MathUtil.equals(le[10], re[10]) && MathUtil.equals(le[11], re[11]) && MathUtil.equals(le[12], re[12]) && MathUtil.equals(le[13], re[13]) && MathUtil.equals(le[14], re[14]) && MathUtil.equals(le[15], re[15]);\n  }\n\n  /**\n   * Performs a linear interpolation between two matrices.\n   * @param start - The first matrix\n   * @param end - The second matrix\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of linear blending between two matrices\n   */;\n  Matrix.lerp = function lerp(start, end, t, out) {\n    var se = start.elements;\n    var ee = end.elements;\n    var oe = out.elements;\n    var inv = 1.0 - t;\n    oe[0] = se[0] * inv + ee[0] * t;\n    oe[1] = se[1] * inv + ee[1] * t;\n    oe[2] = se[2] * inv + ee[2] * t;\n    oe[3] = se[3] * inv + ee[3] * t;\n    oe[4] = se[4] * inv + ee[4] * t;\n    oe[5] = se[5] * inv + ee[5] * t;\n    oe[6] = se[6] * inv + ee[6] * t;\n    oe[7] = se[7] * inv + ee[7] * t;\n    oe[8] = se[8] * inv + ee[8] * t;\n    oe[9] = se[9] * inv + ee[9] * t;\n    oe[10] = se[10] * inv + ee[10] * t;\n    oe[11] = se[11] * inv + ee[11] * t;\n    oe[12] = se[12] * inv + ee[12] * t;\n    oe[13] = se[13] * inv + ee[13] * t;\n    oe[14] = se[14] * inv + ee[14] * t;\n    oe[15] = se[15] * inv + ee[15] * t;\n  }\n\n  /**\n   * Calculate a rotation matrix from a quaternion.\n   * @param quaternion - The quaternion used to calculate the matrix\n   * @param out - The calculated rotation matrix\n   */;\n  Matrix.rotationQuaternion = function rotationQuaternion(quaternion, out) {\n    var oe = out.elements;\n    var x = quaternion._x,\n      y = quaternion._y,\n      z = quaternion._z,\n      w = quaternion._w;\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var yx = y * x2;\n    var yy = y * y2;\n    var zx = z * x2;\n    var zy = z * y2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    oe[0] = 1 - yy - zz;\n    oe[1] = yx + wz;\n    oe[2] = zx - wy;\n    oe[3] = 0;\n    oe[4] = yx - wz;\n    oe[5] = 1 - xx - zz;\n    oe[6] = zy + wx;\n    oe[7] = 0;\n    oe[8] = zx + wy;\n    oe[9] = zy - wx;\n    oe[10] = 1 - xx - yy;\n    oe[11] = 0;\n    oe[12] = 0;\n    oe[13] = 0;\n    oe[14] = 0;\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate a matrix rotates around an arbitrary axis.\n   * @param axis - The axis\n   * @param r - The rotation angle in radians\n   * @param out - The matrix after rotate\n   */;\n  Matrix.rotationAxisAngle = function rotationAxisAngle(axis, r, out) {\n    var oe = out.elements;\n    var x = axis._x,\n      y = axis._y,\n      z = axis._z;\n    var len = Math.sqrt(x * x + y * y + z * z);\n    var s, c, t;\n    if (Math.abs(len) < MathUtil.zeroTolerance) {\n      return;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(r);\n    c = Math.cos(r);\n    t = 1 - c;\n\n    // Perform rotation-specific matrix multiplication\n    oe[0] = x * x * t + c;\n    oe[1] = y * x * t + z * s;\n    oe[2] = z * x * t - y * s;\n    oe[3] = 0;\n    oe[4] = x * y * t - z * s;\n    oe[5] = y * y * t + c;\n    oe[6] = z * y * t + x * s;\n    oe[7] = 0;\n    oe[8] = x * z * t + y * s;\n    oe[9] = y * z * t - x * s;\n    oe[10] = z * z * t + c;\n    oe[11] = 0;\n    oe[12] = 0;\n    oe[13] = 0;\n    oe[14] = 0;\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate a matrix from a quaternion and a translation.\n   * @param quaternion - The quaternion used to calculate the matrix\n   * @param translation - The translation used to calculate the matrix\n   * @param out - The calculated matrix\n   */;\n  Matrix.rotationTranslation = function rotationTranslation(quaternion, translation, out) {\n    Matrix.rotationQuaternion(quaternion, out);\n    var oe = out.elements;\n    oe[12] = translation._x;\n    oe[13] = translation._y;\n    oe[14] = translation._z;\n  }\n\n  /**\n   * Calculate an affine matrix.\n   * @param scale - The scale used to calculate matrix\n   * @param rotation - The rotation used to calculate matrix\n   * @param translation - The translation used to calculate matrix\n   * @param out - The calculated matrix\n   */;\n  Matrix.affineTransformation = function affineTransformation(scale, rotation, translation, out) {\n    var oe = out.elements;\n    var x = rotation._x,\n      y = rotation._y,\n      z = rotation._z,\n      w = rotation._w;\n    var x2 = x + x;\n    var y2 = y + y;\n    var z2 = z + z;\n    var xx = x * x2;\n    var xy = x * y2;\n    var xz = x * z2;\n    var yy = y * y2;\n    var yz = y * z2;\n    var zz = z * z2;\n    var wx = w * x2;\n    var wy = w * y2;\n    var wz = w * z2;\n    var sx = scale._x;\n    var sy = scale._y;\n    var sz = scale._z;\n    oe[0] = (1 - (yy + zz)) * sx;\n    oe[1] = (xy + wz) * sx;\n    oe[2] = (xz - wy) * sx;\n    oe[3] = 0;\n    oe[4] = (xy - wz) * sy;\n    oe[5] = (1 - (xx + zz)) * sy;\n    oe[6] = (yz + wx) * sy;\n    oe[7] = 0;\n    oe[8] = (xz + wy) * sz;\n    oe[9] = (yz - wx) * sz;\n    oe[10] = (1 - (xx + yy)) * sz;\n    oe[11] = 0;\n    oe[12] = translation._x;\n    oe[13] = translation._y;\n    oe[14] = translation._z;\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate a matrix from scale vector.\n   * @param s - The scale vector\n   * @param out - The calculated matrix\n   */;\n  Matrix.scaling = function scaling(s, out) {\n    var oe = out.elements;\n    oe[0] = s._x;\n    oe[1] = 0;\n    oe[2] = 0;\n    oe[3] = 0;\n    oe[4] = 0;\n    oe[5] = s._y;\n    oe[6] = 0;\n    oe[7] = 0;\n    oe[8] = 0;\n    oe[9] = 0;\n    oe[10] = s._z;\n    oe[11] = 0;\n    oe[12] = 0;\n    oe[13] = 0;\n    oe[14] = 0;\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate a matrix from translation vector.\n   * @param translation - The translation vector\n   * @param out - The calculated matrix\n   */;\n  Matrix.translation = function translation(_translation, out) {\n    var oe = out.elements;\n    oe[0] = 1;\n    oe[1] = 0;\n    oe[2] = 0;\n    oe[3] = 0;\n    oe[4] = 0;\n    oe[5] = 1;\n    oe[6] = 0;\n    oe[7] = 0;\n    oe[8] = 0;\n    oe[9] = 0;\n    oe[10] = 1;\n    oe[11] = 0;\n    oe[12] = _translation._x;\n    oe[13] = _translation._y;\n    oe[14] = _translation._z;\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate the inverse of the specified matrix.\n   * @param a - The matrix whose inverse is to be calculated\n   * @param out - The inverse of the specified matrix\n   */;\n  Matrix.invert = function invert(a, out) {\n    var ae = a.elements;\n    var oe = out.elements;\n    var a11 = ae[0],\n      a12 = ae[1],\n      a13 = ae[2],\n      a14 = ae[3];\n    var a21 = ae[4],\n      a22 = ae[5],\n      a23 = ae[6],\n      a24 = ae[7];\n    var a31 = ae[8],\n      a32 = ae[9],\n      a33 = ae[10],\n      a34 = ae[11];\n    var a41 = ae[12],\n      a42 = ae[13],\n      a43 = ae[14],\n      a44 = ae[15];\n    var b00 = a11 * a22 - a12 * a21;\n    var b01 = a11 * a23 - a13 * a21;\n    var b02 = a11 * a24 - a14 * a21;\n    var b03 = a12 * a23 - a13 * a22;\n    var b04 = a12 * a24 - a14 * a22;\n    var b05 = a13 * a24 - a14 * a23;\n    var b06 = a31 * a42 - a32 * a41;\n    var b07 = a31 * a43 - a33 * a41;\n    var b08 = a31 * a44 - a34 * a41;\n    var b09 = a32 * a43 - a33 * a42;\n    var b10 = a32 * a44 - a34 * a42;\n    var b11 = a33 * a44 - a34 * a43;\n    var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    oe[0] = (a22 * b11 - a23 * b10 + a24 * b09) * det;\n    oe[1] = (a13 * b10 - a12 * b11 - a14 * b09) * det;\n    oe[2] = (a42 * b05 - a43 * b04 + a44 * b03) * det;\n    oe[3] = (a33 * b04 - a32 * b05 - a34 * b03) * det;\n    oe[4] = (a23 * b08 - a21 * b11 - a24 * b07) * det;\n    oe[5] = (a11 * b11 - a13 * b08 + a14 * b07) * det;\n    oe[6] = (a43 * b02 - a41 * b05 - a44 * b01) * det;\n    oe[7] = (a31 * b05 - a33 * b02 + a34 * b01) * det;\n    oe[8] = (a21 * b10 - a22 * b08 + a24 * b06) * det;\n    oe[9] = (a12 * b08 - a11 * b10 - a14 * b06) * det;\n    oe[10] = (a41 * b04 - a42 * b02 + a44 * b00) * det;\n    oe[11] = (a32 * b02 - a31 * b04 - a34 * b00) * det;\n    oe[12] = (a22 * b07 - a21 * b09 - a23 * b06) * det;\n    oe[13] = (a11 * b09 - a12 * b07 + a13 * b06) * det;\n    oe[14] = (a42 * b01 - a41 * b03 - a43 * b00) * det;\n    oe[15] = (a31 * b03 - a32 * b01 + a33 * b00) * det;\n  }\n\n  /**\n   * Calculate a right-handed look-at matrix.\n   * @param eye - The position of the viewer's eye\n   * @param target - The camera look-at target\n   * @param up - The camera's up vector\n   * @param out - The calculated look-at matrix\n   */;\n  Matrix.lookAt = function lookAt(eye, target, up, out) {\n    var oe = out.elements;\n    var xAxis = Matrix._tempVec30;\n    var yAxis = Matrix._tempVec31;\n    var zAxis = Matrix._tempVec32;\n    Vector3.subtract(eye, target, zAxis);\n    zAxis.normalize();\n    Vector3.cross(up, zAxis, xAxis);\n    xAxis.normalize();\n    Vector3.cross(zAxis, xAxis, yAxis);\n    oe[0] = xAxis._x;\n    oe[1] = yAxis._x;\n    oe[2] = zAxis._x;\n    oe[3] = 0;\n    oe[4] = xAxis._y;\n    oe[5] = yAxis._y;\n    oe[6] = zAxis._y;\n    oe[7] = 0;\n    oe[8] = xAxis._z;\n    oe[9] = yAxis._z;\n    oe[10] = zAxis._z;\n    oe[11] = 0;\n    oe[12] = -Vector3.dot(xAxis, eye);\n    oe[13] = -Vector3.dot(yAxis, eye);\n    oe[14] = -Vector3.dot(zAxis, eye);\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate an orthographic projection matrix.\n   * @param left - The left edge of the viewing\n   * @param right - The right edge of the viewing\n   * @param bottom - The bottom edge of the viewing\n   * @param top - The top edge of the viewing\n   * @param near - The depth of the near plane\n   * @param far - The depth of the far plane\n   * @param out - The calculated orthographic projection matrix\n   */;\n  Matrix.ortho = function ortho(left, right, bottom, top, near, far, out) {\n    var oe = out.elements;\n    var lr = 1 / (left - right);\n    var bt = 1 / (bottom - top);\n    var nf = 1 / (near - far);\n    oe[0] = -2 * lr;\n    oe[1] = 0;\n    oe[2] = 0;\n    oe[3] = 0;\n    oe[4] = 0;\n    oe[5] = -2 * bt;\n    oe[6] = 0;\n    oe[7] = 0;\n    oe[8] = 0;\n    oe[9] = 0;\n    oe[10] = 2 * nf;\n    oe[11] = 0;\n    oe[12] = (left + right) * lr;\n    oe[13] = (top + bottom) * bt;\n    oe[14] = (far + near) * nf;\n    oe[15] = 1;\n  }\n\n  /**\n   * Calculate a perspective projection matrix.\n   * @param fovY - Field of view in the y direction, in radians\n   * @param aspect - Aspect ratio, defined as view space width divided by height\n   * @param near - The depth of the near plane\n   * @param far - The depth of the far plane\n   * @param out - The calculated perspective projection matrix\n   */;\n  Matrix.perspective = function perspective(fovY, aspect, near, far, out) {\n    var oe = out.elements;\n    var f = 1.0 / Math.tan(fovY / 2);\n    var nf = 1 / (near - far);\n    oe[0] = f / aspect;\n    oe[1] = 0;\n    oe[2] = 0;\n    oe[3] = 0;\n    oe[4] = 0;\n    oe[5] = f;\n    oe[6] = 0;\n    oe[7] = 0;\n    oe[8] = 0;\n    oe[9] = 0;\n    oe[10] = (far + near) * nf;\n    oe[11] = -1;\n    oe[12] = 0;\n    oe[13] = 0;\n    oe[14] = 2 * far * near * nf;\n    oe[15] = 0;\n  }\n\n  /**\n   * The specified matrix rotates around an arbitrary axis.\n   * @param m - The specified matrix\n   * @param axis - The axis\n   * @param r - The rotation angle in radians\n   * @param out - The rotated matrix\n   */;\n  Matrix.rotateAxisAngle = function rotateAxisAngle(m, axis, r, out) {\n    var x = axis._x,\n      y = axis._y,\n      z = axis._z;\n    var len = Math.sqrt(x * x + y * y + z * z);\n    if (Math.abs(len) < MathUtil.zeroTolerance) {\n      return;\n    }\n    var me = m.elements;\n    var oe = out.elements;\n    var s, c, t;\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(r);\n    c = Math.cos(r);\n    t = 1 - c;\n    var a11 = me[0],\n      a12 = me[1],\n      a13 = me[2],\n      a14 = me[3];\n    var a21 = me[4],\n      a22 = me[5],\n      a23 = me[6],\n      a24 = me[7];\n    var a31 = me[8],\n      a32 = me[9],\n      a33 = me[10],\n      a34 = me[11];\n\n    // Construct the elements of the rotation matrix\n    var b11 = x * x * t + c;\n    var b12 = y * x * t + z * s;\n    var b13 = z * x * t - y * s;\n    var b21 = x * y * t - z * s;\n    var b22 = y * y * t + c;\n    var b23 = z * y * t + x * s;\n    var b31 = x * z * t + y * s;\n    var b32 = y * z * t - x * s;\n    var b33 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    oe[0] = a11 * b11 + a21 * b12 + a31 * b13;\n    oe[1] = a12 * b11 + a22 * b12 + a32 * b13;\n    oe[2] = a13 * b11 + a23 * b12 + a33 * b13;\n    oe[3] = a14 * b11 + a24 * b12 + a34 * b13;\n    oe[4] = a11 * b21 + a21 * b22 + a31 * b23;\n    oe[5] = a12 * b21 + a22 * b22 + a32 * b23;\n    oe[6] = a13 * b21 + a23 * b22 + a33 * b23;\n    oe[7] = a14 * b21 + a24 * b22 + a34 * b23;\n    oe[8] = a11 * b31 + a21 * b32 + a31 * b33;\n    oe[9] = a12 * b31 + a22 * b32 + a32 * b33;\n    oe[10] = a13 * b31 + a23 * b32 + a33 * b33;\n    oe[11] = a14 * b31 + a24 * b32 + a34 * b33;\n    if (m !== out) {\n      // If the source and destination differ, copy the unchanged last row\n      oe[12] = me[12];\n      oe[13] = me[13];\n      oe[14] = me[14];\n      oe[15] = me[15];\n    }\n  }\n\n  /**\n   * Scale a matrix by a given vector.\n   * @param m - The matrix\n   * @param s - The given vector\n   * @param out - The scaled matrix\n   */;\n  Matrix.scale = function scale(m, s, out) {\n    var me = m.elements;\n    var oe = out.elements;\n    var x = s._x,\n      y = s._y,\n      z = s._z;\n    oe[0] = me[0] * x;\n    oe[1] = me[1] * x;\n    oe[2] = me[2] * x;\n    oe[3] = me[3] * x;\n    oe[4] = me[4] * y;\n    oe[5] = me[5] * y;\n    oe[6] = me[6] * y;\n    oe[7] = me[7] * y;\n    oe[8] = me[8] * z;\n    oe[9] = me[9] * z;\n    oe[10] = me[10] * z;\n    oe[11] = me[11] * z;\n    oe[12] = me[12];\n    oe[13] = me[13];\n    oe[14] = me[14];\n    oe[15] = me[15];\n  }\n\n  /**\n   * Translate a matrix by a given vector.\n   * @param m - The matrix\n   * @param v - The given vector\n   * @param out - The translated matrix\n   */;\n  Matrix.translate = function translate(m, v, out) {\n    var me = m.elements;\n    var oe = out.elements;\n    var x = v._x,\n      y = v._y,\n      z = v._z;\n    if (m === out) {\n      oe[12] = me[0] * x + me[4] * y + me[8] * z + me[12];\n      oe[13] = me[1] * x + me[5] * y + me[9] * z + me[13];\n      oe[14] = me[2] * x + me[6] * y + me[10] * z + me[14];\n      oe[15] = me[3] * x + me[7] * y + me[11] * z + me[15];\n    } else {\n      var a11 = me[0],\n        a12 = me[1],\n        a13 = me[2],\n        a14 = me[3];\n      var a21 = me[4],\n        a22 = me[5],\n        a23 = me[6],\n        a24 = me[7];\n      var a31 = me[8],\n        a32 = me[9],\n        a33 = me[10],\n        a34 = me[11];\n      oe[0] = a11, oe[1] = a12, oe[2] = a13, oe[3] = a14;\n      oe[4] = a21, oe[5] = a22, oe[6] = a23, oe[7] = a24;\n      oe[8] = a31, oe[9] = a32, oe[10] = a33, oe[11] = a34;\n      oe[12] = a11 * x + a21 * y + a31 * z + me[12];\n      oe[13] = a12 * x + a22 * y + a32 * z + me[13];\n      oe[14] = a13 * x + a23 * y + a33 * z + me[14];\n      oe[15] = a14 * x + a24 * y + a34 * z + me[15];\n    }\n  }\n\n  /**\n   * Calculate the transpose of the specified matrix.\n   * @param a - The specified matrix\n   * @param out - The transpose of the specified matrix\n   */;\n  Matrix.transpose = function transpose(a, out) {\n    var ae = a.elements;\n    var oe = out.elements;\n    if (out === a) {\n      var a12 = ae[1];\n      var a13 = ae[2];\n      var a14 = ae[3];\n      var a23 = ae[6];\n      var a24 = ae[7];\n      var a34 = ae[11];\n      oe[1] = ae[4];\n      oe[2] = ae[8];\n      oe[3] = ae[12];\n      oe[4] = a12;\n      oe[6] = ae[9];\n      oe[7] = ae[13];\n      oe[8] = a13;\n      oe[9] = a23;\n      oe[11] = ae[14];\n      oe[12] = a14;\n      oe[13] = a24;\n      oe[14] = a34;\n    } else {\n      oe[0] = ae[0];\n      oe[1] = ae[4];\n      oe[2] = ae[8];\n      oe[3] = ae[12];\n      oe[4] = ae[1];\n      oe[5] = ae[5];\n      oe[6] = ae[9];\n      oe[7] = ae[13];\n      oe[8] = ae[2];\n      oe[9] = ae[6];\n      oe[10] = ae[10];\n      oe[11] = ae[14];\n      oe[12] = ae[3];\n      oe[13] = ae[7];\n      oe[14] = ae[11];\n      oe[15] = ae[15];\n    }\n  }\n\n  /**\n   * An array containing the elements of the matrix (column matrix).\n   * @remarks\n   * elements[0] first column and first row value m11\n   * elements[1] first column and second row value m12\n   * elements[2] first column and third row value m13\n   * elements[3] first column and fourth row value m14\n   * elements[4] second column and first row value m21\n   * and so on\n   */;\n\n  /**\n   * Constructor of 4x4 Matrix.\n   * @param m11 - default 1, column 1, row 1\n   * @param m12 - default 0, column 1, row 2\n   * @param m13 - default 0, column 1, row 3\n   * @param m14 - default 0, column 1, row 4\n   * @param m21 - default 0, column 2, row 1\n   * @param m22 - default 1, column 2, row 2\n   * @param m23 - default 0, column 2, row 3\n   * @param m24 - default 0, column 2, row 4\n   * @param m31 - default 0, column 3, row 1\n   * @param m32 - default 0, column 3, row 2\n   * @param m33 - default 1, column 3, row 3\n   * @param m34 - default 0, column 3, row 4\n   * @param m41 - default 0, column 4, row 1\n   * @param m42 - default 0, column 4, row 2\n   * @param m43 - default 0, column 4, row 3\n   * @param m44 - default 1, column 4, row 4\n   */\n  function Matrix(m11, m12, m13, m14, m21, m22, m23, m24, m31, m32, m33, m34, m41, m42, m43, m44) {\n    if (m11 === void 0) {\n      m11 = 1;\n    }\n    if (m12 === void 0) {\n      m12 = 0;\n    }\n    if (m13 === void 0) {\n      m13 = 0;\n    }\n    if (m14 === void 0) {\n      m14 = 0;\n    }\n    if (m21 === void 0) {\n      m21 = 0;\n    }\n    if (m22 === void 0) {\n      m22 = 1;\n    }\n    if (m23 === void 0) {\n      m23 = 0;\n    }\n    if (m24 === void 0) {\n      m24 = 0;\n    }\n    if (m31 === void 0) {\n      m31 = 0;\n    }\n    if (m32 === void 0) {\n      m32 = 0;\n    }\n    if (m33 === void 0) {\n      m33 = 1;\n    }\n    if (m34 === void 0) {\n      m34 = 0;\n    }\n    if (m41 === void 0) {\n      m41 = 0;\n    }\n    if (m42 === void 0) {\n      m42 = 0;\n    }\n    if (m43 === void 0) {\n      m43 = 0;\n    }\n    if (m44 === void 0) {\n      m44 = 1;\n    }\n    this.elements = new Float32Array(16);\n    var e = this.elements;\n    e[0] = m11;\n    e[1] = m12;\n    e[2] = m13;\n    e[3] = m14;\n    e[4] = m21;\n    e[5] = m22;\n    e[6] = m23;\n    e[7] = m24;\n    e[8] = m31;\n    e[9] = m32;\n    e[10] = m33;\n    e[11] = m34;\n    e[12] = m41;\n    e[13] = m42;\n    e[14] = m43;\n    e[15] = m44;\n  }\n\n  /**\n   * Set the value of this matrix, and return this matrix.\n   * @param m11 - column 1, row 1\n   * @param m12 - column 1, row 2\n   * @param m13 - column 1, row 3\n   * @param m14 - column 1, row 4\n   * @param m21 - column 2, row 1\n   * @param m22 - column 2, row 2\n   * @param m23 - column 2, row 3\n   * @param m24 - column 2, row 4\n   * @param m31 - column 3, row 1\n   * @param m32 - column 3, row 2\n   * @param m33 - column 3, row 3\n   * @param m34 - column 3, row 4\n   * @param m41 - column 4, row 1\n   * @param m42 - column 4, row 2\n   * @param m43 - column 4, row 3\n   * @param m44 - column 4, row 4\n   * @returns This matrix\n   */\n  var _proto = Matrix.prototype;\n  _proto.set = function set(m11, m12, m13, m14, m21, m22, m23, m24, m31, m32, m33, m34, m41, m42, m43, m44) {\n    var e = this.elements;\n    e[0] = m11;\n    e[1] = m12;\n    e[2] = m13;\n    e[3] = m14;\n    e[4] = m21;\n    e[5] = m22;\n    e[6] = m23;\n    e[7] = m24;\n    e[8] = m31;\n    e[9] = m32;\n    e[10] = m33;\n    e[11] = m34;\n    e[12] = m41;\n    e[13] = m42;\n    e[14] = m43;\n    e[15] = m44;\n    return this;\n  }\n\n  /**\n   * Determines the product of this matrix and the specified matrix.\n   * @param right - The specified matrix\n   * @returns This matrix that store the product of the two matrices\n   */;\n  _proto.multiply = function multiply(right) {\n    Matrix.multiply(this, right, this);\n    return this;\n  }\n\n  /**\n   * Calculate a determinant of this matrix.\n   * @returns The determinant of this matrix\n   */;\n  _proto.determinant = function determinant() {\n    var e = this.elements;\n    var a11 = e[0],\n      a12 = e[1],\n      a13 = e[2],\n      a14 = e[3];\n    var a21 = e[4],\n      a22 = e[5],\n      a23 = e[6],\n      a24 = e[7];\n    var a31 = e[8],\n      a32 = e[9],\n      a33 = e[10],\n      a34 = e[11];\n    var a41 = e[12],\n      a42 = e[13],\n      a43 = e[14],\n      a44 = e[15];\n    var b00 = a11 * a22 - a12 * a21;\n    var b01 = a11 * a23 - a13 * a21;\n    var b02 = a11 * a24 - a14 * a21;\n    var b03 = a12 * a23 - a13 * a22;\n    var b04 = a12 * a24 - a14 * a22;\n    var b05 = a13 * a24 - a14 * a23;\n    var b06 = a31 * a42 - a32 * a41;\n    var b07 = a31 * a43 - a33 * a41;\n    var b08 = a31 * a44 - a34 * a41;\n    var b09 = a32 * a43 - a33 * a42;\n    var b10 = a32 * a44 - a34 * a42;\n    var b11 = a33 * a44 - a34 * a43;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  }\n\n  /**\n   * Decompose this matrix to translation, rotation and scale elements.\n   * @param translation - Translation vector as an output parameter\n   * @param rotation - Rotation quaternion as an output parameter\n   * @param scale - Scale vector as an output parameter\n   * @returns True if this matrix can be decomposed, false otherwise\n   */;\n  _proto.decompose = function decompose(translation, rotation, scale) {\n    var rm = Matrix._tempMat30;\n    var e = this.elements;\n    var rme = rm.elements;\n    var m11 = e[0];\n    var m12 = e[1];\n    var m13 = e[2];\n    var m14 = e[3];\n    var m21 = e[4];\n    var m22 = e[5];\n    var m23 = e[6];\n    var m24 = e[7];\n    var m31 = e[8];\n    var m32 = e[9];\n    var m33 = e[10];\n    var m34 = e[11];\n    translation.set(e[12], e[13], e[14]);\n    var xs = Math.sign(m11 * m12 * m13 * m14) < 0 ? -1 : 1;\n    var ys = Math.sign(m21 * m22 * m23 * m24) < 0 ? -1 : 1;\n    var zs = Math.sign(m31 * m32 * m33 * m34) < 0 ? -1 : 1;\n    var sx = xs * Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n    var sy = ys * Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n    var sz = zs * Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n    scale.set(sx, sy, sz);\n    if (Math.abs(sx) < MathUtil.zeroTolerance || Math.abs(sy) < MathUtil.zeroTolerance || Math.abs(sz) < MathUtil.zeroTolerance) {\n      rotation.identity();\n      return false;\n    } else {\n      var invSX = 1 / sx;\n      var invSY = 1 / sy;\n      var invSZ = 1 / sz;\n      rme[0] = m11 * invSX;\n      rme[1] = m12 * invSX;\n      rme[2] = m13 * invSX;\n      rme[3] = m21 * invSY;\n      rme[4] = m22 * invSY;\n      rme[5] = m23 * invSY;\n      rme[6] = m31 * invSZ;\n      rme[7] = m32 * invSZ;\n      rme[8] = m33 * invSZ;\n      Quaternion.rotationMatrix3x3(rm, rotation);\n      return true;\n    }\n  }\n\n  /**\n   * Get rotation from this matrix.\n   * @param out - Rotation quaternion as an output parameter\n   * @returns The out\n   */;\n  _proto.getRotation = function getRotation(out) {\n    var e = this.elements;\n    var trace = e[0] + e[5] + e[10];\n    if (trace > MathUtil.zeroTolerance) {\n      var s = Math.sqrt(trace + 1.0) * 2;\n      out._w = 0.25 * s;\n      out._x = (e[6] - e[9]) / s;\n      out._y = (e[8] - e[2]) / s;\n      out._z = (e[1] - e[4]) / s;\n    } else if (e[0] > e[5] && e[0] > e[10]) {\n      var _s = Math.sqrt(1.0 + e[0] - e[5] - e[10]) * 2;\n      out._w = (e[6] - e[9]) / _s;\n      out._x = 0.25 * _s;\n      out._y = (e[1] + e[4]) / _s;\n      out._z = (e[8] + e[2]) / _s;\n    } else if (e[5] > e[10]) {\n      var _s2 = Math.sqrt(1.0 + e[5] - e[0] - e[10]) * 2;\n      out._w = (e[8] - e[2]) / _s2;\n      out._x = (e[1] + e[4]) / _s2;\n      out._y = 0.25 * _s2;\n      out._z = (e[6] + e[9]) / _s2;\n    } else {\n      var _s3 = Math.sqrt(1.0 + e[10] - e[0] - e[5]) * 2;\n      out._w = (e[1] - e[4]) / _s3;\n      out._x = (e[8] + e[2]) / _s3;\n      out._y = (e[6] + e[9]) / _s3;\n      out._z = 0.25 * _s3;\n    }\n    out._onValueChanged && out._onValueChanged();\n    return out;\n  }\n\n  /**\n   * Get scale from this matrix.\n   * @param out - Scale vector as an output parameter\n   * @returns The out\n   */;\n  _proto.getScaling = function getScaling(out) {\n    //getScale()\n    var e = this.elements;\n    var m11 = e[0],\n      m12 = e[1],\n      m13 = e[2];\n    var m21 = e[4],\n      m22 = e[5],\n      m23 = e[6];\n    var m31 = e[8],\n      m32 = e[9],\n      m33 = e[10];\n    out.set(Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13), Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23), Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33));\n    return out;\n  }\n\n  /**\n   * Get translation from this matrix.\n   * @param out - Translation vector as an output parameter\n   * @returns The out\n   */;\n  _proto.getTranslation = function getTranslation(out) {\n    var e = this.elements;\n    out.set(e[12], e[13], e[14]);\n    return out;\n  }\n\n  /**\n   * Identity this matrix.\n   * @returns This matrix after identity\n   */;\n  _proto.identity = function identity() {\n    var e = this.elements;\n    e[0] = 1;\n    e[1] = 0;\n    e[2] = 0;\n    e[3] = 0;\n    e[4] = 0;\n    e[5] = 1;\n    e[6] = 0;\n    e[7] = 0;\n    e[8] = 0;\n    e[9] = 0;\n    e[10] = 1;\n    e[11] = 0;\n    e[12] = 0;\n    e[13] = 0;\n    e[14] = 0;\n    e[15] = 1;\n    return this;\n  }\n\n  /**\n   * Invert the matrix.\n   * @returns The matrix after invert\n   */;\n  _proto.invert = function invert() {\n    Matrix.invert(this, this);\n    return this;\n  }\n\n  /**\n   * This matrix rotates around an arbitrary axis.\n   * @param axis - The axis\n   * @param r - The rotation angle in radians\n   * @returns This matrix after rotate\n   */;\n  _proto.rotateAxisAngle = function rotateAxisAngle(axis, r) {\n    Matrix.rotateAxisAngle(this, axis, r, this);\n    return this;\n  }\n\n  /**\n   * Scale this matrix by a given vector.\n   * @param s - The given vector\n   * @returns This matrix after scale\n   */;\n  _proto.scale = function scale(s) {\n    Matrix.scale(this, s, this);\n    return this;\n  }\n\n  /**\n   * Translate this matrix by a given vector.\n   * @param v - The given vector\n   * @returns This matrix after translate\n   */;\n  _proto.translate = function translate(v) {\n    Matrix.translate(this, v, this);\n    return this;\n  }\n\n  /**\n   * Calculate the transpose of this matrix.\n   * @returns This matrix after transpose\n   */;\n  _proto.transpose = function transpose() {\n    Matrix.transpose(this, this);\n    return this;\n  }\n\n  /**\n   * Creates a clone of this matrix.\n   * @returns A clone of this matrix\n   */;\n  _proto.clone = function clone() {\n    var e = this.elements;\n    var ret = new Matrix(e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9], e[10], e[11], e[12], e[13], e[14], e[15]);\n    return ret;\n  }\n\n  /**\n   * Copy this matrix from the specified matrix.\n   * @param source - The specified matrix\n   * @returns This matrix\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    var e = this.elements;\n    var se = source.elements;\n    e[0] = se[0];\n    e[1] = se[1];\n    e[2] = se[2];\n    e[3] = se[3];\n    e[4] = se[4];\n    e[5] = se[5];\n    e[6] = se[6];\n    e[7] = se[7];\n    e[8] = se[8];\n    e[9] = se[9];\n    e[10] = se[10];\n    e[11] = se[11];\n    e[12] = se[12];\n    e[13] = se[13];\n    e[14] = se[14];\n    e[15] = se[15];\n    return this;\n  }\n\n  /**\n   * Copy the value of this matrix from an array.\n   * @param array - The array\n   * @param offset - The start offset of the array\n   * @returns This matrix\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    var srce = this.elements;\n    for (var i = 0; i < 16; i++) {\n      srce[i] = array[i + offset];\n    }\n    return this;\n  }\n\n  /**\n   * Copy the value of this matrix to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    var e = this.elements;\n    out[outOffset] = e[0];\n    out[outOffset + 1] = e[1];\n    out[outOffset + 2] = e[2];\n    out[outOffset + 3] = e[3];\n    out[outOffset + 4] = e[4];\n    out[outOffset + 5] = e[5];\n    out[outOffset + 6] = e[6];\n    out[outOffset + 7] = e[7];\n    out[outOffset + 8] = e[8];\n    out[outOffset + 9] = e[9];\n    out[outOffset + 10] = e[10];\n    out[outOffset + 11] = e[11];\n    out[outOffset + 12] = e[12];\n    out[outOffset + 13] = e[13];\n    out[outOffset + 14] = e[14];\n    out[outOffset + 15] = e[15];\n  };\n  return Matrix;\n}();\nMatrix._tempVec30 = new Vector3();\nMatrix._tempVec31 = new Vector3();\nMatrix._tempVec32 = new Vector3();\nMatrix._tempMat30 = new Matrix3x3();\nMatrix._identity = new Matrix(1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0);\n\n/**\n * Represents a ray with an origin and a direction in 3D space.\n */\nvar Ray = /*#__PURE__*/function () {\n  /** The origin of the ray. */\n\n  /** The normalized direction of the ray. */\n\n  /**\n   * Constructor of Ray.\n   * @param origin - The origin vector\n   * @param direction - The direction vector\n   */\n  function Ray(origin, direction) {\n    if (origin === void 0) {\n      origin = null;\n    }\n    if (direction === void 0) {\n      direction = null;\n    }\n    this.origin = new Vector3();\n    this.direction = new Vector3();\n    origin && this.origin.copyFrom(origin);\n    direction && this.direction.copyFrom(direction);\n  }\n\n  /**\n   * Check if this ray intersects the specified plane.\n   * @param plane - The specified plane\n   * @returns The distance from this ray to the specified plane if intersecting, -1 otherwise\n   */\n  var _proto = Ray.prototype;\n  _proto.intersectPlane = function intersectPlane(plane) {\n    return CollisionUtil.intersectsRayAndPlane(this, plane);\n  }\n\n  /**\n   * Check if this ray intersects the specified sphere.\n   * @param sphere - The specified sphere\n   * @returns The distance from this ray to the specified sphere if intersecting, -1 otherwise\n   */;\n  _proto.intersectSphere = function intersectSphere(sphere) {\n    return CollisionUtil.intersectsRayAndSphere(this, sphere);\n  }\n\n  /**\n   * Check if this ray intersects the specified box (AABB).\n   * @param box - The specified box\n   * @returns The distance from this ray to the specified box if intersecting, -1 otherwise\n   */;\n  _proto.intersectBox = function intersectBox(box) {\n    return CollisionUtil.intersectsRayAndBox(this, box);\n  }\n\n  /**\n   * The coordinates of the specified distance from the origin in the ray direction.\n   * @param distance - The specified distance\n   * @param out - The coordinates as an output parameter\n   * @returns The out\n   */;\n  _proto.getPoint = function getPoint(distance, out) {\n    Vector3.scale(this.direction, distance, out);\n    return out.add(this.origin);\n  };\n  return Ray;\n}();\n\n/**\n * Describes a 2D-vector.\n */\nvar Vector2 = /*#__PURE__*/function () {\n  /** @internal */\n  /** @internal */\n  /**\n   * Determines the sum of two vectors.\n   * @param left - The first vector to add\n   * @param right - The second vector to add\n   * @param out - The sum of two vectors\n   */\n  Vector2.add = function add(left, right, out) {\n    out._x = left._x + right._x;\n    out._y = left._y + right._y;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the difference between two vectors.\n   * @param left - The first vector to subtract\n   * @param right - The second vector to subtract\n   * @param out - The difference between two vectors\n   */;\n  Vector2.subtract = function subtract(left, right, out) {\n    out._x = left._x - right._x;\n    out._y = left._y - right._y;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the product of two vectors.\n   * @param left - The first vector to multiply\n   * @param right - The second vector to multiply\n   * @param out - The product of two vectors\n   */;\n  Vector2.multiply = function multiply(left, right, out) {\n    out._x = left._x * right._x;\n    out._y = left._y * right._y;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the divisor of two vectors.\n   * @param left - The first vector to divide\n   * @param right - The second vector to divide\n   * @param out - The divisor of two vectors\n   */;\n  Vector2.divide = function divide(left, right, out) {\n    out._x = left._x / right._x;\n    out._y = left._y / right._y;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the dot product of two vectors.\n   * @param left - The first vector to dot\n   * @param right - The second vector to dot\n   * @returns The dot product of two vectors\n   */;\n  Vector2.dot = function dot(left, right) {\n    return left._x * right._x + left._y * right._y;\n  }\n\n  /**\n   * Determines the distance of two vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @returns The distance of two vectors\n   */;\n  Vector2.distance = function distance(left, right) {\n    var x = right._x - left._x;\n    var y = right._y - left._y;\n    return Math.sqrt(x * x + y * y);\n  }\n\n  /**\n   * Determines the squared distance of two vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @returns The squared distance of two vectors\n   */;\n  Vector2.distanceSquared = function distanceSquared(left, right) {\n    var x = right._x - left._x;\n    var y = right._y - left._y;\n    return x * x + y * y;\n  }\n\n  /**\n   * Determines whether the specified vectors are equals.\n   * @param left - The first vector to compare\n   * @param right - The second vector to compare\n   * @returns True if the specified vectors are equals, false otherwise\n   */;\n  Vector2.equals = function equals(left, right) {\n    return MathUtil.equals(left._x, right._x) && MathUtil.equals(left._y, right._y);\n  }\n\n  /**\n   * Performs a linear interpolation between two vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param t - The blend amount where 0 returns left and 1 right\n   * @param out - The result of linear blending between two vectors\n   */;\n  Vector2.lerp = function lerp(left, right, t, out) {\n    var _x = left._x,\n      _y = left._y;\n    out._x = _x + (right._x - _x) * t;\n    out._y = _y + (right._y - _y) * t;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a vector containing the largest components of the specified vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param out - The vector containing the largest components of the specified vectors\n   */;\n  Vector2.max = function max(left, right, out) {\n    out._x = Math.max(left._x, right._x);\n    out._y = Math.max(left._y, right._y);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a vector containing the smallest components of the specified vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param out - The vector containing the smallest components of the specified vectors\n   */;\n  Vector2.min = function min(left, right, out) {\n    out._x = Math.min(left._x, right._x);\n    out._y = Math.min(left._y, right._y);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Reverses the direction of a given vector.\n   * @param left - The vector to negate\n   * @param out - The vector facing in the opposite direction\n   */;\n  Vector2.negate = function negate(left, out) {\n    out._x = -left._x;\n    out._y = -left._y;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Converts the vector into a unit vector.\n   * @param left - The vector to normalize\n   * @param out - The normalized vector\n   */;\n  Vector2.normalize = function normalize(left, out) {\n    var _x = left._x,\n      _y = left._y;\n    var len = Math.sqrt(_x * _x + _y * _y);\n    if (len > MathUtil.zeroTolerance) {\n      len = 1 / len;\n      out._x = _x * len;\n      out._y = _y * len;\n      out._onValueChanged && out._onValueChanged();\n    }\n  }\n\n  /**\n   * Scale a vector by the given value.\n   * @param left - The vector to scale\n   * @param s - The amount by which to scale the vector\n   * @param out - The scaled vector\n   */;\n  Vector2.scale = function scale(left, s, out) {\n    out._x = left._x * s;\n    out._y = left._y * s;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /** @internal */;\n\n  /**\n   * Constructor of Vector2.\n   * @param x - The x component of the vector, default 0\n   * @param y - The y component of the vector, default 0\n   */\n  function Vector2(x, y) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._x = void 0;\n    this._y = void 0;\n    this._onValueChanged = null;\n    this._x = x;\n    this._y = y;\n  }\n\n  /**\n   * Set the value of this vector.\n   * @param x - The x component of the vector\n   * @param y - The y component of the vector\n   * @returns This vector\n   */\n  var _proto = Vector2.prototype;\n  _proto.set = function set(x, y) {\n    this._x = x;\n    this._y = y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the sum of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.add = function add(right) {\n    this._x += right._x;\n    this._y += right._y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the difference of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.subtract = function subtract(right) {\n    this._x -= right._x;\n    this._y -= right._y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the product of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.multiply = function multiply(right) {\n    this._x *= right._x;\n    this._y *= right._y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the divisor of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.divide = function divide(right) {\n    this._x /= right._x;\n    this._y /= right._y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Calculate the length of this vector.\n   * @returns The length of this vector\n   */;\n  _proto.length = function length() {\n    var _x = this._x,\n      _y = this._y;\n    return Math.sqrt(_x * _x + _y * _y);\n  }\n\n  /**\n   * Calculate the squared length of this vector.\n   * @returns The squared length of this vector\n   */;\n  _proto.lengthSquared = function lengthSquared() {\n    var _x = this._x,\n      _y = this._y;\n    return _x * _x + _y * _y;\n  }\n\n  /**\n   * Reverses the direction of this vector.\n   * @returns This vector\n   */;\n  _proto.negate = function negate() {\n    this._x = -this._x;\n    this._y = -this._y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Converts this vector into a unit vector.\n   * @returns This vector\n   */;\n  _proto.normalize = function normalize() {\n    Vector2.normalize(this, this);\n    return this;\n  }\n\n  /**\n   * Scale this vector by the given value.\n   * @param s - The amount by which to scale the vector\n   * @returns This vector\n   */;\n  _proto.scale = function scale(s) {\n    this._x *= s;\n    this._y *= s;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Creates a clone of this vector.\n   * @returns A clone of this vector\n   */;\n  _proto.clone = function clone() {\n    return new Vector2(this._x, this._y);\n  }\n\n  /**\n   * Copy from vector2 like object.\n   * @param source - Vector2 like object\n   * @returns This vector\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this._x = source.x;\n    this._y = source.y;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this vector from an array.\n   * @param array - The array\n   * @param offset - The start offset of the array\n   * @returns This vector\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    this._x = array[offset];\n    this._y = array[offset + 1];\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this vector to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    out[outOffset] = this._x;\n    out[outOffset + 1] = this._y;\n  };\n  _createClass(Vector2, [{\n    key: \"x\",\n    get:\n    /**\n     * The x component of the vector.\n     */\n    function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The y component of the vector.\n     */\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n  }]);\n  return Vector2;\n}();\nVector2._zero = new Vector2(0.0, 0.0);\nVector2._one = new Vector2(1.0, 1.0);\n\n/**\n * Describes a 4D-vector.\n */\nvar Vector4 = /*#__PURE__*/function () {\n  /** @internal */\n  /** @internal */\n  /**\n   * Determines the sum of two vectors.\n   * @param left - The first vector to add\n   * @param right - The second vector to add\n   * @param out - The sum of two vectors\n   */\n  Vector4.add = function add(left, right, out) {\n    out._x = left._x + right._x;\n    out._y = left._y + right._y;\n    out._z = left._z + right._z;\n    out._w = left._w + right._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the difference between two vectors.\n   * @param left - The first vector to subtract\n   * @param right - The second vector to subtract\n   * @param out - The difference between two vectors\n   */;\n  Vector4.subtract = function subtract(left, right, out) {\n    out._x = left._x - right._x;\n    out._y = left._y - right._y;\n    out._z = left._z - right._z;\n    out._w = left._w - right._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the product of two vectors.\n   * @param left - The first vector to multiply\n   * @param right - The second vector to multiply\n   * @param out - The product of two vectors\n   */;\n  Vector4.multiply = function multiply(left, right, out) {\n    out._x = left._x * right._x;\n    out._y = left._y * right._y;\n    out._z = left._z * right._z;\n    out._w = left._w * right._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the divisor of two vectors.\n   * @param left - The first vector to divide\n   * @param right - The second vector to divide\n   * @param out - The divisor of two vectors\n   */;\n  Vector4.divide = function divide(left, right, out) {\n    out._x = left._x / right._x;\n    out._y = left._y / right._y;\n    out._z = left._z / right._z;\n    out._w = left._w / right._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Determines the dot product of two vectors.\n   * @param left - The first vector to dot\n   * @param right - The second vector to dot\n   * @returns The dot product of two vectors\n   */;\n  Vector4.dot = function dot(left, right) {\n    return left._x * right._x + left._y * right._y + left._z * right._z + left._w * right._w;\n  }\n\n  /**\n   * Determines the distance of two vectors.\n   * @param a - The first vector\n   * @param b - The second vector\n   * @returns The distance of two vectors\n   */;\n  Vector4.distance = function distance(a, b) {\n    var x = b._x - a._x;\n    var y = b._y - a._y;\n    var z = b._z - a._z;\n    var w = b._w - a._w;\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n  }\n\n  /**\n   * Determines the squared distance of two vectors.\n   * @param a - The first vector\n   * @param b - The second vector\n   * @returns The squared distance of two vectors\n   */;\n  Vector4.distanceSquared = function distanceSquared(a, b) {\n    var x = b._x - a._x;\n    var y = b._y - a._y;\n    var z = b._z - a._z;\n    var w = b._w - a._w;\n    return x * x + y * y + z * z + w * w;\n  }\n\n  /**\n   * Determines whether the specified vectors are equals.\n   * @param left - The first vector to compare\n   * @param right - The second vector to compare\n   * @returns True if the specified vectors are equals, false otherwise\n   */;\n  Vector4.equals = function equals(left, right) {\n    return MathUtil.equals(left._x, right._x) && MathUtil.equals(left._y, right._y) && MathUtil.equals(left._z, right._z) && MathUtil.equals(left._w, right._w);\n  }\n\n  /**\n   * Performs a linear interpolation between two vectors.\n   * @param start - The first vector\n   * @param end - The second vector\n   * @param t - The blend amount where 0 returns start and 1 end\n   * @param out - The result of linear blending between two vectors\n   */;\n  Vector4.lerp = function lerp(start, end, t, out) {\n    var _x = start._x,\n      _y = start._y,\n      _z = start._z,\n      _w = start._w;\n    out._x = _x + (end._x - _x) * t;\n    out._y = _y + (end._y - _y) * t;\n    out._z = _z + (end._z - _z) * t;\n    out._w = _w + (end._w - _w) * t;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a vector containing the largest components of the specified vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param out - The vector containing the largest components of the specified vectors\n   */;\n  Vector4.max = function max(left, right, out) {\n    out._x = Math.max(left._x, right._x);\n    out._y = Math.max(left._y, right._y);\n    out._z = Math.max(left._z, right._z);\n    out._w = Math.max(left._w, right._w);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Calculate a vector containing the smallest components of the specified vectors.\n   * @param left - The first vector\n   * @param right - The second vector\n   * @param out - The vector containing the smallest components of the specified vectors\n   */;\n  Vector4.min = function min(left, right, out) {\n    out._x = Math.min(left._x, right._x);\n    out._y = Math.min(left._y, right._y);\n    out._z = Math.min(left._z, right._z);\n    out._w = Math.min(left._w, right._w);\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Reverses the direction of a given vector.\n   * @param a - The vector to negate\n   * @param out - The vector facing in the opposite direction\n   */;\n  Vector4.negate = function negate(a, out) {\n    out._x = -a._x;\n    out._y = -a._y;\n    out._z = -a._z;\n    out._w = -a._w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Converts the vector into a unit vector.\n   * @param a - The vector to normalize\n   * @param out - The normalized vector\n   */;\n  Vector4.normalize = function normalize(a, out) {\n    var _x = a._x,\n      _y = a._y,\n      _z = a._z,\n      _w = a._w;\n    var len = Math.sqrt(_x * _x + _y * _y + _z * _z + _w * _w);\n    if (len > MathUtil.zeroTolerance) {\n      len = 1 / len;\n      out._x = _x * len;\n      out._y = _y * len;\n      out._z = _z * len;\n      out._w = _w * len;\n      out._onValueChanged && out._onValueChanged();\n    }\n  }\n\n  /**\n   * Scale a vector by the given value.\n   * @param a - The vector to scale\n   * @param s - The amount by which to scale the vector\n   * @param out - The scaled vector\n   */;\n  Vector4.scale = function scale(a, s, out) {\n    out._x = a._x * s;\n    out._y = a._y * s;\n    out._z = a._z * s;\n    out._w = a._w * s;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a transformation using the given 4x4 matrix.\n   * @param v - The vector to transform\n   * @param m - The transform matrix\n   * @param out - The transformed vector3\n   */;\n  Vector4.transform = function transform(v, m, out) {\n    var _x = v._x,\n      _y = v._y,\n      _z = v._z,\n      _w = v._w;\n    var e = m.elements;\n    out._x = _x * e[0] + _y * e[4] + _z * e[8] + _w * e[12];\n    out._y = _x * e[1] + _y * e[5] + _z * e[9] + _w * e[13];\n    out._z = _x * e[2] + _y * e[6] + _z * e[10] + _w * e[14];\n    out._w = _x * e[3] + _y * e[7] + _z * e[11] + _w * e[15];\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /**\n   * Performs a transformation using the given quaternion.\n   * @param v - The vector to transform\n   * @param q - The transform quaternion\n   * @param out - The transformed vector\n   */;\n  Vector4.transformByQuat = function transformByQuat(v, q, out) {\n    var x = v._x,\n      y = v._y,\n      z = v._z,\n      w = v._w;\n    var qx = q._x;\n    var qy = q._y;\n    var qz = q._z;\n    var qw = q._w;\n\n    // calculate quat * vec\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out._x = ix * qw - iw * qx - iy * qz + iz * qy;\n    out._y = iy * qw - iw * qy - iz * qx + ix * qz;\n    out._z = iz * qw - iw * qz - ix * qy + iy * qx;\n    out._w = w;\n    out._onValueChanged && out._onValueChanged();\n  }\n\n  /** @internal */;\n\n  /**\n   * Constructor of Vector4.\n   * @param x - The x component of the vector, default 0\n   * @param y - The y component of the vector, default 0\n   * @param z - The z component of the vector, default 0\n   * @param w - The w component of the vector, default 0\n   */\n  function Vector4(x, y, z, w) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    if (z === void 0) {\n      z = 0;\n    }\n    if (w === void 0) {\n      w = 0;\n    }\n    this._x = void 0;\n    this._y = void 0;\n    this._z = void 0;\n    this._w = void 0;\n    this._onValueChanged = null;\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._w = w;\n  }\n\n  /**\n   * Set the value of this vector.\n   * @param x - The x component of the vector\n   * @param y - The y component of the vector\n   * @param z - The z component of the vector\n   * @param w - The w component of the vector\n   * @returns This vector\n   */\n  var _proto = Vector4.prototype;\n  _proto.set = function set(x, y, z, w) {\n    this._x = x;\n    this._y = y;\n    this._z = z;\n    this._w = w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the sum of this vector and the specified vector.\n   * @param right - The specified vector\n   * @returns This vector\n   */;\n  _proto.add = function add(right) {\n    this._x += right._x;\n    this._y += right._y;\n    this._z += right._z;\n    this._w += right._w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the difference of this vector and the specified vector.\n   * @param right - the specified vector\n   * @returns This vector\n   */;\n  _proto.subtract = function subtract(right) {\n    this._x -= right._x;\n    this._y -= right._y;\n    this._z -= right._z;\n    this._w -= right._w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the product of this vector and the specified vector.\n   * @param right - the specified vector\n   * @returns This vector\n   */;\n  _proto.multiply = function multiply(right) {\n    this._x *= right._x;\n    this._y *= right._y;\n    this._z *= right._z;\n    this._w *= right._w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Determines the divisor of this vector and the specified vector.\n   * @param right - the specified vector\n   * @returns This vector\n   */;\n  _proto.divide = function divide(right) {\n    this._x /= right._x;\n    this._y /= right._y;\n    this._z /= right._z;\n    this._w /= right._w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Calculate the length of this vector.\n   * @returns The length of this vector\n   */;\n  _proto.length = function length() {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z,\n      _w = this._w;\n    return Math.sqrt(_x * _x + _y * _y + _z * _z + _w * _w);\n  }\n\n  /**\n   * Calculate the squared length of this vector.\n   * @returns The squared length of this vector\n   */;\n  _proto.lengthSquared = function lengthSquared() {\n    var _x = this._x,\n      _y = this._y,\n      _z = this._z,\n      _w = this._w;\n    return _x * _x + _y * _y + _z * _z + _w * _w;\n  }\n\n  /**\n   * Reverses the direction of this vector.\n   * @returns This vector\n   */;\n  _proto.negate = function negate() {\n    this._x = -this._x;\n    this._y = -this._y;\n    this._z = -this._z;\n    this._w = -this._w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Converts this vector into a unit vector.\n   * @returns This vector\n   */;\n  _proto.normalize = function normalize() {\n    Vector4.normalize(this, this);\n    return this;\n  }\n\n  /**\n   * Scale this vector by the given value.\n   * @param s - The amount by which to scale the vector\n   * @returns This vector\n   */;\n  _proto.scale = function scale(s) {\n    this._x *= s;\n    this._y *= s;\n    this._z *= s;\n    this._w *= s;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Creates a clone of this vector.\n   * @returns A clone of this vector\n   */;\n  _proto.clone = function clone() {\n    var ret = new Vector4(this._x, this._y, this._z, this._w);\n    return ret;\n  }\n\n  /**\n   * Copy from vector3 like object.\n   * @param source - Vector3 like object.\n   * @returns This vector\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this._x = source.x;\n    this._y = source.y;\n    this._z = source.z;\n    this._w = source.w;\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this vector by an array.\n   * @param array - The arrayƒ\n   * @param offset - The start offset of the array\n   * @returns This vector\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    this._x = array[offset];\n    this._y = array[offset + 1];\n    this._z = array[offset + 2];\n    this._w = array[offset + 3];\n    this._onValueChanged && this._onValueChanged();\n    return this;\n  }\n\n  /**\n   * Copy the value of this vector to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    out[outOffset] = this._x;\n    out[outOffset + 1] = this._y;\n    out[outOffset + 2] = this._z;\n    out[outOffset + 3] = this._w;\n  };\n  _createClass(Vector4, [{\n    key: \"x\",\n    get:\n    /**\n     * The x component of the vector.\n     */\n    function get() {\n      return this._x;\n    },\n    set: function set(value) {\n      this._x = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The y component of the vector.\n     */\n  }, {\n    key: \"y\",\n    get: function get() {\n      return this._y;\n    },\n    set: function set(value) {\n      this._y = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The z component of the vector.\n     */\n  }, {\n    key: \"z\",\n    get: function get() {\n      return this._z;\n    },\n    set: function set(value) {\n      this._z = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n\n    /**\n     * The w component of the vector.\n     */\n  }, {\n    key: \"w\",\n    get: function get() {\n      return this._w;\n    },\n    set: function set(value) {\n      this._w = value;\n      this._onValueChanged && this._onValueChanged();\n    }\n  }]);\n  return Vector4;\n}();\nVector4._zero = new Vector4(0.0, 0.0, 0.0, 0.0);\nVector4._one = new Vector4(1.0, 1.0, 1.0, 1.0);\n\n/**\n * Describes a color in the from of RGBA (in order: R, G, B, A).\n */\nvar Color = /*#__PURE__*/function () {\n  /**\n   * Modify a value from the gamma space to the linear space.\n   * @param value - The value in gamma space\n   * @returns The value in linear space\n   */\n  Color.gammaToLinearSpace = function gammaToLinearSpace(value) {\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_framebuffer_sRGB.txt\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_texture_sRGB_decode.txt\n\n    if (value <= 0.0) return 0.0;else if (value <= 0.04045) return value / 12.92;else if (value < 1.0) return Math.pow((value + 0.055) / 1.055, 2.4);else return Math.pow(value, 2.4);\n  }\n\n  /**\n   * Modify a value from the linear space to the gamma space.\n   * @param value - The value in linear space\n   * @returns The value in gamma space\n   */;\n  Color.linearToGammaSpace = function linearToGammaSpace(value) {\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_framebuffer_sRGB.txt\n    // https://www.khronos.org/registry/OpenGL/extensions/EXT/EXT_texture_sRGB_decode.txt\n\n    if (value <= 0.0) return 0.0;else if (value < 0.0031308) return 12.92 * value;else if (value < 1.0) return 1.055 * Math.pow(value, 0.41666) - 0.055;else return Math.pow(value, 0.41666);\n  }\n\n  /**\n   * Determines whether the specified colors are equals.\n   * @param left - The first color to compare\n   * @param right - The second color to compare\n   * @returns True if the specified colors are equals, false otherwise\n   */;\n  Color.equals = function equals(left, right) {\n    return MathUtil.equals(left.r, right.r) && MathUtil.equals(left.g, right.g) && MathUtil.equals(left.b, right.b) && MathUtil.equals(left.a, right.a);\n  }\n\n  /**\n   * Determines the sum of two colors.\n   * @param left - The first color to add\n   * @param right - The second color to add\n   * @param out - The sum of two colors\n   * @returns The added color\n   */;\n  Color.add = function add(left, right, out) {\n    out.r = left.r + right.r;\n    out.g = left.g + right.g;\n    out.b = left.b + right.b;\n    out.a = left.a + right.a;\n    return out;\n  }\n\n  /**\n   * Scale a color by the given value.\n   * @param left - The color to scale\n   * @param s - The amount by which to scale the color\n   * @param out - The scaled color\n   * @returns The scaled color\n   */;\n  Color.scale = function scale(left, s, out) {\n    out.r = left.r * s;\n    out.g = left.g * s;\n    out.b = left.b * s;\n    out.a = left.a * s;\n    return out;\n  }\n\n  /** The red component of the color, 0~1. */;\n\n  /**\n   * Constructor of Color.\n   * @param r - The red component of the color\n   * @param g - The green component of the color\n   * @param b - The blue component of the color\n   * @param a - The alpha component of the color\n   */\n  function Color(r, g, b, a) {\n    if (r === void 0) {\n      r = 1;\n    }\n    if (g === void 0) {\n      g = 1;\n    }\n    if (b === void 0) {\n      b = 1;\n    }\n    if (a === void 0) {\n      a = 1;\n    }\n    this.r = void 0;\n    this.g = void 0;\n    this.b = void 0;\n    this.a = void 0;\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n  }\n\n  /**\n   * Set the value of this color.\n   * @param r - The red component of the color\n   * @param g - The green component of the color\n   * @param b - The blue component of the color\n   * @param a - The alpha component of the color\n   * @returns This color.\n   */\n  var _proto = Color.prototype;\n  _proto.set = function set(r, g, b, a) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a;\n    return this;\n  }\n\n  /**\n   * Determines the sum of this color and the specified color.\n   * @param color - The specified color\n   * @returns The added color\n   */;\n  _proto.add = function add(color) {\n    this.r += color.r;\n    this.g += color.g;\n    this.b += color.b;\n    this.a += color.a;\n    return this;\n  }\n\n  /**\n   * Scale this color by the given value.\n   * @param s - The amount by which to scale the color\n   * @returns The scaled color\n   */;\n  _proto.scale = function scale(s) {\n    this.r *= s;\n    this.g *= s;\n    this.b *= s;\n    this.a *= s;\n    return this;\n  }\n\n  /**\n   * Creates a clone of this color.\n   * @returns A clone of this color\n   */;\n  _proto.clone = function clone() {\n    var ret = new Color(this.r, this.g, this.b, this.a);\n    return ret;\n  }\n\n  /**\n   * Copy from color like object.\n   * @param source - Color like object.\n   * @returns This vector\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this.r = source.r;\n    this.g = source.g;\n    this.b = source.b;\n    this.a = source.a;\n    return this;\n  }\n\n  /**\n   * Modify components (r, g, b) of this color from gamma space to linear space.\n   * @param out - The color in linear space\n   * @returns The color in linear space\n   */;\n  _proto.toLinear = function toLinear(out) {\n    out.r = Color.gammaToLinearSpace(this.r);\n    out.g = Color.gammaToLinearSpace(this.g);\n    out.b = Color.gammaToLinearSpace(this.b);\n    return out;\n  }\n\n  /**\n   * Modify components (r, g, b) of this color from linear space to gamma space.\n   * @param out - The color in gamma space\n   * @returns The color in gamma space\n   */;\n  _proto.toGamma = function toGamma(out) {\n    out.r = Color.linearToGammaSpace(this.r);\n    out.g = Color.linearToGammaSpace(this.g);\n    out.b = Color.linearToGammaSpace(this.b);\n    return out;\n  };\n  return Color;\n}();\n\n// A 2d rectangle defined by x and y position, width and height.\nvar Rect = /*#__PURE__*/function () {\n  /** The x coordinate of the rectangle. */\n\n  /** The y coordinate of the rectangle. */\n\n  /** The width of the rectangle, measured from the x position. */\n\n  /** The height of the rectangle, measured from the y position. */\n\n  /**\n   * Constructor of Rect.\n   * @param x - The x coordinate of the rectangle, default 0\n   * @param y - The y coordinate of the rectangle, default 0\n   * @param width - The width of the rectangle, measured from the x position, default 0\n   * @param height - The height of the rectangle, measured from the y position, default 0\n   */\n  function Rect(x, y, width, height) {\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    if (width === void 0) {\n      width = 0;\n    }\n    if (height === void 0) {\n      height = 0;\n    }\n    this.x = void 0;\n    this.y = void 0;\n    this.width = void 0;\n    this.height = void 0;\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * Set the value of this rectangle.\n   * @param x - The x coordinate of the rectangle\n   * @param y - The y coordinate of the rectangle\n   * @param width - The width of the rectangle, measured from the x position\n   * @param height - The height of the rectangle, measured from the y position\n   * @returns This rectangle\n   */\n  var _proto = Rect.prototype;\n  _proto.set = function set(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  /**\n   * Creates a clone of this rect.\n   * @returns A clone of this rect\n   */;\n  _proto.clone = function clone() {\n    return new Rect(this.x, this.y, this.width, this.height);\n  }\n\n  /**\n   * Copy this rect from the specified rect.\n   * @param source - The specified rect\n   * @returns This rect\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    this.x = source.x;\n    this.y = source.y;\n    this.width = source.width;\n    this.height = source.height;\n    return this;\n  };\n  return Rect;\n}();\n\n/**\n * Use SH3 to represent irradiance environment maps efficiently, allowing for interactive rendering of diffuse objects under distant illumination.\n * @remarks\n * https://graphics.stanford.edu/papers/envmap/envmap.pdf\n * http://www.ppsloan.org/publications/StupidSH36.pdf\n * https://google.github.io/filament/Filament.md.html#annex/sphericalharmonics\n */\nvar SphericalHarmonics3 = /*#__PURE__*/function () {\n  function SphericalHarmonics3() {\n    this.coefficients = new Float32Array(27);\n  }\n  var _proto = SphericalHarmonics3.prototype;\n  /**\n   * Add light to SphericalHarmonics3.\n   * @param direction - Light direction\n   * @param color - Light color\n   * @param deltaSolidAngle - The delta solid angle of the light\n   */\n  _proto.addLight = function addLight(direction, color, deltaSolidAngle) {\n    /**\n     * Implements `EvalSHBasis` from [Projection from Cube maps] in http://www.ppsloan.org/publications/StupidSH36.pdf.\n     *\n     * Basis constants\n     * 0: Math.sqrt(1/(4 * Math.PI))\n     *\n     * 1: -Math.sqrt(3 / (4 * Math.PI))\n     * 2: Math.sqrt(3 / (4 * Math.PI))\n     * 3: -Math.sqrt(3 / (4 * Math.PI))\n     *\n     * 4: Math.sqrt(15 / (4 * Math.PI))\n     * 5: -Math.sqrt(15 / (4 * Math.PI))\n     * 6: Math.sqrt(5 / (16 * Math.PI))\n     * 7: -Math.sqrt(15 / (4 * Math.PI)）\n     * 8: Math.sqrt(15 / (16 * Math.PI))\n     */\n\n    color.scale(deltaSolidAngle);\n    var coe = this.coefficients;\n    var x = direction._x,\n      y = direction._y,\n      z = direction._z;\n    var r = color.r,\n      g = color.g,\n      b = color.b;\n    var bv0 = 0.282095; // basis0 = 0.886227\n    var bv1 = -0.488603 * y; // basis1 = -0.488603\n    var bv2 = 0.488603 * z; // basis2 = 0.488603\n    var bv3 = -0.488603 * x; // basis3 = -0.488603\n    var bv4 = 1.092548 * (x * y); // basis4 = 1.092548\n    var bv5 = -1.092548 * (y * z); // basis5 = -1.092548\n    var bv6 = 0.315392 * (3 * z * z - 1); // basis6 = 0.315392\n    var bv7 = -1.092548 * (x * z); // basis7 = -1.092548\n    var bv8 = 0.546274 * (x * x - y * y); // basis8 = 0.546274\n\n    coe[0] += r * bv0, coe[1] += g * bv0, coe[2] += b * bv0;\n    coe[3] += r * bv1, coe[4] += g * bv1, coe[5] += b * bv1;\n    coe[6] += r * bv2, coe[7] += g * bv2, coe[8] += b * bv2;\n    coe[9] += r * bv3, coe[10] += g * bv3, coe[11] += b * bv3;\n    coe[12] += r * bv4, coe[13] += g * bv4, coe[14] += b * bv4;\n    coe[15] += r * bv5, coe[16] += g * bv5, coe[17] += b * bv5;\n    coe[18] += r * bv6, coe[19] += g * bv6, coe[20] += b * bv6;\n    coe[21] += r * bv7, coe[22] += g * bv7, coe[23] += b * bv7;\n    coe[24] += r * bv8, coe[25] += g * bv8, coe[26] += b * bv8;\n  }\n\n  /**\n   * Evaluates the color for the specified direction.\n   * @param direction - Specified direction\n   * @param out - Out color\n   */;\n  _proto.evaluate = function evaluate(direction, out) {\n    /**\n     * Equations based on data from: http://ppsloan.org/publications/StupidSH36.pdf\n     *\n     *\n     * Basis constants\n     * 0: Math.sqrt(1/(4 * Math.PI))\n     *\n     * 1: -Math.sqrt(3 / (4 * Math.PI))\n     * 2: Math.sqrt(3 / (4 * Math.PI))\n     * 3: -Math.sqrt(3 / (4 * Math.PI))\n     *\n     * 4: Math.sqrt(15 / (4 * Math.PI)）\n     * 5: -Math.sqrt(15 / (4 * Math.PI))\n     * 6: Math.sqrt(5 / (16 * Math.PI)）\n     * 7: -Math.sqrt(15 / (4 * Math.PI)）\n     * 8: Math.sqrt(15 / (16 * Math.PI)）\n     *\n     *\n     * Convolution kernel\n     * 0: Math.PI\n     * 1: (2 * Math.PI) / 3\n     * 2: Math.PI / 4\n     */\n\n    var coe = this.coefficients;\n    var x = direction._x,\n      y = direction._y,\n      z = direction._z;\n    var bv0 = 0.886227; // kernel0 * basis0 = 0.886227\n    var bv1 = -1.023327 * y; // kernel1 * basis1 = -1.023327\n    var bv2 = 1.023327 * z; // kernel1 * basis2 = 1.023327\n    var bv3 = -1.023327 * x; // kernel1 * basis3 = -1.023327\n    var bv4 = 0.858086 * y * x; // kernel2 * basis4 = 0.858086\n    var bv5 = -0.858086 * y * z; // kernel2 * basis5 = -0.858086\n    var bv6 = 0.247708 * (3 * z * z - 1); // kernel2 * basis6 = 0.247708\n    var bv7 = -0.858086 * z * x; // kernel2 * basis7 = -0.858086\n    var bv8 = 0.429042 * (x * x - y * y); // kernel2 * basis8 = 0.429042\n\n    // l0\n    var r = coe[0] * bv0;\n    var g = coe[1] * bv0;\n    var b = coe[2] * bv0;\n\n    // l1\n    r += coe[3] * bv1 + coe[6] * bv2 + coe[9] * bv3;\n    g += coe[4] * bv1 + coe[7] * bv2 + coe[10] * bv3;\n    b += coe[5] * bv1 + coe[8] * bv2 + coe[11] * bv3;\n\n    // l2\n    r += coe[12] * bv4 + coe[15] * bv5 + coe[18] * bv6 + coe[21] * bv7 + coe[24] * bv8;\n    g += coe[13] * bv4 + coe[16] * bv5 + coe[19] * bv6 + coe[22] * bv7 + coe[25] * bv8;\n    b += coe[14] * bv4 + coe[17] * bv5 + coe[20] * bv6 + coe[23] * bv7 + coe[26] * bv8;\n    out.set(r, g, b, 1.0);\n    return out;\n  }\n\n  /**\n   * Scale the coefficients.\n   * @param s - The amount by which to scale the SphericalHarmonics3\n   */;\n  _proto.scale = function scale(s) {\n    var src = this.coefficients;\n    src[0] *= s, src[1] *= s, src[2] *= s;\n    src[3] *= s, src[4] *= s, src[5] *= s;\n    src[6] *= s, src[7] *= s, src[8] *= s;\n    src[9] *= s, src[10] *= s, src[11] *= s;\n    src[12] *= s, src[13] *= s, src[14] *= s;\n    src[15] *= s, src[16] *= s, src[17] *= s;\n    src[18] *= s, src[19] *= s, src[20] *= s;\n    src[21] *= s, src[22] *= s, src[23] *= s;\n    src[24] *= s, src[25] *= s, src[26] *= s;\n  }\n\n  /**\n   * Creates a clone of this SphericalHarmonics3.\n   * @returns A clone of this SphericalHarmonics3\n   */;\n  _proto.clone = function clone() {\n    var sh = new SphericalHarmonics3();\n    sh.copyFrom(this);\n    return sh;\n  }\n\n  /**\n   * Copy this SphericalHarmonics3 from the specified SphericalHarmonics3.\n   * @param source - The specified SphericalHarmonics3\n   * @returns This SphericalHarmonics3\n   */;\n  _proto.copyFrom = function copyFrom(source) {\n    source.copyToArray(this.coefficients);\n    return this;\n  }\n\n  /**\n   * Copy the value of this spherical harmonics from an array.\n   * @param array - The array\n   * @param offset - The start offset of the array\n   */;\n  _proto.copyFromArray = function copyFromArray(array, offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n    var s = this.coefficients;\n    s[0] = array[offset], s[1] = array[1 + offset], s[2] = array[2 + offset];\n    s[3] = array[3 + offset], s[4] = array[4 + offset], s[5] = array[5 + offset];\n    s[6] = array[6 + offset], s[7] = array[7 + offset], s[8] = array[8 + offset];\n    s[9] = array[9 + offset], s[10] = array[10 + offset], s[11] = array[11 + offset];\n    s[12] = array[12 + offset], s[13] = array[13 + offset], s[14] = array[14 + offset];\n    s[15] = array[15 + offset], s[16] = array[16 + offset], s[17] = array[17 + offset];\n    s[18] = array[18 + offset], s[19] = array[19 + offset], s[20] = array[20 + offset];\n    s[21] = array[21 + offset], s[22] = array[22 + offset], s[23] = array[23 + offset];\n    s[24] = array[24 + offset], s[25] = array[25 + offset], s[26] = array[26 + offset];\n  }\n\n  /**\n   * Copy the value of this spherical harmonics to an array.\n   * @param out - The array\n   * @param outOffset - The start offset of the array\n   */;\n  _proto.copyToArray = function copyToArray(out, outOffset) {\n    if (outOffset === void 0) {\n      outOffset = 0;\n    }\n    var s = this.coefficients;\n    out[0 + outOffset] = s[0], out[1 + outOffset] = s[1], out[2 + outOffset] = s[2];\n    out[3 + outOffset] = s[3], out[4 + outOffset] = s[4], out[5 + outOffset] = s[5];\n    out[6 + outOffset] = s[6], out[7 + outOffset] = s[7], out[8 + outOffset] = s[8];\n    out[9 + outOffset] = s[9], out[10 + outOffset] = s[10], out[11 + outOffset] = s[11];\n    out[12 + outOffset] = s[12], out[13 + outOffset] = s[13], out[14 + outOffset] = s[14];\n    out[15 + outOffset] = s[15], out[16 + outOffset] = s[16], out[17 + outOffset] = s[17];\n    out[18 + outOffset] = s[18], out[19 + outOffset] = s[19], out[20 + outOffset] = s[20];\n    out[21 + outOffset] = s[21], out[22 + outOffset] = s[22], out[23 + outOffset] = s[23];\n    out[24 + outOffset] = s[24], out[25 + outOffset] = s[25], out[26 + outOffset] = s[26];\n  };\n  return SphericalHarmonics3;\n}();\n\nexport { BoundingBox, BoundingFrustum, BoundingSphere, CollisionUtil, Color, ContainmentType, MathUtil, Matrix, Matrix3x3, Plane, PlaneIntersectionType, Quaternion, Ray, Rect, SphericalHarmonics3, Vector2, Vector3, Vector4 };\n//# sourceMappingURL=module.js.map\n","import { Vector3, Quaternion, Matrix3x3, Matrix, MathUtil, Vector2, Ray, Color, Vector4, BoundingBox, BoundingFrustum, Rect } from '@oasis-engine/math';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _initializerDefineProperty(target, property, descriptor, context) {\n  if (!descriptor) return;\n  Object.defineProperty(target, property, {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable,\n    writable: descriptor.writable,\n    value: descriptor.initializer ? descriptor.initializer.call(context) : void 0\n  });\n}\nfunction _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n  var desc = {};\n  Object.keys(descriptor).forEach(function (key) {\n    desc[key] = descriptor[key];\n  });\n  desc.enumerable = !!desc.enumerable;\n  desc.configurable = !!desc.configurable;\n  if ('value' in desc || desc.initializer) {\n    desc.writable = true;\n  }\n  desc = decorators.slice().reverse().reduce(function (desc, decorator) {\n    return decorator(target, property, desc) || desc;\n  }, desc);\n  if (context && desc.initializer !== void 0) {\n    desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n    desc.initializer = undefined;\n  }\n  if (desc.initializer === void 0) {\n    Object.defineProperty(target, property, desc);\n    desc = null;\n  }\n  return desc;\n}\n\nvar Util = {\n  isArray: \"isArray\" in Array ? Array.isArray : function (value) {\n    return toString.call(value) === \"[object Array]\";\n  },\n  isArrayLike: function isArrayLike(x) {\n    return !!x && typeof x.length === \"number\" && typeof x !== \"function\";\n  },\n  clone: function clone(obj) {\n    if (typeof obj !== \"object\" || obj === null) {\n      return obj;\n    }\n    var rst;\n    if (Util.isArrayLike(obj)) {\n      rst = obj.slice();\n      for (var i = 0, l = obj.length; i < l; i++) {\n        rst[i] = Util.clone(obj[i]);\n      }\n    } else {\n      rst = {};\n      for (var k in obj) {\n        if (obj.hasOwnProperty(k)) {\n          rst[k] = Util.clone(obj[k]);\n        }\n      }\n    }\n    return rst;\n  },\n  downloadBlob: function downloadBlob(blob, fileName) {\n    if (fileName === void 0) {\n      fileName = \"\";\n    }\n    var url = window.URL.createObjectURL(blob);\n    var a = document.createElement(\"a\");\n    document.body.appendChild(a);\n    a.style.display = \"none\";\n    a.href = url;\n    a.download = fileName;\n    a.addEventListener(\"click\", function () {\n      if (a.parentElement) {\n        a.parentElement.removeChild(a);\n      }\n    });\n    a.click();\n    window.URL.revokeObjectURL(url);\n  }\n};\n\n/**\n * Fastly remove an element from array.\n * @param array - Array\n * @param item - Element\n */\nfunction removeFromArray(array, item) {\n  var index = array.indexOf(item);\n  if (index < 0) {\n    return false;\n  }\n  var last = array.length - 1;\n  if (index !== last) {\n    var end = array[last];\n    array[index] = end;\n  }\n  array.length--;\n  return true;\n}\nfunction ObjectValues(obj) {\n  return Object.keys(obj).map(function (key) {\n    return obj[key];\n  });\n}\n\nvar Utils = /*#__PURE__*/function () {\n  function Utils() {}\n  /**\n   * @internal\n   * Simplify lodash get: https://github.com/lodash/lodash/blob/master/get.js.\n   * @param target - The object to query.\n   * @param path - The path of the property to get.\n   * @returns Returns the resolved value.\n   */\n  Utils._reflectGet = function _reflectGet(target, path) {\n    var pathArr = this._stringToPath(path);\n    var object = target;\n    var index = 0;\n    var length = pathArr.length;\n    while (object != null && index < length) {\n      object = object[pathArr[index++]];\n    }\n    return index && index == length ? object : undefined;\n  };\n  Utils._stringToPath = function _stringToPath(string) {\n    var result = [];\n    if (string.charCodeAt(0) === charCodeOfDot) {\n      result.push(\"\");\n    }\n    string.replace(rePropName, function (match, expression, quote, subString) {\n      var key = match;\n      if (quote) {\n        key = subString.replace(reEscapeChar, \"$1\");\n      } else if (expression) {\n        key = expression.trim();\n      }\n      result.push(key);\n    });\n    return result;\n  };\n  return Utils;\n}();\nvar charCodeOfDot = \".\".charCodeAt(0);\nvar reEscapeChar = /\\\\(\\\\)?/g;\nvar rePropName = RegExp(\n// Match anything that isn't a dot or bracket.\n\"[^.[\\\\]]+\" + \"|\" +\n// Or match property names within brackets.\n\"\\\\[(?:\" +\n// Match a non-string expression.\n\"([^\\\"'][^[]*)\" + \"|\" +\n// Or match strings (supports escaping characters).\n\"([\\\"'])((?:(?!\\\\2)[^\\\\\\\\]|\\\\\\\\.)*?)\\\\2\" + \")\\\\]\" + \"|\" +\n// Or match \"\" as the space between consecutive dots or empty brackets.\n\"(?=(?:\\\\.|\\\\[\\\\])(?:\\\\.|\\\\[\\\\]|$))\", \"g\");\n\n/**\n * Asset Promise Status\n */\nvar AssetPromiseStatus;\n/**\n * Asset Loading Promise.\n */\n(function (AssetPromiseStatus) {\n  AssetPromiseStatus[AssetPromiseStatus[\"Success\"] = 0] = \"Success\";\n  AssetPromiseStatus[AssetPromiseStatus[\"Pending\"] = 1] = \"Pending\";\n  AssetPromiseStatus[AssetPromiseStatus[\"Failed\"] = 2] = \"Failed\";\n})(AssetPromiseStatus || (AssetPromiseStatus = {}));\nvar AssetPromise = /*#__PURE__*/function (_Promise) {\n  _inheritsLoose(AssetPromise, _Promise);\n  /**\n   * Return a new resource Promise through the provided asset promise collection.\n   * The resolved of the new AssetPromise will be triggered when all the Promises in the provided set are completed.\n   * @param - AssetPromise Collection\n   * @returns AssetPromise\n   */\n  AssetPromise.all = function all(promises) {\n    return new AssetPromise(function (resolve, reject, setProgress) {\n      if (!Array.isArray(promises)) {\n        return resolve([promises]);\n      }\n      var completed = 0;\n      var total = promises.length;\n      var results = new Array(total);\n      promises.forEach(function (value, index) {\n        Promise.resolve(value).then(function (result) {\n          results[index] = result;\n          completed += 1;\n          setProgress(completed / total);\n          if (completed == total) {\n            resolve(results);\n          }\n        }).catch(function (err) {\n          return reject(err);\n        });\n      });\n    });\n  };\n  var _proto = AssetPromise.prototype;\n  /**\n   * Progress callback.\n   * @param callback - Progress callback\n   * @returns Asset Promise\n   */\n  _proto.onProgress = function onProgress(callback) {\n    this._listeners.add(callback);\n    return this;\n  }\n\n  /**\n   * Cancel promise request.\n   * @returns Asset promise\n   */;\n  _proto.cancel = function cancel() {\n    if (this._status !== AssetPromiseStatus.Pending) {\n      return this;\n    }\n    this._reject(\"Promise Canceled\");\n    return this;\n  }\n\n  /**\n   * Create an asset loading Promise.\n   * @param executor - A callback used to initialize the promise. This callback is passed two arguments:\n   * a resolve callback used to resolve the promise with a value or the result of another promise,\n   * and a reject callback used to reject the promise with a provided reason or error.\n   * and a setProgress callback used to set promise progress with a percent.\n   */;\n  function AssetPromise(executor) {\n    var _this;\n    var newReject;\n    var setProgress = function setProgress(progress) {\n      if (progress <= _this._progress) {\n        return;\n      }\n      _this._progress = progress;\n      for (var _iterator = _createForOfIteratorHelperLoose(_this._listeners), _step; !(_step = _iterator()).done;) {\n        var listener = _step.value;\n        listener(progress);\n      }\n    };\n    _this = _Promise.call(this, function (resolve, reject) {\n      newReject = function newReject(reason) {\n        // Add it to the micro task to avoid reporting an error when calling this directly.\n        Promise.resolve().then(function () {\n          _this._status = AssetPromiseStatus.Failed;\n          reject(reason);\n        });\n      };\n      executor(function (value) {\n        // Add it to the micro task to avoid reporting an error when calling this directly.\n        Promise.resolve().then(function () {\n          setProgress(1);\n          _this._status = AssetPromiseStatus.Success;\n          resolve(value);\n        });\n      }, newReject, function (progress) {\n        // Add it to the micro task to avoid reporting an error when calling this directly\n        Promise.resolve().then(function () {\n          setProgress(progress);\n        });\n      });\n    }) || this;\n    _this._status = void 0;\n    _this._progress = void 0;\n    _this._reject = void 0;\n    _this._listeners = void 0;\n    _this._reject = newReject;\n    _this._listeners = new Set();\n    _this._progress = 0;\n    _this._status = AssetPromiseStatus.Pending;\n    return _this;\n  }\n  _createClass(AssetPromise, [{\n    key: \"status\",\n    get:\n    /**\n     * Current promise state.\n     */\n    function get() {\n      return this._status;\n    }\n\n    /**\n     * Loading progress.\n     */\n  }, {\n    key: \"progress\",\n    get: function get() {\n      return this._progress;\n    }\n  }]);\n  return AssetPromise;\n}( /*#__PURE__*/_wrapNativeSuper(Promise));\n\n/**\n * ResourceManager\n */\nvar ResourceManager = /*#__PURE__*/function () {\n  /** Loader collection. */\n  /**\n   * @internal\n   */\n  ResourceManager._addLoader = function _addLoader(type, loader, extNames) {\n    this._loaders[type] = loader;\n    for (var i = 0, len = extNames.length; i < len; i++) {\n      this._extTypeMapping[extNames[i]] = type;\n    }\n  };\n  ResourceManager._getTypeByUrl = function _getTypeByUrl(url) {\n    var path = url.split(\"?\")[0];\n    return this._extTypeMapping[path.substring(path.lastIndexOf(\".\") + 1)];\n  }\n\n  /** The number of retries after failing to load assets. */;\n\n  /**\n   * Create a ResourceManager.\n   * @param engine - Engine to which the current ResourceManager belongs\n   */\n  function ResourceManager(engine) {\n    this.engine = engine;\n    this.retryCount = 1;\n    this.retryInterval = 0;\n    this.timeout = Infinity;\n    this._objectPool = Object.create(null);\n    this._editorResourceConfig = Object.create(null);\n    this._virtualPathMap = Object.create(null);\n    this._assetPool = Object.create(null);\n    this._assetUrlPool = Object.create(null);\n    this._refObjectPool = Object.create(null);\n    this._loadingPromises = {};\n  }\n\n  /**\n   * Load asset asynchronously through the path.\n   * @param path - Path\n   * @returns Asset promise\n   */\n  var _proto = ResourceManager.prototype;\n  _proto.load = function load(assetInfo) {\n    var _this = this;\n    // single item\n    if (!Array.isArray(assetInfo)) {\n      return this._loadSingleItem(assetInfo);\n    }\n    // multi items\n    var promises = assetInfo.map(function (item) {\n      return _this._loadSingleItem(item);\n    });\n    return AssetPromise.all(promises);\n  }\n\n  /**\n   * Cancel all assets that have not finished loading.\n   */;\n  _proto.cancelNotLoaded = function cancelNotLoaded(url) {\n    var _this2 = this;\n    if (!url) {\n      ObjectValues(this._loadingPromises).forEach(function (promise) {\n        promise.cancel();\n      });\n    } else if (typeof url === \"string\") {\n      var _this$_loadingPromise;\n      (_this$_loadingPromise = this._loadingPromises[url]) === null || _this$_loadingPromise === void 0 ? void 0 : _this$_loadingPromise.cancel();\n    } else {\n      url.forEach(function (p) {\n        var _this2$_loadingPromis;\n        (_this2$_loadingPromis = _this2._loadingPromises[p]) === null || _this2$_loadingPromis === void 0 ? void 0 : _this2$_loadingPromis.cancel();\n      });\n    }\n  }\n\n  /**\n   * Garbage collection will release resource objects managed by reference counting.\n   * @remarks The release principle is that it is not referenced by the components, including direct and indirect reference.\n   */;\n  _proto.gc = function gc() {\n    this._gc(false);\n  }\n\n  /**\n   * Get asset url from instanceId.\n   * @param instanceId - Engine instance id\n   * @returns Asset url\n   */;\n  _proto.getAssetPath = function getAssetPath(instanceId) {\n    return this._assetPool[instanceId];\n  }\n\n  /**\n   * @beta Just for internal editor, not recommended for developers.\n   */;\n  _proto.getResourceByRef = function getResourceByRef(ref) {\n    var refId = ref.refId,\n      key = ref.key,\n      isClone = ref.isClone;\n    var obj = this._objectPool[refId];\n    var promise = obj ? Promise.resolve(obj) : this.load({\n      type: this._editorResourceConfig[refId].type,\n      url: this._editorResourceConfig[refId].path\n    });\n    return promise.then(function (res) {\n      return key ? Utils._reflectGet(res, key) : res;\n    }).then(function (item) {\n      return isClone ? item.clone() : item;\n    });\n  }\n\n  /**\n   * @internal\n   * @beta Just for internal editor, not recommended for developers.\n   */;\n  _proto.initVirtualResources = function initVirtualResources(config) {\n    var _this3 = this;\n    config.forEach(function (element) {\n      _this3._virtualPathMap[element.virtualPath] = element.path;\n      _this3._editorResourceConfig[element.id] = element;\n    });\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addAsset = function _addAsset(path, asset) {\n    this._assetPool[asset.instanceId] = path;\n    this._assetUrlPool[path] = asset;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._deleteAsset = function _deleteAsset(asset) {\n    var id = asset.instanceId;\n    var path = this._assetPool[id];\n    if (path) {\n      delete this._assetPool[id];\n      delete this._assetUrlPool[path];\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addRefObject = function _addRefObject(id, asset) {\n    this._refObjectPool[id] = asset;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._deleteRefObject = function _deleteRefObject(id) {\n    delete this._refObjectPool[id];\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    this.cancelNotLoaded();\n    this._gc(true);\n    this._assetPool = null;\n    this._assetUrlPool = null;\n    this._refObjectPool = null;\n    this._loadingPromises = null;\n  };\n  _proto._assignDefaultOptions = function _assignDefaultOptions(assetInfo) {\n    var _assetInfo$type, _assetInfo$retryCount, _assetInfo$timeout, _assetInfo$retryInter, _assetInfo$url;\n    assetInfo.type = (_assetInfo$type = assetInfo.type) != null ? _assetInfo$type : ResourceManager._getTypeByUrl(assetInfo.url);\n    if (assetInfo.type === undefined) {\n      throw \"asset type should be specified: \" + assetInfo.url;\n    }\n    assetInfo.retryCount = (_assetInfo$retryCount = assetInfo.retryCount) != null ? _assetInfo$retryCount : this.retryCount;\n    assetInfo.timeout = (_assetInfo$timeout = assetInfo.timeout) != null ? _assetInfo$timeout : this.timeout;\n    assetInfo.retryInterval = (_assetInfo$retryInter = assetInfo.retryInterval) != null ? _assetInfo$retryInter : this.retryInterval;\n    assetInfo.url = (_assetInfo$url = assetInfo.url) != null ? _assetInfo$url : assetInfo.urls.join(\",\");\n    return assetInfo;\n  };\n  _proto._loadSingleItem = function _loadSingleItem(item) {\n    var _this4 = this;\n    var info = this._assignDefaultOptions(typeof item === \"string\" ? {\n      url: item\n    } : item);\n    var infoUrl = info.url;\n    // check url mapping\n    var url = this._virtualPathMap[infoUrl] ? this._virtualPathMap[infoUrl] : infoUrl;\n    // has cache\n    if (this._assetUrlPool[url]) {\n      return new AssetPromise(function (resolve) {\n        resolve(_this4._assetUrlPool[url]);\n      });\n    }\n    // loading\n    if (this._loadingPromises[url]) {\n      return this._loadingPromises[info.url];\n    }\n    var loader = ResourceManager._loaders[info.type];\n    if (!loader) {\n      throw \"loader not found: \" + info.type;\n    }\n    info.url = url;\n    var promise = loader.load(info, this);\n    this._loadingPromises[url] = promise;\n    promise.then(function (res) {\n      if (loader.useCache) _this4._addAsset(url, res);\n      if (_this4._loadingPromises) {\n        delete _this4._loadingPromises[url];\n      }\n    }).catch(function (err) {\n      Promise.reject(err);\n      if (_this4._loadingPromises) {\n        delete _this4._loadingPromises[url];\n      }\n    });\n    return promise;\n  };\n  _proto._gc = function _gc(forceDestroy) {\n    var objects = ObjectValues(this._refObjectPool);\n    for (var i = 0, len = objects.length; i < len; i++) {\n      if (!objects[i].isGCIgnored || forceDestroy) {\n        objects[i].destroy();\n      }\n    }\n  };\n  return ResourceManager;\n}();\n\n/**\n * Declare ResourceLoader's decorator.\n * @param assetType - Type of asset\n * @param extnames - Name of file extension\n */\nResourceManager._loaders = {};\nResourceManager._extTypeMapping = {};\nfunction resourceLoader(assetType, extnames, useCache) {\n  if (useCache === void 0) {\n    useCache = true;\n  }\n  return function (Target) {\n    var loader = new Target(useCache);\n    ResourceManager._addLoader(assetType, loader, extnames);\n  };\n}\n\n/** Event Object. * @class */\nvar Event = /*#__PURE__*/function () {\n  function Event(type, target, data, bubbles) {\n    if (target === void 0) {\n      target = null;\n    }\n    if (data === void 0) {\n      data = {};\n    }\n    if (bubbles === void 0) {\n      bubbles = true;\n    }\n    this.data = void 0;\n    this._timeStamp = void 0;\n    this._target = void 0;\n    this._currentTarget = void 0;\n    this._bubbles = void 0;\n    this._propagationStopped = void 0;\n    this._type = void 0;\n    this._timeStamp = new Date().getTime();\n    this._target = target;\n    this.data = data;\n    this._currentTarget = null;\n    this._bubbles = bubbles;\n    this._propagationStopped = false;\n    this._type = type;\n  }\n  var _proto = Event.prototype;\n  _proto.stopPropagation = function stopPropagation() {\n    this._propagationStopped = true;\n  };\n  _createClass(Event, [{\n    key: \"propagationStopped\",\n    get: function get() {\n      return this._propagationStopped;\n    }\n  }, {\n    key: \"target\",\n    get: function get() {\n      return this._target;\n    },\n    set: function set(t) {\n      this._target = t;\n    }\n  }, {\n    key: \"timeStamp\",\n    get: function get() {\n      return this._timeStamp;\n    }\n  }, {\n    key: \"currentTarget\",\n    get: function get() {\n      return this._currentTarget;\n    },\n    set: function set(t) {\n      this._currentTarget = t;\n    }\n  }, {\n    key: \"bubbles\",\n    get: function get() {\n      return this._bubbles;\n    }\n  }, {\n    key: \"type\",\n    get: function get() {\n      return this._type;\n    }\n  }]);\n  return Event;\n}();\n\n/**\n * Clone mode.\n */\nvar CloneMode;\n(function (CloneMode) {\n  CloneMode[CloneMode[\"Ignore\"] = 0] = \"Ignore\";\n  CloneMode[CloneMode[\"Assignment\"] = 1] = \"Assignment\";\n  CloneMode[CloneMode[\"Shallow\"] = 2] = \"Shallow\";\n  CloneMode[CloneMode[\"Deep\"] = 3] = \"Deep\";\n})(CloneMode || (CloneMode = {}));\n\n/**\n * Property decorator, ignore the property when cloning.\n */\nfunction ignoreClone(target, propertyKey) {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Ignore);\n}\n\n/**\n * Property decorator, assign value to the property when cloning.\n *\n * @remarks\n * If it's a primitive type, the value will be copied.\n * If it's a class type, the reference will be copied.\n */\nfunction assignmentClone(target, propertyKey) {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Assignment);\n}\n\n/**\n * Property decorator, shallow clone the property when cloning.\n * After cloning, it will keep its own reference independent, and use the method of assignment to clone all its internal properties.\n * if the internal property is a primitive type, the value will be copied, if the internal property is a reference type, its reference address will be copied.。\n *\n * @remarks\n * Applicable to Object, Array, TypedArray and Class types.\n */\nfunction shallowClone(target, propertyKey) {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Shallow);\n}\n\n/**\n * Property decorator, deep clone the property when cloning.\n * After cloning, it will maintain its own reference independence, and all its internal deep properties will remain completely independent.\n *\n * @remarks\n * Applicable to Object, Array, TypedArray and Class types.\n * If Class is encountered during the deep cloning process, the custom cloning function of the object will be called first.\n * Custom cloning requires the object to implement the IClone interface.\n */\nfunction deepClone(target, propertyKey) {\n  CloneManager.registerCloneMode(target, propertyKey, CloneMode.Deep);\n}\n\n/**\n * @internal\n * Clone manager.\n */\nvar CloneManager = /*#__PURE__*/function () {\n  function CloneManager() {}\n  /** @internal */\n  /** @internal */\n  /**\n   * Register clone mode.\n   * @param target - Clone target\n   * @param propertyKey - Clone property name\n   * @param mode - Clone mode\n   */\n  CloneManager.registerCloneMode = function registerCloneMode(target, propertyKey, mode) {\n    var targetMap = CloneManager._subCloneModeMap.get(target.constructor);\n    if (!targetMap) {\n      targetMap = Object.create(null);\n      CloneManager._subCloneModeMap.set(target.constructor, targetMap);\n    }\n    targetMap[propertyKey] = mode;\n  }\n\n  /**\n   * Get the clone mode according to the prototype chain.\n   */;\n  CloneManager.getCloneMode = function getCloneMode(type) {\n    var cloneModes = CloneManager._cloneModeMap.get(type);\n    if (!cloneModes) {\n      cloneModes = Object.create(null);\n      CloneManager._cloneModeMap.set(type, cloneModes);\n      var objectType = CloneManager._objectType;\n      var cloneModeMap = CloneManager._subCloneModeMap;\n      while (type !== objectType) {\n        var subCloneModes = cloneModeMap.get(type);\n        if (subCloneModes) {\n          _extends(cloneModes, subCloneModes);\n        }\n        type = Object.getPrototypeOf(type);\n      }\n    }\n    return cloneModes;\n  }\n\n  /**\n   * Deep clone the object.\n   * @param source - Clone source\n   * @param target - Clone target\n   */;\n  CloneManager.deepCloneObject = function deepCloneObject(source, target) {\n    var type = source.constructor;\n    switch (type) {\n      case Uint8Array:\n      case Uint16Array:\n      case Uint32Array:\n      case Int8Array:\n      case Int16Array:\n      case Int32Array:\n      case Float32Array:\n      case Float64Array:\n        // Type array clone.\n        target.set(source);\n        break;\n      case Array:\n        // Array clone.\n        for (var i = 0, n = source.length; i < n; i++) {\n          CloneManager._deepCloneObjectItem(source, target, i);\n        }\n        break;\n      default:\n        var customSource = source;\n        if (customSource.clone && customSource.cloneTo) {\n          // Custom clone.\n          customSource.cloneTo(target);\n        } else {\n          // Object or other class not implements custom clone.\n          var keys = Object.keys(source);\n          for (var _i = 0, _n = keys.length; _i < _n; _i++) {\n            CloneManager._deepCloneObjectItem(source, target, keys[_i]);\n          }\n        }\n    }\n  };\n  CloneManager._deepCloneObjectItem = function _deepCloneObjectItem(source, target, k) {\n    var sourceItem = source[k];\n    if (sourceItem instanceof Object) {\n      var itemType = sourceItem.constructor;\n      switch (itemType) {\n        case Uint8Array:\n        case Uint16Array:\n        case Uint32Array:\n        case Int8Array:\n        case Int16Array:\n        case Int32Array:\n        case Float32Array:\n        case Float64Array:\n          // Type array clone.\n          var sourceTypeArrayItem = sourceItem;\n          var targetTypeArrayItem = target[k];\n          if (targetTypeArrayItem == null) {\n            target[k] = sourceTypeArrayItem.slice();\n          } else {\n            targetTypeArrayItem.set(sourceTypeArrayItem);\n          }\n          break;\n        case Array:\n          // Array clone.\n          var sourceArrayItem = sourceItem;\n          var targetArrayItem = target[k];\n          if (targetArrayItem == null) {\n            target[k] = new Array(sourceArrayItem.length);\n          } else {\n            targetArrayItem.length = sourceArrayItem.length;\n          }\n          CloneManager.deepCloneObject(sourceArrayItem, targetArrayItem);\n          break;\n        default:\n          if (sourceItem.clone && sourceItem.cloneTo) {\n            // Custom clone.\n            var sourceCustomItem = sourceItem;\n            var targetCustomItem = target[k];\n            if (targetCustomItem) {\n              sourceCustomItem.cloneTo(targetCustomItem);\n            } else {\n              target[k] = sourceCustomItem.clone();\n            }\n          } else {\n            // Object or other class not implements custom clone.\n            var targetItem = target[k];\n            targetItem == null && (target[k] = targetItem = new sourceItem.constructor());\n            CloneManager.deepCloneObject(sourceItem, targetItem);\n            break;\n          }\n      }\n    } else {\n      // Null or undefined and primitive type.\n      target[k] = sourceItem;\n    }\n  };\n  return CloneManager;\n}();\nCloneManager._subCloneModeMap = new Map();\nCloneManager._cloneModeMap = new Map();\nCloneManager._objectType = Object.getPrototypeOf(Object);\n\nvar _class$g, _descriptor$d;\n/**\n * EventDispatcher, which can be inherited as a base class.\n */\nvar EventDispatcher = (_class$g = /*#__PURE__*/function () {\n  function EventDispatcher() {\n    _initializerDefineProperty(this, \"_evts\", _descriptor$d, this);\n    this._evtCount = 0;\n  }\n  var _proto = EventDispatcher.prototype;\n  /**\n   * Determine whether there is event listening.\n   * @param event - Event name\n   * @returns Returns whether there is a corresponding event\n   */\n  _proto.hasEvent = function hasEvent(event) {\n    return this._evts[event] != null;\n  }\n\n  /**\n   * Returns the names of all registered events.\n   * @returns All event names\n   */;\n  _proto.eventNames = function eventNames() {\n    if (this._evtCount === 0) return [];\n    return Object.keys(this._evts);\n  }\n\n  /**\n   * Returns the number of listeners with the specified event name.\n   * @param event - Event name\n   * @returns The count of listeners\n   */;\n  _proto.listenerCount = function listenerCount(event) {\n    var listeners = this._evts[event];\n    if (!listeners) return 0;\n    if (listeners.fn) return 1;\n    return listeners.length;\n  }\n\n  /**\n   * Dispatch the event with the specified event name.\n   * @param event - Event name\n   * @param data - Data\n   * @returns - Whether the dispatching is successful\n   */;\n  _proto.dispatch = function dispatch(event, data) {\n    if (!this._evts[event]) {\n      return false;\n    }\n    var listeners = this._evts[event];\n    if (listeners.fn) {\n      if (listeners.once) this.removeEventListener(event, listeners.fn);\n      listeners.fn(data);\n    } else {\n      var l = listeners.length;\n      for (var i = 0; i < l; i++) {\n        if (listeners[i].once) this.removeEventListener(event, listeners[i].fn);\n        listeners[i].fn(data);\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Add a listener/\n   * @param event - Event name\n   * @param fn - Function\n   * @returns This\n   */;\n  _proto.on = function on(event, fn) {\n    return this.addEventListener(event, fn);\n  }\n\n  /**\n   * Add a one-time listener.\n   * @param event - Event name\n   * @param fn - Function\n   * @returns This\n   */;\n  _proto.once = function once(event, fn) {\n    return this.addEventListener(event, fn, true);\n  }\n\n  /**\n   * @deprecated Use `on/once` instead.\n   * Add a listener function with the specified event name.\n   * @param event - Event name\n   * @param fn - Function\n   * @param once - Is it a one-time listener\n   * @returns this\n   */;\n  _proto.addEventListener = function addEventListener(event, fn, once) {\n    var listener = {\n      fn: fn,\n      once: once\n    };\n    var events = this._evts;\n    if (!events[event]) {\n      events[event] = listener;\n      this._evtCount++;\n    } else if (!events[event].fn) {\n      events[event].push(listener);\n    } else {\n      events[event] = [events[event], listener];\n    }\n    return this;\n  }\n\n  /**\n   * Remove the event listener(s) of the specified event name.\n   * @param event - Event name\n   * @param fn - Function, If is undefined, delete all corresponding event listeners.\n   */;\n  _proto.off = function off(event, fn) {\n    if (!this._evts[event]) return this;\n    if (!fn) {\n      this._clearEvent(event);\n      return this;\n    }\n    var listeners = this._evts[event];\n    if (listeners.fn && listeners.fn === fn) {\n      this._clearEvent(event);\n    } else {\n      var index = listeners.indexOf(fn);\n      if (index > -1) {\n        var temp = listeners[listeners.length - 1];\n        listeners[index] = temp;\n        listeners.length--;\n        if (listeners.length === 1) {\n          this._evts[event] = listeners[0];\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   * @deprecated Use `off` instead.\n   * Remove the event listener(s) of the specified event name.\n   * @param event - Event name\n   * @param fn - Function, If is undefined, delete all corresponding event listeners.\n   */;\n  _proto.removeEventListener = function removeEventListener(event, fn) {\n    return this.off(event, fn);\n  }\n\n  /**\n   * Remove all event listeners.\n   * @param event - Event name, delete all events if not passed\n   */;\n  _proto.removeAllEventListeners = function removeAllEventListeners(event) {\n    if (event) {\n      if (this._evts[event]) this._clearEvent(event);\n    } else {\n      this._evts = Object.create(null);\n      this._evtCount = 0;\n    }\n  }\n\n  /**\n   * @deprecated Use `dispatch` instead.\n   */;\n  _proto.trigger = function trigger(e) {\n    this.dispatch(e.type, e.data);\n  };\n  _proto._clearEvent = function _clearEvent(event) {\n    if (--this._evtCount === 0) {\n      this._evts = Object.create(null);\n    } else {\n      delete this._evts[event];\n    }\n  };\n  return EventDispatcher;\n}(), (_descriptor$d = _applyDecoratedDescriptor(_class$g.prototype, \"_evts\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return Object.create(null);\n  }\n})), _class$g);\n\n/**\n * @class\n * @private\n */\n/* tslint:disable */\nvar noop = function noop(message) {};\nvar debug = console.log.bind(console);\nvar info = console.info.bind(console);\nvar warn = console.warn.bind(console);\nvar error = console.error.bind(console);\nvar Logger = {\n  debug: noop,\n  info: noop,\n  warn: noop,\n  error: noop,\n  isEnabled: false,\n  /** Turn on log */enable: function enable() {\n    this.debug = debug;\n    this.info = info;\n    this.warn = warn;\n    this.error = error;\n    this.isEnabled = true;\n  },\n  /** Turn off log */disable: function disable() {\n    this.debug = noop;\n    this.info = noop;\n    this.warn = noop;\n    this.error = noop;\n    this.isEnabled = false;\n  }\n};\n\n/**\n * Tools for calculating the time per frame.\n */\nvar Time = /*#__PURE__*/function () {\n  /**\n   * Constructor of the Time.\n   */\n  function Time() {\n    this._clock = void 0;\n    this._timeScale = void 0;\n    this._deltaTime = void 0;\n    this._startTime = void 0;\n    this._lastTickTime = void 0;\n    this._clock = performance ? performance : Date;\n    this._timeScale = 1.0;\n    this._deltaTime = 0.0001;\n    var now = this._clock.now();\n    this._startTime = now;\n    this._lastTickTime = now;\n  }\n  var _proto = Time.prototype;\n  _proto.reset = function reset() {\n    this._lastTickTime = this._clock.now();\n  }\n\n  /**\n   * Current Time\n   */;\n  /**\n   * Call every frame, update delta time and other data.\n   */\n  _proto.tick = function tick() {\n    var now = this.nowTime;\n    this._deltaTime = (now - this._lastTickTime) * this._timeScale;\n    this._lastTickTime = now;\n  };\n  _createClass(Time, [{\n    key: \"nowTime\",\n    get: function get() {\n      return this._clock.now();\n    }\n\n    /**\n     * Time between two ticks\n     */\n  }, {\n    key: \"deltaTime\",\n    get: function get() {\n      return this._deltaTime;\n    }\n\n    /**\n     * Scaled delta time.\n     */\n  }, {\n    key: \"timeScale\",\n    get: function get() {\n      return this._timeScale;\n    },\n    set: function set(s) {\n      this._timeScale = s;\n    }\n\n    /**\n     * Unscaled delta time.\n     */\n  }, {\n    key: \"unscaledDeltaTime\",\n    get: function get() {\n      return this._deltaTime / this._timeScale;\n    }\n\n    /**\n     * The elapsed time, after the clock is initialized.\n     */\n  }, {\n    key: \"timeSinceStartup\",\n    get: function get() {\n      return this.nowTime - this._startTime;\n    }\n  }]);\n  return Time;\n}();\n\nvar _class$f, _descriptor$c, _descriptor2$b, _class2$c;\n/**\n * EngineObject.\n */\nvar EngineObject = (_class$f = (_class2$c = /*#__PURE__*/function () {\n  function EngineObject(engine) {\n    _initializerDefineProperty(this, \"instanceId\", _descriptor$c, this);\n    _initializerDefineProperty(this, \"_engine\", _descriptor2$b, this);\n    this._destroyed = false;\n    this._engine = engine;\n  }\n\n  /**\n   * Destroy self.\n   */\n  var _proto = EngineObject.prototype;\n  _proto.destroy = function destroy() {\n    var _this$_engine$resourc;\n    if (this._destroyed) return;\n    (_this$_engine$resourc = this._engine.resourceManager) === null || _this$_engine$resourc === void 0 ? void 0 : _this$_engine$resourc._deleteAsset(this);\n    this._destroyed = true;\n  };\n  _createClass(EngineObject, [{\n    key: \"engine\",\n    get: /** Engine unique id. */\n\n    /**\n     * Get the engine which the object belongs.\n     */\n    function get() {\n      return this._engine;\n    }\n\n    /**\n     * Whether it has been destroyed.\n     */\n  }, {\n    key: \"destroyed\",\n    get: function get() {\n      return this._destroyed;\n    }\n  }]);\n  return EngineObject;\n}(), _class2$c._instanceIdCounter = 0, _class2$c), (_descriptor$c = _applyDecoratedDescriptor(_class$f.prototype, \"instanceId\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return ++EngineObject._instanceIdCounter;\n  }\n}), _descriptor2$b = _applyDecoratedDescriptor(_class$f.prototype, \"_engine\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class$f);\n\n/**\n * Data type enumeration\n */\nvar DataType;\n\n/**\n * GL Capabilities\n * Some capabilities can be smoothed out by extension, and some capabilities must use WebGL 2.0.\n * */\n(function (DataType) {\n  DataType[DataType[\"FLOAT\"] = 5126] = \"FLOAT\";\n  DataType[DataType[\"FLOAT_VEC2\"] = 35664] = \"FLOAT_VEC2\";\n  DataType[DataType[\"FLOAT_VEC3\"] = 35665] = \"FLOAT_VEC3\";\n  DataType[DataType[\"FLOAT_VEC4\"] = 35666] = \"FLOAT_VEC4\";\n  DataType[DataType[\"INT\"] = 5124] = \"INT\";\n  DataType[DataType[\"INT_VEC2\"] = 35667] = \"INT_VEC2\";\n  DataType[DataType[\"INT_VEC3\"] = 35668] = \"INT_VEC3\";\n  DataType[DataType[\"INT_VEC4\"] = 35669] = \"INT_VEC4\";\n  DataType[DataType[\"BOOL\"] = 35670] = \"BOOL\";\n  DataType[DataType[\"BOOL_VEC2\"] = 35671] = \"BOOL_VEC2\";\n  DataType[DataType[\"BOOL_VEC3\"] = 35672] = \"BOOL_VEC3\";\n  DataType[DataType[\"BOOL_VEC4\"] = 35673] = \"BOOL_VEC4\";\n  DataType[DataType[\"FLOAT_MAT2\"] = 35674] = \"FLOAT_MAT2\";\n  DataType[DataType[\"FLOAT_MAT3\"] = 35675] = \"FLOAT_MAT3\";\n  DataType[DataType[\"FLOAT_MAT4\"] = 35676] = \"FLOAT_MAT4\";\n  DataType[DataType[\"FLOAT_ARRAY\"] = 35677] = \"FLOAT_ARRAY\";\n  DataType[DataType[\"FLOAT_VEC2_ARRAY\"] = 100000] = \"FLOAT_VEC2_ARRAY\";\n  DataType[DataType[\"FLOAT_VEC3_ARRAY\"] = 100001] = \"FLOAT_VEC3_ARRAY\";\n  DataType[DataType[\"FLOAT_VEC4_ARRAY\"] = 100002] = \"FLOAT_VEC4_ARRAY\";\n  DataType[DataType[\"INT_ARRAY\"] = 100003] = \"INT_ARRAY\";\n  DataType[DataType[\"INT_VEC2_ARRAY\"] = 100004] = \"INT_VEC2_ARRAY\";\n  DataType[DataType[\"INT_VEC3_ARRAY\"] = 100005] = \"INT_VEC3_ARRAY\";\n  DataType[DataType[\"INT_VEC4_ARRAY\"] = 100006] = \"INT_VEC4_ARRAY\";\n  DataType[DataType[\"FLOAT_MAT2_ARRAY\"] = 100007] = \"FLOAT_MAT2_ARRAY\";\n  DataType[DataType[\"FLOAT_MAT3_ARRAY\"] = 100008] = \"FLOAT_MAT3_ARRAY\";\n  DataType[DataType[\"FLOAT_MAT4_ARRAY\"] = 100009] = \"FLOAT_MAT4_ARRAY\";\n  DataType[DataType[\"SAMPLER_2D_ARRAY\"] = 100010] = \"SAMPLER_2D_ARRAY\";\n  DataType[DataType[\"SAMPLER_CUBE_ARRAY\"] = 100011] = \"SAMPLER_CUBE_ARRAY\";\n  DataType[DataType[\"SAMPLER_2D\"] = 35678] = \"SAMPLER_2D\";\n  DataType[DataType[\"SAMPLER_CUBE\"] = 35680] = \"SAMPLER_CUBE\";\n  DataType[DataType[\"BYTE\"] = 5120] = \"BYTE\";\n  DataType[DataType[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n  DataType[DataType[\"SHORT\"] = 5122] = \"SHORT\";\n  DataType[DataType[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n  DataType[DataType[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n})(DataType || (DataType = {}));\nvar GLCapabilityType;\n(function (GLCapabilityType) {\n  GLCapabilityType[\"shaderVertexID\"] = \"shaderVertexID\";\n  GLCapabilityType[\"standardDerivatives\"] = \"OES_standard_derivatives\";\n  GLCapabilityType[\"shaderTextureLod\"] = \"EXT_shader_texture_lod\";\n  GLCapabilityType[\"elementIndexUint\"] = \"OES_element_index_uint\";\n  GLCapabilityType[\"depthTexture\"] = \"WEBGL_depth_texture\";\n  GLCapabilityType[\"drawBuffers\"] = \"WEBGL_draw_buffers\";\n  GLCapabilityType[\"vertexArrayObject\"] = \"OES_vertex_array_object\";\n  GLCapabilityType[\"instancedArrays\"] = \"ANGLE_instanced_arrays\";\n  GLCapabilityType[\"multipleSample\"] = \"multipleSampleOnlySupportedInWebGL2\";\n  GLCapabilityType[\"textureFloat\"] = \"OES_texture_float\";\n  GLCapabilityType[\"textureFloatLinear\"] = \"OES_texture_float_linear\";\n  GLCapabilityType[\"textureHalfFloat\"] = \"OES_texture_half_float\";\n  GLCapabilityType[\"textureHalfFloatLinear\"] = \"OES_texture_half_float_linear\";\n  GLCapabilityType[\"WEBGL_colorBufferFloat\"] = \"WEBGL_color_buffer_float\";\n  GLCapabilityType[\"colorBufferFloat\"] = \"EXT_color_buffer_float\";\n  GLCapabilityType[\"colorBufferHalfFloat\"] = \"EXT_color_buffer_half_float\";\n  GLCapabilityType[\"textureFilterAnisotropic\"] = \"EXT_texture_filter_anisotropic\";\n  GLCapabilityType[\"blendMinMax\"] = \"EXT_blend_minmax\";\n  GLCapabilityType[\"astc\"] = \"WEBGL_compressed_texture_astc\";\n  GLCapabilityType[\"astc_webkit\"] = \"WEBKIT_WEBGL_compressed_texture_astc\";\n  GLCapabilityType[\"etc\"] = \"WEBGL_compressed_texture_etc\";\n  GLCapabilityType[\"etc_webkit\"] = \"WEBKIT_WEBGL_compressed_texture_etc\";\n  GLCapabilityType[\"etc1\"] = \"WEBGL_compressed_texture_etc1\";\n  GLCapabilityType[\"etc1_webkit\"] = \"WEBKIT_WEBGL_compressed_texture_etc1\";\n  GLCapabilityType[\"pvrtc\"] = \"WEBGL_compressed_texture_pvrtc\";\n  GLCapabilityType[\"pvrtc_webkit\"] = \"WEBKIT_WEBGL_compressed_texture_pvrtc\";\n  GLCapabilityType[\"s3tc\"] = \"WEBGL_compressed_texture_s3tc\";\n  GLCapabilityType[\"s3tc_webkit\"] = \"WEBKIT_WEBGL_compressed_texture_s3tc\";\n})(GLCapabilityType || (GLCapabilityType = {}));\n\n/**\n * High-performance unordered array, delete uses exchange method to improve performance, internal capacity only increases.\n */\nvar DisorderedArray = /*#__PURE__*/function () {\n  function DisorderedArray(count) {\n    if (count === void 0) {\n      count = 0;\n    }\n    this._elements = void 0;\n    this.length = 0;\n    this._elements = new Array(count);\n  }\n  var _proto = DisorderedArray.prototype;\n  _proto.add = function add(element) {\n    if (this.length === this._elements.length) this._elements.push(element);else this._elements[this.length] = element;\n    this.length++;\n  };\n  _proto.delete = function _delete(element) {\n    //TODO: It can be optimized for custom binary search and other algorithms, currently this._elements>=this.length wastes performance.\n    var index = this._elements.indexOf(element);\n    this.deleteByIndex(index);\n  };\n  _proto.get = function get(index) {\n    if (index >= this.length) {\n      throw \"Index is out of range.\";\n    }\n    return this._elements[index];\n  }\n\n  /**\n   *\n   * @param index\n   * @returns The replaced item is used to reset its index.\n   */;\n  _proto.deleteByIndex = function deleteByIndex(index) {\n    var elements = this._elements;\n    var end = null;\n    var lastIndex = this.length - 1;\n    if (index !== lastIndex) {\n      end = elements[lastIndex];\n      elements[index] = end;\n    }\n    this.length--;\n    return end;\n  };\n  _proto.garbageCollection = function garbageCollection() {\n    this._elements.length = this.length;\n  };\n  return DisorderedArray;\n}();\n\n/**\n * Shader macro collection.\n * @internal\n */\nvar ShaderMacroCollection = /*#__PURE__*/function () {\n  function ShaderMacroCollection() {\n    this._mask = [];\n    this._length = 0;\n  }\n  /**\n   * Union of two macro collection.\n   * @param left - input macro collection\n   * @param right - input macro collection\n   * @param out - union output macro collection\n   */\n  ShaderMacroCollection.unionCollection = function unionCollection(left, right, out) {\n    var outMask = out._mask;\n    var minSize, maxSize;\n    var minMask, maxMask;\n    if (left._length < right._length) {\n      minSize = left._length;\n      maxSize = right._length;\n      minMask = left._mask;\n      maxMask = right._mask;\n    } else {\n      minSize = right._length;\n      maxSize = left._length;\n      minMask = right._mask;\n      maxMask = left._mask;\n    }\n    var i = 0;\n    outMask.length < maxSize && (outMask.length = maxSize);\n    for (; i < minSize; i++) {\n      outMask[i] = minMask[i] | maxMask[i];\n    }\n    for (; i < maxSize; i++) {\n      outMask[i] = maxMask[i];\n    }\n    out._length = maxSize;\n  }\n\n  /** @internal */;\n  var _proto = ShaderMacroCollection.prototype;\n  /**\n   * Enable one macro in this macro collection.\n   * @param macro - ShaderMacro\n   */\n  _proto.enable = function enable(macro) {\n    var index = macro._maskIndex;\n    var size = index + 1;\n    var mask = this._mask;\n    var maskStart = this._length; // must from this._length because this._length maybe less than mask.length and have dirty data should clear.\n    if (maskStart < size) {\n      mask.length < size && (mask.length = size); // mask.length maybe small than size,maybe not.\n      for (; maskStart < index; maskStart++) {\n        mask[maskStart] = 0;\n      }\n      mask[index] = macro._maskValue;\n      this._length = size;\n    } else {\n      mask[index] |= macro._maskValue;\n    }\n  }\n\n  /**\n   * Disable one macro in this macro collection.\n   * @param macro - ShaderMacro\n   */;\n  _proto.disable = function disable(macro) {\n    var index = macro._maskIndex;\n    var mask = this._mask;\n    var endIndex = this._length - 1;\n    if (index > endIndex) {\n      return;\n    }\n    var newValue = mask[index] & ~macro._maskValue;\n    if (index == endIndex && newValue === 0) {\n      this._length--;\n    } else {\n      mask[index] = newValue;\n    }\n  }\n\n  /**\n   * Union of this and other macro collection.\n   * @param macroCollection - macro collection\n   */;\n  _proto.unionCollection = function unionCollection(macroCollection) {\n    var addMask = macroCollection._mask;\n    var addSize = macroCollection._length;\n    var mask = this._mask;\n    var maskSize = this._length;\n    if (maskSize < addSize) {\n      mask.length < addSize && (mask.length = addSize);\n      var i = 0;\n      for (; i < maskSize; i++) {\n        mask[i] |= addMask[i];\n      }\n      for (; i < addSize; i++) {\n        mask[i] = addMask[i];\n      }\n      this._length = addSize;\n    } else {\n      for (var _i = 0; _i < addSize; _i++) {\n        mask[_i] |= addMask[_i];\n      }\n    }\n  }\n\n  /**\n   * Complementarity of this and other macro collection.\n   * @param macroCollection - macro collection\n   */;\n  _proto.complementaryCollection = function complementaryCollection(macroCollection) {\n    var removeMask = macroCollection._mask;\n    var mask = this._mask;\n    var endIndex = this._length - 1;\n    var i = Math.min(macroCollection._length - 1, endIndex);\n    for (; i >= 0; i--) {\n      var newValue = mask[i] & ~removeMask[i];\n      if (i == endIndex && newValue === 0) {\n        endIndex--;\n        this._length--;\n      } else {\n        mask[i] = newValue;\n      }\n    }\n  }\n\n  /**\n   * Intersection of this and other macro collection.\n   * @param macroCollection - macro collection\n   */;\n  _proto.intersectionCollection = function intersectionCollection(macroCollection) {\n    var unionMask = macroCollection._mask;\n    var mask = this._mask;\n    for (var i = this._length - 1; i >= 0; i--) {\n      var value = mask[i] & unionMask[i];\n      if (value == 0 && i == this._length - 1) {\n        this._length--;\n      } else {\n        mask[i] = value;\n      }\n    }\n  }\n\n  /**\n   * Whether macro is enabled in this macro collection.\n   * @param macro - ShaderMacro\n   */;\n  _proto.isEnable = function isEnable(macro) {\n    var index = macro._maskIndex;\n    if (index >= this._length) {\n      return false;\n    }\n    return (this._mask[index] & macro._maskValue) !== 0;\n  }\n\n  /**\n   * Clear this macro collection.\n   */;\n  _proto.clear = function clear() {\n    this._length = 0;\n  };\n  return ShaderMacroCollection;\n}();\n\n/**\n * The manager of the components.\n */\nvar ComponentsManager = /*#__PURE__*/function () {\n  function ComponentsManager() {\n    this._onStartScripts = new DisorderedArray();\n    this._onUpdateScripts = new DisorderedArray();\n    this._onLateUpdateScripts = new DisorderedArray();\n    this._onPhysicsUpdateScripts = new DisorderedArray();\n    this._disableScripts = [];\n    this._destroyScripts = [];\n    this._onUpdateAnimations = new DisorderedArray();\n    this._renderers = new DisorderedArray();\n    this._onUpdateRenderers = new DisorderedArray();\n    this._componentsContainerPool = [];\n  }\n  var _proto = ComponentsManager.prototype;\n  _proto.addRenderer = function addRenderer(renderer) {\n    renderer._rendererIndex = this._renderers.length;\n    this._renderers.add(renderer);\n  };\n  _proto.removeRenderer = function removeRenderer(renderer) {\n    var replaced = this._renderers.deleteByIndex(renderer._rendererIndex);\n    replaced && (replaced._rendererIndex = renderer._rendererIndex);\n    renderer._rendererIndex = -1;\n  };\n  _proto.addOnStartScript = function addOnStartScript(script) {\n    script._onStartIndex = this._onStartScripts.length;\n    this._onStartScripts.add(script);\n  };\n  _proto.removeOnStartScript = function removeOnStartScript(script) {\n    var replaced = this._onStartScripts.deleteByIndex(script._onStartIndex);\n    replaced && (replaced._onStartIndex = script._onStartIndex);\n    script._onStartIndex = -1;\n  };\n  _proto.addOnUpdateScript = function addOnUpdateScript(script) {\n    script._onUpdateIndex = this._onUpdateScripts.length;\n    this._onUpdateScripts.add(script);\n  };\n  _proto.removeOnUpdateScript = function removeOnUpdateScript(script) {\n    var replaced = this._onUpdateScripts.deleteByIndex(script._onUpdateIndex);\n    replaced && (replaced._onUpdateIndex = script._onUpdateIndex);\n    script._onUpdateIndex = -1;\n  };\n  _proto.addOnLateUpdateScript = function addOnLateUpdateScript(script) {\n    script._onLateUpdateIndex = this._onLateUpdateScripts.length;\n    this._onLateUpdateScripts.add(script);\n  };\n  _proto.removeOnLateUpdateScript = function removeOnLateUpdateScript(script) {\n    var replaced = this._onLateUpdateScripts.deleteByIndex(script._onLateUpdateIndex);\n    replaced && (replaced._onLateUpdateIndex = script._onLateUpdateIndex);\n    script._onLateUpdateIndex = -1;\n  };\n  _proto.addOnPhysicsUpdateScript = function addOnPhysicsUpdateScript(script) {\n    script._onPhysicsUpdateIndex = this._onPhysicsUpdateScripts.length;\n    this._onPhysicsUpdateScripts.add(script);\n  };\n  _proto.removeOnPhysicsUpdateScript = function removeOnPhysicsUpdateScript(script) {\n    var replaced = this._onPhysicsUpdateScripts.deleteByIndex(script._onPhysicsUpdateIndex);\n    replaced && (replaced._onPhysicsUpdateIndex = script._onPhysicsUpdateIndex);\n    script._onPhysicsUpdateIndex = -1;\n  };\n  _proto.addOnUpdateAnimations = function addOnUpdateAnimations(animation) {\n    //@ts-ignore\n    animation._onUpdateIndex = this._onUpdateAnimations.length;\n    this._onUpdateAnimations.add(animation);\n  };\n  _proto.removeOnUpdateAnimations = function removeOnUpdateAnimations(animation) {\n    //@ts-ignore\n    var replaced = this._onUpdateAnimations.deleteByIndex(animation._onUpdateIndex);\n    //@ts-ignore\n    replaced && (replaced._onUpdateIndex = animation._onUpdateIndex);\n    //@ts-ignore\n    animation._onUpdateIndex = -1;\n  };\n  _proto.addOnUpdateRenderers = function addOnUpdateRenderers(renderer) {\n    renderer._onUpdateIndex = this._onUpdateRenderers.length;\n    this._onUpdateRenderers.add(renderer);\n  };\n  _proto.removeOnUpdateRenderers = function removeOnUpdateRenderers(renderer) {\n    var replaced = this._onUpdateRenderers.deleteByIndex(renderer._onUpdateIndex);\n    replaced && (replaced._onUpdateIndex = renderer._onUpdateIndex);\n    renderer._onUpdateIndex = -1;\n  };\n  _proto.addDisableScript = function addDisableScript(component) {\n    this._disableScripts.push(component);\n  };\n  _proto.addDestroyScript = function addDestroyScript(component) {\n    this._destroyScripts.push(component);\n  };\n  _proto.callScriptOnStart = function callScriptOnStart() {\n    var onStartScripts = this._onStartScripts;\n    if (onStartScripts.length > 0) {\n      var elements = onStartScripts._elements;\n      // The 'onStartScripts.length' maybe add if you add some Script with addComponent() in some Script's onStart()\n      for (var i = 0; i < onStartScripts.length; i++) {\n        var script = elements[i];\n        if (!script._waitHandlingInValid) {\n          script._started = true;\n          script._onStartIndex = -1;\n          script.onStart();\n        }\n      }\n      onStartScripts.length = 0;\n    }\n  };\n  _proto.callScriptOnUpdate = function callScriptOnUpdate(deltaTime) {\n    var elements = this._onUpdateScripts._elements;\n    for (var i = this._onUpdateScripts.length - 1; i >= 0; --i) {\n      var element = elements[i];\n      if (!element._waitHandlingInValid && element._started) {\n        element.onUpdate(deltaTime);\n      }\n    }\n  };\n  _proto.callScriptOnLateUpdate = function callScriptOnLateUpdate(deltaTime) {\n    var elements = this._onLateUpdateScripts._elements;\n    for (var i = this._onLateUpdateScripts.length - 1; i >= 0; --i) {\n      var element = elements[i];\n      if (!element._waitHandlingInValid && element._started) {\n        element.onLateUpdate(deltaTime);\n      }\n    }\n  };\n  _proto.callScriptOnPhysicsUpdate = function callScriptOnPhysicsUpdate() {\n    var elements = this._onPhysicsUpdateScripts._elements;\n    for (var i = this._onPhysicsUpdateScripts.length - 1; i >= 0; --i) {\n      var element = elements[i];\n      if (!element._waitHandlingInValid && element._started) {\n        element.onPhysicsUpdate();\n      }\n    }\n  };\n  _proto.callAnimationUpdate = function callAnimationUpdate(deltaTime) {\n    var elements = this._onUpdateAnimations._elements;\n    for (var i = this._onUpdateAnimations.length - 1; i >= 0; --i) {\n      //@ts-ignore\n      elements[i].update(deltaTime);\n    }\n  };\n  _proto.callRendererOnUpdate = function callRendererOnUpdate(deltaTime) {\n    var elements = this._onUpdateRenderers._elements;\n    for (var i = this._onUpdateRenderers.length - 1; i >= 0; --i) {\n      elements[i].update(deltaTime);\n    }\n  };\n  _proto.callRender = function callRender(context) {\n    var camera = context._camera;\n    var elements = this._renderers._elements;\n    for (var i = this._renderers.length - 1; i >= 0; --i) {\n      var element = elements[i];\n\n      // filter by camera culling mask.\n      if (!(camera.cullingMask & element._entity.layer)) {\n        continue;\n      }\n\n      // filter by camera frustum.\n      if (camera.enableFrustumCulling) {\n        element.isCulled = !camera._frustum.intersectsBox(element.bounds);\n        if (element.isCulled) {\n          continue;\n        }\n      }\n      var transform = camera.entity.transform;\n      var position = transform.worldPosition;\n      var center = element.bounds.getCenter(ComponentsManager._tempVector0);\n      if (camera.isOrthographic) {\n        var forward = transform.getWorldForward(ComponentsManager._tempVector1);\n        Vector3.subtract(center, position, center);\n        element._distanceForSort = Vector3.dot(center, forward);\n      } else {\n        element._distanceForSort = Vector3.distanceSquared(center, position);\n      }\n      element._updateShaderData(context);\n      element._render(camera);\n\n      // union camera global macro and renderer macro.\n      ShaderMacroCollection.unionCollection(camera._globalShaderMacro, element.shaderData._macroCollection, element._globalShaderMacro);\n    }\n  };\n  _proto.handlingInvalidScripts = function handlingInvalidScripts() {\n    var disableScripts = this._disableScripts,\n      destroyScripts = this._destroyScripts;\n    var length = disableScripts.length;\n    if (length > 0) {\n      for (var i = length - 1; i >= 0; i--) {\n        var disableScript = disableScripts[i];\n        disableScript._waitHandlingInValid && disableScript._handlingInValid();\n      }\n      disableScripts.length = 0;\n    }\n    length = destroyScripts.length;\n    if (length > 0) {\n      for (var _i = length - 1; _i >= 0; _i--) {\n        destroyScripts[_i].onDestroy();\n      }\n      destroyScripts.length = 0;\n    }\n  };\n  _proto.callCameraOnBeginRender = function callCameraOnBeginRender(camera) {\n    var scripts = camera.entity._scripts;\n    for (var i = scripts.length - 1; i >= 0; --i) {\n      var script = scripts.get(i);\n      script._waitHandlingInValid || script.onBeginRender(camera);\n    }\n  };\n  _proto.callCameraOnEndRender = function callCameraOnEndRender(camera) {\n    var scripts = camera.entity._scripts;\n    for (var i = scripts.length - 1; i >= 0; --i) {\n      var script = scripts.get(i);\n      script._waitHandlingInValid || script.onEndRender(camera);\n    }\n  };\n  _proto.getActiveChangedTempList = function getActiveChangedTempList() {\n    return this._componentsContainerPool.length ? this._componentsContainerPool.pop() : [];\n  };\n  _proto.putActiveChangedTempList = function putActiveChangedTempList(componentContainer) {\n    componentContainer.length = 0;\n    this._componentsContainerPool.push(componentContainer);\n  };\n  return ComponentsManager;\n}();\nComponentsManager._tempVector0 = new Vector3();\nComponentsManager._tempVector1 = new Vector3();\n\n/**\n * Custom clone interface.\n */\n\nvar ComponentCloner = /*#__PURE__*/function () {\n  function ComponentCloner() {}\n  /**\n   * Clone component.\n   * @param source - Clone source\n   * @param target - Clone target\n   */\n  ComponentCloner.cloneComponent = function cloneComponent(source, target) {\n    var cloneModes = CloneManager.getCloneMode(source.constructor);\n    var keys = Object.keys(source);\n    for (var i = 0, n = keys.length; i < n; i++) {\n      var k = keys[i];\n      var cloneMode = cloneModes[k];\n      switch (cloneMode) {\n        case undefined:\n        case CloneMode.Assignment:\n          target[k] = source[k];\n          break;\n        case CloneMode.Shallow:\n          var sourcePropS = source[k];\n          if (sourcePropS instanceof Object) {\n            var tarProp = target[k];\n            tarProp == null && (tarProp = target[k] = sourcePropS.constructor());\n            _extends(tarProp, sourcePropS);\n          } else {\n            // Null or undefined and primitive type.\n            target[k] = sourcePropS;\n          }\n          break;\n        case CloneMode.Deep:\n          var sourcePropD = source[k];\n          if (sourcePropD instanceof Object) {\n            var _tarProp = target[k];\n            _tarProp == null && (_tarProp = target[k] = sourcePropD.constructor());\n            CloneManager.deepCloneObject(sourcePropD, _tarProp);\n          } else {\n            // Null or undefined and primitive type.\n            target[k] = sourcePropD;\n          }\n          break;\n      }\n    }\n    if (source._cloneTo) {\n      source._cloneTo(target);\n    }\n  };\n  return ComponentCloner;\n}();\n\n/**\n * Used for component dependency registration.\n */\nvar ComponentsDependencies = /*#__PURE__*/function () {\n  /**\n   * @internal\n   */\n  /**\n   * @internal\n   */\n  ComponentsDependencies._register = function _register(currentComponent, dependentComponent) {\n    this._addDependency(currentComponent, dependentComponent, this._dependenciesMap);\n    this._addDependency(dependentComponent, currentComponent, this._invDependenciesMap);\n  }\n\n  /**\n   * @internal\n   */;\n  ComponentsDependencies._addCheck = function _addCheck(entity, type) {\n    // Check if there are dependent components.\n    var dependentComponents = ComponentsDependencies._dependenciesMap.get(type);\n    if (dependentComponents) {\n      for (var i = 0, n = dependentComponents.length; i < n; i++) {\n        var dependentComponent = dependentComponents[i];\n        if (!entity.getComponent(dependentComponent)) {\n          entity.addComponent(dependentComponent);\n        }\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  ComponentsDependencies._removeCheck = function _removeCheck(entity, type) {\n    var invDependencies = ComponentsDependencies._invDependenciesMap.get(type);\n    if (invDependencies) {\n      for (var i = 0, len = invDependencies.length; i < len; i++) {\n        if (entity.getComponent(invDependencies[i])) {\n          throw \"you should remove \" + invDependencies[i] + \" before adding \" + type;\n        }\n      }\n    }\n  };\n  ComponentsDependencies._addDependency = function _addDependency(currentComponent, dependentComponent, map) {\n    var components = map.get(currentComponent);\n    if (!components) {\n      components = [];\n      map.set(currentComponent, components);\n    }\n    if (components.indexOf(dependentComponent) === -1) {\n      components.push(dependentComponent);\n    }\n  };\n  function ComponentsDependencies() {}\n  return ComponentsDependencies;\n}();\n\n/**\n * Dependent components, automatically added if they do not exist.\n * @param components -  Dependent components\n */\nComponentsDependencies._dependenciesMap = new Map();\nComponentsDependencies._invDependenciesMap = new Map();\nfunction dependentComponents() {\n  for (var _len = arguments.length, components = new Array(_len), _key = 0; _key < _len; _key++) {\n    components[_key] = arguments[_key];\n  }\n  return function (target) {\n    components.forEach(function (component) {\n      return ComponentsDependencies._register(target, component);\n    });\n  };\n}\n\n/**\n * Layer, used for bit operations.\n */\nvar Layer;\n(function (Layer) {\n  Layer[Layer[\"Layer0\"] = 1] = \"Layer0\";\n  Layer[Layer[\"Layer1\"] = 2] = \"Layer1\";\n  Layer[Layer[\"Layer2\"] = 4] = \"Layer2\";\n  Layer[Layer[\"Layer3\"] = 8] = \"Layer3\";\n  Layer[Layer[\"Layer4\"] = 16] = \"Layer4\";\n  Layer[Layer[\"Layer5\"] = 32] = \"Layer5\";\n  Layer[Layer[\"Layer6\"] = 64] = \"Layer6\";\n  Layer[Layer[\"Layer7\"] = 128] = \"Layer7\";\n  Layer[Layer[\"Layer8\"] = 256] = \"Layer8\";\n  Layer[Layer[\"Layer9\"] = 512] = \"Layer9\";\n  Layer[Layer[\"Layer10\"] = 1024] = \"Layer10\";\n  Layer[Layer[\"Layer11\"] = 2048] = \"Layer11\";\n  Layer[Layer[\"Layer12\"] = 4096] = \"Layer12\";\n  Layer[Layer[\"Layer13\"] = 8192] = \"Layer13\";\n  Layer[Layer[\"Layer14\"] = 16384] = \"Layer14\";\n  Layer[Layer[\"Layer15\"] = 32768] = \"Layer15\";\n  Layer[Layer[\"Layer16\"] = 65536] = \"Layer16\";\n  Layer[Layer[\"Layer17\"] = 131072] = \"Layer17\";\n  Layer[Layer[\"Layer18\"] = 262144] = \"Layer18\";\n  Layer[Layer[\"Layer19\"] = 524288] = \"Layer19\";\n  Layer[Layer[\"Layer20\"] = 1048576] = \"Layer20\";\n  Layer[Layer[\"Layer21\"] = 2097152] = \"Layer21\";\n  Layer[Layer[\"Layer22\"] = 4194304] = \"Layer22\";\n  Layer[Layer[\"Layer23\"] = 8388608] = \"Layer23\";\n  Layer[Layer[\"Layer24\"] = 16777216] = \"Layer24\";\n  Layer[Layer[\"Layer25\"] = 33554432] = \"Layer25\";\n  Layer[Layer[\"Layer26\"] = 67108864] = \"Layer26\";\n  Layer[Layer[\"Layer27\"] = 134217728] = \"Layer27\";\n  Layer[Layer[\"Layer28\"] = 268435456] = \"Layer28\";\n  Layer[Layer[\"Layer29\"] = 536870912] = \"Layer29\";\n  Layer[Layer[\"Layer30\"] = 1073741824] = \"Layer30\";\n  Layer[Layer[\"Layer31\"] = 2147483648] = \"Layer31\";\n  Layer[Layer[\"Everything\"] = 4294967295] = \"Everything\";\n  Layer[Layer[\"Nothing\"] = 0] = \"Nothing\";\n})(Layer || (Layer = {}));\n\n/**\n * Used to update tags.\n */\nvar UpdateFlag = /*#__PURE__*/function () {\n  function UpdateFlag() {\n    this._flagManagers = [];\n  }\n  var _proto = UpdateFlag.prototype;\n  /**\n   * Clear.\n   */\n  _proto.clearFromManagers = function clearFromManagers() {\n    this._removeFromManagers();\n    this._flagManagers.length = 0;\n  }\n\n  /**\n   * Destroy.\n   */;\n  _proto.destroy = function destroy() {\n    this._removeFromManagers();\n    this._flagManagers = null;\n  };\n  _proto._removeFromManagers = function _removeFromManagers() {\n    var flagManagers = this._flagManagers;\n    for (var i = 0, n = flagManagers.length; i < n; i++) {\n      removeFromArray(flagManagers[i]._updateFlags, this);\n    }\n  };\n  return UpdateFlag;\n}();\n\n/**\n * Used to update tags.\n */\nvar BoolUpdateFlag = /*#__PURE__*/function (_UpdateFlag) {\n  _inheritsLoose(BoolUpdateFlag, _UpdateFlag);\n  function BoolUpdateFlag() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _UpdateFlag.call.apply(_UpdateFlag, [this].concat(args)) || this;\n    _this.flag = true;\n    return _this;\n  }\n  var _proto = BoolUpdateFlag.prototype;\n  /**\n   * @inheritdoc\n   */\n  _proto.dispatch = function dispatch() {\n    this.flag = true;\n  };\n  return BoolUpdateFlag;\n}(UpdateFlag);\n\nvar _class$e, _descriptor$b, _descriptor2$a, _descriptor3$9, _descriptor4$9, _descriptor5$9;\n/**\n * The base class of the components.\n */\nvar Component = (_class$e = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(Component, _EngineObject);\n  function Component(entity) {\n    var _this;\n    _this = _EngineObject.call(this, entity.engine) || this;\n    _initializerDefineProperty(_this, \"_entity\", _descriptor$b, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_awoken\", _descriptor2$a, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_destroyed\", _descriptor3$9, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_phasedActive\", _descriptor4$9, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_enabled\", _descriptor5$9, _assertThisInitialized(_this));\n    _this._entity = entity;\n    return _this;\n  }\n\n  /**\n   * Destroy this instance.\n   */\n  var _proto = Component.prototype;\n  _proto.destroy = function destroy() {\n    if (this._destroyed) {\n      return;\n    }\n    this._entity._removeComponent(this);\n    if (this._entity.isActiveInHierarchy) {\n      this._enabled && this._onDisable();\n    }\n    this._destroyed = true;\n    this._onDestroy();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onAwake = function _onAwake() {}\n\n  /**\n   * @internal\n   */;\n  _proto._onEnable = function _onEnable() {}\n\n  /**\n   * @internal\n   */;\n  _proto._onDisable = function _onDisable() {}\n\n  /**\n   * @internal\n   */;\n  _proto._onDestroy = function _onDestroy() {}\n\n  /**\n   * @internal\n   */;\n  _proto._setActive = function _setActive(value) {\n    var entity = this._entity;\n    if (value) {\n      // Awake condition is un awake && current entity is active in hierarchy\n      if (!this._awoken && entity._isActiveInHierarchy) {\n        this._awoken = true;\n        this._onAwake();\n      }\n      // Developer maybe do `isActive = false` in `onAwake` method\n      // Enable condition is phased active state is false && current compoment is active in hierarchy\n      if (!this._phasedActive && entity._isActiveInHierarchy && this._enabled) {\n        this._phasedActive = true;\n        this._onEnable();\n      }\n    } else {\n      // Disable condition is phased active state is true && current compoment is inActive in hierarchy\n      if (this._phasedActive && !(entity._isActiveInHierarchy && this._enabled)) {\n        this._phasedActive = false;\n        this._onDisable();\n      }\n    }\n  };\n  _createClass(Component, [{\n    key: \"enabled\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Indicates whether the component is enabled.\n     */\n    function get() {\n      return this._enabled;\n    },\n    set: function set(value) {\n      if (value !== this._enabled) {\n        this._enabled = value;\n        if (this._entity.isActiveInHierarchy) {\n          if (value) {\n            this._phasedActive = true;\n            this._onEnable();\n          } else {\n            this._phasedActive = false;\n            this._onDisable();\n          }\n        }\n      }\n    }\n\n    /**\n     * Indicates whether the component is destroyed.\n     */\n  }, {\n    key: \"destroyed\",\n    get: function get() {\n      return this._destroyed;\n    }\n\n    /**\n     * The entity which the component belongs to.\n     */\n  }, {\n    key: \"entity\",\n    get: function get() {\n      return this._entity;\n    }\n\n    /**\n     * The scene which the component's entity belongs to.\n     */\n  }, {\n    key: \"scene\",\n    get: function get() {\n      return this._entity.scene;\n    }\n  }]);\n  return Component;\n}(EngineObject), (_descriptor$b = _applyDecoratedDescriptor(_class$e.prototype, \"_entity\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2$a = _applyDecoratedDescriptor(_class$e.prototype, \"_awoken\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor3$9 = _applyDecoratedDescriptor(_class$e.prototype, \"_destroyed\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor4$9 = _applyDecoratedDescriptor(_class$e.prototype, \"_phasedActive\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor5$9 = _applyDecoratedDescriptor(_class$e.prototype, \"_enabled\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n})), _class$e);\n\n/**\n * Used to update tags.\n */\nvar ListenerUpdateFlag = /*#__PURE__*/function (_UpdateFlag) {\n  _inheritsLoose(ListenerUpdateFlag, _UpdateFlag);\n  function ListenerUpdateFlag() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _UpdateFlag.call.apply(_UpdateFlag, [this].concat(args)) || this;\n    _this.listener = void 0;\n    return _this;\n  }\n  var _proto = ListenerUpdateFlag.prototype;\n  /**\n   * @inheritdoc\n   */\n  _proto.dispatch = function dispatch(param) {\n    this.listener && this.listener(param);\n  };\n  return ListenerUpdateFlag;\n}(UpdateFlag);\n\n/**\n * @internal\n */\nvar UpdateFlagManager = /*#__PURE__*/function () {\n  function UpdateFlagManager() {\n    this._updateFlags = [];\n  }\n  var _proto = UpdateFlagManager.prototype;\n  /**\n   * Create a UpdateFlag.\n   * @returns - The UpdateFlag.\n   */\n  _proto.createFlag = function createFlag(type) {\n    var flag = new type();\n    this.addFlag(flag);\n    return flag;\n  }\n\n  /**\n   * Add a UpdateFlag.\n   * @param flag - The UpdateFlag.\n   */;\n  _proto.addFlag = function addFlag(flag) {\n    this._updateFlags.push(flag);\n    flag._flagManagers.push(this);\n  }\n\n  /**\n   * Dispatch.\n   */;\n  _proto.dispatch = function dispatch(param) {\n    var updateFlags = this._updateFlags;\n    for (var i = updateFlags.length - 1; i >= 0; i--) {\n      updateFlags[i].dispatch(param);\n    }\n  };\n  return UpdateFlagManager;\n}();\n\nvar _class$d, _descriptor$a, _descriptor2$9, _descriptor3$8, _descriptor4$8, _descriptor5$8, _descriptor6$8, _descriptor7$8, _descriptor8$8, _descriptor9$7, _descriptor10$4, _descriptor11$4, _descriptor12$4, _descriptor13$3, _class2$b;\n\n/**\n * Used to implement transformation related functions.\n */\nvar Transform = (_class$d = (_class2$b = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Transform, _Component);\n  /**\n   * @internal\n   */\n  function Transform(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"_position\", _descriptor$a, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_rotation\", _descriptor2$9, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_rotationQuaternion\", _descriptor3$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_scale\", _descriptor4$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_worldPosition\", _descriptor5$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_worldRotation\", _descriptor6$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_worldRotationQuaternion\", _descriptor7$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_lossyWorldScale\", _descriptor8$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_localMatrix\", _descriptor9$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_worldMatrix\", _descriptor10$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_updateFlagManager\", _descriptor11$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_isParentDirty\", _descriptor12$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_parentTransformCache\", _descriptor13$3, _assertThisInitialized(_this));\n    _this._dirtyFlag = TransformFlag.WmWpWeWqWs;\n    _this._onPositionChanged = _this._onPositionChanged.bind(_assertThisInitialized(_this));\n    _this._onWorldPositionChanged = _this._onWorldPositionChanged.bind(_assertThisInitialized(_this));\n    _this._onRotationChanged = _this._onRotationChanged.bind(_assertThisInitialized(_this));\n    _this._onWorldRotationChanged = _this._onWorldRotationChanged.bind(_assertThisInitialized(_this));\n    _this._onRotationQuaternionChanged = _this._onRotationQuaternionChanged.bind(_assertThisInitialized(_this));\n    _this._onWorldRotationQuaternionChanged = _this._onWorldRotationQuaternionChanged.bind(_assertThisInitialized(_this));\n    _this._onScaleChanged = _this._onScaleChanged.bind(_assertThisInitialized(_this));\n\n    //@ts-ignore\n    _this._position._onValueChanged = _this._onPositionChanged;\n    //@ts-ignore\n    _this._worldPosition._onValueChanged = _this._onWorldPositionChanged;\n    //@ts-ignore\n    _this._rotation._onValueChanged = _this._onRotationChanged;\n    //@ts-ignore\n    _this._worldRotation._onValueChanged = _this._onWorldRotationChanged;\n    //@ts-ignore\n    _this._rotationQuaternion._onValueChanged = _this._onRotationQuaternionChanged;\n    //@ts-ignore\n    _this._worldRotationQuaternion._onValueChanged = _this._onWorldRotationQuaternionChanged;\n    //@ts-ignore\n    _this._scale._onValueChanged = _this._onScaleChanged;\n    return _this;\n  }\n\n  /**\n   * Set local position by X, Y, Z value.\n   * @param x - X coordinate\n   * @param y - Y coordinate\n   * @param z - Z coordinate\n   */\n  var _proto = Transform.prototype;\n  _proto.setPosition = function setPosition(x, y, z) {\n    this._position.set(x, y, z);\n  }\n\n  /**\n   * Set local rotation by the X, Y, Z components of the euler angle, unit in degrees.\n   * Rotations are performed around the Y axis, the X axis, and the Z axis, in that order.\n   * @param x - The angle of rotation around the X axis\n   * @param y - The angle of rotation around the Y axis\n   * @param z - The angle of rotation around the Z axis\n   */;\n  _proto.setRotation = function setRotation(x, y, z) {\n    this._rotation.set(x, y, z);\n  }\n\n  /**\n   * Set local rotation by the X, Y, Z, and W components of the quaternion.\n   * @param x - X component of quaternion\n   * @param y - Y component of quaternion\n   * @param z - Z component of quaternion\n   * @param w - W component of quaternion\n   */;\n  _proto.setRotationQuaternion = function setRotationQuaternion(x, y, z, w) {\n    this._rotationQuaternion.set(x, y, z, w);\n  }\n\n  /**\n   * Set local scaling by scaling values along X, Y, Z axis.\n   * @param x - Scaling along X axis\n   * @param y - Scaling along Y axis\n   * @param z - Scaling along Z axis\n   */;\n  _proto.setScale = function setScale(x, y, z) {\n    this._scale.set(x, y, z);\n  }\n\n  /**\n   * Set world position by X, Y, Z value.\n   * @param x - X coordinate\n   * @param y - Y coordinate\n   * @param z - Z coordinate\n   */;\n  _proto.setWorldPosition = function setWorldPosition(x, y, z) {\n    this._worldPosition.set(x, y, z);\n  }\n\n  /**\n   * Set world rotation by the X, Y, Z components of the euler angle, unit in degrees, Yaw/Pitch/Roll sequence.\n   * @param x - The angle of rotation around the X axis\n   * @param y - The angle of rotation around the Y axis\n   * @param z - The angle of rotation around the Z axis\n   */;\n  _proto.setWorldRotation = function setWorldRotation(x, y, z) {\n    this._worldRotation.set(x, y, z);\n  }\n\n  /**\n   * Set local rotation by the X, Y, Z, and W components of the quaternion.\n   * @param x - X component of quaternion\n   * @param y - Y component of quaternion\n   * @param z - Z component of quaternion\n   * @param w - W component of quaternion\n   */;\n  _proto.setWorldRotationQuaternion = function setWorldRotationQuaternion(x, y, z, w) {\n    this._worldRotationQuaternion.set(x, y, z, w);\n  }\n\n  /**\n   * Get the forward direction in world space.\n   * @param forward - Forward vector\n   * @returns Forward vector\n   */;\n  _proto.getWorldForward = function getWorldForward(forward) {\n    var e = this.worldMatrix.elements;\n    forward.set(-e[8], -e[9], -e[10]);\n    return forward.normalize();\n  }\n\n  /**\n   * Get the right direction in world space.\n   * @param right - Right vector\n   * @returns Right vector\n   */;\n  _proto.getWorldRight = function getWorldRight(right) {\n    var e = this.worldMatrix.elements;\n    right.set(e[0], e[1], e[2]);\n    return right.normalize();\n  }\n\n  /**\n   * Get the up direction in world space.\n   * @param up - Up vector\n   * @returns Up vector\n   */;\n  _proto.getWorldUp = function getWorldUp(up) {\n    var e = this.worldMatrix.elements;\n    up.set(e[4], e[5], e[6]);\n    return up.normalize();\n  }\n\n  /**\n   * Translate in the direction and distance of the translation.\n   * @param translation - Direction and distance of translation\n   * @param relativeToLocal = `true` - Is relative to the local coordinate system\n   */;\n  _proto.translate = function translate(translationOrX, relativeToLocalOrY, z, relativeToLocal) {\n    if (typeof translationOrX === \"number\") {\n      var _translate2 = Transform._tempVec30;\n      _translate2.set(translationOrX, relativeToLocalOrY, z);\n      this._translate(_translate2, relativeToLocal);\n    } else {\n      this._translate(translationOrX, relativeToLocalOrY);\n    }\n  }\n\n  /**\n   * Rotate around the passed Vector3.\n   * @param rotation - Euler angle in degrees\n   * @param relativeToLocal = `true` - Is relative to the local coordinate system\n   */;\n  _proto.rotate = function rotate(rotationOrX, relativeToLocalOrY, z, relativeToLocal) {\n    if (typeof rotationOrX === \"number\") {\n      this._rotateXYZ(rotationOrX, relativeToLocalOrY, z, relativeToLocal);\n    } else {\n      this._rotateXYZ(rotationOrX.x, rotationOrX.y, rotationOrX.z, relativeToLocalOrY);\n    }\n  }\n\n  /**\n   * Rotate around the specified axis according to the specified angle.\n   * @param axis - Rotate axis\n   * @param angle - Rotate angle in degrees\n   * @param relativeToLocal = `true` - Relative to local space\n   */;\n  _proto.rotateByAxis = function rotateByAxis(axis, angle, relativeToLocal) {\n    if (relativeToLocal === void 0) {\n      relativeToLocal = true;\n    }\n    var rad = angle * MathUtil.degreeToRadFactor;\n    Quaternion.rotationAxisAngle(axis, rad, Transform._tempQuat0);\n    this._rotateByQuat(Transform._tempQuat0, relativeToLocal);\n  }\n\n  /**\n   * Rotate and ensure that the world front vector points to the target world position.\n   * @param targetPosition - Target world position\n   * @param worldUp - Up direction in world space, default is Vector3(0, 1, 0)\n   */;\n  _proto.lookAt = function lookAt(targetPosition, worldUp) {\n    var zAxis = Transform._tempVec30;\n    Vector3.subtract(this.worldPosition, targetPosition, zAxis);\n    var axisLen = zAxis.length();\n    if (axisLen <= MathUtil.zeroTolerance) {\n      // The current position and the target position are almost the same.\n      return;\n    }\n    zAxis.scale(1 / axisLen);\n    var xAxis = Transform._tempVec31;\n    if (worldUp) {\n      Vector3.cross(worldUp, zAxis, xAxis);\n    } else {\n      xAxis.set(zAxis.z, 0, -zAxis.x);\n    }\n    axisLen = xAxis.length();\n    if (axisLen <= MathUtil.zeroTolerance) {\n      // @todo:\n      // 1.worldUp is（0,0,0）\n      // 2.worldUp is parallel to zAxis\n      return;\n    }\n    xAxis.scale(1 / axisLen);\n    var yAxis = Transform._tempVec32;\n    Vector3.cross(zAxis, xAxis, yAxis);\n    var rotMat = Transform._tempMat41;\n    var e = rotMat.elements;\n    e[0] = xAxis.x, e[1] = xAxis.y, e[2] = xAxis.z;\n    e[4] = yAxis.x, e[5] = yAxis.y, e[6] = yAxis.z;\n    e[8] = zAxis.x, e[9] = zAxis.y, e[10] = zAxis.z;\n    rotMat.getRotation(this._worldRotationQuaternion);\n  }\n\n  /**\n   * Register world transform change flag.\n   * @returns Change flag\n   */;\n  _proto.registerWorldChangeFlag = function registerWorldChangeFlag() {\n    return this._updateFlagManager.createFlag(BoolUpdateFlag);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._registerWorldChangeListener = function _registerWorldChangeListener() {\n    return this._updateFlagManager.createFlag(ListenerUpdateFlag);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._parentChange = function _parentChange() {\n    this._isParentDirty = true;\n    this._updateAllWorldFlag();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._isFrontFaceInvert = function _isFrontFaceInvert() {\n    var scale = this.lossyWorldScale;\n    var isInvert = scale.x < 0;\n    scale.y < 0 && (isInvert = !isInvert);\n    scale.z < 0 && (isInvert = !isInvert);\n    return isInvert;\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix or worldRotationQuaternion) to be false.\n   */;\n  _proto._updateWorldPositionFlag = function _updateWorldPositionFlag() {\n    if (!this._isContainDirtyFlags(TransformFlag.WmWp)) {\n      this._worldAssociatedChange(TransformFlag.WmWp);\n      var nodeChildren = this._entity._children;\n      for (var i = 0, n = nodeChildren.length; i < n; i++) {\n        var _nodeChildren$i$trans;\n        (_nodeChildren$i$trans = nodeChildren[i].transform) === null || _nodeChildren$i$trans === void 0 ? void 0 : _nodeChildren$i$trans._updateWorldPositionFlag();\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldRotationQuaternion: Will trigger the world rotation (in quaternion) update of itself and all parent entities.\n   * Get worldRotation: Will trigger the world rotation(in euler and quaternion) update of itself and world rotation(in quaternion) update of all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix or worldRotationQuaternion) to be false.\n   */;\n  _proto._updateWorldRotationFlag = function _updateWorldRotationFlag() {\n    if (!this._isContainDirtyFlags(TransformFlag.WmWeWq)) {\n      this._worldAssociatedChange(TransformFlag.WmWeWq);\n      var nodeChildren = this._entity._children;\n      for (var i = 0, n = nodeChildren.length; i < n; i++) {\n        var _nodeChildren$i$trans2;\n        (_nodeChildren$i$trans2 = nodeChildren[i].transform) === null || _nodeChildren$i$trans2 === void 0 ? void 0 : _nodeChildren$i$trans2._updateWorldPositionAndRotationFlag(); // Rotation update of parent entity will trigger world position and rotation update of all child entity.\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldRotationQuaternion: Will trigger the world rotation (in quaternion) update of itself and all parent entities.\n   * Get worldRotation: Will trigger the world rotation(in euler and quaternion) update of itself and world rotation(in quaternion) update of all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix or worldRotationQuaternion) to be false.\n   */;\n  _proto._updateWorldPositionAndRotationFlag = function _updateWorldPositionAndRotationFlag() {\n    if (!this._isContainDirtyFlags(TransformFlag.WmWpWeWq)) {\n      this._worldAssociatedChange(TransformFlag.WmWpWeWq);\n      var nodeChildren = this._entity._children;\n      for (var i = 0, n = nodeChildren.length; i < n; i++) {\n        var _nodeChildren$i$trans3;\n        (_nodeChildren$i$trans3 = nodeChildren[i].transform) === null || _nodeChildren$i$trans3 === void 0 ? void 0 : _nodeChildren$i$trans3._updateWorldPositionAndRotationFlag();\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldScale: Will trigger the scaling update of itself and all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix) to be false.\n   */;\n  _proto._updateWorldScaleFlag = function _updateWorldScaleFlag() {\n    if (!this._isContainDirtyFlags(TransformFlag.WmWs)) {\n      this._worldAssociatedChange(TransformFlag.WmWs);\n      var nodeChildren = this._entity._children;\n      for (var i = 0, n = nodeChildren.length; i < n; i++) {\n        var _nodeChildren$i$trans4;\n        (_nodeChildren$i$trans4 = nodeChildren[i].transform) === null || _nodeChildren$i$trans4 === void 0 ? void 0 : _nodeChildren$i$trans4._updateWorldPositionAndScaleFlag();\n      }\n    }\n  }\n\n  /**\n   * Get worldMatrix: Will trigger the worldMatrix update of itself and all parent entities.\n   * Get worldPosition: Will trigger the worldMatrix, local position update of itself and the worldMatrix update of all parent entities.\n   * Get worldScale: Will trigger the scaling update of itself and all parent entities.\n   * In summary, any update of related variables will cause the dirty mark of one of the full process (worldMatrix) to be false.\n   */;\n  _proto._updateWorldPositionAndScaleFlag = function _updateWorldPositionAndScaleFlag() {\n    if (!this._isContainDirtyFlags(TransformFlag.WmWpWs)) {\n      this._worldAssociatedChange(TransformFlag.WmWpWs);\n      var nodeChildren = this._entity._children;\n      for (var i = 0, n = nodeChildren.length; i < n; i++) {\n        var _nodeChildren$i$trans5;\n        (_nodeChildren$i$trans5 = nodeChildren[i].transform) === null || _nodeChildren$i$trans5 === void 0 ? void 0 : _nodeChildren$i$trans5._updateWorldPositionAndScaleFlag();\n      }\n    }\n  }\n\n  /**\n   * Update all world transform property dirty flag, the principle is the same as above.\n   */;\n  _proto._updateAllWorldFlag = function _updateAllWorldFlag() {\n    if (!this._isContainDirtyFlags(TransformFlag.WmWpWeWqWs)) {\n      this._worldAssociatedChange(TransformFlag.WmWpWeWqWs);\n      var nodeChildren = this._entity._children;\n      for (var i = 0, n = nodeChildren.length; i < n; i++) {\n        var _nodeChildren$i$trans6;\n        (_nodeChildren$i$trans6 = nodeChildren[i].transform) === null || _nodeChildren$i$trans6 === void 0 ? void 0 : _nodeChildren$i$trans6._updateAllWorldFlag();\n      }\n    }\n  };\n  _proto._getParentTransform = function _getParentTransform() {\n    if (!this._isParentDirty) {\n      return this._parentTransformCache;\n    }\n    var parentCache = null;\n    var parent = this._entity.parent;\n    while (parent) {\n      var transform = parent.transform;\n      if (transform) {\n        parentCache = transform;\n        break;\n      } else {\n        parent = parent.parent;\n      }\n    }\n    this._parentTransformCache = parentCache;\n    this._isParentDirty = false;\n    return parentCache;\n  };\n  _proto._getScaleMatrix = function _getScaleMatrix() {\n    var invRotation = Transform._tempQuat0;\n    var invRotationMat = Transform._tempMat30;\n    var worldRotScaMat = Transform._tempMat31;\n    var scaMat = Transform._tempMat32;\n    worldRotScaMat.copyFromMatrix(this.worldMatrix);\n    Quaternion.invert(this.worldRotationQuaternion, invRotation);\n    Matrix3x3.rotationQuaternion(invRotation, invRotationMat);\n    Matrix3x3.multiply(invRotationMat, worldRotScaMat, scaMat);\n    return scaMat;\n  };\n  _proto._isContainDirtyFlags = function _isContainDirtyFlags(targetDirtyFlags) {\n    return (this._dirtyFlag & targetDirtyFlags) === targetDirtyFlags;\n  };\n  _proto._isContainDirtyFlag = function _isContainDirtyFlag(type) {\n    return (this._dirtyFlag & type) != 0;\n  };\n  _proto._setDirtyFlagTrue = function _setDirtyFlagTrue(type) {\n    this._dirtyFlag |= type;\n  };\n  _proto._setDirtyFlagFalse = function _setDirtyFlagFalse(type) {\n    this._dirtyFlag &= ~type;\n  };\n  _proto._worldAssociatedChange = function _worldAssociatedChange(type) {\n    this._dirtyFlag |= type;\n    this._updateFlagManager.dispatch();\n  };\n  _proto._rotateByQuat = function _rotateByQuat(rotateQuat, relativeToLocal) {\n    if (relativeToLocal) {\n      Quaternion.multiply(this.rotationQuaternion, rotateQuat, this._rotationQuaternion);\n    } else {\n      Quaternion.multiply(rotateQuat, this.worldRotationQuaternion, this._worldRotationQuaternion);\n    }\n  };\n  _proto._translate = function _translate(translation, relativeToLocal) {\n    if (relativeToLocal === void 0) {\n      relativeToLocal = true;\n    }\n    if (relativeToLocal) {\n      var _tempVec30 = Transform._tempVec30;\n      Vector3.transformByQuat(translation, this.worldRotationQuaternion, _tempVec30);\n      this._worldPosition.add(_tempVec30);\n    } else {\n      this._worldPosition.add(translation);\n    }\n  };\n  _proto._rotateXYZ = function _rotateXYZ(x, y, z, relativeToLocal) {\n    if (relativeToLocal === void 0) {\n      relativeToLocal = true;\n    }\n    var radFactor = MathUtil.degreeToRadFactor;\n    var rotQuat = Transform._tempQuat0;\n    Quaternion.rotationEuler(x * radFactor, y * radFactor, z * radFactor, rotQuat);\n    this._rotateByQuat(rotQuat, relativeToLocal);\n  };\n  _proto._onPositionChanged = function _onPositionChanged() {\n    this._setDirtyFlagTrue(TransformFlag.LocalMatrix);\n    this._updateWorldPositionFlag();\n  };\n  _proto._onWorldPositionChanged = function _onWorldPositionChanged() {\n    var worldPosition = this._worldPosition;\n    var parent = this._getParentTransform();\n    if (parent) {\n      Matrix.invert(parent.worldMatrix, Transform._tempMat41);\n      Vector3.transformCoordinate(worldPosition, Transform._tempMat41, this._position);\n    } else {\n      this._position.copyFrom(worldPosition);\n    }\n    this._setDirtyFlagFalse(TransformFlag.WorldPosition);\n  };\n  _proto._onRotationChanged = function _onRotationChanged() {\n    this._setDirtyFlagTrue(TransformFlag.LocalMatrix | TransformFlag.LocalQuat);\n    this._setDirtyFlagFalse(TransformFlag.LocalEuler);\n    this._updateWorldRotationFlag();\n  };\n  _proto._onWorldRotationChanged = function _onWorldRotationChanged() {\n    var worldRotation = this._worldRotation;\n    Quaternion.rotationEuler(MathUtil.degreeToRadian(worldRotation.x), MathUtil.degreeToRadian(worldRotation.y), MathUtil.degreeToRadian(worldRotation.z), this._worldRotationQuaternion);\n    this._setDirtyFlagFalse(TransformFlag.WorldEuler);\n  };\n  _proto._onRotationQuaternionChanged = function _onRotationQuaternionChanged() {\n    this._setDirtyFlagTrue(TransformFlag.LocalMatrix | TransformFlag.LocalEuler);\n    this._setDirtyFlagFalse(TransformFlag.LocalQuat);\n    this._updateWorldRotationFlag();\n  };\n  _proto._onWorldRotationQuaternionChanged = function _onWorldRotationQuaternionChanged() {\n    var worldRotationQuaternion = this._worldRotationQuaternion;\n    var parent = this._getParentTransform();\n    if (parent) {\n      var invParentQuaternion = Transform._tempQuat0;\n      Quaternion.invert(parent.worldRotationQuaternion, invParentQuaternion);\n      Quaternion.multiply(invParentQuaternion, worldRotationQuaternion, this._rotationQuaternion);\n    } else {\n      this._rotationQuaternion.copyFrom(worldRotationQuaternion);\n    }\n    this._setDirtyFlagFalse(TransformFlag.WorldQuat);\n  };\n  _proto._onScaleChanged = function _onScaleChanged() {\n    this._setDirtyFlagTrue(TransformFlag.LocalMatrix);\n    this._updateWorldScaleFlag();\n  };\n  _createClass(Transform, [{\n    key: \"position\",\n    get:\n    /**\n     * Local position.\n     */\n    function get() {\n      return this._position;\n    },\n    set: function set(value) {\n      if (this._position !== value) {\n        this._position.copyFrom(value);\n      }\n    }\n\n    /**\n     * World position.\n     */\n  }, {\n    key: \"worldPosition\",\n    get: function get() {\n      var worldPosition = this._worldPosition;\n      if (this._isContainDirtyFlag(TransformFlag.WorldPosition)) {\n        //@ts-ignore\n        worldPosition._onValueChanged = null;\n        if (this._getParentTransform()) {\n          this.worldMatrix.getTranslation(worldPosition);\n        } else {\n          worldPosition.copyFrom(this._position);\n        }\n        //@ts-ignore\n        worldPosition._onValueChanged = this._onWorldPositionChanged;\n        this._setDirtyFlagFalse(TransformFlag.WorldPosition);\n      }\n      return worldPosition;\n    },\n    set: function set(value) {\n      if (this._worldPosition !== value) {\n        this._worldPosition.copyFrom(value);\n      }\n    }\n\n    /**\n     * Local rotation, defining the rotation value in degrees.\n     * Rotations are performed around the Y axis, the X axis, and the Z axis, in that order.\n     */\n  }, {\n    key: \"rotation\",\n    get: function get() {\n      var rotation = this._rotation;\n      if (this._isContainDirtyFlag(TransformFlag.LocalEuler)) {\n        //@ts-ignore\n        rotation._onValueChanged = null;\n        this._rotationQuaternion.toEuler(rotation);\n        //@ts-ignore\n        rotation._onValueChanged = this._onRotationChanged;\n        rotation.scale(MathUtil.radToDegreeFactor); // radians to degrees\n        this._setDirtyFlagFalse(TransformFlag.LocalEuler);\n      }\n      return rotation;\n    },\n    set: function set(value) {\n      if (this._rotation !== value) {\n        this._rotation.copyFrom(value);\n      }\n    }\n\n    /**\n     * World rotation, defining the rotation value in degrees.\n     * Rotations are performed around the Y axis, the X axis, and the Z axis, in that order.\n     */\n  }, {\n    key: \"worldRotation\",\n    get: function get() {\n      var worldRotation = this._worldRotation;\n      if (this._isContainDirtyFlag(TransformFlag.WorldEuler)) {\n        //@ts-ignore\n        worldRotation._onValueChanged = null;\n        this.worldRotationQuaternion.toEuler(worldRotation);\n        worldRotation.scale(MathUtil.radToDegreeFactor); // Radian to angle\n        //@ts-ignore\n        worldRotation._onValueChanged = this._onWorldRotationChanged;\n        this._setDirtyFlagFalse(TransformFlag.WorldEuler);\n      }\n      return worldRotation;\n    },\n    set: function set(value) {\n      if (this._worldRotation !== value) {\n        this._worldRotation.copyFrom(value);\n      }\n    }\n\n    /**\n     * Local rotation, defining the rotation by using a unit quaternion.\n     */\n  }, {\n    key: \"rotationQuaternion\",\n    get: function get() {\n      var rotationQuaternion = this._rotationQuaternion;\n      if (this._isContainDirtyFlag(TransformFlag.LocalQuat)) {\n        //@ts-ignore\n        rotationQuaternion._onValueChanged = null;\n        Quaternion.rotationEuler(MathUtil.degreeToRadian(this._rotation.x), MathUtil.degreeToRadian(this._rotation.y), MathUtil.degreeToRadian(this._rotation.z), rotationQuaternion);\n        //@ts-ignore\n        rotationQuaternion._onValueChanged = this._onRotationQuaternionChanged;\n        this._setDirtyFlagFalse(TransformFlag.LocalQuat);\n      }\n      return rotationQuaternion;\n    },\n    set: function set(value) {\n      if (this._rotationQuaternion !== value) {\n        if (value.normalized) {\n          this._rotationQuaternion.copyFrom(value);\n        } else {\n          Quaternion.normalize(value, this._rotationQuaternion);\n        }\n      } else {\n        value.normalized || value.normalize();\n      }\n    }\n\n    /**\n     * World rotation, defining the rotation by using a unit quaternion.\n     */\n  }, {\n    key: \"worldRotationQuaternion\",\n    get: function get() {\n      var worldRotationQuaternion = this._worldRotationQuaternion;\n      if (this._isContainDirtyFlag(TransformFlag.WorldQuat)) {\n        //@ts-ignore\n        worldRotationQuaternion._onValueChanged = null;\n        var parent = this._getParentTransform();\n        if (parent != null) {\n          Quaternion.multiply(parent.worldRotationQuaternion, this.rotationQuaternion, worldRotationQuaternion);\n        } else {\n          worldRotationQuaternion.copyFrom(this.rotationQuaternion);\n        }\n        //@ts-ignore\n        worldRotationQuaternion._onValueChanged = this._onWorldRotationQuaternionChanged;\n        this._setDirtyFlagFalse(TransformFlag.WorldQuat);\n      }\n      return worldRotationQuaternion;\n    },\n    set: function set(value) {\n      if (this._worldRotationQuaternion !== value) {\n        if (value.normalized) {\n          this._worldRotationQuaternion.copyFrom(value);\n        } else {\n          Quaternion.normalize(value, this._worldRotationQuaternion);\n        }\n      }\n      value.normalized || value.normalize();\n    }\n\n    /**\n     * Local scaling.\n     */\n  }, {\n    key: \"scale\",\n    get: function get() {\n      return this._scale;\n    },\n    set: function set(value) {\n      if (this._scale !== value) {\n        this._scale.copyFrom(value);\n      }\n    }\n\n    /**\n     * Local lossy scaling.\n     * @remarks The value obtained may not be correct under certain conditions(for example, the parent node has scaling,\n     * and the child node has a rotation), the scaling will be tilted. Vector3 cannot be used to correctly represent the scaling. Must use Matrix3x3.\n     */\n  }, {\n    key: \"lossyWorldScale\",\n    get: function get() {\n      if (this._isContainDirtyFlag(TransformFlag.WorldScale)) {\n        if (this._getParentTransform()) {\n          var scaleMat = this._getScaleMatrix();\n          var e = scaleMat.elements;\n          this._lossyWorldScale.set(e[0], e[4], e[8]);\n        } else {\n          this._lossyWorldScale.copyFrom(this._scale);\n        }\n        this._setDirtyFlagFalse(TransformFlag.WorldScale);\n      }\n      return this._lossyWorldScale;\n    }\n\n    /**\n     * Local matrix.\n     * @remarks Need to re-assign after modification to ensure that the modification takes effect.\n     */\n  }, {\n    key: \"localMatrix\",\n    get: function get() {\n      if (this._isContainDirtyFlag(TransformFlag.LocalMatrix)) {\n        Matrix.affineTransformation(this._scale, this.rotationQuaternion, this._position, this._localMatrix);\n        this._setDirtyFlagFalse(TransformFlag.LocalMatrix);\n      }\n      return this._localMatrix;\n    },\n    set: function set(value) {\n      if (this._localMatrix !== value) {\n        this._localMatrix.copyFrom(value);\n      }\n      this._localMatrix.decompose(this._position, this._rotationQuaternion, this._scale);\n      this._setDirtyFlagTrue(TransformFlag.LocalEuler);\n      this._setDirtyFlagFalse(TransformFlag.LocalMatrix);\n      this._updateAllWorldFlag();\n    }\n\n    /**\n     * World matrix.\n     * @remarks Need to re-assign after modification to ensure that the modification takes effect.\n     */\n  }, {\n    key: \"worldMatrix\",\n    get: function get() {\n      if (this._isContainDirtyFlag(TransformFlag.WorldMatrix)) {\n        var parent = this._getParentTransform();\n        if (parent) {\n          Matrix.multiply(parent.worldMatrix, this.localMatrix, this._worldMatrix);\n        } else {\n          this._worldMatrix.copyFrom(this.localMatrix);\n        }\n        this._setDirtyFlagFalse(TransformFlag.WorldMatrix);\n      }\n      return this._worldMatrix;\n    },\n    set: function set(value) {\n      if (this._worldMatrix !== value) {\n        this._worldMatrix.copyFrom(value);\n      }\n      var parent = this._getParentTransform();\n      if (parent) {\n        Matrix.invert(parent.worldMatrix, Transform._tempMat42);\n        Matrix.multiply(Transform._tempMat42, value, this._localMatrix);\n      } else {\n        this._localMatrix.copyFrom(value);\n      }\n      this.localMatrix = this._localMatrix;\n      this._setDirtyFlagFalse(TransformFlag.WorldMatrix);\n    }\n  }]);\n  return Transform;\n}(Component), _class2$b._tempQuat0 = new Quaternion(), _class2$b._tempVec30 = new Vector3(), _class2$b._tempVec31 = new Vector3(), _class2$b._tempVec32 = new Vector3(), _class2$b._tempMat30 = new Matrix3x3(), _class2$b._tempMat31 = new Matrix3x3(), _class2$b._tempMat32 = new Matrix3x3(), _class2$b._tempMat41 = new Matrix(), _class2$b._tempMat42 = new Matrix(), _class2$b), (_descriptor$a = _applyDecoratedDescriptor(_class$d.prototype, \"_position\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector3();\n  }\n}), _descriptor2$9 = _applyDecoratedDescriptor(_class$d.prototype, \"_rotation\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector3();\n  }\n}), _descriptor3$8 = _applyDecoratedDescriptor(_class$d.prototype, \"_rotationQuaternion\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Quaternion();\n  }\n}), _descriptor4$8 = _applyDecoratedDescriptor(_class$d.prototype, \"_scale\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector3(1, 1, 1);\n  }\n}), _descriptor5$8 = _applyDecoratedDescriptor(_class$d.prototype, \"_worldPosition\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector3();\n  }\n}), _descriptor6$8 = _applyDecoratedDescriptor(_class$d.prototype, \"_worldRotation\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector3();\n  }\n}), _descriptor7$8 = _applyDecoratedDescriptor(_class$d.prototype, \"_worldRotationQuaternion\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Quaternion();\n  }\n}), _descriptor8$8 = _applyDecoratedDescriptor(_class$d.prototype, \"_lossyWorldScale\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector3(1, 1, 1);\n  }\n}), _descriptor9$7 = _applyDecoratedDescriptor(_class$d.prototype, \"_localMatrix\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor10$4 = _applyDecoratedDescriptor(_class$d.prototype, \"_worldMatrix\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor11$4 = _applyDecoratedDescriptor(_class$d.prototype, \"_updateFlagManager\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new UpdateFlagManager();\n  }\n}), _descriptor12$4 = _applyDecoratedDescriptor(_class$d.prototype, \"_isParentDirty\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return true;\n  }\n}), _descriptor13$3 = _applyDecoratedDescriptor(_class$d.prototype, \"_parentTransformCache\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class$d);\n/**\n * Dirty flag of transform.\n */\nvar TransformFlag;\n(function (TransformFlag) {\n  TransformFlag[TransformFlag[\"LocalEuler\"] = 1] = \"LocalEuler\";\n  TransformFlag[TransformFlag[\"LocalQuat\"] = 2] = \"LocalQuat\";\n  TransformFlag[TransformFlag[\"WorldPosition\"] = 4] = \"WorldPosition\";\n  TransformFlag[TransformFlag[\"WorldEuler\"] = 8] = \"WorldEuler\";\n  TransformFlag[TransformFlag[\"WorldQuat\"] = 16] = \"WorldQuat\";\n  TransformFlag[TransformFlag[\"WorldScale\"] = 32] = \"WorldScale\";\n  TransformFlag[TransformFlag[\"LocalMatrix\"] = 64] = \"LocalMatrix\";\n  TransformFlag[TransformFlag[\"WorldMatrix\"] = 128] = \"WorldMatrix\";\n  TransformFlag[TransformFlag[\"WmWp\"] = 132] = \"WmWp\";\n  TransformFlag[TransformFlag[\"WmWeWq\"] = 152] = \"WmWeWq\";\n  TransformFlag[TransformFlag[\"WmWpWeWq\"] = 156] = \"WmWpWeWq\";\n  TransformFlag[TransformFlag[\"WmWs\"] = 160] = \"WmWs\";\n  TransformFlag[TransformFlag[\"WmWpWs\"] = 164] = \"WmWpWs\";\n  TransformFlag[TransformFlag[\"WmWpWeWqWs\"] = 188] = \"WmWpWeWqWs\";\n})(TransformFlag || (TransformFlag = {}));\n\n/**\n * Entity, be used as components container.\n */\nvar Entity = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(Entity, _EngineObject);\n  /**\n   * @internal\n   */\n  Entity._findChildByName = function _findChildByName(root, name) {\n    var children = root._children;\n    for (var i = children.length - 1; i >= 0; i--) {\n      var _child = children[i];\n      if (_child.name === name) {\n        return _child;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */;\n  Entity._traverseSetOwnerScene = function _traverseSetOwnerScene(entity, scene) {\n    entity._scene = scene;\n    var children = entity._children;\n    for (var i = entity.childCount - 1; i >= 0; i--) {\n      this._traverseSetOwnerScene(children[i], scene);\n    }\n  }\n\n  /** The name of entity. */;\n\n  /**\n   * Create a entity.\n   * @param engine - The engine the entity belongs to\n   */\n  function Entity(engine, name) {\n    var _this;\n    _this = _EngineObject.call(this, engine) || this;\n    _this.name = void 0;\n    _this.layer = Layer.Layer0;\n    _this.transform = void 0;\n    _this._isActiveInHierarchy = false;\n    _this._components = [];\n    _this._scripts = new DisorderedArray();\n    _this._children = [];\n    _this._scene = void 0;\n    _this._isRoot = false;\n    _this._isActive = true;\n    _this._siblingIndex = -1;\n    _this._parent = null;\n    _this._activeChangedComponents = void 0;\n    _this._invModelMatrix = new Matrix();\n    _this._inverseWorldMatFlag = void 0;\n    _this.name = name;\n    _this.transform = _this.addComponent(Transform);\n    _this._inverseWorldMatFlag = _this.transform.registerWorldChangeFlag();\n    return _this;\n  }\n\n  /**\n   * Add component based on the component type.\n   * @param type - The type of the component\n   * @returns\tThe component which has been added\n   */\n  var _proto = Entity.prototype;\n  _proto.addComponent = function addComponent(type) {\n    ComponentsDependencies._addCheck(this, type);\n    var component = new type(this);\n    this._components.push(component);\n    component._setActive(true);\n    return component;\n  }\n\n  /**\n   * Get component which match the type.\n   * @param type - The type of the component\n   * @returns\tThe first component which match type\n   */;\n  _proto.getComponent = function getComponent(type) {\n    for (var i = this._components.length - 1; i >= 0; i--) {\n      var component = this._components[i];\n      if (component instanceof type) {\n        return component;\n      }\n    }\n  }\n\n  /**\n   * Get components which match the type.\n   * @param type - The type of the component\n   * @param results - The components which match type\n   * @returns\tThe components which match type\n   */;\n  _proto.getComponents = function getComponents(type, results) {\n    results.length = 0;\n    for (var i = this._components.length - 1; i >= 0; i--) {\n      var component = this._components[i];\n      if (component instanceof type) {\n        results.push(component);\n      }\n    }\n    return results;\n  }\n\n  /**\n   * Get the components which match the type of the entity and it's children.\n   * @param type - The component type\n   * @param results - The components collection\n   * @returns\tThe components collection which match the type\n   */;\n  _proto.getComponentsIncludeChildren = function getComponentsIncludeChildren(type, results) {\n    results.length = 0;\n    this._getComponentsInChildren(type, results);\n    return results;\n  }\n\n  /**\n   * Add child entity.\n   * @param child - The child entity which want to be added\n   */;\n  _proto.addChild = function addChild(indexOrChild, child) {\n    var index;\n    if (typeof indexOrChild === \"number\") {\n      index = indexOrChild;\n    } else {\n      index = undefined;\n      child = indexOrChild;\n    }\n    if (child._isRoot) {\n      child._scene._removeFromEntityList(child);\n      child._isRoot = false;\n      this._addToChildrenList(index, child);\n      child._parent = this;\n      var newScene = this._scene;\n      if (child._scene !== newScene) {\n        Entity._traverseSetOwnerScene(child, newScene);\n      }\n      if (this._isActiveInHierarchy) {\n        !child._isActiveInHierarchy && child._isActive && child._processActive();\n      } else {\n        child._isActiveInHierarchy && child._processInActive();\n      }\n      child._setTransformDirty();\n    } else {\n      child._setParent(this, index);\n    }\n  }\n\n  /**\n   * Remove child entity.\n   * @param child - The child entity which want to be removed\n   */;\n  _proto.removeChild = function removeChild(child) {\n    child._setParent(null);\n  }\n\n  /**\n   * @deprecated Please use `children` property instead.\n   * Find child entity by index.\n   * @param index - The index of the child entity\n   * @returns\tThe component which be found\n   */;\n  _proto.getChild = function getChild(index) {\n    return this._children[index];\n  }\n\n  /**\n   * Find child entity by name.\n   * @param name - The name of the entity which want to be found\n   * @returns The component which be found\n   */;\n  _proto.findByName = function findByName(name) {\n    var children = this._children;\n    var child = Entity._findChildByName(this, name);\n    if (child) return child;\n    for (var i = children.length - 1; i >= 0; i--) {\n      var _child2 = children[i];\n      var grandson = _child2.findByName(name);\n      if (grandson) {\n        return grandson;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Find the entity by path.\n   * @param path - The path fo the entity eg: /entity\n   * @returns The component which be found\n   */;\n  _proto.findByPath = function findByPath(path) {\n    var splits = path.split(\"/\");\n    var entity = this;\n    for (var i = 0, length = splits.length; i < length; ++i) {\n      var split = splits[i];\n      if (split) {\n        entity = Entity._findChildByName(entity, split);\n        if (!entity) {\n          return null;\n        }\n      }\n    }\n    return entity;\n  }\n\n  /**\n   * Create child entity.\n   * @param name - The child entity's name\n   * @returns The child entity\n   */;\n  _proto.createChild = function createChild(name) {\n    var child = new Entity(this.engine, name);\n    child.layer = this.layer;\n    child.parent = this;\n    return child;\n  }\n\n  /**\n   * Clear children entities.\n   */;\n  _proto.clearChildren = function clearChildren() {\n    var children = this._children;\n    for (var i = children.length - 1; i >= 0; i--) {\n      var _child3 = children[i];\n      _child3._parent = null;\n      _child3._isActiveInHierarchy && _child3._processInActive();\n      Entity._traverseSetOwnerScene(_child3, null); // Must after child._processInActive().\n    }\n\n    children.length = 0;\n  }\n\n  /**\n   * Clone.\n   * @returns Cloned entity\n   */;\n  _proto.clone = function clone() {\n    var cloneEntity = new Entity(this._engine, this.name);\n    cloneEntity._isActive = this._isActive;\n    cloneEntity.transform.localMatrix = this.transform.localMatrix;\n    var children = this._children;\n    for (var i = 0, len = this._children.length; i < len; i++) {\n      var _child4 = children[i];\n      cloneEntity.addChild(_child4.clone());\n    }\n    var components = this._components;\n    for (var _i = 0, n = components.length; _i < n; _i++) {\n      var sourceComp = components[_i];\n      if (!(sourceComp instanceof Transform)) {\n        var targetComp = cloneEntity.addComponent(sourceComp.constructor);\n        ComponentCloner.cloneComponent(sourceComp, targetComp);\n      }\n    }\n    return cloneEntity;\n  }\n\n  /**\n   * Destroy self.\n   */;\n  _proto.destroy = function destroy() {\n    if (this._destroyed) {\n      return;\n    }\n    _EngineObject.prototype.destroy.call(this);\n    var components = this._components;\n    for (var i = components.length - 1; i >= 0; i--) {\n      components[i].destroy();\n    }\n    this._components.length = 0;\n    var children = this._children;\n    for (var _i2 = children.length - 1; _i2 >= 0; _i2--) {\n      children[_i2].destroy();\n    }\n    this._children.length = 0;\n    if (this._isRoot) {\n      this._scene._removeFromEntityList(this);\n      this._isRoot = false;\n    } else {\n      this._removeFromParent();\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._removeComponent = function _removeComponent(component) {\n    ComponentsDependencies._removeCheck(this, component.constructor);\n    var components = this._components;\n    components.splice(components.indexOf(component), 1);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addScript = function _addScript(script) {\n    script._entityScriptsIndex = this._scripts.length;\n    this._scripts.add(script);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._removeScript = function _removeScript(script) {\n    var replaced = this._scripts.deleteByIndex(script._entityScriptsIndex);\n    replaced && (replaced._entityScriptsIndex = script._entityScriptsIndex);\n    script._entityScriptsIndex = -1;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._removeFromParent = function _removeFromParent() {\n    var oldParent = this._parent;\n    if (oldParent != null) {\n      var oldSibling = oldParent._children;\n      var _index = this._siblingIndex;\n      oldSibling.splice(_index, 1);\n      for (var n = oldSibling.length; _index < n; _index++) {\n        oldSibling[_index]._siblingIndex--;\n      }\n      this._parent = null;\n      this._siblingIndex = -1;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._processActive = function _processActive() {\n    if (this._activeChangedComponents) {\n      throw \"Note: can't set the 'main inActive entity' active in hierarchy, if the operation is in main inActive entity or it's children script's onDisable Event.\";\n    }\n    this._activeChangedComponents = this._engine._componentsManager.getActiveChangedTempList();\n    this._setActiveInHierarchy(this._activeChangedComponents);\n    this._setActiveComponents(true);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._processInActive = function _processInActive() {\n    if (this._activeChangedComponents) {\n      throw \"Note: can't set the 'main active entity' inActive in hierarchy, if the operation is in main active entity or it's children script's onEnable Event.\";\n    }\n    this._activeChangedComponents = this._engine._componentsManager.getActiveChangedTempList();\n    this._setInActiveInHierarchy(this._activeChangedComponents);\n    this._setActiveComponents(false);\n  };\n  _proto._addToChildrenList = function _addToChildrenList(index, child) {\n    var children = this._children;\n    var childCount = children.length;\n    if (index === undefined) {\n      child._siblingIndex = childCount;\n      children.push(child);\n    } else {\n      if (index < 0 || index > childCount) {\n        throw \"The index \" + index + \" is out of child list bounds \" + childCount;\n      }\n      child._siblingIndex = index;\n      children.splice(index, 0, child);\n      for (var i = index + 1, n = childCount + 1; i < n; i++) {\n        children[i]._siblingIndex++;\n      }\n    }\n  };\n  _proto._setParent = function _setParent(parent, siblingIndex) {\n    var oldParent = this._parent;\n    if (parent !== oldParent) {\n      this._removeFromParent();\n      this._parent = parent;\n      if (parent) {\n        parent._addToChildrenList(siblingIndex, this);\n        var parentScene = parent._scene;\n        if (this._scene !== parentScene) {\n          Entity._traverseSetOwnerScene(this, parentScene);\n        }\n        if (parent._isActiveInHierarchy) {\n          !this._isActiveInHierarchy && this._isActive && this._processActive();\n        } else {\n          this._isActiveInHierarchy && this._processInActive();\n        }\n      } else {\n        this._isActiveInHierarchy && this._processInActive();\n        if (oldParent) {\n          Entity._traverseSetOwnerScene(this, null);\n        }\n      }\n      this._setTransformDirty();\n    }\n  };\n  _proto._getComponentsInChildren = function _getComponentsInChildren(type, results) {\n    for (var i = this._components.length - 1; i >= 0; i--) {\n      var component = this._components[i];\n      if (component instanceof type) {\n        results.push(component);\n      }\n    }\n    for (var _i3 = this._children.length - 1; _i3 >= 0; _i3--) {\n      this._children[_i3]._getComponentsInChildren(type, results);\n    }\n  };\n  _proto._setActiveComponents = function _setActiveComponents(isActive) {\n    var activeChangedComponents = this._activeChangedComponents;\n    for (var i = 0, length = activeChangedComponents.length; i < length; ++i) {\n      activeChangedComponents[i]._setActive(isActive);\n    }\n    this._engine._componentsManager.putActiveChangedTempList(activeChangedComponents);\n    this._activeChangedComponents = null;\n  };\n  _proto._setActiveInHierarchy = function _setActiveInHierarchy(activeChangedComponents) {\n    this._isActiveInHierarchy = true;\n    var components = this._components;\n    for (var i = components.length - 1; i >= 0; i--) {\n      var component = components[i];\n      (component.enabled || !component._awoken) && activeChangedComponents.push(component);\n    }\n    var children = this._children;\n    for (var _i4 = children.length - 1; _i4 >= 0; _i4--) {\n      var _child5 = children[_i4];\n      _child5.isActive && _child5._setActiveInHierarchy(activeChangedComponents);\n    }\n  };\n  _proto._setInActiveInHierarchy = function _setInActiveInHierarchy(activeChangedComponents) {\n    this._isActiveInHierarchy = false;\n    var components = this._components;\n    for (var i = components.length - 1; i >= 0; i--) {\n      var component = components[i];\n      component.enabled && activeChangedComponents.push(component);\n    }\n    var children = this._children;\n    for (var _i5 = children.length - 1; _i5 >= 0; _i5--) {\n      var _child6 = children[_i5];\n      _child6.isActive && _child6._setInActiveInHierarchy(activeChangedComponents);\n    }\n  };\n  _proto._setTransformDirty = function _setTransformDirty() {\n    if (this.transform) {\n      this.transform._parentChange();\n    } else {\n      for (var i = 0, len = this._children.length; i < len; i++) {\n        this._children[i]._setTransformDirty();\n      }\n    }\n  };\n  _proto._setSiblingIndex = function _setSiblingIndex(sibling, target) {\n    target = Math.min(target, sibling.length - 1);\n    if (target < 0) {\n      throw \"Sibling index \" + target + \" should large than 0\";\n    }\n    if (this._siblingIndex !== target) {\n      var oldIndex = this._siblingIndex;\n      if (target < oldIndex) {\n        for (var i = oldIndex; i >= target; i--) {\n          var _child7 = i == target ? this : sibling[i - 1];\n          sibling[i] = _child7;\n          _child7._siblingIndex = i;\n        }\n      } else {\n        for (var _i6 = oldIndex; _i6 <= target; _i6++) {\n          var _child8 = _i6 == target ? this : sibling[_i6 + 1];\n          sibling[_i6] = _child8;\n          _child8._siblingIndex = _i6;\n        }\n      }\n    }\n  }\n\n  //--------------------------------------------------------------deprecated----------------------------------------------------------------\n  ;\n  /**\n   * @deprecated\n   */\n  _proto.getInvModelMatrix = function getInvModelMatrix() {\n    if (this._inverseWorldMatFlag.flag) {\n      Matrix.invert(this.transform.worldMatrix, this._invModelMatrix);\n      this._inverseWorldMatFlag.flag = false;\n    }\n    return this._invModelMatrix;\n  };\n  _createClass(Entity, [{\n    key: \"isActive\",\n    get:\n    /**\n     * Whether to activate locally.\n     */\n    function get() {\n      return this._isActive;\n    },\n    set: function set(value) {\n      if (value !== this._isActive) {\n        this._isActive = value;\n        if (value) {\n          var parent = this._parent;\n          if (parent !== null && parent !== void 0 && parent._isActiveInHierarchy || this._isRoot && this._scene._isActiveInEngine) {\n            this._processActive();\n          }\n        } else {\n          if (this._isActiveInHierarchy) {\n            this._processInActive();\n          }\n        }\n      }\n    }\n\n    /**\n     * Whether it is active in the hierarchy.\n     */\n  }, {\n    key: \"isActiveInHierarchy\",\n    get: function get() {\n      return this._isActiveInHierarchy;\n    }\n\n    /**\n     * The parent entity.\n     */\n  }, {\n    key: \"parent\",\n    get: function get() {\n      return this._parent;\n    },\n    set: function set(value) {\n      this._setParent(value);\n    }\n\n    /**\n     * The children entities\n     */\n  }, {\n    key: \"children\",\n    get: function get() {\n      return this._children;\n    }\n\n    /**\n     * @deprecated Please use `children.length` property instead.\n     * Number of the children entities\n     */\n  }, {\n    key: \"childCount\",\n    get: function get() {\n      return this._children.length;\n    }\n\n    /**\n     * The scene the entity belongs to.\n     */\n  }, {\n    key: \"scene\",\n    get: function get() {\n      return this._scene;\n    }\n\n    /**\n     * The sibling index.\n     */\n  }, {\n    key: \"siblingIndex\",\n    get: function get() {\n      return this._siblingIndex;\n    },\n    set: function set(value) {\n      if (this._siblingIndex === -1) {\n        throw \"The entity \" + this.name + \" is not in the hierarchy\";\n      }\n      this._setSiblingIndex(this._isRoot ? this._scene._rootEntities : this._parent._children, value);\n    }\n  }]);\n  return Entity;\n}(EngineObject);\n\n/**\n * Manage a set of feature objects.\n */\nvar FeatureManager = /*#__PURE__*/function () {\n  function FeatureManager() {\n    this._features = [];\n    this._objects = [];\n  }\n  var _proto = FeatureManager.prototype;\n  /**\n   * Register a feature.\n   * @param {SceneFeature|EngineFeature} IFeature\n   */\n  _proto.registerFeature = function registerFeature(IFeature) {\n    var featureArray = this._features;\n\n    // Search by type, avoid adding\n    for (var i = 0, len = featureArray.length; i < len; i++) {\n      if (featureArray[i] === IFeature) {\n        return;\n      }\n    }\n\n    // Add to global array\n    featureArray.push(IFeature);\n\n    // Add to existing scene\n    var objectArray = this._objects;\n    for (var _i = 0, _len = objectArray.length; _i < _len; _i++) {\n      objectArray[_i].features.push(new IFeature());\n    }\n  }\n\n  /**\n   * Add an feature with functional characteristics.\n   * @param {Scene|Engine} obj - Scene or engine\n   */;\n  _proto.addObject = function addObject(obj) {\n    obj.features = [];\n    for (var i = 0, len = this._features.length; i < len; i++) {\n      var _engine;\n      obj.features.push(new this._features[i]((_engine = obj.engine) != null ? _engine : obj));\n    }\n    this._objects.push(obj);\n  }\n\n  /**\n   * Call the specified method of the feature.\n   * @param obj - Scene or engine\n   * @param method - Method name\n   * @param args - Function args\n   */;\n  _proto.callFeatureMethod = function callFeatureMethod(obj, method, args) {\n    var features = obj.features;\n    var count = features.length;\n    for (var i = 0; i < count; i++) {\n      var feature = features[i];\n      if (feature[method]) {\n        feature[method].apply(feature, args);\n      }\n    }\n  }\n\n  /**\n   * Find feature.\n   * @param obj - Scene or engine\n   * @param IFeature - plug-in\n   */;\n  _proto.findFeature = function findFeature(obj, IFeature) {\n    var features = obj.features;\n    var count = features.length;\n    for (var i = 0; i < count; i++) {\n      var feature = features[i];\n      if (feature.constructor === IFeature) {\n        return feature;\n      }\n    }\n    return undefined;\n  };\n  return FeatureManager;\n}();\n\n/**\n * The keys of the keyboard.\n * Keep up with W3C standards.(https://www.w3.org/TR/2017/CR-uievents-code-20170601/)\n */\nvar Keys;\n(function (Keys) {\n  Keys[Keys[\"Backquote\"] = 0] = \"Backquote\";\n  Keys[Keys[\"Backslash\"] = 1] = \"Backslash\";\n  Keys[Keys[\"Backspace\"] = 2] = \"Backspace\";\n  Keys[Keys[\"BracketLeft\"] = 3] = \"BracketLeft\";\n  Keys[Keys[\"BracketRight\"] = 4] = \"BracketRight\";\n  Keys[Keys[\"Comma\"] = 5] = \"Comma\";\n  Keys[Keys[\"Digit0\"] = 6] = \"Digit0\";\n  Keys[Keys[\"Digit1\"] = 7] = \"Digit1\";\n  Keys[Keys[\"Digit2\"] = 8] = \"Digit2\";\n  Keys[Keys[\"Digit3\"] = 9] = \"Digit3\";\n  Keys[Keys[\"Digit4\"] = 10] = \"Digit4\";\n  Keys[Keys[\"Digit5\"] = 11] = \"Digit5\";\n  Keys[Keys[\"Digit6\"] = 12] = \"Digit6\";\n  Keys[Keys[\"Digit7\"] = 13] = \"Digit7\";\n  Keys[Keys[\"Digit8\"] = 14] = \"Digit8\";\n  Keys[Keys[\"Digit9\"] = 15] = \"Digit9\";\n  Keys[Keys[\"Equal\"] = 16] = \"Equal\";\n  Keys[Keys[\"IntlBackslash\"] = 17] = \"IntlBackslash\";\n  Keys[Keys[\"IntlRo\"] = 18] = \"IntlRo\";\n  Keys[Keys[\"IntlYen\"] = 19] = \"IntlYen\";\n  Keys[Keys[\"KeyA\"] = 20] = \"KeyA\";\n  Keys[Keys[\"KeyB\"] = 21] = \"KeyB\";\n  Keys[Keys[\"KeyC\"] = 22] = \"KeyC\";\n  Keys[Keys[\"KeyD\"] = 23] = \"KeyD\";\n  Keys[Keys[\"KeyE\"] = 24] = \"KeyE\";\n  Keys[Keys[\"KeyF\"] = 25] = \"KeyF\";\n  Keys[Keys[\"KeyG\"] = 26] = \"KeyG\";\n  Keys[Keys[\"KeyH\"] = 27] = \"KeyH\";\n  Keys[Keys[\"KeyI\"] = 28] = \"KeyI\";\n  Keys[Keys[\"KeyJ\"] = 29] = \"KeyJ\";\n  Keys[Keys[\"KeyK\"] = 30] = \"KeyK\";\n  Keys[Keys[\"KeyL\"] = 31] = \"KeyL\";\n  Keys[Keys[\"KeyM\"] = 32] = \"KeyM\";\n  Keys[Keys[\"KeyN\"] = 33] = \"KeyN\";\n  Keys[Keys[\"KeyO\"] = 34] = \"KeyO\";\n  Keys[Keys[\"KeyP\"] = 35] = \"KeyP\";\n  Keys[Keys[\"KeyQ\"] = 36] = \"KeyQ\";\n  Keys[Keys[\"KeyR\"] = 37] = \"KeyR\";\n  Keys[Keys[\"KeyS\"] = 38] = \"KeyS\";\n  Keys[Keys[\"KeyT\"] = 39] = \"KeyT\";\n  Keys[Keys[\"KeyU\"] = 40] = \"KeyU\";\n  Keys[Keys[\"KeyV\"] = 41] = \"KeyV\";\n  Keys[Keys[\"KeyW\"] = 42] = \"KeyW\";\n  Keys[Keys[\"KeyX\"] = 43] = \"KeyX\";\n  Keys[Keys[\"KeyY\"] = 44] = \"KeyY\";\n  Keys[Keys[\"KeyZ\"] = 45] = \"KeyZ\";\n  Keys[Keys[\"Minus\"] = 46] = \"Minus\";\n  Keys[Keys[\"Period\"] = 47] = \"Period\";\n  Keys[Keys[\"Quote\"] = 48] = \"Quote\";\n  Keys[Keys[\"Semicolon\"] = 49] = \"Semicolon\";\n  Keys[Keys[\"Slash\"] = 50] = \"Slash\";\n  Keys[Keys[\"AltLeft\"] = 51] = \"AltLeft\";\n  Keys[Keys[\"AltRight\"] = 52] = \"AltRight\";\n  Keys[Keys[\"CapsLock\"] = 53] = \"CapsLock\";\n  Keys[Keys[\"ContextMenu\"] = 54] = \"ContextMenu\";\n  Keys[Keys[\"ControlLeft\"] = 55] = \"ControlLeft\";\n  Keys[Keys[\"ControlRight\"] = 56] = \"ControlRight\";\n  Keys[Keys[\"Enter\"] = 57] = \"Enter\";\n  Keys[Keys[\"MetaLeft\"] = 58] = \"MetaLeft\";\n  Keys[Keys[\"MetaRight\"] = 59] = \"MetaRight\";\n  Keys[Keys[\"ShiftLeft\"] = 60] = \"ShiftLeft\";\n  Keys[Keys[\"ShiftRight\"] = 61] = \"ShiftRight\";\n  Keys[Keys[\"Space\"] = 62] = \"Space\";\n  Keys[Keys[\"Tab\"] = 63] = \"Tab\";\n  Keys[Keys[\"Convert\"] = 64] = \"Convert\";\n  Keys[Keys[\"KanaMode\"] = 65] = \"KanaMode\";\n  Keys[Keys[\"Lang1\"] = 66] = \"Lang1\";\n  Keys[Keys[\"Lang2\"] = 67] = \"Lang2\";\n  Keys[Keys[\"Lang3\"] = 68] = \"Lang3\";\n  Keys[Keys[\"Lang4\"] = 69] = \"Lang4\";\n  Keys[Keys[\"Lang5\"] = 70] = \"Lang5\";\n  Keys[Keys[\"NonConvert\"] = 71] = \"NonConvert\";\n  Keys[Keys[\"Delete\"] = 72] = \"Delete\";\n  Keys[Keys[\"End\"] = 73] = \"End\";\n  Keys[Keys[\"Help\"] = 74] = \"Help\";\n  Keys[Keys[\"Home\"] = 75] = \"Home\";\n  Keys[Keys[\"Insert\"] = 76] = \"Insert\";\n  Keys[Keys[\"PageDown\"] = 77] = \"PageDown\";\n  Keys[Keys[\"PageUp\"] = 78] = \"PageUp\";\n  Keys[Keys[\"ArrowDown\"] = 79] = \"ArrowDown\";\n  Keys[Keys[\"ArrowLeft\"] = 80] = \"ArrowLeft\";\n  Keys[Keys[\"ArrowRight\"] = 81] = \"ArrowRight\";\n  Keys[Keys[\"ArrowUp\"] = 82] = \"ArrowUp\";\n  Keys[Keys[\"NumLock\"] = 83] = \"NumLock\";\n  Keys[Keys[\"Numpad0\"] = 84] = \"Numpad0\";\n  Keys[Keys[\"Numpad1\"] = 85] = \"Numpad1\";\n  Keys[Keys[\"Numpad2\"] = 86] = \"Numpad2\";\n  Keys[Keys[\"Numpad3\"] = 87] = \"Numpad3\";\n  Keys[Keys[\"Numpad4\"] = 88] = \"Numpad4\";\n  Keys[Keys[\"Numpad5\"] = 89] = \"Numpad5\";\n  Keys[Keys[\"Numpad6\"] = 90] = \"Numpad6\";\n  Keys[Keys[\"Numpad7\"] = 91] = \"Numpad7\";\n  Keys[Keys[\"Numpad8\"] = 92] = \"Numpad8\";\n  Keys[Keys[\"Numpad9\"] = 93] = \"Numpad9\";\n  Keys[Keys[\"NumpadAdd\"] = 94] = \"NumpadAdd\";\n  Keys[Keys[\"NumpadBackspace\"] = 95] = \"NumpadBackspace\";\n  Keys[Keys[\"NumpadClear\"] = 96] = \"NumpadClear\";\n  Keys[Keys[\"NumpadClearEntry\"] = 97] = \"NumpadClearEntry\";\n  Keys[Keys[\"NumpadComma\"] = 98] = \"NumpadComma\";\n  Keys[Keys[\"NumpadDecimal\"] = 99] = \"NumpadDecimal\";\n  Keys[Keys[\"NumpadDivide\"] = 100] = \"NumpadDivide\";\n  Keys[Keys[\"NumpadEnter\"] = 101] = \"NumpadEnter\";\n  Keys[Keys[\"NumpadEqual\"] = 102] = \"NumpadEqual\";\n  Keys[Keys[\"NumpadHash\"] = 103] = \"NumpadHash\";\n  Keys[Keys[\"NumpadMemoryAdd\"] = 104] = \"NumpadMemoryAdd\";\n  Keys[Keys[\"NumpadMemoryClear\"] = 105] = \"NumpadMemoryClear\";\n  Keys[Keys[\"NumpadMemoryRecall\"] = 106] = \"NumpadMemoryRecall\";\n  Keys[Keys[\"NumpadMemoryStore\"] = 107] = \"NumpadMemoryStore\";\n  Keys[Keys[\"NumpadMemorySubtract\"] = 108] = \"NumpadMemorySubtract\";\n  Keys[Keys[\"NumpadMultiply\"] = 109] = \"NumpadMultiply\";\n  Keys[Keys[\"NumpadParenLeft\"] = 110] = \"NumpadParenLeft\";\n  Keys[Keys[\"NumpadParenRight\"] = 111] = \"NumpadParenRight\";\n  Keys[Keys[\"NumpadStar\"] = 112] = \"NumpadStar\";\n  Keys[Keys[\"NumpadSubtract\"] = 113] = \"NumpadSubtract\";\n  Keys[Keys[\"Escape\"] = 114] = \"Escape\";\n  Keys[Keys[\"F1\"] = 115] = \"F1\";\n  Keys[Keys[\"F2\"] = 116] = \"F2\";\n  Keys[Keys[\"F3\"] = 117] = \"F3\";\n  Keys[Keys[\"F4\"] = 118] = \"F4\";\n  Keys[Keys[\"F5\"] = 119] = \"F5\";\n  Keys[Keys[\"F6\"] = 120] = \"F6\";\n  Keys[Keys[\"F7\"] = 121] = \"F7\";\n  Keys[Keys[\"F8\"] = 122] = \"F8\";\n  Keys[Keys[\"F9\"] = 123] = \"F9\";\n  Keys[Keys[\"F10\"] = 124] = \"F10\";\n  Keys[Keys[\"F11\"] = 125] = \"F11\";\n  Keys[Keys[\"F12\"] = 126] = \"F12\";\n  Keys[Keys[\"F13\"] = 127] = \"F13\";\n  Keys[Keys[\"F14\"] = 128] = \"F14\";\n  Keys[Keys[\"F15\"] = 129] = \"F15\";\n  Keys[Keys[\"Fn\"] = 130] = \"Fn\";\n  Keys[Keys[\"FnLock\"] = 131] = \"FnLock\";\n  Keys[Keys[\"PrintScreen\"] = 132] = \"PrintScreen\";\n  Keys[Keys[\"ScrollLock\"] = 133] = \"ScrollLock\";\n  Keys[Keys[\"Pause\"] = 134] = \"Pause\";\n  Keys[Keys[\"BrowserBack\"] = 135] = \"BrowserBack\";\n  Keys[Keys[\"BrowserFavorites\"] = 136] = \"BrowserFavorites\";\n  Keys[Keys[\"BrowserForward\"] = 137] = \"BrowserForward\";\n  Keys[Keys[\"BrowserHome\"] = 138] = \"BrowserHome\";\n  Keys[Keys[\"BrowserRefresh\"] = 139] = \"BrowserRefresh\";\n  Keys[Keys[\"BrowserSearch\"] = 140] = \"BrowserSearch\";\n  Keys[Keys[\"BrowserStop\"] = 141] = \"BrowserStop\";\n  Keys[Keys[\"Eject\"] = 142] = \"Eject\";\n  Keys[Keys[\"LaunchApp1\"] = 143] = \"LaunchApp1\";\n  Keys[Keys[\"LaunchApp2\"] = 144] = \"LaunchApp2\";\n  Keys[Keys[\"LaunchMail\"] = 145] = \"LaunchMail\";\n  Keys[Keys[\"MediaPlayPause\"] = 146] = \"MediaPlayPause\";\n  Keys[Keys[\"MediaSelect\"] = 147] = \"MediaSelect\";\n  Keys[Keys[\"MediaStop\"] = 148] = \"MediaStop\";\n  Keys[Keys[\"MediaTrackNext\"] = 149] = \"MediaTrackNext\";\n  Keys[Keys[\"MediaTrackPrevious\"] = 150] = \"MediaTrackPrevious\";\n  Keys[Keys[\"Power\"] = 151] = \"Power\";\n  Keys[Keys[\"Sleep\"] = 152] = \"Sleep\";\n  Keys[Keys[\"AudioVolumeDown\"] = 153] = \"AudioVolumeDown\";\n  Keys[Keys[\"AudioVolumeMute\"] = 154] = \"AudioVolumeMute\";\n  Keys[Keys[\"AudioVolumeUp\"] = 155] = \"AudioVolumeUp\";\n  Keys[Keys[\"WakeUp\"] = 156] = \"WakeUp\";\n  Keys[Keys[\"Hyper\"] = 157] = \"Hyper\";\n  Keys[Keys[\"Super\"] = 158] = \"Super\";\n  Keys[Keys[\"Turbo\"] = 159] = \"Turbo\";\n  Keys[Keys[\"Abort\"] = 160] = \"Abort\";\n  Keys[Keys[\"Resume\"] = 161] = \"Resume\";\n  Keys[Keys[\"Suspend\"] = 162] = \"Suspend\";\n  Keys[Keys[\"Again\"] = 163] = \"Again\";\n  Keys[Keys[\"Copy\"] = 164] = \"Copy\";\n  Keys[Keys[\"Cut\"] = 165] = \"Cut\";\n  Keys[Keys[\"Find\"] = 166] = \"Find\";\n  Keys[Keys[\"Open\"] = 167] = \"Open\";\n  Keys[Keys[\"Paste\"] = 168] = \"Paste\";\n  Keys[Keys[\"Props\"] = 169] = \"Props\";\n  Keys[Keys[\"Select\"] = 170] = \"Select\";\n  Keys[Keys[\"Undo\"] = 171] = \"Undo\";\n  Keys[Keys[\"Hiragana\"] = 172] = \"Hiragana\";\n  Keys[Keys[\"Katakana\"] = 173] = \"Katakana\";\n  Keys[Keys[\"Unidentified\"] = 174] = \"Unidentified\";\n})(Keys || (Keys = {}));\n\n/**\n * Keyboard Manager.\n * @internal\n */\nvar KeyboardManager = /*#__PURE__*/function () {\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /**\n   * Create a KeyboardManager.\n   */\n  function KeyboardManager(htmlCanvas) {\n    this._curHeldDownKeyToIndexMap = [];\n    this._upKeyToFrameCountMap = [];\n    this._downKeyToFrameCountMap = [];\n    this._curFrameHeldDownList = new DisorderedArray();\n    this._curFrameDownList = new DisorderedArray();\n    this._curFrameUpList = new DisorderedArray();\n    this._htmlCanvas = void 0;\n    this._nativeEvents = [];\n    this._hadListener = false;\n    this._htmlCanvas = htmlCanvas;\n    // Need to set tabIndex to make the canvas focus.\n    htmlCanvas.tabIndex = htmlCanvas.tabIndex;\n    this._onKeyEvent = this._onKeyEvent.bind(this);\n    htmlCanvas.addEventListener(\"keydown\", this._onKeyEvent);\n    htmlCanvas.addEventListener(\"keyup\", this._onKeyEvent);\n    this._hadListener = true;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = KeyboardManager.prototype;\n  _proto._update = function _update(frameCount) {\n    var nativeEvents = this._nativeEvents,\n      curFrameDownList = this._curFrameDownList,\n      curFrameUpList = this._curFrameUpList;\n    curFrameDownList.length = 0;\n    curFrameUpList.length = 0;\n    if (nativeEvents.length > 0) {\n      var curHeldDownKeyToIndexMap = this._curHeldDownKeyToIndexMap,\n        curFrameHeldDownList = this._curFrameHeldDownList,\n        downKeyToFrameCountMap = this._downKeyToFrameCountMap,\n        upKeyToFrameCountMap = this._upKeyToFrameCountMap;\n      for (var i = 0, n = nativeEvents.length; i < n; i++) {\n        var evt = nativeEvents[i];\n        var codeKey = Keys[evt.code];\n        switch (evt.type) {\n          case \"keydown\":\n            // Filter the repeated triggers of the keyboard.\n            if (curHeldDownKeyToIndexMap[codeKey] == null) {\n              curFrameDownList.add(codeKey);\n              curFrameHeldDownList.add(codeKey);\n              curHeldDownKeyToIndexMap[codeKey] = curFrameHeldDownList.length - 1;\n              downKeyToFrameCountMap[codeKey] = frameCount;\n            }\n            break;\n          case \"keyup\":\n            var delIndex = curHeldDownKeyToIndexMap[codeKey];\n            if (delIndex != null) {\n              curHeldDownKeyToIndexMap[codeKey] = null;\n              var swapCode = curFrameHeldDownList.deleteByIndex(delIndex);\n              swapCode && (curHeldDownKeyToIndexMap[swapCode] = delIndex);\n            }\n            curFrameUpList.add(codeKey);\n            upKeyToFrameCountMap[codeKey] = frameCount;\n            break;\n        }\n      }\n      nativeEvents.length = 0;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onFocus = function _onFocus() {\n    if (!this._hadListener) {\n      this._htmlCanvas.addEventListener(\"keydown\", this._onKeyEvent);\n      this._htmlCanvas.addEventListener(\"keyup\", this._onKeyEvent);\n      this._hadListener = true;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onBlur = function _onBlur() {\n    if (this._hadListener) {\n      this._htmlCanvas.removeEventListener(\"keydown\", this._onKeyEvent);\n      this._htmlCanvas.removeEventListener(\"keyup\", this._onKeyEvent);\n      this._curHeldDownKeyToIndexMap.length = 0;\n      this._curFrameHeldDownList.length = 0;\n      this._curFrameDownList.length = 0;\n      this._curFrameUpList.length = 0;\n      this._nativeEvents.length = 0;\n      this._hadListener = false;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    if (this._hadListener) {\n      this._htmlCanvas.removeEventListener(\"keydown\", this._onKeyEvent);\n      this._htmlCanvas.removeEventListener(\"keyup\", this._onKeyEvent);\n      this._hadListener = false;\n    }\n    this._curHeldDownKeyToIndexMap = null;\n    this._upKeyToFrameCountMap = null;\n    this._downKeyToFrameCountMap = null;\n    this._nativeEvents = null;\n    this._curFrameHeldDownList = null;\n    this._curFrameDownList = null;\n    this._curFrameUpList = null;\n  };\n  _proto._onKeyEvent = function _onKeyEvent(evt) {\n    evt.cancelable && evt.preventDefault();\n    this._nativeEvents.push(evt);\n  };\n  return KeyboardManager;\n}();\n\n/**\n * Camera clear flags enumeration.\n */\nvar CameraClearFlags;\n(function (CameraClearFlags) {\n  CameraClearFlags[CameraClearFlags[\"None\"] = 0] = \"None\";\n  CameraClearFlags[CameraClearFlags[\"Color\"] = 1] = \"Color\";\n  CameraClearFlags[CameraClearFlags[\"Depth\"] = 2] = \"Depth\";\n  CameraClearFlags[CameraClearFlags[\"Stencil\"] = 4] = \"Stencil\";\n  CameraClearFlags[CameraClearFlags[\"ColorDepth\"] = 3] = \"ColorDepth\";\n  CameraClearFlags[CameraClearFlags[\"ColorStencil\"] = 5] = \"ColorStencil\";\n  CameraClearFlags[CameraClearFlags[\"DepthStencil\"] = 6] = \"DepthStencil\";\n  CameraClearFlags[CameraClearFlags[\"All\"] = 7] = \"All\";\n})(CameraClearFlags || (CameraClearFlags = {}));\n\n/**\n * Structure used to get information back from a raycast or a sweep.\n */\nvar HitResult = function HitResult() {\n  this.entity = null;\n  this.distance = 0;\n  this.point = new Vector3();\n  this.normal = new Vector3();\n};\n\n/**\n * A physics manager is a collection of colliders and constraints which can interact.\n */\nvar PhysicsManager = /*#__PURE__*/function () {\n  function PhysicsManager(engine) {\n    var _this = this;\n    this._initialized = false;\n    this._engine = void 0;\n    this._restTime = 0;\n    this._colliders = new DisorderedArray();\n    this._gravity = new Vector3(0, -9.81, 0);\n    this._nativePhysicsManager = void 0;\n    this._physicalObjectsMap = {};\n    this._onContactEnter = function (obj1, obj2) {\n      var shape1 = _this._physicalObjectsMap[obj1];\n      var shape2 = _this._physicalObjectsMap[obj2];\n      var scripts = shape1.collider.entity._scripts;\n      for (var i = 0, len = scripts.length; i < len; i++) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onCollisionEnter(shape2);\n      }\n      scripts = shape2.collider.entity._scripts;\n      for (var _i = 0, _len = scripts.length; _i < _len; _i++) {\n        var _script = scripts.get(_i);\n        _script._waitHandlingInValid || _script.onCollisionEnter(shape1);\n      }\n    };\n    this._onContactExit = function (obj1, obj2) {\n      var shape1 = _this._physicalObjectsMap[obj1];\n      var shape2 = _this._physicalObjectsMap[obj2];\n      var scripts = shape1.collider.entity._scripts;\n      for (var i = 0, len = scripts.length; i < len; i++) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onCollisionExit(shape2);\n      }\n      scripts = shape2.collider.entity._scripts;\n      for (var _i2 = 0, _len2 = scripts.length; _i2 < _len2; _i2++) {\n        var _script2 = scripts.get(_i2);\n        _script2._waitHandlingInValid || _script2.onCollisionExit(shape1);\n      }\n    };\n    this._onContactStay = function (obj1, obj2) {\n      var shape1 = _this._physicalObjectsMap[obj1];\n      var shape2 = _this._physicalObjectsMap[obj2];\n      var scripts = shape1.collider.entity._scripts;\n      for (var i = 0, len = scripts.length; i < len; i++) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onCollisionStay(shape2);\n      }\n      scripts = shape2.collider.entity._scripts;\n      for (var _i3 = 0, _len3 = scripts.length; _i3 < _len3; _i3++) {\n        var _script3 = scripts.get(_i3);\n        _script3._waitHandlingInValid || _script3.onCollisionStay(shape1);\n      }\n    };\n    this._onTriggerEnter = function (obj1, obj2) {\n      var shape1 = _this._physicalObjectsMap[obj1];\n      var shape2 = _this._physicalObjectsMap[obj2];\n      var scripts = shape1.collider.entity._scripts;\n      for (var i = 0, len = scripts.length; i < len; i++) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onTriggerEnter(shape2);\n      }\n      scripts = shape2.collider.entity._scripts;\n      for (var _i4 = 0, _len4 = scripts.length; _i4 < _len4; _i4++) {\n        var _script4 = scripts.get(_i4);\n        _script4._waitHandlingInValid || _script4.onTriggerEnter(shape1);\n      }\n    };\n    this._onTriggerExit = function (obj1, obj2) {\n      var shape1 = _this._physicalObjectsMap[obj1];\n      var shape2 = _this._physicalObjectsMap[obj2];\n      var scripts = shape1.collider.entity._scripts;\n      for (var i = 0, n = scripts.length; i < n; i++) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onTriggerExit(shape2);\n      }\n      scripts = shape2.collider.entity._scripts;\n      for (var _i5 = 0, _n = scripts.length; _i5 < _n; _i5++) {\n        var _script5 = scripts.get(_i5);\n        _script5._waitHandlingInValid || _script5.onTriggerExit(shape1);\n      }\n    };\n    this._onTriggerStay = function (obj1, obj2) {\n      var shape1 = _this._physicalObjectsMap[obj1];\n      var shape2 = _this._physicalObjectsMap[obj2];\n      var scripts = shape1.collider.entity._scripts;\n      for (var i = 0, len = scripts.length; i < len; i++) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onTriggerStay(shape2);\n      }\n      scripts = shape2.collider.entity._scripts;\n      for (var _i6 = 0, _len5 = scripts.length; _i6 < _len5; _i6++) {\n        var _script6 = scripts.get(_i6);\n        _script6._waitHandlingInValid || _script6.onTriggerStay(shape1);\n      }\n    };\n    this.fixedTimeStep = 1 / 60;\n    this.maxSumTimeStep = 1 / 3;\n    this._engine = engine;\n  }\n\n  /**\n   * initialize PhysicsManager.\n   * @param physics - Physics Engine\n   */\n  var _proto = PhysicsManager.prototype;\n  _proto.initialize = function initialize(physics) {\n    if (this._initialized) {\n      return;\n    }\n    PhysicsManager._nativePhysics = physics;\n    this._nativePhysicsManager = PhysicsManager._nativePhysics.createPhysicsManager(this._onContactEnter, this._onContactExit, this._onContactStay, this._onTriggerEnter, this._onTriggerExit, this._onTriggerStay);\n    this._initialized = true;\n  }\n\n  /**\n   * Casts a ray through the Scene and returns the first hit.\n   * @param ray - The ray\n   * @returns Returns True if the ray intersects with a collider, otherwise false\n   */;\n  _proto.raycast = function raycast(ray, distanceOrResult, layerMaskOrResult, outHitResult) {\n    var _this2 = this;\n    var hitResult;\n    var distance = Number.MAX_VALUE;\n    if (typeof distanceOrResult === \"number\") {\n      distance = distanceOrResult;\n    } else if (distanceOrResult != undefined) {\n      hitResult = distanceOrResult;\n    }\n    var layerMask = Layer.Everything;\n    if (typeof layerMaskOrResult === \"number\") {\n      layerMask = layerMaskOrResult;\n    } else if (layerMaskOrResult != undefined) {\n      hitResult = layerMaskOrResult;\n    }\n    if (outHitResult) {\n      hitResult = outHitResult;\n    }\n    if (hitResult != undefined) {\n      var result = this._nativePhysicsManager.raycast(ray, distance, function (idx, distance, position, normal) {\n        hitResult.entity = _this2._physicalObjectsMap[idx]._collider.entity;\n        hitResult.distance = distance;\n        hitResult.normal.copyFrom(normal);\n        hitResult.point.copyFrom(position);\n      });\n      if (result) {\n        if (hitResult.entity.layer & layerMask) {\n          return true;\n        } else {\n          hitResult.entity = null;\n          hitResult.distance = 0;\n          hitResult.point.set(0, 0, 0);\n          hitResult.normal.set(0, 0, 0);\n          return false;\n        }\n      }\n      return false;\n    } else {\n      return this._nativePhysicsManager.raycast(ray, distance);\n    }\n  }\n\n  /**\n   * Call on every frame to update pose of objects.\n   * @internal\n   */;\n  _proto._update = function _update(deltaTime) {\n    var fixedTimeStep = this.fixedTimeStep,\n      nativePhysicsManager = this._nativePhysicsManager;\n    var componentsManager = this._engine._componentsManager;\n    var simulateTime = deltaTime + this._restTime;\n    var step = Math.floor(Math.min(this.maxSumTimeStep, simulateTime) / fixedTimeStep);\n    this._restTime = simulateTime - step * fixedTimeStep;\n    for (var i = 0; i < step; i++) {\n      componentsManager.callScriptOnPhysicsUpdate();\n      this._callColliderOnUpdate();\n      nativePhysicsManager.update(fixedTimeStep);\n      this._callColliderOnLateUpdate();\n    }\n  }\n\n  /**\n   * Add ColliderShape into the manager.\n   * @param colliderShape - The Collider Shape.\n   * @internal\n   */;\n  _proto._addColliderShape = function _addColliderShape(colliderShape) {\n    this._physicalObjectsMap[colliderShape.id] = colliderShape;\n    this._nativePhysicsManager.addColliderShape(colliderShape._nativeShape);\n  }\n\n  /**\n   * Remove ColliderShape.\n   * @param colliderShape - The Collider Shape.\n   * @internal\n   */;\n  _proto._removeColliderShape = function _removeColliderShape(colliderShape) {\n    delete this._physicalObjectsMap[colliderShape.id];\n    this._nativePhysicsManager.removeColliderShape(colliderShape._nativeShape);\n  }\n\n  /**\n   * Add collider into the manager.\n   * @param collider - StaticCollider or DynamicCollider.\n   * @internal\n   */;\n  _proto._addCollider = function _addCollider(collider) {\n    if (collider._index === -1) {\n      collider._index = this._colliders.length;\n      this._colliders.add(collider);\n    }\n    this._nativePhysicsManager.addCollider(collider._nativeCollider);\n  }\n\n  /**\n   * Add character controller into the manager.\n   * @param controller - Character Controller.\n   * @internal\n   */;\n  _proto._addCharacterController = function _addCharacterController(controller) {\n    if (controller._index === -1) {\n      controller._index = this._colliders.length;\n      this._colliders.add(controller);\n    }\n    this._nativePhysicsManager.addCharacterController(controller._nativeCollider);\n  }\n\n  /**\n   * Remove collider.\n   * @param collider - StaticCollider or DynamicCollider.\n   * @internal\n   */;\n  _proto._removeCollider = function _removeCollider(collider) {\n    var replaced = this._colliders.deleteByIndex(collider._index);\n    replaced && (replaced._index = collider._index);\n    collider._index = -1;\n    this._nativePhysicsManager.removeCollider(collider._nativeCollider);\n  }\n\n  /**\n   * Remove collider.\n   * @param controller - Character Controller.\n   * @internal\n   */;\n  _proto._removeCharacterController = function _removeCharacterController(controller) {\n    var replaced = this._colliders.deleteByIndex(controller._index);\n    replaced && (replaced._index = controller._index);\n    controller._index = -1;\n    this._nativePhysicsManager.removeCharacterController(controller._nativeCollider);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._callColliderOnUpdate = function _callColliderOnUpdate() {\n    var elements = this._colliders._elements;\n    for (var i = this._colliders.length - 1; i >= 0; --i) {\n      elements[i]._onUpdate();\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._callColliderOnLateUpdate = function _callColliderOnLateUpdate() {\n    var elements = this._colliders._elements;\n    for (var i = this._colliders.length - 1; i >= 0; --i) {\n      elements[i]._onLateUpdate();\n    }\n  };\n  _createClass(PhysicsManager, [{\n    key: \"gravity\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /** The fixed time step in seconds at which physics are performed. */\n\n    /** The max sum of time step in seconds one frame. */\n\n    /**\n     * The gravity of physics scene.\n     */\n    function get() {\n      return this._gravity;\n    },\n    set: function set(value) {\n      var gravity = this._gravity;\n      if (gravity !== value) {\n        gravity.copyFrom(value);\n      }\n      this._nativePhysicsManager.setGravity(gravity);\n    }\n  }]);\n  return PhysicsManager;\n}();\nPhysicsManager._nativePhysics = void 0;\n\n/**\n * Describes how physics materials of the colliding objects are combined.\n */\nvar PhysicsMaterialCombineMode;\n(function (PhysicsMaterialCombineMode) {\n  PhysicsMaterialCombineMode[PhysicsMaterialCombineMode[\"Average\"] = 0] = \"Average\";\n  PhysicsMaterialCombineMode[PhysicsMaterialCombineMode[\"Minimum\"] = 1] = \"Minimum\";\n  PhysicsMaterialCombineMode[PhysicsMaterialCombineMode[\"Multiply\"] = 2] = \"Multiply\";\n  PhysicsMaterialCombineMode[PhysicsMaterialCombineMode[\"Maximum\"] = 3] = \"Maximum\";\n})(PhysicsMaterialCombineMode || (PhysicsMaterialCombineMode = {}));\n\n/**\n * Material class to represent a set of surface properties.\n */\nvar PhysicsMaterial = /*#__PURE__*/function () {\n  /** @internal */\n\n  function PhysicsMaterial() {\n    this._bounciness = 0.1;\n    this._dynamicFriction = 0.1;\n    this._staticFriction = 0.1;\n    this._bounceCombine = PhysicsMaterialCombineMode.Average;\n    this._frictionCombine = PhysicsMaterialCombineMode.Average;\n    this._nativeMaterial = void 0;\n    this._nativeMaterial = PhysicsManager._nativePhysics.createPhysicsMaterial(this._staticFriction, this._dynamicFriction, this._bounciness, this._bounceCombine, this._frictionCombine);\n  }\n\n  /**\n   * The coefficient of bounciness.\n   */\n  var _proto = PhysicsMaterial.prototype;\n  /**\n   * @internal\n   */\n  _proto._destroy = function _destroy() {\n    this._nativeMaterial.destroy();\n  };\n  _createClass(PhysicsMaterial, [{\n    key: \"bounciness\",\n    get: function get() {\n      return this._bounciness;\n    },\n    set: function set(value) {\n      this._bounciness = value;\n      this._nativeMaterial.setBounciness(value);\n    }\n\n    /**\n     * The DynamicFriction value.\n     */\n  }, {\n    key: \"dynamicFriction\",\n    get: function get() {\n      return this._dynamicFriction;\n    },\n    set: function set(value) {\n      this._dynamicFriction = value;\n      this._nativeMaterial.setDynamicFriction(value);\n    }\n\n    /**\n     * The coefficient of static friction.\n     */\n  }, {\n    key: \"staticFriction\",\n    get: function get() {\n      return this._staticFriction;\n    },\n    set: function set(value) {\n      this._staticFriction = value;\n      this._nativeMaterial.setStaticFriction(value);\n    }\n\n    /**\n     * The restitution combine mode.\n     */\n  }, {\n    key: \"bounceCombine\",\n    get: function get() {\n      return this._bounceCombine;\n    },\n    set: function set(value) {\n      this._bounceCombine = value;\n      this._nativeMaterial.setBounceCombine(value);\n    }\n\n    /**\n     * The friction combine mode.\n     */\n  }, {\n    key: \"frictionCombine\",\n    get: function get() {\n      return this._frictionCombine;\n    },\n    set: function set(value) {\n      this._frictionCombine = value;\n      this._nativeMaterial.setFrictionCombine(value);\n    }\n  }]);\n  return PhysicsMaterial;\n}();\n\nvar _dec$5, _class$c, _class2$a, _descriptor$9;\n/**\n * Base class for all colliders.\n * @decorator `@dependentComponents(Transform)`\n */\nvar Collider = (_dec$5 = dependentComponents(Transform), _dec$5(_class$c = (_class2$a = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Collider, _Component);\n  /**\n   * @internal\n   */\n  function Collider(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"_index\", _descriptor$9, _assertThisInitialized(_this));\n    _this._nativeCollider = void 0;\n    _this._updateFlag = void 0;\n    _this._shapes = [];\n    _this._updateFlag = _this.entity.transform.registerWorldChangeFlag();\n    return _this;\n  }\n\n  /**\n   * Add collider shape on this collider.\n   * @param shape - Collider shape\n   */\n  var _proto = Collider.prototype;\n  _proto.addShape = function addShape(shape) {\n    var oldCollider = shape._collider;\n    if (oldCollider !== this) {\n      if (oldCollider) {\n        oldCollider.removeShape(shape);\n      }\n      this._shapes.push(shape);\n      this.engine.physicsManager._addColliderShape(shape);\n      shape._collider = this;\n      this._nativeCollider.addShape(shape._nativeShape);\n    }\n  }\n\n  /**\n   * Remove a collider shape.\n   * @param shape - The collider shape.\n   */;\n  _proto.removeShape = function removeShape(shape) {\n    var index = this._shapes.indexOf(shape);\n    if (index !== -1) {\n      this._shapes.splice(index, 1);\n      this.engine.physicsManager._removeColliderShape(shape);\n      shape._collider = null;\n      this._nativeCollider.removeShape(shape._nativeShape);\n    }\n  }\n\n  /**\n   * Remove all shape attached.\n   */;\n  _proto.clearShapes = function clearShapes() {\n    var shapes = this._shapes;\n    for (var i = 0, n = shapes.length; i < n; i++) {\n      var shape = shapes[i];\n      this.engine.physicsManager._removeColliderShape(shape);\n      shape._destroy();\n      this._nativeCollider.removeShape(shape._nativeShape);\n    }\n    shapes.length = 0;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onUpdate = function _onUpdate() {\n    if (this._updateFlag.flag) {\n      var transform = this.entity.transform;\n      this._nativeCollider.setWorldTransform(transform.worldPosition, transform.worldRotationQuaternion);\n      var worldScale = transform.lossyWorldScale;\n      for (var i = 0, n = this.shapes.length; i < n; i++) {\n        this.shapes[i]._nativeShape.setWorldScale(worldScale);\n      }\n      this._updateFlag.flag = false;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onLateUpdate = function _onLateUpdate() {}\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onEnable = function _onEnable() {\n    this.engine.physicsManager._addCollider(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.engine.physicsManager._removeCollider(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    this.clearShapes();\n    this._nativeCollider.destroy();\n  };\n  _createClass(Collider, [{\n    key: \"shapes\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /**\n     * The shapes of this collider.\n     */\n    function get() {\n      return this._shapes;\n    }\n  }]);\n  return Collider;\n}(Component), (_descriptor$9 = _applyDecoratedDescriptor(_class2$a.prototype, \"_index\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n})), _class2$a)) || _class$c);\n\n/**\n * The up axis of the collider shape.\n */\nvar ControllerNonWalkableMode;\n(function (ControllerNonWalkableMode) {\n  ControllerNonWalkableMode[ControllerNonWalkableMode[\"PreventClimbing\"] = 0] = \"PreventClimbing\";\n  ControllerNonWalkableMode[ControllerNonWalkableMode[\"PreventClimbingAndForceSliding\"] = 1] = \"PreventClimbingAndForceSliding\";\n})(ControllerNonWalkableMode || (ControllerNonWalkableMode = {}));\n\n/**\n * The character controllers.\n */\nvar CharacterController = /*#__PURE__*/function (_Collider) {\n  _inheritsLoose(CharacterController, _Collider);\n  /**\n   * @internal\n   */\n  function CharacterController(entity) {\n    var _this;\n    _this = _Collider.call(this, entity) || this;\n    _this._index = -1;\n    _this._stepOffset = 0;\n    _this._nonWalkableMode = ControllerNonWalkableMode.PreventClimbing;\n    _this._upDirection = new Vector3(0, 1, 0);\n    _this._slopeLimit = 0;\n    _this._nativeCollider = PhysicsManager._nativePhysics.createCharacterController();\n    return _this;\n  }\n\n  /**\n   * Moves the character using a \"collide-and-slide\" algorithm.\n   * @param disp - Displacement vector\n   * @param minDist - The minimum travelled distance to consider.\n   * @param elapsedTime - Time elapsed since last call\n   * @return flags - The ControllerCollisionFlag\n   */\n  var _proto = CharacterController.prototype;\n  _proto.move = function move(disp, minDist, elapsedTime) {\n    return this._nativeCollider.move(disp, minDist, elapsedTime);\n  }\n\n  /**\n   * Add collider shape on this controller.\n   * @param shape - Collider shape\n   * @override\n   */;\n  _proto.addShape = function addShape(shape) {\n    if (this._shapes.length > 0) {\n      throw \"only allow single shape on controller!\";\n    }\n    _Collider.prototype.addShape.call(this, shape);\n    this._updateFlag.flag = true;\n  }\n\n  /**\n   * Remove all shape attached.\n   * @override\n   */;\n  _proto.clearShapes = function clearShapes() {\n    if (this._shapes.length > 0) {\n      _Collider.prototype.removeShape.call(this, this._shapes[0]);\n    }\n  }\n\n  /**\n   * @internal\n   * @override\n   */;\n  _proto._onUpdate = function _onUpdate() {\n    if (this._updateFlag.flag) {\n      var transform = this.entity.transform;\n      var shapes = this.shapes;\n      this._nativeCollider.setWorldPosition(transform.worldPosition);\n      var worldScale = transform.lossyWorldScale;\n      for (var i = 0, n = shapes.length; i < n; i++) {\n        shapes[i]._nativeShape.setWorldScale(worldScale);\n      }\n      this._updateFlag.flag = false;\n    }\n  }\n\n  /**\n   * @internal\n   * @override\n   */;\n  _proto._onLateUpdate = function _onLateUpdate() {\n    var position = this.entity.transform.worldPosition;\n    this._nativeCollider.getWorldPosition(position);\n    this.entity.transform.worldPosition = position;\n    this._updateFlag.flag = false;\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onEnable = function _onEnable() {\n    this.engine.physicsManager._addCharacterController(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.engine.physicsManager._removeCharacterController(this);\n  };\n  _createClass(CharacterController, [{\n    key: \"stepOffset\",\n    get: /** @internal */\n\n    /**\n     * The step offset for the controller.\n     */\n    function get() {\n      return this._stepOffset;\n    },\n    set: function set(value) {\n      this._stepOffset = value;\n      this._nativeCollider.setStepOffset(value);\n    }\n\n    /**\n     * The value of the non-walkable mode.\n     */\n  }, {\n    key: \"nonWalkableMode\",\n    get: function get() {\n      return this._nonWalkableMode;\n    },\n    set: function set(value) {\n      this._nonWalkableMode = value;\n      this._nativeCollider.setNonWalkableMode(value);\n    }\n\n    /**\n     * The up direction for the controller.\n     */\n  }, {\n    key: \"upDirection\",\n    get: function get() {\n      return this._upDirection;\n    },\n    set: function set(value) {\n      if (this._upDirection !== value) {\n        this._upDirection.copyFrom(value);\n      }\n      this._nativeCollider.setUpDirection(this._upDirection);\n    }\n\n    /**\n     * The slope limit for the controller.\n     */\n  }, {\n    key: \"slopeLimit\",\n    get: function get() {\n      return this._slopeLimit;\n    },\n    set: function set(value) {\n      this._slopeLimit = value;\n      this._nativeCollider.setSlopeLimit(value);\n    }\n  }]);\n  return CharacterController;\n}(Collider);\n\n/**\n * Abstract class for collider shapes.\n */\nvar ColliderShape = /*#__PURE__*/function () {\n  function ColliderShape() {\n    this._collider = void 0;\n    this._nativeShape = void 0;\n    this._id = void 0;\n    this._position = new Vector3();\n    this._material = void 0;\n    this._isTrigger = false;\n    this._isSceneQuery = true;\n    this._contactOffset = 0;\n    this._material = new PhysicsMaterial();\n    this._id = ColliderShape._idGenerator++;\n  }\n\n  /**\n   * Set local position of collider shape\n   * @param x - The x component of the vector, default 0\n   * @param y - The y component of the vector, default 0\n   * @param z - The z component of the vector, default 0\n   */\n  var _proto = ColliderShape.prototype;\n  _proto.setPosition = function setPosition(x, y, z) {\n    this._position.set(x, y, z);\n    this._nativeShape.setPosition(this._position);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    this._material._destroy();\n    this._nativeShape.destroy();\n  };\n  _createClass(ColliderShape, [{\n    key: \"collider\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /**\n     * Collider owner of this shape.\n     */\n    function get() {\n      return this._collider;\n    }\n\n    /**\n     * Unique id for this shape.\n     */\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this._id;\n    }\n\n    /**\n     * Contact offset for this shape.\n     */\n  }, {\n    key: \"contactOffset\",\n    get: function get() {\n      return this._contactOffset;\n    },\n    set: function set(value) {\n      this._contactOffset = value;\n      this._nativeShape.setContactOffset(value);\n    }\n\n    /**\n     * Physical material.\n     */\n  }, {\n    key: \"material\",\n    get: function get() {\n      return this._material;\n    },\n    set: function set(value) {\n      this._material = value;\n      this._nativeShape.setMaterial(value._nativeMaterial);\n    }\n\n    /**\n     * The local position of this ColliderShape.\n     */\n  }, {\n    key: \"position\",\n    get: function get() {\n      return this._position;\n    },\n    set: function set(value) {\n      if (this._position !== value) {\n        this._position.copyFrom(value);\n      }\n      this._nativeShape.setPosition(value);\n    }\n\n    /**\n     * True for TriggerShape, false for SimulationShape.\n     */\n  }, {\n    key: \"isTrigger\",\n    get: function get() {\n      return this._isTrigger;\n    },\n    set: function set(value) {\n      this._isTrigger = value;\n      this._nativeShape.setIsTrigger(value);\n    }\n  }]);\n  return ColliderShape;\n}();\nColliderShape._idGenerator = 0;\n\n/**\n * Physical collider shape for box.\n */\nvar BoxColliderShape = /*#__PURE__*/function (_ColliderShape) {\n  _inheritsLoose(BoxColliderShape, _ColliderShape);\n  function BoxColliderShape() {\n    var _this;\n    _this = _ColliderShape.call(this) || this;\n    _this._size = new Vector3(1, 1, 1);\n    _this._nativeShape = PhysicsManager._nativePhysics.createBoxColliderShape(_this._id, _this._size, _this._material._nativeMaterial);\n    return _this;\n  }\n\n  /**\n   * Set size of box.\n   * @param x - Size of x-axis\n   * @param y - Size of y-axis\n   * @param z - Size of z-axis\n   */\n  var _proto = BoxColliderShape.prototype;\n  _proto.setSize = function setSize(x, y, z) {\n    this._size.x = x;\n    this._size.y = y;\n    this._size.z = z;\n    this._nativeShape.setSize(this._size);\n  };\n  _createClass(BoxColliderShape, [{\n    key: \"size\",\n    get:\n    /**\n     * Size of box shape.\n     */\n    function get() {\n      return this._size;\n    },\n    set: function set(value) {\n      if (this._size != value) {\n        this._size.copyFrom(value);\n      }\n      this._nativeShape.setSize(value);\n    }\n  }]);\n  return BoxColliderShape;\n}(ColliderShape);\n\n/**\n * Physical collider shape for sphere.\n */\nvar SphereColliderShape = /*#__PURE__*/function (_ColliderShape) {\n  _inheritsLoose(SphereColliderShape, _ColliderShape);\n  function SphereColliderShape() {\n    var _this;\n    _this = _ColliderShape.call(this) || this;\n    _this._radius = 1;\n    _this._nativeShape = PhysicsManager._nativePhysics.createSphereColliderShape(_this._id, _this._radius, _this._material._nativeMaterial);\n    return _this;\n  }\n  _createClass(SphereColliderShape, [{\n    key: \"radius\",\n    get:\n    /**\n     * Radius of sphere shape.\n     */\n    function get() {\n      return this._radius;\n    },\n    set: function set(value) {\n      this._radius = value;\n      this._nativeShape.setRadius(value);\n    }\n  }]);\n  return SphereColliderShape;\n}(ColliderShape);\n\n/**\n * Physical collider shape plane.\n */\nvar PlaneColliderShape = /*#__PURE__*/function (_ColliderShape) {\n  _inheritsLoose(PlaneColliderShape, _ColliderShape);\n  function PlaneColliderShape() {\n    var _this;\n    _this = _ColliderShape.call(this) || this;\n    _this._rotation = new Vector3();\n    _this._nativeShape = PhysicsManager._nativePhysics.createPlaneColliderShape(_this._id, _this._material._nativeMaterial);\n    return _this;\n  }\n\n  /**\n   * Set the local rotation of this plane.\n   * @param x - Radian of yaw\n   * @param y - Radian of pitch\n   * @param z - Radian of roll\n   */\n  var _proto = PlaneColliderShape.prototype;\n  _proto.setRotation = function setRotation(x, y, z) {\n    this._rotation.set(x, y, z);\n    this._nativeShape.setRotation(this._rotation);\n  };\n  _createClass(PlaneColliderShape, [{\n    key: \"rotation\",\n    get:\n    /**\n     * The local rotation of this plane.\n     */\n    function get() {\n      return this._rotation;\n    },\n    set: function set(value) {\n      if (this._rotation != value) {\n        this._rotation.copyFrom(value);\n      }\n      this._nativeShape.setRotation(value);\n    }\n  }]);\n  return PlaneColliderShape;\n}(ColliderShape);\n\n/**\n * The up axis of the collider shape.\n */\nvar ColliderShapeUpAxis;\n(function (ColliderShapeUpAxis) {\n  ColliderShapeUpAxis[ColliderShapeUpAxis[\"X\"] = 0] = \"X\";\n  ColliderShapeUpAxis[ColliderShapeUpAxis[\"Y\"] = 1] = \"Y\";\n  ColliderShapeUpAxis[ColliderShapeUpAxis[\"Z\"] = 2] = \"Z\";\n})(ColliderShapeUpAxis || (ColliderShapeUpAxis = {}));\n\n/**\n * Physical collider shape for capsule.\n */\nvar CapsuleColliderShape = /*#__PURE__*/function (_ColliderShape) {\n  _inheritsLoose(CapsuleColliderShape, _ColliderShape);\n  function CapsuleColliderShape() {\n    var _this;\n    _this = _ColliderShape.call(this) || this;\n    _this._radius = 1;\n    _this._height = 2;\n    _this._upAxis = ColliderShapeUpAxis.Y;\n    _this._nativeShape = PhysicsManager._nativePhysics.createCapsuleColliderShape(_this._id, _this._radius, _this._height, _this._material._nativeMaterial);\n    _this._nativeShape.setUpAxis(ColliderShapeUpAxis.Y);\n    return _this;\n  }\n  _createClass(CapsuleColliderShape, [{\n    key: \"radius\",\n    get:\n    /**\n     * Radius of capsule.\n     */\n    function get() {\n      return this._radius;\n    },\n    set: function set(value) {\n      this._radius = value;\n      this._nativeShape.setRadius(value);\n    }\n\n    /**\n     * Height of capsule.\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      this._height = value;\n      this._nativeShape.setHeight(value);\n    }\n\n    /**\n     * Up axis of capsule.\n     */\n  }, {\n    key: \"upAxis\",\n    get: function get() {\n      return this._upAxis;\n    },\n    set: function set(value) {\n      this._upAxis = value;\n      this._nativeShape.setUpAxis(value);\n    }\n  }]);\n  return CapsuleColliderShape;\n}(ColliderShape);\n\nvar _dec$4, _class$b;\n/**\n * A base class providing common functionality for joints.\n * @decorator `@dependentComponents(Collider)`\n */\nvar Joint = (_dec$4 = dependentComponents(Collider), _dec$4(_class$b = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Joint, _Component);\n  function Joint(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _this._connectedCollider = new JointCollider();\n    _this._collider = new JointCollider();\n    _this._nativeJoint = void 0;\n    _this._force = 0;\n    _this._torque = 0;\n    _this._connectedCollider.localPosition = new Vector3();\n    return _this;\n  }\n  _createClass(Joint, [{\n    key: \"connectedCollider\",\n    get:\n    /**\n     * The connected collider.\n     */\n    function get() {\n      return this._connectedCollider.collider;\n    },\n    set: function set(value) {\n      if (this._connectedCollider.collider !== value) {\n        this._connectedCollider.collider = value;\n        this._nativeJoint.setConnectedCollider(value._nativeCollider);\n      }\n    }\n\n    /**\n     * The connected anchor position.\n     * @remarks If connectedCollider is set, this anchor is relative offset, or the anchor is world position.\n     */\n  }, {\n    key: \"connectedAnchor\",\n    get: function get() {\n      return this._connectedCollider.localPosition;\n    },\n    set: function set(value) {\n      var connectedAnchor = this._connectedCollider.localPosition;\n      if (value !== connectedAnchor) {\n        connectedAnchor.copyFrom(value);\n      }\n      this._nativeJoint.setConnectedAnchor(value);\n    }\n\n    /**\n     *  The scale to apply to the inverse mass of collider 0 for resolving this constraint.\n     */\n  }, {\n    key: \"connectedMassScale\",\n    get: function get() {\n      return this._connectedCollider.massScale;\n    },\n    set: function set(value) {\n      if (value !== this._connectedCollider.massScale) {\n        this._connectedCollider.massScale = value;\n        this._nativeJoint.setConnectedMassScale(value);\n      }\n    }\n\n    /**\n     * The scale to apply to the inverse inertia of collider0 for resolving this constraint.\n     */\n  }, {\n    key: \"connectedInertiaScale\",\n    get: function get() {\n      return this._connectedCollider.inertiaScale;\n    },\n    set: function set(value) {\n      if (value !== this._connectedCollider.inertiaScale) {\n        this._connectedCollider.inertiaScale = value;\n        this._nativeJoint.setConnectedInertiaScale(value);\n      }\n    }\n\n    /**\n     * The scale to apply to the inverse mass of collider 1 for resolving this constraint.\n     */\n  }, {\n    key: \"massScale\",\n    get: function get() {\n      return this._collider.massScale;\n    },\n    set: function set(value) {\n      if (value !== this._collider.massScale) {\n        this._collider.massScale = value;\n        this._nativeJoint.setMassScale(value);\n      }\n    }\n\n    /**\n     * The scale to apply to the inverse inertia of collider1 for resolving this constraint.\n     */\n  }, {\n    key: \"inertiaScale\",\n    get: function get() {\n      return this._collider.inertiaScale;\n    },\n    set: function set(value) {\n      if (value !== this._collider.inertiaScale) {\n        this._collider.inertiaScale = value;\n        this._nativeJoint.setInertiaScale(value);\n      }\n    }\n\n    /**\n     * The maximum force the joint can apply before breaking.\n     */\n  }, {\n    key: \"breakForce\",\n    get: function get() {\n      return this._force;\n    },\n    set: function set(value) {\n      if (value !== this._force) {\n        this._force = value;\n        this._nativeJoint.setBreakForce(value);\n      }\n    }\n\n    /**\n     * The maximum torque the joint can apply before breaking.\n     */\n  }, {\n    key: \"breakTorque\",\n    get: function get() {\n      return this._torque;\n    },\n    set: function set(value) {\n      if (value !== this._torque) {\n        this._torque = value;\n        this._nativeJoint.setBreakTorque(value);\n      }\n    }\n  }]);\n  return Joint;\n}(Component)) || _class$b);\n\n/**\n * @internal\n */\nvar JointCollider = function JointCollider() {\n  this.collider = null;\n  this.localPosition = void 0;\n  this.localRotation = void 0;\n  this.massScale = 0;\n  this.inertiaScale = 0;\n};\n\n/*\n * A fixed joint permits no relative movement between two colliders. ie the colliders are glued together.\n */\nvar FixedJoint = /*#__PURE__*/function (_Joint) {\n  _inheritsLoose(FixedJoint, _Joint);\n  function FixedJoint() {\n    return _Joint.apply(this, arguments) || this;\n  }\n  var _proto = FixedJoint.prototype;\n  /**\n   * @override\n   * @internal\n   */\n  _proto._onAwake = function _onAwake() {\n    var collider = this._collider;\n    collider.collider = this.entity.getComponent(Collider);\n    this._nativeJoint = PhysicsManager._nativePhysics.createFixedJoint(collider.collider._nativeCollider);\n  };\n  return FixedJoint;\n}(Joint);\n\n/**\n * Flags specific to the Hinge Joint.\n * @internal\n */\nvar HingeJointFlag;\n(function (HingeJointFlag) {\n  HingeJointFlag[HingeJointFlag[\"LimitEnabled\"] = 1] = \"LimitEnabled\";\n  HingeJointFlag[HingeJointFlag[\"DriveEnabled\"] = 2] = \"DriveEnabled\";\n  HingeJointFlag[HingeJointFlag[\"DriveFreeSpin\"] = 4] = \"DriveFreeSpin\";\n})(HingeJointFlag || (HingeJointFlag = {}));\n\n/**\n * A joint which behaves in a similar way to a hinge or axle.\n */\nvar HingeJoint = /*#__PURE__*/function (_Joint) {\n  _inheritsLoose(HingeJoint, _Joint);\n  function HingeJoint() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Joint.call.apply(_Joint, [this].concat(args)) || this;\n    _this._axis = new Vector3(1, 0, 0);\n    _this._hingeFlags = 0;\n    _this._useSpring = false;\n    _this._jointMonitor = void 0;\n    _this._limits = void 0;\n    return _this;\n  }\n  var _proto = HingeJoint.prototype;\n  /**\n   * @override\n   * @internal\n   */\n  _proto._onAwake = function _onAwake() {\n    var collider = this._collider;\n    collider.localPosition = new Vector3();\n    collider.collider = this.entity.getComponent(Collider);\n    this._nativeJoint = PhysicsManager._nativePhysics.createHingeJoint(collider.collider._nativeCollider);\n  };\n  _createClass(HingeJoint, [{\n    key: \"axis\",\n    get:\n    /**\n     * The anchor rotation.\n     */\n    function get() {\n      return this._axis;\n    },\n    set: function set(value) {\n      var axis = this._axis;\n      if (value !== axis) {\n        axis.copyFrom(value);\n      }\n      this._nativeJoint.setAxis(axis);\n    }\n\n    /**\n     * The swing offset.\n     */\n  }, {\n    key: \"swingOffset\",\n    get: function get() {\n      return this._collider.localPosition;\n    },\n    set: function set(value) {\n      var swingOffset = this._collider.localPosition;\n      if (value !== swingOffset) {\n        swingOffset.copyFrom(value);\n      }\n      this._nativeJoint.setSwingOffset(swingOffset);\n    }\n\n    /**\n     * The current angle in degrees of the joint relative to its rest position.\n     */\n  }, {\n    key: \"angle\",\n    get: function get() {\n      return this._nativeJoint.getAngle();\n    }\n\n    /**\n     * The angular velocity of the joint in degrees per second.\n     */\n  }, {\n    key: \"velocity\",\n    get: function get() {\n      return this._nativeJoint.getVelocity();\n    }\n\n    /**\n     * Enables the joint's limits. Disabled by default.\n     */\n  }, {\n    key: \"useLimits\",\n    get: function get() {\n      return (this._hingeFlags & HingeJointFlag.LimitEnabled) == HingeJointFlag.LimitEnabled;\n    },\n    set: function set(value) {\n      if (value !== this.useLimits) {\n        this._hingeFlags |= HingeJointFlag.LimitEnabled;\n      }\n      this._nativeJoint.setHingeJointFlag(HingeJointFlag.LimitEnabled, value);\n    }\n\n    /**\n     * Enables the joint's motor. Disabled by default.\n     */\n  }, {\n    key: \"useMotor\",\n    get: function get() {\n      return (this._hingeFlags & HingeJointFlag.DriveEnabled) == HingeJointFlag.DriveEnabled;\n    },\n    set: function set(value) {\n      if (value !== this.useMotor) {\n        this._hingeFlags |= HingeJointFlag.DriveEnabled;\n      }\n      this._nativeJoint.setHingeJointFlag(HingeJointFlag.DriveEnabled, value);\n    }\n\n    /**\n     * Enables the joint's spring. Disabled by default.\n     */\n  }, {\n    key: \"useSpring\",\n    get: function get() {\n      return this._useSpring;\n    },\n    set: function set(value) {\n      this._useSpring = value;\n      this.limits = this._limits;\n    }\n\n    /**\n     * The motor will apply a force up to a maximum force to achieve the target velocity in degrees per second.\n     */\n  }, {\n    key: \"motor\",\n    get: function get() {\n      return this._jointMonitor;\n    },\n    set: function set(value) {\n      this._jointMonitor = value;\n      this._nativeJoint.setDriveVelocity(value.targetVelocity);\n      this._nativeJoint.setDriveForceLimit(value.forceLimit);\n      this._nativeJoint.setDriveGearRatio(value.gearRation);\n      this._nativeJoint.setHingeJointFlag(HingeJointFlag.DriveFreeSpin, value.freeSpin);\n    }\n\n    /**\n     * Limit of angular rotation (in degrees) on the hinge joint.\n     */\n  }, {\n    key: \"limits\",\n    get: function get() {\n      return this._limits;\n    },\n    set: function set(value) {\n      this._limits = value;\n      if (this.useSpring) {\n        this._nativeJoint.setSoftLimit(value.min, value.max, value.stiffness, value.damping);\n      } else {\n        this._nativeJoint.setHardLimit(value.min, value.max, value.contactDistance);\n      }\n    }\n  }]);\n  return HingeJoint;\n}(Joint);\n\n/**\n * A joint that maintains an upper or lower bound (or both) on the distance between two points on different objects.\n */\nvar SpringJoint = /*#__PURE__*/function (_Joint) {\n  _inheritsLoose(SpringJoint, _Joint);\n  function SpringJoint() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Joint.call.apply(_Joint, [this].concat(args)) || this;\n    _this._minDistance = 0;\n    _this._maxDistance = 0;\n    _this._tolerance = 0.25;\n    _this._stiffness = 0;\n    _this._damping = 0;\n    return _this;\n  }\n  var _proto = SpringJoint.prototype;\n  /**\n   * @override\n   * @internal\n   */\n  _proto._onAwake = function _onAwake() {\n    var collider = this._collider;\n    collider.localPosition = new Vector3();\n    collider.collider = this.entity.getComponent(Collider);\n    this._nativeJoint = PhysicsManager._nativePhysics.createSpringJoint(collider.collider._nativeCollider);\n  };\n  _createClass(SpringJoint, [{\n    key: \"swingOffset\",\n    get:\n    /**\n     * The swing offset.\n     */\n    function get() {\n      return this._collider.localPosition;\n    },\n    set: function set(value) {\n      var swingOffset = this._collider.localPosition;\n      if (value !== swingOffset) {\n        swingOffset.copyFrom(value);\n      }\n      this._nativeJoint.setSwingOffset(value);\n    }\n\n    /**\n     * The minimum distance.\n     */\n  }, {\n    key: \"minDistance\",\n    get: function get() {\n      return this._minDistance;\n    },\n    set: function set(value) {\n      this._minDistance = value;\n      this._nativeJoint.setMinDistance(value);\n    }\n\n    /**\n     * The maximum distance.\n     */\n  }, {\n    key: \"maxDistance\",\n    get: function get() {\n      return this._maxDistance;\n    },\n    set: function set(value) {\n      this._maxDistance = value;\n      this._nativeJoint.setMaxDistance(value);\n    }\n\n    /**\n     * The distance beyond the allowed range at which the joint becomes active.\n     */\n  }, {\n    key: \"tolerance\",\n    get: function get() {\n      return this._tolerance;\n    },\n    set: function set(value) {\n      this._tolerance = value;\n      this._nativeJoint.setTolerance(value);\n    }\n\n    /**\n     * The spring strength of the joint.\n     */\n  }, {\n    key: \"stiffness\",\n    get: function get() {\n      return this._stiffness;\n    },\n    set: function set(value) {\n      this._stiffness = value;\n      this._nativeJoint.setStiffness(value);\n    }\n\n    /**\n     * The degree of damping of the joint spring of the joint.\n     */\n  }, {\n    key: \"damping\",\n    get: function get() {\n      return this._damping;\n    },\n    set: function set(value) {\n      this._damping = value;\n      this._nativeJoint.setDamping(value);\n    }\n  }]);\n  return SpringJoint;\n}(Joint);\n\n/**\n * JointLimits is used to limit the joints angle.\n */\nvar JointLimits = function JointLimits() {\n  this.max = 0;\n  this.min = 0;\n  this.contactDistance = -1;\n  this.stiffness = 0;\n  this.damping = 0;\n};\n\n/**\n * The JointMotor is used to motorize a joint.\n */\nvar JointMotor = function JointMotor() {\n  this.targetVelocity = 0;\n  this.forceLimit = Number.MAX_VALUE;\n  this.gearRation = 1.0;\n  this.freeSpin = false;\n};\n\n/**\n * The up axis of the collider shape.\n */\nvar ControllerCollisionFlag;\n(function (ControllerCollisionFlag) {\n  ControllerCollisionFlag[ControllerCollisionFlag[\"Sides\"] = 1] = \"Sides\";\n  ControllerCollisionFlag[ControllerCollisionFlag[\"Up\"] = 2] = \"Up\";\n  ControllerCollisionFlag[ControllerCollisionFlag[\"Down\"] = 4] = \"Down\";\n})(ControllerCollisionFlag || (ControllerCollisionFlag = {}));\n\n/**\n * A static collider component that will not move.\n * @remarks Mostly used for object which always stays at the same place and never moves around.\n */\nvar StaticCollider = /*#__PURE__*/function (_Collider) {\n  _inheritsLoose(StaticCollider, _Collider);\n  /**\n   * @internal\n   */\n  function StaticCollider(entity) {\n    var _this;\n    _this = _Collider.call(this, entity) || this;\n    var transform = _this.entity.transform;\n    _this._nativeCollider = PhysicsManager._nativePhysics.createStaticCollider(transform.worldPosition, transform.worldRotationQuaternion);\n    return _this;\n  }\n  return StaticCollider;\n}(Collider);\n\n/**\n * A dynamic collider can act with self-defined movement or physical force.\n */\nvar DynamicCollider = /*#__PURE__*/function (_Collider) {\n  _inheritsLoose(DynamicCollider, _Collider);\n  /**\n   * @internal\n   */\n  function DynamicCollider(entity) {\n    var _this;\n    _this = _Collider.call(this, entity) || this;\n    _this._linearDamping = 0;\n    _this._angularDamping = 0;\n    _this._linearVelocity = new Vector3();\n    _this._angularVelocity = new Vector3();\n    _this._mass = 0;\n    _this._centerOfMass = new Vector3();\n    _this._inertiaTensor = new Vector3();\n    _this._maxAngularVelocity = 0;\n    _this._maxDepenetrationVelocity = 0;\n    _this._sleepThreshold = 0;\n    _this._solverIterations = 0;\n    _this._isKinematic = false;\n    _this._constraints = 0;\n    _this._collisionDetectionMode = CollisionDetectionMode.Discrete;\n    var transform = _this.entity.transform;\n    _this._nativeCollider = PhysicsManager._nativePhysics.createDynamicCollider(transform.worldPosition, transform.worldRotationQuaternion);\n    return _this;\n  }\n\n  /**\n   * Apply a force to the DynamicCollider.\n   * @param force - The force make the collider move\n   */\n  var _proto = DynamicCollider.prototype;\n  _proto.applyForce = function applyForce(force) {\n    this._nativeCollider.addForce(force);\n  }\n\n  /**\n   * Apply a torque to the DynamicCollider.\n   * @param torque - The force make the collider rotate\n   */;\n  _proto.applyTorque = function applyTorque(torque) {\n    this._nativeCollider.addTorque(torque);\n  }\n\n  /**\n   * Moves kinematically controlled dynamic actors through the game world.\n   * @param position - The desired position for the kinematic actor\n   */;\n  _proto.move = function move(positionOrRotation, rotation) {\n    this._nativeCollider.move(positionOrRotation, rotation);\n  }\n\n  /**\n   * Forces a collider to sleep at least one frame.\n   */;\n  _proto.sleep = function sleep() {\n    this._nativeCollider.sleep();\n  }\n\n  /**\n   * Forces a collider to wake up.\n   */;\n  _proto.wakeUp = function wakeUp() {\n    this._nativeCollider.wakeUp();\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onLateUpdate = function _onLateUpdate() {\n    var transform = this.entity.transform;\n    var worldPosition = transform.worldPosition,\n      worldRotationQuaternion = transform.worldRotationQuaternion;\n    this._nativeCollider.getWorldTransform(worldPosition, worldRotationQuaternion);\n    this._updateFlag.flag = false;\n  };\n  _createClass(DynamicCollider, [{\n    key: \"linearDamping\",\n    get:\n    /**\n     * The linear damping of the dynamic collider.\n     */\n    function get() {\n      return this._linearDamping;\n    },\n    set: function set(value) {\n      this._linearDamping = value;\n      this._nativeCollider.setLinearDamping(value);\n    }\n\n    /**\n     * The angular damping of the dynamic collider.\n     */\n  }, {\n    key: \"angularDamping\",\n    get: function get() {\n      return this._angularDamping;\n    },\n    set: function set(value) {\n      this._angularDamping = value;\n      this._nativeCollider.setAngularDamping(value);\n    }\n\n    /**\n     * The linear velocity vector of the dynamic collider measured in world unit per second.\n     */\n  }, {\n    key: \"linearVelocity\",\n    get: function get() {\n      return this._linearVelocity;\n    },\n    set: function set(value) {\n      if (this._linearVelocity !== value) {\n        this._linearVelocity.copyFrom(value);\n      }\n      this._nativeCollider.setLinearVelocity(this._linearVelocity);\n    }\n\n    /**\n     * The angular velocity vector of the dynamic collider measured in radians per second.\n     */\n  }, {\n    key: \"angularVelocity\",\n    get: function get() {\n      return this._angularVelocity;\n    },\n    set: function set(value) {\n      if (this._angularVelocity !== value) {\n        this._angularVelocity.copyFrom(value);\n      }\n      this._nativeCollider.setAngularVelocity(this._angularVelocity);\n    }\n\n    /**\n     * The mass of the dynamic collider.\n     */\n  }, {\n    key: \"mass\",\n    get: function get() {\n      return this._mass;\n    },\n    set: function set(value) {\n      this._mass = value;\n      this._nativeCollider.setMass(value);\n    }\n\n    /**\n     * The center of mass relative to the transform's origin.\n     */\n  }, {\n    key: \"centerOfMass\",\n    get: function get() {\n      return this._centerOfMass;\n    },\n    set: function set(value) {\n      if (this._centerOfMass !== value) {\n        this._centerOfMass.copyFrom(value);\n      }\n      this._nativeCollider.setCenterOfMass(this._centerOfMass);\n    }\n\n    /**\n     * The diagonal inertia tensor of mass relative to the center of mass.\n     */\n  }, {\n    key: \"inertiaTensor\",\n    get: function get() {\n      return this._inertiaTensor;\n    },\n    set: function set(value) {\n      if (this._inertiaTensor !== value) {\n        this._inertiaTensor.copyFrom(value);\n      }\n      this._nativeCollider.setInertiaTensor(this._inertiaTensor);\n    }\n\n    /**\n     * The maximum angular velocity of the collider measured in radians per second. (Default 7) range { 0, infinity }.\n     */\n  }, {\n    key: \"maxAngularVelocity\",\n    get: function get() {\n      return this._maxAngularVelocity;\n    },\n    set: function set(value) {\n      this._maxAngularVelocity = value;\n      this._nativeCollider.setMaxAngularVelocity(value);\n    }\n\n    /**\n     * Maximum velocity of a collider when moving out of penetrating state.\n     */\n  }, {\n    key: \"maxDepenetrationVelocity\",\n    get: function get() {\n      return this._maxDepenetrationVelocity;\n    },\n    set: function set(value) {\n      this._maxDepenetrationVelocity = value;\n      this._nativeCollider.setMaxDepenetrationVelocity(value);\n    }\n\n    /**\n     * The mass-normalized energy threshold, below which objects start going to sleep.\n     */\n  }, {\n    key: \"sleepThreshold\",\n    get: function get() {\n      return this._sleepThreshold;\n    },\n    set: function set(value) {\n      this._sleepThreshold = value;\n      this._nativeCollider.setSleepThreshold(value);\n    }\n\n    /**\n     * The solverIterations determines how accurately collider joints and collision contacts are resolved.\n     */\n  }, {\n    key: \"solverIterations\",\n    get: function get() {\n      return this._solverIterations;\n    },\n    set: function set(value) {\n      this._solverIterations = value;\n      this._nativeCollider.setSolverIterations(value);\n    }\n\n    /**\n     * Controls whether physics affects the dynamic collider.\n     */\n  }, {\n    key: \"isKinematic\",\n    get: function get() {\n      return this._isKinematic;\n    },\n    set: function set(value) {\n      this._isKinematic = value;\n      this._nativeCollider.setIsKinematic(value);\n    }\n\n    /**\n     * The particular rigid dynamic lock flag.\n     */\n  }, {\n    key: \"constraints\",\n    get: function get() {\n      return this._constraints;\n    },\n    set: function set(value) {\n      this._constraints = value;\n      this._nativeCollider.setConstraints(value);\n    }\n\n    /**\n     * The colliders' collision detection mode.\n     */\n  }, {\n    key: \"collisionDetectionMode\",\n    get: function get() {\n      return this._collisionDetectionMode;\n    },\n    set: function set(value) {\n      this._collisionDetectionMode = value;\n      this._nativeCollider.setCollisionDetectionMode(value);\n    }\n  }]);\n  return DynamicCollider;\n}(Collider);\n\n/**\n * The collision detection mode constants.\n */\nvar CollisionDetectionMode;\n\n/**\n * Use these flags to constrain motion of dynamic collider.\n */\n(function (CollisionDetectionMode) {\n  CollisionDetectionMode[CollisionDetectionMode[\"Discrete\"] = 0] = \"Discrete\";\n  CollisionDetectionMode[CollisionDetectionMode[\"Continuous\"] = 1] = \"Continuous\";\n  CollisionDetectionMode[CollisionDetectionMode[\"ContinuousDynamic\"] = 2] = \"ContinuousDynamic\";\n  CollisionDetectionMode[CollisionDetectionMode[\"ContinuousSpeculative\"] = 3] = \"ContinuousSpeculative\";\n})(CollisionDetectionMode || (CollisionDetectionMode = {}));\nvar DynamicColliderConstraints;\n(function (DynamicColliderConstraints) {\n  DynamicColliderConstraints[DynamicColliderConstraints[\"None\"] = 0] = \"None\";\n  DynamicColliderConstraints[DynamicColliderConstraints[\"FreezePositionX\"] = 1] = \"FreezePositionX\";\n  DynamicColliderConstraints[DynamicColliderConstraints[\"FreezePositionY\"] = 2] = \"FreezePositionY\";\n  DynamicColliderConstraints[DynamicColliderConstraints[\"FreezePositionZ\"] = 4] = \"FreezePositionZ\";\n  DynamicColliderConstraints[DynamicColliderConstraints[\"FreezeRotationX\"] = 8] = \"FreezeRotationX\";\n  DynamicColliderConstraints[DynamicColliderConstraints[\"FreezeRotationY\"] = 16] = \"FreezeRotationY\";\n  DynamicColliderConstraints[DynamicColliderConstraints[\"FreezeRotationZ\"] = 32] = \"FreezeRotationZ\";\n})(DynamicColliderConstraints || (DynamicColliderConstraints = {}));\n\n/**\n *  The current phase of the pointer.\n */\nvar PointerPhase;\n(function (PointerPhase) {\n  PointerPhase[PointerPhase[\"Down\"] = 0] = \"Down\";\n  PointerPhase[PointerPhase[\"Move\"] = 1] = \"Move\";\n  PointerPhase[PointerPhase[\"Up\"] = 2] = \"Up\";\n  PointerPhase[PointerPhase[\"Leave\"] = 3] = \"Leave\";\n})(PointerPhase || (PointerPhase = {}));\n\n/**\n * Defines values that specify the buttons on a pointer device.\n * Refer to the W3C standards.(https://www.w3.org/TR/uievents/#dom-mouseevent-button)\n * Refer to Microsoft's documentation.(https://docs.microsoft.com/en-us/dotnet/api/system.windows.input.mousebutton?view=windowsdesktop-6.0)\n */\nvar PointerButton;\n(function (PointerButton) {\n  PointerButton[PointerButton[\"Primary\"] = 0] = \"Primary\";\n  PointerButton[PointerButton[\"Auxiliary\"] = 1] = \"Auxiliary\";\n  PointerButton[PointerButton[\"Secondary\"] = 2] = \"Secondary\";\n  PointerButton[PointerButton[\"XButton1\"] = 3] = \"XButton1\";\n  PointerButton[PointerButton[\"XButton2\"] = 4] = \"XButton2\";\n  PointerButton[PointerButton[\"XButton3\"] = 5] = \"XButton3\";\n  PointerButton[PointerButton[\"XButton4\"] = 6] = \"XButton4\";\n  PointerButton[PointerButton[\"XButton5\"] = 7] = \"XButton5\";\n  PointerButton[PointerButton[\"XButton6\"] = 8] = \"XButton6\";\n  PointerButton[PointerButton[\"XButton7\"] = 9] = \"XButton7\";\n  PointerButton[PointerButton[\"XButton8\"] = 10] = \"XButton8\";\n})(PointerButton || (PointerButton = {}));\n\n/**\n * Pointer.\n */\nvar Pointer =\n/**\n * Unique id.\n * @remarks Start from 0.\n */\n\n/** The phase of pointer. */\n\n/** The position of the pointer in screen space pixel coordinates. */\n\n/** @internal */\n\n/**\n * @internal\n */\nfunction Pointer(id) {\n  this.id = void 0;\n  this.phase = PointerPhase.Leave;\n  this.position = new Vector2();\n  this._uniqueID = void 0;\n  this.id = id;\n};\n\n/**\n * Pointer Manager.\n * @internal\n */\nvar PointerManager = /*#__PURE__*/function () {\n  /** Refer to the W3C standards.(https://www.w3.org/TR/uievents/#dom-mouseevent-buttons) */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /**\n   * Create a PointerManager.\n   * @param engine - The current engine instance\n   * @param htmlCanvas - HTMLCanvasElement\n   */\n  function PointerManager(engine, htmlCanvas) {\n    this._pointers = [];\n    this._movingDelta = new Vector2();\n    this._multiPointerEnabled = true;\n    this._buttons = 0x0;\n    this._upMap = [];\n    this._downMap = [];\n    this._downList = new DisorderedArray();\n    this._upList = new DisorderedArray();\n    this._currentPosition = new Vector2();\n    this._currentPressedEntity = void 0;\n    this._currentEnteredEntity = void 0;\n    this._engine = void 0;\n    this._canvas = void 0;\n    this._htmlCanvas = void 0;\n    this._nativeEvents = [];\n    this._pointerPool = void 0;\n    this._keyEventList = [];\n    this._keyEventCount = 0;\n    this._needOverallPointers = false;\n    this._hadListener = false;\n    this._lastPositionFrameCount = 0;\n    this._engine = engine;\n    this._canvas = engine.canvas;\n    this._htmlCanvas = htmlCanvas;\n    htmlCanvas.oncontextmenu = function (event) {\n      return false;\n    };\n    var onPointerEvent = this._onPointerEvent = this._onPointerEvent.bind(this);\n    htmlCanvas.addEventListener(\"pointerdown\", onPointerEvent);\n    htmlCanvas.addEventListener(\"pointerup\", onPointerEvent);\n    htmlCanvas.addEventListener(\"pointerout\", onPointerEvent);\n    htmlCanvas.addEventListener(\"pointermove\", onPointerEvent);\n    this._hadListener = true;\n    // If there are no compatibility issues, navigator.maxTouchPoints should be used here.\n    this._pointerPool = new Array(11);\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = PointerManager.prototype;\n  _proto._update = function _update(frameCount) {\n    this._needOverallPointers && this._overallPointers();\n    this._downList.length = 0;\n    this._upList.length = 0;\n    this._movingDelta.set(0, 0);\n    this._nativeEvents.length > 0 && this._handlePointerEvent(this._nativeEvents, frameCount);\n    this._pointers.length > 0 && (this._lastPositionFrameCount = frameCount);\n    if (this._engine.physicsManager._initialized) {\n      var rayCastEntity = this._pointerRayCast();\n      var keyEventCount = this._keyEventCount;\n      if (keyEventCount > 0) {\n        var keyEventList = this._keyEventList;\n        for (var i = 0; i < keyEventCount; i++) {\n          switch (keyEventList[i]) {\n            case PointerKeyEvent.Down:\n              this._firePointerDown(rayCastEntity);\n              break;\n            case PointerKeyEvent.Up:\n              this._firePointerUpAndClick(rayCastEntity);\n              break;\n          }\n        }\n        this._firePointerExitAndEnter(rayCastEntity);\n        keyEventList[keyEventCount - 1] === PointerKeyEvent.Leave && (this._currentPressedEntity = null);\n        this._keyEventCount = 0;\n      } else {\n        this._firePointerDrag();\n        this._firePointerExitAndEnter(rayCastEntity);\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onFocus = function _onFocus() {\n    if (!this._hadListener) {\n      var htmlCanvas = this._htmlCanvas,\n        onPointerEvent = this._onPointerEvent;\n      htmlCanvas.addEventListener(\"pointerdown\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointerup\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointerout\", onPointerEvent);\n      htmlCanvas.addEventListener(\"pointermove\", onPointerEvent);\n      this._hadListener = true;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onBlur = function _onBlur() {\n    if (this._hadListener) {\n      var htmlCanvas = this._htmlCanvas,\n        onPointerEvent = this._onPointerEvent;\n      htmlCanvas.removeEventListener(\"pointerdown\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerup\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerout\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointermove\", onPointerEvent);\n      this._nativeEvents.length = 0;\n      this._pointerPool.length = 0;\n      this._currentEnteredEntity = null;\n      this._currentPressedEntity = null;\n      this._downList.length = 0;\n      this._upList.length = 0;\n      this._hadListener = false;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    // @ts-ignore\n    if (this._hadListener) {\n      var htmlCanvas = this._htmlCanvas,\n        onPointerEvent = this._onPointerEvent;\n      htmlCanvas.removeEventListener(\"pointerdown\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerup\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointerout\", onPointerEvent);\n      htmlCanvas.removeEventListener(\"pointermove\", onPointerEvent);\n      this._hadListener = false;\n    }\n    this._nativeEvents.length = 0;\n    this._pointerPool.length = 0;\n    this._pointers.length = 0;\n    this._currentPosition = null;\n    this._currentEnteredEntity = null;\n    this._currentPressedEntity = null;\n    this._engine = null;\n    this._canvas = null;\n  };\n  _proto._onPointerEvent = function _onPointerEvent(evt) {\n    evt.cancelable && evt.preventDefault();\n    evt.type === \"pointerdown\" && this._htmlCanvas.focus();\n    this._nativeEvents.push(evt);\n  };\n  _proto._overallPointers = function _overallPointers() {\n    var pointers = this._pointers;\n    var deleteCount = 0;\n    var totalCount = pointers.length;\n    for (var i = 0; i < totalCount; i++) {\n      if (pointers[i].phase === PointerPhase.Leave) {\n        deleteCount++;\n      } else {\n        if (deleteCount > 0) {\n          pointers[i - deleteCount] = pointers[i];\n        }\n      }\n    }\n    pointers.length = totalCount - deleteCount;\n    this._needOverallPointers = false;\n  };\n  _proto._getIndexByPointerID = function _getIndexByPointerID(pointerId) {\n    var pointers = this._pointers;\n    for (var i = pointers.length - 1; i >= 0; i--) {\n      if (pointers[i]._uniqueID === pointerId) {\n        return i;\n      }\n    }\n    return -1;\n  };\n  _proto._addPointer = function _addPointer(pointerId, x, y, phase) {\n    var pointers = this._pointers;\n    var lastCount = pointers.length;\n    if (lastCount === 0 || this._multiPointerEnabled) {\n      var pointerPool = this._pointerPool;\n      // Get Pointer smallest index.\n      var i = 0;\n      for (; i < lastCount; i++) {\n        if (pointers[i].id > i) {\n          break;\n        }\n      }\n      var pointer = pointerPool[i];\n      if (!pointer) {\n        pointer = pointerPool[i] = new Pointer(i);\n      }\n      pointer._uniqueID = pointerId;\n      pointer.position.set(x, y);\n      pointer.phase = phase;\n      pointers.splice(i, 0, pointer);\n    }\n  };\n  _proto._removePointer = function _removePointer(pointerIndex) {\n    var leavePointer = this._pointers[pointerIndex];\n    leavePointer.phase = PointerPhase.Leave;\n  };\n  _proto._updatePointer = function _updatePointer(pointerIndex, x, y, phase) {\n    var updatedPointer = this._pointers[pointerIndex];\n    updatedPointer.position.set(x, y);\n    updatedPointer.phase = phase;\n  };\n  _proto._handlePointerEvent = function _handlePointerEvent(nativeEvents, frameCount) {\n    var pointers = this._pointers,\n      keyEventList = this._keyEventList,\n      upMap = this._upMap,\n      downMap = this._downMap,\n      upList = this._upList,\n      downList = this._downList;\n    var activePointerCount = pointers.length;\n    var pixelRatioW = this._canvas.width / this._htmlCanvas.clientWidth;\n    var pixelRatioH = this._canvas.height / this._htmlCanvas.clientHeight;\n    var nativeEventsLen = nativeEvents.length;\n    for (var i = 0; i < nativeEventsLen; i++) {\n      var evt = nativeEvents[i];\n      var pointerButton = evt.button | PointerButton.Primary;\n      var pointerIndex = this._getIndexByPointerID(evt.pointerId);\n      switch (evt.type) {\n        case \"pointerdown\":\n          if (pointerIndex === -1) {\n            this._addPointer(evt.pointerId, evt.offsetX * pixelRatioW, evt.offsetY * pixelRatioH, PointerPhase.Down);\n            activePointerCount++;\n          } else {\n            this._updatePointer(pointerIndex, evt.offsetX * pixelRatioW, evt.offsetY * pixelRatioH, PointerPhase.Down);\n          }\n          activePointerCount === 1 && (keyEventList[this._keyEventCount++] = PointerKeyEvent.Down);\n          downList.add(pointerButton);\n          downMap[pointerButton] = frameCount;\n          break;\n        case \"pointerup\":\n          if (pointerIndex >= 0) {\n            this._updatePointer(pointerIndex, evt.offsetX * pixelRatioW, evt.offsetY * pixelRatioH, PointerPhase.Up);\n            activePointerCount === 1 && (keyEventList[this._keyEventCount++] = PointerKeyEvent.Up);\n          }\n          upList.add(pointerButton);\n          upMap[pointerButton] = frameCount;\n          break;\n        case \"pointermove\":\n          if (pointerIndex === -1) {\n            this._addPointer(evt.pointerId, evt.offsetX * pixelRatioW, evt.offsetY * pixelRatioH, PointerPhase.Move);\n            activePointerCount++;\n          } else {\n            this._updatePointer(pointerIndex, evt.offsetX * pixelRatioW, evt.offsetY * pixelRatioH, PointerPhase.Move);\n          }\n          break;\n        case \"pointerout\":\n          if (pointerIndex >= 0) {\n            this._removePointer(pointerIndex);\n            --activePointerCount === 0 && (keyEventList[this._keyEventCount++] = PointerKeyEvent.Leave);\n            this._needOverallPointers = true;\n          }\n          break;\n      }\n    }\n    this._buttons = nativeEvents[nativeEventsLen - 1].buttons;\n    var pointerCount = pointers.length;\n    if (pointerCount > 0) {\n      var currentPosition = this._currentPosition;\n      var lastX = currentPosition.x,\n        lastY = currentPosition.y;\n      if (activePointerCount === 0) {\n        // Get the pointer coordinates when leaving, and use it to correctly dispatch the click event.\n        var lastNativeEvent = nativeEvents[nativeEventsLen - 1];\n        currentPosition.set(lastNativeEvent.offsetX * pixelRatioW, lastNativeEvent.offsetY * pixelRatioH);\n      } else {\n        currentPosition.set(0, 0);\n        for (var _i = 0; _i < pointerCount; _i++) {\n          currentPosition.add(pointers[_i].position);\n        }\n        currentPosition.scale(1 / pointerCount);\n      }\n      // Update pointer moving delta.\n      if (this._lastPositionFrameCount === frameCount - 1) {\n        this._movingDelta.set(currentPosition.x - lastX, currentPosition.y - lastY);\n      }\n    }\n    nativeEvents.length = 0;\n  };\n  _proto._pointerRayCast = function _pointerRayCast() {\n    if (this._pointers.length > 0) {\n      var point = PointerManager._tempPoint,\n        ray = PointerManager._tempRay,\n        hitResult = PointerManager._tempHitResult;\n      var cameras = this._engine.sceneManager.activeScene._activeCameras;\n      var x = this._currentPosition.x / this._canvas.width;\n      var y = this._currentPosition.y / this._canvas.height;\n      for (var i = cameras.length - 1; i >= 0; i--) {\n        var camera = cameras[i];\n        if (!camera.enabled || camera.renderTarget) {\n          continue;\n        }\n        var _camera$viewport = camera.viewport,\n          vpX = _camera$viewport.x,\n          vpY = _camera$viewport.y,\n          vpW = _camera$viewport.z,\n          vpH = _camera$viewport.w;\n        if (x >= vpX && y >= vpY && x - vpX <= vpW && y - vpY <= vpH) {\n          point.set((x - vpX) / vpW, (y - vpY) / vpH);\n          // TODO: Only check which colliders have listened to the input.\n          if (this._engine.physicsManager.raycast(camera.viewportPointToRay(point, ray), Number.MAX_VALUE, camera.cullingMask, hitResult)) {\n            return hitResult.entity;\n          } else if (camera.clearFlags & CameraClearFlags.Color) {\n            return null;\n          }\n        }\n      }\n    }\n    return null;\n  };\n  _proto._firePointerDrag = function _firePointerDrag() {\n    if (this._currentPressedEntity) {\n      var scripts = this._currentPressedEntity._scripts;\n      for (var i = scripts.length - 1; i >= 0; i--) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onPointerDrag();\n      }\n    }\n  };\n  _proto._firePointerExitAndEnter = function _firePointerExitAndEnter(rayCastEntity) {\n    if (this._currentEnteredEntity !== rayCastEntity) {\n      if (this._currentEnteredEntity) {\n        var scripts = this._currentEnteredEntity._scripts;\n        for (var i = scripts.length - 1; i >= 0; i--) {\n          var script = scripts.get(i);\n          script._waitHandlingInValid || script.onPointerExit();\n        }\n      }\n      if (rayCastEntity) {\n        var _scripts = rayCastEntity._scripts;\n        for (var _i2 = _scripts.length - 1; _i2 >= 0; _i2--) {\n          var _script = _scripts.get(_i2);\n          _script._waitHandlingInValid || _script.onPointerEnter();\n        }\n      }\n      this._currentEnteredEntity = rayCastEntity;\n    }\n  };\n  _proto._firePointerDown = function _firePointerDown(rayCastEntity) {\n    if (rayCastEntity) {\n      var scripts = rayCastEntity._scripts;\n      for (var i = scripts.length - 1; i >= 0; i--) {\n        var script = scripts.get(i);\n        script._waitHandlingInValid || script.onPointerDown();\n      }\n    }\n    this._currentPressedEntity = rayCastEntity;\n  };\n  _proto._firePointerUpAndClick = function _firePointerUpAndClick(rayCastEntity) {\n    var pressedEntity = this._currentPressedEntity;\n    if (pressedEntity) {\n      var sameTarget = pressedEntity === rayCastEntity;\n      var scripts = pressedEntity._scripts;\n      for (var i = scripts.length - 1; i >= 0; i--) {\n        var script = scripts.get(i);\n        if (!script._waitHandlingInValid) {\n          sameTarget && script.onPointerClick();\n          script.onPointerUp();\n        }\n      }\n      this._currentPressedEntity = null;\n    }\n  };\n  return PointerManager;\n}();\n\n/**\n * @internal\n */\nPointerManager.Buttons = [0x1, 0x4, 0x2, 0x8, 0x10, 0x20, 0x40, 0x80, 0x100, 0x200, 0x400];\nPointerManager._tempRay = new Ray();\nPointerManager._tempPoint = new Vector2();\nPointerManager._tempHitResult = new HitResult();\nvar PointerKeyEvent;\n(function (PointerKeyEvent) {\n  PointerKeyEvent[PointerKeyEvent[\"Down\"] = 0] = \"Down\";\n  PointerKeyEvent[PointerKeyEvent[\"Up\"] = 1] = \"Up\";\n  PointerKeyEvent[PointerKeyEvent[\"Leave\"] = 2] = \"Leave\";\n})(PointerKeyEvent || (PointerKeyEvent = {}));\n\n/**\n * Wheel Manager.\n * @internal\n */\nvar WheelManager = /*#__PURE__*/function () {\n  /** @internal */\n\n  /**\n   * Create a KeyboardManager.\n   */\n  function WheelManager(htmlCanvas) {\n    this._delta = new Vector3();\n    this._nativeEvents = [];\n    this._canvas = void 0;\n    this._hadListener = void 0;\n    this._onWheelEvent = this._onWheelEvent.bind(this);\n    htmlCanvas.addEventListener(\"wheel\", this._onWheelEvent);\n    this._canvas = htmlCanvas;\n    this._hadListener = true;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = WheelManager.prototype;\n  _proto._update = function _update() {\n    var delta = this._delta;\n    delta.set(0, 0, 0);\n    var nativeEvents = this._nativeEvents;\n    if (nativeEvents.length > 0) {\n      for (var i = nativeEvents.length - 1; i >= 0; i--) {\n        var evt = nativeEvents[i];\n        delta.x += evt.deltaX;\n        delta.y += evt.deltaY;\n        delta.z += evt.deltaZ;\n      }\n      nativeEvents.length = 0;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onFocus = function _onFocus() {\n    if (!this._hadListener) {\n      this._canvas.addEventListener(\"wheel\", this._onWheelEvent);\n      this._hadListener = true;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onBlur = function _onBlur() {\n    if (this._hadListener) {\n      this._canvas.removeEventListener(\"wheel\", this._onWheelEvent);\n      this._nativeEvents.length = 0;\n      this._delta.set(0, 0, 0);\n      this._hadListener = false;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    if (this._hadListener) {\n      this._canvas.removeEventListener(\"wheel\", this._onWheelEvent);\n      this._hadListener = false;\n    }\n    this._nativeEvents = null;\n  };\n  _proto._onWheelEvent = function _onWheelEvent(evt) {\n    evt.cancelable && evt.preventDefault();\n    this._nativeEvents.push(evt);\n  };\n  return WheelManager;\n}();\n\n/**\n * InputManager manages device input such as mouse, touch, keyboard, etc.\n */\nvar InputManager = /*#__PURE__*/function () {\n  var _proto = InputManager.prototype;\n  /**\n   * Whether the key is being held down, if there is no parameter, return whether any key is being held down.\n   * @param key - The keys of the keyboard\n   * @returns Whether the key is being held down\n   */\n  _proto.isKeyHeldDown = function isKeyHeldDown(key) {\n    if (this._initialized) {\n      if (key === undefined) {\n        return this._keyboardManager._curFrameHeldDownList.length > 0;\n      } else {\n        return this._keyboardManager._curHeldDownKeyToIndexMap[key] != null;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the key starts to be pressed down during the current frame, if there is no parameter, return whether any key starts to be pressed down during the current frame.\n   * @param key - The keys of the keyboard\n   * @returns Whether the key starts to be pressed down during the current frame\n   */;\n  _proto.isKeyDown = function isKeyDown(key) {\n    if (this._initialized) {\n      if (key === undefined) {\n        return this._keyboardManager._curFrameDownList.length > 0;\n      } else {\n        return this._keyboardManager._downKeyToFrameCountMap[key] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the key is released during the current frame, if there is no parameter, return whether any key released during the current frame.\n   * @param key - The keys of the keyboard\n   * @returns Whether the key is released during the current frame\n   */;\n  _proto.isKeyUp = function isKeyUp(key) {\n    if (this._initialized) {\n      if (key === undefined) {\n        return this._keyboardManager._curFrameUpList.length > 0;\n      } else {\n        return this._keyboardManager._upKeyToFrameCountMap[key] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the pointer is being held down, if there is no parameter, return whether any pointer is being held down.\n   * @param pointerButton - The pointerButton on a pointer device\n   * @returns Whether the pointer is being held down\n   */;\n  _proto.isPointerHeldDown = function isPointerHeldDown(pointerButton) {\n    if (this._initialized) {\n      if (pointerButton === undefined) {\n        return this._pointerManager._buttons !== 0;\n      } else {\n        return (this._pointerManager._buttons & PointerManager.Buttons[pointerButton]) !== 0;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the pointer starts to be pressed down during the current frame, if there is no parameter, return whether any pointer starts to be pressed down during the current frame.\n   * @param pointerButton - The pointerButton on a pointer device\n   * @returns Whether the pointer starts to be pressed down during the current frame\n   */;\n  _proto.isPointerDown = function isPointerDown(pointerButton) {\n    if (this._initialized) {\n      if (pointerButton === undefined) {\n        return this._pointerManager._downList.length > 0;\n      } else {\n        return this._pointerManager._downMap[pointerButton] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Whether the pointer is released during the current frame, if there is no parameter, return whether any pointer released during the current frame.\n   * @param pointerButton - The pointerButtons on a mouse device\n   * @returns Whether the pointer is released during the current frame\n   */;\n  _proto.isPointerUp = function isPointerUp(pointerButton) {\n    if (this._initialized) {\n      if (pointerButton === undefined) {\n        return this._pointerManager._upList.length > 0;\n      } else {\n        return this._pointerManager._upMap[pointerButton] === this._curFrameCount;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  function InputManager(engine) {\n    this._initialized = false;\n    this._curFrameCount = 0;\n    this._wheelManager = void 0;\n    this._pointerManager = void 0;\n    this._keyboardManager = void 0;\n    // @ts-ignore\n    var canvas = engine._canvas._webCanvas;\n    if (typeof OffscreenCanvas === \"undefined\" || !(canvas instanceof OffscreenCanvas)) {\n      this._wheelManager = new WheelManager(canvas);\n      this._pointerManager = new PointerManager(engine, canvas);\n      this._keyboardManager = new KeyboardManager(canvas);\n      this._onBlur = this._onBlur.bind(this);\n      window.addEventListener(\"blur\", this._onBlur);\n      this._onFocus = this._onFocus.bind(this);\n      window.addEventListener(\"focus\", this._onFocus);\n      this._initialized = true;\n    }\n  }\n\n  /**\n   * @internal\n   */\n  _proto._update = function _update() {\n    if (this._initialized) {\n      ++this._curFrameCount;\n      this._wheelManager._update();\n      this._pointerManager._update(this._curFrameCount);\n      this._keyboardManager._update(this._curFrameCount);\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    if (this._initialized) {\n      window.removeEventListener(\"blur\", this._onBlur);\n      window.removeEventListener(\"focus\", this._onFocus);\n      this._wheelManager._destroy();\n      this._pointerManager._destroy();\n      this._keyboardManager._destroy();\n    }\n  };\n  _proto._onBlur = function _onBlur() {\n    this._wheelManager._onBlur();\n    this._pointerManager._onBlur();\n    this._keyboardManager._onBlur();\n  };\n  _proto._onFocus = function _onFocus() {\n    this._wheelManager._onFocus();\n    this._pointerManager._onFocus();\n    this._keyboardManager._onFocus();\n  };\n  _createClass(InputManager, [{\n    key: \"pointers\",\n    get: /** Sometimes the input module will not be initialized, such as off-screen rendering. */\n\n    /**\n     * Pointer List.\n     */\n    function get() {\n      return this._initialized ? this._pointerManager._pointers : null;\n    }\n\n    /**\n     *  Whether to handle multi-pointer.\n     */\n  }, {\n    key: \"multiPointerEnabled\",\n    get: function get() {\n      return this._initialized ? this._pointerManager._multiPointerEnabled : false;\n    },\n    set: function set(enabled) {\n      this._initialized && (this._pointerManager._multiPointerEnabled = enabled);\n    }\n\n    /**\n     * Get the change of the scroll wheel on the x-axis.\n     * @returns Change value\n     */\n  }, {\n    key: \"wheelDelta\",\n    get: function get() {\n      return this._initialized ? this._wheelManager._delta : null;\n    }\n\n    /**\n     * Get the change of the pointer.\n     * @returns Change value\n     */\n  }, {\n    key: \"pointerMovingDelta\",\n    get: function get() {\n      return this._initialized ? this._pointerManager._movingDelta : null;\n    }\n\n    /**\n     * Get the position of the pointer.\n     * @returns The position of the pointer\n     */\n  }, {\n    key: \"pointerPosition\",\n    get: function get() {\n      return this._initialized && this._pointerManager._pointers.length > 0 ? this._pointerManager._currentPosition : null;\n    }\n  }]);\n  return InputManager;\n}();\n\n/**\n * Render queue type.\n */\nvar RenderQueueType;\n(function (RenderQueueType) {\n  RenderQueueType[RenderQueueType[\"Opaque\"] = 0] = \"Opaque\";\n  RenderQueueType[RenderQueueType[\"AlphaTest\"] = 1] = \"AlphaTest\";\n  RenderQueueType[RenderQueueType[\"Transparent\"] = 2] = \"Transparent\";\n})(RenderQueueType || (RenderQueueType = {}));\n\n/**\n * The base class of assets, with reference counting capability.\n */\nvar RefObject = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(RefObject, _EngineObject);\n  function RefObject(engine) {\n    var _this;\n    _this = _EngineObject.call(this, engine) || this;\n    _this.isGCIgnored = false;\n    _this._refCount = 0;\n    engine.resourceManager._addRefObject(_this.instanceId, _assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * Destroy self.\n   * @param force - Whether to force the destruction, if it is false, refCount = 0 can be released successfully.\n   * @returns Whether the release was successful.\n   */\n  var _proto = RefObject.prototype;\n  _proto.destroy = function destroy(force) {\n    if (force === void 0) {\n      force = false;\n    }\n    if (this._destroyed) return true;\n    if (!force && this._refCount !== 0) return false;\n    var resourceManager = this._engine.resourceManager;\n    // resourceManager maybe null,because engine has destroyed.\n    // TODO:the right way to fix this is to ensure destroy all when call engine.destroy,thus don't need to add this project.\n    if (resourceManager) {\n      _EngineObject.prototype.destroy.call(this);\n      resourceManager._deleteRefObject(this.instanceId);\n    }\n    var refCount = this._getRefCount();\n    if (refCount > 0) {\n      this._addRefCount(-refCount);\n    }\n    this._engine = null;\n    this._onDestroy();\n    return true;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getRefCount = function _getRefCount() {\n    return this._refCount;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addRefCount = function _addRefCount(value) {\n    this._refCount += value;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addToResourceManager = function _addToResourceManager(path) {\n    this._engine.resourceManager._addAsset(path, this);\n  }\n\n  /**\n   * Called when the resource is destroyed.\n   * Subclasses can override this function.\n   */;\n  _createClass(RefObject, [{\n    key: \"refCount\",\n    get: /** Whether to ignore the garbage collection check, if it is true, it will not be affected by ResourceManager.gc(). */\n\n    /**\n     * Counted by valid references.\n     */\n    function get() {\n      return this._refCount;\n    }\n  }]);\n  return RefObject;\n}(EngineObject);\n\n/**\n * Shader data grouping.\n */\nvar ShaderDataGroup;\n(function (ShaderDataGroup) {\n  ShaderDataGroup[ShaderDataGroup[\"Scene\"] = 0] = \"Scene\";\n  ShaderDataGroup[ShaderDataGroup[\"Camera\"] = 1] = \"Camera\";\n  ShaderDataGroup[ShaderDataGroup[\"Renderer\"] = 2] = \"Renderer\";\n  ShaderDataGroup[ShaderDataGroup[\"Material\"] = 3] = \"Material\";\n})(ShaderDataGroup || (ShaderDataGroup = {}));\n\n/**\n * The base class of texture, contains some common functions of texture-related classes.\n */\nvar Texture = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(Texture, _RefObject);\n  function Texture() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _RefObject.call.apply(_RefObject, [this].concat(args)) || this;\n    _this.name = void 0;\n    _this._platformTexture = void 0;\n    _this._mipmap = void 0;\n    _this._format = void 0;\n    _this._width = void 0;\n    _this._height = void 0;\n    _this._mipmapCount = void 0;\n    _this._wrapModeU = void 0;\n    _this._wrapModeV = void 0;\n    _this._filterMode = void 0;\n    _this._anisoLevel = 1;\n    return _this;\n  }\n  var _proto = Texture.prototype;\n  /**\n   * Generate multi-level textures based on the 0th level data.\n   */\n  _proto.generateMipmaps = function generateMipmaps() {\n    if (!this._mipmap) return;\n    this._platformTexture.generateMipmaps();\n  }\n\n  /**\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    this._platformTexture.destroy();\n    this._platformTexture = null;\n  }\n\n  /**\n   * Get the maximum mip level of the corresponding size:rounding down.\n   * @remarks http://download.nvidia.com/developer/Papers/2005/NP2_Mipmapping/NP2_Mipmap_Creation.pdf\n   */;\n  _proto._getMaxMiplevel = function _getMaxMiplevel(size) {\n    return Math.floor(Math.log2(size));\n  };\n  _proto._getMipmapCount = function _getMipmapCount() {\n    return this._mipmap ? Math.floor(Math.log2(Math.max(this._width, this._height))) + 1 : 1;\n  };\n  _createClass(Texture, [{\n    key: \"format\",\n    get:\n    /**\n     * Texture format.\n     */\n    function get() {\n      return this._format;\n    }\n\n    /**\n     * The width of the texture.\n     */\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this._width;\n    }\n\n    /**\n     * The height of the texture.\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    }\n\n    /**\n     * Wrapping mode for texture coordinate S.\n     */\n  }, {\n    key: \"wrapModeU\",\n    get: function get() {\n      return this._wrapModeU;\n    },\n    set: function set(value) {\n      if (value === this._wrapModeU) return;\n      this._wrapModeU = value;\n      this._platformTexture.wrapModeU = value;\n    }\n\n    /**\n     * Wrapping mode for texture coordinate T.\n     */\n  }, {\n    key: \"wrapModeV\",\n    get: function get() {\n      return this._wrapModeV;\n    },\n    set: function set(value) {\n      if (value === this._wrapModeV) return;\n      this._wrapModeV = value;\n      this._platformTexture.wrapModeV = value;\n    }\n\n    /**\n     * Texture mipmapping count.\n     */\n  }, {\n    key: \"mipmapCount\",\n    get: function get() {\n      return this._mipmapCount;\n    }\n\n    /**\n     * Filter mode for texture.\n     */\n  }, {\n    key: \"filterMode\",\n    get: function get() {\n      return this._filterMode;\n    },\n    set: function set(value) {\n      if (value === this._filterMode) return;\n      this._filterMode = value;\n      this._platformTexture.filterMode = value;\n    }\n\n    /**\n     * Anisotropic level for texture.\n     */\n  }, {\n    key: \"anisoLevel\",\n    get: function get() {\n      return this._anisoLevel;\n    },\n    set: function set(value) {\n      var max = this._engine._hardwareRenderer.capability.maxAnisoLevel;\n      if (value > max) {\n        Logger.warn(\"anisoLevel:\" + value + \", exceeds the limit and is automatically downgraded to:\" + max);\n        value = max;\n      }\n      if (value < 1) {\n        Logger.warn(\"anisoLevel:\" + value + \", must be greater than 0, and is automatically downgraded to 1\");\n        value = 1;\n      }\n      if (value === this._anisoLevel) return;\n      this._anisoLevel = value;\n      this._platformTexture.anisoLevel = value;\n    }\n  }]);\n  return Texture;\n}(RefObject);\n\n/**\n * Shader Property type.\n */\nvar ShaderPropertyType;\n(function (ShaderPropertyType) {\n  ShaderPropertyType[ShaderPropertyType[\"Float\"] = 0] = \"Float\";\n  ShaderPropertyType[ShaderPropertyType[\"Int\"] = 1] = \"Int\";\n  ShaderPropertyType[ShaderPropertyType[\"Vector2\"] = 2] = \"Vector2\";\n  ShaderPropertyType[ShaderPropertyType[\"Vector3\"] = 3] = \"Vector3\";\n  ShaderPropertyType[ShaderPropertyType[\"Vector4\"] = 4] = \"Vector4\";\n  ShaderPropertyType[ShaderPropertyType[\"Matrix\"] = 5] = \"Matrix\";\n  ShaderPropertyType[ShaderPropertyType[\"Color\"] = 6] = \"Color\";\n  ShaderPropertyType[ShaderPropertyType[\"Texture\"] = 7] = \"Texture\";\n  ShaderPropertyType[ShaderPropertyType[\"FloatArray\"] = 8] = \"FloatArray\";\n  ShaderPropertyType[ShaderPropertyType[\"IntArray\"] = 9] = \"IntArray\";\n  ShaderPropertyType[ShaderPropertyType[\"TextureArray\"] = 10] = \"TextureArray\";\n})(ShaderPropertyType || (ShaderPropertyType = {}));\n\nvar common = \"#define GLSLIFY 1\\n#define PI 3.14159265359\\n#define RECIPROCAL_PI 0.31830988618\\n#define EPSILON 1e-6\\n#define LOG2 1.442695\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2(float x){return x*x;}vec4 RGBMToLinear(vec4 value,float maxRange){return vec4(value.rgb*value.a*maxRange,1.0);}vec4 gammaToLinear(vec4 srgbIn){return vec4(pow(srgbIn.rgb,vec3(2.2)),srgbIn.a);}vec4 linearToGamma(vec4 linearIn){return vec4(pow(linearIn.rgb,vec3(1.0/2.2)),linearIn.a);}\"; // eslint-disable-line\n\nvar common_vert = \"#define GLSLIFY 1\\nattribute vec3 POSITION;\\n#ifdef O3_HAS_UV\\nattribute vec2 TEXCOORD_0;\\n#endif\\n#ifdef O3_HAS_UV1\\nattribute vec2 TEXCOORD_1;\\n#endif\\n#ifdef O3_HAS_SKIN\\nattribute vec4 JOINTS_0;attribute vec4 WEIGHTS_0;\\n#ifdef O3_USE_JOINT_TEXTURE\\nuniform sampler2D u_jointSampler;uniform float u_jointCount;mat4 getJointMatrix(sampler2D smp,float index){float base=index/u_jointCount;float hf=0.5/u_jointCount;float v=base+hf;vec4 m0=texture2D(smp,vec2(0.125,v));vec4 m1=texture2D(smp,vec2(0.375,v));vec4 m2=texture2D(smp,vec2(0.625,v));vec4 m3=texture2D(smp,vec2(0.875,v));return mat4(m0,m1,m2,m3);}\\n#else\\nuniform mat4 u_jointMatrix[O3_JOINTS_NUM];\\n#endif\\n#endif\\n#ifdef O3_HAS_VERTEXCOLOR\\nattribute vec4 COLOR_0;\\n#endif\\nuniform mat4 u_localMat;uniform mat4 u_modelMat;uniform mat4 u_viewMat;uniform mat4 u_projMat;uniform mat4 u_MVMat;uniform mat4 u_MVPMat;uniform mat4 u_normalMat;uniform vec3 u_cameraPos;uniform vec4 u_tilingOffset;\\n#ifndef OMIT_NORMAL\\n#ifdef O3_HAS_NORMAL\\nattribute vec3 NORMAL;\\n#endif\\n#ifdef O3_HAS_TANGENT\\nattribute vec4 TANGENT;\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar common_frag = \"#define GLSLIFY 1\\nuniform mat4 u_localMat;uniform mat4 u_modelMat;uniform mat4 u_viewMat;uniform mat4 u_projMat;uniform mat4 u_MVMat;uniform mat4 u_MVPMat;uniform mat4 u_normalMat;uniform vec3 u_cameraPos;\"; // eslint-disable-line\n\nvar color_share = \"#define GLSLIFY 1\\n#ifdef O3_HAS_VERTEXCOLOR\\nvarying vec4 v_color;\\n#endif\\n\"; // eslint-disable-line\n\nvar normal_share = \"#define GLSLIFY 1\\n#ifndef OMIT_NORMAL\\n#ifdef O3_HAS_NORMAL\\nvarying vec3 v_normal;\\n#if defined(O3_HAS_TANGENT) && ( defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE) )\\nvarying mat3 v_TBN;\\n#endif\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar uv_share = \"#define GLSLIFY 1\\nvarying vec2 v_uv;\\n#ifdef O3_HAS_UV1\\nvarying vec2 v_uv1;\\n#endif\\n\"; // eslint-disable-line\n\nvar worldpos_share = \"#define GLSLIFY 1\\n#ifdef O3_NEED_WORLDPOS\\nvarying vec3 v_pos;\\n#endif\\n\"; // eslint-disable-line\n\nvar shadow_share = \"#define GLSLIFY 1\\n#ifdef O3_GENERATE_SHADOW_MAP\\nuniform mat4 u_viewMatFromLight;uniform mat4 u_projMatFromLight;\\n#endif\\n#ifdef O3_SHADOW_MAP_COUNT\\nuniform mat4 u_viewMatFromLight[O3_SHADOW_MAP_COUNT];uniform mat4 u_projMatFromLight[O3_SHADOW_MAP_COUNT];varying vec4 v_PositionFromLight[O3_SHADOW_MAP_COUNT];\\n#endif\\n\"; // eslint-disable-line\n\nvar fog_share = \"#define GLSLIFY 1\\n#ifdef O3_HAS_FOG\\nvarying vec3 v_fogDepth;uniform vec3 u_fogColor;\\n#ifdef O3_FOG_EXP2\\nuniform float u_fogDensity;\\n#else\\nuniform float u_fogNear;uniform float u_fogFar;\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar begin_normal_vert = \"#define GLSLIFY 1\\n#ifndef OMIT_NORMAL\\n#ifdef O3_HAS_NORMAL\\nvec3 normal=vec3(NORMAL);\\n#endif\\n#ifdef O3_HAS_TANGENT\\nvec4 tangent=vec4(TANGENT);\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar begin_position_vert = \"#define GLSLIFY 1\\nvec4 position=vec4(POSITION,1.0);\"; // eslint-disable-line\n\nvar position_vert = \"#define GLSLIFY 1\\n#ifndef O3_GENERATE_SHADOW_MAP\\ngl_Position=u_MVPMat*position;\\n#endif\\n\"; // eslint-disable-line\n\nvar color_vert = \"#define GLSLIFY 1\\n#ifdef O3_HAS_VERTEXCOLOR\\nv_color=COLOR_0;\\n#endif\\n\"; // eslint-disable-line\n\nvar normal_vert = \"#define GLSLIFY 1\\n#ifndef OMIT_NORMAL\\n#ifdef O3_HAS_NORMAL\\nv_normal=normalize(mat3(u_normalMat)*normal);\\n#if defined(O3_HAS_TANGENT) && ( defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE) )\\nvec3 normalW=normalize(mat3(u_normalMat)*normal.xyz);vec3 tangentW=normalize(mat3(u_normalMat)*tangent.xyz);vec3 bitangentW=cross(normalW,tangentW)*tangent.w;v_TBN=mat3(tangentW,bitangentW,normalW);\\n#endif\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar skinning_vert = \"#define GLSLIFY 1\\n#ifdef O3_HAS_SKIN\\n#ifdef O3_USE_JOINT_TEXTURE\\nmat4 skinMatrix=WEIGHTS_0.x*getJointMatrix(u_jointSampler,JOINTS_0.x)+WEIGHTS_0.y*getJointMatrix(u_jointSampler,JOINTS_0.y)+WEIGHTS_0.z*getJointMatrix(u_jointSampler,JOINTS_0.z)+WEIGHTS_0.w*getJointMatrix(u_jointSampler,JOINTS_0.w);\\n#else\\nmat4 skinMatrix=WEIGHTS_0.x*u_jointMatrix[int(JOINTS_0.x)]+WEIGHTS_0.y*u_jointMatrix[int(JOINTS_0.y)]+WEIGHTS_0.z*u_jointMatrix[int(JOINTS_0.z)]+WEIGHTS_0.w*u_jointMatrix[int(JOINTS_0.w)];\\n#endif\\nposition=skinMatrix*position;\\n#if defined(O3_HAS_NORMAL) && !defined(OMIT_NORMAL)\\nnormal=vec4(skinMatrix*vec4(normal,0.0)).xyz;\\n#if defined(O3_HAS_TANGENT) && ( defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE) )\\ntangent.xyz=vec4(skinMatrix*vec4(tangent.xyz,0.0)).xyz;\\n#endif\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar blendShape_input = \"#define GLSLIFY 1\\n#ifdef OASIS_BLENDSHAPE\\n#ifdef OASIS_BLENDSHAPE_TEXTURE\\nuniform mediump sampler2DArray u_blendShapeTexture;uniform ivec3 u_blendShapeTextureInfo;uniform float u_blendShapeWeights[OASIS_BLENDSHAPE_COUNT];\\n#else\\nattribute vec3 POSITION_BS0;attribute vec3 POSITION_BS1;attribute vec3 POSITION_BS2;attribute vec3 POSITION_BS3;\\n#if defined( OASIS_BLENDSHAPE_NORMAL ) || defined( OASIS_BLENDSHAPE_TANGENT )\\n#ifdef OASIS_BLENDSHAPE_NORMAL\\nattribute vec3 NORMAL_BS0;attribute vec3 NORMAL_BS1;attribute vec3 NORMAL_BS2;attribute vec3 NORMAL_BS3;\\n#endif\\n#ifdef OASIS_BLENDSHAPE_TANGENT\\nattribute vec3 TANGENT_BS0;attribute vec3 TANGENT_BS1;attribute vec3 TANGENT_BS2;attribute vec3 TANGENT_BS3;\\n#endif\\nuniform float u_blendShapeWeights[4];\\n#else\\nattribute vec3 POSITION_BS4;attribute vec3 POSITION_BS5;attribute vec3 POSITION_BS6;attribute vec3 POSITION_BS7;uniform float u_blendShapeWeights[8];\\n#endif\\n#endif\\n#ifdef OASIS_BLENDSHAPE_TEXTURE\\nvec3 getBlendShapeVertexElement(int blendShapeIndex,int vertexElementIndex){int y=vertexElementIndex/u_blendShapeTextureInfo.y;int x=vertexElementIndex-y*u_blendShapeTextureInfo.y;ivec3 uv=ivec3(x,y,blendShapeIndex);return texelFetch(u_blendShapeTexture,uv,0).xyz;}\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar blendShape_vert = \"#define GLSLIFY 1\\n#ifdef OASIS_BLENDSHAPE\\n#ifdef OASIS_BLENDSHAPE_TEXTURE\\nint vertexOffset=gl_VertexID*u_blendShapeTextureInfo.x;for(int i=0;i<OASIS_BLENDSHAPE_COUNT;i++){int vertexElementOffset=vertexOffset;float weight=u_blendShapeWeights[i];position.xyz+=getBlendShapeVertexElement(i,vertexElementOffset)*weight;\\n#ifndef OMIT_NORMAL\\n#if defined( O3_HAS_NORMAL ) && defined( OASIS_BLENDSHAPE_NORMAL )\\nvertexElementOffset+=1;normal+=getBlendShapeVertexElement(i,vertexElementOffset)*weight;\\n#endif\\n#if defined( O3_HAS_TANGENT ) && defined(OASIS_BLENDSHAPE_TANGENT) && ( defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE) )\\nvertexElementOffset+=1;tangent.xyz+=getBlendShapeVertexElement(i,vertexElementOffset)*weight;\\n#endif\\n#endif\\n}\\n#else\\nposition.xyz+=POSITION_BS0*u_blendShapeWeights[0];position.xyz+=POSITION_BS1*u_blendShapeWeights[1];position.xyz+=POSITION_BS2*u_blendShapeWeights[2];position.xyz+=POSITION_BS3*u_blendShapeWeights[3];\\n#if defined( OASIS_BLENDSHAPE_NORMAL ) || defined( OASIS_BLENDSHAPE_TANGENT )\\n#ifndef OMIT_NORMAL\\n#if defined( O3_HAS_NORMAL ) && defined( OASIS_BLENDSHAPE_NORMAL )\\nnormal+=NORMAL_BS0*u_blendShapeWeights[0];normal+=NORMAL_BS1*u_blendShapeWeights[1];normal+=NORMAL_BS2*u_blendShapeWeights[2];normal+=NORMAL_BS3*u_blendShapeWeights[3];\\n#endif\\n#if defined( O3_HAS_TANGENT ) && defined(OASIS_BLENDSHAPE_TANGENT) && ( defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE) )\\ntangent.xyz+=TANGENT_BS0*u_blendShapeWeights[0];tangent.xyz+=TANGENT_BS1*u_blendShapeWeights[1];tangent.xyz+=TANGENT_BS2*u_blendShapeWeights[2];tangent.xyz+=TANGENT_BS3*u_blendShapeWeights[3];\\n#endif\\n#endif\\n#else\\nposition.xyz+=POSITION_BS4*u_blendShapeWeights[4];position.xyz+=POSITION_BS5*u_blendShapeWeights[5];position.xyz+=POSITION_BS6*u_blendShapeWeights[6];position.xyz+=POSITION_BS7*u_blendShapeWeights[7];\\n#endif\\n#endif\\n#endif\\n\"; // eslint-disable-line\n\nvar uv_vert = \"#define GLSLIFY 1\\n#ifdef O3_HAS_UV\\nv_uv=TEXCOORD_0;\\n#else\\nv_uv=vec2(0.,0.);\\n#endif\\n#ifdef O3_HAS_UV1\\nv_uv1=TEXCOORD_1;\\n#endif\\n#ifdef O3_NEED_TILINGOFFSET\\nv_uv=v_uv*u_tilingOffset.xy+u_tilingOffset.zw;\\n#endif\\n\"; // eslint-disable-line\n\nvar worldpos_vert = \"#define GLSLIFY 1\\n#ifdef O3_NEED_WORLDPOS\\nvec4 temp_pos=u_modelMat*position;v_pos=temp_pos.xyz/temp_pos.w;\\n#endif\\n\"; // eslint-disable-line\n\nvar shadow_vert = \"#define GLSLIFY 1\\n#ifdef O3_GENERATE_SHADOW_MAP\\ngl_Position=u_projMatFromLight*u_viewMatFromLight*u_modelMat*position;\\n#endif\\n#ifdef O3_SHADOW_MAP_COUNT\\nfor(int i=0;i<O3_SHADOW_MAP_COUNT;i++){v_PositionFromLight[i]=u_projMatFromLight[i]*u_viewMatFromLight[i]*u_modelMat*vec4(POSITION,1.0);}\\n#endif\\n\"; // eslint-disable-line\n\nvar fog_vert = \"#define GLSLIFY 1\\n#ifdef O3_HAS_FOG\\nv_fogDepth=(u_MVMat*position).xyz;\\n#endif\\n\"; // eslint-disable-line\n\nvar light_frag_define = \"#define GLSLIFY 1\\n#ifdef O3_DIRECT_LIGHT_COUNT\\nstruct DirectLight{vec3 color;vec3 direction;};uniform vec3 u_directLightColor[O3_DIRECT_LIGHT_COUNT];uniform vec3 u_directLightDirection[O3_DIRECT_LIGHT_COUNT];\\n#endif\\n#ifdef O3_POINT_LIGHT_COUNT\\nstruct PointLight{vec3 color;vec3 position;float distance;};uniform vec3 u_pointLightColor[O3_POINT_LIGHT_COUNT];uniform vec3 u_pointLightPosition[O3_POINT_LIGHT_COUNT];uniform float u_pointLightDistance[O3_POINT_LIGHT_COUNT];\\n#endif\\n#ifdef O3_SPOT_LIGHT_COUNT\\nstruct SpotLight{vec3 color;vec3 position;vec3 direction;float distance;float angleCos;float penumbraCos;};uniform vec3 u_spotLightColor[O3_SPOT_LIGHT_COUNT];uniform vec3 u_spotLightPosition[O3_SPOT_LIGHT_COUNT];uniform vec3 u_spotLightDirection[O3_SPOT_LIGHT_COUNT];uniform float u_spotLightDistance[O3_SPOT_LIGHT_COUNT];uniform float u_spotLightAngleCos[O3_SPOT_LIGHT_COUNT];uniform float u_spotLightPenumbraCos[O3_SPOT_LIGHT_COUNT];\\n#endif\\nstruct EnvMapLight{vec3 diffuse;float mipMapLevel;float diffuseIntensity;float specularIntensity;};uniform EnvMapLight u_envMapLight;\\n#ifdef O3_USE_SH\\nuniform vec3 u_env_sh[9];\\n#endif\\n#ifdef O3_USE_SPECULAR_ENV\\nuniform samplerCube u_env_specularSampler;\\n#endif\\n\"; // eslint-disable-line\n\nvar mobile_material_frag = \"#define GLSLIFY 1\\nuniform vec4 u_emissiveColor;uniform vec4 u_baseColor;uniform vec4 u_specularColor;uniform float u_shininess;uniform float u_normalIntensity;uniform float u_alphaCutoff;\\n#ifdef EMISSIVETEXTURE\\nuniform sampler2D u_emissiveTexture;\\n#endif\\n#ifdef BASETEXTURE\\nuniform sampler2D u_baseTexture;\\n#endif\\n#ifdef O3_SPECULAR_TEXTURE\\nuniform sampler2D u_specularTexture;\\n#endif\\n#ifdef NORMALTEXTURE\\nuniform sampler2D u_normalTexture;\\n#endif\\n\"; // eslint-disable-line\n\nvar fog_frag = \"#define GLSLIFY 1\\n#ifdef O3_HAS_FOG\\nfloat fogDepth=length(v_fogDepth);\\n#ifdef O3_FOG_EXP2\\nfloat fogFactor=whiteCompliment(exp2(-u_fogDensity*u_fogDensity*fogDepth*fogDepth*LOG2));\\n#else\\nfloat fogFactor=smoothstep(u_fogNear,u_fogFar,fogDepth);\\n#endif\\ngl_FragColor.rgb=mix(gl_FragColor.rgb,u_fogColor,fogFactor);\\n#endif\\n\"; // eslint-disable-line\n\nvar begin_mobile_frag = \"#define GLSLIFY 1\\nvec4 ambient=vec4(0.0);vec4 emission=u_emissiveColor;vec4 diffuse=u_baseColor;vec4 specular=u_specularColor;\\n#ifdef EMISSIVETEXTURE\\nvec4 emissiveTextureColor=texture2D(u_emissiveTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\nemissiveTextureColor=gammaToLinear(emissiveTextureColor);\\n#endif\\nemission*=emissiveTextureColor;\\n#endif\\n#ifdef BASETEXTURE\\nvec4 diffuseTextureColor=texture2D(u_baseTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\ndiffuseTextureColor=gammaToLinear(diffuseTextureColor);\\n#endif\\ndiffuse*=diffuseTextureColor;\\n#endif\\n#ifdef O3_HAS_VERTEXCOLOR\\ndiffuse*=v_color;\\n#endif\\n#ifdef O3_SPECULAR_TEXTURE\\nvec4 specularTextureColor=texture2D(u_specularTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\nspecularTextureColor=gammaToLinear(specularTextureColor);\\n#endif\\nspecular*=specularTextureColor;\\n#endif\\nambient=vec4(u_envMapLight.diffuse*u_envMapLight.diffuseIntensity,1.0)*diffuse;\"; // eslint-disable-line\n\nvar begin_viewdir_frag = \"#define GLSLIFY 1\\n#ifdef O3_NEED_WORLDPOS\\nvec3 V=normalize(u_cameraPos-v_pos);\\n#endif\\n\"; // eslint-disable-line\n\nvar mobile_blinnphong_frag = \"#define GLSLIFY 1\\n#ifdef NORMALTEXTURE\\nmat3 tbn=getTBN();vec3 N=getNormalByNormalTexture(tbn,u_normalTexture,u_normalIntensity,v_uv);\\n#else\\nvec3 N=getNormal();\\n#endif\\nvec3 lightDiffuse=vec3(0.0,0.0,0.0);vec3 lightSpecular=vec3(0.0,0.0,0.0);\\n#ifdef O3_DIRECT_LIGHT_COUNT\\nDirectLight directionalLight;for(int i=0;i<O3_DIRECT_LIGHT_COUNT;i++){directionalLight.color=u_directLightColor[i];directionalLight.direction=u_directLightDirection[i];float d=max(dot(N,-directionalLight.direction),0.0);lightDiffuse+=directionalLight.color*d;vec3 halfDir=normalize(V-directionalLight.direction);float s=pow(clamp(dot(N,halfDir),0.0,1.0),u_shininess);lightSpecular+=directionalLight.color*s;}\\n#endif\\n#ifdef O3_POINT_LIGHT_COUNT\\nPointLight pointLight;for(int i=0;i<O3_POINT_LIGHT_COUNT;i++){pointLight.color=u_pointLightColor[i];pointLight.position=u_pointLightPosition[i];pointLight.distance=u_pointLightDistance[i];vec3 direction=v_pos-pointLight.position;float dist=length(direction);direction/=dist;float decay=clamp(1.0-pow(dist/pointLight.distance,4.0),0.0,1.0);float d=max(dot(N,-direction),0.0)*decay;lightDiffuse+=pointLight.color*d;vec3 halfDir=normalize(V-direction);float s=pow(clamp(dot(N,halfDir),0.0,1.0),u_shininess)*decay;lightSpecular+=pointLight.color*s;}\\n#endif\\n#ifdef O3_SPOT_LIGHT_COUNT\\nSpotLight spotLight;for(int i=0;i<O3_SPOT_LIGHT_COUNT;i++){spotLight.color=u_spotLightColor[i];spotLight.position=u_spotLightPosition[i];spotLight.direction=u_spotLightDirection[i];spotLight.distance=u_spotLightDistance[i];spotLight.angleCos=u_spotLightAngleCos[i];spotLight.penumbraCos=u_spotLightPenumbraCos[i];vec3 direction=spotLight.position-v_pos;float lightDistance=length(direction);direction/=lightDistance;float angleCos=dot(direction,-spotLight.direction);float decay=clamp(1.0-pow(lightDistance/spotLight.distance,4.0),0.0,1.0);float spotEffect=smoothstep(spotLight.penumbraCos,spotLight.angleCos,angleCos);float decayTotal=decay*spotEffect;float d=max(dot(N,direction),0.0)*decayTotal;lightDiffuse+=spotLight.color*d;vec3 halfDir=normalize(V+direction);float s=pow(clamp(dot(N,halfDir),0.0,1.0),u_shininess)*decayTotal;lightSpecular+=spotLight.color*s;}\\n#endif\\ndiffuse*=vec4(lightDiffuse,1.0);specular*=vec4(lightSpecular,1.0);\\n#ifdef ALPHA_CUTOFF\\nif(diffuse.a<u_alphaCutoff){discard;}\\n#endif\\n\"; // eslint-disable-line\n\nvar noise_common = \"#define GLSLIFY 1\\nvec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec2 mod289(vec2 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod7(vec4 x){return x-floor(x*(1.0/7.0))*7.0;}vec3 mod7(vec3 x){return x-floor(x*(1.0/7.0))*7.0;}vec4 permute(vec4 x){return mod289((34.0*x+1.0)*x);}vec3 permute(vec3 x){return mod289((34.0*x+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 fade(vec4 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}vec2 fade(vec2 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}\\n#define K 0.142857142857\\n#define Ko 0.428571428571\\n#define K2 0.020408163265306\\n#define Kd2 0.0714285714285\\n#define Kz 0.166666666667\\n#define Kzo 0.416666666667\\n#define jitter 1.0\\n#define jitter1 0.8\\n\"; // eslint-disable-line\n\nvar noise_cellular_2D = \"#define GLSLIFY 1\\nvec2 cellular(vec2 P){vec2 Pi=mod289(floor(P));vec2 Pf=fract(P);vec3 oi=vec3(-1.0,0.0,1.0);vec3 of=vec3(-0.5,0.5,1.5);vec3 px=permute(Pi.x+oi);vec3 p=permute(px.x+Pi.y+oi);vec3 ox=fract(p*K)-Ko;vec3 oy=mod7(floor(p*K))*K-Ko;vec3 dx=Pf.x+0.5+jitter*ox;vec3 dy=Pf.y-of+jitter*oy;vec3 d1=dx*dx+dy*dy;p=permute(px.y+Pi.y+oi);ox=fract(p*K)-Ko;oy=mod7(floor(p*K))*K-Ko;dx=Pf.x-0.5+jitter*ox;dy=Pf.y-of+jitter*oy;vec3 d2=dx*dx+dy*dy;p=permute(px.z+Pi.y+oi);ox=fract(p*K)-Ko;oy=mod7(floor(p*K))*K-Ko;dx=Pf.x-1.5+jitter*ox;dy=Pf.y-of+jitter*oy;vec3 d3=dx*dx+dy*dy;vec3 d1a=min(d1,d2);d2=max(d1,d2);d2=min(d2,d3);d1=min(d1a,d2);d2=max(d1a,d2);d1.xy=(d1.x<d1.y)? d1.xy : d1.yx;d1.xz=(d1.x<d1.z)? d1.xz : d1.zx;d1.yz=min(d1.yz,d2.yz);d1.y=min(d1.y,d1.z);d1.y=min(d1.y,d2.x);return sqrt(d1.xy);}\"; // eslint-disable-line\n\nvar noise_cellular_2x2 = \"#define GLSLIFY 1\\nvec2 cellular2x2(vec2 P){vec2 Pi=mod289(floor(P));vec2 Pf=fract(P);vec4 Pfx=Pf.x+vec4(-0.5,-1.5,-0.5,-1.5);vec4 Pfy=Pf.y+vec4(-0.5,-0.5,-1.5,-1.5);vec4 p=permute(Pi.x+vec4(0.0,1.0,0.0,1.0));p=permute(p+Pi.y+vec4(0.0,0.0,1.0,1.0));vec4 ox=mod7(p)*K+Kd2;vec4 oy=mod7(floor(p*K))*K+Kd2;vec4 dx=Pfx+jitter1*ox;vec4 dy=Pfy+jitter1*oy;vec4 d=dx*dx+dy*dy;d.xy=(d.x<d.y)? d.xy : d.yx;d.xz=(d.x<d.z)? d.xz : d.zx;d.xw=(d.x<d.w)? d.xw : d.wx;d.y=min(d.y,d.z);d.y=min(d.y,d.w);return sqrt(d.xy);}\"; // eslint-disable-line\n\nvar noise_cellular_2x2x2 = \"#define GLSLIFY 1\\nvec2 cellular2x2x2(vec3 P){vec3 Pi=mod289(floor(P));vec3 Pf=fract(P);vec4 Pfx=Pf.x+vec4(0.0,-1.0,0.0,-1.0);vec4 Pfy=Pf.y+vec4(0.0,0.0,-1.0,-1.0);vec4 p=permute(Pi.x+vec4(0.0,1.0,0.0,1.0));p=permute(p+Pi.y+vec4(0.0,0.0,1.0,1.0));vec4 p1=permute(p+Pi.z);vec4 p2=permute(p+Pi.z+vec4(1.0));vec4 ox1=fract(p1*K)-Ko;vec4 oy1=mod7(floor(p1*K))*K-Ko;vec4 oz1=floor(p1*K2)*Kz-Kzo;vec4 ox2=fract(p2*K)-Ko;vec4 oy2=mod7(floor(p2*K))*K-Ko;vec4 oz2=floor(p2*K2)*Kz-Kzo;vec4 dx1=Pfx+jitter1*ox1;vec4 dy1=Pfy+jitter1*oy1;vec4 dz1=Pf.z+jitter1*oz1;vec4 dx2=Pfx+jitter1*ox2;vec4 dy2=Pfy+jitter1*oy2;vec4 dz2=Pf.z-1.0+jitter1*oz2;vec4 d1=dx1*dx1+dy1*dy1+dz1*dz1;vec4 d2=dx2*dx2+dy2*dy2+dz2*dz2;vec4 d=min(d1,d2);d2=max(d1,d2);d.xy=(d.x<d.y)? d.xy : d.yx;d.xz=(d.x<d.z)? d.xz : d.zx;d.xw=(d.x<d.w)? d.xw : d.wx;d.yzw=min(d.yzw,d2.yzw);d.y=min(d.y,d.z);d.y=min(d.y,d.w);d.y=min(d.y,d2.x);return sqrt(d.xy);}\"; // eslint-disable-line\n\nvar noise_cellular_3D = \"#define GLSLIFY 1\\nvec2 cellular(vec3 P){vec3 Pi=mod289(floor(P));vec3 Pf=fract(P)-0.5;vec3 Pfx=Pf.x+vec3(1.0,0.0,-1.0);vec3 Pfy=Pf.y+vec3(1.0,0.0,-1.0);vec3 Pfz=Pf.z+vec3(1.0,0.0,-1.0);vec3 p=permute(Pi.x+vec3(-1.0,0.0,1.0));vec3 p1=permute(p+Pi.y-1.0);vec3 p2=permute(p+Pi.y);vec3 p3=permute(p+Pi.y+1.0);vec3 p11=permute(p1+Pi.z-1.0);vec3 p12=permute(p1+Pi.z);vec3 p13=permute(p1+Pi.z+1.0);vec3 p21=permute(p2+Pi.z-1.0);vec3 p22=permute(p2+Pi.z);vec3 p23=permute(p2+Pi.z+1.0);vec3 p31=permute(p3+Pi.z-1.0);vec3 p32=permute(p3+Pi.z);vec3 p33=permute(p3+Pi.z+1.0);vec3 ox11=fract(p11*K)-Ko;vec3 oy11=mod7(floor(p11*K))*K-Ko;vec3 oz11=floor(p11*K2)*Kz-Kzo;vec3 ox12=fract(p12*K)-Ko;vec3 oy12=mod7(floor(p12*K))*K-Ko;vec3 oz12=floor(p12*K2)*Kz-Kzo;vec3 ox13=fract(p13*K)-Ko;vec3 oy13=mod7(floor(p13*K))*K-Ko;vec3 oz13=floor(p13*K2)*Kz-Kzo;vec3 ox21=fract(p21*K)-Ko;vec3 oy21=mod7(floor(p21*K))*K-Ko;vec3 oz21=floor(p21*K2)*Kz-Kzo;vec3 ox22=fract(p22*K)-Ko;vec3 oy22=mod7(floor(p22*K))*K-Ko;vec3 oz22=floor(p22*K2)*Kz-Kzo;vec3 ox23=fract(p23*K)-Ko;vec3 oy23=mod7(floor(p23*K))*K-Ko;vec3 oz23=floor(p23*K2)*Kz-Kzo;vec3 ox31=fract(p31*K)-Ko;vec3 oy31=mod7(floor(p31*K))*K-Ko;vec3 oz31=floor(p31*K2)*Kz-Kzo;vec3 ox32=fract(p32*K)-Ko;vec3 oy32=mod7(floor(p32*K))*K-Ko;vec3 oz32=floor(p32*K2)*Kz-Kzo;vec3 ox33=fract(p33*K)-Ko;vec3 oy33=mod7(floor(p33*K))*K-Ko;vec3 oz33=floor(p33*K2)*Kz-Kzo;vec3 dx11=Pfx+jitter*ox11;vec3 dy11=Pfy.x+jitter*oy11;vec3 dz11=Pfz.x+jitter*oz11;vec3 dx12=Pfx+jitter*ox12;vec3 dy12=Pfy.x+jitter*oy12;vec3 dz12=Pfz.y+jitter*oz12;vec3 dx13=Pfx+jitter*ox13;vec3 dy13=Pfy.x+jitter*oy13;vec3 dz13=Pfz.z+jitter*oz13;vec3 dx21=Pfx+jitter*ox21;vec3 dy21=Pfy.y+jitter*oy21;vec3 dz21=Pfz.x+jitter*oz21;vec3 dx22=Pfx+jitter*ox22;vec3 dy22=Pfy.y+jitter*oy22;vec3 dz22=Pfz.y+jitter*oz22;vec3 dx23=Pfx+jitter*ox23;vec3 dy23=Pfy.y+jitter*oy23;vec3 dz23=Pfz.z+jitter*oz23;vec3 dx31=Pfx+jitter*ox31;vec3 dy31=Pfy.z+jitter*oy31;vec3 dz31=Pfz.x+jitter*oz31;vec3 dx32=Pfx+jitter*ox32;vec3 dy32=Pfy.z+jitter*oy32;vec3 dz32=Pfz.y+jitter*oz32;vec3 dx33=Pfx+jitter*ox33;vec3 dy33=Pfy.z+jitter*oy33;vec3 dz33=Pfz.z+jitter*oz33;vec3 d11=dx11*dx11+dy11*dy11+dz11*dz11;vec3 d12=dx12*dx12+dy12*dy12+dz12*dz12;vec3 d13=dx13*dx13+dy13*dy13+dz13*dz13;vec3 d21=dx21*dx21+dy21*dy21+dz21*dz21;vec3 d22=dx22*dx22+dy22*dy22+dz22*dz22;vec3 d23=dx23*dx23+dy23*dy23+dz23*dz23;vec3 d31=dx31*dx31+dy31*dy31+dz31*dz31;vec3 d32=dx32*dx32+dy32*dy32+dz32*dz32;vec3 d33=dx33*dx33+dy33*dy33+dz33*dz33;vec3 d1a=min(d11,d12);d12=max(d11,d12);d11=min(d1a,d13);d13=max(d1a,d13);d12=min(d12,d13);vec3 d2a=min(d21,d22);d22=max(d21,d22);d21=min(d2a,d23);d23=max(d2a,d23);d22=min(d22,d23);vec3 d3a=min(d31,d32);d32=max(d31,d32);d31=min(d3a,d33);d33=max(d3a,d33);d32=min(d32,d33);vec3 da=min(d11,d21);d21=max(d11,d21);d11=min(da,d31);d31=max(da,d31);d11.xy=(d11.x<d11.y)? d11.xy : d11.yx;d11.xz=(d11.x<d11.z)? d11.xz : d11.zx;d12=min(d12,d21);d12=min(d12,d22);d12=min(d12,d31);d12=min(d12,d32);d11.yz=min(d11.yz,d12.xy);d11.y=min(d11.y,d12.z);d11.y=min(d11.y,d11.z);return sqrt(d11.xy);}\"; // eslint-disable-line\n\nvar noise_cellular = \"#define GLSLIFY 1\\n#include <noise_cellular_2D>\\n#include <noise_cellular_3D>\\n#include <noise_cellular_2x2>\\n#include <noise_cellular_2x2x2>\\n\"; // eslint-disable-line\n\nvar noise_perlin_2D = \"#define GLSLIFY 1\\nfloat perlin(vec2 P){vec4 Pi=floor(P.xyxy)+vec4(0.0,0.0,1.0,1.0);vec4 Pf=fract(P.xyxy)-vec4(0.0,0.0,1.0,1.0);Pi=mod289(Pi);vec4 ix=Pi.xzxz;vec4 iy=Pi.yyww;vec4 fx=Pf.xzxz;vec4 fy=Pf.yyww;vec4 i=permute(permute(ix)+iy);vec4 gx=fract(i*(1.0/41.0))*2.0-1.0;vec4 gy=abs(gx)-0.5;vec4 tx=floor(gx+0.5);gx=gx-tx;vec2 g00=vec2(gx.x,gy.x);vec2 g10=vec2(gx.y,gy.y);vec2 g01=vec2(gx.z,gy.z);vec2 g11=vec2(gx.w,gy.w);vec4 norm=taylorInvSqrt(vec4(dot(g00,g00),dot(g01,g01),dot(g10,g10),dot(g11,g11)));g00*=norm.x;g01*=norm.y;g10*=norm.z;g11*=norm.w;float n00=dot(g00,vec2(fx.x,fy.x));float n10=dot(g10,vec2(fx.y,fy.y));float n01=dot(g01,vec2(fx.z,fy.z));float n11=dot(g11,vec2(fx.w,fy.w));vec2 fade_xy=fade(Pf.xy);vec2 n_x=mix(vec2(n00,n01),vec2(n10,n11),fade_xy.x);float n_xy=mix(n_x.x,n_x.y,fade_xy.y);return 2.3*n_xy;}float perlin(vec2 P,vec2 rep){vec4 Pi=floor(P.xyxy)+vec4(0.0,0.0,1.0,1.0);vec4 Pf=fract(P.xyxy)-vec4(0.0,0.0,1.0,1.0);Pi=mod(Pi,rep.xyxy);Pi=mod289(Pi);vec4 ix=Pi.xzxz;vec4 iy=Pi.yyww;vec4 fx=Pf.xzxz;vec4 fy=Pf.yyww;vec4 i=permute(permute(ix)+iy);vec4 gx=fract(i*(1.0/41.0))*2.0-1.0;vec4 gy=abs(gx)-0.5;vec4 tx=floor(gx+0.5);gx=gx-tx;vec2 g00=vec2(gx.x,gy.x);vec2 g10=vec2(gx.y,gy.y);vec2 g01=vec2(gx.z,gy.z);vec2 g11=vec2(gx.w,gy.w);vec4 norm=taylorInvSqrt(vec4(dot(g00,g00),dot(g01,g01),dot(g10,g10),dot(g11,g11)));g00*=norm.x;g01*=norm.y;g10*=norm.z;g11*=norm.w;float n00=dot(g00,vec2(fx.x,fy.x));float n10=dot(g10,vec2(fx.y,fy.y));float n01=dot(g01,vec2(fx.z,fy.z));float n11=dot(g11,vec2(fx.w,fy.w));vec2 fade_xy=fade(Pf.xy);vec2 n_x=mix(vec2(n00,n01),vec2(n10,n11),fade_xy.x);float n_xy=mix(n_x.x,n_x.y,fade_xy.y);return 2.3*n_xy;}\"; // eslint-disable-line\n\nvar noise_perlin_3D = \"#define GLSLIFY 1\\nfloat perlin(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}float perlin(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}\"; // eslint-disable-line\n\nvar noise_perlin_4D = \"#define GLSLIFY 1\\nfloat perlin(vec4 P){vec4 Pi0=floor(P);vec4 Pi1=Pi0+1.0;Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec4 Pf0=fract(P);vec4 Pf1=Pf0-1.0;vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=vec4(Pi0.zzzz);vec4 iz1=vec4(Pi1.zzzz);vec4 iw0=vec4(Pi0.wwww);vec4 iw1=vec4(Pi1.wwww);vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 ixy00=permute(ixy0+iw0);vec4 ixy01=permute(ixy0+iw1);vec4 ixy10=permute(ixy1+iw0);vec4 ixy11=permute(ixy1+iw1);vec4 gx00=ixy00*(1.0/7.0);vec4 gy00=floor(gx00)*(1.0/7.0);vec4 gz00=floor(gy00)*(1.0/6.0);gx00=fract(gx00)-0.5;gy00=fract(gy00)-0.5;gz00=fract(gz00)-0.5;vec4 gw00=vec4(0.75)-abs(gx00)-abs(gy00)-abs(gz00);vec4 sw00=step(gw00,vec4(0.0));gx00-=sw00*(step(0.0,gx00)-0.5);gy00-=sw00*(step(0.0,gy00)-0.5);vec4 gx01=ixy01*(1.0/7.0);vec4 gy01=floor(gx01)*(1.0/7.0);vec4 gz01=floor(gy01)*(1.0/6.0);gx01=fract(gx01)-0.5;gy01=fract(gy01)-0.5;gz01=fract(gz01)-0.5;vec4 gw01=vec4(0.75)-abs(gx01)-abs(gy01)-abs(gz01);vec4 sw01=step(gw01,vec4(0.0));gx01-=sw01*(step(0.0,gx01)-0.5);gy01-=sw01*(step(0.0,gy01)-0.5);vec4 gx10=ixy10*(1.0/7.0);vec4 gy10=floor(gx10)*(1.0/7.0);vec4 gz10=floor(gy10)*(1.0/6.0);gx10=fract(gx10)-0.5;gy10=fract(gy10)-0.5;gz10=fract(gz10)-0.5;vec4 gw10=vec4(0.75)-abs(gx10)-abs(gy10)-abs(gz10);vec4 sw10=step(gw10,vec4(0.0));gx10-=sw10*(step(0.0,gx10)-0.5);gy10-=sw10*(step(0.0,gy10)-0.5);vec4 gx11=ixy11*(1.0/7.0);vec4 gy11=floor(gx11)*(1.0/7.0);vec4 gz11=floor(gy11)*(1.0/6.0);gx11=fract(gx11)-0.5;gy11=fract(gy11)-0.5;gz11=fract(gz11)-0.5;vec4 gw11=vec4(0.75)-abs(gx11)-abs(gy11)-abs(gz11);vec4 sw11=step(gw11,vec4(0.0));gx11-=sw11*(step(0.0,gx11)-0.5);gy11-=sw11*(step(0.0,gy11)-0.5);vec4 g0000=vec4(gx00.x,gy00.x,gz00.x,gw00.x);vec4 g1000=vec4(gx00.y,gy00.y,gz00.y,gw00.y);vec4 g0100=vec4(gx00.z,gy00.z,gz00.z,gw00.z);vec4 g1100=vec4(gx00.w,gy00.w,gz00.w,gw00.w);vec4 g0010=vec4(gx10.x,gy10.x,gz10.x,gw10.x);vec4 g1010=vec4(gx10.y,gy10.y,gz10.y,gw10.y);vec4 g0110=vec4(gx10.z,gy10.z,gz10.z,gw10.z);vec4 g1110=vec4(gx10.w,gy10.w,gz10.w,gw10.w);vec4 g0001=vec4(gx01.x,gy01.x,gz01.x,gw01.x);vec4 g1001=vec4(gx01.y,gy01.y,gz01.y,gw01.y);vec4 g0101=vec4(gx01.z,gy01.z,gz01.z,gw01.z);vec4 g1101=vec4(gx01.w,gy01.w,gz01.w,gw01.w);vec4 g0011=vec4(gx11.x,gy11.x,gz11.x,gw11.x);vec4 g1011=vec4(gx11.y,gy11.y,gz11.y,gw11.y);vec4 g0111=vec4(gx11.z,gy11.z,gz11.z,gw11.z);vec4 g1111=vec4(gx11.w,gy11.w,gz11.w,gw11.w);vec4 norm00=taylorInvSqrt(vec4(dot(g0000,g0000),dot(g0100,g0100),dot(g1000,g1000),dot(g1100,g1100)));g0000*=norm00.x;g0100*=norm00.y;g1000*=norm00.z;g1100*=norm00.w;vec4 norm01=taylorInvSqrt(vec4(dot(g0001,g0001),dot(g0101,g0101),dot(g1001,g1001),dot(g1101,g1101)));g0001*=norm01.x;g0101*=norm01.y;g1001*=norm01.z;g1101*=norm01.w;vec4 norm10=taylorInvSqrt(vec4(dot(g0010,g0010),dot(g0110,g0110),dot(g1010,g1010),dot(g1110,g1110)));g0010*=norm10.x;g0110*=norm10.y;g1010*=norm10.z;g1110*=norm10.w;vec4 norm11=taylorInvSqrt(vec4(dot(g0011,g0011),dot(g0111,g0111),dot(g1011,g1011),dot(g1111,g1111)));g0011*=norm11.x;g0111*=norm11.y;g1011*=norm11.z;g1111*=norm11.w;float n0000=dot(g0000,Pf0);float n1000=dot(g1000,vec4(Pf1.x,Pf0.yzw));float n0100=dot(g0100,vec4(Pf0.x,Pf1.y,Pf0.zw));float n1100=dot(g1100,vec4(Pf1.xy,Pf0.zw));float n0010=dot(g0010,vec4(Pf0.xy,Pf1.z,Pf0.w));float n1010=dot(g1010,vec4(Pf1.x,Pf0.y,Pf1.z,Pf0.w));float n0110=dot(g0110,vec4(Pf0.x,Pf1.yz,Pf0.w));float n1110=dot(g1110,vec4(Pf1.xyz,Pf0.w));float n0001=dot(g0001,vec4(Pf0.xyz,Pf1.w));float n1001=dot(g1001,vec4(Pf1.x,Pf0.yz,Pf1.w));float n0101=dot(g0101,vec4(Pf0.x,Pf1.y,Pf0.z,Pf1.w));float n1101=dot(g1101,vec4(Pf1.xy,Pf0.z,Pf1.w));float n0011=dot(g0011,vec4(Pf0.xy,Pf1.zw));float n1011=dot(g1011,vec4(Pf1.x,Pf0.y,Pf1.zw));float n0111=dot(g0111,vec4(Pf0.x,Pf1.yzw));float n1111=dot(g1111,Pf1);vec4 fade_xyzw=fade(Pf0);vec4 n_0w=mix(vec4(n0000,n1000,n0100,n1100),vec4(n0001,n1001,n0101,n1101),fade_xyzw.w);vec4 n_1w=mix(vec4(n0010,n1010,n0110,n1110),vec4(n0011,n1011,n0111,n1111),fade_xyzw.w);vec4 n_zw=mix(n_0w,n_1w,fade_xyzw.z);vec2 n_yzw=mix(n_zw.xy,n_zw.zw,fade_xyzw.y);float n_xyzw=mix(n_yzw.x,n_yzw.y,fade_xyzw.x);return 2.2*n_xyzw;}float perlin(vec4 P,vec4 rep){vec4 Pi0=mod(floor(P),rep);vec4 Pi1=mod(Pi0+1.0,rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec4 Pf0=fract(P);vec4 Pf1=Pf0-1.0;vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=vec4(Pi0.zzzz);vec4 iz1=vec4(Pi1.zzzz);vec4 iw0=vec4(Pi0.wwww);vec4 iw1=vec4(Pi1.wwww);vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 ixy00=permute(ixy0+iw0);vec4 ixy01=permute(ixy0+iw1);vec4 ixy10=permute(ixy1+iw0);vec4 ixy11=permute(ixy1+iw1);vec4 gx00=ixy00*(1.0/7.0);vec4 gy00=floor(gx00)*(1.0/7.0);vec4 gz00=floor(gy00)*(1.0/6.0);gx00=fract(gx00)-0.5;gy00=fract(gy00)-0.5;gz00=fract(gz00)-0.5;vec4 gw00=vec4(0.75)-abs(gx00)-abs(gy00)-abs(gz00);vec4 sw00=step(gw00,vec4(0.0));gx00-=sw00*(step(0.0,gx00)-0.5);gy00-=sw00*(step(0.0,gy00)-0.5);vec4 gx01=ixy01*(1.0/7.0);vec4 gy01=floor(gx01)*(1.0/7.0);vec4 gz01=floor(gy01)*(1.0/6.0);gx01=fract(gx01)-0.5;gy01=fract(gy01)-0.5;gz01=fract(gz01)-0.5;vec4 gw01=vec4(0.75)-abs(gx01)-abs(gy01)-abs(gz01);vec4 sw01=step(gw01,vec4(0.0));gx01-=sw01*(step(0.0,gx01)-0.5);gy01-=sw01*(step(0.0,gy01)-0.5);vec4 gx10=ixy10*(1.0/7.0);vec4 gy10=floor(gx10)*(1.0/7.0);vec4 gz10=floor(gy10)*(1.0/6.0);gx10=fract(gx10)-0.5;gy10=fract(gy10)-0.5;gz10=fract(gz10)-0.5;vec4 gw10=vec4(0.75)-abs(gx10)-abs(gy10)-abs(gz10);vec4 sw10=step(gw10,vec4(0.0));gx10-=sw10*(step(0.0,gx10)-0.5);gy10-=sw10*(step(0.0,gy10)-0.5);vec4 gx11=ixy11*(1.0/7.0);vec4 gy11=floor(gx11)*(1.0/7.0);vec4 gz11=floor(gy11)*(1.0/6.0);gx11=fract(gx11)-0.5;gy11=fract(gy11)-0.5;gz11=fract(gz11)-0.5;vec4 gw11=vec4(0.75)-abs(gx11)-abs(gy11)-abs(gz11);vec4 sw11=step(gw11,vec4(0.0));gx11-=sw11*(step(0.0,gx11)-0.5);gy11-=sw11*(step(0.0,gy11)-0.5);vec4 g0000=vec4(gx00.x,gy00.x,gz00.x,gw00.x);vec4 g1000=vec4(gx00.y,gy00.y,gz00.y,gw00.y);vec4 g0100=vec4(gx00.z,gy00.z,gz00.z,gw00.z);vec4 g1100=vec4(gx00.w,gy00.w,gz00.w,gw00.w);vec4 g0010=vec4(gx10.x,gy10.x,gz10.x,gw10.x);vec4 g1010=vec4(gx10.y,gy10.y,gz10.y,gw10.y);vec4 g0110=vec4(gx10.z,gy10.z,gz10.z,gw10.z);vec4 g1110=vec4(gx10.w,gy10.w,gz10.w,gw10.w);vec4 g0001=vec4(gx01.x,gy01.x,gz01.x,gw01.x);vec4 g1001=vec4(gx01.y,gy01.y,gz01.y,gw01.y);vec4 g0101=vec4(gx01.z,gy01.z,gz01.z,gw01.z);vec4 g1101=vec4(gx01.w,gy01.w,gz01.w,gw01.w);vec4 g0011=vec4(gx11.x,gy11.x,gz11.x,gw11.x);vec4 g1011=vec4(gx11.y,gy11.y,gz11.y,gw11.y);vec4 g0111=vec4(gx11.z,gy11.z,gz11.z,gw11.z);vec4 g1111=vec4(gx11.w,gy11.w,gz11.w,gw11.w);vec4 norm00=taylorInvSqrt(vec4(dot(g0000,g0000),dot(g0100,g0100),dot(g1000,g1000),dot(g1100,g1100)));g0000*=norm00.x;g0100*=norm00.y;g1000*=norm00.z;g1100*=norm00.w;vec4 norm01=taylorInvSqrt(vec4(dot(g0001,g0001),dot(g0101,g0101),dot(g1001,g1001),dot(g1101,g1101)));g0001*=norm01.x;g0101*=norm01.y;g1001*=norm01.z;g1101*=norm01.w;vec4 norm10=taylorInvSqrt(vec4(dot(g0010,g0010),dot(g0110,g0110),dot(g1010,g1010),dot(g1110,g1110)));g0010*=norm10.x;g0110*=norm10.y;g1010*=norm10.z;g1110*=norm10.w;vec4 norm11=taylorInvSqrt(vec4(dot(g0011,g0011),dot(g0111,g0111),dot(g1011,g1011),dot(g1111,g1111)));g0011*=norm11.x;g0111*=norm11.y;g1011*=norm11.z;g1111*=norm11.w;float n0000=dot(g0000,Pf0);float n1000=dot(g1000,vec4(Pf1.x,Pf0.yzw));float n0100=dot(g0100,vec4(Pf0.x,Pf1.y,Pf0.zw));float n1100=dot(g1100,vec4(Pf1.xy,Pf0.zw));float n0010=dot(g0010,vec4(Pf0.xy,Pf1.z,Pf0.w));float n1010=dot(g1010,vec4(Pf1.x,Pf0.y,Pf1.z,Pf0.w));float n0110=dot(g0110,vec4(Pf0.x,Pf1.yz,Pf0.w));float n1110=dot(g1110,vec4(Pf1.xyz,Pf0.w));float n0001=dot(g0001,vec4(Pf0.xyz,Pf1.w));float n1001=dot(g1001,vec4(Pf1.x,Pf0.yz,Pf1.w));float n0101=dot(g0101,vec4(Pf0.x,Pf1.y,Pf0.z,Pf1.w));float n1101=dot(g1101,vec4(Pf1.xy,Pf0.z,Pf1.w));float n0011=dot(g0011,vec4(Pf0.xy,Pf1.zw));float n1011=dot(g1011,vec4(Pf1.x,Pf0.y,Pf1.zw));float n0111=dot(g0111,vec4(Pf0.x,Pf1.yzw));float n1111=dot(g1111,Pf1);vec4 fade_xyzw=fade(Pf0);vec4 n_0w=mix(vec4(n0000,n1000,n0100,n1100),vec4(n0001,n1001,n0101,n1101),fade_xyzw.w);vec4 n_1w=mix(vec4(n0010,n1010,n0110,n1110),vec4(n0011,n1011,n0111,n1111),fade_xyzw.w);vec4 n_zw=mix(n_0w,n_1w,fade_xyzw.z);vec2 n_yzw=mix(n_zw.xy,n_zw.zw,fade_xyzw.y);float n_xyzw=mix(n_yzw.x,n_yzw.y,fade_xyzw.x);return 2.2*n_xyzw;}\"; // eslint-disable-line\n\nvar noise_perlin = \"#define GLSLIFY 1\\n#include <noise_perlin_2D>\\n#include <noise_perlin_3D>\\n#include <noise_perlin_4D>\\n\"; // eslint-disable-line\n\nvar noise_psrd_2D = \"#define GLSLIFY 1\\nvec2 rgrad2(vec2 p,float rot){float u=permute(permute(p.x)+p.y)*0.0243902439+rot;u=fract(u)*6.28318530718;return vec2(cos(u),sin(u));}vec3 psrdnoise(vec2 pos,vec2 per,float rot){pos.y+=0.01;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 xw=mod(vec3(p0.x,p1.x,p2.x),per.x);vec3 yw=mod(vec3(p0.y,p1.y,p2.y),per.y);vec3 iuw=xw+0.5*yw;vec3 ivw=yw;vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));vec3 dtdx=-2.0*vec3(d0.x,d1.x,d2.x);vec3 dtdy=-2.0*vec3(d0.y,d1.y,d2.y);if(t.x<0.0){dtdx.x=0.0;dtdy.x=0.0;t.x=0.0;}if(t.y<0.0){dtdx.y=0.0;dtdy.y=0.0;t.y=0.0;}if(t.z<0.0){dtdx.z=0.0;dtdy.z=0.0;t.z=0.0;}vec3 t2=t*t;vec3 t4=t2*t2;vec3 t3=t2*t;float n=dot(t4,w);vec2 dt0=vec2(dtdx.x,dtdy.x)*4.0*t3.x;vec2 dn0=t4.x*g0+dt0*w.x;vec2 dt1=vec2(dtdx.y,dtdy.y)*4.0*t3.y;vec2 dn1=t4.y*g1+dt1*w.y;vec2 dt2=vec2(dtdx.z,dtdy.z)*4.0*t3.z;vec2 dn2=t4.z*g2+dt2*w.z;return 11.0*vec3(n,dn0+dn1+dn2);}vec3 psdnoise(vec2 pos,vec2 per){return psrdnoise(pos,per,0.0);}float psrnoise(vec2 pos,vec2 per,float rot){pos.y+=0.001;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 xw=mod(vec3(p0.x,p1.x,p2.x),per.x);vec3 yw=mod(vec3(p0.y,p1.y,p2.y),per.y);vec3 iuw=xw+0.5*yw;vec3 ivw=yw;vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));t=max(t,0.0);vec3 t2=t*t;vec3 t4=t2*t2;float n=dot(t4,w);return 11.0*n;}float psnoise(vec2 pos,vec2 per){return psrnoise(pos,per,0.0);}vec3 srdnoise(vec2 pos,float rot){pos.y+=0.001;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 x=vec3(p0.x,p1.x,p2.x);vec3 y=vec3(p0.y,p1.y,p2.y);vec3 iuw=x+0.5*y;vec3 ivw=y;iuw=mod289(iuw);ivw=mod289(ivw);vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));vec3 dtdx=-2.0*vec3(d0.x,d1.x,d2.x);vec3 dtdy=-2.0*vec3(d0.y,d1.y,d2.y);if(t.x<0.0){dtdx.x=0.0;dtdy.x=0.0;t.x=0.0;}if(t.y<0.0){dtdx.y=0.0;dtdy.y=0.0;t.y=0.0;}if(t.z<0.0){dtdx.z=0.0;dtdy.z=0.0;t.z=0.0;}vec3 t2=t*t;vec3 t4=t2*t2;vec3 t3=t2*t;float n=dot(t4,w);vec2 dt0=vec2(dtdx.x,dtdy.x)*4.0*t3.x;vec2 dn0=t4.x*g0+dt0*w.x;vec2 dt1=vec2(dtdx.y,dtdy.y)*4.0*t3.y;vec2 dn1=t4.y*g1+dt1*w.y;vec2 dt2=vec2(dtdx.z,dtdy.z)*4.0*t3.z;vec2 dn2=t4.z*g2+dt2*w.z;return 11.0*vec3(n,dn0+dn1+dn2);}vec3 sdnoise(vec2 pos){return srdnoise(pos,0.0);}float srnoise(vec2 pos,float rot){pos.y+=0.001;vec2 uv=vec2(pos.x+pos.y*0.5,pos.y);vec2 i0=floor(uv);vec2 f0=fract(uv);vec2 i1=(f0.x>f0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec2 p0=vec2(i0.x-i0.y*0.5,i0.y);vec2 p1=vec2(p0.x+i1.x-i1.y*0.5,p0.y+i1.y);vec2 p2=vec2(p0.x+0.5,p0.y+1.0);i1=i0+i1;vec2 i2=i0+vec2(1.0,1.0);vec2 d0=pos-p0;vec2 d1=pos-p1;vec2 d2=pos-p2;vec3 x=vec3(p0.x,p1.x,p2.x);vec3 y=vec3(p0.y,p1.y,p2.y);vec3 iuw=x+0.5*y;vec3 ivw=y;iuw=mod289(iuw);ivw=mod289(ivw);vec2 g0=rgrad2(vec2(iuw.x,ivw.x),rot);vec2 g1=rgrad2(vec2(iuw.y,ivw.y),rot);vec2 g2=rgrad2(vec2(iuw.z,ivw.z),rot);vec3 w=vec3(dot(g0,d0),dot(g1,d1),dot(g2,d2));vec3 t=0.8-vec3(dot(d0,d0),dot(d1,d1),dot(d2,d2));t=max(t,0.0);vec3 t2=t*t;vec3 t4=t2*t2;float n=dot(t4,w);return 11.0*n;}float snoise(vec2 pos){return srnoise(pos,0.0);}\"; // eslint-disable-line\n\nvar noise_simplex_2D = \"#define GLSLIFY 1\\nfloat simplex(vec2 v){const vec4 C=vec4(0.211324865405187,0.366025403784439,-0.577350269189626,0.024390243902439);vec2 i=floor(v+dot(v,C.yy));vec2 x0=v-i+dot(i,C.xx);vec2 i1;i1=(x0.x>x0.y)? vec2(1.0,0.0): vec2(0.0,1.0);vec4 x12=x0.xyxy+C.xxzz;x12.xy-=i1;i=mod289(i);vec3 p=permute(permute(i.y+vec3(0.0,i1.y,1.0))+i.x+vec3(0.0,i1.x,1.0));vec3 m=max(0.5-vec3(dot(x0,x0),dot(x12.xy,x12.xy),dot(x12.zw,x12.zw)),0.0);m=m*m;m=m*m;vec3 x=2.0*fract(p*C.www)-1.0;vec3 h=abs(x)-0.5;vec3 ox=floor(x+0.5);vec3 a0=x-ox;m*=1.79284291400159-0.85373472095314*(a0*a0+h*h);vec3 g;g.x=a0.x*x0.x+h.x*x0.y;g.yz=a0.yz*x12.xz+h.yz*x12.yw;return 130.0*dot(m,g);}\"; // eslint-disable-line\n\nvar noise_simplex_3D_grad = \"#define GLSLIFY 1\\nfloat simplex(vec3 v,out vec3 gradient){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);vec4 m2=m*m;vec4 m4=m2*m2;vec4 pdotx=vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3));vec4 temp=m2*m*pdotx;gradient=-8.0*(temp.x*x0+temp.y*x1+temp.z*x2+temp.w*x3);gradient+=m4.x*p0+m4.y*p1+m4.z*p2+m4.w*p3;gradient*=42.0;return 42.0*dot(m4,pdotx);}\"; // eslint-disable-line\n\nvar noise_simplex_3D = \"#define GLSLIFY 1\\nfloat simplex(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\"; // eslint-disable-line\n\nvar noise_simplex_4D = \"#define GLSLIFY 1\\nvec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}\\n#define F4 0.309016994374947451\\nfloat simplex(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 m0=max(0.6-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.6-vec2(dot(x3,x3),dot(x4,x4)),0.0);m0=m0*m0;m1=m1*m1;return 49.0*(dot(m0*m0,vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2)))+dot(m1*m1,vec2(dot(p3,x3),dot(p4,x4))));}\"; // eslint-disable-line\n\nvar noise_simplex = \"#define GLSLIFY 1\\n#include <noise_simplex_2D>\\n#include <noise_simplex_3D>\\n#include <noise_simplex_3D_grad>\\n#include <noise_simplex_4D>\\n\"; // eslint-disable-line\n\nvar pbr_frag_define = \"#define GLSLIFY 1\\nuniform float u_alphaCutoff;uniform vec4 u_baseColor;uniform float u_metal;uniform float u_roughness;uniform vec3 u_PBRSpecularColor;uniform float u_glossiness;uniform vec3 u_emissiveColor;\\n#ifdef CLEARCOAT\\nuniform float u_clearCoat;uniform float u_clearCoatRoughness;\\n#endif\\nuniform float u_normalIntensity;uniform float u_occlusionIntensity;uniform float u_occlusionTextureCoord;\\n#ifdef BASETEXTURE\\nuniform sampler2D u_baseTexture;\\n#endif\\n#ifdef NORMALTEXTURE\\nuniform sampler2D u_normalTexture;\\n#endif\\n#ifdef EMISSIVETEXTURE\\nuniform sampler2D u_emissiveTexture;\\n#endif\\n#ifdef ROUGHNESSMETALLICTEXTURE\\nuniform sampler2D u_roughnessMetallicTexture;\\n#endif\\n#ifdef SPECULARGLOSSINESSTEXTURE\\nuniform sampler2D u_specularGlossinessTexture;\\n#endif\\n#ifdef OCCLUSIONTEXTURE\\nuniform sampler2D u_occlusionTexture;\\n#endif\\n#ifdef HAS_CLEARCOATTEXTURE\\nuniform sampler2D u_clearCoatTexture;\\n#endif\\n#ifdef HAS_CLEARCOATROUGHNESSTEXTURE\\nuniform sampler2D u_clearCoatRoughnessTexture;\\n#endif\\n#ifdef HAS_CLEARCOATNORMALTEXTURE\\nuniform sampler2D u_clearCoatNormalTexture;\\n#endif\\nstruct ReflectedLight{vec3 directDiffuse;vec3 directSpecular;vec3 indirectDiffuse;vec3 indirectSpecular;};struct Geometry{vec3 position;vec3 normal;vec3 viewDir;float dotNV;\\n#ifdef CLEARCOAT\\nvec3 clearCoatNormal;float clearCoatDotNV;\\n#endif\\n};struct Material{vec3 diffuseColor;float roughness;vec3 specularColor;float opacity;\\n#ifdef CLEARCOAT\\nfloat clearCoat;float clearCoatRoughness;\\n#endif\\n};\"; // eslint-disable-line\n\nvar pbr_helper = \"#define GLSLIFY 1\\n#include <normal_get>\\nfloat computeSpecularOcclusion(float ambientOcclusion,float roughness,float dotNV){return saturate(pow(dotNV+ambientOcclusion,exp2(-16.0*roughness-1.0))-1.0+ambientOcclusion);}float getAARoughnessFactor(vec3 normal){\\n#ifdef HAS_DERIVATIVES\\nvec3 dxy=max(abs(dFdx(normal)),abs(dFdy(normal)));return 0.04+max(max(dxy.x,dxy.y),dxy.z);\\n#else\\nreturn 0.04;\\n#endif\\n}void initGeometry(out Geometry geometry){geometry.position=v_pos;geometry.viewDir=normalize(u_cameraPos-v_pos);\\n#if defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE)\\nmat3 tbn=getTBN();\\n#endif\\n#ifdef NORMALTEXTURE\\ngeometry.normal=getNormalByNormalTexture(tbn,u_normalTexture,u_normalIntensity,v_uv);\\n#else\\ngeometry.normal=getNormal();\\n#endif\\ngeometry.dotNV=saturate(dot(geometry.normal,geometry.viewDir));\\n#ifdef CLEARCOAT\\n#ifdef HAS_CLEARCOATNORMALTEXTURE\\ngeometry.clearCoatNormal=getNormalByNormalTexture(tbn,u_clearCoatNormalTexture,u_normalIntensity,v_uv);\\n#else\\ngeometry.clearCoatNormal=getNormal();\\n#endif\\ngeometry.clearCoatDotNV=saturate(dot(geometry.clearCoatNormal,geometry.viewDir));\\n#endif\\n}void initMaterial(out Material material,const in Geometry geometry){vec4 baseColor=u_baseColor;float metal=u_metal;float roughness=u_roughness;vec3 specularColor=u_PBRSpecularColor;float glossiness=u_glossiness;float alphaCutoff=u_alphaCutoff;\\n#ifdef BASETEXTURE\\nvec4 baseTextureColor=texture2D(u_baseTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\nbaseTextureColor=gammaToLinear(baseTextureColor);\\n#endif\\nbaseColor*=baseTextureColor;\\n#endif\\n#ifdef O3_HAS_VERTEXCOLOR\\nbaseColor*=v_color;\\n#endif\\n#ifdef ALPHA_CUTOFF\\nif(baseColor.a<alphaCutoff){discard;}\\n#endif\\n#ifdef ROUGHNESSMETALLICTEXTURE\\nvec4 metalRoughMapColor=texture2D(u_roughnessMetallicTexture,v_uv);roughness*=metalRoughMapColor.g;metal*=metalRoughMapColor.b;\\n#endif\\n#ifdef SPECULARGLOSSINESSTEXTURE\\nvec4 specularGlossinessColor=texture2D(u_specularGlossinessTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\nspecularGlossinessColor=gammaToLinear(specularGlossinessColor);\\n#endif\\nspecularColor*=specularGlossinessColor.rgb;glossiness*=specularGlossinessColor.a;\\n#endif\\n#ifdef IS_METALLIC_WORKFLOW\\nmaterial.diffuseColor=baseColor.rgb*(1.0-metal);material.specularColor=mix(vec3(0.04),baseColor.rgb,metal);material.roughness=roughness;\\n#else\\nfloat specularStrength=max(max(specularColor.r,specularColor.g),specularColor.b);material.diffuseColor=baseColor.rgb*(1.0-specularStrength);material.specularColor=specularColor;material.roughness=1.0-glossiness;\\n#endif\\nmaterial.roughness=max(material.roughness,getAARoughnessFactor(geometry.normal));\\n#ifdef CLEARCOAT\\nmaterial.clearCoat=u_clearCoat;material.clearCoatRoughness=u_clearCoatRoughness;\\n#ifdef HAS_CLEARCOATTEXTURE\\nmaterial.clearCoat*=texture2D(u_clearCoatTexture,v_uv).r;\\n#endif\\n#ifdef HAS_CLEARCOATROUGHNESSTEXTURE\\nmaterial.clearCoatRoughness*=texture2D(u_clearCoatRoughnessTexture,v_uv).g;\\n#endif\\nmaterial.clearCoat=saturate(material.clearCoat);material.clearCoatRoughness=max(material.clearCoatRoughness,getAARoughnessFactor(geometry.clearCoatNormal));\\n#endif\\nmaterial.opacity=baseColor.a;}\\n#include <brdf>\\n#include <direct_irradiance_frag_define>\\n#include <ibl_frag_define>\\n\"; // eslint-disable-line\n\nvar brdf = \"#define GLSLIFY 1\\nfloat F_Schlick(float dotLH){return 0.04+0.96*(pow(1.0-dotLH,5.0));}vec3 F_Schlick(vec3 specularColor,float dotLH){float fresnel=exp2((-5.55473*dotLH-6.98316)*dotLH);return(1.0-specularColor)*fresnel+specularColor;}float G_GGX_SmithCorrelated(float alpha,float dotNL,float dotNV){float a2=pow2(alpha);float gv=dotNL*sqrt(a2+(1.0-a2)*pow2(dotNV));float gl=dotNV*sqrt(a2+(1.0-a2)*pow2(dotNL));return 0.5/max(gv+gl,EPSILON);}float D_GGX(float alpha,float dotNH){float a2=pow2(alpha);float denom=pow2(dotNH)*(a2-1.0)+1.0;return RECIPROCAL_PI*a2/pow2(denom);}vec3 BRDF_Specular_GGX(vec3 incidentDirection,vec3 viewDir,vec3 normal,vec3 specularColor,float roughness){float alpha=pow2(roughness);vec3 halfDir=normalize(incidentDirection+viewDir);float dotNL=saturate(dot(normal,incidentDirection));float dotNV=saturate(dot(normal,viewDir));float dotNH=saturate(dot(normal,halfDir));float dotLH=saturate(dot(incidentDirection,halfDir));vec3 F=F_Schlick(specularColor,dotLH);float G=G_GGX_SmithCorrelated(alpha,dotNL,dotNV);float D=D_GGX(alpha,dotNH);return F*(G*D);}vec3 BRDF_Diffuse_Lambert(vec3 diffuseColor){return RECIPROCAL_PI*diffuseColor;}\"; // eslint-disable-line\n\nvar direct_irradiance_frag_define = \"#define GLSLIFY 1\\nvoid addDirectRadiance(vec3 incidentDirection,vec3 color,Geometry geometry,Material material,inout ReflectedLight reflectedLight){float attenuation=1.0;\\n#ifdef CLEARCOAT\\nfloat clearCoatDotNL=saturate(dot(geometry.clearCoatNormal,incidentDirection));vec3 clearCoatIrradiance=clearCoatDotNL*color;reflectedLight.directSpecular+=material.clearCoat*clearCoatIrradiance*BRDF_Specular_GGX(incidentDirection,geometry.viewDir,geometry.clearCoatNormal,vec3(0.04),material.clearCoatRoughness);attenuation-=material.clearCoat*F_Schlick(geometry.clearCoatDotNV);\\n#endif\\nfloat dotNL=saturate(dot(geometry.normal,incidentDirection));vec3 irradiance=dotNL*color*PI;reflectedLight.directSpecular+=attenuation*irradiance*BRDF_Specular_GGX(incidentDirection,geometry.viewDir,geometry.normal,material.specularColor,material.roughness);reflectedLight.directDiffuse+=attenuation*irradiance*BRDF_Diffuse_Lambert(material.diffuseColor);}\\n#ifdef O3_DIRECT_LIGHT_COUNT\\nvoid addDirectionalDirectLightRadiance(DirectLight directionalLight,Geometry geometry,Material material,inout ReflectedLight reflectedLight){vec3 color=directionalLight.color;vec3 direction=-directionalLight.direction;addDirectRadiance(direction,color,geometry,material,reflectedLight);}\\n#endif\\n#ifdef O3_POINT_LIGHT_COUNT\\nvoid addPointDirectLightRadiance(PointLight pointLight,Geometry geometry,Material material,inout ReflectedLight reflectedLight){vec3 lVector=pointLight.position-geometry.position;vec3 direction=normalize(lVector);float lightDistance=length(lVector);vec3 color=pointLight.color;color*=clamp(1.0-pow(lightDistance/pointLight.distance,4.0),0.0,1.0);addDirectRadiance(direction,color,geometry,material,reflectedLight);}\\n#endif\\n#ifdef O3_SPOT_LIGHT_COUNT\\nvoid addSpotDirectLightRadiance(SpotLight spotLight,Geometry geometry,Material material,inout ReflectedLight reflectedLight){vec3 lVector=spotLight.position-geometry.position;vec3 direction=normalize(lVector);float lightDistance=length(lVector);float angleCos=dot(direction,-spotLight.direction);float spotEffect=smoothstep(spotLight.penumbraCos,spotLight.angleCos,angleCos);float decayEffect=clamp(1.0-pow(lightDistance/spotLight.distance,4.0),0.0,1.0);vec3 color=spotLight.color;color*=spotEffect*decayEffect;addDirectRadiance(direction,color,geometry,material,reflectedLight);}\\n#endif\\nvoid addTotalDirectRadiance(Geometry geometry,Material material,inout ReflectedLight reflectedLight){\\n#ifdef O3_DIRECT_LIGHT_COUNT\\nDirectLight directionalLight;for(int i=0;i<O3_DIRECT_LIGHT_COUNT;i++){directionalLight.color=u_directLightColor[i];directionalLight.direction=u_directLightDirection[i];addDirectionalDirectLightRadiance(directionalLight,geometry,material,reflectedLight);}\\n#endif\\n#ifdef O3_POINT_LIGHT_COUNT\\nPointLight pointLight;for(int i=0;i<O3_POINT_LIGHT_COUNT;i++){pointLight.color=u_pointLightColor[i];pointLight.position=u_pointLightPosition[i];pointLight.distance=u_pointLightDistance[i];addPointDirectLightRadiance(pointLight,geometry,material,reflectedLight);}\\n#endif\\n#ifdef O3_SPOT_LIGHT_COUNT\\nSpotLight spotLight;for(int i=0;i<O3_SPOT_LIGHT_COUNT;i++){spotLight.color=u_spotLightColor[i];spotLight.position=u_spotLightPosition[i];spotLight.direction=u_spotLightDirection[i];spotLight.distance=u_spotLightDistance[i];spotLight.angleCos=u_spotLightAngleCos[i];spotLight.penumbraCos=u_spotLightPenumbraCos[i];addSpotDirectLightRadiance(spotLight,geometry,material,reflectedLight);}\\n#endif\\n}\"; // eslint-disable-line\n\nvar ibl_frag_define = \"#define GLSLIFY 1\\nvec3 getLightProbeIrradiance(vec3 sh[9],vec3 normal){normal.x=-normal.x;vec3 result=sh[0]+sh[1]*(normal.y)+sh[2]*(normal.z)+sh[3]*(normal.x)+sh[4]*(normal.y*normal.x)+sh[5]*(normal.y*normal.z)+sh[6]*(3.0*normal.z*normal.z-1.0)+sh[7]*(normal.z*normal.x)+sh[8]*(normal.x*normal.x-normal.y*normal.y);return max(result,vec3(0.0));}vec3 envBRDFApprox(vec3 specularColor,float roughness,float dotNV){const vec4 c0=vec4(-1,-0.0275,-0.572,0.022);const vec4 c1=vec4(1,0.0425,1.04,-0.04);vec4 r=roughness*c0+c1;float a004=min(r.x*r.x,exp2(-9.28*dotNV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}float getSpecularMIPLevel(float roughness,int maxMIPLevel){return roughness*float(maxMIPLevel);}vec3 getLightProbeRadiance(vec3 viewDir,vec3 normal,float roughness,int maxMIPLevel,float specularIntensity){\\n#ifndef O3_USE_SPECULAR_ENV\\nreturn vec3(0);\\n#else\\nvec3 reflectVec=reflect(-viewDir,normal);reflectVec.x=-reflectVec.x;float specularMIPLevel=getSpecularMIPLevel(roughness,maxMIPLevel);\\n#ifdef HAS_TEX_LOD\\nvec4 envMapColor=textureCubeLodEXT(u_env_specularSampler,reflectVec,specularMIPLevel);\\n#else\\nvec4 envMapColor=textureCube(u_env_specularSampler,reflectVec,specularMIPLevel);\\n#endif\\n#ifdef O3_DECODE_ENV_RGBM\\nenvMapColor.rgb=RGBMToLinear(envMapColor,5.0).rgb;\\n#ifdef OASIS_COLORSPACE_GAMMA\\nenvMapColor=linearToGamma(envMapColor);\\n#endif\\n#else\\n#ifndef OASIS_COLORSPACE_GAMMA\\nenvMapColor=gammaToLinear(envMapColor);\\n#endif\\n#endif\\nreturn envMapColor.rgb*specularIntensity;\\n#endif\\n}\"; // eslint-disable-line\n\nvar pbr_frag = \"#define GLSLIFY 1\\nGeometry geometry;Material material;ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));initGeometry(geometry);initMaterial(material,geometry);addTotalDirectRadiance(geometry,material,reflectedLight);\\n#ifdef O3_USE_SH\\nvec3 irradiance=getLightProbeIrradiance(u_env_sh,geometry.normal);\\n#ifdef OASIS_COLORSPACE_GAMMA\\nirradiance=linearToGamma(vec4(irradiance,1.0)).rgb;\\n#endif\\nirradiance*=u_envMapLight.diffuseIntensity;\\n#else\\nvec3 irradiance=u_envMapLight.diffuse*u_envMapLight.diffuseIntensity;irradiance*=PI;\\n#endif\\nreflectedLight.indirectDiffuse+=irradiance*BRDF_Diffuse_Lambert(material.diffuseColor);vec3 radiance=getLightProbeRadiance(geometry.viewDir,geometry.normal,material.roughness,int(u_envMapLight.mipMapLevel),u_envMapLight.specularIntensity);float radianceAttenuation=1.0;\\n#ifdef CLEARCOAT\\nvec3 clearCoatRadiance=getLightProbeRadiance(geometry.viewDir,geometry.clearCoatNormal,material.clearCoatRoughness,int(u_envMapLight.mipMapLevel),u_envMapLight.specularIntensity);reflectedLight.indirectSpecular+=clearCoatRadiance*material.clearCoat*envBRDFApprox(vec3(0.04),material.clearCoatRoughness,geometry.clearCoatDotNV);radianceAttenuation-=material.clearCoat*F_Schlick(geometry.clearCoatDotNV);\\n#endif\\nreflectedLight.indirectSpecular+=radianceAttenuation*radiance*envBRDFApprox(material.specularColor,material.roughness,geometry.dotNV);\\n#ifdef OCCLUSIONTEXTURE\\nvec2 aoUV=v_uv;\\n#ifdef O3_HAS_UV1\\nif(u_occlusionTextureCoord==1.0){aoUV=v_uv1;}\\n#endif\\nfloat ambientOcclusion=(texture2D(u_occlusionTexture,aoUV).r-1.0)*u_occlusionIntensity+1.0;reflectedLight.indirectDiffuse*=ambientOcclusion;\\n#ifdef O3_USE_SPECULAR_ENV\\nreflectedLight.indirectSpecular*=computeSpecularOcclusion(ambientOcclusion,material.roughness,geometry.dotNV);\\n#endif\\n#endif\\nvec3 emissiveRadiance=u_emissiveColor;\\n#ifdef EMISSIVETEXTURE\\nvec4 emissiveColor=texture2D(u_emissiveTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\nemissiveColor=gammaToLinear(emissiveColor);\\n#endif\\nemissiveRadiance*=emissiveColor.rgb;\\n#endif\\nvec3 totalRadiance=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular+emissiveRadiance;vec4 targetColor=vec4(totalRadiance,material.opacity);\\n#ifndef OASIS_COLORSPACE_GAMMA\\ntargetColor=linearToGamma(targetColor);\\n#endif\\ngl_FragColor=targetColor;\"; // eslint-disable-line\n\nvar PBRShaderLib = {\n  pbr_frag_define: pbr_frag_define,\n  pbr_helper: pbr_helper,\n  brdf: brdf,\n  direct_irradiance_frag_define: direct_irradiance_frag_define,\n  ibl_frag_define: ibl_frag_define,\n  pbr_frag: pbr_frag\n};\n\nvar normal_get = \"#define GLSLIFY 1\\nvec3 getNormal(){\\n#ifdef O3_HAS_NORMAL\\nvec3 normal=normalize(v_normal);\\n#elif defined(HAS_DERIVATIVES)\\nvec3 pos_dx=dFdx(v_pos);vec3 pos_dy=dFdy(v_pos);vec3 normal=normalize(cross(pos_dx,pos_dy));\\n#else\\nvec3 normal=vec3(0,0,1);\\n#endif\\nnormal*=float(gl_FrontFacing)*2.0-1.0;return normal;}vec3 getNormalByNormalTexture(mat3 tbn,sampler2D normalTexture,float normalIntensity,vec2 uv){vec3 normal=texture2D(normalTexture,uv).rgb;normal=normalize(tbn*((2.0*normal-1.0)*vec3(normalIntensity,normalIntensity,1.0)));normal*=float(gl_FrontFacing)*2.0-1.0;return normal;}mat3 getTBN(){\\n#if defined(O3_HAS_NORMAL) && defined(O3_HAS_TANGENT) && ( defined(NORMALTEXTURE) || defined(HAS_CLEARCOATNORMALTEXTURE) )\\nmat3 tbn=v_TBN;\\n#else\\nvec3 normal=getNormal();vec3 position=v_pos;vec2 uv=gl_FrontFacing? v_uv:-v_uv;\\n#ifdef HAS_DERIVATIVES\\nvec3 dp1=dFdx(position);vec3 dp2=dFdy(position);vec2 duv1=dFdx(uv);vec2 duv2=dFdy(uv);vec3 dp2perp=cross(dp2,normal);vec3 dp1perp=cross(normal,dp1);vec3 tangent=dp2perp*duv1.x+dp1perp*duv2.x;vec3 binormal=dp2perp*duv1.y+dp1perp*duv2.y;float invmax=inversesqrt(max(dot(tangent,tangent),dot(binormal,binormal)));mat3 tbn=mat3(tangent*invmax,binormal*invmax,normal);\\n#else\\nmat3 tbn=mat3(vec3(0.0),vec3(0.0),normal);\\n#endif\\n#endif\\nreturn tbn;}\"; // eslint-disable-line\n\nvar ShaderLib = _objectSpread2(_objectSpread2({\n  common: common,\n  common_vert: common_vert,\n  common_frag: common_frag,\n  color_share: color_share,\n  normal_share: normal_share,\n  uv_share: uv_share,\n  worldpos_share: worldpos_share,\n  shadow_share: shadow_share,\n  fog_share: fog_share,\n  begin_normal_vert: begin_normal_vert,\n  begin_position_vert: begin_position_vert,\n  position_vert: position_vert,\n  color_vert: color_vert,\n  normal_vert: normal_vert,\n  skinning_vert: skinning_vert,\n  blendShape_input: blendShape_input,\n  blendShape_vert: blendShape_vert,\n  uv_vert: uv_vert,\n  worldpos_vert: worldpos_vert,\n  shadow_vert: shadow_vert,\n  fog_vert: fog_vert,\n  light_frag_define: light_frag_define,\n  mobile_material_frag: mobile_material_frag,\n  fog_frag: fog_frag,\n  begin_mobile_frag: begin_mobile_frag,\n  begin_viewdir_frag: begin_viewdir_frag,\n  mobile_blinnphong_frag: mobile_blinnphong_frag,\n  noise_common: noise_common,\n  noise_cellular_2D: noise_cellular_2D,\n  noise_cellular_2x2: noise_cellular_2x2,\n  noise_cellular_2x2x2: noise_cellular_2x2x2,\n  noise_cellular_3D: noise_cellular_3D,\n  noise_cellular: noise_cellular,\n  noise_perlin_2D: noise_perlin_2D,\n  noise_perlin_3D: noise_perlin_3D,\n  noise_perlin_4D: noise_perlin_4D,\n  noise_perlin: noise_perlin,\n  noise_psrd_2D: noise_psrd_2D,\n  noise_simplex_2D: noise_simplex_2D,\n  noise_simplex_3D_grad: noise_simplex_3D_grad,\n  noise_simplex_3D: noise_simplex_3D,\n  noise_simplex_4D: noise_simplex_4D,\n  noise_simplex: noise_simplex\n}, PBRShaderLib), {}, {\n  normal_get: normal_get\n});\n\nvar ShaderFactory = /*#__PURE__*/function () {\n  function ShaderFactory() {}\n  ShaderFactory.parseCustomMacros = function parseCustomMacros(macros) {\n    return macros.map(function (m) {\n      return \"#define \" + m + \"\\n\";\n    }).join(\"\");\n  };\n  ShaderFactory.parseIncludes = function parseIncludes(src) {\n    var regex = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\n    function replace(match, slice) {\n      var replace = ShaderLib[slice];\n      if (replace === undefined) {\n        Logger.error(\"Shader slice \\\"\" + match.trim() + \"\\\" not founded.\");\n        return \"\";\n      }\n      return ShaderFactory.parseIncludes(replace);\n    }\n    return src.replace(regex, replace);\n  }\n\n  /**\n   * GLSL extension.\n   * @param extensions - such as [\"GL_EXT_shader_texture_lod\"]\n   * */;\n  ShaderFactory.parseExtension = function parseExtension(extensions) {\n    return extensions.map(function (e) {\n      return \"#extension \" + e + \" : enable\\n\";\n    }).join(\"\");\n  }\n\n  /**\n   * Convert lower GLSL version to GLSL 300 es.\n   * @param shader - code\n   * @param isFrag - Whether it is a fragment shader.\n   * */;\n  ShaderFactory.convertTo300 = function convertTo300(shader, isFrag) {\n    /** replace attribute and in */\n    shader = shader.replace(/\\battribute\\b/g, \"in\");\n    shader = shader.replace(/\\bvarying\\b/g, isFrag ? \"in\" : \"out\");\n\n    /** replace api */\n    shader = shader.replace(/\\btexture(2D|Cube)\\b/g, \"texture\");\n    shader = shader.replace(/\\btexture(2D|Cube)LodEXT\\b/g, \"textureLod\");\n    if (isFrag) {\n      var isMRT = /\\bgl_FragData\\[.+?\\]/g.test(shader);\n      if (isMRT) {\n        shader = shader.replace(/\\bgl_FragColor\\b/g, \"gl_FragData[0]\");\n        var result = shader.match(/\\bgl_FragData\\[.+?\\]/g);\n        shader = this._replaceMRTShader(shader, result);\n      } else {\n        shader = shader.replace(/void\\s+?main\\s*\\(/g, \"out vec4 glFragColor;\\nvoid main(\");\n        shader = shader.replace(/\\bgl_FragColor\\b/g, \"glFragColor\");\n      }\n    }\n    return shader;\n  };\n  ShaderFactory._replaceMRTShader = function _replaceMRTShader(shader, result) {\n    var declaration = \"\";\n    var mrtIndexSet = new Set();\n    for (var i = 0; i < result.length; i++) {\n      var res = result[i].match(/\\bgl_FragData\\[(.+?)\\]/);\n      mrtIndexSet.add(res[1]);\n    }\n    mrtIndexSet.forEach(function (index) {\n      declaration += \"layout(location=\" + index + \") out vec4 fragOutColor\" + index + \";\\n\";\n    });\n    declaration += \"void main(\";\n    shader = shader.replace(/\\bgl_FragData\\[(.+?)\\]/g, \"fragOutColor$1\");\n    shader = shader.replace(/void\\s+?main\\s*\\(/g, declaration);\n    return shader;\n  };\n  return ShaderFactory;\n}();\n\n/**\n * Shader macro。\n */\nvar ShaderMacro = /** @internal */\n\n/** Name. */\n\n/** Value. */\n\n/** @internal */\n\n/** @internal */\n\n/** @internal */\n\n/**\n * @internal\n */\nfunction ShaderMacro(name, value, maskIndex, maskValue) {\n  this.name = void 0;\n  this.value = void 0;\n  this._nameId = void 0;\n  this._maskIndex = void 0;\n  this._maskValue = void 0;\n  this.name = name;\n  this._maskIndex = maskIndex;\n  this._maskValue = maskValue;\n  this.value = value;\n  var macroNameIDMap = ShaderMacro._macroNameIdMap;\n  var nameID = macroNameIDMap[name];\n  if (macroNameIDMap[name] === undefined) {\n    macroNameIDMap[name] = nameID = ShaderMacro._macroNameCounter++;\n  }\n  this._nameId = nameID;\n};\nShaderMacro._macroNameIdMap = Object.create(null);\nShaderMacro._macroNameCounter = 0;\n\n/**\n * Color Space.\n */\nvar ColorSpace;\n(function (ColorSpace) {\n  ColorSpace[ColorSpace[\"Linear\"] = 0] = \"Linear\";\n  ColorSpace[ColorSpace[\"Gamma\"] = 1] = \"Gamma\";\n})(ColorSpace || (ColorSpace = {}));\n\n/**\n * Shader uniform。\n * @internal\n */\nvar ShaderUniform = /*#__PURE__*/function () {\n  function ShaderUniform(engine) {\n    this.name = void 0;\n    this.propertyId = void 0;\n    this.location = void 0;\n    this.applyFunc = void 0;\n    this.cacheValue = void 0;\n    this.textureIndex = void 0;\n    this.textureDefault = void 0;\n    this._rhi = void 0;\n    this._gl = void 0;\n    this._colorSpace = void 0;\n    var rhi = engine._hardwareRenderer;\n    this._rhi = rhi;\n    this._gl = rhi.gl;\n    this._colorSpace = engine.settings.colorSpace;\n  }\n  var _proto = ShaderUniform.prototype;\n  _proto.upload1f = function upload1f(shaderUniform, value) {\n    if (this.cacheValue !== value) {\n      this._gl.uniform1f(shaderUniform.location, value);\n      this.cacheValue = value;\n    }\n  };\n  _proto.upload1fv = function upload1fv(shaderUniform, value) {\n    this._gl.uniform1fv(shaderUniform.location, value);\n  };\n  _proto.upload2f = function upload2f(shaderUniform, value) {\n    var cacheValue = this.cacheValue;\n    if (value.r !== undefined) {\n      if (cacheValue.x !== value.r || cacheValue.y !== value.g) {\n        if (this._colorSpace === ColorSpace.Linear) {\n          this._gl.uniform2f(shaderUniform.location, Color.gammaToLinearSpace(value.r), Color.gammaToLinearSpace(value.g));\n        } else {\n          this._gl.uniform2f(shaderUniform.location, value.r, value.g);\n        }\n        cacheValue.x = value.r;\n        cacheValue.y = value.g;\n      }\n    } else {\n      if (cacheValue.x !== value.x || cacheValue.y !== value.y) {\n        this._gl.uniform2f(shaderUniform.location, value.x, value.y);\n        cacheValue.x = value.x;\n        cacheValue.y = value.y;\n      }\n    }\n  };\n  _proto.upload2fv = function upload2fv(shaderUniform, value) {\n    this._gl.uniform2fv(shaderUniform.location, value);\n  };\n  _proto.upload3f = function upload3f(shaderUniform, value) {\n    var cacheValue = this.cacheValue;\n    if (value.r !== undefined) {\n      if (cacheValue.x !== value.r || cacheValue.y !== value.g || cacheValue.z !== value.b) {\n        if (this._colorSpace === ColorSpace.Linear) {\n          this._gl.uniform3f(shaderUniform.location, Color.gammaToLinearSpace(value.r), Color.gammaToLinearSpace(value.g), Color.gammaToLinearSpace(value.b));\n        } else {\n          this._gl.uniform3f(shaderUniform.location, value.r, value.g, value.b);\n        }\n        cacheValue.x = value.r;\n        cacheValue.y = value.g;\n        cacheValue.z = value.b;\n      }\n    } else {\n      if (cacheValue.x !== value.x || cacheValue.y !== value.y || cacheValue.z !== value.z) {\n        this._gl.uniform3f(shaderUniform.location, value.x, value.y, value.z);\n        cacheValue.x = value.x;\n        cacheValue.y = value.y;\n        cacheValue.z = value.z;\n      }\n    }\n  };\n  _proto.upload3fv = function upload3fv(shaderUniform, value) {\n    this._gl.uniform3fv(shaderUniform.location, value);\n  };\n  _proto.upload4f = function upload4f(shaderUniform, value) {\n    var cacheValue = this.cacheValue;\n    if (value.r !== undefined) {\n      if (cacheValue.x !== value.r || cacheValue.y !== value.g || cacheValue.z !== value.b || cacheValue.w !== value.a) {\n        if (this._colorSpace === ColorSpace.Linear) {\n          this._gl.uniform4f(shaderUniform.location, Color.gammaToLinearSpace(value.r), Color.gammaToLinearSpace(value.g), Color.gammaToLinearSpace(value.b), value.a);\n        } else {\n          this._gl.uniform4f(shaderUniform.location, value.r, value.g, value.b, value.a);\n        }\n        cacheValue.x = value.r;\n        cacheValue.y = value.g;\n        cacheValue.z = value.b;\n        cacheValue.w = value.a;\n      }\n    } else {\n      if (cacheValue.x !== value.x || cacheValue.y !== value.y || cacheValue.z !== value.z || cacheValue.w !== value.w) {\n        this._gl.uniform4f(shaderUniform.location, value.x, value.y, value.z, value.w);\n        cacheValue.x = value.x;\n        cacheValue.y = value.y;\n        cacheValue.z = value.z;\n        cacheValue.w = value.w;\n      }\n    }\n  };\n  _proto.upload4fv = function upload4fv(shaderUniform, value) {\n    this._gl.uniform4fv(shaderUniform.location, value);\n  };\n  _proto.upload1i = function upload1i(shaderUniform, value) {\n    if (this.cacheValue !== value) {\n      this._gl.uniform1i(shaderUniform.location, value);\n      this.cacheValue = value;\n    }\n  };\n  _proto.upload1iv = function upload1iv(shaderUniform, value) {\n    this._gl.uniform1iv(shaderUniform.location, value);\n  };\n  _proto.upload2i = function upload2i(shaderUniform, value) {\n    var cacheValue = this.cacheValue;\n    if (value.r !== undefined) {\n      if (cacheValue.x !== value.r || cacheValue.y !== value.g) {\n        this._gl.uniform2i(shaderUniform.location, value.r, value.g);\n        cacheValue.x = value.r;\n        cacheValue.y = value.g;\n      }\n    } else {\n      if (cacheValue.x !== value.x || cacheValue.y !== value.y) {\n        this._gl.uniform2i(shaderUniform.location, value.x, value.y);\n        cacheValue.x = value.x;\n        cacheValue.y = value.y;\n      }\n    }\n  };\n  _proto.upload2iv = function upload2iv(shaderUniform, value) {\n    this._gl.uniform2iv(shaderUniform.location, value);\n  };\n  _proto.upload3i = function upload3i(shaderUniform, value) {\n    var cacheValue = this.cacheValue;\n    if (value.r !== undefined) {\n      if (cacheValue.x !== value.r || cacheValue.y !== value.g || cacheValue.z !== value.b) {\n        this._gl.uniform3i(shaderUniform.location, value.r, value.g, value.b);\n        cacheValue.x = value.r;\n        cacheValue.y = value.g;\n        cacheValue.z = value.b;\n      }\n    } else {\n      if (cacheValue.x !== value.x || cacheValue.y !== value.y || cacheValue.z !== value.z) {\n        this._gl.uniform3i(shaderUniform.location, value.x, value.y, value.z);\n        cacheValue.x = value.x;\n        cacheValue.y = value.y;\n        cacheValue.z = value.z;\n      }\n    }\n  };\n  _proto.upload3iv = function upload3iv(shaderUniform, value) {\n    this._gl.uniform3iv(shaderUniform.location, value);\n  };\n  _proto.upload4i = function upload4i(shaderUniform, value) {\n    var cacheValue = this.cacheValue;\n    if (value.r !== undefined) {\n      if (cacheValue.x !== value.r || cacheValue.y !== value.g || cacheValue.z !== value.b || cacheValue.w !== value.a) {\n        this._gl.uniform4i(shaderUniform.location, value.r, value.g, value.b, value.a);\n        cacheValue.x = value.r;\n        cacheValue.y = value.g;\n        cacheValue.z = value.b;\n        cacheValue.w = value.a;\n      }\n    } else {\n      if (cacheValue.x !== value.x || cacheValue.y !== value.y || cacheValue.z !== value.z || cacheValue.w !== value.w) {\n        this._gl.uniform4i(shaderUniform.location, value.x, value.y, value.z, value.w);\n        cacheValue.x = value.x;\n        cacheValue.y = value.y;\n        cacheValue.z = value.z;\n        cacheValue.w = value.w;\n      }\n    }\n  };\n  _proto.upload4iv = function upload4iv(shaderUniform, value) {\n    this._gl.uniform4iv(shaderUniform.location, value);\n  };\n  _proto.uploadMat4 = function uploadMat4(shaderUniform, value) {\n    this._gl.uniformMatrix4fv(shaderUniform.location, false, value.elements);\n  };\n  _proto.uploadMat4v = function uploadMat4v(shaderUniform, value) {\n    this._gl.uniformMatrix4fv(shaderUniform.location, false, value);\n  };\n  _proto.uploadTexture = function uploadTexture(shaderUniform, value) {\n    var rhi = this._rhi;\n    rhi.activeTexture(shaderUniform.textureIndex);\n    rhi.bindTexture(value._platformTexture);\n  };\n  _proto.uploadTextureArray = function uploadTextureArray(shaderUniform, value) {\n    var rhi = this._rhi;\n    var textureIndices = shaderUniform.textureIndex;\n    for (var i = 0; i < value.length; i++) {\n      var texture = value[i];\n      rhi.activeTexture(textureIndices[i]);\n      rhi.bindTexture(texture._platformTexture);\n    }\n  };\n  return ShaderUniform;\n}();\n\n/**\n * Shader uniform block.\n * @internal\n */\nvar ShaderUniformBlock = function ShaderUniformBlock() {\n  this.constUniforms = [];\n  this.textureUniforms = [];\n};\n\n/**\n * Shader program, corresponding to the GPU shader program.\n * @internal\n */\nvar ShaderProgram = /*#__PURE__*/function () {\n  ShaderProgram._addLineNum = function _addLineNum(str) {\n    var lines = str.split(\"\\n\");\n    var limitLength = (lines.length + 1).toString().length + 6;\n    var prefix;\n    return lines.map(function (line, index) {\n      prefix = \"0:\" + (index + 1);\n      if (prefix.length >= limitLength) return prefix.substring(0, limitLength) + line;\n      for (var i = 0; i < limitLength - prefix.length; i++) {\n        prefix += \" \";\n      }\n      return prefix + line;\n    }).join(\"\\n\");\n  };\n  function ShaderProgram(engine, vertexSource, fragmentSource) {\n    this.id = void 0;\n    this.sceneUniformBlock = new ShaderUniformBlock();\n    this.cameraUniformBlock = new ShaderUniformBlock();\n    this.rendererUniformBlock = new ShaderUniformBlock();\n    this.materialUniformBlock = new ShaderUniformBlock();\n    this.otherUniformBlock = new ShaderUniformBlock();\n    this._uploadRenderCount = -1;\n    this._uploadCamera = void 0;\n    this._uploadRenderer = void 0;\n    this._uploadMaterial = void 0;\n    this.attributeLocation = Object.create(null);\n    this._isValid = void 0;\n    this._engine = void 0;\n    this._gl = void 0;\n    this._vertexShader = void 0;\n    this._fragmentShader = void 0;\n    this._glProgram = void 0;\n    this._activeTextureUint = 0;\n    this._engine = engine;\n    this._gl = engine._hardwareRenderer.gl;\n    this._glProgram = this._createProgram(vertexSource, fragmentSource);\n    if (this._glProgram) {\n      this._isValid = true;\n      this._recordLocation();\n    } else {\n      this._isValid = false;\n    }\n    this.id = ShaderProgram._counter++;\n  }\n\n  /**\n   * Upload all shader data in shader uniform block.\n   * @param uniformBlock - shader Uniform block\n   * @param shaderData - shader data\n   */\n  var _proto = ShaderProgram.prototype;\n  _proto.uploadAll = function uploadAll(uniformBlock, shaderData) {\n    this.uploadUniforms(uniformBlock, shaderData);\n    this.uploadTextures(uniformBlock, shaderData);\n  }\n\n  /**\n   * Upload constant shader data in shader uniform block.\n   * @param uniformBlock - shader Uniform block\n   * @param shaderData - shader data\n   */;\n  _proto.uploadUniforms = function uploadUniforms(uniformBlock, shaderData) {\n    var propertyValueMap = shaderData._propertyValueMap;\n    var constUniforms = uniformBlock.constUniforms;\n    for (var i = 0, n = constUniforms.length; i < n; i++) {\n      var uniform = constUniforms[i];\n      var data = propertyValueMap[uniform.propertyId];\n      data != null && uniform.applyFunc(uniform, data);\n    }\n  }\n\n  /**\n   * Upload texture shader data in shader uniform block.\n   * @param uniformBlock - shader Uniform block\n   * @param shaderData - shader data\n   */;\n  _proto.uploadTextures = function uploadTextures(uniformBlock, shaderData) {\n    var propertyValueMap = shaderData._propertyValueMap;\n    var textureUniforms = uniformBlock.textureUniforms;\n    // textureUniforms property maybe null if ShaderUniformBlock not contain any texture.\n    if (textureUniforms) {\n      for (var i = 0, n = textureUniforms.length; i < n; i++) {\n        var uniform = textureUniforms[i];\n        var texture = propertyValueMap[uniform.propertyId];\n        if (texture && !texture.destroyed) {\n          uniform.applyFunc(uniform, texture);\n        } else {\n          uniform.applyFunc(uniform, uniform.textureDefault);\n        }\n      }\n    }\n  }\n\n  /**\n   * Upload ungroup texture shader data in shader uniform block.\n   */;\n  _proto.uploadUnGroupTextures = function uploadUnGroupTextures() {\n    var textureUniforms = this.otherUniformBlock.textureUniforms;\n    // textureUniforms property maybe null if ShaderUniformBlock not contain any texture.\n    if (textureUniforms) {\n      for (var i = 0, n = textureUniforms.length; i < n; i++) {\n        var uniform = textureUniforms[i];\n        uniform.applyFunc(uniform, uniform.textureDefault);\n      }\n    }\n  }\n\n  /**\n   * Grouping other data.\n   */;\n  _proto.groupingOtherUniformBlock = function groupingOtherUniformBlock() {\n    var _this$otherUniformBlo = this.otherUniformBlock,\n      constUniforms = _this$otherUniformBlo.constUniforms,\n      textureUniforms = _this$otherUniformBlo.textureUniforms;\n    constUniforms.length > 0 && this._groupingSubOtherUniforms(constUniforms, false);\n    textureUniforms.length > 0 && this._groupingSubOtherUniforms(textureUniforms, true);\n  }\n\n  /**\n   * Bind this shader program.\n   * @returns Whether the shader program is switched.\n   */;\n  _proto.bind = function bind() {\n    var rhi = this._engine._hardwareRenderer;\n    if (rhi._currentBind !== this) {\n      this._gl.useProgram(this._glProgram);\n      rhi._currentBind = this;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Destroy this shader program.\n   */;\n  _proto.destroy = function destroy() {\n    var gl = this._gl;\n    this._vertexShader && gl.deleteShader(this._vertexShader);\n    this._fragmentShader && gl.deleteShader(this._fragmentShader);\n    this._glProgram && gl.deleteProgram(this._glProgram);\n  };\n  _proto._groupingSubOtherUniforms = function _groupingSubOtherUniforms(uniforms, isTexture) {\n    for (var i = uniforms.length - 1; i >= 0; i--) {\n      var uniform = uniforms[i];\n      var group = Shader._getShaderPropertyGroup(uniform.name);\n      if (group !== undefined) {\n        uniforms.splice(uniforms.indexOf(uniform), 1);\n        this._groupingUniform(uniform, group, isTexture);\n      }\n    }\n  };\n  _proto._groupingUniform = function _groupingUniform(uniform, group, isTexture) {\n    switch (group) {\n      case ShaderDataGroup.Scene:\n        if (isTexture) {\n          this.sceneUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.sceneUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      case ShaderDataGroup.Camera:\n        if (isTexture) {\n          this.cameraUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.cameraUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      case ShaderDataGroup.Renderer:\n        if (isTexture) {\n          this.rendererUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.rendererUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      case ShaderDataGroup.Material:\n        if (isTexture) {\n          this.materialUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.materialUniformBlock.constUniforms.push(uniform);\n        }\n        break;\n      default:\n        if (isTexture) {\n          this.otherUniformBlock.textureUniforms.push(uniform);\n        } else {\n          this.otherUniformBlock.constUniforms.push(uniform);\n        }\n    }\n  }\n\n  /**\n   * init and link program with shader.\n   */;\n  _proto._createProgram = function _createProgram(vertexSource, fragmentSource) {\n    var gl = this._gl;\n\n    // create and compile shader\n    var vertexShader = this._createShader(gl.VERTEX_SHADER, vertexSource);\n    if (!vertexShader) {\n      return null;\n    }\n    var fragmentShader = this._createShader(gl.FRAGMENT_SHADER, fragmentSource);\n    if (!fragmentShader) {\n      return null;\n    }\n\n    // link program and shader\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    gl.validateProgram(program);\n    if (gl.isContextLost()) {\n      Logger.error(\"Context lost while linking program.\");\n      gl.deleteShader(vertexShader);\n      gl.deleteShader(fragmentShader);\n      return null;\n    }\n    if (Logger.isEnabled && !gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      Logger.error(\"Could not link WebGL program. \\n\" + gl.getProgramInfoLog(program));\n      gl.deleteProgram(program);\n      return null;\n    }\n    this._vertexShader = vertexShader;\n    this._fragmentShader = fragmentShader;\n    return program;\n  };\n  _proto._createShader = function _createShader(shaderType, shaderSource) {\n    var gl = this._gl;\n    var shader = gl.createShader(shaderType);\n    if (!shader) {\n      Logger.error(\"Context lost while create shader.\");\n      return null;\n    }\n    gl.shaderSource(shader, shaderSource);\n    gl.compileShader(shader);\n    if (gl.isContextLost()) {\n      Logger.error(\"Context lost while compiling shader.\");\n      gl.deleteShader(shader);\n      return null;\n    }\n    if (Logger.isEnabled && !gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n      Logger.error(\"Could not compile WebGL shader.\\n\" + gl.getShaderInfoLog(shader), ShaderProgram._addLineNum(shaderSource));\n      gl.deleteShader(shader);\n      return null;\n    }\n    return shader;\n  }\n\n  /**\n   * record the location of uniform/attribute.\n   */;\n  _proto._recordLocation = function _recordLocation() {\n    var _this = this;\n    var gl = this._gl;\n    var program = this._glProgram;\n    var uniformInfos = this._getUniformInfos();\n    var attributeInfos = this._getAttributeInfos();\n    uniformInfos.forEach(function (_ref) {\n      var name = _ref.name,\n        size = _ref.size,\n        type = _ref.type;\n      var shaderUniform = new ShaderUniform(_this._engine);\n      var isArray = false;\n      var isTexture = false;\n      if (name.indexOf(\"[0]\") > 0) {\n        name = name.substr(0, name.length - 3);\n        isArray = true;\n      }\n      var location = gl.getUniformLocation(program, name);\n      shaderUniform.name = name;\n      shaderUniform.propertyId = Shader.getPropertyByName(name)._uniqueId;\n      shaderUniform.location = location;\n      switch (type) {\n        case gl.FLOAT:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload1fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload1f;\n            shaderUniform.cacheValue = 0;\n          }\n          break;\n        case gl.FLOAT_VEC2:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload2fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload2f;\n            shaderUniform.cacheValue = new Vector2(0, 0);\n          }\n          break;\n        case gl.FLOAT_VEC3:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload3fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload3f;\n            shaderUniform.cacheValue = new Vector3(0, 0, 0);\n          }\n          break;\n        case gl.FLOAT_VEC4:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload4fv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload4f;\n            shaderUniform.cacheValue = new Vector4(0, 0, 0, 0);\n          }\n          break;\n        case gl.BOOL:\n        case gl.INT:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload1iv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload1i;\n            shaderUniform.cacheValue = 0;\n          }\n          break;\n        case gl.BOOL_VEC2:\n        case gl.INT_VEC2:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload2iv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload2i;\n            shaderUniform.cacheValue = new Vector2(0, 0);\n          }\n          break;\n        case gl.BOOL_VEC3:\n        case gl.INT_VEC3:\n          shaderUniform.applyFunc = isArray ? shaderUniform.upload3iv : shaderUniform.upload3i;\n          shaderUniform.cacheValue = new Vector3(0, 0, 0);\n          break;\n        case gl.BOOL_VEC4:\n        case gl.INT_VEC4:\n          if (isArray) {\n            shaderUniform.applyFunc = shaderUniform.upload4iv;\n          } else {\n            shaderUniform.applyFunc = shaderUniform.upload4i;\n            shaderUniform.cacheValue = new Vector4(0, 0, 0);\n          }\n          break;\n        case gl.FLOAT_MAT4:\n          shaderUniform.applyFunc = isArray ? shaderUniform.uploadMat4v : shaderUniform.uploadMat4;\n          break;\n        case gl.SAMPLER_2D:\n        case gl.SAMPLER_CUBE:\n        case gl.SAMPLER_2D_ARRAY:\n          var defaultTexture;\n          switch (type) {\n            case gl.SAMPLER_2D:\n              defaultTexture = _this._engine._magentaTexture2D;\n              break;\n            case gl.SAMPLER_CUBE:\n              defaultTexture = _this._engine._magentaTextureCube;\n              break;\n            case gl.SAMPLER_2D_ARRAY:\n              defaultTexture = _this._engine._magentaTexture2DArray;\n              break;\n            default:\n              throw new Error(\"Unsupported texture type.\");\n          }\n          isTexture = true;\n          if (isArray) {\n            var defaultTextures = new Array(size);\n            var textureIndices = new Int32Array(size);\n            var glTextureIndices = new Array(size);\n            for (var i = 0; i < size; i++) {\n              defaultTextures[i] = defaultTexture;\n              textureIndices[i] = _this._activeTextureUint;\n              glTextureIndices[i] = gl.TEXTURE0 + _this._activeTextureUint++;\n            }\n            shaderUniform.textureDefault = defaultTextures;\n            shaderUniform.textureIndex = glTextureIndices;\n            shaderUniform.applyFunc = shaderUniform.uploadTextureArray;\n            _this.bind();\n            gl.uniform1iv(location, textureIndices);\n            shaderUniform.uploadTextureArray(shaderUniform, defaultTextures);\n          } else {\n            var textureIndex = gl.TEXTURE0 + _this._activeTextureUint;\n            shaderUniform.textureDefault = defaultTexture;\n            shaderUniform.textureIndex = textureIndex;\n            shaderUniform.applyFunc = shaderUniform.uploadTexture;\n            _this.bind();\n            gl.uniform1i(location, _this._activeTextureUint++);\n            shaderUniform.uploadTexture(shaderUniform, defaultTexture);\n          }\n          break;\n      }\n      var group = Shader._getShaderPropertyGroup(name);\n      _this._groupingUniform(shaderUniform, group, isTexture);\n    });\n    attributeInfos.forEach(function (_ref2) {\n      var name = _ref2.name;\n      _this.attributeLocation[name] = gl.getAttribLocation(program, name);\n    });\n  };\n  _proto._getUniformInfos = function _getUniformInfos() {\n    var gl = this._gl;\n    var program = this._glProgram;\n    var uniformInfos = new Array();\n    var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n    for (var i = 0; i < uniformCount; ++i) {\n      var info = gl.getActiveUniform(program, i);\n      uniformInfos[i] = info;\n    }\n    return uniformInfos;\n  };\n  _proto._getAttributeInfos = function _getAttributeInfos() {\n    var gl = this._gl;\n    var program = this._glProgram;\n    var attributeInfos = new Array();\n    var attributeCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n    for (var i = 0; i < attributeCount; ++i) {\n      var info = gl.getActiveAttrib(program, i);\n      attributeInfos[i] = info;\n    }\n    return attributeInfos;\n  };\n  _createClass(ShaderProgram, [{\n    key: \"isValid\",\n    get:\n    /**\n     * Whether this shader program is valid.\n     */\n    function get() {\n      return this._isValid;\n    }\n  }]);\n  return ShaderProgram;\n}();\nShaderProgram._counter = 0;\n\n/**\n * Shader property.\n */\nvar ShaderProperty = /*#__PURE__*/function () {\n  /**\n   * @internal\n   */\n  function ShaderProperty(name) {\n    this._uniqueId = void 0;\n    this._group = void 0;\n    this._type = void 0;\n    this.name = void 0;\n    this.name = name;\n    this._uniqueId = ShaderProperty._propertyNameCounter++;\n  }\n  _createClass(ShaderProperty, [{\n    key: \"type\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** Shader property name. */\n\n    /**\n     * Shader property type.\n     */\n    function get() {\n      return this._type;\n    }\n  }]);\n  return ShaderProperty;\n}();\nShaderProperty._propertyNameCounter = 0;\n\n/**\n * Shader containing vertex and fragment source.\n */\nvar Shader = /*#__PURE__*/function () {\n  /** @internal */\n  /** @internal */\n  /**\n   * Create a shader.\n   * @param name - Name of the shader\n   * @param vertexSource - Vertex source code\n   * @param fragmentSource - Fragment source code\n   */\n  Shader.create = function create(name, vertexSource, fragmentSource) {\n    var shaderMap = Shader._shaderMap;\n    if (shaderMap[name]) {\n      throw \"Shader named \\\"\" + name + \"\\\" already exists.\";\n    }\n    return shaderMap[name] = new Shader(name, vertexSource, fragmentSource);\n  }\n\n  /**\n   * Find a shader by name.\n   * @param name - Name of the shader\n   */;\n  Shader.find = function find(name) {\n    return Shader._shaderMap[name];\n  }\n\n  /**\n   * Get shader macro by name.\n   * @param name - Name of the shader macro\n   * @returns Shader macro\n   */;\n  Shader.getMacroByName = function getMacroByName(name, value) {\n    var key = value ? name + \" \" + value : name;\n    var macro = Shader._macroMap[key];\n    if (!macro) {\n      var maskMap = Shader._macroMaskMap;\n      var counter = Shader._macroCounter;\n      var index = Math.floor(counter / 32);\n      var bit = counter % 32;\n      macro = new ShaderMacro(name, value, index, 1 << bit);\n      Shader._macroMap[key] = macro;\n      if (index == maskMap.length) {\n        maskMap.length++;\n        maskMap[index] = new Array(32);\n      }\n      maskMap[index][bit] = key;\n      Shader._macroCounter++;\n    }\n    return macro;\n  }\n\n  /**\n   * Get shader property by name.\n   * @param name - Name of the shader property\n   * @returns Shader property\n   */;\n  Shader.getPropertyByName = function getPropertyByName(name) {\n    var propertyNameMap = Shader._propertyNameMap;\n    if (propertyNameMap[name] != null) {\n      return propertyNameMap[name];\n    } else {\n      var property = new ShaderProperty(name);\n      propertyNameMap[name] = property;\n      Shader._propertyIdMap[property._uniqueId] = property;\n      return property;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  Shader._getShaderPropertyGroup = function _getShaderPropertyGroup(propertyName) {\n    var shaderProperty = Shader._propertyNameMap[propertyName];\n    return shaderProperty === null || shaderProperty === void 0 ? void 0 : shaderProperty._group;\n  };\n  Shader._getNamesByMacros = function _getNamesByMacros(macros, out) {\n    var maskMap = Shader._macroMaskMap;\n    var mask = macros._mask;\n    out.length = 0;\n    for (var i = 0, n = macros._length; i < n; i++) {\n      var subMaskMap = maskMap[i];\n      var subMask = mask[i];\n      var _n = subMask < 0 ? 32 : Math.floor(Math.log2(subMask)) + 1; // if is negative must contain 1 << 31.\n      for (var j = 0; j < _n; j++) {\n        if (subMask & 1 << j) {\n          out.push(subMaskMap[j]);\n        }\n      }\n    }\n  }\n\n  /** The name of shader. */;\n\n  function Shader(name, vertexSource, fragmentSource) {\n    this.name = void 0;\n    this._shaderId = 0;\n    this._vertexSource = void 0;\n    this._fragmentSource = void 0;\n    this._shaderId = Shader._shaderCounter++;\n    this.name = name;\n    this._vertexSource = vertexSource;\n    this._fragmentSource = fragmentSource;\n  }\n\n  /**\n   * Compile shader variant by macro name list.\n   *\n   * @remarks\n   * Usually a shader contains some macros,any combination of macros is called shader variant.\n   *\n   * @param engine - Engine to which the shader variant belongs\n   * @param macros - Macro name list\n   * @returns Is the compiled shader variant valid\n   */\n  var _proto = Shader.prototype;\n  _proto.compileVariant = function compileVariant(engine, macros) {\n    var compileMacros = Shader._compileMacros;\n    compileMacros.clear();\n    for (var i = 0, n = macros.length; i < n; i++) {\n      compileMacros.enable(Shader.getMacroByName(macros[i]));\n    }\n    return this._getShaderProgram(engine, compileMacros).isValid;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getShaderProgram = function _getShaderProgram(engine, macroCollection) {\n    var shaderProgramPool = engine._getShaderProgramPool(this);\n    var shaderProgram = shaderProgramPool.get(macroCollection);\n    if (shaderProgram) {\n      return shaderProgram;\n    }\n    var isWebGL2 = engine._hardwareRenderer.isWebGL2;\n    var macroNameList = [];\n    Shader._getNamesByMacros(macroCollection, macroNameList);\n    var macroNameStr = ShaderFactory.parseCustomMacros(macroNameList);\n    var versionStr = isWebGL2 ? \"#version 300 es\" : \"#version 100\";\n    var precisionStr = \"\\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\\n      precision highp float;\\n      precision highp int;\\n    #else\\n      precision mediump float;\\n      precision mediump int;\\n    #endif\\n    \";\n    if (engine._hardwareRenderer.canIUse(GLCapabilityType.shaderTextureLod)) {\n      precisionStr += \"#define HAS_TEX_LOD\\n\";\n    }\n    if (engine._hardwareRenderer.canIUse(GLCapabilityType.standardDerivatives)) {\n      precisionStr += \"#define HAS_DERIVATIVES\\n\";\n    }\n    var vertexSource = ShaderFactory.parseIncludes(\" \" + versionStr + \"\\n        \" + precisionStr + \"\\n        \" + macroNameStr + \"\\n        \" + this._vertexSource);\n    var fragmentSource = ShaderFactory.parseIncludes(\" \" + versionStr + \"\\n        \" + (isWebGL2 ? \"\" : ShaderFactory.parseExtension(Shader._shaderExtension)) + \"\\n        \" + precisionStr + \"\\n        \" + macroNameStr + \"\\n      \" + this._fragmentSource);\n    if (isWebGL2) {\n      vertexSource = ShaderFactory.convertTo300(vertexSource);\n      fragmentSource = ShaderFactory.convertTo300(fragmentSource, true);\n    }\n    shaderProgram = new ShaderProgram(engine, vertexSource, fragmentSource);\n    shaderProgramPool.cache(shaderProgram);\n    return shaderProgram;\n  };\n  return Shader;\n}();\nShader._compileMacros = new ShaderMacroCollection();\nShader._propertyIdMap = Object.create(null);\nShader._shaderCounter = 0;\nShader._shaderMap = Object.create(null);\nShader._propertyNameMap = Object.create(null);\nShader._macroMaskMap = [];\nShader._macroCounter = 0;\nShader._macroMap = Object.create(null);\nShader._shaderExtension = [\"GL_EXT_shader_texture_lod\", \"GL_OES_standard_derivatives\", \"GL_EXT_draw_buffers\"];\n\n/**\n * Shader data collection,Correspondence includes shader properties data and macros data.\n */\nvar ShaderData = /*#__PURE__*/function () {\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /**\n   * @internal\n   */\n  function ShaderData(group) {\n    this._group = void 0;\n    this._propertyValueMap = Object.create(null);\n    this._macroCollection = new ShaderMacroCollection();\n    this._macroMap = Object.create(null);\n    this._refCount = 0;\n    this._group = group;\n  }\n\n  /**\n   * Get float by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Float\n   */\n  var _proto = ShaderData.prototype;\n  _proto.getFloat = function getFloat(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set float by shader property name.\n   * @remarks Corresponding float shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Float\n   */;\n  _proto.setFloat = function setFloat(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Float, value);\n  }\n\n  /**\n   * Get int by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Int\n   */;\n  _proto.getInt = function getInt(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set int by shader property name.\n   * @remarks Correspondence includes int and bool shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Int\n   */;\n  _proto.setInt = function setInt(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Int, value);\n  }\n\n  /**\n   * Get float array by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Float array\n   */;\n  _proto.getFloatArray = function getFloatArray(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set float array by shader property name.\n   * @remarks Correspondence includes float array、vec2 array、vec3 array、vec4 array and matrix array shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Float array\n   */;\n  _proto.setFloatArray = function setFloatArray(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.FloatArray, value);\n  }\n\n  /**\n   * Get int array by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Int Array\n   */;\n  _proto.getIntArray = function getIntArray(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set int array by shader property name.\n   * @remarks Correspondence includes bool array、int array、bvec2 array、bvec3 array、bvec4 array、ivec2 array、ivec3 array and ivec4 array shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Int Array\n   */;\n  _proto.setIntArray = function setIntArray(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.IntArray, value);\n  }\n\n  /**\n   * Get two-dimensional from shader property name.\n   * @param propertyName - Shader property name\n   * @returns Two-dimensional vector\n   */;\n  _proto.getVector2 = function getVector2(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set two-dimensional vector from shader property name.\n   * @remarks Correspondence includes vec2、ivec2 and bvec2 shader property type.\n   * @param property - Shader property name\n   * @param value - Two-dimensional vector\n   */;\n  _proto.setVector2 = function setVector2(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Vector2, value);\n  }\n\n  /**\n   * Get vector3 by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Three-dimensional vector\n   */;\n  _proto.getVector3 = function getVector3(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set three dimensional vector by shader property name.\n   * @remarks Correspondence includes vec3、ivec3 and bvec3 shader property type.\n   * @param property - Shader property name\n   * @param value - Three-dimensional vector\n   */;\n  _proto.setVector3 = function setVector3(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Vector3, value);\n  }\n\n  /**\n   * Get vector4 by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Four-dimensional vector\n   */;\n  _proto.getVector4 = function getVector4(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set four-dimensional vector by shader property name.\n   * @remarks Correspondence includes vec4、ivec4 and bvec4 shader property type.\n   * @param property - Shader property name\n   * @param value - Four-dimensional vector\n   */;\n  _proto.setVector4 = function setVector4(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Vector4, value);\n  }\n\n  /**\n   * Get matrix by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Matrix\n   */;\n  _proto.getMatrix = function getMatrix(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set matrix by shader property name.\n   * @remarks Correspondence includes matrix shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Matrix\n   */;\n  _proto.setMatrix = function setMatrix(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Matrix, value);\n  }\n\n  /**\n   * Get color by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Color\n   */;\n  _proto.getColor = function getColor(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set color by shader property name.\n   * @remarks Correspondence includes vec4 shader property type.\n   * @param propertyName - Shader property name\n   * @param value - Color\n   */;\n  _proto.setColor = function setColor(property, value) {\n    this._setPropertyValue(property, ShaderPropertyType.Color, value);\n  }\n\n  /**\n   * Get texture by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Texture\n   */;\n  _proto.getTexture = function getTexture(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set texture by shader property name.\n   * @param propertyName - Shader property name\n   * @param value - Texture\n   */;\n  _proto.setTexture = function setTexture(property, value) {\n    if (this._getRefCount() > 0) {\n      var lastValue = this.getPropertyValue(property);\n      lastValue && lastValue._addRefCount(-1);\n      value && value._addRefCount(1);\n    }\n    this._setPropertyValue(property, ShaderPropertyType.Texture, value);\n  }\n\n  /**\n   * Get texture array by shader property name.\n   * @param propertyName - Shader property name\n   * @returns Texture array\n   */;\n  _proto.getTextureArray = function getTextureArray(property) {\n    return this.getPropertyValue(property);\n  }\n\n  /**\n   * Set texture array by shader property name.\n   * @param propertyName - Shader property name\n   * @param value - Texture array\n   */;\n  _proto.setTextureArray = function setTextureArray(property, value) {\n    if (this._getRefCount() > 0) {\n      var lastValue = this.getPropertyValue(property);\n      if (lastValue) {\n        for (var i = 0, n = lastValue.length; i < n; i++) {\n          lastValue[i]._addRefCount(-1);\n        }\n      }\n      if (value) {\n        for (var _i = 0, _n = value.length; _i < _n; _i++) {\n          value[_i]._addRefCount(1);\n        }\n      }\n    }\n    this._setPropertyValue(property, ShaderPropertyType.TextureArray, value);\n  }\n\n  /**\n   * Get shader property value set on this shaderData.\n   * @param property - Shader property\n   * @returns Property value\n   */;\n  _proto.getPropertyValue = function getPropertyValue(property) {\n    if (typeof property === \"string\") {\n      property = Shader.getPropertyByName(property);\n    }\n    return this._propertyValueMap[property._uniqueId];\n  }\n\n  /**\n   * Enable macro with name.\n   * @param macroName - Macro name\n   */;\n  _proto.enableMacro = function enableMacro(macro, value) {\n    if (typeof macro === \"string\") {\n      macro = Shader.getMacroByName(macro, value);\n    }\n    var nameID = macro._nameId;\n    var lastMacro = this._macroMap[nameID];\n    if (lastMacro !== macro) {\n      var macroCollection = this._macroCollection;\n      lastMacro && macroCollection.disable(lastMacro);\n      macroCollection.enable(macro);\n      this._macroMap[nameID] = macro;\n    }\n  }\n\n  /**\n   * Disable macro.\n   * @param macroName - Macro name\n   */;\n  _proto.disableMacro = function disableMacro(macro) {\n    var nameID;\n    if (typeof macro === \"string\") {\n      nameID = ShaderMacro._macroNameIdMap[macro];\n      if (nameID === undefined) {\n        return;\n      }\n    } else {\n      nameID = macro._nameId;\n    }\n    var currentMacro = this._macroMap[nameID];\n    if (currentMacro) {\n      this._macroCollection.disable(currentMacro);\n      delete this._macroMap[nameID];\n    }\n  }\n\n  /**\n   * Get shader macro array that are currently enabled for ShaderData.\n   */;\n  _proto.getMacros = function getMacros(out) {\n    if (out) {\n      var macroMap = this._macroMap;\n      out.length = 0;\n      for (var key in macroMap) {\n        out.push(macroMap[key]);\n      }\n    } else {\n      return Object.values(this._macroMap);\n    }\n  }\n\n  /**\n   * Get all shader properties that have been set on this shaderData\n   * @returns  All shader properties\n   */;\n  _proto.getProperties = function getProperties(out) {\n    var properties;\n    if (out) {\n      out.length = 0;\n      properties = out;\n    } else {\n      properties = [];\n    }\n    var propertyValueMap = this._propertyValueMap;\n    var propertyIdMap = Shader._propertyIdMap;\n    for (var key in propertyValueMap) {\n      properties.push(propertyIdMap[key]);\n    }\n    if (!out) {\n      return properties;\n    }\n  };\n  _proto.clone = function clone() {\n    var shaderData = new ShaderData(this._group);\n    this.cloneTo(shaderData);\n    return shaderData;\n  };\n  _proto.cloneTo = function cloneTo(target) {\n    CloneManager.deepCloneObject(this._macroCollection, target._macroCollection);\n    _extends(target._macroMap, this._macroMap);\n    var propertyValueMap = this._propertyValueMap;\n    var targetPropertyValueMap = target._propertyValueMap;\n    var keys = Object.keys(propertyValueMap);\n    for (var i = 0, n = keys.length; i < n; i++) {\n      var k = keys[i];\n      var _property = propertyValueMap[k];\n      if (_property != null) {\n        if (typeof _property === \"number\") {\n          targetPropertyValueMap[k] = _property;\n        } else if (_property instanceof Texture) {\n          targetPropertyValueMap[k] = _property;\n        } else if (_property instanceof Array || _property instanceof Float32Array || _property instanceof Int32Array) {\n          targetPropertyValueMap[k] = _property.slice();\n        } else {\n          var targetProperty = targetPropertyValueMap[k];\n          if (targetProperty) {\n            targetProperty.copyFrom(_property);\n          } else {\n            targetPropertyValueMap[k] = _property.clone();\n          }\n        }\n      } else {\n        targetPropertyValueMap[k] = _property;\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._setPropertyValue = function _setPropertyValue(property, type, value) {\n    if (typeof property === \"string\") {\n      property = Shader.getPropertyByName(property);\n    }\n    if (property._group !== this._group) {\n      if (property._group === undefined) {\n        property._group = this._group;\n      } else {\n        throw \"Shader property \" + property.name + \" has been used as \" + ShaderDataGroup[property._group] + \" group.\";\n      }\n    }\n    if (property._type !== type) {\n      if (property._type === undefined) {\n        property._type = type;\n      } else {\n        throw \"Shader property \" + property.name + \" has been used as \" + ShaderPropertyType[property._type] + \" type.\";\n      }\n    }\n    this._propertyValueMap[property._uniqueId] = value;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getRefCount = function _getRefCount() {\n    return this._refCount;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addRefCount = function _addRefCount(value) {\n    this._refCount += value;\n    var properties = this._propertyValueMap;\n    for (var k in properties) {\n      var _property2 = properties[k];\n      // @todo: Separate array to speed performance.\n      if (_property2 && _property2 instanceof Texture) {\n        _property2._addRefCount(value);\n      }\n    }\n  };\n  return ShaderData;\n}();\n\n/**\n * Blend factor.\n * @remarks defines which function is used for blending pixel arithmetic\n */\nvar BlendFactor;\n(function (BlendFactor) {\n  BlendFactor[BlendFactor[\"Zero\"] = 0] = \"Zero\";\n  BlendFactor[BlendFactor[\"One\"] = 1] = \"One\";\n  BlendFactor[BlendFactor[\"SourceColor\"] = 2] = \"SourceColor\";\n  BlendFactor[BlendFactor[\"OneMinusSourceColor\"] = 3] = \"OneMinusSourceColor\";\n  BlendFactor[BlendFactor[\"DestinationColor\"] = 4] = \"DestinationColor\";\n  BlendFactor[BlendFactor[\"OneMinusDestinationColor\"] = 5] = \"OneMinusDestinationColor\";\n  BlendFactor[BlendFactor[\"SourceAlpha\"] = 6] = \"SourceAlpha\";\n  BlendFactor[BlendFactor[\"OneMinusSourceAlpha\"] = 7] = \"OneMinusSourceAlpha\";\n  BlendFactor[BlendFactor[\"DestinationAlpha\"] = 8] = \"DestinationAlpha\";\n  BlendFactor[BlendFactor[\"OneMinusDestinationAlpha\"] = 9] = \"OneMinusDestinationAlpha\";\n  BlendFactor[BlendFactor[\"SourceAlphaSaturate\"] = 10] = \"SourceAlphaSaturate\";\n  BlendFactor[BlendFactor[\"BlendColor\"] = 11] = \"BlendColor\";\n  BlendFactor[BlendFactor[\"OneMinusBlendColor\"] = 12] = \"OneMinusBlendColor\";\n})(BlendFactor || (BlendFactor = {}));\n\n/**\n * Blend operation function.\n * @remarks defines how a new pixel is combined with a pixel.\n */\nvar BlendOperation;\n(function (BlendOperation) {\n  BlendOperation[BlendOperation[\"Add\"] = 0] = \"Add\";\n  BlendOperation[BlendOperation[\"Subtract\"] = 1] = \"Subtract\";\n  BlendOperation[BlendOperation[\"ReverseSubtract\"] = 2] = \"ReverseSubtract\";\n  BlendOperation[BlendOperation[\"Min\"] = 3] = \"Min\";\n  BlendOperation[BlendOperation[\"Max\"] = 4] = \"Max\";\n})(BlendOperation || (BlendOperation = {}));\n\n/**\n * Set which color channels can be rendered to frame buffer.\n * @remarks enumeration can be combined using bit operations.\n */\nvar ColorWriteMask;\n(function (ColorWriteMask) {\n  ColorWriteMask[ColorWriteMask[\"None\"] = 0] = \"None\";\n  ColorWriteMask[ColorWriteMask[\"Red\"] = 1] = \"Red\";\n  ColorWriteMask[ColorWriteMask[\"Green\"] = 2] = \"Green\";\n  ColorWriteMask[ColorWriteMask[\"Blue\"] = 4] = \"Blue\";\n  ColorWriteMask[ColorWriteMask[\"Alpha\"] = 8] = \"Alpha\";\n  ColorWriteMask[ColorWriteMask[\"All\"] = 15] = \"All\";\n})(ColorWriteMask || (ColorWriteMask = {}));\n\n/**\n * The blend state of the render target.\n */\nvar RenderTargetBlendState = function RenderTargetBlendState() {\n  this.enabled = false;\n  this.colorBlendOperation = BlendOperation.Add;\n  this.alphaBlendOperation = BlendOperation.Add;\n  this.sourceColorBlendFactor = BlendFactor.One;\n  this.sourceAlphaBlendFactor = BlendFactor.One;\n  this.destinationColorBlendFactor = BlendFactor.Zero;\n  this.destinationAlphaBlendFactor = BlendFactor.Zero;\n  this.colorWriteMask = ColorWriteMask.All;\n};\n\n/**\n * Blend state.\n */\nvar BlendState = /*#__PURE__*/function () {\n  function BlendState() {\n    this.targetBlendState = new RenderTargetBlendState();\n    this.blendColor = new Color(0, 0, 0, 0);\n    this.alphaToCoverage = false;\n  }\n  BlendState._getGLBlendFactor = function _getGLBlendFactor(rhi, blendFactor) {\n    var gl = rhi.gl;\n    switch (blendFactor) {\n      case BlendFactor.Zero:\n        return gl.ZERO;\n      case BlendFactor.One:\n        return gl.ONE;\n      case BlendFactor.SourceColor:\n        return gl.SRC_COLOR;\n      case BlendFactor.OneMinusSourceColor:\n        return gl.ONE_MINUS_SRC_COLOR;\n      case BlendFactor.DestinationColor:\n        return gl.DST_COLOR;\n      case BlendFactor.OneMinusDestinationColor:\n        return gl.ONE_MINUS_DST_COLOR;\n      case BlendFactor.SourceAlpha:\n        return gl.SRC_ALPHA;\n      case BlendFactor.OneMinusSourceAlpha:\n        return gl.ONE_MINUS_SRC_ALPHA;\n      case BlendFactor.DestinationAlpha:\n        return gl.DST_ALPHA;\n      case BlendFactor.OneMinusDestinationAlpha:\n        return gl.ONE_MINUS_DST_ALPHA;\n      case BlendFactor.SourceAlphaSaturate:\n        return gl.SRC_ALPHA_SATURATE;\n      case BlendFactor.BlendColor:\n        return gl.CONSTANT_COLOR;\n      case BlendFactor.OneMinusBlendColor:\n        return gl.ONE_MINUS_CONSTANT_COLOR;\n    }\n  };\n  BlendState._getGLBlendOperation = function _getGLBlendOperation(rhi, blendOperation) {\n    var gl = rhi.gl;\n    switch (blendOperation) {\n      case BlendOperation.Add:\n        return gl.FUNC_ADD;\n      case BlendOperation.Subtract:\n        return gl.FUNC_SUBTRACT;\n      case BlendOperation.ReverseSubtract:\n        return gl.FUNC_REVERSE_SUBTRACT;\n      case BlendOperation.Min:\n        if (!rhi.canIUse(GLCapabilityType.blendMinMax)) {\n          throw new Error(\"BlendOperation.Min is not supported in this context\");\n        }\n        return gl.MIN;\n      // in webgl1.0 is an extension\n      case BlendOperation.Max:\n        if (!rhi.canIUse(GLCapabilityType.blendMinMax)) {\n          throw new Error(\"BlendOperation.Max is not supported in this context\");\n        }\n        return gl.MAX;\n      // in webgl1.0 is an extension\n    }\n  }\n\n  /** The blend state of the render target. */;\n  var _proto = BlendState.prototype;\n  /**\n   * @internal\n   * Apply the current blend state by comparing with the last blend state.\n   */\n  _proto._apply = function _apply(hardwareRenderer, lastRenderState) {\n    this._platformApply(hardwareRenderer, lastRenderState.blendState);\n  };\n  _proto._platformApply = function _platformApply(rhi, lastState) {\n    var gl = rhi.gl;\n    var lastTargetBlendState = lastState.targetBlendState;\n    var _this$targetBlendStat = this.targetBlendState,\n      enabled = _this$targetBlendStat.enabled,\n      colorBlendOperation = _this$targetBlendStat.colorBlendOperation,\n      alphaBlendOperation = _this$targetBlendStat.alphaBlendOperation,\n      sourceColorBlendFactor = _this$targetBlendStat.sourceColorBlendFactor,\n      destinationColorBlendFactor = _this$targetBlendStat.destinationColorBlendFactor,\n      sourceAlphaBlendFactor = _this$targetBlendStat.sourceAlphaBlendFactor,\n      destinationAlphaBlendFactor = _this$targetBlendStat.destinationAlphaBlendFactor,\n      colorWriteMask = _this$targetBlendStat.colorWriteMask;\n    if (enabled !== lastTargetBlendState.enabled) {\n      if (enabled) {\n        gl.enable(gl.BLEND);\n      } else {\n        gl.disable(gl.BLEND);\n      }\n      lastTargetBlendState.enabled = enabled;\n    }\n    if (enabled) {\n      // apply blend factor.\n      if (sourceColorBlendFactor !== lastTargetBlendState.sourceColorBlendFactor || destinationColorBlendFactor !== lastTargetBlendState.destinationColorBlendFactor || sourceAlphaBlendFactor !== lastTargetBlendState.sourceAlphaBlendFactor || destinationAlphaBlendFactor !== lastTargetBlendState.destinationAlphaBlendFactor) {\n        gl.blendFuncSeparate(BlendState._getGLBlendFactor(rhi, sourceColorBlendFactor), BlendState._getGLBlendFactor(rhi, destinationColorBlendFactor), BlendState._getGLBlendFactor(rhi, sourceAlphaBlendFactor), BlendState._getGLBlendFactor(rhi, destinationAlphaBlendFactor));\n        lastTargetBlendState.sourceColorBlendFactor = sourceColorBlendFactor;\n        lastTargetBlendState.destinationColorBlendFactor = destinationColorBlendFactor;\n        lastTargetBlendState.sourceAlphaBlendFactor = sourceAlphaBlendFactor;\n        lastTargetBlendState.destinationAlphaBlendFactor = destinationAlphaBlendFactor;\n      }\n\n      // apply blend operation.\n      if (colorBlendOperation !== lastTargetBlendState.colorBlendOperation || alphaBlendOperation !== lastTargetBlendState.alphaBlendOperation) {\n        gl.blendEquationSeparate(BlendState._getGLBlendOperation(rhi, colorBlendOperation), BlendState._getGLBlendOperation(rhi, alphaBlendOperation));\n        lastTargetBlendState.colorBlendOperation = colorBlendOperation;\n        lastTargetBlendState.alphaBlendOperation = alphaBlendOperation;\n      }\n\n      // apply blend color.\n      var blendColor = this.blendColor;\n      if (!Color.equals(lastState.blendColor, blendColor)) {\n        gl.blendColor(blendColor.r, blendColor.g, blendColor.b, blendColor.a);\n        lastState.blendColor.copyFrom(blendColor);\n      }\n    }\n\n    // apply color mask.\n    if (colorWriteMask !== lastTargetBlendState.colorWriteMask) {\n      gl.colorMask((colorWriteMask & ColorWriteMask.Red) !== 0, (colorWriteMask & ColorWriteMask.Green) !== 0, (colorWriteMask & ColorWriteMask.Blue) !== 0, (colorWriteMask & ColorWriteMask.Alpha) !== 0);\n      lastTargetBlendState.colorWriteMask = colorWriteMask;\n    }\n\n    // apply alpha to coverage.\n    var alphaToCoverage = this.alphaToCoverage;\n    if (alphaToCoverage !== lastState.alphaToCoverage) {\n      if (alphaToCoverage) {\n        gl.enable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n      } else {\n        gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n      }\n      lastState.alphaToCoverage = alphaToCoverage;\n    }\n  };\n  return BlendState;\n}();\n\n/**\n * Depth/Stencil comparison function.\n * @remarks Specifies a function that compares incoming pixel depth/stencil to the current depth/stencil buffer value.\n */\nvar CompareFunction;\n(function (CompareFunction) {\n  CompareFunction[CompareFunction[\"Never\"] = 0] = \"Never\";\n  CompareFunction[CompareFunction[\"Less\"] = 1] = \"Less\";\n  CompareFunction[CompareFunction[\"Equal\"] = 2] = \"Equal\";\n  CompareFunction[CompareFunction[\"LessEqual\"] = 3] = \"LessEqual\";\n  CompareFunction[CompareFunction[\"Greater\"] = 4] = \"Greater\";\n  CompareFunction[CompareFunction[\"NotEqual\"] = 5] = \"NotEqual\";\n  CompareFunction[CompareFunction[\"GreaterEqual\"] = 6] = \"GreaterEqual\";\n  CompareFunction[CompareFunction[\"Always\"] = 7] = \"Always\";\n})(CompareFunction || (CompareFunction = {}));\n\n/**\n * Depth state.\n */\nvar DepthState = /*#__PURE__*/function () {\n  function DepthState() {\n    this.enabled = true;\n    this.writeEnabled = true;\n    this.compareFunction = CompareFunction.Less;\n  }\n  DepthState._getGLCompareFunction = function _getGLCompareFunction(rhi, compareFunction) {\n    var gl = rhi.gl;\n    switch (compareFunction) {\n      case CompareFunction.Never:\n        return gl.NEVER;\n      case CompareFunction.Less:\n        return gl.LESS;\n      case CompareFunction.Equal:\n        return gl.EQUAL;\n      case CompareFunction.LessEqual:\n        return gl.LEQUAL;\n      case CompareFunction.Greater:\n        return gl.GREATER;\n      case CompareFunction.NotEqual:\n        return gl.NOTEQUAL;\n      case CompareFunction.GreaterEqual:\n        return gl.GEQUAL;\n      case CompareFunction.Always:\n        return gl.ALWAYS;\n    }\n  }\n\n  /** Whether to enable the depth test. */;\n  var _proto = DepthState.prototype;\n  /**\n   * @internal\n   * Apply the current depth state by comparing with the last depth state.\n   */\n  _proto._apply = function _apply(hardwareRenderer, lastRenderState) {\n    this._platformApply(hardwareRenderer, lastRenderState.depthState);\n  };\n  _proto._platformApply = function _platformApply(rhi, lastState) {\n    var gl = rhi.gl;\n    var enabled = this.enabled,\n      compareFunction = this.compareFunction,\n      writeEnabled = this.writeEnabled;\n    if (enabled != lastState.enabled) {\n      if (enabled) {\n        gl.enable(gl.DEPTH_TEST);\n      } else {\n        gl.disable(gl.DEPTH_TEST);\n      }\n      lastState.enabled = enabled;\n    }\n    if (enabled) {\n      // apply compare func.\n      if (compareFunction != lastState.compareFunction) {\n        gl.depthFunc(DepthState._getGLCompareFunction(rhi, compareFunction));\n        lastState.compareFunction = compareFunction;\n      }\n\n      // apply write enabled.\n      if (writeEnabled != lastState.writeEnabled) {\n        gl.depthMask(writeEnabled);\n        lastState.writeEnabled = writeEnabled;\n      }\n    }\n  };\n  return DepthState;\n}();\n\n/**\n * Culling mode.\n * @remarks specifies whether or not front- and/or back-facing polygons can be culled.\n */\nvar CullMode;\n(function (CullMode) {\n  CullMode[CullMode[\"Off\"] = 0] = \"Off\";\n  CullMode[CullMode[\"Front\"] = 1] = \"Front\";\n  CullMode[CullMode[\"Back\"] = 2] = \"Back\";\n})(CullMode || (CullMode = {}));\n\n/**\n * Raster state.\n */\nvar RasterState = /*#__PURE__*/function () {\n  function RasterState() {\n    this.cullMode = CullMode.Back;\n    this.depthBias = 0;\n    this.slopeScaledDepthBias = 0;\n    this._cullFaceEnable = true;\n    this._frontFaceInvert = false;\n  }\n  var _proto = RasterState.prototype;\n  /**\n   * @internal\n   */\n  _proto._apply = function _apply(hardwareRenderer, lastRenderState, frontFaceInvert) {\n    this._platformApply(hardwareRenderer, lastRenderState.rasterState, frontFaceInvert);\n  };\n  _proto._platformApply = function _platformApply(rhi, lastState, frontFaceInvert) {\n    var gl = rhi.gl;\n    var cullMode = this.cullMode,\n      depthBias = this.depthBias,\n      slopeScaledDepthBias = this.slopeScaledDepthBias;\n    var cullFaceEnable = cullMode !== CullMode.Off;\n    if (cullFaceEnable !== lastState._cullFaceEnable) {\n      if (cullFaceEnable) {\n        gl.enable(gl.CULL_FACE);\n      } else {\n        gl.disable(gl.CULL_FACE);\n      }\n      lastState._cullFaceEnable = cullFaceEnable;\n    }\n\n    // apply front face.\n    if (cullFaceEnable) {\n      if (cullMode !== lastState.cullMode) {\n        if (cullMode == CullMode.Back) {\n          gl.cullFace(gl.BACK);\n        } else {\n          gl.cullFace(gl.FRONT);\n        }\n        lastState.cullMode = cullMode;\n      }\n    }\n    if (frontFaceInvert !== lastState._frontFaceInvert) {\n      if (frontFaceInvert) {\n        gl.frontFace(gl.CW);\n      } else {\n        gl.frontFace(gl.CCW);\n      }\n      lastState._frontFaceInvert = frontFaceInvert;\n    }\n\n    // apply polygonOffset.\n    if (depthBias !== lastState.depthBias || slopeScaledDepthBias !== lastState.slopeScaledDepthBias) {\n      if (depthBias !== 0 || slopeScaledDepthBias !== 0) {\n        gl.enable(gl.POLYGON_OFFSET_FILL);\n        gl.polygonOffset(slopeScaledDepthBias, depthBias);\n      } else {\n        gl.disable(gl.POLYGON_OFFSET_FILL);\n      }\n      lastState.depthBias = depthBias;\n      lastState.slopeScaledDepthBias = slopeScaledDepthBias;\n    }\n  };\n  return RasterState;\n}();\n\n/**\n * Stencil operation mode.\n * @remarks sets the front and/or back-facing stencil test actions.\n */\nvar StencilOperation;\n(function (StencilOperation) {\n  StencilOperation[StencilOperation[\"Keep\"] = 0] = \"Keep\";\n  StencilOperation[StencilOperation[\"Zero\"] = 1] = \"Zero\";\n  StencilOperation[StencilOperation[\"Replace\"] = 2] = \"Replace\";\n  StencilOperation[StencilOperation[\"IncrementSaturate\"] = 3] = \"IncrementSaturate\";\n  StencilOperation[StencilOperation[\"DecrementSaturate\"] = 4] = \"DecrementSaturate\";\n  StencilOperation[StencilOperation[\"Invert\"] = 5] = \"Invert\";\n  StencilOperation[StencilOperation[\"IncrementWrap\"] = 6] = \"IncrementWrap\";\n  StencilOperation[StencilOperation[\"DecrementWrap\"] = 7] = \"DecrementWrap\";\n})(StencilOperation || (StencilOperation = {}));\n\n/**\n * Stencil state.\n */\nvar StencilState = /*#__PURE__*/function () {\n  function StencilState() {\n    this.enabled = false;\n    this.referenceValue = 0;\n    this.mask = 0xff;\n    this.writeMask = 0xff;\n    this.compareFunctionFront = CompareFunction.Always;\n    this.compareFunctionBack = CompareFunction.Always;\n    this.passOperationFront = StencilOperation.Keep;\n    this.passOperationBack = StencilOperation.Keep;\n    this.failOperationFront = StencilOperation.Keep;\n    this.failOperationBack = StencilOperation.Keep;\n    this.zFailOperationFront = StencilOperation.Keep;\n    this.zFailOperationBack = StencilOperation.Keep;\n  }\n  StencilState._getGLCompareFunction = function _getGLCompareFunction(rhi, compareFunction) {\n    var gl = rhi.gl;\n    switch (compareFunction) {\n      case CompareFunction.Never:\n        return gl.NEVER;\n      case CompareFunction.Less:\n        return gl.LESS;\n      case CompareFunction.Equal:\n        return gl.EQUAL;\n      case CompareFunction.LessEqual:\n        return gl.LEQUAL;\n      case CompareFunction.Greater:\n        return gl.GREATER;\n      case CompareFunction.NotEqual:\n        return gl.NOTEQUAL;\n      case CompareFunction.GreaterEqual:\n        return gl.GEQUAL;\n      case CompareFunction.Always:\n        return gl.ALWAYS;\n    }\n  };\n  StencilState._getGLStencilOperation = function _getGLStencilOperation(rhi, compareFunction) {\n    var gl = rhi.gl;\n    switch (compareFunction) {\n      case StencilOperation.Keep:\n        return gl.KEEP;\n      case StencilOperation.Zero:\n        return gl.ZERO;\n      case StencilOperation.Replace:\n        return gl.REPLACE;\n      case StencilOperation.IncrementSaturate:\n        return gl.INCR;\n      case StencilOperation.DecrementSaturate:\n        return gl.DECR;\n      case StencilOperation.Invert:\n        return gl.INVERT;\n      case StencilOperation.IncrementWrap:\n        return gl.INCR_WRAP;\n      case StencilOperation.DecrementWrap:\n        return gl.DECR_WRAP;\n    }\n  }\n\n  /** Whether to enable stencil test. */;\n  var _proto = StencilState.prototype;\n  /**\n   * @internal\n   */\n  _proto._apply = function _apply(hardwareRenderer, lastRenderState) {\n    this._platformApply(hardwareRenderer, lastRenderState.stencilState);\n  };\n  _proto._platformApply = function _platformApply(rhi, lastState) {\n    var gl = rhi.gl;\n    var enabled = this.enabled,\n      referenceValue = this.referenceValue,\n      mask = this.mask,\n      compareFunctionFront = this.compareFunctionFront,\n      compareFunctionBack = this.compareFunctionBack,\n      failOperationFront = this.failOperationFront,\n      zFailOperationFront = this.zFailOperationFront,\n      passOperationFront = this.passOperationFront,\n      failOperationBack = this.failOperationBack,\n      zFailOperationBack = this.zFailOperationBack,\n      passOperationBack = this.passOperationBack,\n      writeMask = this.writeMask;\n    if (enabled != lastState.enabled) {\n      if (enabled) {\n        gl.enable(gl.STENCIL_TEST);\n      } else {\n        gl.disable(gl.STENCIL_TEST);\n      }\n      lastState.enabled = enabled;\n    }\n    if (enabled) {\n      // apply stencil func.\n      var referenceOrMaskChange = referenceValue !== lastState.referenceValue || mask !== lastState.mask;\n      if (referenceOrMaskChange || compareFunctionFront !== lastState.compareFunctionFront) {\n        gl.stencilFuncSeparate(gl.FRONT, StencilState._getGLCompareFunction(rhi, compareFunctionFront), referenceValue, mask);\n        lastState.compareFunctionFront = compareFunctionFront;\n      }\n      if (referenceOrMaskChange || compareFunctionBack !== lastState.compareFunctionBack) {\n        gl.stencilFuncSeparate(gl.BACK, StencilState._getGLCompareFunction(rhi, compareFunctionBack), referenceValue, mask);\n        lastState.compareFunctionBack = this.compareFunctionBack;\n      }\n      if (referenceOrMaskChange) {\n        lastState.referenceValue = this.referenceValue;\n        lastState.mask = this.mask;\n      }\n\n      // apply stencil operation.\n      if (failOperationFront !== lastState.failOperationFront || zFailOperationFront !== lastState.zFailOperationFront || passOperationFront !== lastState.passOperationFront) {\n        gl.stencilOpSeparate(gl.FRONT, StencilState._getGLStencilOperation(rhi, failOperationFront), StencilState._getGLStencilOperation(rhi, zFailOperationFront), StencilState._getGLStencilOperation(rhi, passOperationFront));\n        lastState.failOperationFront = failOperationFront;\n        lastState.zFailOperationFront = zFailOperationFront;\n        lastState.passOperationFront = passOperationFront;\n      }\n      if (failOperationBack !== lastState.failOperationBack || zFailOperationBack !== lastState.zFailOperationBack || passOperationBack !== lastState.passOperationBack) {\n        gl.stencilOpSeparate(gl.BACK, StencilState._getGLStencilOperation(rhi, failOperationBack), StencilState._getGLStencilOperation(rhi, zFailOperationBack), StencilState._getGLStencilOperation(rhi, passOperationBack));\n        lastState.failOperationBack = failOperationBack;\n        lastState.zFailOperationBack = zFailOperationBack;\n        lastState.passOperationBack = passOperationBack;\n      }\n\n      // apply write mask.\n      if (writeMask !== lastState.writeMask) {\n        gl.stencilMask(writeMask);\n        lastState.writeMask = writeMask;\n      }\n    }\n  };\n  return StencilState;\n}();\n\n/**\n * Render state.\n */\nvar RenderState = /*#__PURE__*/function () {\n  function RenderState() {\n    this.blendState = new BlendState();\n    this.depthState = new DepthState();\n    this.stencilState = new StencilState();\n    this.rasterState = new RasterState();\n  }\n  var _proto = RenderState.prototype;\n  /**\n   * @internal\n   */\n  _proto._apply = function _apply(engine, frontFaceInvert) {\n    var hardwareRenderer = engine._hardwareRenderer;\n    var lastRenderState = engine._lastRenderState;\n    this.blendState._apply(hardwareRenderer, lastRenderState);\n    this.depthState._apply(hardwareRenderer, lastRenderState);\n    this.stencilState._apply(hardwareRenderer, lastRenderState);\n    this.rasterState._apply(hardwareRenderer, lastRenderState, frontFaceInvert);\n  };\n  return RenderState;\n}();\n\n/**\n * Material.\n */\nvar Material = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(Material, _RefObject);\n  /** Name. */\n\n  /** Shader used by the material. */\n\n  /** Render queue type. */\n\n  /** Shader data. */\n\n  /** Render state. */\n  // todo: later will as a part of shaderData when shader effect frame is OK, that is more powerful and flexible.\n\n  /**\n   * Create a material instance.\n   * @param engine - Engine to which the material belongs\n   * @param shader - Shader used by the material\n   */\n  function Material(engine, shader) {\n    var _this;\n    _this = _RefObject.call(this, engine) || this;\n    _this.name = void 0;\n    _this.shader = void 0;\n    _this.renderQueueType = RenderQueueType.Opaque;\n    _this.shaderData = new ShaderData(ShaderDataGroup.Material);\n    _this.renderState = new RenderState();\n    _this.shader = shader;\n    return _this;\n  }\n\n  /**\n   * Clone and return the instance.\n   */\n  var _proto = Material.prototype;\n  _proto.clone = function clone() {\n    var dest = new Material(this._engine, this.shader);\n    this.cloneTo(dest);\n    return dest;\n  }\n\n  /**\n   * Clone to the target material.\n   * @param target - target material\n   */;\n  _proto.cloneTo = function cloneTo(target) {\n    target.shader = this.shader;\n    target.renderQueueType = this.renderQueueType;\n    this.shaderData.cloneTo(target.shaderData);\n    CloneManager.deepCloneObject(this.renderState, target.renderState);\n  }\n\n  /**\n   * @override\n   */;\n  _proto._addRefCount = function _addRefCount(value) {\n    _RefObject.prototype._addRefCount.call(this, value);\n    this.shaderData._addRefCount(value);\n  }\n\n  /**\n   * @internal\n   * @todo:temporary solution\n   */;\n  _proto._preRender = function _preRender(renderElement) {}\n\n  /**\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {};\n  return Material;\n}(RefObject);\n\n/**\n * Class pool utils.\n */\nvar ClassPool = /*#__PURE__*/function () {\n  function ClassPool(type) {\n    this._elementPoolIndex = 0;\n    this._elementPool = [];\n    this._type = void 0;\n    this._type = type;\n  }\n\n  /**\n   * Get element from pool.\n   */\n  var _proto = ClassPool.prototype;\n  _proto.getFromPool = function getFromPool() {\n    var index = this._elementPoolIndex,\n      pool = this._elementPool;\n    this._elementPoolIndex++;\n    if (pool.length === index) {\n      var element = new this._type();\n      pool.push(element);\n      return element;\n    } else {\n      return pool[index];\n    }\n  }\n\n  /**\n   * Reset pool.\n   */;\n  _proto.resetPool = function resetPool() {\n    this._elementPoolIndex = 0;\n  };\n  return ClassPool;\n}();\n\nvar RenderElement = function RenderElement() {\n  this.component = void 0;\n  this.material = void 0;\n  this.multiRenderData = void 0;\n};\n\n/**\n * Render element.\n */\nvar MeshRenderElement = /*#__PURE__*/function (_RenderElement) {\n  _inheritsLoose(MeshRenderElement, _RenderElement);\n  function MeshRenderElement() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _RenderElement.call.apply(_RenderElement, [this].concat(args)) || this;\n    _this.mesh = void 0;\n    _this.subMesh = void 0;\n    return _this;\n  }\n  var _proto = MeshRenderElement.prototype;\n  _proto.setValue = function setValue(component, mesh, subMesh, material) {\n    this.component = component;\n    this.mesh = mesh;\n    this.subMesh = subMesh;\n    this.material = material;\n  };\n  return MeshRenderElement;\n}(RenderElement);\n\n/**\n * Rendering context.\n */\nvar RenderContext = /*#__PURE__*/function () {\n  function RenderContext() {\n    this._camera = void 0;\n    this._viewProjectMatrix = new Matrix();\n  }\n  var _proto = RenderContext.prototype;\n  /**\n   * @internal\n   */\n  _proto._setContext = function _setContext(camera) {\n    this._camera = camera;\n    Matrix.multiply(camera.projectionMatrix, camera.viewMatrix, this._viewProjectMatrix);\n  };\n  return RenderContext;\n}();\n\nvar SpriteElement = /*#__PURE__*/function (_RenderElement) {\n  _inheritsLoose(SpriteElement, _RenderElement);\n  function SpriteElement() {\n    var _this;\n    _this = _RenderElement.call(this) || this;\n    _this.renderData = void 0;\n    _this.texture = void 0;\n    _this.multiRenderData = false;\n    return _this;\n  }\n  var _proto = SpriteElement.prototype;\n  _proto.setValue = function setValue(component, renderDate, material, texture) {\n    this.component = component;\n    this.renderData = renderDate;\n    this.material = material;\n    this.texture = texture;\n  };\n  return SpriteElement;\n}(RenderElement);\n\nvar SpriteMaskElement = /*#__PURE__*/function (_RenderElement) {\n  _inheritsLoose(SpriteMaskElement, _RenderElement);\n  function SpriteMaskElement() {\n    var _this;\n    _this = _RenderElement.call(this) || this;\n    _this.renderData = void 0;\n    _this.isAdd = true;\n    _this.multiRenderData = false;\n    return _this;\n  }\n  var _proto = SpriteMaskElement.prototype;\n  _proto.setValue = function setValue(component, renderData, material) {\n    this.component = component;\n    this.renderData = renderData;\n    this.material = material;\n  };\n  return SpriteMaskElement;\n}(RenderElement);\n\n/**\n * Sprite mask interaction.\n */\nvar SpriteMaskInteraction;\n(function (SpriteMaskInteraction) {\n  SpriteMaskInteraction[SpriteMaskInteraction[\"None\"] = 0] = \"None\";\n  SpriteMaskInteraction[SpriteMaskInteraction[\"VisibleInsideMask\"] = 1] = \"VisibleInsideMask\";\n  SpriteMaskInteraction[SpriteMaskInteraction[\"VisibleOutsideMask\"] = 2] = \"VisibleOutsideMask\";\n})(SpriteMaskInteraction || (SpriteMaskInteraction = {}));\n\nvar _dec$3, _class$a, _class2$9, _descriptor$8, _descriptor2$8, _descriptor3$7, _descriptor4$7, _descriptor5$7, _descriptor6$7, _descriptor7$7, _descriptor8$7, _descriptor9$6, _descriptor10$3, _descriptor11$3, _descriptor12$3, _descriptor13$2, _descriptor14$1, _descriptor15$1, _descriptor16$1, _class3$1;\n\n/**\n * Basis for all renderers.\n * @decorator `@dependentComponents(Transform)`\n */\nvar Renderer = (_dec$3 = dependentComponents(Transform), _dec$3(_class$a = (_class2$9 = (_class3$1 = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Renderer, _Component);\n  /**\n   * @internal\n   */\n  function Renderer(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"shaderData\", _descriptor$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"isCulled\", _descriptor2$8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_distanceForSort\", _descriptor3$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onUpdateIndex\", _descriptor4$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_rendererIndex\", _descriptor5$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_globalShaderMacro\", _descriptor6$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_transformChangeFlag\", _descriptor7$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_bounds\", _descriptor8$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_overrideUpdate\", _descriptor9$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_materials\", _descriptor10$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_mvMatrix\", _descriptor11$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_mvpMatrix\", _descriptor12$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_mvInvMatrix\", _descriptor13$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_normalMatrix\", _descriptor14$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_materialsInstanced\", _descriptor15$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_priority\", _descriptor16$1, _assertThisInitialized(_this));\n    var prototype = Renderer.prototype;\n    _this._overrideUpdate = _this.update !== prototype.update;\n    _this._transformChangeFlag = _this.entity.transform.registerWorldChangeFlag();\n    _this.shaderData._addRefCount(1);\n    return _this;\n  }\n\n  /**\n   * Get the first instance material.\n   * @returns The first instance material\n   */\n  var _proto = Renderer.prototype;\n  _proto.getInstanceMaterial = function getInstanceMaterial(index) {\n    if (index === void 0) {\n      index = 0;\n    }\n    var materials = this._materials;\n    if (materials.length > index) {\n      var _material = materials[index];\n      if (_material) {\n        if (this._materialsInstanced[index]) {\n          return _material;\n        } else {\n          return this._createInstanceMaterial(_material, index);\n        }\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Get the first material.\n   * @returns The first material\n   */;\n  _proto.getMaterial = function getMaterial(index) {\n    if (index === void 0) {\n      index = 0;\n    }\n    return this._materials[index] || null;\n  }\n\n  /**\n   * Set the first material.\n   * @param material - The first material\n   */;\n  _proto.setMaterial = function setMaterial(indexOrMaterial, material) {\n    if (material === void 0) {\n      material = null;\n    }\n    if (typeof indexOrMaterial === \"number\") {\n      this._setMaterial(indexOrMaterial, material);\n    } else {\n      this._setMaterial(0, indexOrMaterial);\n    }\n  }\n\n  /**\n   * Get all instance materials.\n   * @remarks Calling this function for the first time after the material is set will create an instance material to ensure that it is unique to the renderer.\n   * @returns All instance materials\n   */;\n  _proto.getInstanceMaterials = function getInstanceMaterials() {\n    var materials = this._materials;\n    var materialsInstance = this._materialsInstanced;\n    for (var i = 0, n = materials.length; i < n; i++) {\n      if (!materialsInstance[i]) {\n        this._createInstanceMaterial(this._materials[i], i);\n      }\n    }\n    return materials;\n  }\n\n  /**\n   * Get all materials.\n   * @returns All materials\n   */;\n  _proto.getMaterials = function getMaterials() {\n    return this._materials;\n  }\n\n  /**\n   * Set all materials.\n   * @param materials - All materials\n   */;\n  _proto.setMaterials = function setMaterials(materials) {\n    var count = materials.length;\n    var internalMaterials = this._materials;\n    var materialsInstanced = this._materialsInstanced;\n    for (var i = count, n = internalMaterials.length; i < n; i++) {\n      var internalMaterial = internalMaterials[i];\n      internalMaterial && internalMaterial._addRefCount(-1);\n    }\n    internalMaterials.length !== count && (internalMaterials.length = count);\n    materialsInstanced.length !== 0 && (materialsInstanced.length = 0);\n    for (var _i = 0; _i < count; _i++) {\n      var _internalMaterial = internalMaterials[_i];\n      var _material2 = materials[_i];\n      if (_internalMaterial !== _material2) {\n        internalMaterials[_i] = _material2;\n        _internalMaterial && _internalMaterial._addRefCount(-1);\n        _material2 && _material2._addRefCount(1);\n      }\n    }\n  };\n  _proto.update = function update(deltaTime) {}\n\n  /**\n   * @internal\n   */;\n  _proto._updateShaderData = function _updateShaderData(context) {\n    var shaderData = this.shaderData;\n    var worldMatrix = this.entity.transform.worldMatrix;\n    var mvMatrix = this._mvMatrix;\n    var mvpMatrix = this._mvpMatrix;\n    var mvInvMatrix = this._mvInvMatrix;\n    var normalMatrix = this._normalMatrix;\n    Matrix.multiply(context._camera.viewMatrix, worldMatrix, mvMatrix);\n    Matrix.multiply(context._viewProjectMatrix, worldMatrix, mvpMatrix);\n    Matrix.invert(mvMatrix, mvInvMatrix);\n    Matrix.invert(worldMatrix, normalMatrix);\n    normalMatrix.transpose();\n    shaderData.setMatrix(Renderer._localMatrixProperty, this.entity.transform.localMatrix);\n    shaderData.setMatrix(Renderer._worldMatrixProperty, worldMatrix);\n    shaderData.setMatrix(Renderer._mvMatrixProperty, mvMatrix);\n    shaderData.setMatrix(Renderer._mvpMatrixProperty, mvpMatrix);\n    shaderData.setMatrix(Renderer._mvInvMatrixProperty, mvInvMatrix);\n    shaderData.setMatrix(Renderer._normalMatrixProperty, normalMatrix);\n  };\n  _proto._onEnable = function _onEnable() {\n    var componentsManager = this.engine._componentsManager;\n    if (this._overrideUpdate) {\n      componentsManager.addOnUpdateRenderers(this);\n    }\n    componentsManager.addRenderer(this);\n  };\n  _proto._onDisable = function _onDisable() {\n    var componentsManager = this.engine._componentsManager;\n    if (this._overrideUpdate) {\n      componentsManager.removeOnUpdateRenderers(this);\n    }\n    componentsManager.removeRenderer(this);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._render = function _render(camera) {\n    throw \"not implement\";\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    var flag = this._transformChangeFlag;\n    if (flag) {\n      flag.destroy();\n      this._transformChangeFlag = null;\n    }\n    this.shaderData._addRefCount(-1);\n    var materials = this._materials;\n    for (var i = 0, n = materials.length; i < n; i++) {\n      var _materials$i;\n      (_materials$i = materials[i]) === null || _materials$i === void 0 ? void 0 : _materials$i._addRefCount(-1);\n    }\n  };\n  _proto._updateBounds = function _updateBounds(worldBounds) {};\n  _proto._createInstanceMaterial = function _createInstanceMaterial(material, index) {\n    var insMaterial = material.clone();\n    insMaterial.name = insMaterial.name + \"(Instance)\";\n    material._addRefCount(-1);\n    insMaterial._addRefCount(1);\n    this._materialsInstanced[index] = true;\n    this._materials[index] = insMaterial;\n    return insMaterial;\n  };\n  _proto._setMaterial = function _setMaterial(index, material) {\n    var materials = this._materials;\n    if (index >= materials.length) {\n      materials.length = index + 1;\n    }\n    var internalMaterial = materials[index];\n    if (internalMaterial !== material) {\n      var materialsInstance = this._materialsInstanced;\n      index < materialsInstance.length && (materialsInstance[index] = false);\n      internalMaterial && internalMaterial._addRefCount(-1);\n      material && material._addRefCount(1);\n      materials[index] = material;\n    }\n  };\n  _createClass(Renderer, [{\n    key: \"materialCount\",\n    get: /** ShaderData related to renderer. */\n\n    /** Whether it is clipped by the frustum, needs to be turned on camera.enableFrustumCulling. */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Material count.\n     */\n    function get() {\n      return this._materials.length;\n    },\n    set: function set(value) {\n      var materials = this._materials;\n      var materialsInstanced = this._materialsInstanced;\n      materials.length !== value && (materials.length = value);\n      materialsInstanced.length > value && (materialsInstanced.length = value);\n    }\n\n    /**\n     * The bounding volume of the renderer.\n     */\n  }, {\n    key: \"bounds\",\n    get: function get() {\n      var changeFlag = this._transformChangeFlag;\n      if (changeFlag.flag) {\n        this._updateBounds(this._bounds);\n        changeFlag.flag = false;\n      }\n      return this._bounds;\n    }\n\n    /**\n     * The render priority of the renderer, lower values are rendered first and higher values are rendered last.\n     */\n  }, {\n    key: \"priority\",\n    get: function get() {\n      return this._priority;\n    },\n    set: function set(value) {\n      this._priority = value;\n    }\n  }]);\n  return Renderer;\n}(Component), _class3$1._localMatrixProperty = Shader.getPropertyByName(\"u_localMat\"), _class3$1._worldMatrixProperty = Shader.getPropertyByName(\"u_modelMat\"), _class3$1._mvMatrixProperty = Shader.getPropertyByName(\"u_MVMat\"), _class3$1._mvpMatrixProperty = Shader.getPropertyByName(\"u_MVPMat\"), _class3$1._mvInvMatrixProperty = Shader.getPropertyByName(\"u_MVInvMat\"), _class3$1._normalMatrixProperty = Shader.getPropertyByName(\"u_normalMat\"), _class3$1), (_descriptor$8 = _applyDecoratedDescriptor(_class2$9.prototype, \"shaderData\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ShaderData(ShaderDataGroup.Renderer);\n  }\n}), _descriptor2$8 = _applyDecoratedDescriptor(_class2$9.prototype, \"isCulled\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor3$7 = _applyDecoratedDescriptor(_class2$9.prototype, \"_distanceForSort\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4$7 = _applyDecoratedDescriptor(_class2$9.prototype, \"_onUpdateIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor5$7 = _applyDecoratedDescriptor(_class2$9.prototype, \"_rendererIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor6$7 = _applyDecoratedDescriptor(_class2$9.prototype, \"_globalShaderMacro\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ShaderMacroCollection();\n  }\n}), _descriptor7$7 = _applyDecoratedDescriptor(_class2$9.prototype, \"_transformChangeFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor8$7 = _applyDecoratedDescriptor(_class2$9.prototype, \"_bounds\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new BoundingBox();\n  }\n}), _descriptor9$6 = _applyDecoratedDescriptor(_class2$9.prototype, \"_overrideUpdate\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor10$3 = _applyDecoratedDescriptor(_class2$9.prototype, \"_materials\", [shallowClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor11$3 = _applyDecoratedDescriptor(_class2$9.prototype, \"_mvMatrix\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor12$3 = _applyDecoratedDescriptor(_class2$9.prototype, \"_mvpMatrix\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor13$2 = _applyDecoratedDescriptor(_class2$9.prototype, \"_mvInvMatrix\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor14$1 = _applyDecoratedDescriptor(_class2$9.prototype, \"_normalMatrix\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor15$1 = _applyDecoratedDescriptor(_class2$9.prototype, \"_materialsInstanced\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor16$1 = _applyDecoratedDescriptor(_class2$9.prototype, \"_priority\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n})), _class2$9)) || _class$a);\n\n/**\n *  Static interface implement decorator.\n *  https://stackoverflow.com/questions/13955157/how-to-define-static-property-in-typescript-interface\n */\nfunction StaticInterfaceImplement() {\n  return function (constructor) {\n  };\n}\n\nvar _dec$2, _class$9, _class2$8;\n\n/**\n * @internal\n */\nvar SimpleSpriteAssembler = (_dec$2 = StaticInterfaceImplement(), _dec$2(_class$9 = (_class2$8 = /*#__PURE__*/function () {\n  function SimpleSpriteAssembler() {}\n  SimpleSpriteAssembler.resetData = function resetData(renderer) {\n    var renderData = renderer._renderData;\n    var vertexCount = renderData.vertexCount = 4;\n    var positions = renderData.positions,\n      uvs = renderData.uvs;\n    if (positions.length < vertexCount) {\n      for (var i = positions.length; i < vertexCount; i++) {\n        positions.push(new Vector3());\n        uvs.push(new Vector2());\n      }\n    }\n    renderData.triangles = SimpleSpriteAssembler._rectangleTriangles;\n  };\n  SimpleSpriteAssembler.updatePositions = function updatePositions(renderer) {\n    var width = renderer.width,\n      height = renderer.height,\n      sprite = renderer.sprite;\n    var _sprite$pivot = sprite.pivot,\n      pivotX = _sprite$pivot.x,\n      pivotY = _sprite$pivot.y;\n    // Renderer's worldMatrix;\n    var worldMatrix = SimpleSpriteAssembler._worldMatrix;\n    var wE = worldMatrix.elements;\n    // Parent's worldMatrix.\n    var pWE = renderer.entity.transform.worldMatrix.elements;\n    var sx = renderer.flipX ? -width : width;\n    var sy = renderer.flipY ? -height : height;\n    wE[0] = pWE[0] * sx, wE[1] = pWE[1] * sx, wE[2] = pWE[2] * sx;\n    wE[4] = pWE[4] * sy, wE[5] = pWE[5] * sy, wE[6] = pWE[6] * sy;\n    wE[8] = pWE[8], wE[9] = pWE[9], wE[10] = pWE[10];\n    wE[12] = pWE[12] - pivotX * wE[0] - pivotY * wE[4];\n    wE[13] = pWE[13] - pivotX * wE[1] - pivotY * wE[5];\n    wE[14] = pWE[14] - pivotX * wE[2] - pivotY * wE[6];\n\n    // ---------------\n    //  2 - 3\n    //  |   |\n    //  0 - 1\n    // ---------------\n    // Update positions.\n    var spritePositions = sprite._getPositions();\n    var positions = renderer._renderData.positions;\n    for (var i = 0; i < 4; i++) {\n      var _spritePositions$i = spritePositions[i],\n        x = _spritePositions$i.x,\n        y = _spritePositions$i.y;\n      positions[i].set(wE[0] * x + wE[4] * y + wE[12], wE[1] * x + wE[5] * y + wE[13], wE[2] * x + wE[6] * y + wE[14]);\n    }\n    BoundingBox.transform(sprite._getBounds(), worldMatrix, renderer._bounds);\n  };\n  SimpleSpriteAssembler.updateUVs = function updateUVs(renderer) {\n    var spriteUVs = renderer.sprite._getUVs();\n    var renderUVs = renderer._renderData.uvs;\n    var _spriteUVs$ = spriteUVs[0],\n      left = _spriteUVs$.x,\n      bottom = _spriteUVs$.y;\n    var _spriteUVs$2 = spriteUVs[3],\n      right = _spriteUVs$2.x,\n      top = _spriteUVs$2.y;\n    renderUVs[0].set(left, bottom);\n    renderUVs[1].set(right, bottom);\n    renderUVs[2].set(left, top);\n    renderUVs[3].set(right, top);\n  };\n  return SimpleSpriteAssembler;\n}(), _class2$8._rectangleTriangles = [0, 1, 2, 2, 1, 3], _class2$8._worldMatrix = new Matrix(), _class2$8)) || _class$9);\n\n/**\n * @internal\n */\nvar RenderData2D = function RenderData2D(vertexCount, positions, uvs, triangles, color) {\n  if (triangles === void 0) {\n    triangles = null;\n  }\n  if (color === void 0) {\n    color = null;\n  }\n  this.vertexCount = vertexCount;\n  this.positions = positions;\n  this.uvs = uvs;\n  this.triangles = triangles;\n  this.color = color;\n};\n\n/**\n * Sprite Property Dirty Flag.\n */\nvar SpritePropertyDirtyFlag;\n(function (SpritePropertyDirtyFlag) {\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"texture\"] = 1] = \"texture\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"size\"] = 2] = \"size\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"atlasRotate\"] = 4] = \"atlasRotate\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"atlasRegion\"] = 8] = \"atlasRegion\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"atlasRegionOffset\"] = 16] = \"atlasRegionOffset\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"region\"] = 32] = \"region\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"pivot\"] = 64] = \"pivot\";\n  SpritePropertyDirtyFlag[SpritePropertyDirtyFlag[\"border\"] = 128] = \"border\";\n})(SpritePropertyDirtyFlag || (SpritePropertyDirtyFlag = {}));\n\n/**\n * Sprite mask layer.\n */\nvar SpriteMaskLayer;\n(function (SpriteMaskLayer) {\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer0\"] = 1] = \"Layer0\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer1\"] = 2] = \"Layer1\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer2\"] = 4] = \"Layer2\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer3\"] = 8] = \"Layer3\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer4\"] = 16] = \"Layer4\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer5\"] = 32] = \"Layer5\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer6\"] = 64] = \"Layer6\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer7\"] = 128] = \"Layer7\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer8\"] = 256] = \"Layer8\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer9\"] = 512] = \"Layer9\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer10\"] = 1024] = \"Layer10\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer11\"] = 2048] = \"Layer11\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer12\"] = 4096] = \"Layer12\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer13\"] = 8192] = \"Layer13\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer14\"] = 16384] = \"Layer14\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer15\"] = 32768] = \"Layer15\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer16\"] = 65536] = \"Layer16\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer17\"] = 131072] = \"Layer17\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer18\"] = 262144] = \"Layer18\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer19\"] = 524288] = \"Layer19\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer20\"] = 1048576] = \"Layer20\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer21\"] = 2097152] = \"Layer21\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer22\"] = 4194304] = \"Layer22\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer23\"] = 8388608] = \"Layer23\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer24\"] = 16777216] = \"Layer24\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer25\"] = 33554432] = \"Layer25\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer26\"] = 67108864] = \"Layer26\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer27\"] = 134217728] = \"Layer27\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer28\"] = 268435456] = \"Layer28\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer29\"] = 536870912] = \"Layer29\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer30\"] = 1073741824] = \"Layer30\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Layer31\"] = 2147483648] = \"Layer31\";\n  SpriteMaskLayer[SpriteMaskLayer[\"Everything\"] = 4294967295] = \"Everything\";\n})(SpriteMaskLayer || (SpriteMaskLayer = {}));\n\nvar _class$8, _descriptor$7, _descriptor2$7, _descriptor3$6, _descriptor4$6, _descriptor5$6, _descriptor6$6, _descriptor7$6, _descriptor8$6, _descriptor9$5, _class2$7;\n/**\n * A component for masking Sprites.\n */\nvar SpriteMask = (_class$8 = (_class2$7 = /*#__PURE__*/function (_Renderer) {\n  _inheritsLoose(SpriteMask, _Renderer);\n  /**\n   * @internal\n   */\n  function SpriteMask(entity) {\n    var _this;\n    _this = _Renderer.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"influenceLayers\", _descriptor$7, _assertThisInitialized(_this));\n    _this._maskElement = void 0;\n    _this._renderData = void 0;\n    _initializerDefineProperty(_this, \"_sprite\", _descriptor2$7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_width\", _descriptor3$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_height\", _descriptor4$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_flipX\", _descriptor5$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_flipY\", _descriptor6$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_alphaCutoff\", _descriptor7$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_dirtyFlag\", _descriptor8$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_spriteChangeFlag\", _descriptor9$5, _assertThisInitialized(_this));\n    _this._renderData = new RenderData2D(4, [], []);\n    SimpleSpriteAssembler.resetData(_assertThisInitialized(_this));\n    _this.setMaterial(_this._engine._spriteMaskDefaultMaterial);\n    _this.shaderData.setFloat(SpriteMask._alphaCutoffProperty, _this._alphaCutoff);\n    _this._onSpriteChange = _this._onSpriteChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */\n  var _proto = SpriteMask.prototype;\n  _proto._onDestroy = function _onDestroy() {\n    this._sprite = null;\n    this._renderData = null;\n    if (this._spriteChangeFlag) {\n      this._spriteChangeFlag.destroy();\n      this._spriteChangeFlag = null;\n    }\n    _Renderer.prototype._onDestroy.call(this);\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */;\n  _proto._render = function _render(camera) {\n    var _this$sprite;\n    if (!((_this$sprite = this.sprite) !== null && _this$sprite !== void 0 && _this$sprite.texture) || !this.width || !this.height) {\n      return;\n    }\n    // Update position.\n    if (this._transformChangeFlag.flag || this._dirtyFlag & DirtyFlag$3.Position) {\n      SimpleSpriteAssembler.updatePositions(this);\n      this._dirtyFlag &= ~DirtyFlag$3.Position;\n      this._transformChangeFlag.flag = false;\n    }\n\n    // Update uv.\n    if (this._dirtyFlag & DirtyFlag$3.UV) {\n      SimpleSpriteAssembler.updateUVs(this);\n      this._dirtyFlag &= ~DirtyFlag$3.UV;\n    }\n    var spriteMaskElementPool = this._engine._spriteMaskElementPool;\n    var maskElement = spriteMaskElementPool.getFromPool();\n    maskElement.setValue(this, this._renderData, this.getMaterial());\n    camera._renderPipeline._allSpriteMasks.add(this);\n    this._maskElement = maskElement;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._cloneTo = function _cloneTo(target) {\n    target.sprite = this._sprite;\n  };\n  _proto._onSpriteChange = function _onSpriteChange(dirtyFlag) {\n    switch (dirtyFlag) {\n      case SpritePropertyDirtyFlag.texture:\n        this.shaderData.setTexture(SpriteMask._textureProperty, this.sprite.texture);\n        break;\n      case SpritePropertyDirtyFlag.region:\n      case SpritePropertyDirtyFlag.atlasRegionOffset:\n        this._dirtyFlag |= DirtyFlag$3.All;\n        break;\n      case SpritePropertyDirtyFlag.atlasRegion:\n        this._dirtyFlag |= DirtyFlag$3.UV;\n        break;\n    }\n  };\n  _createClass(SpriteMask, [{\n    key: \"width\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /** The mask layers the sprite mask influence to. */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Render width.\n     */\n    function get() {\n      if (this._width === undefined && this._sprite) {\n        this.width = this._sprite.width;\n      }\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this._dirtyFlag |= DirtyFlag$3.Position;\n      }\n    }\n\n    /**\n     * Render height.\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      if (this._height === undefined && this._sprite) {\n        this.height = this._sprite.height;\n      }\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this._dirtyFlag |= DirtyFlag$3.Position;\n      }\n    }\n\n    /**\n     * Flips the sprite on the X axis.\n     */\n  }, {\n    key: \"flipX\",\n    get: function get() {\n      return this._flipX;\n    },\n    set: function set(value) {\n      if (this._flipX !== value) {\n        this._flipX = value;\n        this._dirtyFlag |= DirtyFlag$3.Position;\n      }\n    }\n\n    /**\n     * Flips the sprite on the Y axis.\n     */\n  }, {\n    key: \"flipY\",\n    get: function get() {\n      return this._flipY;\n    },\n    set: function set(value) {\n      if (this._flipY !== value) {\n        this._flipY = value;\n        this._dirtyFlag |= DirtyFlag$3.Position;\n      }\n    }\n\n    /**\n     * The Sprite to render.\n     */\n  }, {\n    key: \"sprite\",\n    get: function get() {\n      return this._sprite;\n    },\n    set: function set(value) {\n      if (this._sprite !== value) {\n        this._sprite = value;\n        this._spriteChangeFlag && this._spriteChangeFlag.destroy();\n        if (value) {\n          this._spriteChangeFlag = value._registerUpdateFlag();\n          this._spriteChangeFlag.listener = this._onSpriteChange;\n          this._dirtyFlag |= DirtyFlag$3.All;\n          this.shaderData.setTexture(SpriteMask._textureProperty, value.texture);\n        } else {\n          this._spriteChangeFlag = null;\n          this.shaderData.setTexture(SpriteMask._textureProperty, null);\n        }\n      }\n    }\n\n    /**\n     * The minimum alpha value used by the mask to select the area of influence defined over the mask's sprite. Value between 0 and 1.\n     */\n  }, {\n    key: \"alphaCutoff\",\n    get: function get() {\n      return this._alphaCutoff;\n    },\n    set: function set(value) {\n      if (this._alphaCutoff !== value) {\n        this._alphaCutoff = value;\n        this.shaderData.setFloat(SpriteMask._alphaCutoffProperty, value);\n      }\n    }\n\n    /**\n     * The bounding volume of the spriteRenderer.\n     */\n  }, {\n    key: \"bounds\",\n    get: function get() {\n      var _this$sprite2;\n      if (!((_this$sprite2 = this.sprite) !== null && _this$sprite2 !== void 0 && _this$sprite2.texture) || !this.width || !this.height) {\n        return Engine._defaultBoundingBox;\n      } else if (this._transformChangeFlag.flag || this._dirtyFlag & DirtyFlag$3.Position) {\n        SimpleSpriteAssembler.updatePositions(this);\n        this._dirtyFlag &= ~DirtyFlag$3.Position;\n        this._transformChangeFlag.flag = false;\n      }\n      return this._bounds;\n    }\n  }]);\n  return SpriteMask;\n}(Renderer), _class2$7._textureProperty = Shader.getPropertyByName(\"u_maskTexture\"), _class2$7._alphaCutoffProperty = Shader.getPropertyByName(\"u_maskAlphaCutoff\"), _class2$7), (_descriptor$7 = _applyDecoratedDescriptor(_class$8.prototype, \"influenceLayers\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return SpriteMaskLayer.Everything;\n  }\n}), _descriptor2$7 = _applyDecoratedDescriptor(_class$8.prototype, \"_sprite\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor3$6 = _applyDecoratedDescriptor(_class$8.prototype, \"_width\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return undefined;\n  }\n}), _descriptor4$6 = _applyDecoratedDescriptor(_class$8.prototype, \"_height\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return undefined;\n  }\n}), _descriptor5$6 = _applyDecoratedDescriptor(_class$8.prototype, \"_flipX\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor6$6 = _applyDecoratedDescriptor(_class$8.prototype, \"_flipY\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor7$6 = _applyDecoratedDescriptor(_class$8.prototype, \"_alphaCutoff\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0.5;\n  }\n}), _descriptor8$6 = _applyDecoratedDescriptor(_class$8.prototype, \"_dirtyFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor9$5 = _applyDecoratedDescriptor(_class$8.prototype, \"_spriteChangeFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class$8);\nvar DirtyFlag$3;\n(function (DirtyFlag) {\n  DirtyFlag[DirtyFlag[\"Position\"] = 1] = \"Position\";\n  DirtyFlag[DirtyFlag[\"UV\"] = 2] = \"UV\";\n  DirtyFlag[DirtyFlag[\"All\"] = 3] = \"All\";\n})(DirtyFlag$3 || (DirtyFlag$3 = {}));\n\n/**\n * Vertex element format.\n */\nvar VertexElementFormat;\n(function (VertexElementFormat) {\n  VertexElementFormat[VertexElementFormat[\"Float\"] = 0] = \"Float\";\n  VertexElementFormat[VertexElementFormat[\"Vector2\"] = 1] = \"Vector2\";\n  VertexElementFormat[VertexElementFormat[\"Vector3\"] = 2] = \"Vector3\";\n  VertexElementFormat[VertexElementFormat[\"Vector4\"] = 3] = \"Vector4\";\n  VertexElementFormat[VertexElementFormat[\"Byte4\"] = 4] = \"Byte4\";\n  VertexElementFormat[VertexElementFormat[\"UByte4\"] = 5] = \"UByte4\";\n  VertexElementFormat[VertexElementFormat[\"NormalizedByte4\"] = 6] = \"NormalizedByte4\";\n  VertexElementFormat[VertexElementFormat[\"NormalizedUByte4\"] = 7] = \"NormalizedUByte4\";\n  VertexElementFormat[VertexElementFormat[\"Short2\"] = 8] = \"Short2\";\n  VertexElementFormat[VertexElementFormat[\"UShort2\"] = 9] = \"UShort2\";\n  VertexElementFormat[VertexElementFormat[\"NormalizedShort2\"] = 10] = \"NormalizedShort2\";\n  VertexElementFormat[VertexElementFormat[\"NormalizedUShort2\"] = 11] = \"NormalizedUShort2\";\n  VertexElementFormat[VertexElementFormat[\"Short4\"] = 12] = \"Short4\";\n  VertexElementFormat[VertexElementFormat[\"UShort4\"] = 13] = \"UShort4\";\n  VertexElementFormat[VertexElementFormat[\"NormalizedShort4\"] = 14] = \"NormalizedShort4\";\n  VertexElementFormat[VertexElementFormat[\"NormalizedUShort4\"] = 15] = \"NormalizedUShort4\";\n})(VertexElementFormat || (VertexElementFormat = {}));\n\n/**\n * Buffer usage.\n */\nvar BufferUsage;\n(function (BufferUsage) {\n  BufferUsage[BufferUsage[\"Static\"] = 0] = \"Static\";\n  BufferUsage[BufferUsage[\"Dynamic\"] = 1] = \"Dynamic\";\n  BufferUsage[BufferUsage[\"Stream\"] = 2] = \"Stream\";\n})(BufferUsage || (BufferUsage = {}));\n\n/**\n * Index format.\n */\nvar IndexFormat;\n(function (IndexFormat) {\n  IndexFormat[IndexFormat[\"UInt8\"] = 0] = \"UInt8\";\n  IndexFormat[IndexFormat[\"UInt16\"] = 1] = \"UInt16\";\n  IndexFormat[IndexFormat[\"UInt32\"] = 2] = \"UInt32\";\n})(IndexFormat || (IndexFormat = {}));\n\nvar BufferUtil = /*#__PURE__*/function () {\n  function BufferUtil() {}\n  /**\n   * @internal\n   */\n  BufferUtil._getGLBufferUsage = function _getGLBufferUsage(gl, bufferUsage) {\n    switch (bufferUsage) {\n      case BufferUsage.Static:\n        return gl.STATIC_DRAW;\n      case BufferUsage.Dynamic:\n        return gl.DYNAMIC_DRAW;\n      case BufferUsage.Stream:\n        return gl.STREAM_DRAW;\n    }\n  };\n  BufferUtil._getGLIndexType = function _getGLIndexType(indexFormat) {\n    switch (indexFormat) {\n      case IndexFormat.UInt8:\n        return DataType.UNSIGNED_BYTE;\n      case IndexFormat.UInt16:\n        return DataType.UNSIGNED_SHORT;\n      case IndexFormat.UInt32:\n        return DataType.UNSIGNED_INT;\n    }\n  };\n  BufferUtil._getGLIndexByteCount = function _getGLIndexByteCount(indexFormat) {\n    switch (indexFormat) {\n      case IndexFormat.UInt8:\n        return 1;\n      case IndexFormat.UInt16:\n        return 2;\n      case IndexFormat.UInt32:\n        return 4;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  BufferUtil._getElementInfo = function _getElementInfo(format) {\n    var size;\n    var type;\n    var normalized = false;\n    switch (format) {\n      case VertexElementFormat.Float:\n        size = 1;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Vector2:\n        size = 2;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Vector3:\n        size = 3;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Vector4:\n        size = 4;\n        type = DataType.FLOAT;\n        break;\n      case VertexElementFormat.Byte4:\n        size = 4;\n        type = DataType.BYTE;\n        break;\n      case VertexElementFormat.UByte4:\n        size = 4;\n        type = DataType.UNSIGNED_BYTE;\n        break;\n      case VertexElementFormat.NormalizedByte4:\n        size = 4;\n        type = DataType.BYTE;\n        normalized = true;\n        break;\n      case VertexElementFormat.NormalizedUByte4:\n        size = 4;\n        type = DataType.UNSIGNED_BYTE;\n        normalized = true;\n        break;\n      case VertexElementFormat.Short2:\n        size = 2;\n        type = DataType.SHORT;\n        break;\n      case VertexElementFormat.UShort2:\n        size = 2;\n        type = DataType.UNSIGNED_SHORT;\n        break;\n      case VertexElementFormat.NormalizedShort2:\n        size = 2;\n        type = DataType.SHORT;\n        normalized = true;\n        break;\n      case VertexElementFormat.NormalizedUShort2:\n        size = 2;\n        type = DataType.UNSIGNED_SHORT;\n        normalized = true;\n        break;\n      case VertexElementFormat.Short4:\n        size = 4;\n        type = DataType.SHORT;\n        break;\n      case VertexElementFormat.UShort4:\n        size = 4;\n        type = DataType.UNSIGNED_SHORT;\n        break;\n      case VertexElementFormat.NormalizedShort4:\n        size = 4;\n        type = DataType.SHORT;\n        normalized = true;\n        break;\n      case VertexElementFormat.NormalizedUShort4:\n        size = 4;\n        type = DataType.UNSIGNED_SHORT;\n        normalized = true;\n        break;\n    }\n    return {\n      size: size,\n      type: type,\n      normalized: normalized\n    };\n  };\n  return BufferUtil;\n}();\n\n/**\n * Vertex element.\n */\nvar VertexElement = /*#__PURE__*/function () {\n  /**\n   * Create vertex element.\n   * @param semantic - Input vertex semantic\n   * @param offset - Vertex data byte offset\n   * @param format - Vertex data format\n   * @param bindingIndex - Vertex buffer binding index\n   * @param instanceStepRate - Instance cadence, the number of instances drawn for each vertex in the buffer, non-instance elements must be 0.\n   */\n  function VertexElement(semantic, offset, format, bindingIndex, instanceStepRate) {\n    if (instanceStepRate === void 0) {\n      instanceStepRate = 0;\n    }\n    this._glElementInfo = void 0;\n    this._semantic = void 0;\n    this._offset = void 0;\n    this._format = void 0;\n    this._bindingIndex = void 0;\n    this._instanceStepRate = void 0;\n    this._semantic = semantic;\n    this._offset = offset;\n    this._format = format;\n    this._bindingIndex = bindingIndex;\n    this._glElementInfo = BufferUtil._getElementInfo(this.format);\n    this._instanceStepRate = Math.floor(instanceStepRate);\n  }\n  _createClass(VertexElement, [{\n    key: \"semantic\",\n    get:\n    /**\n     * Vertex semantic.\n     */\n    function get() {\n      return this._semantic;\n    }\n\n    /**\n     * Vertex data byte offset.\n     */\n  }, {\n    key: \"offset\",\n    get: function get() {\n      return this._offset;\n    },\n    set: function set(value) {\n      this._offset = value;\n    }\n\n    /**\n     * Vertex data format.\n     */\n  }, {\n    key: \"format\",\n    get: function get() {\n      return this._format;\n    }\n\n    /**\n     * Vertex buffer binding index.\n     */\n  }, {\n    key: \"bindingIndex\",\n    get: function get() {\n      return this._bindingIndex;\n    },\n    set: function set(value) {\n      this._bindingIndex = value;\n    }\n\n    /**\n     * Instance cadence, the number of instances drawn for each vertex in the buffer, non-instance elements must be 0.\n     */\n  }, {\n    key: \"instanceStepRate\",\n    get: function get() {\n      return this._instanceStepRate;\n    }\n  }]);\n  return VertexElement;\n}();\n\n/**\n * Buffer binding flag.\n */\nvar BufferBindFlag;\n(function (BufferBindFlag) {\n  BufferBindFlag[BufferBindFlag[\"VertexBuffer\"] = 0] = \"VertexBuffer\";\n  BufferBindFlag[BufferBindFlag[\"IndexBuffer\"] = 1] = \"IndexBuffer\";\n})(BufferBindFlag || (BufferBindFlag = {}));\n\n/**\n * Define update strategy when call bufferData/bufferSubData func.\n */\nvar SetDataOptions;\n(function (SetDataOptions) {\n  SetDataOptions[SetDataOptions[\"None\"] = 0] = \"None\";\n  SetDataOptions[SetDataOptions[\"Discard\"] = 1] = \"Discard\";\n})(SetDataOptions || (SetDataOptions = {}));\n\n/**\n * Buffer.\n */\nvar Buffer = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(Buffer, _RefObject);\n  function Buffer(engine, type, byteLengthOrData, bufferUsage) {\n    var _this;\n    if (bufferUsage === void 0) {\n      bufferUsage = BufferUsage.Static;\n    }\n    _this = _RefObject.call(this, engine) || this;\n    _this._glBindTarget = void 0;\n    _this._glBufferUsage = void 0;\n    _this._nativeBuffer = void 0;\n    _this._hardwareRenderer = void 0;\n    _this._type = void 0;\n    _this._byteLength = void 0;\n    _this._bufferUsage = void 0;\n    _this._engine = engine;\n    _this._type = type;\n    _this._bufferUsage = bufferUsage;\n    var hardwareRenderer = engine._hardwareRenderer;\n    var gl = hardwareRenderer.gl;\n    var glBufferUsage = BufferUtil._getGLBufferUsage(gl, bufferUsage);\n    var glBindTarget = type === BufferBindFlag.VertexBuffer ? gl.ARRAY_BUFFER : gl.ELEMENT_ARRAY_BUFFER;\n    _this._nativeBuffer = gl.createBuffer();\n    _this._hardwareRenderer = hardwareRenderer;\n    _this._glBufferUsage = glBufferUsage;\n    _this._glBindTarget = glBindTarget;\n    _this.bind();\n    if (typeof byteLengthOrData === \"number\") {\n      _this._byteLength = byteLengthOrData;\n      gl.bufferData(glBindTarget, byteLengthOrData, glBufferUsage);\n    } else {\n      _this._byteLength = byteLengthOrData.byteLength;\n      gl.bufferData(glBindTarget, byteLengthOrData, glBufferUsage);\n    }\n    gl.bindBuffer(glBindTarget, null);\n    return _this;\n  }\n\n  /**\n   * Bind buffer.\n   */\n  var _proto = Buffer.prototype;\n  _proto.bind = function bind() {\n    var gl = this._hardwareRenderer.gl;\n    gl.bindBuffer(this._glBindTarget, this._nativeBuffer);\n  }\n\n  /**\n   * Set buffer data.\n   * @param data - Input buffer data\n   */;\n  _proto.setData = function setData(data, bufferByteOffset, dataOffset, dataLength, options) {\n    if (bufferByteOffset === void 0) {\n      bufferByteOffset = 0;\n    }\n    if (dataOffset === void 0) {\n      dataOffset = 0;\n    }\n    if (options === void 0) {\n      options = SetDataOptions.None;\n    }\n    var gl = this._hardwareRenderer.gl;\n    var isWebGL2 = this._hardwareRenderer.isWebGL2;\n    var glBindTarget = this._glBindTarget;\n    this.bind();\n    if (options === SetDataOptions.Discard) {\n      gl.bufferData(glBindTarget, this._byteLength, this._glBufferUsage);\n    }\n\n    // TypeArray is BYTES_PER_ELEMENT, unTypeArray is 1\n    var byteSize = data.BYTES_PER_ELEMENT || 1;\n    var dataByteLength = dataLength ? byteSize * dataLength : data.byteLength;\n    if (dataOffset !== 0 || dataByteLength < data.byteLength) {\n      var isArrayBufferView = data.byteOffset !== undefined;\n      if (isWebGL2 && isArrayBufferView) {\n        gl.bufferSubData(glBindTarget, bufferByteOffset, data, dataOffset, dataByteLength / byteSize);\n      } else {\n        var subData = new Uint8Array(isArrayBufferView ? data.buffer : data, dataOffset * byteSize, dataByteLength);\n        gl.bufferSubData(glBindTarget, bufferByteOffset, subData);\n      }\n    } else {\n      gl.bufferSubData(glBindTarget, bufferByteOffset, data);\n    }\n    gl.bindBuffer(glBindTarget, null);\n  }\n\n  /**\n   * Get buffer data.\n   * @param data - Output buffer data\n   */;\n  _proto.getData = function getData(data, bufferByteOffset, dataOffset, dataLength) {\n    if (bufferByteOffset === void 0) {\n      bufferByteOffset = 0;\n    }\n    if (dataOffset === void 0) {\n      dataOffset = 0;\n    }\n    var isWebGL2 = this._hardwareRenderer.isWebGL2;\n    if (isWebGL2) {\n      var gl = this._hardwareRenderer.gl;\n      this.bind();\n      gl.getBufferSubData(this._glBindTarget, bufferByteOffset, data, dataOffset, dataLength);\n    } else {\n      throw \"Buffer is write-only on WebGL1.0 platforms.\";\n    }\n  }\n\n  /**\n   * @override\n   * Destroy.\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    var gl = this._hardwareRenderer.gl;\n    gl.deleteBuffer(this._nativeBuffer);\n    this._nativeBuffer = null;\n    this._hardwareRenderer = null;\n  }\n\n  /**\n   * @deprecated\n   */;\n  _proto.resize = function resize(dataLength) {\n    this.bind();\n    var gl = this._hardwareRenderer.gl;\n    gl.bufferData(this._glBindTarget, dataLength, this._glBufferUsage);\n    this._byteLength = dataLength;\n  };\n  _createClass(Buffer, [{\n    key: \"type\",\n    get:\n    /**\n     * Buffer binding flag.\n     */\n    function get() {\n      return this._type;\n    }\n\n    /**\n     * Byte length.\n     */\n  }, {\n    key: \"byteLength\",\n    get: function get() {\n      return this._byteLength;\n    }\n\n    /**\n     * Buffer usage.\n     */\n  }, {\n    key: \"bufferUsage\",\n    get: function get() {\n      return this._bufferUsage;\n    }\n\n    /**\n     * Create Buffer.\n     * @param engine - Engine\n     * @param type - Buffer binding flag\n     * @param byteLength - Byte length\n     * @param bufferUsage - Buffer usage\n     */\n  }]);\n  return Buffer;\n}(RefObject);\n\n/**\n * Mesh topology.\n */\nvar MeshTopology;\n(function (MeshTopology) {\n  MeshTopology[MeshTopology[\"Points\"] = 0] = \"Points\";\n  MeshTopology[MeshTopology[\"Lines\"] = 1] = \"Lines\";\n  MeshTopology[MeshTopology[\"LineLoop\"] = 2] = \"LineLoop\";\n  MeshTopology[MeshTopology[\"LineStrip\"] = 3] = \"LineStrip\";\n  MeshTopology[MeshTopology[\"Triangles\"] = 4] = \"Triangles\";\n  MeshTopology[MeshTopology[\"TriangleStrip\"] = 5] = \"TriangleStrip\";\n  MeshTopology[MeshTopology[\"TriangleFan\"] = 6] = \"TriangleFan\";\n})(MeshTopology || (MeshTopology = {}));\n\n/**\n * Index buffer binding.\n */\nvar IndexBufferBinding = /*#__PURE__*/function () {\n  /**\n   * Create index buffer binding.\n   * @param buffer - Index buffer\n   * @param format - Index buffer format\n   */\n  function IndexBufferBinding(buffer, format) {\n    this._buffer = void 0;\n    this._format = void 0;\n    this._buffer = buffer;\n    this._format = format;\n  }\n  _createClass(IndexBufferBinding, [{\n    key: \"buffer\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /**\n     * Index buffer.\n     */\n    function get() {\n      return this._buffer;\n    }\n\n    /**\n     * Index buffer format.\n     */\n  }, {\n    key: \"format\",\n    get: function get() {\n      return this._format;\n    }\n  }]);\n  return IndexBufferBinding;\n}();\n\n/**\n * Sub-mesh, mainly contains drawing information.\n */\nvar SubMesh = /** Start drawing offset. */\n\n/** Drawing count. */\n\n/** Drawing topology. */\n\n/**\n * Create a sub-mesh.\n * @param start - Start drawing offset\n * @param count - Drawing count\n * @param topology - Drawing topology\n */\nfunction SubMesh(start, count, topology) {\n  if (start === void 0) {\n    start = 0;\n  }\n  if (count === void 0) {\n    count = 0;\n  }\n  if (topology === void 0) {\n    topology = MeshTopology.Triangles;\n  }\n  this.start = void 0;\n  this.count = void 0;\n  this.topology = void 0;\n  this.start = start;\n  this.count = count;\n  this.topology = topology;\n};\n\n/**\n * Mesh.\n */\nvar Mesh = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(Mesh, _RefObject);\n  /**\n   * Create mesh.\n   * @param engine - Engine\n   * @param name - Mesh name\n   */\n  function Mesh(engine, name) {\n    var _this;\n    _this = _RefObject.call(this, engine) || this;\n    _this.name = void 0;\n    _this.bounds = new BoundingBox();\n    _this._vertexElementMap = {};\n    _this._glIndexType = void 0;\n    _this._glIndexByteCount = void 0;\n    _this._platformPrimitive = void 0;\n    _this._instanceCount = 0;\n    _this._vertexBufferBindings = [];\n    _this._indexBufferBinding = null;\n    _this._vertexElements = [];\n    _this._enableVAO = true;\n    _this._subMeshes = [];\n    _this._updateFlagManager = new UpdateFlagManager();\n    _this.name = name;\n    _this._platformPrimitive = _this._engine._hardwareRenderer.createPlatformPrimitive(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * Add sub-mesh, each sub-mesh can correspond to an independent material.\n   * @param subMesh - Start drawing offset, if the index buffer is set, it means the offset in the index buffer, if not set, it means the offset in the vertex buffer\n   * @returns Sub-mesh\n   */\n  var _proto = Mesh.prototype;\n  _proto.addSubMesh = function addSubMesh(startOrSubMesh, count, topology) {\n    if (topology === void 0) {\n      topology = MeshTopology.Triangles;\n    }\n    if (typeof startOrSubMesh === \"number\") {\n      startOrSubMesh = new SubMesh(startOrSubMesh, count, topology);\n    }\n    this._subMeshes.push(startOrSubMesh);\n    return startOrSubMesh;\n  }\n\n  /**\n   * Remove sub-mesh.\n   * @param subMesh - Sub-mesh needs to be removed\n   */;\n  _proto.removeSubMesh = function removeSubMesh(subMesh) {\n    var subMeshes = this._subMeshes;\n    var index = subMeshes.indexOf(subMesh);\n    if (index !== -1) {\n      subMeshes.splice(index, 1);\n    }\n  }\n\n  /**\n   * Clear all sub-mesh.\n   */;\n  _proto.clearSubMesh = function clearSubMesh() {\n    this._subMeshes.length = 0;\n  }\n\n  /**\n   * Register update flag, update flag will be true if the vertex element changes.\n   * @returns Update flag\n   */;\n  _proto.registerUpdateFlag = function registerUpdateFlag() {\n    return this._updateFlagManager.createFlag(BoolUpdateFlag);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._clearVertexElements = function _clearVertexElements() {\n    this._vertexElements.length = 0;\n    var vertexElementMap = this._vertexElementMap;\n    for (var k in vertexElementMap) {\n      delete vertexElementMap[k];\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addVertexElement = function _addVertexElement(element) {\n    var semantic = element.semantic;\n    this._vertexElementMap[semantic] = element;\n    this._vertexElements.push(element);\n    this._updateFlagManager.dispatch();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._setVertexBufferBinding = function _setVertexBufferBinding(index, binding) {\n    if (this._getRefCount() > 0) {\n      var lastBinding = this._vertexBufferBindings[index];\n      lastBinding && lastBinding._buffer._addRefCount(-1);\n      binding._buffer._addRefCount(1);\n    }\n    this._vertexBufferBindings[index] = binding;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._draw = function _draw(shaderProgram, subMesh) {\n    this._platformPrimitive.draw(shaderProgram, subMesh);\n  }\n\n  /**\n   * @override\n   */;\n  _proto._addRefCount = function _addRefCount(value) {\n    _RefObject.prototype._addRefCount.call(this, value);\n    var vertexBufferBindings = this._vertexBufferBindings;\n    for (var i = 0, n = vertexBufferBindings.length; i < n; i++) {\n      vertexBufferBindings[i]._buffer._addRefCount(value);\n    }\n  }\n\n  /**\n   * @override\n   * Destroy.\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    this._vertexBufferBindings = null;\n    this._indexBufferBinding = null;\n    this._vertexElements = null;\n    this._vertexElementMap = null;\n    this._platformPrimitive.destroy();\n  };\n  _proto._setVertexElements = function _setVertexElements(elements) {\n    this._clearVertexElements();\n    for (var i = 0, n = elements.length; i < n; i++) {\n      this._addVertexElement(elements[i]);\n    }\n  };\n  _proto._setIndexBufferBinding = function _setIndexBufferBinding(binding) {\n    if (binding) {\n      this._indexBufferBinding = binding;\n      this._glIndexType = BufferUtil._getGLIndexType(binding.format);\n      this._glIndexByteCount = BufferUtil._getGLIndexByteCount(binding.format);\n    } else {\n      this._indexBufferBinding = null;\n      this._glIndexType = undefined;\n    }\n  };\n  _createClass(Mesh, [{\n    key: \"subMesh\",\n    get: /** Name. */\n\n    /** The bounding volume of the mesh. */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * First sub-mesh. Rendered using the first material.\n     */\n    function get() {\n      return this._subMeshes[0] || null;\n    }\n\n    /**\n     * A collection of sub-mesh, each sub-mesh can be rendered with an independent material.\n     */\n  }, {\n    key: \"subMeshes\",\n    get: function get() {\n      return this._subMeshes;\n    }\n  }]);\n  return Mesh;\n}(RefObject);\n\n/**\n * Vertex buffer binding.\n */\nvar VertexBufferBinding = /*#__PURE__*/function () {\n  /**\n   * Create vertex buffer.\n   * @param buffer - Vertex buffer\n   * @param stride - Vertex buffer stride\n   */\n  function VertexBufferBinding(buffer, stride) {\n    this._buffer = void 0;\n    this._stride = void 0;\n    this._buffer = buffer;\n    this._stride = stride;\n  }\n  _createClass(VertexBufferBinding, [{\n    key: \"buffer\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /**\n     * Vertex buffer.\n     */\n    function get() {\n      return this._buffer;\n    }\n\n    /**\n     * Vertex buffer stride.\n     */\n  }, {\n    key: \"stride\",\n    get: function get() {\n      return this._stride;\n    }\n  }]);\n  return VertexBufferBinding;\n}();\n\n/**\n * Render buffer depth format enumeration.\n */\nvar RenderBufferDepthFormat;\n(function (RenderBufferDepthFormat) {\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Depth\"] = 0] = \"Depth\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"DepthStencil\"] = 1] = \"DepthStencil\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Stencil\"] = 2] = \"Stencil\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Depth16\"] = 3] = \"Depth16\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Depth24\"] = 4] = \"Depth24\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Depth32\"] = 5] = \"Depth32\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Depth24Stencil8\"] = 6] = \"Depth24Stencil8\";\n  RenderBufferDepthFormat[RenderBufferDepthFormat[\"Depth32Stencil8\"] = 7] = \"Depth32Stencil8\";\n})(RenderBufferDepthFormat || (RenderBufferDepthFormat = {}));\n\n/**\n * Define the face of the cube texture.\n */\nvar TextureCubeFace;\n(function (TextureCubeFace) {\n  TextureCubeFace[TextureCubeFace[\"PositiveX\"] = 0] = \"PositiveX\";\n  TextureCubeFace[TextureCubeFace[\"NegativeX\"] = 1] = \"NegativeX\";\n  TextureCubeFace[TextureCubeFace[\"PositiveY\"] = 2] = \"PositiveY\";\n  TextureCubeFace[TextureCubeFace[\"NegativeY\"] = 3] = \"NegativeY\";\n  TextureCubeFace[TextureCubeFace[\"PositiveZ\"] = 4] = \"PositiveZ\";\n  TextureCubeFace[TextureCubeFace[\"NegativeZ\"] = 5] = \"NegativeZ\";\n})(TextureCubeFace || (TextureCubeFace = {}));\n\n/**\n * The filter mode of the texture.\n */\nvar TextureFilterMode;\n(function (TextureFilterMode) {\n  TextureFilterMode[TextureFilterMode[\"Point\"] = 0] = \"Point\";\n  TextureFilterMode[TextureFilterMode[\"Bilinear\"] = 1] = \"Bilinear\";\n  TextureFilterMode[TextureFilterMode[\"Trilinear\"] = 2] = \"Trilinear\";\n})(TextureFilterMode || (TextureFilterMode = {}));\n\n/**\n * Texture format enumeration.\n */\nvar TextureFormat;\n(function (TextureFormat) {\n  TextureFormat[TextureFormat[\"R8G8B8\"] = 0] = \"R8G8B8\";\n  TextureFormat[TextureFormat[\"R8G8B8A8\"] = 1] = \"R8G8B8A8\";\n  TextureFormat[TextureFormat[\"R4G4B4A4\"] = 2] = \"R4G4B4A4\";\n  TextureFormat[TextureFormat[\"R5G5B5A1\"] = 3] = \"R5G5B5A1\";\n  TextureFormat[TextureFormat[\"R5G6B5\"] = 4] = \"R5G6B5\";\n  TextureFormat[TextureFormat[\"Alpha8\"] = 5] = \"Alpha8\";\n  TextureFormat[TextureFormat[\"LuminanceAlpha\"] = 6] = \"LuminanceAlpha\";\n  TextureFormat[TextureFormat[\"R16G16B16A16\"] = 7] = \"R16G16B16A16\";\n  TextureFormat[TextureFormat[\"R32G32B32A32\"] = 8] = \"R32G32B32A32\";\n  TextureFormat[TextureFormat[\"DXT1\"] = 9] = \"DXT1\";\n  TextureFormat[TextureFormat[\"DXT5\"] = 10] = \"DXT5\";\n  TextureFormat[TextureFormat[\"ETC1_RGB\"] = 11] = \"ETC1_RGB\";\n  TextureFormat[TextureFormat[\"ETC2_RGB\"] = 12] = \"ETC2_RGB\";\n  TextureFormat[TextureFormat[\"ETC2_RGBA5\"] = 13] = \"ETC2_RGBA5\";\n  TextureFormat[TextureFormat[\"ETC2_RGBA8\"] = 14] = \"ETC2_RGBA8\";\n  TextureFormat[TextureFormat[\"PVRTC_RGB2\"] = 15] = \"PVRTC_RGB2\";\n  TextureFormat[TextureFormat[\"PVRTC_RGBA2\"] = 16] = \"PVRTC_RGBA2\";\n  TextureFormat[TextureFormat[\"PVRTC_RGB4\"] = 17] = \"PVRTC_RGB4\";\n  TextureFormat[TextureFormat[\"PVRTC_RGBA4\"] = 18] = \"PVRTC_RGBA4\";\n  TextureFormat[TextureFormat[\"ASTC_4x4\"] = 19] = \"ASTC_4x4\";\n  TextureFormat[TextureFormat[\"ASTC_5x5\"] = 20] = \"ASTC_5x5\";\n  TextureFormat[TextureFormat[\"ASTC_6x6\"] = 21] = \"ASTC_6x6\";\n  TextureFormat[TextureFormat[\"ASTC_8x8\"] = 22] = \"ASTC_8x8\";\n  TextureFormat[TextureFormat[\"ASTC_10x10\"] = 23] = \"ASTC_10x10\";\n  TextureFormat[TextureFormat[\"ASTC_12x12\"] = 24] = \"ASTC_12x12\";\n  TextureFormat[TextureFormat[\"Depth\"] = 25] = \"Depth\";\n  TextureFormat[TextureFormat[\"DepthStencil\"] = 26] = \"DepthStencil\";\n  TextureFormat[TextureFormat[\"Stencil\"] = 27] = \"Stencil\";\n  TextureFormat[TextureFormat[\"Depth16\"] = 28] = \"Depth16\";\n  TextureFormat[TextureFormat[\"Depth24\"] = 29] = \"Depth24\";\n  TextureFormat[TextureFormat[\"Depth32\"] = 30] = \"Depth32\";\n  TextureFormat[TextureFormat[\"Depth24Stencil8\"] = 31] = \"Depth24Stencil8\";\n  TextureFormat[TextureFormat[\"Depth32Stencil8\"] = 32] = \"Depth32Stencil8\";\n})(TextureFormat || (TextureFormat = {}));\n\n/**\n * Wrapping mode of the texture.\n */\nvar TextureWrapMode;\n(function (TextureWrapMode) {\n  TextureWrapMode[TextureWrapMode[\"Clamp\"] = 0] = \"Clamp\";\n  TextureWrapMode[TextureWrapMode[\"Repeat\"] = 1] = \"Repeat\";\n  TextureWrapMode[TextureWrapMode[\"Mirror\"] = 2] = \"Mirror\";\n})(TextureWrapMode || (TextureWrapMode = {}));\n\n/**\n * The render target used for off-screen rendering.\n */\nvar RenderTarget = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(RenderTarget, _EngineObject);\n  /**\n   * @internal\n   */\n  function RenderTarget(engine, width, height, renderTexture, depth, antiAliasing) {\n    var _this;\n    if (depth === void 0) {\n      depth = RenderBufferDepthFormat.Depth;\n    }\n    if (antiAliasing === void 0) {\n      antiAliasing = 1;\n    }\n    _this = _EngineObject.call(this, engine) || this;\n    _this._platformRenderTarget = void 0;\n    _this._depth = void 0;\n    _this._antiAliasing = void 0;\n    _this._autoGenerateMipmaps = true;\n    _this._width = void 0;\n    _this._height = void 0;\n    _this._colorTextures = void 0;\n    _this._depthTexture = void 0;\n    _this._width = width;\n    _this._height = height;\n    _this._antiAliasing = antiAliasing;\n    _this._depth = depth;\n    if (renderTexture) {\n      _this._colorTextures = renderTexture instanceof Array ? renderTexture.slice() : [renderTexture];\n    } else {\n      _this._colorTextures = [];\n    }\n    if (depth instanceof Texture) {\n      _this._depthTexture = depth;\n    }\n    _this._platformRenderTarget = engine._hardwareRenderer.createPlatformRenderTarget(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   *\n   * Get the render color texture by index.\n   * @param index\n   */\n  var _proto = RenderTarget.prototype;\n  _proto.getColorTexture = function getColorTexture(index) {\n    if (index === void 0) {\n      index = 0;\n    }\n    return this._colorTextures[index];\n  }\n\n  /**\n   * Generate the mipmap of each attachment texture of the renderTarget according to the configuration.\n   */;\n  _proto.generateMipmaps = function generateMipmaps() {\n    if (this._autoGenerateMipmaps) {\n      var _colorTextures = this._colorTextures;\n      for (var i = 0, n = _colorTextures.length; i < n; i++) {\n        var _colorTexture = _colorTextures[i];\n        _colorTexture.generateMipmaps();\n      }\n      this._depthTexture && this._depthTexture.generateMipmaps();\n    }\n  }\n\n  /**\n   * Destroy render target.\n   */;\n  _proto.destroy = function destroy() {\n    this._platformRenderTarget.destroy();\n    this._colorTextures.length = 0;\n    this._depthTexture = null;\n    this._depth = null;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._setRenderTargetInfo = function _setRenderTargetInfo(faceIndex, mipLevel) {\n    this._platformRenderTarget.setRenderTargetInfo(faceIndex, mipLevel);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._blitRenderTarget = function _blitRenderTarget() {\n    this._platformRenderTarget.blitRenderTarget();\n  };\n  _createClass(RenderTarget, [{\n    key: \"autoGenerateMipmaps\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Whether to automatically generate multi-level textures.\n     */\n    function get() {\n      return this._autoGenerateMipmaps;\n    },\n    set: function set(value) {\n      this._autoGenerateMipmaps = value;\n    }\n\n    /**\n     * Render target width.\n     */\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this._width;\n    }\n\n    /**\n     * Render target height.\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    }\n\n    /**\n     * Render color texture count.\n     */\n  }, {\n    key: \"colorTextureCount\",\n    get: function get() {\n      return this._colorTextures.length;\n    }\n\n    /**\n     * Depth texture.\n     */\n  }, {\n    key: \"depthTexture\",\n    get: function get() {\n      return this._depthTexture;\n    }\n\n    /**\n     * Anti-aliasing level.\n     * @remarks If the anti-aliasing level set is greater than the maximum level supported by the hardware, the maximum level of the hardware will be used.\n     */\n  }, {\n    key: \"antiAliasing\",\n    get: function get() {\n      return this._antiAliasing;\n    }\n\n    /**\n     * Create a render target through color texture and depth format.\n     * @param engine - Define the engine to use for this off-screen rendering\n     * @param width - Render target width\n     * @param height - Render target height\n     * @param colorTexture - Render color texture\n     * @param depthFormat - Depth format. default RenderBufferDepthFormat.Depth, engine will automatically select the supported precision\n     * @param antiAliasing - Anti-aliasing level, default is 1\n     */\n  }]);\n  return RenderTarget;\n}(EngineObject);\n\n/**\n * Two-dimensional texture.\n */\nvar Texture2D = /*#__PURE__*/function (_Texture) {\n  _inheritsLoose(Texture2D, _Texture);\n  /**\n   * Create Texture2D.\n   * @param engine - Define the engine to use to render this texture\n   * @param width - Texture width\n   * @param height - Texture height\n   * @param format - Texture format. default  `TextureFormat.R8G8B8A8`\n   * @param mipmap - Whether to use multi-level texture\n   */\n  function Texture2D(engine, width, height, format, mipmap) {\n    var _this;\n    if (format === void 0) {\n      format = TextureFormat.R8G8B8A8;\n    }\n    if (mipmap === void 0) {\n      mipmap = true;\n    }\n    _this = _Texture.call(this, engine) || this;\n    _this._mipmap = mipmap;\n    _this._width = width;\n    _this._height = height;\n    _this._format = format;\n    _this._mipmapCount = _this._getMipmapCount();\n    _this._platformTexture = engine._hardwareRenderer.createPlatformTexture2D(_assertThisInitialized(_this));\n    _this.filterMode = TextureFilterMode.Bilinear;\n    _this.wrapModeU = _this.wrapModeV = TextureWrapMode.Repeat;\n    return _this;\n  }\n\n  /**\n   * Setting pixels data through color buffer data, designated area and texture mipmapping level,it's also applicable to compressed formats.\n   * @remarks If it is the WebGL1.0 platform and the texture format is compressed, the first upload must be filled with textures.\n   * @param colorBuffer - Color buffer data\n   * @param mipLevel - Texture mipmapping level\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Data width. if it's empty, width is the width corresponding to mipLevel minus x , width corresponding to mipLevel is Math.max(1, this.width >> mipLevel)\n   * @param height - Data height. if it's empty, height is the height corresponding to mipLevel minus y , height corresponding to mipLevel is Math.max(1, this.height >> mipLevel)\n   */\n  var _proto = Texture2D.prototype;\n  _proto.setPixelBuffer = function setPixelBuffer(colorBuffer, mipLevel, x, y, width, height) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._platformTexture.setPixelBuffer(colorBuffer, mipLevel, x, y, width, height);\n  }\n\n  /**\n   * Setting pixels data through TexImageSource, designated area and texture mipmapping level.\n   * @param imageSource - The source of texture\n   * @param mipLevel - Texture mipmapping level\n   * @param flipY - Whether to flip the Y axis\n   * @param premultiplyAlpha - Whether to premultiply the transparent channel\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   */;\n  _proto.setImageSource = function setImageSource(imageSource, mipLevel, flipY, premultiplyAlpha, x, y) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    if (flipY === void 0) {\n      flipY = false;\n    }\n    if (premultiplyAlpha === void 0) {\n      premultiplyAlpha = false;\n    }\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._platformTexture.setImageSource(imageSource, mipLevel, flipY, premultiplyAlpha, x, y);\n  }\n\n  /**\n   * Get pixel color buffer.\n   * @param out - Color buffer\n   */;\n  _proto.getPixelBuffer = function getPixelBuffer(xOrMipLevelOrOut, yOrMipLevel, width, height, mipLevelOrOut, out) {\n    var argsLength = arguments.length;\n    if (argsLength === 1) {\n      this._platformTexture.getPixelBuffer(0, 0, this._width, this._height, 0, xOrMipLevelOrOut);\n    } else if (argsLength === 2) {\n      this._platformTexture.getPixelBuffer(0, 0, this._width >> xOrMipLevelOrOut, this._height >> xOrMipLevelOrOut, xOrMipLevelOrOut, yOrMipLevel);\n    } else if (argsLength === 5) {\n      this._platformTexture.getPixelBuffer(xOrMipLevelOrOut, yOrMipLevel, width, height, 0, mipLevelOrOut);\n    } else if (argsLength === 6) {\n      this._platformTexture.getPixelBuffer(xOrMipLevelOrOut, yOrMipLevel, width, height, mipLevelOrOut, out);\n    }\n  };\n  return Texture2D;\n}(Texture);\n\n/**\n * Two-dimensional texture array.\n */\nvar Texture2DArray = /*#__PURE__*/function (_Texture) {\n  _inheritsLoose(Texture2DArray, _Texture);\n  /**\n   * Create Texture2D Array.\n   * @param engine - Define the engine to use to render this texture\n   * @param width - Texture width\n   * @param height - Texture height\n   * @param length - Texture length\n   * @param format - Texture format. default `TextureFormat.R8G8B8A8`\n   * @param mipmap - Whether to use multi-level texture\n   */\n  function Texture2DArray(engine, width, height, length, format, mipmap) {\n    var _this;\n    if (format === void 0) {\n      format = TextureFormat.R8G8B8A8;\n    }\n    if (mipmap === void 0) {\n      mipmap = true;\n    }\n    _this = _Texture.call(this, engine) || this;\n    _this._length = void 0;\n    _this._mipmap = mipmap;\n    _this._width = width;\n    _this._height = height;\n    _this._length = length;\n    _this._format = format;\n    _this._mipmapCount = _this._getMipmapCount();\n    _this._platformTexture = engine._hardwareRenderer.createPlatformTexture2DArray(_assertThisInitialized(_this));\n    _this.filterMode = TextureFilterMode.Bilinear;\n    _this.wrapModeU = _this.wrapModeV = TextureWrapMode.Repeat;\n    return _this;\n  }\n\n  /**\n   * Setting pixels data through color buffer data, designated area and texture mipmapping level,it's also applicable to compressed formats.\n   * @remarks If it is the WebGL1.0 platform and the texture format is compressed, the first upload must be filled with textures.\n   * @param offsetIndex - The texture array element offset index\n   * @param colorBuffer - Color buffer data\n   * @param mipLevel - Texture mipmapping level\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Data width. if it's empty, width is the width corresponding to mipLevel minus x , width corresponding to mipLevel is Math.max(1, this.width >> mipLevel)\n   * @param height - Data height. if it's empty, height is the height corresponding to mipLevel minus y , height corresponding to mipLevel is Math.max(1, this.height >> mipLevel)\n   * @param length - Data length. if it's empty, length is the length of Texture2DArray.length\n   */\n  var _proto = Texture2DArray.prototype;\n  _proto.setPixelBuffer = function setPixelBuffer(offsetIndex, colorBuffer, mipLevel, x, y, width, height, length) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._platformTexture.setPixelBuffer(offsetIndex, colorBuffer, mipLevel, x, y, width, height, length);\n  }\n\n  /**\n   * Setting pixels data through TexImageSource, designated area and texture mipmapping level.\n   * @param elementIndex - The texture array element index\n   * @param imageSource - The source of texture\n   * @param mipLevel - Texture mipmapping level\n   * @param flipY - Whether to flip the Y axis\n   * @param premultiplyAlpha - Whether to premultiply the transparent channel\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   */;\n  _proto.setImageSource = function setImageSource(elementIndex, imageSource, mipLevel, flipY, premultiplyAlpha, x, y) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    if (flipY === void 0) {\n      flipY = false;\n    }\n    if (premultiplyAlpha === void 0) {\n      premultiplyAlpha = false;\n    }\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._platformTexture.setImageSource(elementIndex, imageSource, mipLevel, flipY, premultiplyAlpha, x, y);\n  }\n\n  /**\n   * Get pixel color buffer.\n   * @param elementIndex - The texture array element index\n   * @param out - Color buffer\n   */;\n  _proto.getPixelBuffer = function getPixelBuffer(elementIndex, xOrMipLevelOrOut, yOrMipLevel, width, height, mipLevelOrOut, out) {\n    var argsLength = arguments.length;\n    if (argsLength === 1) {\n      this._platformTexture.getPixelBuffer(elementIndex, 0, 0, this._width, this._height, 0, xOrMipLevelOrOut);\n    } else if (argsLength === 2) {\n      this._platformTexture.getPixelBuffer(elementIndex, 0, 0, this._width >> xOrMipLevelOrOut, this._height >> xOrMipLevelOrOut, xOrMipLevelOrOut, yOrMipLevel);\n    } else if (argsLength === 5) {\n      this._platformTexture.getPixelBuffer(elementIndex, xOrMipLevelOrOut, yOrMipLevel, width, height, 0, mipLevelOrOut);\n    } else if (argsLength === 6) {\n      this._platformTexture.getPixelBuffer(elementIndex, xOrMipLevelOrOut, yOrMipLevel, width, height, mipLevelOrOut, out);\n    }\n  };\n  _createClass(Texture2DArray, [{\n    key: \"length\",\n    get:\n    /**\n     * The length of the texture.\n     */\n    function get() {\n      return this._length;\n    }\n  }]);\n  return Texture2DArray;\n}(Texture);\n\n/**\n * Cube texture.\n */\nvar TextureCube = /*#__PURE__*/function (_Texture) {\n  _inheritsLoose(TextureCube, _Texture);\n  /**\n   * Create TextureCube.\n   * @param engine - Define the engine to use to render this texture\n   * @param size - Texture size. texture width must be equal to height in cube texture\n   * @param format - Texture format,default TextureFormat.R8G8B8A8\n   * @param mipmap - Whether to use multi-level texture\n   */\n  function TextureCube(engine, size, format, mipmap) {\n    var _this;\n    if (format === void 0) {\n      format = TextureFormat.R8G8B8A8;\n    }\n    if (mipmap === void 0) {\n      mipmap = true;\n    }\n    _this = _Texture.call(this, engine) || this;\n    _this._mipmap = mipmap;\n    _this._width = size;\n    _this._height = size;\n    _this._format = format;\n    _this._mipmapCount = _this._getMipmapCount();\n    _this._platformTexture = engine._hardwareRenderer.createPlatformTextureCube(_assertThisInitialized(_this));\n    _this.filterMode = TextureFilterMode.Bilinear;\n    _this.wrapModeU = _this.wrapModeV = TextureWrapMode.Clamp;\n    return _this;\n  }\n\n  /**\n   * Setting pixels data through cube face,color buffer data, designated area and texture mipmapping level,it's also applicable to compressed formats.\n   * @remarks When compressed texture is in WebGL1, the texture must be filled first before writing the sub-region\n   * @param face - Cube face\n   * @param colorBuffer - Color buffer data\n   * @param mipLevel - Texture mipmapping level\n   * @param x - X coordinate of area start\n   * @param y -  Y coordinate of area start\n   * @param width - Data width.if it's empty, width is the width corresponding to mipLevel minus x , width corresponding to mipLevel is Math.max(1, this.width >> mipLevel)\n   * @param height - Data height.if it's empty, height is the height corresponding to mipLevel minus y , height corresponding to mipLevel is Math.max(1, this.height >> mipLevel)\n   */\n  var _proto = TextureCube.prototype;\n  _proto.setPixelBuffer = function setPixelBuffer(face, colorBuffer, mipLevel, x, y, width, height) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._platformTexture.setPixelBuffer(face, colorBuffer, mipLevel, x, y, width, height);\n  }\n\n  /**\n   * Setting pixels data through cube face, TexImageSource, designated area and texture mipmapping level.\n   * @param face - Cube face\n   * @param imageSource - The source of texture\n   * @param mipLevel - Texture mipmapping level\n   * @param flipY - Whether to flip the Y axis\n   * @param premultiplyAlpha - Whether to premultiply the transparent channel\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   */;\n  _proto.setImageSource = function setImageSource(face, imageSource, mipLevel, flipY, premultiplyAlpha, x, y) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    if (flipY === void 0) {\n      flipY = false;\n    }\n    if (premultiplyAlpha === void 0) {\n      premultiplyAlpha = false;\n    }\n    if (x === void 0) {\n      x = 0;\n    }\n    if (y === void 0) {\n      y = 0;\n    }\n    this._platformTexture.setImageSource(face, imageSource, mipLevel, flipY, premultiplyAlpha, x, y);\n  }\n\n  /**\n   * Get pixel color buffer.\n   * @param out - Color buffer\n   */;\n  _proto.getPixelBuffer = function getPixelBuffer(face, xOrMipLevelOrOut, yOrMipLevel, width, height, mipLevelOrOut, out) {\n    var argsLength = arguments.length;\n    if (argsLength === 2) {\n      this._platformTexture.getPixelBuffer(face, 0, 0, this._width, this._height, 0, xOrMipLevelOrOut);\n    } else if (argsLength === 3) {\n      this._platformTexture.getPixelBuffer(face, 0, 0, this._width >> xOrMipLevelOrOut, this._height >> xOrMipLevelOrOut, xOrMipLevelOrOut, yOrMipLevel);\n    } else if (argsLength === 6) {\n      this._platformTexture.getPixelBuffer(face, xOrMipLevelOrOut, yOrMipLevel, width, height, 0, mipLevelOrOut);\n    } else if (argsLength === 7) {\n      this._platformTexture.getPixelBuffer(face, xOrMipLevelOrOut, yOrMipLevel, width, height, mipLevelOrOut, out);\n    }\n  };\n  return TextureCube;\n}(Texture);\n\n/**\n * @internal\n */\nvar BlendShapeManager = /*#__PURE__*/function () {\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  function BlendShapeManager(engine, modelMesh) {\n    this._blendShapeCount = 0;\n    this._blendShapes = [];\n    this._blendShapeNames = void 0;\n    this._layoutDirtyListener = new ListenerUpdateFlag();\n    this._subDataDirtyFlags = [];\n    this._vertexTexture = void 0;\n    this._vertexBuffers = [];\n    this._vertices = void 0;\n    this._useBlendNormal = false;\n    this._useBlendTangent = false;\n    this._vertexElementCount = 0;\n    this._vertexElementOffset = void 0;\n    this._storeInVertexBufferInfo = [];\n    this._maxCountSingleVertexBuffer = 0;\n    this._engine = void 0;\n    this._modelMesh = void 0;\n    this._lastCreateHostInfo = new Vector3(0, 0, 0);\n    this._canUseTextureStoreData = true;\n    this._dataTextureInfo = new Vector3();\n    this._engine = engine;\n    this._modelMesh = modelMesh;\n    this._canUseTextureStoreData = this._engine._hardwareRenderer.capability.canUseFloatTextureBlendShape;\n    this._layoutDirtyListener.listener = this._updateLayoutChange.bind(this);\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = BlendShapeManager.prototype;\n  _proto._addBlendShape = function _addBlendShape(blendShape) {\n    this._blendShapes.push(blendShape);\n    this._blendShapeCount++;\n    blendShape._addLayoutChangeFlag(this._layoutDirtyListener);\n    this._updateLayoutChange(blendShape);\n    this._subDataDirtyFlags.push(blendShape._createSubDataDirtyFlag());\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._clearBlendShapes = function _clearBlendShapes() {\n    this._useBlendNormal = false;\n    this._useBlendTangent = false;\n    this._vertexElementCount = 0;\n    this._blendShapes.length = 0;\n    this._blendShapeCount = 0;\n    this._layoutDirtyListener.clearFromManagers();\n    var subDataDirtyFlags = this._subDataDirtyFlags;\n    for (var i = 0, n = subDataDirtyFlags.length; i < n; i++) {\n      subDataDirtyFlags[i].destroy();\n    }\n    subDataDirtyFlags.length = 0;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._updateShaderData = function _updateShaderData(shaderData, skinnedMeshRenderer) {\n    var blendShapeCount = this._blendShapeCount;\n    if (blendShapeCount > 0) {\n      shaderData.enableMacro(BlendShapeManager._blendShapeMacro);\n      if (this._useTextureMode()) {\n        shaderData.enableMacro(BlendShapeManager._blendShapeTextureMacro);\n        shaderData.setTexture(BlendShapeManager._blendShapeTextureProperty, this._vertexTexture);\n        shaderData.setVector3(BlendShapeManager._blendShapeTextureInfoProperty, this._dataTextureInfo);\n        shaderData.setFloatArray(BlendShapeManager._blendShapeWeightsProperty, skinnedMeshRenderer.blendShapeWeights);\n      } else {\n        var maxBlendCount = this._getVertexBufferModeSupportCount();\n        if (blendShapeCount > maxBlendCount) {\n          var condensedBlendShapeWeights = skinnedMeshRenderer._condensedBlendShapeWeights;\n          if (!condensedBlendShapeWeights) {\n            condensedBlendShapeWeights = new Float32Array(maxBlendCount);\n            skinnedMeshRenderer._condensedBlendShapeWeights = condensedBlendShapeWeights;\n          }\n          this._filterCondensedBlendShapeWeights(skinnedMeshRenderer.blendShapeWeights, condensedBlendShapeWeights);\n          shaderData.setFloatArray(BlendShapeManager._blendShapeWeightsProperty, condensedBlendShapeWeights);\n          this._modelMesh._enableVAO = false;\n          blendShapeCount = maxBlendCount;\n        } else {\n          shaderData.setFloatArray(BlendShapeManager._blendShapeWeightsProperty, skinnedMeshRenderer.blendShapeWeights);\n          this._modelMesh._enableVAO = true;\n        }\n        shaderData.disableMacro(BlendShapeManager._blendShapeTextureMacro);\n      }\n      shaderData.enableMacro(\"OASIS_BLENDSHAPE_COUNT\", blendShapeCount.toString());\n      if (this._useBlendNormal) {\n        shaderData.enableMacro(BlendShapeManager._blendShapeNormalMacro);\n      } else {\n        shaderData.disableMacro(BlendShapeManager._blendShapeNormalMacro);\n      }\n      if (this._useBlendTangent) {\n        shaderData.enableMacro(BlendShapeManager._blendShapeTangentMacro);\n      } else {\n        shaderData.disableMacro(BlendShapeManager._blendShapeTangentMacro);\n      }\n    } else {\n      shaderData.disableMacro(BlendShapeManager._blendShapeMacro);\n      shaderData.disableMacro(\"OASIS_BLENDSHAPE_COUNT\");\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._useTextureMode = function _useTextureMode() {\n    if (!this._canUseTextureStoreData) {\n      return false;\n    }\n    return this._blendShapeCount > this._getVertexBufferModeSupportCount();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._layoutOrCountChange = function _layoutOrCountChange() {\n    var last = this._lastCreateHostInfo;\n    return last.x !== this._blendShapeCount || !!last.y !== this._useBlendNormal || !!last.z !== this._useBlendTangent;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._vertexElementsNeedUpdate = function _vertexElementsNeedUpdate() {\n    var maxSupportCount = this._getVertexBufferModeSupportCount();\n    var info = this._lastCreateHostInfo;\n    return Math.min(info.x, maxSupportCount) !== Math.min(this._blendShapeCount, maxSupportCount) || !!info.y !== this._useBlendNormal || !!info.z !== this._useBlendTangent;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._needUpdateData = function _needUpdateData() {\n    var subDataDirtyFlags = this._subDataDirtyFlags;\n    for (var i = 0, n = subDataDirtyFlags.length; i < n; i++) {\n      if (subDataDirtyFlags[i].flag) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addVertexElements = function _addVertexElements(modelMesh) {\n    var offset = 0;\n    this._vertexElementOffset = modelMesh._vertexElements.length;\n    for (var i = 0, n = Math.min(this._blendShapeCount, this._getVertexBufferModeSupportCount()); i < n; i++) {\n      modelMesh._addVertexElement(new VertexElement(\"POSITION_BS\" + i, offset, VertexElementFormat.Vector3, 1));\n      offset += 12;\n      if (this._useBlendNormal) {\n        modelMesh._addVertexElement(new VertexElement(\"NORMAL_BS\" + i, offset, VertexElementFormat.Vector3, 1));\n        offset += 12;\n      }\n      if (this._useBlendTangent) {\n        modelMesh._addVertexElement(new VertexElement(\"TANGENT_BS\" + i, offset, VertexElementFormat.Vector3, 1));\n        offset += 12;\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._update = function _update(vertexCountChange, noLongerAccessible) {\n    var vertexCount = this._modelMesh.vertexCount;\n    var useTexture = this._useTextureMode();\n    var createHost = this._layoutOrCountChange() || vertexCountChange;\n    if (createHost) {\n      if (useTexture) {\n        this._createTextureArray(vertexCount);\n      } else {\n        this._createVertexBuffers(vertexCount, noLongerAccessible);\n      }\n      this._lastCreateHostInfo.set(this._blendShapeCount, +this._useBlendNormal, +this._useBlendTangent);\n    }\n    if (this._needUpdateData()) {\n      if (useTexture) {\n        this._updateTextureArray(vertexCount, createHost);\n      } else {\n        this._updateVertexBuffers(vertexCount, createHost);\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._releaseMemoryCache = function _releaseMemoryCache() {\n    var blendShapes = this._blendShapes;\n    var blendShapeCount = blendShapes.length;\n    var blendShapeNamesMap = new Array(blendShapeCount);\n    for (var i = 0; i < blendShapeCount; i++) {\n      blendShapeNamesMap[i] = blendShapes[i].name;\n    }\n    this._blendShapeNames = blendShapeNamesMap;\n    this._layoutDirtyListener.destroy();\n    var dataChangedFlags = this._subDataDirtyFlags;\n    for (var _i = 0, n = dataChangedFlags.length; _i < n; _i++) {\n      dataChangedFlags[_i].destroy();\n    }\n    this._layoutDirtyListener = null;\n    this._subDataDirtyFlags = null;\n    this._blendShapes = null;\n    this._vertices = null;\n  };\n  _proto._createVertexBuffers = function _createVertexBuffers(vertexCount, noLongerAccessible) {\n    var engine = this._engine,\n      modelMesh = this._modelMesh,\n      blendShapeCount = this._blendShapeCount,\n      vertexBuffers = this._vertexBuffers;\n    var vertexFloatCount = this._vertexElementCount * 3;\n    var vertexByteCount = vertexFloatCount * 4;\n    var maxCountSingleBuffer = Math.floor(255 / vertexByteCount); // 255: Attribute MaxStride\n    var bufferCount = Math.ceil(blendShapeCount / maxCountSingleBuffer);\n    var floatCount = vertexFloatCount * vertexCount * Math.min(maxCountSingleBuffer, blendShapeCount);\n    vertexBuffers.length = bufferCount;\n    this._vertices = new Float32Array(floatCount);\n    this._maxCountSingleVertexBuffer = maxCountSingleBuffer;\n    this._storeInVertexBufferInfo.length = blendShapeCount;\n    for (var i = 0; i < bufferCount; i++) {\n      var lastIndex = bufferCount - 1;\n      var containCount = i === lastIndex ? blendShapeCount - lastIndex * maxCountSingleBuffer : maxCountSingleBuffer;\n      var stride = containCount * vertexByteCount;\n      var byteLength = stride * vertexCount;\n      var usage = noLongerAccessible ? BufferUsage.Static : BufferUsage.Dynamic;\n      var blendShapeBuffer = new Buffer(engine, BufferBindFlag.VertexBuffer, byteLength, usage);\n      modelMesh._setVertexBufferBinding(i + 1, new VertexBufferBinding(blendShapeBuffer, stride));\n      vertexBuffers[i] = blendShapeBuffer;\n    }\n  };\n  _proto._createTextureArray = function _createTextureArray(vertexCount) {\n    var maxTextureSize = this._engine._hardwareRenderer.capability.maxTextureSize;\n    var vertexPixelStride = this._vertexElementCount;\n    var textureWidth = vertexPixelStride * vertexCount;\n    var textureHeight = 1;\n    if (textureWidth > maxTextureSize) {\n      textureHeight = Math.ceil(textureWidth / maxTextureSize);\n      textureWidth = maxTextureSize;\n    }\n    var blendShapeDataTexture = this._vertexTexture;\n    var blendShapeCount = this._blendShapes.length;\n    blendShapeDataTexture && blendShapeDataTexture.destroy();\n    blendShapeDataTexture = new Texture2DArray(this._engine, textureWidth, textureHeight, blendShapeCount, TextureFormat.R32G32B32A32, false);\n    blendShapeDataTexture.filterMode = TextureFilterMode.Point;\n    this._vertices = new Float32Array(blendShapeCount * textureWidth * textureHeight * 4);\n    this._vertexTexture = blendShapeDataTexture;\n    this._dataTextureInfo.set(vertexPixelStride, textureWidth, textureHeight);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._updateVertexBuffers = function _updateVertexBuffers(vertexCount, force) {\n    var blendShapes = this._blendShapes,\n      maxCountSingleBuffer = this._maxCountSingleVertexBuffer;\n    var vertices = this._vertices,\n      vertexBuffers = this._vertexBuffers,\n      storeInfos = this._storeInVertexBufferInfo;\n    var subDataDirtyFlags = this._subDataDirtyFlags;\n    var blendShapeFloatStride = this._vertexElementCount * 3;\n    var blendShapeByteStride = blendShapeFloatStride * 4;\n\n    // @todo: should fix bug when dataChangedFlag is true\n    for (var i = 0, n = blendShapes.length; i < n; i++) {\n      var dataChangedFlag = subDataDirtyFlags[i];\n      if (force || dataChangedFlag.flag) {\n        var frames = blendShapes[i].frames;\n        var frameCount = frames.length;\n        var endFrame = frames[frameCount - 1];\n        if (frameCount > 0 && endFrame.deltaPositions.length !== vertexCount) {\n          throw \"BlendShape frame deltaPositions length must same with mesh vertexCount.\";\n        }\n        var bufferIndex = Math.floor(i / maxCountSingleBuffer);\n        var indexInBuffer = i % maxCountSingleBuffer;\n        var buffer = vertexBuffers[bufferIndex];\n        var bufferFloatStride = buffer.byteLength / (vertexCount * 4);\n        var offset = indexInBuffer * blendShapeFloatStride;\n        var storeInfo = storeInfos[i];\n        storeInfo || (storeInfos[i] = storeInfo = new Vector2());\n        storeInfo.set(bufferIndex + 1, indexInBuffer * blendShapeByteStride); // BlendShape buffer is start from 1\n\n        var _endFrame = endFrame,\n          deltaPositions = _endFrame.deltaPositions;\n        for (var j = 0; j < vertexCount; j++) {\n          var start = offset + bufferFloatStride * j;\n          var deltaPosition = deltaPositions[j];\n          if (deltaPosition) {\n            vertices[start] = deltaPosition.x;\n            vertices[start + 1] = deltaPosition.y;\n            vertices[start + 2] = deltaPosition.z;\n          }\n        }\n        offset += 3;\n        if (this._useBlendNormal) {\n          var _endFrame2 = endFrame,\n            deltaNormals = _endFrame2.deltaNormals;\n          if (deltaNormals) {\n            for (var _j = 0; _j < vertexCount; _j++) {\n              var _start = offset + bufferFloatStride * _j;\n              var deltaNormal = deltaNormals[_j];\n              if (deltaNormal) {\n                vertices[_start] = deltaNormal.x;\n                vertices[_start + 1] = deltaNormal.y;\n                vertices[_start + 2] = deltaNormal.z;\n              }\n            }\n          }\n          offset += 3;\n        }\n        if (this._useBlendTangent) {\n          var _endFrame3 = endFrame,\n            deltaTangents = _endFrame3.deltaTangents;\n          if (deltaTangents) {\n            for (var _j2 = 0; _j2 < vertexCount; _j2++) {\n              var _start2 = offset + bufferFloatStride * _j2;\n              var deltaTangent = deltaTangents[_j2];\n              if (deltaTangent) {\n                vertices[_start2] = deltaTangent.x;\n                vertices[_start2 + 1] = deltaTangent.y;\n                vertices[_start2 + 2] = deltaTangent.z;\n              }\n            }\n          }\n          offset += 3;\n        }\n        if (indexInBuffer === maxCountSingleBuffer - 1 || i === n - 1) {\n          // @todo: can optimize in setData\n          buffer.setData(vertices, 0, 0, buffer.byteLength / 4);\n        }\n        dataChangedFlag.flag = false;\n      }\n    }\n  };\n  _proto._updateTextureArray = function _updateTextureArray(vertexCount, force) {\n    var blendShapes = this._blendShapes,\n      vertexTexture = this._vertexTexture,\n      vertices = this._vertices,\n      subDataDirtyFlags = this._subDataDirtyFlags;\n    for (var i = 0, n = blendShapes.length; i < n; i++) {\n      var subDirtyFlag = subDataDirtyFlags[i];\n      var subBlendShapeDataStride = vertexTexture.width * vertexTexture.height * 4;\n      if (force || subDirtyFlag.flag) {\n        var frames = blendShapes[i].frames;\n        var frameCount = frames.length;\n        var endFrame = frames[frameCount - 1];\n        if (frameCount > 0 && endFrame.deltaPositions.length !== vertexCount) {\n          throw \"BlendShape frame deltaPositions length must same with mesh vertexCount.\";\n        }\n        var _endFrame4 = endFrame,\n          deltaPositions = _endFrame4.deltaPositions,\n          deltaNormals = _endFrame4.deltaNormals,\n          deltaTangents = _endFrame4.deltaTangents;\n        var offset = i * subBlendShapeDataStride;\n        for (var j = 0; j < vertexCount; j++) {\n          var position = deltaPositions[j];\n          vertices[offset] = position.x;\n          vertices[offset + 1] = position.y;\n          vertices[offset + 2] = position.z;\n          offset += 4;\n          if (deltaNormals) {\n            var normal = deltaNormals[j];\n            vertices[offset] = normal.x;\n            vertices[offset + 1] = normal.y;\n            vertices[offset + 2] = normal.z;\n            offset += 4;\n          }\n          if (deltaTangents) {\n            var tangent = deltaTangents[j];\n            vertices[offset] = tangent.x;\n            vertices[offset + 1] = tangent.y;\n            vertices[offset + 2] = tangent.z;\n            offset += 4;\n          }\n        }\n        subDirtyFlag.flag = false;\n      }\n    }\n    vertexTexture.setPixelBuffer(0, vertices);\n  };\n  _proto._updateLayoutChange = function _updateLayoutChange(blendShape) {\n    var notFirst = this._blendShapeCount > 1;\n    var vertexElementCount = 1;\n    var useBlendNormal = blendShape._useBlendShapeNormal;\n    var useBlendTangent = blendShape._useBlendShapeTangent;\n    if (notFirst) {\n      useBlendNormal && (useBlendNormal = this._useBlendNormal);\n      useBlendTangent && (useBlendTangent = this._useBlendTangent);\n    }\n    useBlendNormal && vertexElementCount++;\n    useBlendTangent && vertexElementCount++;\n    this._useBlendNormal = useBlendNormal;\n    this._useBlendTangent = useBlendTangent;\n    this._vertexElementCount = vertexElementCount;\n  };\n  _proto._attributeModeUpdateVertexElement = function _attributeModeUpdateVertexElement(vertexElements, vertexBufferStoreInfo, index, condensedIndex) {\n    var elementOffset = this._vertexElementOffset + this._vertexElementCount * condensedIndex;\n    var _vertexBufferStoreInf = vertexBufferStoreInfo[index],\n      bufferIndex = _vertexBufferStoreInf.x,\n      offset = _vertexBufferStoreInf.y;\n    var vertexElement = vertexElements[elementOffset];\n    vertexElement.bindingIndex = bufferIndex;\n    vertexElement.offset = offset;\n    if (this._useBlendNormal) {\n      var _vertexElement = vertexElements[++elementOffset];\n      offset += 12;\n      _vertexElement.bindingIndex = bufferIndex;\n      _vertexElement.offset = offset;\n    }\n    if (this._useBlendTangent) {\n      var _vertexElement2 = vertexElements[++elementOffset];\n      offset += 12;\n      _vertexElement2.bindingIndex = bufferIndex;\n      _vertexElement2.offset = offset;\n    }\n  };\n  _proto._getVertexBufferModeSupportCount = function _getVertexBufferModeSupportCount() {\n    if (this._useBlendNormal || this._useBlendTangent) {\n      return 4;\n    } else {\n      return 8;\n    }\n  };\n  _proto._filterCondensedBlendShapeWeights = function _filterCondensedBlendShapeWeights(blendShapeWeights, condensedBlendShapeWeights) {\n    var condensedWeightsCount = condensedBlendShapeWeights.length;\n    var vertexElements = this._modelMesh._vertexElements;\n    var vertexBufferStoreInfo = this._storeInVertexBufferInfo;\n    var thresholdWeight = Number.POSITIVE_INFINITY;\n    var thresholdIndex;\n    for (var i = 0, n = Math.min(blendShapeWeights.length, this._blendShapeCount); i < n; i++) {\n      var weight = blendShapeWeights[i];\n      if (i < condensedWeightsCount) {\n        this._attributeModeUpdateVertexElement(vertexElements, vertexBufferStoreInfo, i, i);\n        condensedBlendShapeWeights[i] = weight;\n        if (weight < thresholdWeight) {\n          thresholdWeight = weight;\n          thresholdIndex = i;\n        }\n      } else if (weight > thresholdWeight) {\n        this._attributeModeUpdateVertexElement(vertexElements, vertexBufferStoreInfo, i, thresholdIndex);\n        condensedBlendShapeWeights[thresholdIndex] = weight;\n        thresholdWeight = Number.POSITIVE_INFINITY;\n        for (var j = 0; j < condensedWeightsCount; j++) {\n          var condensedWeight = condensedBlendShapeWeights[j];\n          if (condensedWeight < thresholdWeight) {\n            thresholdWeight = condensedWeight;\n            thresholdIndex = j;\n          }\n        }\n      }\n    }\n  };\n  return BlendShapeManager;\n}();\nBlendShapeManager._blendShapeMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE\");\nBlendShapeManager._blendShapeTextureMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE_TEXTURE\");\nBlendShapeManager._blendShapeNormalMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE_NORMAL\");\nBlendShapeManager._blendShapeTangentMacro = Shader.getMacroByName(\"OASIS_BLENDSHAPE_TANGENT\");\nBlendShapeManager._blendShapeWeightsProperty = Shader.getPropertyByName(\"u_blendShapeWeights\");\nBlendShapeManager._blendShapeTextureProperty = Shader.getPropertyByName(\"u_blendShapeTexture\");\nBlendShapeManager._blendShapeTextureInfoProperty = Shader.getPropertyByName(\"u_blendShapeTextureInfo\");\n\n/**\n * Mesh containing common vertex elements of the model.\n */\nvar ModelMesh = /*#__PURE__*/function (_Mesh) {\n  _inheritsLoose(ModelMesh, _Mesh);\n  /**\n   * Create a model mesh.\n   * @param engine - Engine to which the mesh belongs\n   * @param name - Mesh name\n   */\n  function ModelMesh(engine, name) {\n    var _this;\n    _this = _Mesh.call(this, engine) || this;\n    _this._blendShapeManager = void 0;\n    _this._vertexCount = 0;\n    _this._accessible = true;\n    _this._verticesFloat32 = null;\n    _this._verticesUint8 = null;\n    _this._indices = null;\n    _this._indicesFormat = null;\n    _this._vertexSlotChanged = true;\n    _this._vertexChangeFlag = 0;\n    _this._indicesChangeFlag = false;\n    _this._vertexStrideFloat = 0;\n    _this._lastUploadVertexCount = -1;\n    _this._positions = [];\n    _this._normals = null;\n    _this._colors = null;\n    _this._tangents = null;\n    _this._uv = null;\n    _this._uv1 = null;\n    _this._uv2 = null;\n    _this._uv3 = null;\n    _this._uv4 = null;\n    _this._uv5 = null;\n    _this._uv6 = null;\n    _this._uv7 = null;\n    _this._boneWeights = null;\n    _this._boneIndices = null;\n    _this.name = name;\n    _this._blendShapeManager = new BlendShapeManager(engine, _assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * Set positions for the mesh.\n   * @param positions - The positions for the mesh.\n   */\n  var _proto = ModelMesh.prototype;\n  _proto.setPositions = function setPositions(positions) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    this._positions = positions;\n    this._vertexCount = positions.length;\n    this._vertexChangeFlag |= ValueChanged.Position;\n  }\n\n  /**\n   * Get positions for the mesh.\n   * @remarks Please call the setPositions() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getPositions = function getPositions() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._positions;\n  }\n\n  /**\n   * Set per-vertex normals for the mesh.\n   * @param normals - The normals for the mesh.\n   */;\n  _proto.setNormals = function setNormals(normals) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (normals.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n    this._vertexSlotChanged = !!this._normals !== !!normals;\n    this._vertexChangeFlag |= ValueChanged.Normal;\n    this._normals = normals;\n  }\n\n  /**\n   * Get normals for the mesh.\n   * @remarks Please call the setNormals() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getNormals = function getNormals() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._normals;\n  }\n\n  /**\n   * Set per-vertex colors for the mesh.\n   * @param colors - The colors for the mesh.\n   */;\n  _proto.setColors = function setColors(colors) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (colors.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n    this._vertexSlotChanged = !!this._colors !== !!colors;\n    this._vertexChangeFlag |= ValueChanged.Color;\n    this._colors = colors;\n  }\n\n  /**\n   * Get colors for the mesh.\n   * @remarks Please call the setColors() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getColors = function getColors() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._colors;\n  }\n\n  /**\n   * Set per-vertex bone weights for the mesh.\n   * @param boneWeights - The bone weights for the mesh.\n   */;\n  _proto.setBoneWeights = function setBoneWeights(boneWeights) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (boneWeights.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n    this._vertexSlotChanged = boneWeights != null;\n    this._vertexChangeFlag |= ValueChanged.BoneWeight;\n    this._boneWeights = boneWeights;\n  }\n\n  /**\n   * Get weights for the mesh.\n   * @remarks Please call the setWeights() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getBoneWeights = function getBoneWeights() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._boneWeights;\n  }\n\n  /**\n   * Set per-vertex bone indices for the mesh.\n   * @param boneIndices - The bone indices for the mesh.\n   */;\n  _proto.setBoneIndices = function setBoneIndices(boneIndices) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (boneIndices.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n    this._vertexSlotChanged = !!this._boneIndices !== !!boneIndices;\n    this._vertexChangeFlag |= ValueChanged.BoneIndex;\n    this._boneIndices = boneIndices;\n  }\n\n  /**\n   * Get joints for the mesh.\n   * @remarks Please call the setBoneIndices() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getBoneIndices = function getBoneIndices() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._boneIndices;\n  }\n\n  /**\n   * Set per-vertex tangents for the mesh.\n   * @param tangents - The tangents for the mesh.\n   */;\n  _proto.setTangents = function setTangents(tangents) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (tangents.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n    this._vertexSlotChanged = !!this._tangents !== !!tangents;\n    this._vertexChangeFlag |= ValueChanged.Tangent;\n    this._tangents = tangents;\n  }\n\n  /**\n   * Get tangents for the mesh.\n   * @remarks Please call the setTangents() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getTangents = function getTangents() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._tangents;\n  }\n\n  /**\n   * Set per-vertex uv for the mesh.\n   * @param uv - The uv for the mesh.\n   */;\n  _proto.setUVs = function setUVs(uv, channelIndex) {\n    var _channelIndex;\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (uv.length !== this._vertexCount) {\n      throw \"The array provided needs to be the same size as vertex count.\";\n    }\n    channelIndex = (_channelIndex = channelIndex) != null ? _channelIndex : 0;\n    switch (channelIndex) {\n      case 0:\n        this._vertexSlotChanged = !!this._uv !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV;\n        this._uv = uv;\n        break;\n      case 1:\n        this._vertexSlotChanged = !!this._uv1 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV1;\n        this._uv1 = uv;\n        break;\n      case 2:\n        this._vertexSlotChanged = !!this._uv2 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV2;\n        this._uv2 = uv;\n        break;\n      case 3:\n        this._vertexSlotChanged = !!this._uv3 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV3;\n        this._uv3 = uv;\n        break;\n      case 4:\n        this._vertexSlotChanged = !!this._uv4 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV4;\n        this._uv4 = uv;\n        break;\n      case 5:\n        this._vertexSlotChanged = !!this._uv5 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV5;\n        this._uv5 = uv;\n        break;\n      case 6:\n        this._vertexSlotChanged = !!this._uv6 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV6;\n        this._uv6 = uv;\n        break;\n      case 7:\n        this._vertexSlotChanged = !!this._uv7 !== !!uv;\n        this._vertexChangeFlag |= ValueChanged.UV7;\n        this._uv7 = uv;\n        break;\n      default:\n        throw \"The index of channel needs to be in range [0 - 7].\";\n    }\n  }\n\n  /**\n   * Get uv for the mesh.\n   * @remarks Please call the setUV() method after modification to ensure that the modification takes effect.\n   */;\n  _proto.getUVs = function getUVs(channelIndex) {\n    var _channelIndex2;\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    channelIndex = (_channelIndex2 = channelIndex) != null ? _channelIndex2 : 0;\n    switch (channelIndex) {\n      case 0:\n        return this._uv;\n      case 1:\n        return this._uv1;\n      case 2:\n        return this._uv2;\n      case 3:\n        return this._uv3;\n      case 4:\n        return this._uv4;\n      case 5:\n        return this._uv5;\n      case 6:\n        return this._uv6;\n      case 7:\n        return this._uv7;\n    }\n    throw \"The index of channel needs to be in range [0 - 7].\";\n  }\n\n  /**\n   * Set indices for the mesh.\n   * @param indices - The indices for the mesh.\n   */;\n  _proto.setIndices = function setIndices(indices) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    if (this._indices !== indices) {\n      this._indices = indices;\n      if (indices instanceof Uint8Array) {\n        this._indicesFormat = IndexFormat.UInt8;\n      } else if (indices instanceof Uint16Array) {\n        this._indicesFormat = IndexFormat.UInt16;\n      } else if (indices instanceof Uint32Array) {\n        this._indicesFormat = IndexFormat.UInt32;\n      }\n    }\n    this._indicesChangeFlag = true;\n  }\n\n  /**\n   * Get indices for the mesh.\n   */;\n  _proto.getIndices = function getIndices() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    return this._indices;\n  }\n\n  /**\n   * Add a BlendShape for this ModelMesh.\n   * @param blendShape - The BlendShape\n   */;\n  _proto.addBlendShape = function addBlendShape(blendShape) {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    this._blendShapeManager._addBlendShape(blendShape);\n  }\n\n  /**\n   * Clear all BlendShapes.\n   */;\n  _proto.clearBlendShapes = function clearBlendShapes() {\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    this._blendShapeManager._clearBlendShapes();\n  }\n\n  /**\n   * Get name of BlendShape by given index.\n   * @param index - The index of BlendShape\n   * @returns The name of BlendShape\n   */;\n  _proto.getBlendShapeName = function getBlendShapeName(index) {\n    if (this._accessible) {\n      var blendShapes = this._blendShapeManager._blendShapes;\n      return blendShapes[index].name;\n    } else {\n      return this._blendShapeManager._blendShapeNames[index];\n    }\n  }\n\n  /**\n   * Upload Mesh Data to GPU.\n   * @param noLongerAccessible - Whether to access data later. If true, you'll never access data anymore (free memory cache)\n   */;\n  _proto.uploadData = function uploadData(noLongerAccessible) {\n    var _this$_vertexBufferBi, _this$_indexBufferBin;\n    if (!this._accessible) {\n      throw \"Not allowed to access data while accessible is false.\";\n    }\n    var vertexCount = this._vertexCount;\n    var vertexElementChanged = this._updateVertexElements();\n    var vertexCountChange = this._lastUploadVertexCount !== vertexCount;\n\n    // Vertex count change\n    var vertexBuffer = (_this$_vertexBufferBi = this._vertexBufferBindings[0]) === null || _this$_vertexBufferBi === void 0 ? void 0 : _this$_vertexBufferBi._buffer;\n    if (vertexCountChange) {\n      vertexBuffer === null || vertexBuffer === void 0 ? void 0 : vertexBuffer.destroy();\n      var elementCount = this._vertexStrideFloat;\n      var vertexFloatCount = elementCount * vertexCount;\n      var vertices = new Float32Array(vertexFloatCount);\n      this._verticesFloat32 = vertices;\n      this._verticesUint8 = new Uint8Array(vertices.buffer);\n      this._updateVertices(vertices, true);\n      var newVertexBuffer = new Buffer(this._engine, BufferBindFlag.VertexBuffer, vertices, noLongerAccessible ? BufferUsage.Static : BufferUsage.Dynamic);\n      this._setVertexBufferBinding(0, new VertexBufferBinding(newVertexBuffer, elementCount * 4));\n      this._lastUploadVertexCount = vertexCount;\n    } else {\n      if (this._vertexChangeFlag & ValueChanged.All) {\n        var _vertices = this._verticesFloat32;\n        this._updateVertices(_vertices, vertexElementChanged);\n        vertexBuffer.setData(_vertices);\n      }\n    }\n    var indices = this._indices;\n    var indexBuffer = (_this$_indexBufferBin = this._indexBufferBinding) === null || _this$_indexBufferBin === void 0 ? void 0 : _this$_indexBufferBin._buffer;\n    if (indices) {\n      if (!indexBuffer || indices.byteLength != indexBuffer.byteLength) {\n        indexBuffer === null || indexBuffer === void 0 ? void 0 : indexBuffer.destroy();\n        var newIndexBuffer = new Buffer(this._engine, BufferBindFlag.IndexBuffer, indices);\n        this._setIndexBufferBinding(new IndexBufferBinding(newIndexBuffer, this._indicesFormat));\n        this._indicesChangeFlag = false;\n      } else if (this._indicesChangeFlag) {\n        indexBuffer.setData(indices);\n        if (this._indexBufferBinding._format !== this._indicesFormat) {\n          this._setIndexBufferBinding(new IndexBufferBinding(indexBuffer, this._indicesFormat));\n        }\n        this._indicesChangeFlag = false;\n      }\n    } else if (indexBuffer) {\n      indexBuffer.destroy();\n      this._setIndexBufferBinding(null);\n    }\n    var blendShapeManager = this._blendShapeManager;\n    blendShapeManager._blendShapeCount > 0 && blendShapeManager._update(vertexCountChange, noLongerAccessible);\n    if (noLongerAccessible) {\n      this._accessible = false;\n      this._releaseCache();\n    }\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    _Mesh.prototype._onDestroy.call(this);\n    this._accessible && this._releaseCache();\n  };\n  _proto._updateVertexElements = function _updateVertexElements() {\n    var blendShapeManager = this._blendShapeManager;\n    var attributeMode = !blendShapeManager._useTextureMode();\n    if (this._vertexSlotChanged || attributeMode && blendShapeManager._vertexElementsNeedUpdate()) {\n      var offset = 12;\n      var elementCount = 3;\n      this._clearVertexElements();\n      this._addVertexElement(POSITION_VERTEX_ELEMENT);\n      if (this._normals) {\n        this._addVertexElement(new VertexElement(\"NORMAL\", offset, VertexElementFormat.Vector3, 0));\n        offset += 12;\n        elementCount += 3;\n      }\n      if (this._colors) {\n        this._addVertexElement(new VertexElement(\"COLOR_0\", offset, VertexElementFormat.Vector4, 0));\n        offset += 16;\n        elementCount += 4;\n      }\n      if (this._boneWeights) {\n        this._addVertexElement(new VertexElement(\"WEIGHTS_0\", offset, VertexElementFormat.Vector4, 0));\n        offset += 16;\n        elementCount += 4;\n      }\n      if (this._boneIndices) {\n        this._addVertexElement(new VertexElement(\"JOINTS_0\", offset, VertexElementFormat.UByte4, 0));\n        offset += 4;\n        elementCount += 1;\n      }\n      if (this._tangents) {\n        this._addVertexElement(new VertexElement(\"TANGENT\", offset, VertexElementFormat.Vector4, 0));\n        offset += 16;\n        elementCount += 4;\n      }\n      if (this._uv) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_0\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv1) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_1\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv2) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_2\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv3) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_3\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv4) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_4\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv5) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_5\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv6) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_6\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (this._uv7) {\n        this._addVertexElement(new VertexElement(\"TEXCOORD_7\", offset, VertexElementFormat.Vector2, 0));\n        offset += 8;\n        elementCount += 2;\n      }\n      if (attributeMode) {\n        blendShapeManager._blendShapeCount > 0 && blendShapeManager._addVertexElements(this);\n      }\n      this._vertexSlotChanged = false;\n      this._vertexStrideFloat = elementCount;\n      return true;\n    }\n    return false;\n  };\n  _proto._updateVertices = function _updateVertices(vertices, force) {\n    // prettier-ignore\n    var _vertexStrideFloat = this._vertexStrideFloat,\n      _vertexCount = this._vertexCount,\n      _positions = this._positions,\n      _normals = this._normals,\n      _colors = this._colors,\n      _vertexChangeFlag = this._vertexChangeFlag,\n      _boneWeights = this._boneWeights,\n      _boneIndices = this._boneIndices,\n      _tangents = this._tangents,\n      _uv = this._uv,\n      _uv1 = this._uv1,\n      _uv2 = this._uv2,\n      _uv3 = this._uv3,\n      _uv4 = this._uv4,\n      _uv5 = this._uv5,\n      _uv6 = this._uv6,\n      _uv7 = this._uv7;\n    force && (this._vertexChangeFlag = ValueChanged.All);\n    if (_vertexChangeFlag & ValueChanged.Position) {\n      for (var i = 0; i < _vertexCount; i++) {\n        var start = _vertexStrideFloat * i;\n        var position = _positions[i];\n        vertices[start] = position.x;\n        vertices[start + 1] = position.y;\n        vertices[start + 2] = position.z;\n      }\n    }\n    var offset = 3;\n    if (_normals) {\n      if (_vertexChangeFlag & ValueChanged.Normal) {\n        for (var _i = 0; _i < _vertexCount; _i++) {\n          var _start = _vertexStrideFloat * _i + offset;\n          var normal = _normals[_i];\n          if (normal) {\n            vertices[_start] = normal.x;\n            vertices[_start + 1] = normal.y;\n            vertices[_start + 2] = normal.z;\n          }\n        }\n      }\n      offset += 3;\n    }\n    if (_colors) {\n      if (_vertexChangeFlag & ValueChanged.Color) {\n        for (var _i2 = 0; _i2 < _vertexCount; _i2++) {\n          var _start2 = _vertexStrideFloat * _i2 + offset;\n          var color = _colors[_i2];\n          if (color) {\n            vertices[_start2] = color.r;\n            vertices[_start2 + 1] = color.g;\n            vertices[_start2 + 2] = color.b;\n            vertices[_start2 + 3] = color.a;\n          }\n        }\n      }\n      offset += 4;\n    }\n    if (_boneWeights) {\n      if (_vertexChangeFlag & ValueChanged.BoneWeight) {\n        for (var _i3 = 0; _i3 < _vertexCount; _i3++) {\n          var _start3 = _vertexStrideFloat * _i3 + offset;\n          var weight = _boneWeights[_i3];\n          if (weight) {\n            vertices[_start3] = weight.x;\n            vertices[_start3 + 1] = weight.y;\n            vertices[_start3 + 2] = weight.z;\n            vertices[_start3 + 3] = weight.w;\n          }\n        }\n      }\n      offset += 4;\n    }\n    if (_boneIndices) {\n      if (_vertexChangeFlag & ValueChanged.BoneIndex) {\n        var _verticesUint8 = this._verticesUint8;\n        for (var _i4 = 0; _i4 < _vertexCount; _i4++) {\n          var _start4 = _vertexStrideFloat * _i4 + offset;\n          var joint = _boneIndices[_i4];\n          if (joint) {\n            var internalStart = _start4 * 4;\n            _verticesUint8[internalStart] = joint.x;\n            _verticesUint8[internalStart + 1] = joint.y;\n            _verticesUint8[internalStart + 2] = joint.z;\n            _verticesUint8[internalStart + 3] = joint.w;\n          }\n        }\n      }\n      offset += 1;\n    }\n    if (_tangents) {\n      if (_vertexChangeFlag & ValueChanged.Tangent) {\n        for (var _i5 = 0; _i5 < _vertexCount; _i5++) {\n          var _start5 = _vertexStrideFloat * _i5 + offset;\n          var tangent = _tangents[_i5];\n          if (tangent) {\n            vertices[_start5] = tangent.x;\n            vertices[_start5 + 1] = tangent.y;\n            vertices[_start5 + 2] = tangent.z;\n            vertices[_start5 + 3] = tangent.w;\n          }\n        }\n      }\n      offset += 4;\n    }\n    if (_uv) {\n      if (_vertexChangeFlag & ValueChanged.UV) {\n        for (var _i6 = 0; _i6 < _vertexCount; _i6++) {\n          var _start6 = _vertexStrideFloat * _i6 + offset;\n          var _uv8 = _uv[_i6];\n          if (_uv8) {\n            vertices[_start6] = _uv8.x;\n            vertices[_start6 + 1] = _uv8.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv1) {\n      if (_vertexChangeFlag & ValueChanged.UV1) {\n        for (var _i7 = 0; _i7 < _vertexCount; _i7++) {\n          var _start7 = _vertexStrideFloat * _i7 + offset;\n          var _uv9 = _uv1[_i7];\n          if (_uv9) {\n            vertices[_start7] = _uv9.x;\n            vertices[_start7 + 1] = _uv9.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv2) {\n      if (_vertexChangeFlag & ValueChanged.UV2) {\n        for (var _i8 = 0; _i8 < _vertexCount; _i8++) {\n          var _start8 = _vertexStrideFloat * _i8 + offset;\n          var _uv10 = _uv2[_i8];\n          if (_uv10) {\n            vertices[_start8] = _uv10.x;\n            vertices[_start8 + 1] = _uv10.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv3) {\n      if (_vertexChangeFlag & ValueChanged.UV3) {\n        for (var _i9 = 0; _i9 < _vertexCount; _i9++) {\n          var _start9 = _vertexStrideFloat * _i9 + offset;\n          var _uv11 = _uv3[_i9];\n          if (_uv11) {\n            vertices[_start9] = _uv11.x;\n            vertices[_start9 + 1] = _uv11.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv4) {\n      if (_vertexChangeFlag & ValueChanged.UV4) {\n        for (var _i10 = 0; _i10 < _vertexCount; _i10++) {\n          var _start10 = _vertexStrideFloat * _i10 + offset;\n          var _uv12 = _uv4[_i10];\n          if (_uv12) {\n            vertices[_start10] = _uv12.x;\n            vertices[_start10 + 1] = _uv12.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv5) {\n      if (_vertexChangeFlag & ValueChanged.UV5) {\n        for (var _i11 = 0; _i11 < _vertexCount; _i11++) {\n          var _start11 = _vertexStrideFloat * _i11 + offset;\n          var _uv13 = _uv5[_i11];\n          if (_uv13) {\n            vertices[_start11] = _uv13.x;\n            vertices[_start11 + 1] = _uv13.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv6) {\n      if (_vertexChangeFlag & ValueChanged.UV6) {\n        for (var _i12 = 0; _i12 < _vertexCount; _i12++) {\n          var _start12 = _vertexStrideFloat * _i12 + offset;\n          var _uv14 = _uv6[_i12];\n          if (_uv14) {\n            vertices[_start12] = _uv14.x;\n            vertices[_start12 + 1] = _uv14.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    if (_uv7) {\n      if (_vertexChangeFlag & ValueChanged.UV7) {\n        for (var _i13 = 0; _i13 < _vertexCount; _i13++) {\n          var _start13 = _vertexStrideFloat * _i13 + offset;\n          var _uv15 = _uv7[_i13];\n          if (_uv15) {\n            vertices[_start13] = _uv15.x;\n            vertices[_start13 + 1] = _uv15.y;\n          }\n        }\n      }\n      offset += 2;\n    }\n    this._vertexChangeFlag = 0;\n  };\n  _proto._releaseCache = function _releaseCache() {\n    this._verticesUint8 = null;\n    this._indices = null;\n    this._verticesFloat32 = null;\n    this._positions.length = 0;\n    this._tangents = null;\n    this._normals = null;\n    this._colors = null;\n    this._uv = null;\n    this._uv1 = null;\n    this._uv2 = null;\n    this._uv3 = null;\n    this._uv4 = null;\n    this._uv5 = null;\n    this._uv6 = null;\n    this._uv7 = null;\n    this._blendShapeManager._releaseMemoryCache();\n  };\n  _createClass(ModelMesh, [{\n    key: \"accessible\",\n    get: /** @internal */\n\n    /**\n     * Whether to access data of the mesh.\n     */\n    function get() {\n      return this._accessible;\n    }\n\n    /**\n     * Vertex count of current mesh.\n     */\n  }, {\n    key: \"vertexCount\",\n    get: function get() {\n      return this._vertexCount;\n    }\n\n    /**\n     * BlendShapes of this ModelMesh.\n     */\n  }, {\n    key: \"blendShapes\",\n    get: function get() {\n      if (!this._accessible) {\n        throw \"Not allowed to access data while accessible is false.\";\n      }\n      return this._blendShapeManager._blendShapes;\n    }\n\n    /**\n     * BlendShape count of this ModelMesh.\n     */\n  }, {\n    key: \"blendShapeCount\",\n    get: function get() {\n      return this._blendShapeManager._blendShapeCount;\n    }\n  }]);\n  return ModelMesh;\n}(Mesh);\nvar POSITION_VERTEX_ELEMENT = new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0);\nvar ValueChanged;\n(function (ValueChanged) {\n  ValueChanged[ValueChanged[\"Position\"] = 1] = \"Position\";\n  ValueChanged[ValueChanged[\"Normal\"] = 2] = \"Normal\";\n  ValueChanged[ValueChanged[\"Color\"] = 4] = \"Color\";\n  ValueChanged[ValueChanged[\"Tangent\"] = 8] = \"Tangent\";\n  ValueChanged[ValueChanged[\"BoneWeight\"] = 16] = \"BoneWeight\";\n  ValueChanged[ValueChanged[\"BoneIndex\"] = 32] = \"BoneIndex\";\n  ValueChanged[ValueChanged[\"UV\"] = 64] = \"UV\";\n  ValueChanged[ValueChanged[\"UV1\"] = 128] = \"UV1\";\n  ValueChanged[ValueChanged[\"UV2\"] = 256] = \"UV2\";\n  ValueChanged[ValueChanged[\"UV3\"] = 512] = \"UV3\";\n  ValueChanged[ValueChanged[\"UV4\"] = 1024] = \"UV4\";\n  ValueChanged[ValueChanged[\"UV5\"] = 2048] = \"UV5\";\n  ValueChanged[ValueChanged[\"UV6\"] = 4096] = \"UV6\";\n  ValueChanged[ValueChanged[\"UV7\"] = 8192] = \"UV7\";\n  ValueChanged[ValueChanged[\"All\"] = 65535] = \"All\";\n})(ValueChanged || (ValueChanged = {}));\n\n/**\n * Mesh skin data, equal glTF skins define\n */\nvar Skin = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(Skin, _EngineObject);\n  /**\n   * Constructor of skin\n   * @param name - name\n   */\n  function Skin(name) {\n    var _this;\n    _this = _EngineObject.call(this, null) || this;\n    _this.name = name;\n    _this.inverseBindMatrices = void 0;\n    _this.joints = void 0;\n    _this.skeleton = void 0;\n    _this.inverseBindMatrices = []; // inverse bind matrix array\n    _this.joints = []; // joints name array, element type: string\n    _this.skeleton = \"none\"; // root bone name\n    return _this;\n  }\n  return Skin;\n}(EngineObject);\n\nvar _class$7, _descriptor$6, _descriptor2$6, _class2$6;\n\n/**\n * MeshRenderer Component.\n */\nvar MeshRenderer = (_class$7 = (_class2$6 = /*#__PURE__*/function (_Renderer) {\n  _inheritsLoose(MeshRenderer, _Renderer);\n  /** @internal */\n\n  /**\n   * @internal\n   */\n  function MeshRenderer(entity) {\n    var _this;\n    _this = _Renderer.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"_mesh\", _descriptor$6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_meshUpdateFlag\", _descriptor2$6, _assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * Mesh assigned to the renderer.\n   */\n  var _proto = MeshRenderer.prototype;\n  /**\n   * @internal\n   */\n  _proto._render = function _render(camera) {\n    var mesh = this._mesh;\n    if (mesh) {\n      if (this._meshUpdateFlag.flag) {\n        var shaderData = this.shaderData;\n        var vertexElements = mesh._vertexElements;\n        shaderData.disableMacro(MeshRenderer._uvMacro);\n        shaderData.disableMacro(MeshRenderer._uv1Macro);\n        shaderData.disableMacro(MeshRenderer._normalMacro);\n        shaderData.disableMacro(MeshRenderer._tangentMacro);\n        shaderData.disableMacro(MeshRenderer._vertexColorMacro);\n        for (var i = 0, n = vertexElements.length; i < n; i++) {\n          var semantic = vertexElements[i].semantic;\n          switch (semantic) {\n            case \"TEXCOORD_0\":\n              shaderData.enableMacro(MeshRenderer._uvMacro);\n              break;\n            case \"TEXCOORD_1\":\n              shaderData.enableMacro(MeshRenderer._uv1Macro);\n              break;\n            case \"NORMAL\":\n              shaderData.enableMacro(MeshRenderer._normalMacro);\n              break;\n            case \"TANGENT\":\n              shaderData.enableMacro(MeshRenderer._tangentMacro);\n              break;\n            case \"COLOR_0\":\n              shaderData.enableMacro(MeshRenderer._vertexColorMacro);\n              break;\n          }\n        }\n        this._meshUpdateFlag.flag = false;\n      }\n      var subMeshes = mesh.subMeshes;\n      var renderPipeline = camera._renderPipeline;\n      var renderElementPool = this._engine._renderElementPool;\n      for (var _i = 0, _n = subMeshes.length; _i < _n; _i++) {\n        var material = this._materials[_i];\n        if (material) {\n          var element = renderElementPool.getFromPool();\n          element.setValue(this, mesh, subMeshes[_i], material);\n          renderPipeline.pushPrimitive(element);\n        }\n      }\n    } else {\n      Logger.error(\"mesh is null.\");\n    }\n  }\n\n  /**\n   * @internal\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    _Renderer.prototype._onDestroy.call(this);\n    var mesh = this._mesh;\n    if (mesh && !mesh.destroyed) {\n      mesh._addRefCount(-1);\n      this._mesh = null;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._cloneTo = function _cloneTo(target) {\n    target.mesh = this._mesh;\n  }\n\n  /**\n   * @override\n   */;\n  _proto._updateBounds = function _updateBounds(worldBounds) {\n    var mesh = this._mesh;\n    if (mesh) {\n      var localBounds = mesh.bounds;\n      var worldMatrix = this._entity.transform.worldMatrix;\n      BoundingBox.transform(localBounds, worldMatrix, worldBounds);\n    } else {\n      worldBounds.min.set(0, 0, 0);\n      worldBounds.max.set(0, 0, 0);\n    }\n  };\n  _proto._setMesh = function _setMesh(mesh) {\n    var lastMesh = this._mesh;\n    if (lastMesh) {\n      lastMesh._addRefCount(-1);\n      this._meshUpdateFlag.destroy();\n    }\n    if (mesh) {\n      mesh._addRefCount(1);\n      this._meshUpdateFlag = mesh.registerUpdateFlag();\n    }\n    this._mesh = mesh;\n  };\n  _createClass(MeshRenderer, [{\n    key: \"mesh\",\n    get: function get() {\n      return this._mesh;\n    },\n    set: function set(mesh) {\n      if (this._mesh !== mesh) {\n        this._setMesh(mesh);\n      }\n    }\n  }]);\n  return MeshRenderer;\n}(Renderer), _class2$6._uvMacro = Shader.getMacroByName(\"O3_HAS_UV\"), _class2$6._uv1Macro = Shader.getMacroByName(\"O3_HAS_UV1\"), _class2$6._normalMacro = Shader.getMacroByName(\"O3_HAS_NORMAL\"), _class2$6._tangentMacro = Shader.getMacroByName(\"O3_HAS_TANGENT\"), _class2$6._vertexColorMacro = Shader.getMacroByName(\"O3_HAS_VERTEXCOLOR\"), _class2$6), (_descriptor$6 = _applyDecoratedDescriptor(_class$7.prototype, \"_mesh\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2$6 = _applyDecoratedDescriptor(_class$7.prototype, \"_meshUpdateFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class$7);\n\nvar _class$6, _descriptor$5, _descriptor2$5, _descriptor3$5, _descriptor4$5, _descriptor5$5, _descriptor6$5, _descriptor7$5, _descriptor8$5, _class2$5;\n/**\n * SkinnedMeshRenderer.\n */\nvar SkinnedMeshRenderer = (_class$6 = (_class2$5 = /*#__PURE__*/function (_MeshRenderer) {\n  _inheritsLoose(SkinnedMeshRenderer, _MeshRenderer);\n  /**\n   * Constructor of SkinnedMeshRenderer\n   * @param entity - Entity\n   */\n  function SkinnedMeshRenderer(entity) {\n    var _this;\n    _this = _MeshRenderer.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"matrixPalette\", _descriptor$5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"jointNodes\", _descriptor2$5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"jointTexture\", _descriptor3$5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_hasInitJoints\", _descriptor4$5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_mat\", _descriptor5$5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_useJointTexture\", _descriptor6$5, _assertThisInitialized(_this));\n    _this._skin = void 0;\n    _initializerDefineProperty(_this, \"_blendShapeWeights\", _descriptor7$5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_condensedBlendShapeWeights\", _descriptor8$5, _assertThisInitialized(_this));\n    _this._mat = new Matrix();\n    _this._skin = null;\n    return _this;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = SkinnedMeshRenderer.prototype;\n  _proto._updateShaderData = function _updateShaderData(context) {\n    _MeshRenderer.prototype._updateShaderData.call(this, context);\n    var shaderData = this.shaderData;\n    if (!this._useJointTexture && this.matrixPalette) {\n      shaderData.setFloatArray(SkinnedMeshRenderer._jointMatrixProperty, this.matrixPalette);\n    }\n    var mesh = this.mesh;\n    mesh._blendShapeManager._updateShaderData(shaderData, this);\n  }\n\n  /**\n   * Skin Object.\n   */;\n  _proto._initJoints = function _initJoints() {\n    if (!this._skin) return;\n    var skin = this._skin;\n    var joints = skin.joints;\n    var jointNodes = [];\n    for (var i = joints.length - 1; i >= 0; i--) {\n      jointNodes[i] = this.findByNodeName(this.entity, joints[i]);\n    } // end of for\n    this.matrixPalette = new Float32Array(jointNodes.length * 16);\n    this.jointNodes = jointNodes;\n\n    /** Whether to use a skeleton texture */\n    var rhi = this.entity.engine._hardwareRenderer;\n    if (!rhi) return;\n    var maxAttribUniformVec4 = rhi.renderStates.getParameter(rhi.gl.MAX_VERTEX_UNIFORM_VECTORS);\n    var maxJoints = Math.floor((maxAttribUniformVec4 - 30) / 4);\n    var shaderData = this.shaderData;\n    var jointCount = jointNodes.length;\n    if (jointCount) {\n      shaderData.enableMacro(\"O3_HAS_SKIN\");\n      shaderData.setInt(SkinnedMeshRenderer._jointCountProperty, jointCount);\n      if (jointCount > maxJoints) {\n        if (rhi.canIUseMoreJoints) {\n          this._useJointTexture = true;\n        } else {\n          Logger.error(\"component's joints count(\" + jointCount + \") greater than device's MAX_VERTEX_UNIFORM_VECTORS number \" + maxAttribUniformVec4 + \", and don't support jointTexture in this device. suggest joint count less than \" + maxJoints + \".\", this);\n        }\n      } else {\n        var _maxJoints = Math.max(SkinnedMeshRenderer._maxJoints, jointCount);\n        SkinnedMeshRenderer._maxJoints = _maxJoints;\n        shaderData.disableMacro(\"O3_USE_JOINT_TEXTURE\");\n        shaderData.enableMacro(\"O3_JOINTS_NUM\", _maxJoints.toString());\n      }\n    } else {\n      shaderData.disableMacro(\"O3_HAS_SKIN\");\n    }\n  };\n  _proto.findByNodeName = function findByNodeName(entity, nodeName) {\n    if (!entity) return null;\n    var n = entity.findByName(nodeName);\n    if (n) return n;\n    return this.findByNodeName(entity.parent, nodeName);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto.update = function update() {\n    if (!this._hasInitJoints) {\n      this._initJoints();\n      this._hasInitJoints = true;\n    }\n    if (this._skin) {\n      var joints = this.jointNodes;\n      var ibms = this._skin.inverseBindMatrices;\n      var matrixPalette = this.matrixPalette;\n      var worldToLocal = this.entity.getInvModelMatrix();\n      var mat = this._mat;\n      for (var i = joints.length - 1; i >= 0; i--) {\n        mat.identity();\n        if (joints[i]) {\n          Matrix.multiply(joints[i].transform.worldMatrix, ibms[i], mat);\n        } else {\n          mat.copyFrom(ibms[i]);\n        }\n        Matrix.multiply(worldToLocal, mat, mat);\n        matrixPalette.set(mat.elements, i * 16);\n      }\n      if (this._useJointTexture) {\n        this.createJointTexture();\n      }\n    }\n  }\n\n  /**\n   * Generate joint texture.\n   * Format: (4 * RGBA) * jointCont\n   */;\n  _proto.createJointTexture = function createJointTexture() {\n    if (!this.jointTexture) {\n      var engine = this.engine;\n      var rhi = engine._hardwareRenderer;\n      if (!rhi) return;\n      this.jointTexture = new Texture2D(engine, 4, this.jointNodes.length, TextureFormat.R32G32B32A32, false);\n      this.jointTexture.filterMode = TextureFilterMode.Point;\n      this.shaderData.enableMacro(\"O3_USE_JOINT_TEXTURE\");\n      this.shaderData.setTexture(SkinnedMeshRenderer._jointSamplerProperty, this.jointTexture);\n    }\n    this.jointTexture.setPixelBuffer(this.matrixPalette);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._cloneTo = function _cloneTo(target) {\n    _MeshRenderer.prototype._cloneTo.call(this, target);\n    this._blendShapeWeights && (target._blendShapeWeights = this._blendShapeWeights.slice());\n  };\n  _proto._checkBlendShapeWeightLength = function _checkBlendShapeWeightLength() {\n    var mesh = this._mesh;\n    var newBlendShapeCount = mesh ? mesh.blendShapeCount : 0;\n    var lastBlendShapeWeights = this._blendShapeWeights;\n    if (lastBlendShapeWeights) {\n      if (lastBlendShapeWeights.length !== newBlendShapeCount) {\n        var newBlendShapeWeights = new Float32Array(newBlendShapeCount);\n        if (newBlendShapeCount > lastBlendShapeWeights.length) {\n          newBlendShapeWeights.set(lastBlendShapeWeights);\n        } else {\n          for (var i = 0, n = lastBlendShapeWeights.length; i < n; i++) {\n            lastBlendShapeWeights[i] = newBlendShapeWeights[i];\n          }\n        }\n        this._blendShapeWeights = newBlendShapeWeights;\n      }\n    } else {\n      this._blendShapeWeights = new Float32Array(newBlendShapeCount);\n    }\n  };\n  _createClass(SkinnedMeshRenderer, [{\n    key: \"blendShapeWeights\",\n    get: /** @internal */\n\n    /**\n     * The weights of the BlendShapes.\n     * @remarks Array index is BlendShape index.\n     */\n    function get() {\n      this._checkBlendShapeWeightLength();\n      return this._blendShapeWeights;\n    },\n    set: function set(value) {\n      this._checkBlendShapeWeightLength();\n      var blendShapeWeights = this._blendShapeWeights;\n      if (value.length <= blendShapeWeights.length) {\n        blendShapeWeights.set(value);\n      } else {\n        for (var i = 0, n = blendShapeWeights.length; i < n; i++) {\n          blendShapeWeights[i] = value[i];\n        }\n      }\n    }\n  }, {\n    key: \"skin\",\n    get: function get() {\n      return this._skin;\n    },\n    set: function set(skin) {\n      this._skin = skin;\n    }\n  }]);\n  return SkinnedMeshRenderer;\n}(MeshRenderer), _class2$5._jointCountProperty = Shader.getPropertyByName(\"u_jointCount\"), _class2$5._jointSamplerProperty = Shader.getPropertyByName(\"u_jointSampler\"), _class2$5._jointMatrixProperty = Shader.getPropertyByName(\"u_jointMatrix\"), _class2$5._maxJoints = 0, _class2$5), (_descriptor$5 = _applyDecoratedDescriptor(_class$6.prototype, \"matrixPalette\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2$5 = _applyDecoratedDescriptor(_class$6.prototype, \"jointNodes\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3$5 = _applyDecoratedDescriptor(_class$6.prototype, \"jointTexture\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4$5 = _applyDecoratedDescriptor(_class$6.prototype, \"_hasInitJoints\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor5$5 = _applyDecoratedDescriptor(_class$6.prototype, \"_mat\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor6$5 = _applyDecoratedDescriptor(_class$6.prototype, \"_useJointTexture\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor7$5 = _applyDecoratedDescriptor(_class$6.prototype, \"_blendShapeWeights\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor8$5 = _applyDecoratedDescriptor(_class$6.prototype, \"_condensedBlendShapeWeights\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class$6);\n\n/**\n * Used to generate common primitive meshes.\n */\nvar PrimitiveMesh = /*#__PURE__*/function () {\n  function PrimitiveMesh() {}\n  /**\n   * Create a sphere mesh.\n   * @param engine - Engine\n   * @param radius - Sphere radius\n   * @param segments - Number of segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Sphere model mesh\n   */\n  PrimitiveMesh.createSphere = function createSphere(engine, radius, segments, noLongerAccessible) {\n    if (radius === void 0) {\n      radius = 0.5;\n    }\n    if (segments === void 0) {\n      segments = 18;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    segments = Math.max(2, Math.floor(segments));\n    var count = segments + 1;\n    var vertexCount = count * count;\n    var rectangleCount = segments * segments;\n    var indices = PrimitiveMesh._generateIndices(engine, vertexCount, rectangleCount * 6);\n    var thetaRange = Math.PI;\n    var alphaRange = thetaRange * 2;\n    var countReciprocal = 1.0 / count;\n    var segmentsReciprocal = 1.0 / segments;\n    var positions = new Array(vertexCount);\n    var normals = new Array(vertexCount);\n    var uvs = new Array(vertexCount);\n    for (var i = 0; i < vertexCount; ++i) {\n      var x = i % count;\n      var y = i * countReciprocal | 0;\n      var u = x * segmentsReciprocal;\n      var v = y * segmentsReciprocal;\n      var alphaDelta = u * alphaRange;\n      var thetaDelta = v * thetaRange;\n      var sinTheta = Math.sin(thetaDelta);\n      var posX = -radius * Math.cos(alphaDelta) * sinTheta;\n      var posY = radius * Math.cos(thetaDelta);\n      var posZ = radius * Math.sin(alphaDelta) * sinTheta;\n\n      // Position\n      positions[i] = new Vector3(posX, posY, posZ);\n      // Normal\n      normals[i] = new Vector3(posX, posY, posZ);\n      // Texcoord\n      uvs[i] = new Vector2(u, v);\n    }\n    var offset = 0;\n    for (var _i = 0; _i < rectangleCount; ++_i) {\n      var _x = _i % segments;\n      var _y = _i * segmentsReciprocal | 0;\n      var a = _y * count + _x;\n      var b = a + 1;\n      var c = a + count;\n      var d = c + 1;\n      indices[offset++] = b;\n      indices[offset++] = a;\n      indices[offset++] = d;\n      indices[offset++] = a;\n      indices[offset++] = c;\n      indices[offset++] = d;\n    }\n    var bounds = mesh.bounds;\n    bounds.min.set(-radius, -radius, -radius);\n    bounds.max.set(radius, radius, radius);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a cuboid mesh.\n   * @param engine - Engine\n   * @param width - Cuboid width\n   * @param height - Cuboid height\n   * @param depth - Cuboid depth\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Cuboid model mesh\n   */;\n  PrimitiveMesh.createCuboid = function createCuboid(engine, width, height, depth, noLongerAccessible) {\n    if (width === void 0) {\n      width = 1;\n    }\n    if (height === void 0) {\n      height = 1;\n    }\n    if (depth === void 0) {\n      depth = 1;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var halfDepth = depth / 2;\n    var positions = new Array(24);\n    var normals = new Array(24);\n    var uvs = new Array(24);\n\n    // Up\n    positions[0] = new Vector3(-halfWidth, halfHeight, -halfDepth);\n    positions[1] = new Vector3(halfWidth, halfHeight, -halfDepth);\n    positions[2] = new Vector3(halfWidth, halfHeight, halfDepth);\n    positions[3] = new Vector3(-halfWidth, halfHeight, halfDepth);\n    normals[0] = new Vector3(0, 1, 0);\n    normals[1] = new Vector3(0, 1, 0);\n    normals[2] = new Vector3(0, 1, 0);\n    normals[3] = new Vector3(0, 1, 0);\n    uvs[0] = new Vector2(0, 0);\n    uvs[1] = new Vector2(1, 0);\n    uvs[2] = new Vector2(1, 1);\n    uvs[3] = new Vector2(0, 1);\n    // Down\n    positions[4] = new Vector3(-halfWidth, -halfHeight, -halfDepth);\n    positions[5] = new Vector3(halfWidth, -halfHeight, -halfDepth);\n    positions[6] = new Vector3(halfWidth, -halfHeight, halfDepth);\n    positions[7] = new Vector3(-halfWidth, -halfHeight, halfDepth);\n    normals[4] = new Vector3(0, -1, 0);\n    normals[5] = new Vector3(0, -1, 0);\n    normals[6] = new Vector3(0, -1, 0);\n    normals[7] = new Vector3(0, -1, 0);\n    uvs[4] = new Vector2(0, 1);\n    uvs[5] = new Vector2(1, 1);\n    uvs[6] = new Vector2(1, 0);\n    uvs[7] = new Vector2(0, 0);\n    // Left\n    positions[8] = new Vector3(-halfWidth, halfHeight, -halfDepth);\n    positions[9] = new Vector3(-halfWidth, halfHeight, halfDepth);\n    positions[10] = new Vector3(-halfWidth, -halfHeight, halfDepth);\n    positions[11] = new Vector3(-halfWidth, -halfHeight, -halfDepth);\n    normals[8] = new Vector3(-1, 0, 0);\n    normals[9] = new Vector3(-1, 0, 0);\n    normals[10] = new Vector3(-1, 0, 0);\n    normals[11] = new Vector3(-1, 0, 0);\n    uvs[8] = new Vector2(0, 0);\n    uvs[9] = new Vector2(1, 0);\n    uvs[10] = new Vector2(1, 1);\n    uvs[11] = new Vector2(0, 1);\n    // Right\n    positions[12] = new Vector3(halfWidth, halfHeight, -halfDepth);\n    positions[13] = new Vector3(halfWidth, halfHeight, halfDepth);\n    positions[14] = new Vector3(halfWidth, -halfHeight, halfDepth);\n    positions[15] = new Vector3(halfWidth, -halfHeight, -halfDepth);\n    normals[12] = new Vector3(1, 0, 0);\n    normals[13] = new Vector3(1, 0, 0);\n    normals[14] = new Vector3(1, 0, 0);\n    normals[15] = new Vector3(1, 0, 0);\n    uvs[12] = new Vector2(1, 0);\n    uvs[13] = new Vector2(0, 0);\n    uvs[14] = new Vector2(0, 1);\n    uvs[15] = new Vector2(1, 1);\n    // Front\n    positions[16] = new Vector3(-halfWidth, halfHeight, halfDepth);\n    positions[17] = new Vector3(halfWidth, halfHeight, halfDepth);\n    positions[18] = new Vector3(halfWidth, -halfHeight, halfDepth);\n    positions[19] = new Vector3(-halfWidth, -halfHeight, halfDepth);\n    normals[16] = new Vector3(0, 0, 1);\n    normals[17] = new Vector3(0, 0, 1);\n    normals[18] = new Vector3(0, 0, 1);\n    normals[19] = new Vector3(0, 0, 1);\n    uvs[16] = new Vector2(0, 0);\n    uvs[17] = new Vector2(1, 0);\n    uvs[18] = new Vector2(1, 1);\n    uvs[19] = new Vector2(0, 1);\n    // Back\n    positions[20] = new Vector3(-halfWidth, halfHeight, -halfDepth);\n    positions[21] = new Vector3(halfWidth, halfHeight, -halfDepth);\n    positions[22] = new Vector3(halfWidth, -halfHeight, -halfDepth);\n    positions[23] = new Vector3(-halfWidth, -halfHeight, -halfDepth);\n    normals[20] = new Vector3(0, 0, -1);\n    normals[21] = new Vector3(0, 0, -1);\n    normals[22] = new Vector3(0, 0, -1);\n    normals[23] = new Vector3(0, 0, -1);\n    uvs[20] = new Vector2(1, 0);\n    uvs[21] = new Vector2(0, 0);\n    uvs[22] = new Vector2(0, 1);\n    uvs[23] = new Vector2(1, 1);\n    var indices = new Uint16Array(36);\n\n    // prettier-ignore\n    // Up\n    indices[0] = 0, indices[1] = 2, indices[2] = 1, indices[3] = 2, indices[4] = 0, indices[5] = 3,\n    // Down\n    indices[6] = 4, indices[7] = 6, indices[8] = 7, indices[9] = 6, indices[10] = 4, indices[11] = 5,\n    // Left\n    indices[12] = 8, indices[13] = 10, indices[14] = 9, indices[15] = 10, indices[16] = 8, indices[17] = 11,\n    // Right\n    indices[18] = 12, indices[19] = 14, indices[20] = 15, indices[21] = 14, indices[22] = 12, indices[23] = 13,\n    // Front\n    indices[24] = 16, indices[25] = 18, indices[26] = 17, indices[27] = 18, indices[28] = 16, indices[29] = 19,\n    // Back\n    indices[30] = 20, indices[31] = 22, indices[32] = 23, indices[33] = 22, indices[34] = 20, indices[35] = 21;\n    var bounds = mesh.bounds;\n    bounds.min.set(-halfWidth, -halfHeight, -halfDepth);\n    bounds.max.set(halfWidth, halfHeight, halfDepth);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a plane mesh.\n   * @param engine - Engine\n   * @param width - Plane width\n   * @param height - Plane height\n   * @param horizontalSegments - Plane horizontal segments\n   * @param verticalSegments - Plane vertical segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Plane model mesh\n   */;\n  PrimitiveMesh.createPlane = function createPlane(engine, width, height, horizontalSegments, verticalSegments, noLongerAccessible) {\n    if (width === void 0) {\n      width = 1;\n    }\n    if (height === void 0) {\n      height = 1;\n    }\n    if (horizontalSegments === void 0) {\n      horizontalSegments = 1;\n    }\n    if (verticalSegments === void 0) {\n      verticalSegments = 1;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    horizontalSegments = Math.max(1, Math.floor(horizontalSegments));\n    verticalSegments = Math.max(1, Math.floor(verticalSegments));\n    var horizontalCount = horizontalSegments + 1;\n    var verticalCount = verticalSegments + 1;\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var gridWidth = width / horizontalSegments;\n    var gridHeight = height / verticalSegments;\n    var vertexCount = horizontalCount * verticalCount;\n    var rectangleCount = verticalSegments * horizontalSegments;\n    var indices = PrimitiveMesh._generateIndices(engine, vertexCount, rectangleCount * 6);\n    var horizontalCountReciprocal = 1.0 / horizontalCount;\n    var horizontalSegmentsReciprocal = 1.0 / horizontalSegments;\n    var verticalSegmentsReciprocal = 1.0 / verticalSegments;\n    var positions = new Array(vertexCount);\n    var normals = new Array(vertexCount);\n    var uvs = new Array(vertexCount);\n    for (var i = 0; i < vertexCount; ++i) {\n      var x = i % horizontalCount;\n      var z = i * horizontalCountReciprocal | 0;\n\n      // Position\n      positions[i] = new Vector3(x * gridWidth - halfWidth, 0, z * gridHeight - halfHeight);\n      // Normal\n      normals[i] = new Vector3(0, 1, 0);\n      // Texcoord\n      uvs[i] = new Vector2(x * horizontalSegmentsReciprocal, z * verticalSegmentsReciprocal);\n    }\n    var offset = 0;\n    for (var _i2 = 0; _i2 < rectangleCount; ++_i2) {\n      var _x2 = _i2 % horizontalSegments;\n      var y = _i2 * horizontalSegmentsReciprocal | 0;\n      var a = y * horizontalCount + _x2;\n      var b = a + 1;\n      var c = a + horizontalCount;\n      var d = c + 1;\n      indices[offset++] = a;\n      indices[offset++] = c;\n      indices[offset++] = b;\n      indices[offset++] = c;\n      indices[offset++] = d;\n      indices[offset++] = b;\n    }\n    var bounds = mesh.bounds;\n    bounds.min.set(-halfWidth, 0, -halfHeight);\n    bounds.max.set(halfWidth, 0, halfHeight);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a cylinder mesh.\n   * @param engine - Engine\n   * @param radiusTop - The radius of top cap\n   * @param radiusBottom - The radius of bottom cap\n   * @param height - The height of torso\n   * @param radialSegments - Cylinder radial segments\n   * @param heightSegments - Cylinder height segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Cylinder model mesh\n   */;\n  PrimitiveMesh.createCylinder = function createCylinder(engine, radiusTop, radiusBottom, height, radialSegments, heightSegments, noLongerAccessible) {\n    if (radiusTop === void 0) {\n      radiusTop = 0.5;\n    }\n    if (radiusBottom === void 0) {\n      radiusBottom = 0.5;\n    }\n    if (height === void 0) {\n      height = 2;\n    }\n    if (radialSegments === void 0) {\n      radialSegments = 20;\n    }\n    if (heightSegments === void 0) {\n      heightSegments = 1;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    radialSegments = Math.floor(radialSegments);\n    heightSegments = Math.floor(heightSegments);\n    var radialCount = radialSegments + 1;\n    var verticalCount = heightSegments + 1;\n    var halfHeight = height * 0.5;\n    var unitHeight = height / heightSegments;\n    var torsoVertexCount = radialCount * verticalCount;\n    var torsoRectangleCount = radialSegments * heightSegments;\n    var capTriangleCount = radialSegments * 2;\n    var totalVertexCount = torsoVertexCount + 2 + capTriangleCount;\n    var indices = PrimitiveMesh._generateIndices(engine, totalVertexCount, torsoRectangleCount * 6 + capTriangleCount * 3);\n    var radialCountReciprocal = 1.0 / radialCount;\n    var radialSegmentsReciprocal = 1.0 / radialSegments;\n    var heightSegmentsReciprocal = 1.0 / heightSegments;\n    var positions = new Array(totalVertexCount);\n    var normals = new Array(totalVertexCount);\n    var uvs = new Array(totalVertexCount);\n    var indicesOffset = 0;\n\n    // Create torso\n    var thetaStart = Math.PI;\n    var thetaRange = Math.PI * 2;\n    var radiusDiff = radiusBottom - radiusTop;\n    var slope = radiusDiff / height;\n    var radiusSlope = radiusDiff / heightSegments;\n    for (var i = 0; i < torsoVertexCount; ++i) {\n      var x = i % radialCount;\n      var y = i * radialCountReciprocal | 0;\n      var u = x * radialSegmentsReciprocal;\n      var v = y * heightSegmentsReciprocal;\n      var theta = thetaStart + u * thetaRange;\n      var sinTheta = Math.sin(theta);\n      var cosTheta = Math.cos(theta);\n      var radius = radiusBottom - y * radiusSlope;\n      var posX = radius * sinTheta;\n      var posY = y * unitHeight - halfHeight;\n      var posZ = radius * cosTheta;\n\n      // Position\n      positions[i] = new Vector3(posX, posY, posZ);\n      // Normal\n      normals[i] = new Vector3(sinTheta, slope, cosTheta);\n      // Texcoord\n      uvs[i] = new Vector2(u, 1 - v);\n    }\n    for (var _i3 = 0; _i3 < torsoRectangleCount; ++_i3) {\n      var _x3 = _i3 % radialSegments;\n      var _y2 = _i3 * radialSegmentsReciprocal | 0;\n      var a = _y2 * radialCount + _x3;\n      var b = a + 1;\n      var c = a + radialCount;\n      var d = c + 1;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = c;\n    }\n\n    // Bottom position\n    positions[torsoVertexCount] = new Vector3(0, -halfHeight, 0);\n    // Bottom normal\n    normals[torsoVertexCount] = new Vector3(0, -1, 0);\n    // Bottom texcoord\n    uvs[torsoVertexCount] = new Vector2(0.5, 0.5);\n\n    // Top position\n    positions[torsoVertexCount + 1] = new Vector3(0, halfHeight, 0);\n    // Top normal\n    normals[torsoVertexCount + 1] = new Vector3(0, 1, 0);\n    // Top texcoord\n    uvs[torsoVertexCount + 1] = new Vector2(0.5, 0.5);\n\n    // Add cap vertices\n    var offset = torsoVertexCount + 2;\n    var diameterTopReciprocal = 1.0 / (radiusTop * 2);\n    var diameterBottomReciprocal = 1.0 / (radiusBottom * 2);\n    var positionStride = radialCount * heightSegments;\n    for (var _i4 = 0; _i4 < radialSegments; ++_i4) {\n      var curPosBottom = positions[_i4];\n      var curPosX = curPosBottom.x;\n      var curPosZ = curPosBottom.z;\n\n      // Bottom position\n      positions[offset] = new Vector3(curPosX, -halfHeight, curPosZ);\n      // Bottom normal\n      normals[offset] = new Vector3(0, -1, 0);\n      // Bottom texcoord\n      uvs[offset++] = new Vector2(curPosX * diameterBottomReciprocal + 0.5, 0.5 - curPosZ * diameterBottomReciprocal);\n      var curPosTop = positions[_i4 + positionStride];\n      curPosX = curPosTop.x;\n      curPosZ = curPosTop.z;\n\n      // Top position\n      positions[offset] = new Vector3(curPosX, halfHeight, curPosZ);\n      // Top normal\n      normals[offset] = new Vector3(0, 1, 0);\n      // Top texcoord\n      uvs[offset++] = new Vector2(curPosX * diameterTopReciprocal + 0.5, curPosZ * diameterTopReciprocal + 0.5);\n    }\n\n    // Add cap indices\n    var topCapIndex = torsoVertexCount + 1;\n    var bottomIndiceIndex = torsoVertexCount + 2;\n    var topIndiceIndex = bottomIndiceIndex + 1;\n    for (var _i5 = 0; _i5 < radialSegments; ++_i5) {\n      var firstStride = _i5 * 2;\n      var secondStride = _i5 === radialSegments - 1 ? 0 : firstStride + 2;\n\n      // Bottom\n      indices[indicesOffset++] = torsoVertexCount;\n      indices[indicesOffset++] = bottomIndiceIndex + secondStride;\n      indices[indicesOffset++] = bottomIndiceIndex + firstStride;\n\n      // Top\n      indices[indicesOffset++] = topCapIndex;\n      indices[indicesOffset++] = topIndiceIndex + firstStride;\n      indices[indicesOffset++] = topIndiceIndex + secondStride;\n    }\n    var bounds = mesh.bounds;\n    var radiusMax = Math.max(radiusTop, radiusBottom);\n    bounds.min.set(-radiusMax, -halfHeight, -radiusMax);\n    bounds.max.set(radiusMax, halfHeight, radiusMax);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a torus mesh.\n   * @param engine - Engine\n   * @param radius - Torus radius\n   * @param tubeRadius - Torus tube\n   * @param radialSegments - Torus radial segments\n   * @param tubularSegments - Torus tubular segments\n   * @param arc - Central angle\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Torus model mesh\n   */;\n  PrimitiveMesh.createTorus = function createTorus(engine, radius, tubeRadius, radialSegments, tubularSegments, arc, noLongerAccessible) {\n    if (radius === void 0) {\n      radius = 0.5;\n    }\n    if (tubeRadius === void 0) {\n      tubeRadius = 0.1;\n    }\n    if (radialSegments === void 0) {\n      radialSegments = 30;\n    }\n    if (tubularSegments === void 0) {\n      tubularSegments = 30;\n    }\n    if (arc === void 0) {\n      arc = 360;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    radialSegments = Math.floor(radialSegments);\n    tubularSegments = Math.floor(tubularSegments);\n    var vertexCount = (radialSegments + 1) * (tubularSegments + 1);\n    var rectangleCount = radialSegments * tubularSegments;\n    var indices = PrimitiveMesh._generateIndices(engine, vertexCount, rectangleCount * 6);\n    var positions = new Array(vertexCount);\n    var normals = new Array(vertexCount);\n    var uvs = new Array(vertexCount);\n    arc = arc / 180 * Math.PI;\n    var offset = 0;\n    for (var i = 0; i <= radialSegments; i++) {\n      for (var j = 0; j <= tubularSegments; j++) {\n        var u = j / tubularSegments * arc;\n        var v = i / radialSegments * Math.PI * 2;\n        var cosV = Math.cos(v);\n        var sinV = Math.sin(v);\n        var cosU = Math.cos(u);\n        var sinU = Math.sin(u);\n        var position = new Vector3((radius + tubeRadius * cosV) * cosU, (radius + tubeRadius * cosV) * sinU, tubeRadius * sinV);\n        positions[offset] = position;\n        var centerX = radius * cosU;\n        var centerY = radius * sinU;\n        normals[offset] = new Vector3(position.x - centerX, position.y - centerY, position.z).normalize();\n        uvs[offset++] = new Vector2(j / tubularSegments, i / radialSegments);\n      }\n    }\n    offset = 0;\n    for (var _i6 = 1; _i6 <= radialSegments; _i6++) {\n      for (var _j = 1; _j <= tubularSegments; _j++) {\n        var a = (tubularSegments + 1) * _i6 + _j - 1;\n        var b = (tubularSegments + 1) * (_i6 - 1) + _j - 1;\n        var c = (tubularSegments + 1) * (_i6 - 1) + _j;\n        var d = (tubularSegments + 1) * _i6 + _j;\n        indices[offset++] = a;\n        indices[offset++] = b;\n        indices[offset++] = d;\n        indices[offset++] = b;\n        indices[offset++] = c;\n        indices[offset++] = d;\n      }\n    }\n    var bounds = mesh.bounds;\n    var outerRadius = radius + tubeRadius;\n    bounds.min.set(-outerRadius, -outerRadius, -tubeRadius);\n    bounds.max.set(outerRadius, outerRadius, tubeRadius);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a cone mesh.\n   * @param engine - Engine\n   * @param radius - The radius of cap\n   * @param height - The height of torso\n   * @param radialSegments - Cylinder radial segments\n   * @param heightSegments - Cylinder height segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Cone model mesh\n   */;\n  PrimitiveMesh.createCone = function createCone(engine, radius, height, radialSegments, heightSegments, noLongerAccessible) {\n    if (radius === void 0) {\n      radius = 0.5;\n    }\n    if (height === void 0) {\n      height = 2;\n    }\n    if (radialSegments === void 0) {\n      radialSegments = 20;\n    }\n    if (heightSegments === void 0) {\n      heightSegments = 1;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    radialSegments = Math.floor(radialSegments);\n    heightSegments = Math.floor(heightSegments);\n    var radialCount = radialSegments + 1;\n    var verticalCount = heightSegments + 1;\n    var halfHeight = height * 0.5;\n    var unitHeight = height / heightSegments;\n    var torsoVertexCount = radialCount * verticalCount;\n    var torsoRectangleCount = radialSegments * heightSegments;\n    var totalVertexCount = torsoVertexCount + 1 + radialSegments;\n    var indices = PrimitiveMesh._generateIndices(engine, totalVertexCount, torsoRectangleCount * 6 + radialSegments * 3);\n    var radialCountReciprocal = 1.0 / radialCount;\n    var radialSegmentsReciprocal = 1.0 / radialSegments;\n    var heightSegmentsReciprocal = 1.0 / heightSegments;\n    var positions = new Array(totalVertexCount);\n    var normals = new Array(totalVertexCount);\n    var uvs = new Array(totalVertexCount);\n    var indicesOffset = 0;\n\n    // Create torso\n    var thetaStart = Math.PI;\n    var thetaRange = Math.PI * 2;\n    var slope = radius / height;\n    for (var i = 0; i < torsoVertexCount; ++i) {\n      var x = i % radialCount;\n      var y = i * radialCountReciprocal | 0;\n      var u = x * radialSegmentsReciprocal;\n      var v = y * heightSegmentsReciprocal;\n      var theta = thetaStart + u * thetaRange;\n      var sinTheta = Math.sin(theta);\n      var cosTheta = Math.cos(theta);\n      var curRadius = radius - y * radius;\n      var posX = curRadius * sinTheta;\n      var posY = y * unitHeight - halfHeight;\n      var posZ = curRadius * cosTheta;\n\n      // Position\n      positions[i] = new Vector3(posX, posY, posZ);\n      // Normal\n      normals[i] = new Vector3(sinTheta, slope, cosTheta);\n      // Texcoord\n      uvs[i] = new Vector2(u, 1 - v);\n    }\n    for (var _i7 = 0; _i7 < torsoRectangleCount; ++_i7) {\n      var _x4 = _i7 % radialSegments;\n      var _y3 = _i7 * radialSegmentsReciprocal | 0;\n      var a = _y3 * radialCount + _x4;\n      var b = a + 1;\n      var c = a + radialCount;\n      var d = c + 1;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = c;\n    }\n\n    // Bottom position\n    positions[torsoVertexCount] = new Vector3(0, -halfHeight, 0);\n    // Bottom normal\n    normals[torsoVertexCount] = new Vector3(0, -1, 0);\n    // Bottom texcoord\n    uvs[torsoVertexCount] = new Vector2(0.5, 0.5);\n\n    // Add bottom cap vertices\n    var offset = torsoVertexCount + 1;\n    var diameterBottomReciprocal = 1.0 / (radius * 2);\n    for (var _i8 = 0; _i8 < radialSegments; ++_i8) {\n      var curPos = positions[_i8];\n      var curPosX = curPos.x;\n      var curPosZ = curPos.z;\n\n      // Bottom position\n      positions[offset] = new Vector3(curPosX, -halfHeight, curPosZ);\n      // Bottom normal\n      normals[offset] = new Vector3(0, -1, 0);\n      // Bottom texcoord\n      uvs[offset++] = new Vector2(curPosX * diameterBottomReciprocal + 0.5, 0.5 - curPosZ * diameterBottomReciprocal);\n    }\n    var bottomIndiceIndex = torsoVertexCount + 1;\n    for (var _i9 = 0; _i9 < radialSegments; ++_i9) {\n      var firstStride = _i9;\n      var secondStride = _i9 === radialSegments - 1 ? 0 : firstStride + 1;\n\n      // Bottom\n      indices[indicesOffset++] = torsoVertexCount;\n      indices[indicesOffset++] = bottomIndiceIndex + secondStride;\n      indices[indicesOffset++] = bottomIndiceIndex + firstStride;\n    }\n    var bounds = mesh.bounds;\n    bounds.min.set(-radius, -halfHeight, -radius);\n    bounds.max.set(radius, halfHeight, radius);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  }\n\n  /**\n   * Create a capsule mesh.\n   * @param engine - Engine\n   * @param radius - The radius of the two hemispherical ends\n   * @param height - The height of the cylindrical part, measured between the centers of the hemispherical ends\n   * @param radialSegments - Hemispherical end radial segments\n   * @param heightSegments - Cylindrical part height segments\n   * @param noLongerAccessible - No longer access the vertices of the mesh after creation\n   * @returns Capsule model mesh\n   */;\n  PrimitiveMesh.createCapsule = function createCapsule(engine, radius, height, radialSegments, heightSegments, noLongerAccessible) {\n    if (radius === void 0) {\n      radius = 0.5;\n    }\n    if (height === void 0) {\n      height = 2;\n    }\n    if (radialSegments === void 0) {\n      radialSegments = 6;\n    }\n    if (heightSegments === void 0) {\n      heightSegments = 1;\n    }\n    if (noLongerAccessible === void 0) {\n      noLongerAccessible = true;\n    }\n    var mesh = new ModelMesh(engine);\n    radialSegments = Math.max(2, Math.floor(radialSegments));\n    heightSegments = Math.floor(heightSegments);\n    var radialCount = radialSegments + 1;\n    var verticalCount = heightSegments + 1;\n    var halfHeight = height * 0.5;\n    var unitHeight = height / heightSegments;\n    var torsoVertexCount = radialCount * verticalCount;\n    var torsoRectangleCount = radialSegments * heightSegments;\n    var capVertexCount = radialCount * radialCount;\n    var capRectangleCount = radialSegments * radialSegments;\n    var totalVertexCount = torsoVertexCount + 2 * capVertexCount;\n    var indices = PrimitiveMesh._generateIndices(engine, totalVertexCount, (torsoRectangleCount + 2 * capRectangleCount) * 6);\n    var radialCountReciprocal = 1.0 / radialCount;\n    var radialSegmentsReciprocal = 1.0 / radialSegments;\n    var heightSegmentsReciprocal = 1.0 / heightSegments;\n    var thetaStart = Math.PI;\n    var thetaRange = Math.PI * 2;\n    var positions = new Array(totalVertexCount);\n    var normals = new Array(totalVertexCount);\n    var uvs = new Array(totalVertexCount);\n    var indicesOffset = 0;\n\n    // create torso\n    for (var i = 0; i < torsoVertexCount; ++i) {\n      var x = i % radialCount;\n      var y = i * radialCountReciprocal | 0;\n      var u = x * radialSegmentsReciprocal;\n      var v = y * heightSegmentsReciprocal;\n      var theta = thetaStart + u * thetaRange;\n      var sinTheta = Math.sin(theta);\n      var cosTheta = Math.cos(theta);\n      positions[i] = new Vector3(radius * sinTheta, y * unitHeight - halfHeight, radius * cosTheta);\n      normals[i] = new Vector3(sinTheta, 0, cosTheta);\n      uvs[i] = new Vector2(u, 1 - v);\n    }\n    for (var _i10 = 0; _i10 < torsoRectangleCount; ++_i10) {\n      var _x5 = _i10 % radialSegments;\n      var _y4 = _i10 * radialSegmentsReciprocal | 0;\n      var a = _y4 * radialCount + _x5;\n      var b = a + 1;\n      var c = a + radialCount;\n      var d = c + 1;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = c;\n    }\n    PrimitiveMesh._createCapsuleCap(radius, height, radialSegments, thetaRange, torsoVertexCount, 1, positions, normals, uvs, indices, indicesOffset);\n    PrimitiveMesh._createCapsuleCap(radius, height, radialSegments, -thetaRange, torsoVertexCount + capVertexCount, -1, positions, normals, uvs, indices, indicesOffset + 6 * capRectangleCount);\n    var bounds = mesh.bounds;\n    bounds.min.set(-radius, -radius - halfHeight, -radius);\n    bounds.max.set(radius, radius + halfHeight, radius);\n    PrimitiveMesh._initialize(mesh, positions, normals, uvs, indices, noLongerAccessible);\n    return mesh;\n  };\n  PrimitiveMesh._initialize = function _initialize(mesh, positions, normals, uvs, indices, noLongerAccessible) {\n    mesh.setPositions(positions);\n    mesh.setNormals(normals);\n    mesh.setUVs(uvs);\n    mesh.setIndices(indices);\n    mesh.uploadData(noLongerAccessible);\n    mesh.addSubMesh(0, indices.length);\n  };\n  PrimitiveMesh._generateIndices = function _generateIndices(engine, vertexCount, indexCount) {\n    var indices = null;\n    if (vertexCount > 65535) {\n      if (engine._hardwareRenderer.canIUse(GLCapabilityType.elementIndexUint)) {\n        indices = new Uint32Array(indexCount);\n      } else {\n        throw Error(\"The vertex count is over limit.\");\n      }\n    } else {\n      indices = new Uint16Array(indexCount);\n    }\n    return indices;\n  };\n  PrimitiveMesh._createCapsuleCap = function _createCapsuleCap(radius, height, radialSegments, capAlphaRange, offset, posIndex, positions, normals, uvs, indices, indicesOffset) {\n    var radialCount = radialSegments + 1;\n    var halfHeight = height * 0.5 * posIndex;\n    var capVertexCount = radialCount * radialCount;\n    var capRectangleCount = radialSegments * radialSegments;\n    var radialCountReciprocal = 1.0 / radialCount;\n    var radialSegmentsReciprocal = 1.0 / radialSegments;\n    for (var i = 0; i < capVertexCount; ++i) {\n      var x = i % radialCount;\n      var y = i * radialCountReciprocal | 0;\n      var u = x * radialSegmentsReciprocal;\n      var v = y * radialSegmentsReciprocal;\n      var alphaDelta = u * capAlphaRange;\n      var thetaDelta = v * Math.PI / 2;\n      var sinTheta = Math.sin(thetaDelta);\n      var posX = -radius * Math.cos(alphaDelta) * sinTheta;\n      var posY = radius * Math.cos(thetaDelta) * posIndex + halfHeight;\n      var posZ = radius * Math.sin(alphaDelta) * sinTheta;\n      var index = i + offset;\n      positions[index] = new Vector3(posX, posY, posZ);\n      normals[index] = new Vector3(posX, posY - halfHeight, posZ);\n      uvs[index] = new Vector2(u, v);\n    }\n    for (var _i11 = 0; _i11 < capRectangleCount; ++_i11) {\n      var _x6 = _i11 % radialSegments;\n      var _y5 = _i11 * radialSegmentsReciprocal | 0;\n      var a = _y5 * radialCount + _x6 + offset;\n      var b = a + 1;\n      var c = a + radialCount;\n      var d = c + 1;\n      indices[indicesOffset++] = b;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = d;\n      indices[indicesOffset++] = a;\n      indices[indicesOffset++] = c;\n      indices[indicesOffset++] = d;\n    }\n  };\n  return PrimitiveMesh;\n}();\n\n/**\n * BufferMesh.\n */\nvar BufferMesh = /*#__PURE__*/function (_Mesh) {\n  _inheritsLoose(BufferMesh, _Mesh);\n  function BufferMesh() {\n    return _Mesh.apply(this, arguments) || this;\n  }\n  var _proto = BufferMesh.prototype;\n  /**\n   * Set vertex elements.\n   * @param elements - Vertex element collection\n   */\n  _proto.setVertexElements = function setVertexElements(elements) {\n    this._setVertexElements(elements);\n  }\n\n  /**\n   * Set vertex buffer binding.\n   * @param vertexBufferBindings - Vertex buffer binding\n   * @param index - Vertex buffer index, the default value is 0\n   */;\n  _proto.setVertexBufferBinding = function setVertexBufferBinding(bufferOrBinding, strideOrFirstIndex, index) {\n    if (strideOrFirstIndex === void 0) {\n      strideOrFirstIndex = 0;\n    }\n    if (index === void 0) {\n      index = 0;\n    }\n    var binding = bufferOrBinding;\n    var isBinding = binding.buffer !== undefined;\n    isBinding || (binding = new VertexBufferBinding(bufferOrBinding, strideOrFirstIndex));\n    var bindings = this._vertexBufferBindings;\n    bindings.length <= index && (bindings.length = index + 1);\n    this._setVertexBufferBinding(isBinding ? strideOrFirstIndex : index, binding);\n  }\n\n  /**\n   * Set vertex buffer binding.\n   * @param vertexBufferBindings - Vertex buffer binding\n   * @param firstIndex - First vertex buffer index, the default value is 0\n   */;\n  _proto.setVertexBufferBindings = function setVertexBufferBindings(vertexBufferBindings, firstIndex) {\n    if (firstIndex === void 0) {\n      firstIndex = 0;\n    }\n    var bindings = this._vertexBufferBindings;\n    var count = vertexBufferBindings.length;\n    var needLength = firstIndex + count;\n    bindings.length < needLength && (bindings.length = needLength);\n    for (var i = 0; i < count; i++) {\n      this._setVertexBufferBinding(firstIndex + i, vertexBufferBindings[i]);\n    }\n  }\n\n  /**\n   * Set index buffer binding.\n   * @param buffer - Index buffer\n   * @param format - Index buffer format\n   */;\n  _proto.setIndexBufferBinding = function setIndexBufferBinding(bufferOrBinding, format) {\n    var binding = bufferOrBinding;\n    if (binding) {\n      var isBinding = binding.buffer !== undefined;\n      isBinding || (binding = new IndexBufferBinding(bufferOrBinding, format));\n    }\n    this._setIndexBufferBinding(binding);\n  };\n  _createClass(BufferMesh, [{\n    key: \"instanceCount\",\n    get:\n    /**\n     * Instanced count, disable instanced drawing when set zero.\n     */\n    function get() {\n      return this._instanceCount;\n    },\n    set: function set(value) {\n      this._instanceCount = value;\n    }\n\n    /**\n     * Vertex buffer binding collection.\n     */\n  }, {\n    key: \"vertexBufferBindings\",\n    get: function get() {\n      return this._vertexBufferBindings;\n    }\n\n    /**\n     * Index buffer binding.\n     */\n  }, {\n    key: \"indexBufferBinding\",\n    get: function get() {\n      return this._indexBufferBinding;\n    }\n\n    /**\n     * Vertex element collection.\n     */\n  }, {\n    key: \"vertexElements\",\n    get: function get() {\n      return this._vertexElements;\n    }\n  }]);\n  return BufferMesh;\n}(Mesh);\n\n/**\n * BlendShapeFrame.\n */\nvar BlendShapeFrame = /** Weight of BlendShapeFrame. */\n\n/** Delta positions for the frame being added. */\n\n/** Delta normals for the frame being added. */\n\n/** Delta tangents for the frame being added. */\n\n/**\n * Create a BlendShapeFrame.\n * @param weight - Weight of BlendShapeFrame\n * @param deltaPositions - Delta positions for the frame being added\n * @param deltaNormals - Delta normals for the frame being added\n * @param deltaTangents - Delta tangents for the frame being added\n */\nfunction BlendShapeFrame(weight, deltaPositions, deltaNormals, deltaTangents) {\n  if (deltaNormals === void 0) {\n    deltaNormals = null;\n  }\n  if (deltaTangents === void 0) {\n    deltaTangents = null;\n  }\n  this.weight = void 0;\n  this.deltaPositions = void 0;\n  this.deltaNormals = void 0;\n  this.deltaTangents = void 0;\n  if (deltaNormals && deltaNormals.length !== deltaPositions.length) {\n    throw \"deltaNormals length must same with deltaPositions length.\";\n  }\n  if (deltaTangents && deltaTangents.length !== deltaPositions.length) {\n    throw \"deltaTangents length must same with deltaPositions length.\";\n  }\n  this.weight = weight;\n  this.deltaPositions = deltaPositions;\n  this.deltaNormals = deltaNormals;\n  this.deltaTangents = deltaTangents;\n};\n\n/**\n * BlendShape.\n */\nvar BlendShape = /*#__PURE__*/function () {\n  /**\n   * Create a BlendShape.\n   * @param name - BlendShape name.\n   */\n  function BlendShape(name) {\n    this.name = void 0;\n    this._useBlendShapeNormal = true;\n    this._useBlendShapeTangent = true;\n    this._layoutChangeManager = new UpdateFlagManager();\n    this._dataChangeManager = new UpdateFlagManager();\n    this._frames = [];\n    this.name = name;\n  }\n\n  /**\n   * Add a BlendShapeFrame by weight, deltaPositions, deltaNormals and deltaTangents.\n   * @param weight - Weight of BlendShapeFrame\n   * @param deltaPositions - Delta positions for the frame being added\n   * @param deltaNormals - Delta normals for the frame being added\n   * @param deltaTangents - Delta tangents for the frame being added\n   */\n  var _proto = BlendShape.prototype;\n  _proto.addFrame = function addFrame(frameOrWeight, deltaPositions, deltaNormals, deltaTangents) {\n    if (typeof frameOrWeight === \"number\") {\n      var _frame = new BlendShapeFrame(frameOrWeight, deltaPositions, deltaNormals, deltaTangents);\n      this._addFrame(_frame);\n      return _frame;\n    } else {\n      this._addFrame(frameOrWeight);\n    }\n  }\n\n  /**\n   * Clear all frames.\n   */;\n  _proto.clearFrames = function clearFrames() {\n    this._frames.length = 0;\n    this._updateUseNormalAndTangent(true, true);\n    this._dataChangeManager.dispatch();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addLayoutChangeFlag = function _addLayoutChangeFlag(flag) {\n    this._layoutChangeManager.addFlag(flag);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addDataDirtyFlag = function _addDataDirtyFlag(flag) {\n    this._dataChangeManager.addFlag(flag);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._createSubDataDirtyFlag = function _createSubDataDirtyFlag() {\n    return this._dataChangeManager.createFlag(BoolUpdateFlag);\n  };\n  _proto._addFrame = function _addFrame(frame) {\n    var frames = this._frames;\n    var frameCount = frames.length;\n    if (frameCount > 0 && frame.deltaPositions.length !== frames[frameCount - 1].deltaPositions.length) {\n      throw \"Frame's deltaPositions length must same with before frame deltaPositions length.\";\n    }\n    this._frames.push(frame);\n    this._updateUseNormalAndTangent(!!frame.deltaNormals, !!frame.deltaTangents);\n    this._dataChangeManager.dispatch();\n  };\n  _proto._updateUseNormalAndTangent = function _updateUseNormalAndTangent(useNormal, useTangent) {\n    var useBlendShapeNormal = this._useBlendShapeNormal && useNormal;\n    var useBlendShapeTangent = this._useBlendShapeTangent && useTangent;\n    if (this._useBlendShapeNormal !== useBlendShapeNormal || this._useBlendShapeTangent !== useBlendShapeTangent) {\n      this._useBlendShapeNormal = useBlendShapeNormal;\n      this._useBlendShapeTangent = useBlendShapeTangent;\n      this._layoutChangeManager.dispatch(this);\n    }\n  };\n  _createClass(BlendShape, [{\n    key: \"frames\",\n    get: /** Name of BlendShape. */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Frames of BlendShape.\n     */\n    function get() {\n      return this._frames;\n    }\n  }]);\n  return BlendShape;\n}();\n\nvar Basic2DBatcher = /*#__PURE__*/function () {\n  /** The maximum number of vertex. */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  function Basic2DBatcher(engine) {\n    this._engine = void 0;\n    this._subMeshPool = new ClassPool(SubMesh);\n    this._batchedQueue = [];\n    this._meshes = [];\n    this._meshCount = 1;\n    this._vertexBuffers = [];\n    this._indiceBuffers = [];\n    this._vertices = void 0;\n    this._indices = void 0;\n    this._flushId = 0;\n    this._vertexCount = 0;\n    this._elementCount = 0;\n    this._engine = engine;\n    var MAX_VERTEX_COUNT = Basic2DBatcher.MAX_VERTEX_COUNT;\n    this._vertices = new Float32Array(MAX_VERTEX_COUNT * 9);\n    this._indices = new Uint16Array(MAX_VERTEX_COUNT * 3);\n    var _meshes = this._meshes,\n      _meshCount = this._meshCount;\n    for (var i = 0; i < _meshCount; i++) {\n      _meshes[i] = this._createMesh(engine, i);\n    }\n  }\n  var _proto = Basic2DBatcher.prototype;\n  _proto.drawElement = function drawElement(element, camera, replaceMaterial) {\n    if (element.multiRenderData) {\n      var elements = element.charElements;\n      for (var i = 0, n = elements.length; i < n; ++i) {\n        this._drawSubElement(elements[i], camera, replaceMaterial);\n      }\n    } else {\n      this._drawSubElement(element, camera, replaceMaterial);\n    }\n  };\n  _proto._drawSubElement = function _drawSubElement(element, camera, replaceMaterial) {\n    var len = element.renderData.vertexCount;\n    if (this._vertexCount + len > Basic2DBatcher.MAX_VERTEX_COUNT) {\n      this.flush(camera, replaceMaterial);\n    }\n    this._vertexCount += len;\n    this._batchedQueue[this._elementCount++] = element;\n  };\n  _proto.flush = function flush(camera, replaceMaterial) {\n    var batchedQueue = this._batchedQueue;\n    if (batchedQueue.length === 0) {\n      return;\n    }\n    this._updateData(this._engine);\n    this.drawBatches(camera, replaceMaterial);\n    if (!Basic2DBatcher._canUploadSameBuffer) {\n      this._flushId++;\n    }\n    batchedQueue.length = 0;\n    this._subMeshPool.resetPool();\n    this._vertexCount = 0;\n    this._elementCount = 0;\n  };\n  _proto.clear = function clear() {\n    this._flushId = 0;\n    this._vertexCount = 0;\n    this._elementCount = 0;\n    this._batchedQueue.length = 0;\n  };\n  _proto.destroy = function destroy() {\n    this._batchedQueue = null;\n    var meshes = this._meshes,\n      vertexBuffers = this._vertexBuffers,\n      indiceBuffers = this._indiceBuffers;\n    for (var i = 0, n = meshes.length; i < n; ++i) {\n      meshes[i].destroy();\n    }\n    this._meshes = null;\n    for (var _i = 0, _n = vertexBuffers.length; _i < _n; ++_i) {\n      vertexBuffers[_i].destroy();\n    }\n    this._vertexBuffers = null;\n    for (var _i2 = 0, _n2 = indiceBuffers.length; _i2 < _n2; ++_i2) {\n      indiceBuffers[_i2].destroy();\n    }\n    this._indiceBuffers = null;\n  };\n  _proto._createMesh = function _createMesh(engine, index) {\n    var MAX_VERTEX_COUNT = Basic2DBatcher.MAX_VERTEX_COUNT;\n    var mesh = new BufferMesh(engine, \"BufferMesh\" + index);\n    var vertexElements = [];\n    var vertexStride = this.createVertexElements(vertexElements);\n\n    // vertices\n    this._vertexBuffers[index] = new Buffer(engine, BufferBindFlag.VertexBuffer, MAX_VERTEX_COUNT * 4 * vertexStride, BufferUsage.Dynamic);\n    // indices\n    this._indiceBuffers[index] = new Buffer(engine, BufferBindFlag.IndexBuffer, MAX_VERTEX_COUNT * 3, BufferUsage.Dynamic);\n    mesh.setVertexBufferBinding(this._vertexBuffers[index], vertexStride);\n    mesh.setIndexBufferBinding(this._indiceBuffers[index], IndexFormat.UInt16);\n    mesh.setVertexElements(vertexElements);\n    return mesh;\n  };\n  _proto._updateData = function _updateData(engine) {\n    var _meshes = this._meshes,\n      _flushId = this._flushId;\n    if (!Basic2DBatcher._canUploadSameBuffer && this._meshCount <= _flushId) {\n      this._meshCount++;\n      _meshes[_flushId] = this._createMesh(engine, _flushId);\n    }\n    var batchedQueue = this._batchedQueue,\n      vertices = this._vertices,\n      indices = this._indices;\n    var mesh = _meshes[_flushId];\n    mesh.clearSubMesh();\n    var vertexIndex = 0;\n    var indiceIndex = 0;\n    var vertexStartIndex = 0;\n    var vertexCount = 0;\n    var curIndiceStartIndex = 0;\n    var curMeshIndex = 0;\n    var preElement = null;\n    for (var i = 0, len = batchedQueue.length; i < len; i++) {\n      var _curElement = batchedQueue[i];\n\n      // Batch vertex\n      vertexIndex = this.updateVertices(_curElement, vertices, vertexIndex);\n\n      // Batch indice\n      var triangles = _curElement.renderData.triangles;\n      var triangleNum = triangles.length;\n      for (var j = 0; j < triangleNum; j++) {\n        indices[indiceIndex++] = triangles[j] + curIndiceStartIndex;\n      }\n      curIndiceStartIndex += _curElement.renderData.vertexCount;\n      if (preElement === null) {\n        vertexCount += triangleNum;\n      } else {\n        if (this.canBatch(preElement, _curElement)) {\n          vertexCount += triangleNum;\n        } else {\n          mesh.addSubMesh(this._getSubMeshFromPool(vertexStartIndex, vertexCount));\n          vertexStartIndex += vertexCount;\n          vertexCount = triangleNum;\n          batchedQueue[curMeshIndex++] = preElement;\n        }\n      }\n      preElement = _curElement;\n    }\n    mesh.addSubMesh(this._getSubMeshFromPool(vertexStartIndex, vertexCount));\n    batchedQueue[curMeshIndex] = preElement;\n    this._vertexBuffers[_flushId].setData(vertices, 0, 0, vertexIndex);\n    this._indiceBuffers[_flushId].setData(indices, 0, 0, indiceIndex);\n  };\n  _proto._getSubMeshFromPool = function _getSubMeshFromPool(start, count) {\n    var subMesh = this._subMeshPool.getFromPool();\n    subMesh.start = start;\n    subMesh.count = count;\n    subMesh.topology = MeshTopology.Triangles;\n    return subMesh;\n  }\n\n  /**\n   * @internal\n   */;\n  return Basic2DBatcher;\n}();\nBasic2DBatcher.MAX_VERTEX_COUNT = 4096;\nBasic2DBatcher._canUploadSameBuffer = true;\n\nvar SpriteMaskBatcher = /*#__PURE__*/function (_Basic2DBatcher) {\n  _inheritsLoose(SpriteMaskBatcher, _Basic2DBatcher);\n  function SpriteMaskBatcher() {\n    return _Basic2DBatcher.apply(this, arguments) || this;\n  }\n  var _proto = SpriteMaskBatcher.prototype;\n  _proto.createVertexElements = function createVertexElements(vertexElements) {\n    vertexElements[0] = new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0);\n    vertexElements[1] = new VertexElement(\"TEXCOORD_0\", 12, VertexElementFormat.Vector2, 0);\n    return 20;\n  };\n  _proto.canBatch = function canBatch(preElement, curElement) {\n    if (preElement.isAdd !== curElement.isAdd) {\n      return false;\n    }\n\n    // Compare renderer property\n    var preShaderData = preElement.component.shaderData;\n    var curShaderData = curElement.component.shaderData;\n    var textureProperty = SpriteMask._textureProperty;\n    var alphaCutoffProperty = SpriteMask._alphaCutoffProperty;\n    return preShaderData.getTexture(textureProperty) === curShaderData.getTexture(textureProperty) && preShaderData.getTexture(alphaCutoffProperty) === curShaderData.getTexture(alphaCutoffProperty);\n  };\n  _proto.updateVertices = function updateVertices(element, vertices, vertexIndex) {\n    var _element$renderData = element.renderData,\n      positions = _element$renderData.positions,\n      uvs = _element$renderData.uvs,\n      vertexCount = _element$renderData.vertexCount;\n    for (var i = 0; i < vertexCount; i++) {\n      var curPos = positions[i];\n      var curUV = uvs[i];\n      vertices[vertexIndex++] = curPos.x;\n      vertices[vertexIndex++] = curPos.y;\n      vertices[vertexIndex++] = curPos.z;\n      vertices[vertexIndex++] = curUV.x;\n      vertices[vertexIndex++] = curUV.y;\n    }\n    return vertexIndex;\n  };\n  _proto.drawBatches = function drawBatches(camera) {\n    var engine = this._engine,\n      batchedQueue = this._batchedQueue;\n    var mesh = this._meshes[this._flushId];\n    var subMeshes = mesh.subMeshes;\n    var sceneData = camera.scene.shaderData;\n    var cameraData = camera.shaderData;\n    for (var i = 0, len = subMeshes.length; i < len; i++) {\n      var subMesh = subMeshes[i];\n      var spriteMaskElement = batchedQueue[i];\n      if (!subMesh || !spriteMaskElement) {\n        return;\n      }\n      var renderer = spriteMaskElement.component;\n      var material = spriteMaskElement.material;\n      var compileMacros = Shader._compileMacros;\n      // union render global macro and material self macro.\n      ShaderMacroCollection.unionCollection(renderer._globalShaderMacro, material.shaderData._macroCollection, compileMacros);\n\n      // Update stencil state\n      var stencilState = material.renderState.stencilState;\n      var op = spriteMaskElement.isAdd ? StencilOperation.IncrementSaturate : StencilOperation.DecrementSaturate;\n      stencilState.passOperationFront = op;\n      stencilState.passOperationBack = op;\n      var program = material.shader._getShaderProgram(engine, compileMacros);\n      if (!program.isValid) {\n        return;\n      }\n      program.bind();\n      program.groupingOtherUniformBlock();\n      program.uploadAll(program.sceneUniformBlock, sceneData);\n      program.uploadAll(program.cameraUniformBlock, cameraData);\n      program.uploadAll(program.rendererUniformBlock, renderer.shaderData);\n      program.uploadAll(program.materialUniformBlock, material.shaderData);\n      material.renderState._apply(engine, false);\n      engine._hardwareRenderer.drawPrimitive(mesh, subMesh, program);\n    }\n  };\n  return SpriteMaskBatcher;\n}(Basic2DBatcher);\n\n/**\n * @internal\n */\nvar SpriteMaskManager = /*#__PURE__*/function () {\n  function SpriteMaskManager(engine) {\n    this._batcher = void 0;\n    this._preMaskLayer = 0;\n    this._batcher = new SpriteMaskBatcher(engine);\n  }\n  var _proto = SpriteMaskManager.prototype;\n  _proto.clear = function clear() {\n    this._preMaskLayer = 0;\n    this._batcher.clear();\n  };\n  _proto.preRender = function preRender(camera, renderer) {\n    if (renderer.maskInteraction === SpriteMaskInteraction.None) {\n      return;\n    }\n    this._batcher.clear();\n    this._processMasksDiff(camera, renderer);\n    this._batcher.flush(camera, null);\n  };\n  _proto.postRender = function postRender(renderer) {\n    if (renderer.maskInteraction === SpriteMaskInteraction.None) {\n      return;\n    }\n    this._preMaskLayer = renderer.maskLayer;\n  };\n  _proto.destroy = function destroy() {\n    this._batcher.destroy();\n    this._batcher = null;\n  };\n  _proto._processMasksDiff = function _processMasksDiff(camera, renderer) {\n    var preMaskLayer = this._preMaskLayer;\n    var curMaskLayer = renderer.maskLayer;\n    if (preMaskLayer !== curMaskLayer) {\n      var allMasks = camera._renderPipeline._allSpriteMasks;\n      var commonLayer = preMaskLayer & curMaskLayer;\n      var addLayer = curMaskLayer & ~preMaskLayer;\n      var reduceLayer = preMaskLayer & ~curMaskLayer;\n      var allMaskElements = allMasks._elements;\n      for (var i = 0, n = allMasks.length; i < n; i++) {\n        var mask = allMaskElements[i];\n        var influenceLayers = mask.influenceLayers;\n        if (influenceLayers & commonLayer) {\n          continue;\n        }\n        if (influenceLayers & addLayer) {\n          var maskRenderElement = mask._maskElement;\n          maskRenderElement.isAdd = true;\n          this._batcher.drawElement(maskRenderElement, camera, null);\n          continue;\n        }\n        if (influenceLayers & reduceLayer) {\n          var _maskRenderElement = mask._maskElement;\n          _maskRenderElement.isAdd = false;\n          this._batcher.drawElement(_maskRenderElement, camera, null);\n        }\n      }\n    }\n  };\n  return SpriteMaskManager;\n}();\n\nvar TextRenderElement = /*#__PURE__*/function (_RenderElement) {\n  _inheritsLoose(TextRenderElement, _RenderElement);\n  function TextRenderElement() {\n    var _this;\n    _this = _RenderElement.call(this) || this;\n    _this.charElements = [];\n    _this.multiRenderData = true;\n    return _this;\n  }\n  return TextRenderElement;\n}(RenderElement);\n\n/**\n * The Background mode enumeration.\n */\nvar BackgroundMode;\n(function (BackgroundMode) {\n  BackgroundMode[BackgroundMode[\"SolidColor\"] = 0] = \"SolidColor\";\n  BackgroundMode[BackgroundMode[\"Sky\"] = 1] = \"Sky\";\n  BackgroundMode[BackgroundMode[\"Texture\"] = 2] = \"Texture\";\n})(BackgroundMode || (BackgroundMode = {}));\n\n/**\n * Filling mode of background texture.\n */\nvar BackgroundTextureFillMode;\n(function (BackgroundTextureFillMode) {\n  BackgroundTextureFillMode[BackgroundTextureFillMode[\"AspectFitWidth\"] = 0] = \"AspectFitWidth\";\n  BackgroundTextureFillMode[BackgroundTextureFillMode[\"AspectFitHeight\"] = 1] = \"AspectFitHeight\";\n  BackgroundTextureFillMode[BackgroundTextureFillMode[\"Fill\"] = 2] = \"Fill\";\n})(BackgroundTextureFillMode || (BackgroundTextureFillMode = {}));\n\n/**\n * Sky.\n */\nvar Sky = function Sky() {\n  this.material = void 0;\n  this.mesh = void 0;\n  this._matrix = new Matrix();\n};\n\n/**\n * Background of scene.\n */\nvar Background = /*#__PURE__*/function () {\n  /**\n   * Constructor of Background.\n   * @param _engine Engine Which the background belongs to.\n   */\n  function Background(_engine) {\n    this._engine = _engine;\n    this.mode = BackgroundMode.SolidColor;\n    this.solidColor = new Color(0.25, 0.25, 0.25, 1.0);\n    this.sky = new Sky();\n    this._textureFillMode = BackgroundTextureFillMode.AspectFitHeight;\n    this._mesh = void 0;\n    this._texture = null;\n    this._mesh = this._createPlane(_engine);\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = Background.prototype;\n  _proto._resizeBackgroundTexture = function _resizeBackgroundTexture() {\n    if (!this._texture) {\n      return;\n    }\n    var canvas = this._engine.canvas;\n    var width = canvas.width,\n      height = canvas.height;\n    var _backgroundTextureMesh = this._mesh;\n    var positions = _backgroundTextureMesh.getPositions();\n    switch (this._textureFillMode) {\n      case BackgroundTextureFillMode.Fill:\n        positions[0].set(-1, -1, 1);\n        positions[1].set(1, -1, 1);\n        positions[2].set(-1, 1, 1);\n        positions[3].set(1, 1, 1);\n        break;\n      case BackgroundTextureFillMode.AspectFitWidth:\n        var fitWidthScale = this._texture.height * width / this.texture.width / height;\n        positions[0].set(-1, -fitWidthScale, 1);\n        positions[1].set(1, -fitWidthScale, 1);\n        positions[2].set(-1, fitWidthScale, 1);\n        positions[3].set(1, fitWidthScale, 1);\n        break;\n      case BackgroundTextureFillMode.AspectFitHeight:\n        var fitHeightScale = this._texture.width * height / this.texture.height / width;\n        positions[0].set(-fitHeightScale, -1, 1);\n        positions[1].set(fitHeightScale, -1, 1);\n        positions[2].set(-fitHeightScale, 1, 1);\n        positions[3].set(fitHeightScale, 1, 1);\n        break;\n    }\n    _backgroundTextureMesh.setPositions(positions);\n    _backgroundTextureMesh.uploadData(false);\n  };\n  _proto._createPlane = function _createPlane(engine) {\n    var mesh = new ModelMesh(engine);\n    mesh.isGCIgnored = true;\n    var indices = new Uint8Array([1, 2, 0, 1, 3, 2]);\n    var positions = new Array(4);\n    var uvs = new Array(4);\n    for (var i = 0; i < 4; ++i) {\n      positions[i] = new Vector3();\n      uvs[i] = new Vector2(i % 2, 1 - (i * 0.5 | 0));\n    }\n    mesh.setPositions(positions);\n    mesh.setUVs(uvs);\n    mesh.setIndices(indices);\n    mesh.uploadData(false);\n    mesh.addSubMesh(0, indices.length);\n    return mesh;\n  };\n  _createClass(Background, [{\n    key: \"texture\",\n    get:\n    /**\n     * Background mode.\n     * @defaultValue `BackgroundMode.SolidColor`\n     * @remarks If using `BackgroundMode.Sky` mode and material or mesh of the `sky` is not defined, it will downgrade to `BackgroundMode.SolidColor`.\n     */\n\n    /**\n     * Background solid color.\n     * @defaultValue `new Color(0.25, 0.25, 0.25, 1.0)`\n     * @remarks When `mode` is `BackgroundMode.SolidColor`, the property will take effects.\n     */\n\n    /**\n     * Background sky.\n     * @remarks When `mode` is `BackgroundMode.Sky`, the property will take effects.\n     */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Background texture.\n     * @remarks When `mode` is `BackgroundMode.Texture`, the property will take effects.\n     */\n    function get() {\n      return this._texture;\n    },\n    set: function set(value) {\n      if (this._texture !== value) {\n        this._texture = value;\n        this._engine._backgroundTextureMaterial.shaderData.setTexture(\"u_baseTexture\", value);\n      }\n    }\n\n    /**\n     * @internal\n     * Background texture fill mode.\n     * @remarks When `mode` is `BackgroundMode.Texture`, the property will take effects.\n     * @defaultValue `BackgroundTextureFillMode.FitHeight`\n     */\n  }, {\n    key: \"textureFillMode\",\n    get: function get() {\n      return this._textureFillMode;\n    },\n    set: function set(value) {\n      if (value !== this._textureFillMode) {\n        this._textureFillMode = value;\n        this._resizeBackgroundTexture();\n      }\n    }\n  }]);\n  return Background;\n}();\n\n/**\n * Diffuse mode.\n */\nvar DiffuseMode;\n(function (DiffuseMode) {\n  DiffuseMode[DiffuseMode[\"SolidColor\"] = 0] = \"SolidColor\";\n  DiffuseMode[DiffuseMode[\"SphericalHarmonics\"] = 1] = \"SphericalHarmonics\";\n})(DiffuseMode || (DiffuseMode = {}));\n\n/**\n * Ambient light.\n */\nvar AmbientLight = /*#__PURE__*/function () {\n  function AmbientLight() {\n    this._diffuseSphericalHarmonics = void 0;\n    this._diffuseSolidColor = new Color(0.212, 0.227, 0.259);\n    this._diffuseIntensity = 1.0;\n    this._specularTexture = void 0;\n    this._specularIntensity = 1.0;\n    this._diffuseMode = DiffuseMode.SolidColor;\n    this._shArray = new Float32Array(27);\n    this._scenes = [];\n    this._specularTextureDecodeRGBM = false;\n  }\n  var _proto = AmbientLight.prototype;\n  /**\n   * @internal\n   */\n  _proto._addToScene = function _addToScene(scene) {\n    this._scenes.push(scene);\n    var shaderData = scene.shaderData;\n    shaderData.setColor(AmbientLight._diffuseColorProperty, this._diffuseSolidColor);\n    shaderData.setFloat(AmbientLight._diffuseIntensityProperty, this._diffuseIntensity);\n    shaderData.setFloat(AmbientLight._specularIntensityProperty, this._specularIntensity);\n    shaderData.setFloatArray(AmbientLight._diffuseSHProperty, this._shArray);\n    this._setDiffuseMode(shaderData);\n    this._setSpecularTextureDecodeRGBM(shaderData);\n    this._setSpecularTexture(shaderData);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._removeFromScene = function _removeFromScene(scene) {\n    var scenes = this._scenes;\n    var index = scenes.indexOf(scene);\n    scenes.splice(index, 1);\n  };\n  _proto._setDiffuseMode = function _setDiffuseMode(sceneShaderData) {\n    if (this._diffuseMode === DiffuseMode.SphericalHarmonics) {\n      sceneShaderData.enableMacro(AmbientLight._shMacro);\n    } else {\n      sceneShaderData.disableMacro(AmbientLight._shMacro);\n    }\n  };\n  _proto._setSpecularTexture = function _setSpecularTexture(sceneShaderData) {\n    if (this._specularTexture) {\n      sceneShaderData.setTexture(AmbientLight._specularTextureProperty, this._specularTexture);\n      sceneShaderData.setFloat(AmbientLight._mipLevelProperty, this._specularTexture.mipmapCount - 1);\n      sceneShaderData.enableMacro(AmbientLight._specularMacro);\n    } else {\n      sceneShaderData.disableMacro(AmbientLight._specularMacro);\n    }\n  };\n  _proto._setSpecularTextureDecodeRGBM = function _setSpecularTextureDecodeRGBM(sceneShaderData) {\n    if (this._specularTextureDecodeRGBM) {\n      sceneShaderData.enableMacro(AmbientLight._decodeRGBMMacro);\n    } else {\n      sceneShaderData.disableMacro(AmbientLight._decodeRGBMMacro);\n    }\n  };\n  _proto._preComputeSH = function _preComputeSH(sh, out) {\n    /**\n     * Basis constants\n     *\n     * 0: 1/2 * Math.sqrt(1 / Math.PI)\n     *\n     * 1: -1/2 * Math.sqrt(3 / Math.PI)\n     * 2: 1/2 * Math.sqrt(3 / Math.PI)\n     * 3: -1/2 * Math.sqrt(3 / Math.PI)\n     *\n     * 4: 1/2 * Math.sqrt(15 / Math.PI)\n     * 5: -1/2 * Math.sqrt(15 / Math.PI)\n     * 6: 1/4 * Math.sqrt(5 / Math.PI)\n     * 7: -1/2 * Math.sqrt(15 / Math.PI)\n     * 8: 1/4 * Math.sqrt(15 / Math.PI)\n     */\n\n    /**\n     * Convolution kernel\n     *\n     * 0: Math.PI\n     * 1: (2 * Math.PI) / 3\n     * 2: Math.PI / 4\n     */\n\n    var src = sh.coefficients;\n\n    // l0\n    out[0] = src[0] * 0.886227; // kernel0 * basis0 = 0.886227\n    out[1] = src[1] * 0.886227;\n    out[2] = src[2] * 0.886227;\n\n    // l1\n    out[3] = src[3] * -1.023327; // kernel1 * basis1 = -1.023327;\n    out[4] = src[4] * -1.023327;\n    out[5] = src[5] * -1.023327;\n    out[6] = src[6] * 1.023327; // kernel1 * basis2 = 1.023327\n    out[7] = src[7] * 1.023327;\n    out[8] = src[8] * 1.023327;\n    out[9] = src[9] * -1.023327; // kernel1 * basis3 = -1.023327\n    out[10] = src[10] * -1.023327;\n    out[11] = src[11] * -1.023327;\n\n    // l2\n    out[12] = src[12] * 0.858086; // kernel2 * basis4 = 0.858086\n    out[13] = src[13] * 0.858086;\n    out[14] = src[14] * 0.858086;\n    out[15] = src[15] * -0.858086; // kernel2 * basis5 = -0.858086\n    out[16] = src[16] * -0.858086;\n    out[17] = src[17] * -0.858086;\n    out[18] = src[18] * 0.247708; // kernel2 * basis6 = 0.247708\n    out[19] = src[19] * 0.247708;\n    out[20] = src[20] * 0.247708;\n    out[21] = src[21] * -0.858086; // kernel2 * basis7 = -0.858086\n    out[22] = src[22] * -0.858086;\n    out[23] = src[23] * -0.858086;\n    out[24] = src[24] * 0.429042; // kernel2 * basis8 = 0.429042\n    out[25] = src[25] * 0.429042;\n    out[26] = src[26] * 0.429042;\n  };\n  _createClass(AmbientLight, [{\n    key: \"specularTextureDecodeRGBM\",\n    get:\n    /**\n     * Whether to decode from specularTexture with RGBM format.\n     */\n    function get() {\n      return this._specularTextureDecodeRGBM;\n    },\n    set: function set(value) {\n      this._specularTextureDecodeRGBM = value;\n      var scenes = this._scenes;\n      for (var i = 0, n = scenes.length; i < n; i++) {\n        this._setSpecularTextureDecodeRGBM(scenes[i].shaderData);\n      }\n    }\n\n    /**\n     * Diffuse mode of ambient light.\n     */\n  }, {\n    key: \"diffuseMode\",\n    get: function get() {\n      return this._diffuseMode;\n    },\n    set: function set(value) {\n      this._diffuseMode = value;\n      var scenes = this._scenes;\n      for (var i = 0, n = scenes.length; i < n; i++) {\n        this._setDiffuseMode(scenes[i].shaderData);\n      }\n    }\n\n    /**\n     * Diffuse reflection solid color.\n     * @remarks Effective when diffuse reflection mode is `DiffuseMode.SolidColor`.\n     */\n  }, {\n    key: \"diffuseSolidColor\",\n    get: function get() {\n      return this._diffuseSolidColor;\n    },\n    set: function set(value) {\n      if (value !== this._diffuseSolidColor) {\n        this._diffuseSolidColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Diffuse reflection spherical harmonics 3.\n     * @remarks Effective when diffuse reflection mode is `DiffuseMode.SphericalHarmonics`.\n     */\n  }, {\n    key: \"diffuseSphericalHarmonics\",\n    get: function get() {\n      return this._diffuseSphericalHarmonics;\n    },\n    set: function set(value) {\n      this._diffuseSphericalHarmonics = value;\n      if (value) {\n        this._preComputeSH(value, this._shArray);\n        var scenes = this._scenes;\n        for (var i = 0, n = scenes.length; i < n; i++) {\n          scenes[i].shaderData.setFloatArray(AmbientLight._diffuseSHProperty, this._shArray);\n        }\n      }\n    }\n\n    /**\n     * Diffuse reflection intensity.\n     */\n  }, {\n    key: \"diffuseIntensity\",\n    get: function get() {\n      return this._diffuseIntensity;\n    },\n    set: function set(value) {\n      this._diffuseIntensity = value;\n      var scenes = this._scenes;\n      for (var i = 0, n = scenes.length; i < n; i++) {\n        scenes[i].shaderData.setFloat(AmbientLight._diffuseIntensityProperty, value);\n      }\n    }\n\n    /**\n     * Specular reflection texture.\n     * @remarks This texture must be baked from @oasis-engine/baker\n     */\n  }, {\n    key: \"specularTexture\",\n    get: function get() {\n      return this._specularTexture;\n    },\n    set: function set(value) {\n      this._specularTexture = value;\n      var scenes = this._scenes;\n      for (var i = 0, n = scenes.length; i < n; i++) {\n        this._setSpecularTexture(scenes[i].shaderData);\n      }\n    }\n\n    /**\n     * Specular reflection intensity.\n     */\n  }, {\n    key: \"specularIntensity\",\n    get: function get() {\n      return this._specularIntensity;\n    },\n    set: function set(value) {\n      this._specularIntensity = value;\n      for (var i = 0, n = this._scenes.length; i < n; i++) {\n        this._scenes[i].shaderData.setFloat(AmbientLight._specularIntensityProperty, value);\n      }\n    }\n  }]);\n  return AmbientLight;\n}();\nAmbientLight._shMacro = Shader.getMacroByName(\"O3_USE_SH\");\nAmbientLight._specularMacro = Shader.getMacroByName(\"O3_USE_SPECULAR_ENV\");\nAmbientLight._decodeRGBMMacro = Shader.getMacroByName(\"O3_DECODE_ENV_RGBM\");\nAmbientLight._diffuseColorProperty = Shader.getPropertyByName(\"u_envMapLight.diffuse\");\nAmbientLight._diffuseSHProperty = Shader.getPropertyByName(\"u_env_sh\");\nAmbientLight._diffuseIntensityProperty = Shader.getPropertyByName(\"u_envMapLight.diffuseIntensity\");\nAmbientLight._specularTextureProperty = Shader.getPropertyByName(\"u_env_specularSampler\");\nAmbientLight._specularIntensityProperty = Shader.getPropertyByName(\"u_envMapLight.specularIntensity\");\nAmbientLight._mipLevelProperty = Shader.getPropertyByName(\"u_envMapLight.mipMapLevel\");\n\n/**\n * Scene feature plug-in.\n * @deprecated\n */\nvar SceneFeature = /*#__PURE__*/function () {\n  function SceneFeature() {}\n  var _proto = SceneFeature.prototype;\n  /**\n   * Callback before every scene update.\n   * @param scene - Scene\n   */\n  _proto.preUpdate = function preUpdate(scene) {}\n\n  /**\n   * Callback after every scene update.\n   * @param scene - Scene\n   */;\n  _proto.postUpdate = function postUpdate(scene) {}\n\n  /**\n   * Callback before scene rendering.\n   * @param scene - Scene\n   * @param camera - Camera\n   */;\n  _proto.preRender = function preRender(scene, camera) {}\n\n  /**\n   * Callback after scene rendering.\n   * @param scene - Scene\n   * @param camera - Camera\n   */;\n  _proto.postRender = function postRender(scene, camera) {}\n\n  /**\n   * Callback after the scene is destroyed.\n   * @param scene - Scene\n   */;\n  _proto.destroy = function destroy(scene) {};\n  return SceneFeature;\n}();\n\n/**\n * Light base class.\n */\nvar Light = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Light, _Component);\n  function Light() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this._viewMat = void 0;\n    _this._inverseViewMat = void 0;\n    return _this;\n  }\n  var _proto = Light.prototype;\n  /**\n   * Mount to the current Scene.\n   * @internal\n   * @override\n   */\n  _proto._onEnable = function _onEnable() {\n    this.scene.findFeature(LightFeature).attachRenderLight(this);\n  }\n\n  /**\n   * Unmount from the current Scene.\n   * @internal\n   * @override\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.scene.findFeature(LightFeature).detachRenderLight(this);\n  }\n\n  /**\n   * View matrix.\n   */;\n  _createClass(Light, [{\n    key: \"viewMatrix\",\n    get: function get() {\n      if (!this._viewMat) this._viewMat = new Matrix();\n      Matrix.invert(this.entity.transform.worldMatrix, this._viewMat);\n      return this._viewMat;\n    }\n\n    /**\n     * Inverse view matrix.\n     */\n  }, {\n    key: \"inverseViewMatrix\",\n    get: function get() {\n      if (!this._inverseViewMat) this._inverseViewMat = new Matrix();\n      Matrix.invert(this.viewMatrix, this._inverseViewMat);\n      return this._inverseViewMat;\n    }\n  }]);\n  return Light;\n}(Component);\nLight._maxLight = 10;\n\n/**\n * Directional light.\n */\nvar DirectLight = /*#__PURE__*/function (_Light) {\n  _inheritsLoose(DirectLight, _Light);\n  function DirectLight() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Light.call.apply(_Light, [this].concat(args)) || this;\n    _this.color = new Color(1, 1, 1, 1);\n    _this.intensity = 1;\n    _this._forward = new Vector3();\n    _this._lightColor = new Color(1, 1, 1, 1);\n    _this._reverseDirection = new Vector3();\n    return _this;\n  }\n  /**\n   * @internal\n   */\n  DirectLight._updateShaderData = function _updateShaderData(shaderData) {\n    var data = DirectLight._combinedData;\n    shaderData.setFloatArray(DirectLight._colorProperty, data.color);\n    shaderData.setFloatArray(DirectLight._directionProperty, data.direction);\n  };\n  var _proto = DirectLight.prototype;\n  /**\n   * @internal\n   */\n  _proto._appendData = function _appendData(lightIndex) {\n    var colorStart = lightIndex * 3;\n    var directionStart = lightIndex * 3;\n    var lightColor = this.lightColor;\n    var direction = this.direction;\n    var data = DirectLight._combinedData;\n    data.color[colorStart] = lightColor.r;\n    data.color[colorStart + 1] = lightColor.g;\n    data.color[colorStart + 2] = lightColor.b;\n    data.direction[directionStart] = direction.x;\n    data.direction[directionStart + 1] = direction.y;\n    data.direction[directionStart + 2] = direction.z;\n  };\n  _createClass(DirectLight, [{\n    key: \"direction\",\n    get:\n    /**\n     * Get direction.\n     */\n    function get() {\n      this.entity.transform.getWorldForward(this._forward);\n      return this._forward;\n    }\n\n    /**\n     * Get the final light color.\n     */\n  }, {\n    key: \"lightColor\",\n    get: function get() {\n      this._lightColor.r = this.color.r * this.intensity;\n      this._lightColor.g = this.color.g * this.intensity;\n      this._lightColor.b = this.color.b * this.intensity;\n      this._lightColor.a = this.color.a * this.intensity;\n      return this._lightColor;\n    }\n\n    /**\n     * Get the opposite direction of the directional light direction.\n     */\n  }, {\n    key: \"reverseDirection\",\n    get: function get() {\n      Vector3.scale(this.direction, -1, this._reverseDirection);\n      return this._reverseDirection;\n    }\n  }]);\n  return DirectLight;\n}(Light);\nDirectLight._colorProperty = Shader.getPropertyByName(\"u_directLightColor\");\nDirectLight._directionProperty = Shader.getPropertyByName(\"u_directLightDirection\");\nDirectLight._combinedData = {\n  color: new Float32Array(3 * Light._maxLight),\n  direction: new Float32Array(3 * Light._maxLight)\n};\n\n/**\n * Point light.\n */\nvar PointLight = /*#__PURE__*/function (_Light) {\n  _inheritsLoose(PointLight, _Light);\n  function PointLight() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Light.call.apply(_Light, [this].concat(args)) || this;\n    _this.color = new Color(1, 1, 1, 1);\n    _this.intensity = 1.0;\n    _this.distance = 100;\n    _this._lightColor = new Color(1, 1, 1, 1);\n    return _this;\n  }\n  /**\n   * @internal\n   */\n  PointLight._updateShaderData = function _updateShaderData(shaderData) {\n    var data = PointLight._combinedData;\n    shaderData.setFloatArray(PointLight._colorProperty, data.color);\n    shaderData.setFloatArray(PointLight._positionProperty, data.position);\n    shaderData.setFloatArray(PointLight._distanceProperty, data.distance);\n  }\n  /** Light color. */;\n  var _proto = PointLight.prototype;\n  /**\n   * @internal\n   */\n  _proto._appendData = function _appendData(lightIndex) {\n    var colorStart = lightIndex * 3;\n    var positionStart = lightIndex * 3;\n    var distanceStart = lightIndex;\n    var lightColor = this.lightColor;\n    var lightPosition = this.position;\n    var data = PointLight._combinedData;\n    data.color[colorStart] = lightColor.r;\n    data.color[colorStart + 1] = lightColor.g;\n    data.color[colorStart + 2] = lightColor.b;\n    data.position[positionStart] = lightPosition.x;\n    data.position[positionStart + 1] = lightPosition.y;\n    data.position[positionStart + 2] = lightPosition.z;\n    data.distance[distanceStart] = this.distance;\n  };\n  _createClass(PointLight, [{\n    key: \"position\",\n    get:\n    /**\n     * Get light position.\n     */\n    function get() {\n      return this.entity.transform.worldPosition;\n    }\n\n    /**\n     * Get the final light color.\n     */\n  }, {\n    key: \"lightColor\",\n    get: function get() {\n      this._lightColor.r = this.color.r * this.intensity;\n      this._lightColor.g = this.color.g * this.intensity;\n      this._lightColor.b = this.color.b * this.intensity;\n      this._lightColor.a = this.color.a * this.intensity;\n      return this._lightColor;\n    }\n  }]);\n  return PointLight;\n}(Light);\nPointLight._colorProperty = Shader.getPropertyByName(\"u_pointLightColor\");\nPointLight._positionProperty = Shader.getPropertyByName(\"u_pointLightPosition\");\nPointLight._distanceProperty = Shader.getPropertyByName(\"u_pointLightDistance\");\nPointLight._combinedData = {\n  color: new Float32Array(3 * Light._maxLight),\n  position: new Float32Array(3 * Light._maxLight),\n  distance: new Float32Array(Light._maxLight)\n};\n\n/**\n * Spot light.\n */\nvar SpotLight = /*#__PURE__*/function (_Light) {\n  _inheritsLoose(SpotLight, _Light);\n  function SpotLight() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Light.call.apply(_Light, [this].concat(args)) || this;\n    _this.color = new Color(1, 1, 1, 1);\n    _this.intensity = 1.0;\n    _this.distance = 100;\n    _this.angle = Math.PI / 6;\n    _this.penumbra = Math.PI / 12;\n    _this._forward = new Vector3();\n    _this._lightColor = new Color(1, 1, 1, 1);\n    _this._inverseDirection = new Vector3();\n    return _this;\n  }\n  /**\n   * @internal\n   */\n  SpotLight._updateShaderData = function _updateShaderData(shaderData) {\n    var data = SpotLight._combinedData;\n    shaderData.setFloatArray(SpotLight._colorProperty, data.color);\n    shaderData.setFloatArray(SpotLight._positionProperty, data.position);\n    shaderData.setFloatArray(SpotLight._directionProperty, data.direction);\n    shaderData.setFloatArray(SpotLight._distanceProperty, data.distance);\n    shaderData.setFloatArray(SpotLight._angleCosProperty, data.angleCos);\n    shaderData.setFloatArray(SpotLight._penumbraCosProperty, data.penumbraCos);\n  }\n\n  /** Light color. */;\n  var _proto = SpotLight.prototype;\n  /**\n   * @internal\n   */\n  _proto._appendData = function _appendData(lightIndex) {\n    var colorStart = lightIndex * 3;\n    var positionStart = lightIndex * 3;\n    var directionStart = lightIndex * 3;\n    var distanceStart = lightIndex;\n    var penumbraCosStart = lightIndex;\n    var angleCosStart = lightIndex;\n    var color = this.lightColor;\n    var position = this.position;\n    var direction = this.direction;\n    var data = SpotLight._combinedData;\n    data.color[colorStart] = color.r;\n    data.color[colorStart + 1] = color.g;\n    data.color[colorStart + 2] = color.b;\n    data.position[positionStart] = position.x;\n    data.position[positionStart + 1] = position.y;\n    data.position[positionStart + 2] = position.z;\n    data.direction[directionStart] = direction.x;\n    data.direction[directionStart + 1] = direction.y;\n    data.direction[directionStart + 2] = direction.z;\n    data.distance[distanceStart] = this.distance;\n    data.angleCos[angleCosStart] = Math.cos(this.angle);\n    data.penumbraCos[penumbraCosStart] = Math.cos(this.angle + this.penumbra);\n  };\n  _createClass(SpotLight, [{\n    key: \"position\",\n    get:\n    /**\n     * Get light position.\n     */\n    function get() {\n      return this.entity.transform.worldPosition;\n    }\n\n    /**\n     * Get light direction.\n     */\n  }, {\n    key: \"direction\",\n    get: function get() {\n      this.entity.transform.getWorldForward(this._forward);\n      return this._forward;\n    }\n\n    /**\n     * Get the opposite direction of the spotlight.\n     */\n  }, {\n    key: \"reverseDirection\",\n    get: function get() {\n      Vector3.scale(this.direction, -1, this._inverseDirection);\n      return this._inverseDirection;\n    }\n\n    /**\n     * Get the final light color.\n     */\n  }, {\n    key: \"lightColor\",\n    get: function get() {\n      this._lightColor.r = this.color.r * this.intensity;\n      this._lightColor.g = this.color.g * this.intensity;\n      this._lightColor.b = this.color.b * this.intensity;\n      this._lightColor.a = this.color.a * this.intensity;\n      return this._lightColor;\n    }\n  }]);\n  return SpotLight;\n}(Light);\nSpotLight._colorProperty = Shader.getPropertyByName(\"u_spotLightColor\");\nSpotLight._positionProperty = Shader.getPropertyByName(\"u_spotLightPosition\");\nSpotLight._directionProperty = Shader.getPropertyByName(\"u_spotLightDirection\");\nSpotLight._distanceProperty = Shader.getPropertyByName(\"u_spotLightDistance\");\nSpotLight._angleCosProperty = Shader.getPropertyByName(\"u_spotLightAngleCos\");\nSpotLight._penumbraCosProperty = Shader.getPropertyByName(\"u_spotLightPenumbraCos\");\nSpotLight._combinedData = {\n  color: new Float32Array(3 * Light._maxLight),\n  position: new Float32Array(3 * Light._maxLight),\n  direction: new Float32Array(3 * Light._maxLight),\n  distance: new Float32Array(Light._maxLight),\n  angleCos: new Float32Array(Light._maxLight),\n  penumbraCos: new Float32Array(Light._maxLight)\n};\n\n/**\n * Determine whether there are lights in the scene.\n * @returns Has light\n */\nfunction hasLight() {\n  return this.findFeature(LightFeature).visibleLights.length > 0;\n}\n\n/**\n * Light plug-in.\n */\nvar LightFeature = /*#__PURE__*/function (_SceneFeature) {\n  _inheritsLoose(LightFeature, _SceneFeature);\n  function LightFeature() {\n    var _this;\n    _this = _SceneFeature.call(this) || this;\n    _this.visibleLights = void 0;\n    _this.visibleLights = [];\n    return _this;\n  }\n\n  /**\n   * Register a light object to the current scene.\n   * @param light\n   */\n  var _proto = LightFeature.prototype;\n  _proto.attachRenderLight = function attachRenderLight(light) {\n    var index = this.visibleLights.indexOf(light);\n    if (index == -1) {\n      this.visibleLights.push(light);\n    } else {\n      Logger.warn(\"Light already attached.\");\n    }\n  }\n\n  /**\n   * Remove a light object from the current scene.\n   * @param light\n   */;\n  _proto.detachRenderLight = function detachRenderLight(light) {\n    var index = this.visibleLights.indexOf(light);\n    if (index != -1) {\n      this.visibleLights.splice(index, 1);\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._updateShaderData = function _updateShaderData(shaderData) {\n    /**\n     * ambientLight and envMapLight only use the last one in the scene\n     * */\n    var directLightCount = 0;\n    var pointLightCount = 0;\n    var spotLightCount = 0;\n    var lights = this.visibleLights;\n    for (var i = 0, len = lights.length; i < len; i++) {\n      var light = lights[i];\n      if (light instanceof DirectLight) {\n        light._appendData(directLightCount++);\n      } else if (light instanceof PointLight) {\n        light._appendData(pointLightCount++);\n      } else if (light instanceof SpotLight) {\n        light._appendData(spotLightCount++);\n      }\n    }\n    if (directLightCount) {\n      DirectLight._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_DIRECT_LIGHT_COUNT\", directLightCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_DIRECT_LIGHT_COUNT\");\n    }\n    if (pointLightCount) {\n      PointLight._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_POINT_LIGHT_COUNT\", pointLightCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_POINT_LIGHT_COUNT\");\n    }\n    if (spotLightCount) {\n      SpotLight._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_SPOT_LIGHT_COUNT\", spotLightCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_SPOT_LIGHT_COUNT\");\n    }\n  };\n  return LightFeature;\n}(SceneFeature);\n\n/**\n * Scene.\n */\nvar Scene = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(Scene, _EngineObject);\n  /**\n   * Create scene.\n   * @param engine - Engine\n   * @param name - Name\n   */\n  function Scene(engine, name) {\n    var _this;\n    _this = _EngineObject.call(this, engine) || this;\n    _this.name = void 0;\n    _this.background = new Background(_this._engine);\n    _this.shaderData = new ShaderData(ShaderDataGroup.Scene);\n    _this._activeCameras = [];\n    _this._isActiveInEngine = false;\n    _this._globalShaderMacro = new ShaderMacroCollection();\n    _this._rootEntities = [];\n    _this._ambientLight = void 0;\n    _this.features = [];\n    _this.name = name || \"\";\n    var shaderData = _this.shaderData;\n    Scene.sceneFeatureManager.addObject(_assertThisInitialized(_this));\n    shaderData._addRefCount(1);\n    _this.ambientLight = new AmbientLight();\n    engine.sceneManager._allScenes.push(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * Create root entity.\n   * @param name - Entity name\n   * @returns Entity\n   */\n  var _proto = Scene.prototype;\n  _proto.createRootEntity = function createRootEntity(name) {\n    var entity = new Entity(this._engine, name);\n    this.addRootEntity(entity);\n    return entity;\n  }\n\n  /**\n   * Append an entity.\n   * @param entity - The root entity to add\n   */;\n  _proto.addRootEntity = function addRootEntity(indexOrChild, entity) {\n    var index;\n    if (typeof indexOrChild === \"number\") {\n      index = indexOrChild;\n    } else {\n      index = undefined;\n      entity = indexOrChild;\n    }\n    var isRoot = entity._isRoot;\n    // let entity become root\n    if (!isRoot) {\n      entity._isRoot = true;\n      entity._removeFromParent();\n    }\n\n    // add or remove from scene's rootEntities\n    var oldScene = entity._scene;\n    if (oldScene !== this) {\n      if (oldScene && isRoot) {\n        oldScene._removeFromEntityList(entity);\n      }\n      this._addToRootEntityList(index, entity);\n      Entity._traverseSetOwnerScene(entity, this);\n    } else if (!isRoot) {\n      this._addToRootEntityList(index, entity);\n    }\n\n    // process entity active/inActive\n    if (this._isActiveInEngine) {\n      !entity._isActiveInHierarchy && entity._isActive && entity._processActive();\n    } else {\n      entity._isActiveInHierarchy && entity._processInActive();\n    }\n  }\n\n  /**\n   * Remove an entity.\n   * @param entity - The root entity to remove\n   */;\n  _proto.removeRootEntity = function removeRootEntity(entity) {\n    if (entity._isRoot && entity._scene == this) {\n      this._removeFromEntityList(entity);\n      entity._isRoot = false;\n      this._isActiveInEngine && entity._isActiveInHierarchy && entity._processInActive();\n      Entity._traverseSetOwnerScene(entity, null);\n    }\n  }\n\n  /**\n   * Get root entity from index.\n   * @param index - Index\n   * @returns Entity\n   */;\n  _proto.getRootEntity = function getRootEntity(index) {\n    if (index === void 0) {\n      index = 0;\n    }\n    return this._rootEntities[index];\n  }\n\n  /**\n   * Find entity globally by name.\n   * @param name - Entity name\n   * @returns Entity\n   */;\n  _proto.findEntityByName = function findEntityByName(name) {\n    var children = this._rootEntities;\n    for (var i = children.length - 1; i >= 0; i--) {\n      var child = children[i];\n      if (child.name === name) {\n        return child;\n      }\n    }\n    for (var _i = children.length - 1; _i >= 0; _i--) {\n      var _child = children[_i];\n      var _entity = _child.findByName(name);\n      if (_entity) {\n        return _entity;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Find entity globally by name,use ‘/’ symbol as a path separator.\n   * @param path - Entity's path\n   * @returns Entity\n   */;\n  _proto.findEntityByPath = function findEntityByPath(path) {\n    var splits = path.split(\"/\").filter(Boolean);\n    for (var i = 0, n = this.rootEntitiesCount; i < n; i++) {\n      var findEntity = this.getRootEntity(i);\n      if (findEntity.name != splits[0]) continue;\n      for (var j = 1, m = splits.length; j < m; ++j) {\n        findEntity = Entity._findChildByName(findEntity, splits[j]);\n        if (!findEntity) break;\n      }\n      return findEntity;\n    }\n    return null;\n  }\n\n  /**\n   * Destroy this scene.\n   */;\n  _proto.destroy = function destroy() {\n    if (this._destroyed) {\n      return;\n    }\n    this._destroy();\n    var allScenes = this.engine.sceneManager._allScenes;\n    allScenes.splice(allScenes.indexOf(this), 1);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._attachRenderCamera = function _attachRenderCamera(camera) {\n    var index = this._activeCameras.indexOf(camera);\n    if (index === -1) {\n      this._activeCameras.push(camera);\n    } else {\n      Logger.warn(\"Camera already attached.\");\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._detachRenderCamera = function _detachRenderCamera(camera) {\n    var index = this._activeCameras.indexOf(camera);\n    if (index !== -1) {\n      this._activeCameras.splice(index, 1);\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._processActive = function _processActive(active) {\n    this._isActiveInEngine = active;\n    var rootEntities = this._rootEntities;\n    for (var i = rootEntities.length - 1; i >= 0; i--) {\n      var _entity2 = rootEntities[i];\n      if (_entity2._isActive) {\n        active ? _entity2._processActive() : _entity2._processInActive();\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._updateShaderData = function _updateShaderData() {\n    this.findFeature(LightFeature)._updateShaderData(this.shaderData);\n    // union scene and camera macro.\n    ShaderMacroCollection.unionCollection(this.engine._macroCollection, this.shaderData._macroCollection, this._globalShaderMacro);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._removeFromEntityList = function _removeFromEntityList(entity) {\n    var rootEntities = this._rootEntities;\n    var index = entity._siblingIndex;\n    rootEntities.splice(index, 1);\n    for (var n = rootEntities.length; index < n; index++) {\n      rootEntities[index]._siblingIndex--;\n    }\n    entity._siblingIndex = -1;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    this._isActiveInEngine && (this._engine.sceneManager.activeScene = null);\n    Scene.sceneFeatureManager.callFeatureMethod(this, \"destroy\", [this]);\n    for (var i = 0, n = this.rootEntitiesCount; i < n; i++) {\n      this._rootEntities[i].destroy();\n    }\n    this._rootEntities.length = 0;\n    this._activeCameras.length = 0;\n    Scene.sceneFeatureManager._objects = [];\n    this.shaderData._addRefCount(-1);\n  };\n  _proto._addToRootEntityList = function _addToRootEntityList(index, rootEntity) {\n    var rootEntities = this._rootEntities;\n    var rootEntityCount = rootEntities.length;\n    if (index === undefined) {\n      rootEntity._siblingIndex = rootEntityCount;\n      rootEntities.push(rootEntity);\n    } else {\n      if (index < 0 || index > rootEntityCount) {\n        throw \"The index \" + index + \" is out of child list bounds \" + rootEntityCount;\n      }\n      rootEntity._siblingIndex = index;\n      rootEntities.splice(index, 0, rootEntity);\n      for (var i = index + 1, n = rootEntityCount + 1; i < n; i++) {\n        rootEntities[i]._siblingIndex++;\n      }\n    }\n  }\n\n  //-----------------------------------------@deprecated-----------------------------------\n  ;\n  Scene.registerFeature = function registerFeature(Feature) {\n    Scene.sceneFeatureManager.registerFeature(Feature);\n  };\n  _proto.findFeature = function findFeature(Feature) {\n    return Scene.sceneFeatureManager.findFeature(this, Feature);\n  };\n  _createClass(Scene, [{\n    key: \"ambientLight\",\n    get: /** Scene name. */\n\n    /** The background of the scene. */\n\n    /** Scene-related shader data. */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Ambient light.\n     */\n    function get() {\n      return this._ambientLight;\n    },\n    set: function set(value) {\n      if (!value) {\n        Logger.warn(\"The scene must have one ambient light\");\n        return;\n      }\n      var lastAmbientLight = this._ambientLight;\n      if (lastAmbientLight !== value) {\n        lastAmbientLight && lastAmbientLight._removeFromScene(this);\n        value._addToScene(this);\n        this._ambientLight = value;\n      }\n    }\n\n    /**\n     * Count of root entities.\n     */\n  }, {\n    key: \"rootEntitiesCount\",\n    get: function get() {\n      return this._rootEntities.length;\n    }\n\n    /**\n     * Root entity collection.\n     */\n  }, {\n    key: \"rootEntities\",\n    get: function get() {\n      return this._rootEntities;\n    }\n  }]);\n  return Scene;\n}(EngineObject);\nScene.sceneFeatureManager = new FeatureManager();\n\n/**\n * Scene manager.\n */\nvar SceneManager = /*#__PURE__*/function () {\n  /**\n   * @internal\n   */\n  function SceneManager(engine) {\n    this.engine = engine;\n    this._allScenes = [];\n    this._activeScene = void 0;\n  }\n\n  /**\n   * Load and activate scene.\n   * @param url - the path of the scene\n   * @param destroyOldScene - whether to destroy old scene information\n   * @returns scene promise\n   */\n  var _proto = SceneManager.prototype;\n  _proto.loadScene = function loadScene(url, destroyOldScene) {\n    var _this = this;\n    if (destroyOldScene === void 0) {\n      destroyOldScene = true;\n    }\n    var scenePromise = this.engine.resourceManager.load(url);\n    scenePromise.then(function (scene) {\n      var oldScene = _this._activeScene;\n      _this.activeScene = scene;\n      if (oldScene && destroyOldScene) {\n        oldScene.destroy();\n      }\n    });\n    return scenePromise;\n  }\n\n  /**\n   * Merge the source scene into the target scene.\n   * @remarks the global information of destScene will be used after the merge, and the lightingMap information will be merged.\n   * @param sourceScene - source scene\n   * @param destScene - target scene\n   */;\n  _proto.mergeScenes = function mergeScenes(sourceScene, destScene) {\n    var oldRootEntities = sourceScene.rootEntities;\n    for (var i = 0, n = oldRootEntities.length; i < n; i++) {\n      destScene.addRootEntity(oldRootEntities[i]);\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroyAllScene = function _destroyAllScene() {\n    var allScenes = this._allScenes;\n    for (var i = 0, n = allScenes.length; i < n; i++) {\n      allScenes[i]._destroy();\n    }\n    allScenes.length = 0;\n  };\n  _createClass(SceneManager, [{\n    key: \"activeScene\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /**\n     * Get the activated scene.\n     */\n    function get() {\n      return this._activeScene;\n    },\n    set: function set(scene) {\n      var oldScene = this._activeScene;\n      if (oldScene !== scene) {\n        oldScene && oldScene._processActive(false);\n        scene && scene._processActive(true);\n        this._activeScene = scene;\n      }\n    }\n  }]);\n  return SceneManager;\n}();\n\nvar blinnPhongFs = \"#define GLSLIFY 1\\n#include <common>\\n#include <common_frag>\\n#include <uv_share>\\n#include <normal_share>\\n#include <color_share>\\n#include <worldpos_share>\\n#include <light_frag_define>\\n#include <mobile_material_frag>\\n#include <fog_share>\\n#include <normal_get>\\nvoid main(){\\n#include <begin_mobile_frag>\\n#include <begin_viewdir_frag>\\n#include <mobile_blinnphong_frag>\\ngl_FragColor=emission+ambient+diffuse+specular;gl_FragColor.a=diffuse.a;\\n#ifndef OASIS_COLORSPACE_GAMMA\\ngl_FragColor=linearToGamma(gl_FragColor);\\n#endif\\n#include <fog_frag>\\n}\"; // eslint-disable-line\n\nvar blinnPhongVs = \"#define GLSLIFY 1\\n#include <common>\\n#include <common_vert>\\n#include <blendShape_input>\\n#include <uv_share>\\n#include <color_share>\\n#include <normal_share>\\n#include <worldpos_share>\\n#include <shadow_share>\\n#include <fog_share>\\nvoid main(){\\n#include <begin_position_vert>\\n#include <begin_normal_vert>\\n#include <blendShape_vert>\\n#include <skinning_vert>\\n#include <uv_vert>\\n#include <color_vert>\\n#include <normal_vert>\\n#include <worldpos_vert>\\n#include <shadow_vert>\\n#include <position_vert>\\n#include <fog_vert>\\n}\"; // eslint-disable-line\n\nvar particleFs = \"#define GLSLIFY 1\\nvarying vec4 v_color;varying float v_lifeLeft;varying vec2 v_uv;uniform sampler2D u_texture;void main(){if(v_lifeLeft==1.0){discard;}float alphaFactor=1.0;\\n#ifdef fadeIn\\nfloat fadeInFactor=step(0.5,v_lifeLeft);alphaFactor=2.0*fadeInFactor*(1.0-v_lifeLeft)+(1.0-fadeInFactor);\\n#endif\\n#ifdef fadeOut\\nfloat fadeOutFactor=step(0.5,v_lifeLeft);alphaFactor=alphaFactor*2.0*(1.0-fadeOutFactor)*v_lifeLeft+alphaFactor*fadeOutFactor;\\n#endif\\n#ifdef particleTexture\\nvec4 tex=texture2D(u_texture,v_uv);\\n#ifdef useOriginColor\\ngl_FragColor=vec4(tex.rgb,alphaFactor*tex.a*v_color.w);\\n#else\\ngl_FragColor=vec4(v_color.xyz*tex.rgb,alphaFactor*tex.a*v_color.w);\\n#endif\\n#else\\ngl_FragColor=vec4(v_color.xyz,alphaFactor*v_color.w);\\n#endif\\n}\"; // eslint-disable-line\n\nvar particleVs = \"#define GLSLIFY 1\\nattribute vec3 a_position;attribute vec3 a_velocity;attribute vec3 a_acceleration;attribute vec4 a_color;attribute vec4 a_lifeAndSize;attribute vec2 a_rotation;attribute vec3 a_uv;attribute vec2 a_normalizedUv;uniform float u_time;uniform bool u_once;uniform mat4 u_MVPMat;varying vec4 v_color;varying float v_lifeLeft;varying vec2 v_uv;\\n#ifdef is2d\\nuniform mat4 u_viewInvMat;uniform mat4 u_projMat;uniform mat4 u_viewMat;uniform mat4 u_modelMat;\\n#endif\\nmat2 rotation2d(float angle){float s=sin(angle);float c=cos(angle);return mat2(c,-s,s,c);}void main(){v_color=a_color;v_uv=a_uv.xy;float life=a_lifeAndSize.y;float startTime=a_lifeAndSize.x;float deltaTime=max(mod(u_time-startTime,life),0.0);if((u_once&&u_time>life+startTime)){deltaTime=0.0;}v_lifeLeft=1.0-deltaTime/life;float scale=a_lifeAndSize.z;vec3 position=a_position+(a_velocity+a_acceleration*deltaTime*0.5)*deltaTime;\\n#ifdef isScaleByLifetime\\nscale*=v_lifeLeft;\\n#else\\nscale*=pow(a_lifeAndSize.w,deltaTime);\\n#endif\\n#ifdef rotateToVelocity\\nvec3 v=a_velocity+a_acceleration*deltaTime;float angle=atan(v.z,v.x)*2.0;\\n#else\\nfloat deltaAngle=deltaTime*a_rotation.y;float angle=a_rotation.x+deltaAngle;\\n#endif\\n#ifdef is2d\\nvec2 rotatedPoint=rotation2d(angle)*vec2(a_normalizedUv.x,a_normalizedUv.y*a_uv.z);vec3 basisX=u_viewInvMat[0].xyz;vec3 basisZ=u_viewInvMat[1].xyz;vec3 localPosition=vec3(basisX*rotatedPoint.x+basisZ*rotatedPoint.y)*scale+position;gl_Position=u_projMat*u_viewMat*vec4(localPosition+u_modelMat[3].xyz,1.);\\n#else\\n#ifdef rotateToVelocity\\nfloat s=sin(angle);float c=cos(angle);\\n#else\\nfloat s=sin(angle);float c=cos(angle);\\n#endif\\nvec4 rotatedPoint=vec4((a_normalizedUv.x*c+a_normalizedUv.y*a_uv.z*s)*scale,0.,(a_normalizedUv.x*s-a_normalizedUv.y*a_uv.z*c)*scale,1.);vec4 orientation=vec4(0,0,0,1);vec4 q2=orientation+orientation;vec4 qx=orientation.xxxw*q2.xyzx;vec4 qy=orientation.xyyw*q2.xyzy;vec4 qz=orientation.xxzw*q2.xxzz;mat4 localMatrix=mat4((1.0-qy.y)-qz.z,qx.y+qz.w,qx.z-qy.w,0,qx.y-qz.w,(1.0-qx.x)-qz.z,qy.z+qx.w,0,qx.z+qy.w,qy.z-qx.w,(1.0-qx.x)-qy.y,0,position.x,position.y,position.z,1);rotatedPoint=localMatrix*rotatedPoint;gl_Position=u_MVPMat*rotatedPoint;\\n#endif\\n}\"; // eslint-disable-line\n\nvar pbrFs = \"#define GLSLIFY 1\\n#define IS_METALLIC_WORKFLOW\\n#include <common>\\n#include <common_frag>\\n#include <fog_share>\\n#include <uv_share>\\n#include <normal_share>\\n#include <color_share>\\n#include <worldpos_share>\\n#include <light_frag_define>\\n#include <pbr_frag_define>\\n#include <pbr_helper>\\nvoid main(){\\n#include <pbr_frag>\\n#include <fog_frag>\\n}\"; // eslint-disable-line\n\nvar pbrSpecularFs = \"#define GLSLIFY 1\\n#include <common>\\n#include <common_frag>\\n#include <fog_share>\\n#include <uv_share>\\n#include <normal_share>\\n#include <color_share>\\n#include <worldpos_share>\\n#include <light_frag_define>\\n#include <pbr_frag_define>\\n#include <pbr_helper>\\nvoid main(){\\n#include <pbr_frag>\\n#include <fog_frag>\\n}\"; // eslint-disable-line\n\nvar pbrVs = \"#define GLSLIFY 1\\n#include <common>\\n#include <common_vert>\\n#include <blendShape_input>\\n#include <uv_share>\\n#include <color_share>\\n#include <normal_share>\\n#include <worldpos_share>\\n#include <shadow_share>\\n#include <fog_share>\\nvoid main(){\\n#include <begin_position_vert>\\n#include <begin_normal_vert>\\n#include <blendShape_vert>\\n#include <skinning_vert>\\n#include <uv_vert>\\n#include <color_vert>\\n#include <normal_vert>\\n#include <worldpos_vert>\\n#include <shadow_vert>\\n#include <position_vert>\\n#include <fog_vert>\\n}\"; // eslint-disable-line\n\nvar shadowMapFs = \"#define GLSLIFY 1\\nvec4 pack(float depth){const vec4 bitShift=vec4(1.0,256.0,256.0*256.0,256.0*256.0*256.0);const vec4 bitMask=vec4(1.0/256.0,1.0/256.0,1.0/256.0,0.0);vec4 rgbaDepth=fract(depth*bitShift);rgbaDepth-=rgbaDepth.gbaa*bitMask;return rgbaDepth;}void main(){gl_FragColor=pack(gl_FragCoord.z);}\"; // eslint-disable-line\n\nvar shadowMapVs = \"#define GLSLIFY 1\\n#include <common_vert>\\n#include <blendShape_input>\\n#include <normal_share>\\n#include <shadow_share>\\nvoid main(){\\n#include <begin_position_vert>\\n#include <begin_normal_vert>\\n#include <blendShape_vert>\\n#include <skinning_vert>\\n#include <shadow_vert>\\n#include <position_vert>\\n}\"; // eslint-disable-line\n\nvar shadowFs = \"#define GLSLIFY 1\\n#ifdef O3_SHADOW_MAP_COUNT\\nuniform float u_shadowBias[O3_SHADOW_MAP_COUNT];uniform float u_shadowIntensity[O3_SHADOW_MAP_COUNT];uniform float u_shadowRadius[O3_SHADOW_MAP_COUNT];uniform vec2 u_shadowMapSize[O3_SHADOW_MAP_COUNT];uniform sampler2D u_shadowMaps[O3_SHADOW_MAP_COUNT];varying vec4 v_PositionFromLight[O3_SHADOW_MAP_COUNT];const vec4 bitShift=vec4(1.0,1.0/256.0,1.0/(256.0*256.0),1.0/(256.0*256.0*256.0));float unpack(const in vec4 rgbaDepth){return dot(rgbaDepth,bitShift);}float getVisibility(vec4 positionFromLight,const in sampler2D shadowMap,vec2 mapSize,float intensity,float bias,float radius){vec3 shadowCoord=(positionFromLight.xyz/positionFromLight.w)/2.0+0.5;float filterX=step(0.0,shadowCoord.x)*(1.0-step(1.0,shadowCoord.x));float filterY=step(0.0,shadowCoord.y)*(1.0-step(1.0,shadowCoord.y));shadowCoord.z-=bias;vec2 texelSize=vec2(1.0)/mapSize;float visibility=0.0;for(float y=-1.0;y<=1.0;y+=1.0){for(float x=-1.0;x<=1.0;x+=1.0){vec2 uv=shadowCoord.xy+texelSize*vec2(x,y)*radius;vec4 rgbaDepth=texture2D(shadowMap,uv);float depth=unpack(rgbaDepth);visibility+=step(depth,shadowCoord.z)*intensity;}}visibility*=(1.0/9.0);return visibility*filterX*filterY;}\\n#endif\\nvoid main(){vec4 shadowColor=vec4(1.0,1.0,1.0,1.0);\\n#ifdef O3_SHADOW_MAP_COUNT\\nfloat visibility=1.0;\\n#if (O3_SHADOW_MAP_COUNT == 1)\\nvisibility-=getVisibility(v_PositionFromLight[0],u_shadowMaps[0],u_shadowMapSize[0],u_shadowIntensity[0],u_shadowBias[0],u_shadowRadius[0]);\\n#elif (O3_SHADOW_MAP_COUNT == 2)\\nvisibility-=getVisibility(v_PositionFromLight[0],u_shadowMaps[0],u_shadowMapSize[0],u_shadowIntensity[0],u_shadowBias[0],u_shadowRadius[0]);visibility-=getVisibility(v_PositionFromLight[1],u_shadowMaps[1],u_shadowMapSize[1],u_shadowIntensity[1],u_shadowBias[1],u_shadowRadius[1]);\\n#elif (O3_SHADOW_MAP_COUNT == 3)\\nvisibility-=getVisibility(v_PositionFromLight[0],u_shadowMaps[0],u_shadowMapSize[0],u_shadowIntensity[0],u_shadowBias[0],u_shadowRadius[0]);visibility-=getVisibility(v_PositionFromLight[1],u_shadowMaps[1],u_shadowMapSize[1],u_shadowIntensity[1],u_shadowBias[1],u_shadowRadius[1]);visibility-=getVisibility(v_PositionFromLight[2],u_shadowMaps[2],u_shadowMapSize[2],u_shadowIntensity[2],u_shadowBias[2],u_shadowRadius[2]);\\n#endif\\nvisibility=clamp(visibility,0.0,1.0);shadowColor=vec4(visibility,visibility,visibility,1.0);\\n#endif\\ngl_FragColor=shadowColor;}\"; // eslint-disable-line\n\nvar skyboxFs = \"#define GLSLIFY 1\\n#include <common>\\nuniform samplerCube u_cube;varying vec3 v_cubeUV;uniform vec4 u_cubeDecodeParam;void main(){vec4 textureColor=textureCube(u_cube,v_cubeUV);if(u_cubeDecodeParam.x>0.0){textureColor=RGBMToLinear(textureColor,u_cubeDecodeParam.y);textureColor=linearToGamma(textureColor);}gl_FragColor=textureColor;}\"; // eslint-disable-line\n\nvar skyboxVs = \"#define GLSLIFY 1\\n#include <common_vert>\\nuniform mat4 u_mvpNoscale;varying vec3 v_cubeUV;void main(){v_cubeUV=vec3(-POSITION.x,POSITION.yz);gl_Position=u_mvpNoscale*vec4(POSITION,1.0);gl_Position.z=gl_Position.w;}\"; // eslint-disable-line\n\nvar spriteMaskFs = \"#define GLSLIFY 1\\nuniform sampler2D u_maskTexture;uniform float u_maskAlphaCutoff;varying vec2 v_uv;void main(){vec4 color=texture2D(u_maskTexture,v_uv);if(color.a<u_maskAlphaCutoff){discard;}gl_FragColor=color;}\"; // eslint-disable-line\n\nvar spriteMaskVs = \"#define GLSLIFY 1\\nuniform mat4 u_VPMat;attribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;void main(){gl_Position=u_VPMat*vec4(POSITION,1.0);v_uv=TEXCOORD_0;}\"; // eslint-disable-line\n\nvar spriteFs = \"#define GLSLIFY 1\\n#ifdef USE_CUSTOM_TEXTURE\\nuniform sampler2D u_cusTomTexture;\\n#else\\nuniform sampler2D u_spriteTexture;\\n#endif\\nvarying vec2 v_uv;varying vec4 v_color;void main(){\\n#ifdef USE_CUSTOM_TEXTURE\\nvec4 baseColor=texture2D(u_cusTomTexture,v_uv);\\n#else\\nvec4 baseColor=texture2D(u_spriteTexture,v_uv);\\n#endif\\ngl_FragColor=baseColor*v_color;}\"; // eslint-disable-line\n\nvar spriteVs = \"#define GLSLIFY 1\\n#ifdef USE_MODEL_MATRIX\\nuniform mat4 u_MVPMat;\\n#else\\nuniform mat4 u_VPMat;\\n#endif\\nattribute vec3 POSITION;attribute vec2 TEXCOORD_0;attribute vec4 COLOR_0;varying vec2 v_uv;varying vec4 v_color;void main(){\\n#ifdef USE_MODEL_MATRIX\\ngl_Position=u_MVPMat*vec4(POSITION,1.0);\\n#else\\ngl_Position=u_VPMat*vec4(POSITION,1.0);\\n#endif\\nv_uv=TEXCOORD_0;v_color=COLOR_0;}\"; // eslint-disable-line\n\nvar unlitFs = \"#define GLSLIFY 1\\n#include <common>\\n#include <uv_share>\\n#include <fog_share>\\nuniform vec4 u_baseColor;uniform float u_alphaCutoff;\\n#ifdef BASETEXTURE\\nuniform sampler2D u_baseTexture;\\n#endif\\nvoid main(){vec4 baseColor=u_baseColor;\\n#ifdef BASETEXTURE\\nvec4 textureColor=texture2D(u_baseTexture,v_uv);\\n#ifndef OASIS_COLORSPACE_GAMMA\\ntextureColor=gammaToLinear(textureColor);\\n#endif\\nbaseColor*=textureColor;\\n#endif\\n#ifdef ALPHA_CUTOFF\\nif(baseColor.a<u_alphaCutoff){discard;}\\n#endif\\n#ifndef OASIS_COLORSPACE_GAMMA\\nbaseColor=linearToGamma(baseColor);\\n#endif\\ngl_FragColor=baseColor;\\n#include <fog_frag>\\n}\"; // eslint-disable-line\n\nvar unlitVs = \"#define GLSLIFY 1\\n#include <common_vert>\\n#include <blendShape_input>\\n#include <uv_share>\\n#include <fog_share>\\nvoid main(){\\n#include <begin_position_vert>\\n#include <blendShape_vert>\\n#include <skinning_vert>\\n#include <uv_vert>\\n#include <position_vert>\\n#include <fog_vert>\\n}\"; // eslint-disable-line\n\nvar backgroundTextureVs = \"#define GLSLIFY 1\\nattribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;void main(){gl_Position=vec4(POSITION,1.0);v_uv=TEXCOORD_0;}\"; // eslint-disable-line\n\nvar backgroundTextureFs = \"#define GLSLIFY 1\\nuniform sampler2D u_baseTexture;varying vec2 v_uv;void main(){gl_FragColor=texture2D(u_baseTexture,v_uv);}\"; // eslint-disable-line\n\n/**\n * Internal shader pool.\n * @internal\n */\nvar ShaderPool = /*#__PURE__*/function () {\n  function ShaderPool() {}\n  ShaderPool.init = function init() {\n    Shader.create(\"blinn-phong\", blinnPhongVs, blinnPhongFs);\n    Shader.create(\"pbr\", pbrVs, pbrFs);\n    Shader.create(\"pbr-specular\", pbrVs, pbrSpecularFs);\n    Shader.create(\"unlit\", unlitVs, unlitFs);\n    Shader.create(\"shadow-map\", shadowMapVs, shadowMapFs);\n    Shader.create(\"shadow\", shadowMapVs, shadowFs);\n    Shader.create(\"skybox\", skyboxVs, skyboxFs);\n    Shader.create(\"particle-shader\", particleVs, particleFs);\n    Shader.create(\"SpriteMask\", spriteMaskVs, spriteMaskFs);\n    Shader.create(\"Sprite\", spriteVs, spriteFs);\n    Shader.create(\"background-texture\", backgroundTextureVs, backgroundTextureFs);\n  };\n  return ShaderPool;\n}();\n\n/**\n * Shader program pool.\n * @internal\n */\nvar ShaderProgramPool = /*#__PURE__*/function () {\n  function ShaderProgramPool() {\n    this._cacheHierarchy = 1;\n    this._cacheMap = Object.create(null);\n    this._lastQueryMap = void 0;\n    this._lastQueryKey = void 0;\n  }\n  var _proto = ShaderProgramPool.prototype;\n  /**\n   * Get shader program by macro collection.\n   * @param macros - macro collection\n   * @returns shader program\n   */\n  _proto.get = function get(macros) {\n    var cacheMap = this._cacheMap;\n    var maskLength = macros._length;\n    if (maskLength > this._cacheHierarchy) {\n      this._resizeCacheMapHierarchy(cacheMap, 0, maskLength);\n    }\n    var mask = macros._mask;\n    var endIndex = macros._length - 1;\n    var maxEndIndex = this._cacheHierarchy - 1;\n    for (var i = 0; i < maxEndIndex; i++) {\n      var subMask = endIndex < i ? 0 : mask[i];\n      var subCacheShaders = cacheMap[subMask];\n      subCacheShaders || (cacheMap[subMask] = subCacheShaders = Object.create(null));\n      cacheMap = subCacheShaders;\n    }\n    var cacheKey = endIndex < maxEndIndex ? 0 : mask[maxEndIndex];\n    var shader = cacheMap[cacheKey];\n    if (!shader) {\n      this._lastQueryKey = cacheKey;\n      this._lastQueryMap = cacheMap;\n    }\n    return shader;\n  }\n\n  /**\n   * Cache the shader program.\n   *\n   * @remarks\n   * The method must return an empty value after calling get() to run normally.\n   *\n   * @param shaderProgram - shader program\n   */;\n  _proto.cache = function cache(shaderProgram) {\n    this._lastQueryMap[this._lastQueryKey] = shaderProgram;\n  };\n  _proto._resizeCacheMapHierarchy = function _resizeCacheMapHierarchy(cacheMap, hierarchy, resizeLength) {\n    // only expand but not shrink.\n    var end = this._cacheHierarchy - 1;\n    if (hierarchy == end) {\n      for (var k in cacheMap) {\n        var shader = cacheMap[k];\n        for (var i = 0, n = resizeLength - end; i < n; i++) {\n          if (i == n - 1) {\n            cacheMap[0] = shader;\n          } else {\n            cacheMap = cacheMap[i == 0 ? k : 0] = Object.create(null);\n          }\n        }\n      }\n      this._cacheHierarchy = resizeLength;\n    } else {\n      for (var _k in cacheMap) {\n        this._resizeCacheMapHierarchy(cacheMap[_k], ++hierarchy, resizeLength);\n      }\n    }\n  };\n  return ShaderProgramPool;\n}();\n\n/** TODO: delete */\nvar engineFeatureManager = new FeatureManager();\nShaderPool.init();\n\n/**\n * Engine.\n */\nvar Engine = /*#__PURE__*/function (_EventDispatcher) {\n  _inheritsLoose(Engine, _EventDispatcher);\n  /**\n   * Create engine.\n   * @param canvas - The canvas to use for rendering\n   * @param hardwareRenderer - Graphics API renderer\n   */\n  function Engine(canvas, hardwareRenderer, settings) {\n    var _this;\n    _this = _EventDispatcher.call(this) || this;\n    _this.physicsManager = void 0;\n    _this.inputManager = void 0;\n    _this._componentsManager = new ComponentsManager();\n    _this._hardwareRenderer = void 0;\n    _this._lastRenderState = new RenderState();\n    _this._renderElementPool = new ClassPool(MeshRenderElement);\n    _this._spriteElementPool = new ClassPool(SpriteElement);\n    _this._spriteMaskElementPool = new ClassPool(SpriteMaskElement);\n    _this._textElementPool = new ClassPool(TextRenderElement);\n    _this._spriteDefaultMaterial = void 0;\n    _this._spriteMaskDefaultMaterial = void 0;\n    _this._renderContext = new RenderContext();\n    _this._magentaTexture2D = void 0;\n    _this._magentaTextureCube = void 0;\n    _this._magentaTexture2DArray = void 0;\n    _this._magentaMaterial = void 0;\n    _this._backgroundTextureMaterial = void 0;\n    _this._renderCount = 0;\n    _this._shaderProgramPools = [];\n    _this._spriteMaskManager = void 0;\n    _this._canSpriteBatch = true;\n    _this._macroCollection = new ShaderMacroCollection();\n    _this._canvas = void 0;\n    _this._settings = {};\n    _this._resourceManager = new ResourceManager(_assertThisInitialized(_this));\n    _this._sceneManager = new SceneManager(_assertThisInitialized(_this));\n    _this._vSyncCount = 1;\n    _this._targetFrameRate = 60;\n    _this._time = new Time();\n    _this._isPaused = true;\n    _this._requestId = void 0;\n    _this._timeoutId = void 0;\n    _this._vSyncCounter = 1;\n    _this._targetFrameInterval = 1000 / 60;\n    _this._destroyed = false;\n    _this._waittingDestroy = false;\n    _this._animate = function () {\n      if (_this._vSyncCount) {\n        _this._requestId = requestAnimationFrame(_this._animate);\n        if (_this._vSyncCounter++ % _this._vSyncCount === 0) {\n          _this.update();\n          _this._vSyncCounter = 1;\n        }\n      } else {\n        _this._timeoutId = window.setTimeout(_this._animate, _this._targetFrameInterval);\n        _this.update();\n      }\n    };\n    _this.features = [];\n    _this._hardwareRenderer = hardwareRenderer;\n    _this._hardwareRenderer.init(canvas);\n    _this.physicsManager = new PhysicsManager(_assertThisInitialized(_this));\n    _this._canvas = canvas;\n    // @todo delete\n    engineFeatureManager.addObject(_assertThisInitialized(_this));\n    _this._sceneManager.activeScene = new Scene(_assertThisInitialized(_this), \"DefaultScene\");\n    _this._spriteMaskManager = new SpriteMaskManager(_assertThisInitialized(_this));\n    _this._spriteDefaultMaterial = _this._createSpriteMaterial();\n    _this._spriteMaskDefaultMaterial = _this._createSpriteMaskMaterial();\n    _this.inputManager = new InputManager(_assertThisInitialized(_this));\n    var magentaPixel = new Uint8Array([255, 0, 255, 255]);\n    var magentaTexture2D = new Texture2D(_assertThisInitialized(_this), 1, 1, TextureFormat.R8G8B8A8, false);\n    magentaTexture2D.setPixelBuffer(magentaPixel);\n    magentaTexture2D.isGCIgnored = true;\n    var magentaTextureCube = new TextureCube(_assertThisInitialized(_this), 1, TextureFormat.R8G8B8A8, false);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.PositiveX, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.NegativeX, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.PositiveY, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.NegativeY, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.PositiveZ, magentaPixel);\n    magentaTextureCube.setPixelBuffer(TextureCubeFace.NegativeZ, magentaPixel);\n    magentaTextureCube.isGCIgnored = true;\n    _this._magentaTexture2D = magentaTexture2D;\n    _this._magentaTextureCube = magentaTextureCube;\n    if (hardwareRenderer.isWebGL2) {\n      var magentaTexture2DArray = new Texture2DArray(_assertThisInitialized(_this), 1, 1, 1, TextureFormat.R8G8B8A8, false);\n      magentaTexture2DArray.setPixelBuffer(0, magentaPixel);\n      magentaTexture2DArray.isGCIgnored = true;\n      _this._magentaTexture2DArray = magentaTexture2DArray;\n    }\n    var magentaMaterial = new Material(_assertThisInitialized(_this), Shader.find(\"unlit\"));\n    magentaMaterial.shaderData.setColor(\"u_baseColor\", new Color(1.0, 0.0, 1.01, 1.0));\n    _this._magentaMaterial = magentaMaterial;\n    var backgroundTextureMaterial = new Material(_assertThisInitialized(_this), Shader.find(\"background-texture\"));\n    backgroundTextureMaterial.isGCIgnored = true;\n    backgroundTextureMaterial.renderState.depthState.compareFunction = CompareFunction.LessEqual;\n    _this._backgroundTextureMaterial = backgroundTextureMaterial;\n    var colorSpace = (settings === null || settings === void 0 ? void 0 : settings.colorSpace) || ColorSpace.Linear;\n    colorSpace === ColorSpace.Gamma && _this._macroCollection.enable(Engine._gammaMacro);\n    _this._settings.colorSpace = colorSpace;\n    return _this;\n  }\n\n  /**\n   * Create an entity.\n   * @param name - The name of the entity\n   * @returns Entity\n   */\n  var _proto = Engine.prototype;\n  _proto.createEntity = function createEntity(name) {\n    return new Entity(this, name);\n  }\n\n  /**\n   * Pause the engine.\n   */;\n  _proto.pause = function pause() {\n    this._isPaused = true;\n    cancelAnimationFrame(this._requestId);\n    clearTimeout(this._timeoutId);\n  }\n\n  /**\n   * Resume the engine.\n   */;\n  _proto.resume = function resume() {\n    if (!this._isPaused) return;\n    this._isPaused = false;\n    this.time.reset();\n    this._requestId = requestAnimationFrame(this._animate);\n  }\n\n  /**\n   * Update the engine loop manually. If you call engine.run(), you generally don't need to call this function.\n   */;\n  _proto.update = function update() {\n    var time = this._time;\n    var deltaTime = time.deltaTime;\n    time.tick();\n    this._renderElementPool.resetPool();\n    this._spriteElementPool.resetPool();\n    this._spriteMaskElementPool.resetPool();\n    this._textElementPool.resetPool();\n    engineFeatureManager.callFeatureMethod(this, \"preTick\", [this, this._sceneManager._activeScene]);\n    var scene = this._sceneManager._activeScene;\n    var componentsManager = this._componentsManager;\n    if (scene) {\n      scene._activeCameras.sort(function (camera1, camera2) {\n        return camera1.priority - camera2.priority;\n      });\n      componentsManager.callScriptOnStart();\n      this.physicsManager._initialized && this.physicsManager._update(deltaTime / 1000.0);\n      this.inputManager._update();\n      componentsManager.callScriptOnUpdate(deltaTime);\n      componentsManager.callAnimationUpdate(deltaTime);\n      componentsManager.callScriptOnLateUpdate(deltaTime);\n      this._render(scene);\n    }\n    engineFeatureManager.callFeatureMethod(this, \"postTick\", [this, this._sceneManager._activeScene]);\n\n    // Engine is complete delayed destruction mechanism\n    if (this._waittingDestroy) {\n      this._sceneManager._destroyAllScene();\n    }\n    componentsManager.handlingInvalidScripts();\n    if (this._waittingDestroy) {\n      this._destroy();\n    }\n  }\n\n  /**\n   * Execution engine loop.\n   */;\n  _proto.run = function run() {\n    // @todo: delete\n    engineFeatureManager.callFeatureMethod(this, \"preLoad\", [this]);\n    this.resume();\n    this.trigger(new Event(\"run\", this));\n  }\n\n  /**\n   * Destroy engine.\n   * @remarks The timing of engine destruction is at the end of the current frame\n   */;\n  _proto.destroy = function destroy() {\n    if (this._destroyed) {\n      return;\n    }\n    this._waittingDestroy = true;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroy = function _destroy() {\n    this._resourceManager._destroy();\n    this._magentaTexture2D.destroy(true);\n    this._magentaTextureCube.destroy(true);\n    this.inputManager._destroy();\n    this.trigger(new Event(\"shutdown\", this));\n    engineFeatureManager.callFeatureMethod(this, \"shutdown\", [this]);\n\n    // -- cancel animation\n    this.pause();\n    this._animate = null;\n    this._sceneManager = null;\n    this._resourceManager = null;\n    this._canvas = null;\n    this.features = [];\n    this._time = null;\n\n    // delete mask manager\n    this._spriteMaskManager.destroy();\n\n    // todo: delete\n    engineFeatureManager._objects = [];\n    this.removeAllEventListeners();\n    this._waittingDestroy = false;\n    this._destroyed = true;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getShaderProgramPool = function _getShaderProgramPool(shader) {\n    var index = shader._shaderId;\n    var shaderProgramPools = this._shaderProgramPools;\n    var pool = shaderProgramPools[index];\n    if (!pool) {\n      var length = index + 1;\n      if (length < shaderProgramPools.length) {\n        shaderProgramPools.length = length;\n      }\n      shaderProgramPools[index] = pool = new ShaderProgramPool();\n    }\n    return pool;\n  };\n  _proto._render = function _render(scene) {\n    var cameras = scene._activeCameras;\n    var componentsManager = this._componentsManager;\n    var deltaTime = this.time.deltaTime;\n    componentsManager.callRendererOnUpdate(deltaTime);\n    scene._updateShaderData();\n    if (cameras.length > 0) {\n      for (var i = 0, n = cameras.length; i < n; i++) {\n        var camera = cameras[i];\n        componentsManager.callCameraOnBeginRender(camera);\n        Scene.sceneFeatureManager.callFeatureMethod(scene, \"preRender\", [scene, camera]); //TODO: will be removed\n        camera.render();\n        Scene.sceneFeatureManager.callFeatureMethod(scene, \"postRender\", [scene, camera]); //TODO: will be removed\n        componentsManager.callCameraOnEndRender(camera);\n      }\n    } else {\n      Logger.debug(\"NO active camera.\");\n    }\n  };\n  _proto._createSpriteMaterial = function _createSpriteMaterial() {\n    var material = new Material(this, Shader.find(\"Sprite\"));\n    var renderState = material.renderState;\n    var target = renderState.blendState.targetBlendState;\n    target.enabled = true;\n    target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n    target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    target.sourceAlphaBlendFactor = BlendFactor.One;\n    target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    target.colorBlendOperation = target.alphaBlendOperation = BlendOperation.Add;\n    renderState.depthState.writeEnabled = false;\n    renderState.rasterState.cullMode = CullMode.Off;\n    material.renderQueueType = RenderQueueType.Transparent;\n    material.isGCIgnored = true;\n    return material;\n  };\n  _proto._createSpriteMaskMaterial = function _createSpriteMaskMaterial() {\n    var material = new Material(this, Shader.find(\"SpriteMask\"));\n    var renderState = material.renderState;\n    renderState.blendState.targetBlendState.colorWriteMask = ColorWriteMask.None;\n    renderState.rasterState.cullMode = CullMode.Off;\n    renderState.stencilState.enabled = true;\n    renderState.depthState.enabled = false;\n    material.isGCIgnored = true;\n    return material;\n  }\n\n  //-----------------------------------------@deprecated-----------------------------------\n  ;\n  _proto.findFeature = function findFeature(Feature) {\n    return engineFeatureManager.findFeature(this, Feature);\n  };\n  Engine.registerFeature = function registerFeature(Feature) {\n    engineFeatureManager.registerFeature(Feature);\n  };\n  _createClass(Engine, [{\n    key: \"settings\",\n    get: /** @internal */\n\n    /** @internal Conversion of space units to pixel units for 2D. */\n\n    /** @internal */\n\n    /** Physics manager of Engine. */\n\n    /* @internal */\n\n    /* @internal */\n\n    /* @internal */\n\n    /* @internal */\n\n    /* @internal */\n\n    /* @internal */\n\n    /* @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal @todo: temporary solution */\n\n    /**\n     * Settings of Engine.\n     */\n    function get() {\n      return this._settings;\n    }\n\n    /**\n     * The canvas to use for rendering.\n     */\n  }, {\n    key: \"canvas\",\n    get: function get() {\n      return this._canvas;\n    }\n\n    /**\n     * Get the resource manager.\n     */\n  }, {\n    key: \"resourceManager\",\n    get: function get() {\n      return this._resourceManager;\n    }\n\n    /**\n     * Get the scene manager.\n     */\n  }, {\n    key: \"sceneManager\",\n    get: function get() {\n      return this._sceneManager;\n    }\n\n    /**\n     * Get the Time class.\n     */\n  }, {\n    key: \"time\",\n    get: function get() {\n      return this._time;\n    }\n\n    /**\n     * Whether the engine is paused.\n     */\n  }, {\n    key: \"isPaused\",\n    get: function get() {\n      return this._isPaused;\n    }\n\n    /**\n     * The number of vertical synchronization means the number of vertical blanking for one frame.\n     * @remarks 0 means that the vertical synchronization is turned off.\n     */\n  }, {\n    key: \"vSyncCount\",\n    get: function get() {\n      return this._vSyncCount;\n    },\n    set: function set(value) {\n      this._vSyncCount = Math.max(0, Math.floor(value));\n    }\n\n    /**\n     * Set the target frame rate you want to achieve.\n     * @remarks\n     * It only takes effect when vSyncCount = 0 (ie, vertical synchronization is turned off).\n     * The larger the value, the higher the target frame rate, Number.POSITIVE_INFINITY represents the infinite target frame rate.\n     */\n  }, {\n    key: \"targetFrameRate\",\n    get: function get() {\n      return this._targetFrameRate;\n    },\n    set: function set(value) {\n      value = Math.max(0.000001, value);\n      this._targetFrameRate = value;\n      this._targetFrameInterval = 1000 / value;\n    }\n\n    /**\n     * Indicates whether the engine is destroyed.\n     */\n  }, {\n    key: \"destroyed\",\n    get: function get() {\n      return this._destroyed;\n    }\n  }]);\n  return Engine;\n}(EventDispatcher);\nEngine._gammaMacro = Shader.getMacroByName(\"OASIS_COLORSPACE_GAMMA\");\nEngine._pixelsPerUnit = 100;\nEngine._defaultBoundingBox = new BoundingBox(new Vector3(0, 0, 0), new Vector3(0, 0, 0));\n\n/**\n * System info.\n */\nvar SystemInfo = /*#__PURE__*/function () {\n  function SystemInfo() {}\n  /**\n   * @internal\n   */\n  SystemInfo._isIos = function _isIos() {\n    if (!window) {\n      return false;\n    }\n    var ua = window.navigator.userAgent.toLocaleLowerCase();\n    return /iphone|ipad|ipod/.test(ua);\n  };\n  _createClass(SystemInfo, null, [{\n    key: \"devicePixelRatio\",\n    get:\n    /**\n     * The pixel ratio of the device.\n     */\n    function get() {\n      return window.devicePixelRatio;\n    }\n  }]);\n  return SystemInfo;\n}();\n\n/**\n * Engine feature plug-in.\n * @deprecated\n */\nvar EngineFeature = /*#__PURE__*/function () {\n  function EngineFeature() {}\n  var _proto = EngineFeature.prototype;\n  /**\n   * Callback before the engine main loop runs,used to load resource.\n   * @param engine - Engine\n   */\n  _proto.preLoad = function preLoad(engine) {}\n\n  /**\n   * Callback before every engine tick.\n   * @param engine - Engine\n   * @param currentScene - Scene\n   */;\n  _proto.preTick = function preTick(engine, currentScene) {}\n\n  /**\n   * Callback after every engine tick.\n   * @param  engine - Engine\n   */;\n  _proto.postTick = function postTick(engine, currentScene) {}\n\n  /**\n   * Callback after the engine is destroyed.\n   * @param engine - Engine\n   */;\n  _proto.shutdown = function shutdown(engine) {};\n  return EngineFeature;\n}();\n\nvar _class$5, _descriptor$4, _descriptor2$4, _descriptor3$4, _descriptor4$4, _descriptor5$4, _descriptor6$4, _descriptor7$4, _descriptor8$4, _descriptor9$4;\n/**\n * Script class, used for logic writing.\n */\nvar Script = (_class$5 = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Script, _Component);\n  function Script() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _initializerDefineProperty(_this, \"_started\", _descriptor$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onStartIndex\", _descriptor2$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onUpdateIndex\", _descriptor3$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onLateUpdateIndex\", _descriptor4$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onPhysicsUpdateIndex\", _descriptor5$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onPreRenderIndex\", _descriptor6$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_onPostRenderIndex\", _descriptor7$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_entityScriptsIndex\", _descriptor8$4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_waitHandlingInValid\", _descriptor9$4, _assertThisInitialized(_this));\n    return _this;\n  }\n  var _proto = Script.prototype;\n  /**\n   * Called when be enabled first time, only once.\n   */\n  _proto.onAwake = function onAwake() {}\n\n  /**\n   * Called when be enabled.\n   */;\n  _proto.onEnable = function onEnable() {}\n\n  /**\n   * Called before the frame-level loop start for the first time, only once.\n   */;\n  _proto.onStart = function onStart() {}\n\n  /**\n   * The main loop, called frame by frame.\n   * @param deltaTime - The deltaTime when the script update.\n   */;\n  _proto.onUpdate = function onUpdate(deltaTime) {}\n\n  /**\n   * Called after the onUpdate finished, called frame by frame.\n   * @param deltaTime - The deltaTime when the script update.\n   */;\n  _proto.onLateUpdate = function onLateUpdate(deltaTime) {}\n\n  /**\n   * Called before camera rendering, called per camera.\n   * @param camera - Current camera.\n   */;\n  _proto.onBeginRender = function onBeginRender(camera) {}\n\n  /**\n   * Called after camera rendering, called per camera.\n   * @param camera - Current camera.\n   */;\n  _proto.onEndRender = function onEndRender(camera) {}\n\n  /**\n   * Called before physics calculations, the number of times is related to the physical update frequency.\n   */;\n  _proto.onPhysicsUpdate = function onPhysicsUpdate() {}\n\n  /**\n   * Called when the collision enter.\n   * @param other - ColliderShape\n   */;\n  _proto.onTriggerEnter = function onTriggerEnter(other) {}\n\n  /**\n   * Called when the collision stay.\n   * @remarks onTriggerStay is called every frame while the collision stay.\n   * @param other - ColliderShape\n   */;\n  _proto.onTriggerExit = function onTriggerExit(other) {}\n\n  /**\n   * Called when the collision exit.\n   * @param other - ColliderShape\n   */;\n  _proto.onTriggerStay = function onTriggerStay(other) {}\n\n  /**\n   * Called when the collision enter.\n   * @param other - ColliderShape\n   */;\n  _proto.onCollisionEnter = function onCollisionEnter(other) {}\n\n  /**\n   * Called when the collision stay.\n   * @remarks onTriggerStay is called every frame while the collision stay.\n   * @param other - ColliderShape\n   */;\n  _proto.onCollisionExit = function onCollisionExit(other) {}\n\n  /**\n   * Called when the collision exit.\n   * @param other - ColliderShape\n   */;\n  _proto.onCollisionStay = function onCollisionStay(other) {}\n\n  /**\n   * Called when the pointer is down while over the ColliderShape.\n   */;\n  _proto.onPointerDown = function onPointerDown() {}\n\n  /**\n   * Called when the pointer is up while over the ColliderShape.\n   */;\n  _proto.onPointerUp = function onPointerUp() {}\n\n  /**\n   * Called when the pointer is down and up with the same collider.\n   */;\n  _proto.onPointerClick = function onPointerClick() {}\n\n  /**\n   * Called when the pointer is enters the ColliderShape.\n   */;\n  _proto.onPointerEnter = function onPointerEnter() {}\n\n  /**\n   * Called when the pointer is no longer over the ColliderShape.\n   */;\n  _proto.onPointerExit = function onPointerExit() {}\n\n  /**\n   * Called when the pointer is down while over the ColliderShape and is still holding down.\n   * @remarks onPointerDrag is called every frame while the pointer is down.\n   */;\n  _proto.onPointerDrag = function onPointerDrag() {}\n\n  /**\n   * Called when be disabled.\n   */;\n  _proto.onDisable = function onDisable() {}\n\n  /**\n   * Called at the end of the destroyed frame.\n   */;\n  _proto.onDestroy = function onDestroy() {}\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */;\n  _proto._onAwake = function _onAwake() {\n    this.onAwake();\n  }\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */;\n  _proto._onEnable = function _onEnable() {\n    if (this._waitHandlingInValid) {\n      this._waitHandlingInValid = false;\n    } else {\n      var componentsManager = this.engine._componentsManager;\n      var prototype = Script.prototype;\n      if (!this._started) {\n        componentsManager.addOnStartScript(this);\n      }\n      if (this.onUpdate !== prototype.onUpdate) {\n        componentsManager.addOnUpdateScript(this);\n      }\n      if (this.onLateUpdate !== prototype.onLateUpdate) {\n        componentsManager.addOnLateUpdateScript(this);\n      }\n      if (this.onPhysicsUpdate !== prototype.onPhysicsUpdate) {\n        componentsManager.addOnPhysicsUpdateScript(this);\n      }\n      this._entity._addScript(this);\n    }\n    this.onEnable();\n  }\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */;\n  _proto._onDisable = function _onDisable() {\n    this._waitHandlingInValid = true;\n    this._engine._componentsManager.addDisableScript(this);\n    this.onDisable();\n  }\n\n  /**\n   * @internal\n   * @inheritDoc\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    this._engine._componentsManager.addDestroyScript(this);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._handlingInValid = function _handlingInValid() {\n    var componentsManager = this.engine._componentsManager;\n    var prototype = Script.prototype;\n    if (this.onUpdate !== prototype.onUpdate) {\n      componentsManager.removeOnUpdateScript(this);\n    }\n    if (this.onLateUpdate !== prototype.onLateUpdate) {\n      componentsManager.removeOnLateUpdateScript(this);\n    }\n    if (this.onPhysicsUpdate !== prototype.onPhysicsUpdate) {\n      componentsManager.removeOnPhysicsUpdateScript(this);\n    }\n    this._entity._removeScript(this);\n    this._waitHandlingInValid = false;\n  };\n  return Script;\n}(Component), (_descriptor$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_started\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor2$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_onStartIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor3$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_onUpdateIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor4$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_onLateUpdateIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor5$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_onPhysicsUpdateIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor6$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_onPreRenderIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor7$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_onPostRenderIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor8$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_entityScriptsIndex\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return -1;\n  }\n}), _descriptor9$4 = _applyDecoratedDescriptor(_class$5.prototype, \"_waitHandlingInValid\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n})), _class$5);\n\nvar passNum = 0;\n\n/**\n * RenderPass.\n */\nvar RenderPass = /*#__PURE__*/function () {\n  /**\n   * Create a RenderPass.\n   * @param name - Pass name\n   * @param priority - Priority, less than 0 before the default pass, greater than 0 after the default pass\n   * @param renderTarget - The specified Render Target\n   * @param replaceMaterial -  Replaced material\n   * @param mask - Perform bit and operations with Entity.Layer to filter the objects that this Pass needs to render\n   */\n  function RenderPass(name, priority, renderTarget, replaceMaterial, mask) {\n    if (name === void 0) {\n      name = \"RENDER_PASS\" + passNum++;\n    }\n    if (priority === void 0) {\n      priority = 0;\n    }\n    if (renderTarget === void 0) {\n      renderTarget = null;\n    }\n    if (replaceMaterial === void 0) {\n      replaceMaterial = null;\n    }\n    if (mask === void 0) {\n      mask = null;\n    }\n    this.name = void 0;\n    this.enabled = void 0;\n    this.priority = void 0;\n    this.renderTarget = void 0;\n    this.replaceMaterial = void 0;\n    this.mask = void 0;\n    this.renderOverride = void 0;\n    this.clearFlags = void 0;\n    this.clearColor = void 0;\n    this.name = name;\n    this.enabled = true;\n    this.priority = priority;\n    this.renderTarget = renderTarget;\n    this.replaceMaterial = replaceMaterial;\n    this.mask = mask || Layer.Everything;\n    this.renderOverride = false; // If renderOverride is set to true, you need to implement the render method\n  }\n\n  /**\n   * Rendering callback, will be executed if renderOverride is set to true.\n   * @param camera - Camera\n   * @param opaqueQueue - Opaque queue\n   * @param alphaTestQueue - Alpha test queue\n   * @param transparentQueue - Transparent queue\n   */\n  var _proto = RenderPass.prototype;\n  _proto.render = function render(camera, opaqueQueue, alphaTestQueue, transparentQueue) {}\n\n  /**\n   * Post rendering callback.\n   * @param camera - Camera\n   * @param opaqueQueue - Opaque queue\n   * @param alphaTestQueue - Alpha test queue\n   * @param transparentQueue - Transparent queue\n   */;\n  _proto.preRender = function preRender(camera, opaqueQueue, alphaTestQueue, transparentQueue) {}\n\n  /**\n   * Post rendering callback.\n   * @param camera - Camera\n   * @param opaqueQueue - Opaque queue\n   * @param alphaTestQueue - Alpha test queue\n   * @param transparentQueue - Transparent queue\n   */;\n  _proto.postRender = function postRender(camera, opaqueQueue, alphaTestQueue, transparentQueue) {};\n  return RenderPass;\n}();\n\n/**\n * @internal\n */\nvar SpriteBatcher = /*#__PURE__*/function (_Basic2DBatcher) {\n  _inheritsLoose(SpriteBatcher, _Basic2DBatcher);\n  function SpriteBatcher() {\n    return _Basic2DBatcher.apply(this, arguments) || this;\n  }\n  var _proto = SpriteBatcher.prototype;\n  _proto.createVertexElements = function createVertexElements(vertexElements) {\n    vertexElements[0] = new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0);\n    vertexElements[1] = new VertexElement(\"TEXCOORD_0\", 12, VertexElementFormat.Vector2, 0);\n    vertexElements[2] = new VertexElement(\"COLOR_0\", 20, VertexElementFormat.Vector4, 0);\n    return 36;\n  };\n  _proto.canBatch = function canBatch(preElement, curElement) {\n    if (!this._engine._canSpriteBatch) {\n      return false;\n    }\n    var preRenderer = preElement.component;\n    var curRenderer = curElement.component;\n\n    // Compare mask\n    if (!this.checkBatchWithMask(preRenderer, curRenderer)) {\n      return false;\n    }\n\n    // Compare texture\n    if (preElement.texture !== curElement.texture) {\n      return false;\n    }\n\n    // Compare material\n    return preElement.material === curElement.material;\n  };\n  _proto.checkBatchWithMask = function checkBatchWithMask(left, right) {\n    var leftMaskInteraction = left.maskInteraction;\n    if (leftMaskInteraction !== right.maskInteraction) {\n      return false;\n    }\n    if (leftMaskInteraction === SpriteMaskInteraction.None) {\n      return true;\n    }\n    return left.maskLayer === right.maskLayer;\n  };\n  _proto.updateVertices = function updateVertices(element, vertices, vertexIndex) {\n    var _element$renderData = element.renderData,\n      positions = _element$renderData.positions,\n      uvs = _element$renderData.uvs,\n      color = _element$renderData.color,\n      vertexCount = _element$renderData.vertexCount;\n    for (var i = 0; i < vertexCount; i++) {\n      var curPos = positions[i];\n      var curUV = uvs[i];\n      vertices[vertexIndex++] = curPos.x;\n      vertices[vertexIndex++] = curPos.y;\n      vertices[vertexIndex++] = curPos.z;\n      vertices[vertexIndex++] = curUV.x;\n      vertices[vertexIndex++] = curUV.y;\n      vertices[vertexIndex++] = color.r;\n      vertices[vertexIndex++] = color.g;\n      vertices[vertexIndex++] = color.b;\n      vertices[vertexIndex++] = color.a;\n    }\n    return vertexIndex;\n  };\n  _proto.drawBatches = function drawBatches(camera, replaceMaterial) {\n    var engine = this._engine,\n      batchedQueue = this._batchedQueue;\n    var mesh = this._meshes[this._flushId];\n    var subMeshes = mesh.subMeshes;\n    var maskManager = engine._spriteMaskManager;\n    var sceneData = camera.scene.shaderData;\n    var cameraData = camera.shaderData;\n    for (var i = 0, len = subMeshes.length; i < len; i++) {\n      var subMesh = subMeshes[i];\n      var spriteElement = batchedQueue[i];\n      if (!subMesh || !spriteElement) {\n        return;\n      }\n      var renderer = spriteElement.component;\n      var material = spriteElement.material;\n      maskManager.preRender(camera, renderer);\n      var compileMacros = Shader._compileMacros;\n      // union render global macro and material self macro.\n      ShaderMacroCollection.unionCollection(renderer._globalShaderMacro, material.shaderData._macroCollection, compileMacros);\n\n      // @todo: temporary solution\n      (replaceMaterial || material)._preRender(spriteElement);\n      var program = (replaceMaterial || material).shader._getShaderProgram(engine, compileMacros);\n      if (!program.isValid) {\n        return;\n      }\n      renderer.shaderData.setTexture(SpriteBatcher._textureProperty, spriteElement.texture);\n      program.bind();\n      program.groupingOtherUniformBlock();\n      program.uploadAll(program.sceneUniformBlock, sceneData);\n      program.uploadAll(program.cameraUniformBlock, cameraData);\n      program.uploadAll(program.rendererUniformBlock, renderer.shaderData);\n      program.uploadAll(program.materialUniformBlock, material.shaderData);\n      material.renderState._apply(engine, false);\n      engine._hardwareRenderer.drawPrimitive(mesh, subMesh, program);\n      maskManager.postRender(renderer);\n    }\n  };\n  _proto.destroy = function destroy() {\n    this._batchedQueue = null;\n    var meshes = this._meshes,\n      vertexBuffers = this._vertexBuffers,\n      indiceBuffers = this._indiceBuffers;\n    for (var i = 0, n = meshes.length; i < n; ++i) {\n      meshes[i].destroy();\n    }\n    this._meshes = null;\n    for (var _i = 0, _n = vertexBuffers.length; _i < _n; ++_i) {\n      vertexBuffers[_i].destroy();\n    }\n    this._vertexBuffers = null;\n    for (var _i2 = 0, _n2 = indiceBuffers.length; _i2 < _n2; ++_i2) {\n      indiceBuffers[_i2].destroy();\n    }\n    this._indiceBuffers = null;\n  };\n  return SpriteBatcher;\n}(Basic2DBatcher);\nSpriteBatcher._textureProperty = Shader.getPropertyByName(\"u_spriteTexture\");\n\n/**\n * Render queue.\n */\nvar RenderQueue = /*#__PURE__*/function () {\n  /**\n   * @internal\n   */\n  RenderQueue._compareFromNearToFar = function _compareFromNearToFar(a, b) {\n    return a.component.priority - b.component.priority || a.component._distanceForSort - b.component._distanceForSort;\n  }\n\n  /**\n   * @internal\n   */;\n  RenderQueue._compareFromFarToNear = function _compareFromFarToNear(a, b) {\n    return a.component.priority - b.component.priority || b.component._distanceForSort - a.component._distanceForSort;\n  };\n  function RenderQueue(engine) {\n    this.items = [];\n    this._spriteBatcher = void 0;\n    this._spriteBatcher = new SpriteBatcher(engine);\n  }\n\n  /**\n   * Push a render element.\n   */\n  var _proto = RenderQueue.prototype;\n  _proto.pushPrimitive = function pushPrimitive(element) {\n    this.items.push(element);\n  };\n  _proto.render = function render(camera, replaceMaterial, mask) {\n    var items = this.items;\n    if (items.length === 0) {\n      return;\n    }\n    var engine = camera.engine,\n      scene = camera.scene;\n    var renderCount = engine._renderCount;\n    var rhi = engine._hardwareRenderer;\n    var sceneData = scene.shaderData;\n    var cameraData = camera.shaderData;\n    for (var i = 0, n = items.length; i < n; i++) {\n      var item = items[i];\n      var renderPassFlag = item.component.entity.layer;\n      if (!(renderPassFlag & mask)) {\n        continue;\n      }\n      if (!!item.mesh) {\n        this._spriteBatcher.flush(camera, replaceMaterial);\n        var compileMacros = Shader._compileMacros;\n        var element = item;\n        var renderer = element.component;\n        var material = element.material.destroyed ? engine._magentaMaterial : element.material;\n        var rendererData = renderer.shaderData;\n        var materialData = material.shaderData;\n\n        // @todo: temporary solution\n        (replaceMaterial || material)._preRender(element);\n\n        // union render global macro and material self macro.\n        ShaderMacroCollection.unionCollection(renderer._globalShaderMacro, materialData._macroCollection, compileMacros);\n        var program = (replaceMaterial || material).shader._getShaderProgram(engine, compileMacros);\n        if (!program.isValid) {\n          continue;\n        }\n        var switchProgram = program.bind();\n        var switchRenderCount = renderCount !== program._uploadRenderCount;\n        if (switchRenderCount) {\n          program.groupingOtherUniformBlock();\n          program.uploadAll(program.sceneUniformBlock, sceneData);\n          program.uploadAll(program.cameraUniformBlock, cameraData);\n          program.uploadAll(program.rendererUniformBlock, rendererData);\n          program.uploadAll(program.materialUniformBlock, materialData);\n          // UnGroup textures should upload default value, texture uint maybe change by logic of texture bind.\n          program.uploadUnGroupTextures();\n          program._uploadCamera = camera;\n          program._uploadRenderer = renderer;\n          program._uploadMaterial = material;\n          program._uploadRenderCount = renderCount;\n        } else {\n          if (program._uploadCamera !== camera) {\n            program.uploadAll(program.cameraUniformBlock, cameraData);\n            program._uploadCamera = camera;\n          } else if (switchProgram) {\n            program.uploadTextures(program.cameraUniformBlock, cameraData);\n          }\n          if (program._uploadRenderer !== renderer) {\n            program.uploadAll(program.rendererUniformBlock, rendererData);\n            program._uploadRenderer = renderer;\n          } else if (switchProgram) {\n            program.uploadTextures(program.rendererUniformBlock, rendererData);\n          }\n          if (program._uploadMaterial !== material) {\n            program.uploadAll(program.materialUniformBlock, materialData);\n            program._uploadMaterial = material;\n          } else if (switchProgram) {\n            program.uploadTextures(program.materialUniformBlock, materialData);\n          }\n\n          // We only consider switchProgram case, because UnGroup texture's value is always default.\n          if (switchProgram) {\n            program.uploadUnGroupTextures();\n          }\n        }\n        material.renderState._apply(engine, renderer.entity.transform._isFrontFaceInvert());\n        rhi.drawPrimitive(element.mesh, element.subMesh, program);\n      } else {\n        var spriteElement = item;\n        this._spriteBatcher.drawElement(spriteElement, camera, replaceMaterial);\n      }\n    }\n    this._spriteBatcher.flush(camera, replaceMaterial);\n  }\n\n  /**\n   * Clear collection.\n   */;\n  _proto.clear = function clear() {\n    this.items.length = 0;\n    this._spriteBatcher.clear();\n  }\n\n  /**\n   * Destroy internal resources.\n   */;\n  _proto.destroy = function destroy() {\n    this._spriteBatcher.destroy();\n    this._spriteBatcher = null;\n  }\n\n  /**\n   * Sort the elements.\n   */;\n  _proto.sort = function sort(compareFunc) {\n    this._quickSort(this.items, 0, this.items.length, compareFunc);\n  }\n\n  /**\n   * @remarks\n   * Modified based on v8.\n   * https://github.com/v8/v8/blob/7.2-lkgr/src/js/array.js\n   */;\n  _proto._quickSort = function _quickSort(a, from, to, compareFunc) {\n    while (true) {\n      // Insertion sort is faster for short arrays.\n      if (to - from <= 10) {\n        this._insertionSort(a, from, to, compareFunc);\n        return;\n      }\n      var third_index = from + to >> 1;\n      // Find a pivot as the median of first, last and middle element.\n      var v0 = a[from];\n      var v1 = a[to - 1];\n      var v2 = a[third_index];\n      var c01 = compareFunc(v0, v1);\n      if (c01 > 0) {\n        // v1 < v0, so swap them.\n        var tmp = v0;\n        v0 = v1;\n        v1 = tmp;\n      } // v0 <= v1.\n      var c02 = compareFunc(v0, v2);\n      if (c02 >= 0) {\n        // v2 <= v0 <= v1.\n        var _tmp = v0;\n        v0 = v2;\n        v2 = v1;\n        v1 = _tmp;\n      } else {\n        // v0 <= v1 && v0 < v2\n        var c12 = compareFunc(v1, v2);\n        if (c12 > 0) {\n          // v0 <= v2 < v1\n          var _tmp2 = v1;\n          v1 = v2;\n          v2 = _tmp2;\n        }\n      }\n      // v0 <= v1 <= v2\n      a[from] = v0;\n      a[to - 1] = v2;\n      var pivot = v1;\n      var low_end = from + 1; // Upper bound of elements lower than pivot.\n      var high_start = to - 1; // Lower bound of elements greater than pivot.\n      a[third_index] = a[low_end];\n      a[low_end] = pivot;\n\n      // From low_end to i are elements equal to pivot.\n      // From i to high_start are elements that haven't been compared yet.\n      partition: for (var i = low_end + 1; i < high_start; i++) {\n        var element = a[i];\n        var order = compareFunc(element, pivot);\n        if (order < 0) {\n          a[i] = a[low_end];\n          a[low_end] = element;\n          low_end++;\n        } else if (order > 0) {\n          do {\n            high_start--;\n            if (high_start == i) break partition;\n            var top_elem = a[high_start];\n            order = compareFunc(top_elem, pivot);\n          } while (order > 0);\n          a[i] = a[high_start];\n          a[high_start] = element;\n          if (order < 0) {\n            element = a[i];\n            a[i] = a[low_end];\n            a[low_end] = element;\n            low_end++;\n          }\n        }\n      }\n      if (to - high_start < low_end - from) {\n        this._quickSort(a, high_start, to, compareFunc);\n        to = low_end;\n      } else {\n        this._quickSort(a, from, low_end, compareFunc);\n        from = high_start;\n      }\n    }\n  };\n  _proto._insertionSort = function _insertionSort(a, from, to, compareFunc) {\n    for (var i = from + 1; i < to; i++) {\n      var j = void 0;\n      var element = a[i];\n      for (j = i - 1; j >= from; j--) {\n        var tmp = a[j];\n        var order = compareFunc(tmp, element);\n        if (order > 0) {\n          a[j + 1] = tmp;\n        } else {\n          break;\n        }\n      }\n      a[j + 1] = element;\n    }\n  };\n  return RenderQueue;\n}();\n\n/**\n * Basic render pipeline.\n */\nvar BasicRenderPipeline = /*#__PURE__*/function () {\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /** @internal */\n\n  /**\n   * Create a basic render pipeline.\n   * @param camera - Camera\n   */\n  function BasicRenderPipeline(camera) {\n    this._opaqueQueue = void 0;\n    this._transparentQueue = void 0;\n    this._alphaTestQueue = void 0;\n    this._allSpriteMasks = new DisorderedArray();\n    this._camera = void 0;\n    this._defaultPass = void 0;\n    this._renderPassArray = void 0;\n    this._lastCanvasSize = new Vector2();\n    this._camera = camera;\n    var engine = camera.engine;\n    this._opaqueQueue = new RenderQueue(engine);\n    this._alphaTestQueue = new RenderQueue(engine);\n    this._transparentQueue = new RenderQueue(engine);\n    this._renderPassArray = [];\n    this._defaultPass = new RenderPass(\"default\", 0, null, null, 0);\n    this.addRenderPass(this._defaultPass);\n  }\n\n  /**\n   * Default render pass.\n   */\n  var _proto = BasicRenderPipeline.prototype;\n  /**\n   * Add render pass.\n   * @param nameOrPass - The name of this Pass or RenderPass object. When it is a name, the following parameters need to be provided\n   * @param priority - Priority, less than 0 before the default pass, greater than 0 after the default pass\n   * @param renderTarget - The specified Render Target\n   * @param replaceMaterial -  Replaced material\n   * @param mask - Perform bit and operations with Entity.Layer to filter the objects that this Pass needs to render\n   */\n  _proto.addRenderPass = function addRenderPass(nameOrPass, priority, renderTarget, replaceMaterial, mask) {\n    if (priority === void 0) {\n      priority = null;\n    }\n    if (renderTarget === void 0) {\n      renderTarget = null;\n    }\n    if (replaceMaterial === void 0) {\n      replaceMaterial = null;\n    }\n    if (mask === void 0) {\n      mask = null;\n    }\n    if (typeof nameOrPass === \"string\") {\n      var renderPass = new RenderPass(nameOrPass, priority, renderTarget, replaceMaterial, mask);\n      this._renderPassArray.push(renderPass);\n    } else if (nameOrPass instanceof RenderPass) {\n      this._renderPassArray.push(nameOrPass);\n    }\n    this._renderPassArray.sort(function (p1, p2) {\n      return p1.priority - p2.priority;\n    });\n  }\n\n  /**\n   * Remove render pass by name or render pass object.\n   * @param nameOrPass - Render pass name or render pass object\n   */;\n  _proto.removeRenderPass = function removeRenderPass(nameOrPass) {\n    var pass;\n    if (typeof nameOrPass === \"string\") pass = this.getRenderPass(nameOrPass);else if (nameOrPass instanceof RenderPass) pass = nameOrPass;\n    if (pass) {\n      var idx = this._renderPassArray.indexOf(pass);\n      this._renderPassArray.splice(idx, 1);\n    }\n  }\n\n  /**\n   * Get render pass by name.\n   * @param  name - Render pass name\n   */;\n  _proto.getRenderPass = function getRenderPass(name) {\n    for (var i = 0, len = this._renderPassArray.length; i < len; i++) {\n      var pass = this._renderPassArray[i];\n      if (pass.name === name) return pass;\n    }\n    return null;\n  }\n\n  /**\n   * Destroy internal resources.\n   */;\n  _proto.destroy = function destroy() {\n    this._opaqueQueue.destroy();\n    this._alphaTestQueue.destroy();\n    this._transparentQueue.destroy();\n    this._allSpriteMasks = null;\n    this._renderPassArray = null;\n    this._defaultPass = null;\n    this._camera = null;\n  }\n\n  /**\n   * Perform scene rendering.\n   * @param context - Render context\n   * @param cubeFace - Render surface of cube texture\n   * @param mipLevel - Set mip level the data want to write\n   */;\n  _proto.render = function render(context, cubeFace, mipLevel) {\n    var camera = this._camera;\n    var opaqueQueue = this._opaqueQueue;\n    var alphaTestQueue = this._alphaTestQueue;\n    var transparentQueue = this._transparentQueue;\n    camera.engine._spriteMaskManager.clear();\n    opaqueQueue.clear();\n    alphaTestQueue.clear();\n    transparentQueue.clear();\n    this._allSpriteMasks.length = 0;\n    camera.engine._componentsManager.callRender(context);\n    opaqueQueue.sort(RenderQueue._compareFromNearToFar);\n    alphaTestQueue.sort(RenderQueue._compareFromNearToFar);\n    transparentQueue.sort(RenderQueue._compareFromFarToNear);\n    for (var i = 0, len = this._renderPassArray.length; i < len; i++) {\n      this._drawRenderPass(this._renderPassArray[i], camera, cubeFace, mipLevel);\n    }\n  };\n  _proto._drawRenderPass = function _drawRenderPass(pass, camera, cubeFace, mipLevel) {\n    pass.preRender(camera, this._opaqueQueue, this._alphaTestQueue, this._transparentQueue);\n    if (pass.enabled) {\n      var _pass$clearFlags, _pass$clearColor;\n      var engine = camera.engine,\n        scene = camera.scene;\n      var background = scene.background;\n      var rhi = engine._hardwareRenderer;\n      var renderTarget = camera.renderTarget || pass.renderTarget;\n      rhi.activeRenderTarget(renderTarget, camera, mipLevel); // change viewport with mip level\n      renderTarget === null || renderTarget === void 0 ? void 0 : renderTarget._setRenderTargetInfo(cubeFace, mipLevel);\n      var clearFlags = (_pass$clearFlags = pass.clearFlags) != null ? _pass$clearFlags : camera.clearFlags;\n      var color = (_pass$clearColor = pass.clearColor) != null ? _pass$clearColor : background.solidColor;\n      if (clearFlags !== CameraClearFlags.None) {\n        rhi.clearRenderTarget(camera.engine, clearFlags, color);\n      }\n      if (pass.renderOverride) {\n        pass.render(camera, this._opaqueQueue, this._alphaTestQueue, this._transparentQueue);\n      } else {\n        this._opaqueQueue.render(camera, pass.replaceMaterial, pass.mask);\n        this._alphaTestQueue.render(camera, pass.replaceMaterial, pass.mask);\n        if (camera.clearFlags & CameraClearFlags.Color) {\n          if (background.mode === BackgroundMode.Sky) {\n            this._drawSky(engine, camera, background.sky);\n          } else if (background.mode === BackgroundMode.Texture && background.texture) {\n            this._drawBackgroundTexture(engine, background);\n          }\n        }\n        this._transparentQueue.render(camera, pass.replaceMaterial, pass.mask);\n      }\n      renderTarget === null || renderTarget === void 0 ? void 0 : renderTarget._blitRenderTarget();\n      renderTarget === null || renderTarget === void 0 ? void 0 : renderTarget.generateMipmaps();\n    }\n    pass.postRender(camera, this._opaqueQueue, this._alphaTestQueue, this._transparentQueue);\n  }\n\n  /**\n   * Push a render element to the render queue.\n   * @param element - Render element\n   */;\n  _proto.pushPrimitive = function pushPrimitive(element) {\n    switch (element.material.renderQueueType) {\n      case RenderQueueType.Transparent:\n        this._transparentQueue.pushPrimitive(element);\n        break;\n      case RenderQueueType.AlphaTest:\n        this._alphaTestQueue.pushPrimitive(element);\n        break;\n      case RenderQueueType.Opaque:\n        this._opaqueQueue.pushPrimitive(element);\n        break;\n    }\n  };\n  _proto._drawBackgroundTexture = function _drawBackgroundTexture(engine, background) {\n    var rhi = engine._hardwareRenderer;\n    var _backgroundTextureMaterial = engine._backgroundTextureMaterial,\n      canvas = engine.canvas;\n    var mesh = background._mesh;\n    if ((this._lastCanvasSize.x !== canvas.width || this._lastCanvasSize.y !== canvas.height) && background._textureFillMode !== BackgroundTextureFillMode.Fill) {\n      this._lastCanvasSize.set(canvas.width, canvas.height);\n      background._resizeBackgroundTexture();\n    }\n    var program = _backgroundTextureMaterial.shader._getShaderProgram(engine, Shader._compileMacros);\n    program.bind();\n    program.uploadAll(program.materialUniformBlock, _backgroundTextureMaterial.shaderData);\n    program.uploadUnGroupTextures();\n    _backgroundTextureMaterial.renderState._apply(engine, false);\n    rhi.drawPrimitive(mesh, mesh.subMesh, program);\n  };\n  _proto._drawSky = function _drawSky(engine, camera, sky) {\n    var material = sky.material,\n      mesh = sky.mesh,\n      _matrix = sky._matrix;\n    if (!material) {\n      Logger.warn(\"The material of sky is not defined.\");\n      return;\n    }\n    if (!mesh) {\n      Logger.warn(\"The mesh of sky is not defined.\");\n      return;\n    }\n    var rhi = engine._hardwareRenderer;\n    var shaderData = material.shaderData,\n      shader = material.shader,\n      renderState = material.renderState;\n    var compileMacros = Shader._compileMacros;\n    ShaderMacroCollection.unionCollection(camera._globalShaderMacro, shaderData._macroCollection, compileMacros);\n    var viewMatrix = camera.viewMatrix,\n      projectionMatrix = camera.projectionMatrix;\n    _matrix.copyFrom(viewMatrix);\n    var e = _matrix.elements;\n    e[12] = e[13] = e[14] = 0;\n    Matrix.multiply(projectionMatrix, _matrix, _matrix);\n    shaderData.setMatrix(\"u_mvpNoscale\", _matrix);\n    var program = shader._getShaderProgram(engine, compileMacros);\n    program.bind();\n    program.groupingOtherUniformBlock();\n    program.uploadAll(program.materialUniformBlock, shaderData);\n    program.uploadUnGroupTextures();\n    renderState._apply(engine, false);\n    rhi.drawPrimitive(mesh, mesh.subMesh, program);\n  };\n  _createClass(BasicRenderPipeline, [{\n    key: \"defaultRenderPass\",\n    get: function get() {\n      return this._defaultPass;\n    }\n  }]);\n  return BasicRenderPipeline;\n}();\n\nvar _dec$1, _class$4, _class2$4, _descriptor$3, _descriptor2$3, _descriptor3$3, _descriptor4$3, _descriptor5$3, _descriptor6$3, _descriptor7$3, _descriptor8$3, _descriptor9$3, _descriptor10$2, _descriptor11$2, _descriptor12$2, _class3;\nvar MathTemp = function MathTemp() {};\n/**\n * Camera component, as the entrance to the three-dimensional world.\n * @decorator `@dependentComponents(Transform)`\n */\nMathTemp.tempVec4 = new Vector4();\nMathTemp.tempVec3 = new Vector3();\nMathTemp.tempVec2 = new Vector2();\nvar Camera = (_dec$1 = dependentComponents(Transform), _dec$1(_class$4 = (_class2$4 = (_class3 = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Camera, _Component);\n  /**\n   * @internal\n   */\n  function Camera(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _this.shaderData = new ShaderData(ShaderDataGroup.Camera);\n    _this.priority = 0;\n    _this.enableFrustumCulling = true;\n    _this.clearFlags = CameraClearFlags.All;\n    _this.cullingMask = Layer.Everything;\n    _this._globalShaderMacro = new ShaderMacroCollection();\n    _initializerDefineProperty(_this, \"_frustum\", _descriptor$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_renderPipeline\", _descriptor2$3, _assertThisInitialized(_this));\n    _this._isOrthographic = false;\n    _this._isProjMatSetting = false;\n    _this._nearClipPlane = 0.1;\n    _this._farClipPlane = 100;\n    _this._fieldOfView = 45;\n    _this._orthographicSize = 10;\n    _this._isProjectionDirty = true;\n    _this._isInvProjMatDirty = true;\n    _this._isFrustumProjectDirty = true;\n    _this._customAspectRatio = undefined;\n    _this._renderTarget = null;\n    _initializerDefineProperty(_this, \"_frustumViewChangeFlag\", _descriptor3$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_transform\", _descriptor4$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_isViewMatrixDirty\", _descriptor5$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_isInvViewProjDirty\", _descriptor6$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_projectionMatrix\", _descriptor7$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_viewMatrix\", _descriptor8$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_viewport\", _descriptor9$3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_inverseProjectionMatrix\", _descriptor10$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_lastAspectSize\", _descriptor11$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_invViewProjMat\", _descriptor12$2, _assertThisInitialized(_this));\n    var transform = _this.entity.transform;\n    _this._transform = transform;\n    _this._isViewMatrixDirty = transform.registerWorldChangeFlag();\n    _this._isInvViewProjDirty = transform.registerWorldChangeFlag();\n    _this._frustumViewChangeFlag = transform.registerWorldChangeFlag();\n    _this._renderPipeline = new BasicRenderPipeline(_assertThisInitialized(_this));\n    _this.shaderData._addRefCount(1);\n    return _this;\n  }\n\n  /**\n   * Restore the automatic calculation of projection matrix through fieldOfView, nearClipPlane and farClipPlane.\n   */\n  var _proto = Camera.prototype;\n  _proto.resetProjectionMatrix = function resetProjectionMatrix() {\n    this._isProjMatSetting = false;\n    this._projMatChange();\n  }\n\n  /**\n   * Restore the automatic calculation of the aspect ratio through the viewport aspect ratio.\n   */;\n  _proto.resetAspectRatio = function resetAspectRatio() {\n    this._customAspectRatio = undefined;\n    this._projMatChange();\n  }\n\n  /**\n   * Transform a point from world space to viewport space.\n   * @param point - Point in world space\n   * @param out - Point in viewport space, X and Y are the camera viewport space coordinates, Z is in world space units from the plane that camera forward is normal to\n   * @returns Point in viewport space\n   */;\n  _proto.worldToViewportPoint = function worldToViewportPoint(point, out) {\n    var cameraPoint = MathTemp.tempVec3;\n    var viewportPoint = MathTemp.tempVec4;\n    Vector3.transformCoordinate(point, this.viewMatrix, cameraPoint);\n    Vector3.transformToVec4(cameraPoint, this.projectionMatrix, viewportPoint);\n    var w = viewportPoint.w;\n    out.set((viewportPoint.x / w + 1.0) * 0.5, (1.0 - viewportPoint.y / w) * 0.5, -cameraPoint.z);\n    return out;\n  }\n\n  /**\n   * Transform a point from viewport space to world space.\n   * @param point - Point in viewport space, X and Y are the camera viewport space coordinates, Z is in world space units from the plane that camera forward is normal to\n   * @param out - Point in world space\n   * @returns Point in world space\n   */;\n  _proto.viewportToWorldPoint = function viewportToWorldPoint(point, out) {\n    var nearClipPlane = this.nearClipPlane,\n      farClipPlane = this.farClipPlane;\n    var nf = 1 / (nearClipPlane - farClipPlane);\n    var z;\n    if (this.isOrthographic) {\n      z = -point.z * 2 * nf;\n      z += (farClipPlane + nearClipPlane) * nf;\n    } else {\n      var pointZ = point.z;\n      z = -pointZ * (nearClipPlane + farClipPlane) * nf;\n      z += 2 * nearClipPlane * farClipPlane * nf;\n      z = z / pointZ;\n    }\n    this._innerViewportToWorldPoint(point.x, point.y, (z + 1.0) / 2.0, this._getInvViewProjMat(), out);\n    return out;\n  }\n\n  /**\n   * Generate a ray by a point in viewport.\n   * @param point - Point in viewport space, X and Y are the camera viewport space coordinates\n   * @param out - Ray\n   * @returns Ray\n   */;\n  _proto.viewportPointToRay = function viewportPointToRay(point, out) {\n    var invViewProjMat = this._getInvViewProjMat();\n    // Use the intersection of the near clipping plane as the origin point.\n    var origin = this._innerViewportToWorldPoint(point.x, point.y, 0.0, invViewProjMat, out.origin);\n    // Use the intersection of the far clipping plane as the origin point.\n    var direction = this._innerViewportToWorldPoint(point.x, point.y, 1.0, invViewProjMat, out.direction);\n    Vector3.subtract(direction, origin, direction);\n    direction.normalize();\n    return out;\n  }\n\n  /**\n   * Transform the X and Y coordinates of a point from screen space to viewport space\n   * @param point - Point in screen space\n   * @param out - Point in viewport space\n   * @returns Point in viewport space\n   */;\n  _proto.screenToViewportPoint = function screenToViewportPoint(point, out) {\n    var canvas = this.engine.canvas;\n    var viewport = this.viewport;\n    out.x = (point.x / canvas.width - viewport.x) / viewport.z;\n    out.y = (point.y / canvas.height - viewport.y) / viewport.w;\n    point.z !== undefined && (out.z = point.z);\n    return out;\n  }\n\n  /**\n   * Transform the X and Y coordinates of a point from viewport space to screen space.\n   * @param point - Point in viewport space\n   * @param out - Point in screen space\n   * @returns Point in screen space\n   */;\n  _proto.viewportToScreenPoint = function viewportToScreenPoint(point, out) {\n    var canvas = this.engine.canvas;\n    var viewport = this.viewport;\n    out.x = (viewport.x + point.x * viewport.z) * canvas.width;\n    out.y = (viewport.y + point.y * viewport.w) * canvas.height;\n    point.z !== undefined && (out.z = point.z);\n    return out;\n  }\n\n  /**\n   * Transform a point from world space to screen space.\n   * @param point - Point in world space\n   * @param out - Point of screen space\n   * @returns Point of screen space\n   */;\n  _proto.worldToScreenPoint = function worldToScreenPoint(point, out) {\n    this.worldToViewportPoint(point, out);\n    return this.viewportToScreenPoint(out, out);\n  }\n\n  /**\n   * Transform a point from screen space to world space.\n   *\n   * @param point - Screen space point, the top-left of the screen is (0,0), the right-bottom is (pixelWidth,pixelHeight), The z position is in world units from the camera\n   * @param out - Point in world space\n   * @returns Point in world space\n   */;\n  _proto.screenToWorldPoint = function screenToWorldPoint(point, out) {\n    this.screenToViewportPoint(point, out);\n    return this.viewportToWorldPoint(out, out);\n  }\n\n  /**\n   * Generate a ray by a point in screen.\n   * @param point - Point in screen space, the top-left of the screen is (0,0), the right-bottom is (pixelWidth,pixelHeight)\n   * @param out - Ray\n   * @returns Ray\n   */;\n  _proto.screenPointToRay = function screenPointToRay(point, out) {\n    var viewportPoint = MathTemp.tempVec2;\n    this.screenToViewportPoint(point, viewportPoint);\n    return this.viewportPointToRay(viewportPoint, out);\n  }\n\n  /**\n   * Manually call the rendering of the camera.\n   * @param cubeFace - Cube rendering surface collection\n   * @param mipLevel - Set mip level the data want to write, only take effect in webgl2.0\n   */;\n  _proto.render = function render(cubeFace, mipLevel) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    // compute cull frustum.\n    var context = this.engine._renderContext;\n    context._setContext(this);\n    if (this.enableFrustumCulling && (this._frustumViewChangeFlag.flag || this._isFrustumProjectDirty)) {\n      this._frustum.calculateFromMatrix(context._viewProjectMatrix);\n      this._frustumViewChangeFlag.flag = false;\n      this._isFrustumProjectDirty = false;\n    }\n    this._updateShaderData(context);\n\n    // union scene and camera macro.\n    ShaderMacroCollection.unionCollection(this.scene._globalShaderMacro, this.shaderData._macroCollection, this._globalShaderMacro);\n    if (mipLevel > 0 && !this.engine._hardwareRenderer.isWebGL2) {\n      mipLevel = 0;\n      Logger.error(\"mipLevel only take effect in WebGL2.0\");\n    }\n    this._renderPipeline.render(context, cubeFace, mipLevel);\n    this._engine._renderCount++;\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */;\n  _proto._onEnable = function _onEnable() {\n    this.entity.scene._attachRenderCamera(this);\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.entity.scene._detachRenderCamera(this);\n  }\n\n  /**\n   * @override\n   * @inheritdoc\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    var _this$_renderPipeline;\n    (_this$_renderPipeline = this._renderPipeline) === null || _this$_renderPipeline === void 0 ? void 0 : _this$_renderPipeline.destroy();\n    this._isInvViewProjDirty.destroy();\n    this._isViewMatrixDirty.destroy();\n    this.shaderData._addRefCount(-1);\n  };\n  _proto._projMatChange = function _projMatChange() {\n    this._isFrustumProjectDirty = true;\n    this._isProjectionDirty = true;\n    this._isInvProjMatDirty = true;\n    this._isInvViewProjDirty.flag = true;\n  };\n  _proto._innerViewportToWorldPoint = function _innerViewportToWorldPoint(x, y, z, invViewProjMat, out) {\n    // Depth is a normalized value, 0 is nearPlane, 1 is farClipPlane.\n    // Transform to clipping space matrix\n    var clipPoint = MathTemp.tempVec3;\n    clipPoint.set(x * 2 - 1, 1 - y * 2, z * 2 - 1);\n    Vector3.transformCoordinate(clipPoint, invViewProjMat, out);\n    return out;\n  };\n  _proto._updateShaderData = function _updateShaderData(context) {\n    var shaderData = this.shaderData;\n    shaderData.setMatrix(Camera._viewMatrixProperty, this.viewMatrix);\n    shaderData.setMatrix(Camera._projectionMatrixProperty, this.projectionMatrix);\n    shaderData.setMatrix(Camera._vpMatrixProperty, context._viewProjectMatrix);\n    shaderData.setMatrix(Camera._inverseViewMatrixProperty, this._transform.worldMatrix);\n    shaderData.setMatrix(Camera._inverseProjectionMatrixProperty, this._getInverseProjectionMatrix());\n    shaderData.setVector3(Camera._cameraPositionProperty, this._transform.worldPosition);\n  }\n\n  /**\n   * The inverse matrix of view projection matrix.\n   */;\n  _proto._getInvViewProjMat = function _getInvViewProjMat() {\n    if (this._isInvViewProjDirty.flag) {\n      this._isInvViewProjDirty.flag = false;\n      Matrix.multiply(this._transform.worldMatrix, this._getInverseProjectionMatrix(), this._invViewProjMat);\n    }\n    return this._invViewProjMat;\n  }\n\n  /**\n   * The inverse of the projection matrix.\n   */;\n  _proto._getInverseProjectionMatrix = function _getInverseProjectionMatrix() {\n    if (this._isInvProjMatDirty) {\n      this._isInvProjMatDirty = false;\n      Matrix.invert(this.projectionMatrix, this._inverseProjectionMatrix);\n    }\n    return this._inverseProjectionMatrix;\n  };\n  _createClass(Camera, [{\n    key: \"nearClipPlane\",\n    get: /** Shader data. */\n\n    /** Rendering priority - A Camera with higher priority will be rendered on top of a camera with lower priority. */\n\n    /** Whether to enable frustum culling, it is enabled by default. */\n\n    /**\n     * Determining what to clear when rendering by a Camera.\n     * @defaultValue `CameraClearFlags.All`\n     */\n\n    /**\n     * Culling mask - which layers the camera renders.\n     * @remarks Support bit manipulation, corresponding to Entity's layer.\n     */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Near clip plane - the closest point to the camera when rendering occurs.\n     */\n    function get() {\n      return this._nearClipPlane;\n    },\n    set: function set(value) {\n      this._nearClipPlane = value;\n      this._projMatChange();\n    }\n\n    /**\n     * Far clip plane - the furthest point to the camera when rendering occurs.\n     */\n  }, {\n    key: \"farClipPlane\",\n    get: function get() {\n      return this._farClipPlane;\n    },\n    set: function set(value) {\n      this._farClipPlane = value;\n      this._projMatChange();\n    }\n\n    /**\n     * The camera's view angle. activating when camera use perspective projection.\n     */\n  }, {\n    key: \"fieldOfView\",\n    get: function get() {\n      return this._fieldOfView;\n    },\n    set: function set(value) {\n      this._fieldOfView = value;\n      this._projMatChange();\n    }\n\n    /**\n     * Aspect ratio. The default is automatically calculated by the viewport's aspect ratio. If it is manually set,\n     * the manual value will be kept. Call resetAspectRatio() to restore it.\n     */\n  }, {\n    key: \"aspectRatio\",\n    get: function get() {\n      var _this$_customAspectRa;\n      var canvas = this._entity.engine.canvas;\n      return (_this$_customAspectRa = this._customAspectRatio) != null ? _this$_customAspectRa : canvas.width * this._viewport.z / (canvas.height * this._viewport.w);\n    },\n    set: function set(value) {\n      this._customAspectRatio = value;\n      this._projMatChange();\n    }\n\n    /**\n     * Viewport, normalized expression, the upper left corner is (0, 0), and the lower right corner is (1, 1).\n     * @remarks Re-assignment is required after modification to ensure that the modification takes effect.\n     */\n  }, {\n    key: \"viewport\",\n    get: function get() {\n      return this._viewport;\n    },\n    set: function set(value) {\n      if (value !== this._viewport) {\n        this._viewport.copyFrom(value);\n      }\n      this._projMatChange();\n    }\n\n    /**\n     * Whether it is orthogonal, the default is false. True will use orthographic projection, false will use perspective projection.\n     */\n  }, {\n    key: \"isOrthographic\",\n    get: function get() {\n      return this._isOrthographic;\n    },\n    set: function set(value) {\n      this._isOrthographic = value;\n      this._projMatChange();\n    }\n\n    /**\n     * Half the size of the camera in orthographic mode.\n     */\n  }, {\n    key: \"orthographicSize\",\n    get: function get() {\n      return this._orthographicSize;\n    },\n    set: function set(value) {\n      this._orthographicSize = value;\n      this._projMatChange();\n    }\n\n    /**\n     * View matrix.\n     */\n  }, {\n    key: \"viewMatrix\",\n    get: function get() {\n      if (this._isViewMatrixDirty.flag) {\n        this._isViewMatrixDirty.flag = false;\n        // Ignore scale.\n        Matrix.rotationTranslation(this._transform.worldRotationQuaternion, this._transform.worldPosition, this._viewMatrix);\n        this._viewMatrix.invert();\n      }\n      return this._viewMatrix;\n    }\n\n    /**\n     * The projection matrix is ​​calculated by the relevant parameters of the camera by default.\n     * If it is manually set, the manual value will be maintained. Call resetProjectionMatrix() to restore it.\n     */\n  }, {\n    key: \"projectionMatrix\",\n    get: function get() {\n      var canvas = this._entity.engine.canvas;\n      if ((!this._isProjectionDirty || this._isProjMatSetting) && this._lastAspectSize.x === canvas.width && this._lastAspectSize.y === canvas.height) {\n        return this._projectionMatrix;\n      }\n      this._isProjectionDirty = false;\n      this._lastAspectSize.x = canvas.width;\n      this._lastAspectSize.y = canvas.height;\n      var aspectRatio = this.aspectRatio;\n      if (!this._isOrthographic) {\n        Matrix.perspective(MathUtil.degreeToRadian(this._fieldOfView), aspectRatio, this._nearClipPlane, this._farClipPlane, this._projectionMatrix);\n      } else {\n        var width = this._orthographicSize * aspectRatio;\n        var height = this._orthographicSize;\n        Matrix.ortho(-width, width, -height, height, this._nearClipPlane, this._farClipPlane, this._projectionMatrix);\n      }\n      return this._projectionMatrix;\n    }\n\n    /**\n     * Whether to enable HDR.\n     * @todo When render pipeline modification\n     */,\n    set: function set(value) {\n      this._projectionMatrix = value;\n      this._isProjMatSetting = true;\n      this._projMatChange();\n    }\n  }, {\n    key: \"enableHDR\",\n    get: function get() {\n      console.log(\"not implementation\");\n      return false;\n    },\n    set: function set(value) {\n      console.log(\"not implementation\");\n    }\n\n    /**\n     * RenderTarget. After setting, it will be rendered to the renderTarget. If it is empty, it will be rendered to the main canvas.\n     */\n  }, {\n    key: \"renderTarget\",\n    get: function get() {\n      return this._renderTarget;\n    },\n    set: function set(value) {\n      this._renderTarget = value;\n    }\n  }]);\n  return Camera;\n}(Component), _class3._viewMatrixProperty = Shader.getPropertyByName(\"u_viewMat\"), _class3._projectionMatrixProperty = Shader.getPropertyByName(\"u_projMat\"), _class3._vpMatrixProperty = Shader.getPropertyByName(\"u_VPMat\"), _class3._inverseViewMatrixProperty = Shader.getPropertyByName(\"u_viewInvMat\"), _class3._inverseProjectionMatrixProperty = Shader.getPropertyByName(\"u_projInvMat\"), _class3._cameraPositionProperty = Shader.getPropertyByName(\"u_cameraPos\"), _class3), (_descriptor$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_frustum\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new BoundingFrustum();\n  }\n}), _descriptor2$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_renderPipeline\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_frustumViewChangeFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_transform\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_isViewMatrixDirty\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor6$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_isInvViewProjDirty\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor7$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_projectionMatrix\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor8$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_viewMatrix\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor9$3 = _applyDecoratedDescriptor(_class2$4.prototype, \"_viewport\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector4(0, 0, 1, 1);\n  }\n}), _descriptor10$2 = _applyDecoratedDescriptor(_class2$4.prototype, \"_inverseProjectionMatrix\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n}), _descriptor11$2 = _applyDecoratedDescriptor(_class2$4.prototype, \"_lastAspectSize\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Vector2(0, 0);\n  }\n}), _descriptor12$2 = _applyDecoratedDescriptor(_class2$4.prototype, \"_invViewProjMat\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Matrix();\n  }\n})), _class2$4)) || _class$4);\n\nvar mimeType = {\n  json: \"json\",\n  gltf: \"json\",\n  mtl: \"json\",\n  prefab: \"json\",\n  txt: \"text\",\n  bin: \"arraybuffer\",\n  png: \"image\",\n  webp: \"image\",\n  jpg: \"image\"\n};\nvar defaultRetryCount = 1;\nvar defaultTimeout = Infinity;\nvar defaultInterval = 500;\n/**\n * Web request.\n * @param url - The link\n * @param config - Load configuration\n */\nfunction request(url, config) {\n  if (config === void 0) {\n    config = {};\n  }\n  return new AssetPromise(function (resolve, reject, setProgress) {\n    var _config$retryCount, _config$retryInterval, _config$timeout, _config$type;\n    var retryCount = (_config$retryCount = config.retryCount) != null ? _config$retryCount : defaultRetryCount;\n    var retryInterval = (_config$retryInterval = config.retryInterval) != null ? _config$retryInterval : defaultInterval;\n    config.timeout = (_config$timeout = config.timeout) != null ? _config$timeout : defaultTimeout;\n    config.type = (_config$type = config.type) != null ? _config$type : getMimeTypeFromUrl(url);\n    var realRequest = config.type === \"image\" ? requestImage : requestRes;\n    var lastError;\n    var executor = new MultiExecutor(function () {\n      return realRequest(url, config).onProgress(setProgress).then(function (res) {\n        resolve(res);\n        executor.stop();\n      }).catch(function (err) {\n        return lastError = err;\n      });\n    }, retryCount, retryInterval);\n    executor.start(function () {\n      reject(lastError);\n    });\n  });\n}\nfunction requestImage(url, config) {\n  return new AssetPromise(function (resolve, reject) {\n    var timeout = config.timeout;\n    var img = new Image();\n    var onerror = function onerror() {\n      reject(new Error(\"request \" + url + \" fail\"));\n    };\n    img.onerror = onerror;\n    img.onabort = onerror;\n    var timeoutId = -1;\n    if (timeout != Infinity) {\n      timeoutId = window.setTimeout(function () {\n        reject(new Error(\"request \" + url + \" timeout\"));\n      }, timeout);\n    }\n    img.onload = function (timeoutId) {\n      return function () {\n        // Call requestAnimationFrame to avoid iOS's bug.\n        requestAnimationFrame(function () {\n          //@ts-ignore\n          resolve(img);\n          img.onload = null;\n          img.onerror = null;\n          img.onabort = null;\n        });\n        clearTimeout(timeoutId);\n      };\n    }(timeoutId);\n    img.crossOrigin = \"anonymous\";\n    img.src = url;\n  });\n}\nfunction requestRes(url, config) {\n  return new AssetPromise(function (resolve, reject, setProgress) {\n    var _config$method;\n    var xhr = new XMLHttpRequest();\n    xhr.timeout = config.timeout;\n    config.method = (_config$method = config.method) != null ? _config$method : \"get\";\n    xhr.onload = function () {\n      var _xhr$response;\n      if (xhr.status < 200 || xhr.status >= 300) {\n        reject(new Error(\"request failed from: \" + url));\n        return;\n      }\n      var result = (_xhr$response = xhr.response) != null ? _xhr$response : xhr.responseText;\n      resolve(result);\n    };\n    xhr.onerror = function () {\n      reject(new Error(\"request failed from: \" + url));\n    };\n    xhr.ontimeout = function () {\n      reject(new Error(\"request timeout from: \" + url));\n    };\n    xhr.onprogress = function (e) {\n      setProgress(e.loaded / e.total);\n    };\n    xhr.open(config.method, url, true);\n    xhr.withCredentials = config.credentials === \"include\";\n    //@ts-ignore\n    xhr.responseType = config.type;\n    var headers = config.headers;\n    if (headers) {\n      Object.keys(headers).forEach(function (name) {\n        xhr.setRequestHeader(name, headers[name]);\n      });\n    }\n    // @ts-ignore\n    xhr.send(config.body);\n  });\n}\nfunction getMimeTypeFromUrl(url) {\n  var extname = url.substring(url.lastIndexOf(\".\") + 1);\n  return mimeType[extname];\n}\nvar MultiExecutor = /*#__PURE__*/function () {\n  function MultiExecutor(execFunc, totalCount, interval) {\n    this.execFunc = execFunc;\n    this.totalCount = totalCount;\n    this.interval = interval;\n    this._timeoutId = -100;\n    this._currentCount = 0;\n    this.done = void 0;\n    this.exec = this.exec.bind(this);\n  }\n  var _proto = MultiExecutor.prototype;\n  _proto.start = function start(done) {\n    this.done = done;\n    this.exec();\n  };\n  _proto.stop = function stop() {\n    clearTimeout(this._timeoutId);\n  };\n  _proto.exec = function exec() {\n    var _this = this;\n    if (this._currentCount >= this.totalCount) {\n      this.done && this.done();\n      return;\n    }\n    this._currentCount++;\n    this.execFunc(this._currentCount).then(function () {\n      //@ts-ignore\n      _this._timeoutId = setTimeout(_this.exec, _this.interval);\n    });\n  };\n  return MultiExecutor;\n}();\n\n/**\n * Loader abstract class.\n */\nvar Loader = /*#__PURE__*/function () {\n  /**\n   * Register a class with a string name for serialization and deserialization.\n   * @param key - class name\n   * @param obj - class object\n   */\n  Loader.registerClass = function registerClass(className, classDefine) {\n    this._engineObjects[className] = classDefine;\n  }\n\n  /**\n   * Get the class object by class name.\n   * @param key - class name\n   * @returns class object\n   */;\n  Loader.getClass = function getClass(className) {\n    return this._engineObjects[className];\n  };\n  function Loader(useCache) {\n    this.useCache = useCache;\n    this.request = request;\n  }\n  return Loader;\n}();\nLoader._engineObjects = {};\n\n/**\n * Asset Type.\n */\nvar AssetType;\n(function (AssetType) {\n  AssetType[\"Text\"] = \"text\";\n  AssetType[\"JSON\"] = \"json\";\n  AssetType[\"Buffer\"] = \"buffer\";\n  AssetType[\"Texture2D\"] = \"texture2d\";\n  AssetType[\"TextureCube\"] = \"texture-cube\";\n  AssetType[\"Material\"] = \"material\";\n  AssetType[\"Mesh\"] = \"mesh\";\n  AssetType[\"AnimationClip\"] = \"AnimationClip\";\n  AssetType[\"AnimatorController\"] = \"AnimatorController\";\n  AssetType[\"Prefab\"] = \"prefab\";\n  AssetType[\"KTX\"] = \"ktx\";\n  AssetType[\"KTXCube\"] = \"ktx-cube\";\n  AssetType[\"Sprite\"] = \"sprite\";\n  AssetType[\"SpriteAtlas\"] = \"sprite-atlas\";\n  AssetType[\"Env\"] = \"environment\";\n  AssetType[\"Scene\"] = \"scene\";\n  AssetType[\"HDR\"] = \"HDR\";\n})(AssetType || (AssetType = {}));\n\n/**\n * Set which face for render.\n */\nvar RenderFace;\n(function (RenderFace) {\n  RenderFace[RenderFace[\"Front\"] = 0] = \"Front\";\n  RenderFace[RenderFace[\"Back\"] = 1] = \"Back\";\n  RenderFace[RenderFace[\"Double\"] = 2] = \"Double\";\n})(RenderFace || (RenderFace = {}));\n\n/**\n * Alpha blend mode.\n */\nvar BlendMode;\n(function (BlendMode) {\n  BlendMode[BlendMode[\"Normal\"] = 0] = \"Normal\";\n  BlendMode[BlendMode[\"Additive\"] = 1] = \"Additive\";\n})(BlendMode || (BlendMode = {}));\n\n/**\n * Texture UV coordinate.\n */\nvar TextureCoordinate;\n(function (TextureCoordinate) {\n  TextureCoordinate[TextureCoordinate[\"UV0\"] = 0] = \"UV0\";\n  TextureCoordinate[TextureCoordinate[\"UV1\"] = 1] = \"UV1\";\n  TextureCoordinate[TextureCoordinate[\"UV2\"] = 2] = \"UV2\";\n  TextureCoordinate[TextureCoordinate[\"UV3\"] = 3] = \"UV3\";\n  TextureCoordinate[TextureCoordinate[\"UV4\"] = 4] = \"UV4\";\n  TextureCoordinate[TextureCoordinate[\"UV5\"] = 5] = \"UV5\";\n  TextureCoordinate[TextureCoordinate[\"UV6\"] = 6] = \"UV6\";\n  TextureCoordinate[TextureCoordinate[\"UV7\"] = 7] = \"UV7\";\n})(TextureCoordinate || (TextureCoordinate = {}));\n\nvar BaseMaterial = /*#__PURE__*/function (_Material) {\n  _inheritsLoose(BaseMaterial, _Material);\n  /**\n   * Create a BaseMaterial instance.\n   * @param engine - Engine to which the material belongs\n   * @param shader - Shader used by the material\n   */\n  function BaseMaterial(engine, shader) {\n    var _this;\n    _this = _Material.call(this, engine, shader) || this;\n    _this._renderFace = RenderFace.Front;\n    _this._isTransparent = false;\n    _this._blendMode = void 0;\n    _this.blendMode = BlendMode.Normal;\n    _this.shaderData.setFloat(BaseMaterial._alphaCutoffProp, 0);\n    return _this;\n  }\n\n  /**\n   * @override\n   * Clone and return the instance.\n   */\n  var _proto = BaseMaterial.prototype;\n  _proto.clone = function clone() {\n    var dest = new BaseMaterial(this._engine, this.shader);\n    this.cloneTo(dest);\n    return dest;\n  }\n\n  /**\n   * @override\n   * Clone to the target material.\n   * @param target - target material\n   */;\n  _proto.cloneTo = function cloneTo(target) {\n    _Material.prototype.cloneTo.call(this, target);\n    target._renderFace = this._renderFace;\n    target._isTransparent = this._isTransparent;\n    target._blendMode = this._blendMode;\n  };\n  _createClass(BaseMaterial, [{\n    key: \"isTransparent\",\n    get:\n    /**\n     * Is this material transparent.\n     * @remarks\n     * If material is transparent, transparent blend mode will be affected by `blendMode`, default is `BlendMode.Normal`.\n     */\n    function get() {\n      return this._isTransparent;\n    },\n    set: function set(value) {\n      if (value === this._isTransparent) return;\n      this._isTransparent = value;\n      var _this$renderState = this.renderState,\n        depthState = _this$renderState.depthState,\n        targetBlendState = _this$renderState.blendState.targetBlendState;\n      if (value) {\n        targetBlendState.enabled = true;\n        depthState.writeEnabled = false;\n        this.renderQueueType = RenderQueueType.Transparent;\n      } else {\n        targetBlendState.enabled = false;\n        depthState.writeEnabled = true;\n        this.renderQueueType = this.shaderData.getFloat(BaseMaterial._alphaCutoffProp) ? RenderQueueType.AlphaTest : RenderQueueType.Opaque;\n      }\n    }\n\n    /**\n     * Alpha cutoff value.\n     * @remarks\n     * Fragments with alpha channel lower than cutoff value will be discarded.\n     * `0` means no fragment will be discarded.\n     */\n  }, {\n    key: \"alphaCutoff\",\n    get: function get() {\n      return this.shaderData.getFloat(BaseMaterial._alphaCutoffProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(BaseMaterial._alphaCutoffProp, value);\n      if (value > 0) {\n        this.shaderData.enableMacro(BaseMaterial._alphaCutoffMacro);\n        this.renderQueueType = this._isTransparent ? RenderQueueType.Transparent : RenderQueueType.AlphaTest;\n      } else {\n        this.shaderData.disableMacro(BaseMaterial._alphaCutoffMacro);\n        this.renderQueueType = this._isTransparent ? RenderQueueType.Transparent : RenderQueueType.Opaque;\n      }\n    }\n\n    /**\n     * Set which face for render.\n     */\n  }, {\n    key: \"renderFace\",\n    get: function get() {\n      return this._renderFace;\n    },\n    set: function set(value) {\n      if (value === this._renderFace) return;\n      this._renderFace = value;\n      switch (value) {\n        case RenderFace.Front:\n          this.renderState.rasterState.cullMode = CullMode.Back;\n          break;\n        case RenderFace.Back:\n          this.renderState.rasterState.cullMode = CullMode.Front;\n          break;\n        case RenderFace.Double:\n          this.renderState.rasterState.cullMode = CullMode.Off;\n          break;\n      }\n    }\n\n    /**\n     * Alpha blend mode.\n     * @remarks\n     * Only take effect when `isTransparent` is `true`.\n     */\n  }, {\n    key: \"blendMode\",\n    get: function get() {\n      return this._blendMode;\n    },\n    set: function set(value) {\n      if (value === this._blendMode) return;\n      this._blendMode = value;\n      var target = this.renderState.blendState.targetBlendState;\n      switch (value) {\n        case BlendMode.Normal:\n          target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n          target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n          target.sourceAlphaBlendFactor = BlendFactor.One;\n          target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n          target.colorBlendOperation = target.alphaBlendOperation = BlendOperation.Add;\n          break;\n        case BlendMode.Additive:\n          target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n          target.destinationColorBlendFactor = BlendFactor.One;\n          target.sourceAlphaBlendFactor = BlendFactor.One;\n          target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n          target.colorBlendOperation = target.alphaBlendOperation = BlendOperation.Add;\n          break;\n      }\n    }\n  }]);\n  return BaseMaterial;\n}(Material);\nBaseMaterial._baseColorProp = Shader.getPropertyByName(\"u_baseColor\");\nBaseMaterial._baseTextureProp = Shader.getPropertyByName(\"u_baseTexture\");\nBaseMaterial._baseTextureMacro = Shader.getMacroByName(\"BASETEXTURE\");\nBaseMaterial._tilingOffsetProp = Shader.getPropertyByName(\"u_tilingOffset\");\nBaseMaterial._normalTextureProp = Shader.getPropertyByName(\"u_normalTexture\");\nBaseMaterial._normalIntensityProp = Shader.getPropertyByName(\"u_normalIntensity\");\nBaseMaterial._normalTextureMacro = Shader.getMacroByName(\"NORMALTEXTURE\");\nBaseMaterial._emissiveColorProp = Shader.getPropertyByName(\"u_emissiveColor\");\nBaseMaterial._emissiveTextureProp = Shader.getPropertyByName(\"u_emissiveTexture\");\nBaseMaterial._emissiveTextureMacro = Shader.getMacroByName(\"EMISSIVETEXTURE\");\nBaseMaterial._alphaCutoffProp = Shader.getPropertyByName(\"u_alphaCutoff\");\nBaseMaterial._alphaCutoffMacro = Shader.getMacroByName(\"ALPHA_CUTOFF\");\n\n/**\n * Blinn-phong Material.\n */\nvar BlinnPhongMaterial = /*#__PURE__*/function (_BaseMaterial) {\n  _inheritsLoose(BlinnPhongMaterial, _BaseMaterial);\n  function BlinnPhongMaterial(engine) {\n    var _this;\n    _this = _BaseMaterial.call(this, engine, Shader.find(\"blinn-phong\")) || this;\n    var shaderData = _this.shaderData;\n    shaderData.enableMacro(\"O3_NEED_WORLDPOS\");\n    shaderData.enableMacro(\"O3_NEED_TILINGOFFSET\");\n    shaderData.setColor(BlinnPhongMaterial._baseColorProp, new Color(1, 1, 1, 1));\n    shaderData.setColor(BlinnPhongMaterial._specularColorProp, new Color(1, 1, 1, 1));\n    shaderData.setColor(BlinnPhongMaterial._emissiveColorProp, new Color(0, 0, 0, 1));\n    shaderData.setVector4(BlinnPhongMaterial._tilingOffsetProp, new Vector4(1, 1, 0, 0));\n    shaderData.setFloat(BlinnPhongMaterial._shininessProp, 16);\n    shaderData.setFloat(BlinnPhongMaterial._normalIntensityProp, 1);\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = BlinnPhongMaterial.prototype;\n  _proto.clone = function clone() {\n    var dest = new BlinnPhongMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  };\n  _createClass(BlinnPhongMaterial, [{\n    key: \"baseColor\",\n    get:\n    /**\n     * Base color.\n     */\n    function get() {\n      return this.shaderData.getColor(BlinnPhongMaterial._baseColorProp);\n    },\n    set: function set(value) {\n      var baseColor = this.shaderData.getColor(BlinnPhongMaterial._baseColorProp);\n      if (value !== baseColor) {\n        baseColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Base texture.\n     */\n  }, {\n    key: \"baseTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(BlinnPhongMaterial._baseTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(BlinnPhongMaterial._baseTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(BlinnPhongMaterial._baseTextureMacro);\n      } else {\n        this.shaderData.disableMacro(BlinnPhongMaterial._baseTextureMacro);\n      }\n    }\n\n    /**\n     * Specular color.\n     */\n  }, {\n    key: \"specularColor\",\n    get: function get() {\n      return this.shaderData.getColor(BlinnPhongMaterial._specularColorProp);\n    },\n    set: function set(value) {\n      var specularColor = this.shaderData.getColor(BlinnPhongMaterial._specularColorProp);\n      if (value !== specularColor) {\n        specularColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Specular texture.\n     */\n  }, {\n    key: \"specularTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(BlinnPhongMaterial._specularTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(BlinnPhongMaterial._specularTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(\"O3_SPECULAR_TEXTURE\");\n      } else {\n        this.shaderData.disableMacro(\"O3_SPECULAR_TEXTURE\");\n      }\n    }\n\n    /**\n     * Emissive color.\n     */\n  }, {\n    key: \"emissiveColor\",\n    get: function get() {\n      return this.shaderData.getColor(BlinnPhongMaterial._emissiveColorProp);\n    },\n    set: function set(value) {\n      var emissiveColor = this.shaderData.getColor(BlinnPhongMaterial._emissiveColorProp);\n      if (value !== emissiveColor) {\n        emissiveColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Emissive texture.\n     */\n  }, {\n    key: \"emissiveTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(BlinnPhongMaterial._emissiveTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(BlinnPhongMaterial._emissiveTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(BlinnPhongMaterial._emissiveTextureMacro);\n      } else {\n        this.shaderData.disableMacro(BlinnPhongMaterial._emissiveTextureMacro);\n      }\n    }\n\n    /**\n     * Normal texture.\n     */\n  }, {\n    key: \"normalTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(BlinnPhongMaterial._normalTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(BlinnPhongMaterial._normalTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(BlinnPhongMaterial._normalTextureMacro);\n      } else {\n        this.shaderData.disableMacro(BlinnPhongMaterial._normalTextureMacro);\n      }\n    }\n\n    /**\n     * Normal texture intensity.\n     */\n  }, {\n    key: \"normalIntensity\",\n    get: function get() {\n      return this.shaderData.getFloat(BlinnPhongMaterial._normalIntensityProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(BlinnPhongMaterial._normalIntensityProp, value);\n    }\n\n    /**\n     * Set the specular reflection coefficient, the larger the value, the more convergent the specular reflection effect.\n     */\n  }, {\n    key: \"shininess\",\n    get: function get() {\n      return this.shaderData.getFloat(BlinnPhongMaterial._shininessProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(BlinnPhongMaterial._shininessProp, Math.max(value, 1e-4));\n    }\n\n    /**\n     * Tiling and offset of main textures.\n     */\n  }, {\n    key: \"tilingOffset\",\n    get: function get() {\n      return this.shaderData.getVector4(BlinnPhongMaterial._tilingOffsetProp);\n    },\n    set: function set(value) {\n      var tilingOffset = this.shaderData.getVector4(BlinnPhongMaterial._tilingOffsetProp);\n      if (value !== tilingOffset) {\n        tilingOffset.copyFrom(value);\n      }\n    }\n  }]);\n  return BlinnPhongMaterial;\n}(BaseMaterial);\nBlinnPhongMaterial._specularColorProp = Shader.getPropertyByName(\"u_specularColor\");\nBlinnPhongMaterial._shininessProp = Shader.getPropertyByName(\"u_shininess\");\nBlinnPhongMaterial._specularTextureProp = Shader.getPropertyByName(\"u_specularTexture\");\n\n/**\n * PBR (Physically-Based Rendering) Material.\n */\nvar PBRBaseMaterial = /*#__PURE__*/function (_BaseMaterial) {\n  _inheritsLoose(PBRBaseMaterial, _BaseMaterial);\n  /**\n   * Create a pbr base material instance.\n   * @param engine - Engine to which the material belongs\n   * @param shader - Shader used by the material\n   */\n  function PBRBaseMaterial(engine, shader) {\n    var _this;\n    _this = _BaseMaterial.call(this, engine, shader) || this;\n    var shaderData = _this.shaderData;\n    shaderData.enableMacro(\"O3_NEED_WORLDPOS\");\n    shaderData.enableMacro(\"O3_NEED_TILINGOFFSET\");\n    shaderData.setColor(PBRBaseMaterial._baseColorProp, new Color(1, 1, 1, 1));\n    shaderData.setColor(PBRBaseMaterial._emissiveColorProp, new Color(0, 0, 0, 1));\n    shaderData.setVector4(PBRBaseMaterial._tilingOffsetProp, new Vector4(1, 1, 0, 0));\n    shaderData.setFloat(PBRBaseMaterial._normalIntensityProp, 1);\n    shaderData.setFloat(PBRBaseMaterial._occlusionTextureIntensityProp, 1);\n    shaderData.setFloat(PBRBaseMaterial._occlusionTextureCoordProp, TextureCoordinate.UV0);\n    shaderData.setFloat(PBRBaseMaterial._clearCoatProp, 0);\n    shaderData.setFloat(PBRBaseMaterial._clearCoatRoughnessProp, 0);\n    return _this;\n  }\n  _createClass(PBRBaseMaterial, [{\n    key: \"baseColor\",\n    get:\n    /**\n     * Base color.\n     */\n    function get() {\n      return this.shaderData.getColor(PBRBaseMaterial._baseColorProp);\n    },\n    set: function set(value) {\n      var baseColor = this.shaderData.getColor(PBRBaseMaterial._baseColorProp);\n      if (value !== baseColor) {\n        baseColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Base texture.\n     */\n  }, {\n    key: \"baseTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._baseTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._baseTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(PBRBaseMaterial._baseTextureMacro);\n      } else {\n        this.shaderData.disableMacro(PBRBaseMaterial._baseTextureMacro);\n      }\n    }\n\n    /**\n     * Normal texture.\n     */\n  }, {\n    key: \"normalTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._normalTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._normalTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(PBRBaseMaterial._normalTextureMacro);\n      } else {\n        this.shaderData.disableMacro(PBRBaseMaterial._normalTextureMacro);\n      }\n    }\n\n    /**\n     * Normal texture intensity.\n     */\n  }, {\n    key: \"normalTextureIntensity\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRBaseMaterial._normalIntensityProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(PBRBaseMaterial._normalIntensityProp, value);\n    }\n\n    /**\n     * Emissive color.\n     */\n  }, {\n    key: \"emissiveColor\",\n    get: function get() {\n      return this.shaderData.getColor(PBRBaseMaterial._emissiveColorProp);\n    },\n    set: function set(value) {\n      var emissiveColor = this.shaderData.getColor(PBRBaseMaterial._emissiveColorProp);\n      if (value !== emissiveColor) {\n        emissiveColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Emissive texture.\n     */\n  }, {\n    key: \"emissiveTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._emissiveTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._emissiveTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(PBRBaseMaterial._emissiveTextureMacro);\n      } else {\n        this.shaderData.disableMacro(PBRBaseMaterial._emissiveTextureMacro);\n      }\n    }\n\n    /**\n     * Occlusion texture.\n     */\n  }, {\n    key: \"occlusionTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._occlusionTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._occlusionTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(\"OCCLUSIONTEXTURE\");\n      } else {\n        this.shaderData.disableMacro(\"OCCLUSIONTEXTURE\");\n      }\n    }\n\n    /**\n     * Occlusion texture intensity.\n     */\n  }, {\n    key: \"occlusionTextureIntensity\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRBaseMaterial._occlusionTextureIntensityProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(PBRBaseMaterial._occlusionTextureIntensityProp, value);\n    }\n\n    /**\n     * Occlusion texture uv coordinate.\n     * @remarks Must be UV0 or UV1.\n     */\n  }, {\n    key: \"occlusionTextureCoord\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRBaseMaterial._occlusionTextureCoordProp);\n    },\n    set: function set(value) {\n      if (value > TextureCoordinate.UV1) {\n        Logger.warn(\"Occlusion texture uv coordinate must be UV0 or UV1.\");\n      }\n      this.shaderData.setFloat(PBRBaseMaterial._occlusionTextureCoordProp, value);\n    }\n\n    /**\n     * Tiling and offset of main textures.\n     */\n  }, {\n    key: \"tilingOffset\",\n    get: function get() {\n      return this.shaderData.getVector4(PBRBaseMaterial._tilingOffsetProp);\n    },\n    set: function set(value) {\n      var tilingOffset = this.shaderData.getVector4(PBRBaseMaterial._tilingOffsetProp);\n      if (value !== tilingOffset) {\n        tilingOffset.copyFrom(value);\n      }\n    }\n\n    /**\n     * The clearCoat layer intensity, default 0.\n     */\n  }, {\n    key: \"clearCoat\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRBaseMaterial._clearCoatProp);\n    },\n    set: function set(value) {\n      if (!!this.shaderData.getFloat(PBRBaseMaterial._clearCoatProp) !== !!value) {\n        if (value === 0) {\n          this.shaderData.disableMacro(\"CLEARCOAT\");\n        } else {\n          this.shaderData.enableMacro(\"CLEARCOAT\");\n        }\n      }\n      this.shaderData.setFloat(PBRBaseMaterial._clearCoatProp, value);\n    }\n\n    /**\n     * The clearCoat layer intensity texture.\n     */\n  }, {\n    key: \"clearCoatTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._clearCoatTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._clearCoatTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(\"HAS_CLEARCOATTEXTURE\");\n      } else {\n        this.shaderData.disableMacro(\"HAS_CLEARCOATTEXTURE\");\n      }\n    }\n\n    /**\n     * The clearCoat layer roughness, default 0.\n     */\n  }, {\n    key: \"clearCoatRoughness\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRBaseMaterial._clearCoatRoughnessProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(PBRBaseMaterial._clearCoatRoughnessProp, value);\n    }\n\n    /**\n     * The clearCoat layer roughness texture.\n     */\n  }, {\n    key: \"clearCoatRoughnessTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._clearCoatRoughnessTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._clearCoatRoughnessTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(\"HAS_CLEARCOATROUGHNESSTEXTURE\");\n      } else {\n        this.shaderData.disableMacro(\"HAS_CLEARCOATROUGHNESSTEXTURE\");\n      }\n    }\n\n    /**\n     * The clearCoat normal map texture.\n     */\n  }, {\n    key: \"clearCoatNormalTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRBaseMaterial._clearCoatNormalTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRBaseMaterial._clearCoatNormalTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(\"HAS_CLEARCOATNORMALTEXTURE\");\n      } else {\n        this.shaderData.disableMacro(\"HAS_CLEARCOATNORMALTEXTURE\");\n      }\n    }\n  }]);\n  return PBRBaseMaterial;\n}(BaseMaterial);\nPBRBaseMaterial._occlusionTextureIntensityProp = Shader.getPropertyByName(\"u_occlusionIntensity\");\nPBRBaseMaterial._occlusionTextureCoordProp = Shader.getPropertyByName(\"u_occlusionTextureCoord\");\nPBRBaseMaterial._occlusionTextureProp = Shader.getPropertyByName(\"u_occlusionTexture\");\nPBRBaseMaterial._clearCoatProp = Shader.getPropertyByName(\"u_clearCoat\");\nPBRBaseMaterial._clearCoatTextureProp = Shader.getPropertyByName(\"u_clearCoatTexture\");\nPBRBaseMaterial._clearCoatRoughnessProp = Shader.getPropertyByName(\"u_clearCoatRoughness\");\nPBRBaseMaterial._clearCoatRoughnessTextureProp = Shader.getPropertyByName(\"u_clearCoatRoughnessTexture\");\nPBRBaseMaterial._clearCoatNormalTextureProp = Shader.getPropertyByName(\"u_clearCoatNormalTexture\");\n\n/**\n * PBR (Metallic-Roughness Workflow) Material.\n */\nvar PBRMaterial = /*#__PURE__*/function (_PBRBaseMaterial) {\n  _inheritsLoose(PBRMaterial, _PBRBaseMaterial);\n  /**\n   * Create a pbr metallic-roughness workflow material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  function PBRMaterial(engine) {\n    var _this;\n    _this = _PBRBaseMaterial.call(this, engine, Shader.find(\"pbr\")) || this;\n    _this.shaderData.setFloat(PBRMaterial._metallicProp, 1);\n    _this.shaderData.setFloat(PBRMaterial._roughnessProp, 1);\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = PBRMaterial.prototype;\n  _proto.clone = function clone() {\n    var dest = new PBRMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  };\n  _createClass(PBRMaterial, [{\n    key: \"metallic\",\n    get:\n    /**\n     * Metallic, default 1.0.\n     */\n    function get() {\n      return this.shaderData.getFloat(PBRMaterial._metallicProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(PBRMaterial._metallicProp, value);\n    }\n\n    /**\n     * Roughness, default 1.0.\n     */\n  }, {\n    key: \"roughness\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRMaterial._roughnessProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(PBRMaterial._roughnessProp, value);\n    }\n\n    /**\n     * Roughness metallic texture.\n     * @remarks G channel is roughness, B channel is metallic\n     */\n  }, {\n    key: \"roughnessMetallicTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRMaterial._roughnessMetallicTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRMaterial._roughnessMetallicTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(\"ROUGHNESSMETALLICTEXTURE\");\n      } else {\n        this.shaderData.disableMacro(\"ROUGHNESSMETALLICTEXTURE\");\n      }\n    }\n  }]);\n  return PBRMaterial;\n}(PBRBaseMaterial);\nPBRMaterial._metallicProp = Shader.getPropertyByName(\"u_metal\");\nPBRMaterial._roughnessProp = Shader.getPropertyByName(\"u_roughness\");\nPBRMaterial._roughnessMetallicTextureProp = Shader.getPropertyByName(\"u_roughnessMetallicTexture\");\n\n/**\n * PBR (Specular-Glossiness Workflow) Material.\n */\nvar PBRSpecularMaterial = /*#__PURE__*/function (_PBRBaseMaterial) {\n  _inheritsLoose(PBRSpecularMaterial, _PBRBaseMaterial);\n  /**\n   * Create a pbr specular-glossiness workflow material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  function PBRSpecularMaterial(engine) {\n    var _this;\n    _this = _PBRBaseMaterial.call(this, engine, Shader.find(\"pbr-specular\")) || this;\n    _this.shaderData.setColor(PBRSpecularMaterial._specularColorProp, new Color(1, 1, 1, 1));\n    _this.shaderData.setFloat(PBRSpecularMaterial._glossinessProp, 1.0);\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = PBRSpecularMaterial.prototype;\n  _proto.clone = function clone() {\n    var dest = new PBRSpecularMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  };\n  _createClass(PBRSpecularMaterial, [{\n    key: \"specularColor\",\n    get:\n    /**\n     * Specular color.\n     */\n    function get() {\n      return this.shaderData.getColor(PBRSpecularMaterial._specularColorProp);\n    },\n    set: function set(value) {\n      var specularColor = this.shaderData.getColor(PBRSpecularMaterial._specularColorProp);\n      if (value !== specularColor) {\n        specularColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Glossiness.\n     */\n  }, {\n    key: \"glossiness\",\n    get: function get() {\n      return this.shaderData.getFloat(PBRSpecularMaterial._glossinessProp);\n    },\n    set: function set(value) {\n      this.shaderData.setFloat(PBRSpecularMaterial._glossinessProp, value);\n    }\n\n    /**\n     * Specular glossiness texture.\n     * @remarks RGB is specular, A is glossiness\n     */\n  }, {\n    key: \"specularGlossinessTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(PBRSpecularMaterial._specularGlossinessTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(PBRSpecularMaterial._specularGlossinessTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(PBRSpecularMaterial._specularGlossinessTextureMacro);\n      } else {\n        this.shaderData.disableMacro(PBRSpecularMaterial._specularGlossinessTextureMacro);\n      }\n    }\n  }]);\n  return PBRSpecularMaterial;\n}(PBRBaseMaterial);\nPBRSpecularMaterial._specularColorProp = Shader.getPropertyByName(\"u_PBRSpecularColor\");\nPBRSpecularMaterial._glossinessProp = Shader.getPropertyByName(\"u_glossiness\");\nPBRSpecularMaterial._specularGlossinessTextureProp = Shader.getPropertyByName(\"u_specularGlossinessTexture\");\nPBRSpecularMaterial._specularGlossinessTextureMacro = Shader.getMacroByName(\"SPECULARGLOSSINESSTEXTURE\");\n\n/**\n * Unlit Material.\n */\nvar UnlitMaterial = /*#__PURE__*/function (_BaseMaterial) {\n  _inheritsLoose(UnlitMaterial, _BaseMaterial);\n  /**\n   * Create a unlit material instance.\n   * @param engine - Engine to which the material belongs\n   */\n  function UnlitMaterial(engine) {\n    var _this;\n    _this = _BaseMaterial.call(this, engine, Shader.find(\"unlit\")) || this;\n    var shaderData = _this.shaderData;\n    shaderData.enableMacro(\"OMIT_NORMAL\");\n    shaderData.enableMacro(\"O3_NEED_TILINGOFFSET\");\n    shaderData.setColor(UnlitMaterial._baseColorProp, new Color(1, 1, 1, 1));\n    shaderData.setVector4(UnlitMaterial._tilingOffsetProp, new Vector4(1, 1, 0, 0));\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = UnlitMaterial.prototype;\n  _proto.clone = function clone() {\n    var dest = new UnlitMaterial(this._engine);\n    this.cloneTo(dest);\n    return dest;\n  };\n  _createClass(UnlitMaterial, [{\n    key: \"baseColor\",\n    get:\n    /**\n     * Base color.\n     */\n    function get() {\n      return this.shaderData.getColor(UnlitMaterial._baseColorProp);\n    },\n    set: function set(value) {\n      var baseColor = this.shaderData.getColor(UnlitMaterial._baseColorProp);\n      if (value !== baseColor) {\n        baseColor.copyFrom(value);\n      }\n    }\n\n    /**\n     * Base texture.\n     */\n  }, {\n    key: \"baseTexture\",\n    get: function get() {\n      return this.shaderData.getTexture(UnlitMaterial._baseTextureProp);\n    },\n    set: function set(value) {\n      this.shaderData.setTexture(UnlitMaterial._baseTextureProp, value);\n      if (value) {\n        this.shaderData.enableMacro(UnlitMaterial._baseTextureMacro);\n      } else {\n        this.shaderData.disableMacro(UnlitMaterial._baseTextureMacro);\n      }\n    }\n\n    /**\n     * Tiling and offset of main textures.\n     */\n  }, {\n    key: \"tilingOffset\",\n    get: function get() {\n      return this.shaderData.getVector4(UnlitMaterial._tilingOffsetProp);\n    },\n    set: function set(value) {\n      var tilingOffset = this.shaderData.getVector4(UnlitMaterial._tilingOffsetProp);\n      if (value !== tilingOffset) {\n        tilingOffset.copyFrom(value);\n      }\n    }\n  }]);\n  return UnlitMaterial;\n}(BaseMaterial);\n\n/**\n * The horizontal alignment of the text.\n */\nvar TextHorizontalAlignment;\n\n/**\n * The vertical alignment of the text.\n */\n(function (TextHorizontalAlignment) {\n  TextHorizontalAlignment[TextHorizontalAlignment[\"Left\"] = 0] = \"Left\";\n  TextHorizontalAlignment[TextHorizontalAlignment[\"Center\"] = 1] = \"Center\";\n  TextHorizontalAlignment[TextHorizontalAlignment[\"Right\"] = 2] = \"Right\";\n})(TextHorizontalAlignment || (TextHorizontalAlignment = {}));\nvar TextVerticalAlignment;\n(function (TextVerticalAlignment) {\n  TextVerticalAlignment[TextVerticalAlignment[\"Top\"] = 0] = \"Top\";\n  TextVerticalAlignment[TextVerticalAlignment[\"Center\"] = 1] = \"Center\";\n  TextVerticalAlignment[TextVerticalAlignment[\"Bottom\"] = 2] = \"Bottom\";\n})(TextVerticalAlignment || (TextVerticalAlignment = {}));\n\n/**\n * The way to handle the situation where wrapped text is too tall to fit in the height.\n */\nvar OverflowMode;\n(function (OverflowMode) {\n  OverflowMode[OverflowMode[\"Overflow\"] = 0] = \"Overflow\";\n  OverflowMode[OverflowMode[\"Truncate\"] = 1] = \"Truncate\";\n})(OverflowMode || (OverflowMode = {}));\n\n/**\n * The style of the font.\n */\nvar FontStyle;\n(function (FontStyle) {\n  FontStyle[FontStyle[\"None\"] = 0] = \"None\";\n  FontStyle[FontStyle[\"Bold\"] = 1] = \"Bold\";\n  FontStyle[FontStyle[\"Italic\"] = 2] = \"Italic\";\n})(FontStyle || (FontStyle = {}));\n\n/**\n * Sprite Atlas.\n */\nvar SpriteAtlas = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(SpriteAtlas, _RefObject);\n  var _proto = SpriteAtlas.prototype;\n  /**\n   * Get the last sprite named 'name' from the atlas.\n   * @param name - The name of the sprite you want to find\n   * @returns The sprite you want to find\n   */\n  _proto.getSprite = function getSprite(name) {\n    var sprite = this._sprites[this._spriteNamesToIndex[name]];\n    if (!sprite) {\n      console.warn(\"There is no sprite named \" + name + \" in the atlas.\");\n    }\n    return sprite;\n  }\n\n  /**\n   * Get all the sprite named 'name' from the atlas.\n   * @param name - The name of the sprites you want to find\n   * @param outSprites - This array holds the sprites found\n   * @returns The sprites you want to find\n   */;\n  _proto.getSprites = function getSprites(name, outSprites) {\n    outSprites.length = 0;\n    var i = this._spriteNamesToIndex[name];\n    if (i !== undefined) {\n      var _sprites = this._sprites;\n      for (; i >= 0; i--) {\n        var sprite = _sprites[i];\n        sprite.name === name && outSprites.push(sprite);\n      }\n    } else {\n      console.warn(\"The name of the sprite you want to find is not exit in SpriteAtlas.\");\n    }\n    return outSprites;\n  }\n\n  /**\n   * Constructor a SpriteAtlas.\n   * @param engine - Engine to which the SpriteAtlas belongs\n   */;\n  function SpriteAtlas(engine) {\n    var _this;\n    _this = _RefObject.call(this, engine) || this;\n    _this._sprites = new Array();\n    _this._spriteNamesToIndex = {};\n    return _this;\n  }\n\n  /**\n   * @internal\n   */\n  _proto._addSprite = function _addSprite(sprite) {\n    this._spriteNamesToIndex[sprite.name] = this._sprites.push(sprite) - 1;\n  }\n\n  /**\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    this._sprites = null;\n    this._spriteNamesToIndex = null;\n  };\n  _createClass(SpriteAtlas, [{\n    key: \"sprites\",\n    get:\n    /**\n     * All the sprites in the atlas.\n     */\n    function get() {\n      return this._sprites;\n    }\n  }]);\n  return SpriteAtlas;\n}(RefObject);\n\n/**\n * Sprite's drawing mode enumeration.\n */\nvar SpriteDrawMode;\n(function (SpriteDrawMode) {\n  SpriteDrawMode[SpriteDrawMode[\"Simple\"] = 0] = \"Simple\";\n  SpriteDrawMode[SpriteDrawMode[\"Sliced\"] = 1] = \"Sliced\";\n})(SpriteDrawMode || (SpriteDrawMode = {}));\n\n/**\n * 2D sprite.\n */\nvar Sprite = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(Sprite, _RefObject);\n  /**\n   * Constructor a Sprite.\n   * @param engine - Engine to which the sprite belongs\n   * @param texture - Texture from which to obtain the Sprite\n   * @param region - Rectangle region of the texture to use for the Sprite, specified in normalized\n   * @param pivot - Sprite's pivot point relative to its graphic rectangle, specified in normalized\n   * @param border - Boundaries when using Slice DrawMode, specified in normalized\n   * @param name - The name of Sprite\n   */\n  function Sprite(engine, texture, region, pivot, border, name) {\n    var _this;\n    if (texture === void 0) {\n      texture = null;\n    }\n    if (region === void 0) {\n      region = null;\n    }\n    if (pivot === void 0) {\n      pivot = null;\n    }\n    if (border === void 0) {\n      border = null;\n    }\n    if (name === void 0) {\n      name = null;\n    }\n    _this = _RefObject.call(this, engine) || this;\n    _this.name = void 0;\n    _this._assetID = void 0;\n    _this._width = undefined;\n    _this._height = undefined;\n    _this._positions = [new Vector2(), new Vector2(), new Vector2(), new Vector2()];\n    _this._uvs = [new Vector2(), new Vector2(), new Vector2(), new Vector2()];\n    _this._bounds = new BoundingBox();\n    _this._texture = null;\n    _this._atlasRotated = false;\n    _this._atlasRegion = new Rect(0, 0, 1, 1);\n    _this._atlasRegionOffset = new Vector4(0, 0, 0, 0);\n    _this._region = new Rect(0, 0, 1, 1);\n    _this._pivot = new Vector2(0.5, 0.5);\n    _this._border = new Vector4(0, 0, 0, 0);\n    _this._dirtyFlag = DirtyFlag$2.all;\n    _this._updateFlagManager = new UpdateFlagManager();\n    _this._texture = texture;\n    region && _this._region.copyFrom(region);\n    pivot && _this._pivot.copyFrom(pivot);\n    border && _this._border.copyFrom(border);\n    _this.name = name;\n    return _this;\n  }\n\n  /**\n   * Clone.\n   * @returns Cloned sprite\n   */\n  var _proto = Sprite.prototype;\n  _proto.clone = function clone() {\n    var cloneSprite = new Sprite(this._engine, this._texture, this._region, this._pivot, this._border, this.name);\n    cloneSprite._assetID = this._assetID;\n    cloneSprite._atlasRotated = this._atlasRotated;\n    cloneSprite._atlasRegion.copyFrom(this._atlasRegion);\n    cloneSprite._atlasRegionOffset.copyFrom(this._atlasRegionOffset);\n    return cloneSprite;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._registerUpdateFlag = function _registerUpdateFlag() {\n    return this._updateFlagManager.createFlag(ListenerUpdateFlag);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getPositions = function _getPositions() {\n    this._dirtyFlag & DirtyFlag$2.positions && this._updatePositions();\n    return this._positions;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getUVs = function _getUVs() {\n    this._dirtyFlag & DirtyFlag$2.uvs && this._updateUVs();\n    return this._uvs;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getBounds = function _getBounds() {\n    this._dirtyFlag & DirtyFlag$2.positions && this._updatePositions();\n    return this._bounds;\n  }\n\n  /**\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    if (this._texture) {\n      this._texture = null;\n    }\n  };\n  _proto._calDefaultSize = function _calDefaultSize() {\n    if (this._texture) {\n      var _texture = this._texture,\n        _atlasRegion = this._atlasRegion,\n        _atlasRegionOffset = this._atlasRegionOffset,\n        _region = this._region;\n      var pixelsPerUnitReciprocal = 1.0 / Engine._pixelsPerUnit;\n      this.width = _texture.width * _atlasRegion.width / (1 - _atlasRegionOffset.x - _atlasRegionOffset.z) * _region.width * pixelsPerUnitReciprocal;\n      this.height = _texture.height * _atlasRegion.height / (1 - _atlasRegionOffset.y - _atlasRegionOffset.w) * _region.height * pixelsPerUnitReciprocal;\n    }\n  };\n  _proto._updatePositions = function _updatePositions() {\n    var blank = this._atlasRegionOffset;\n    var _this$_region = this._region,\n      regionX = _this$_region.x,\n      regionY = _this$_region.y,\n      regionW = _this$_region.width,\n      regionH = _this$_region.height;\n    var regionRight = 1 - regionX - regionW;\n    var regionBottom = 1 - regionY - regionH;\n    var left = Math.max(blank.x - regionX, 0) / regionW;\n    var bottom = Math.max(blank.w - regionY, 0) / regionH;\n    var right = 1 - Math.max(blank.z - regionRight, 0) / regionW;\n    var top = 1 - Math.max(blank.y - regionBottom, 0) / regionH;\n\n    // Update positions.\n    // ---------------\n    //  2 - 3\n    //  |   |\n    //  0 - 1\n    // ---------------\n    var positions = this._positions;\n    positions[0].set(left, bottom);\n    positions[1].set(right, bottom);\n    positions[2].set(left, top);\n    positions[3].set(right, top);\n    var _this$_bounds = this._bounds,\n      min = _this$_bounds.min,\n      max = _this$_bounds.max;\n    min.set(left, bottom, 0);\n    max.set(right, top, 0);\n    this._dirtyFlag &= ~DirtyFlag$2.positions;\n  };\n  _proto._updateUVs = function _updateUVs() {\n    var uv = this._uvs,\n      atlasRegionOffset = this._atlasRegionOffset;\n    var _this$_region2 = this._region,\n      regionX = _this$_region2.x,\n      regionY = _this$_region2.y,\n      regionW = _this$_region2.width,\n      regionH = _this$_region2.height;\n    var regionRight = 1 - regionX - regionW;\n    var regionBottom = 1 - regionY - regionH;\n    var _this$_atlasRegion = this._atlasRegion,\n      atlasRegionX = _this$_atlasRegion.x,\n      atlasRegionY = _this$_atlasRegion.y,\n      atlasRegionW = _this$_atlasRegion.width,\n      atlasRegionH = _this$_atlasRegion.height;\n    var offsetLeft = atlasRegionOffset.x,\n      offsetTop = atlasRegionOffset.y,\n      offsetRight = atlasRegionOffset.z,\n      offsetBottom = atlasRegionOffset.w;\n    var realWidth = atlasRegionW / (1 - offsetLeft - offsetRight);\n    var realHeight = atlasRegionH / (1 - offsetTop - offsetBottom);\n    // Coordinates of the four boundaries.\n    var left = Math.max(regionX - offsetLeft, 0) * realWidth + atlasRegionX;\n    var top = Math.max(regionBottom - offsetTop, 0) * realHeight + atlasRegionY;\n    var right = atlasRegionW + atlasRegionX - Math.max(regionRight - offsetRight, 0) * realWidth;\n    var bottom = atlasRegionH + atlasRegionY - Math.max(regionY - offsetBottom, 0) * realHeight;\n    var _this$_border = this._border,\n      borderLeft = _this$_border.x,\n      borderBottom = _this$_border.y,\n      borderRight = _this$_border.z,\n      borderTop = _this$_border.w;\n    // Left-Bottom\n    uv[0].set(left, bottom);\n    // Border ( Left-Bottom )\n    uv[1].set((regionX - offsetLeft + borderLeft * regionW) * realWidth + atlasRegionX, atlasRegionH + atlasRegionY - (regionY - offsetBottom + borderBottom * regionH) * realHeight);\n    // Border ( Right-Top )\n    uv[2].set(atlasRegionW + atlasRegionX - (regionRight - offsetRight + borderRight * regionW) * realWidth, (regionBottom - offsetTop + borderTop * regionH) * realHeight + atlasRegionY);\n    // Right-Top\n    uv[3].set(right, top);\n    this._dirtyFlag &= ~DirtyFlag$2.uvs;\n  };\n  _proto._dispatchSpriteChange = function _dispatchSpriteChange(type) {\n    switch (type) {\n      case SpritePropertyDirtyFlag.atlasRegionOffset:\n      case SpritePropertyDirtyFlag.region:\n        this._dirtyFlag |= DirtyFlag$2.all;\n        break;\n      case SpritePropertyDirtyFlag.atlasRegion:\n      case SpritePropertyDirtyFlag.border:\n        this._dirtyFlag |= DirtyFlag$2.uvs;\n        break;\n    }\n    this._updateFlagManager.dispatch(type);\n  };\n  _createClass(Sprite, [{\n    key: \"texture\",\n    get: /** The name of sprite. */\n\n    /** @internal temp solution. */\n\n    /**\n     * The reference to the used texture.\n     */\n    function get() {\n      return this._texture;\n    },\n    set: function set(value) {\n      if (this._texture !== value) {\n        this._texture = value;\n        this._dispatchSpriteChange(SpritePropertyDirtyFlag.texture);\n      }\n    }\n\n    /**\n     * The width of the sprite (in world coordinates).\n     */\n  }, {\n    key: \"width\",\n    get: function get() {\n      this._width === undefined && this._calDefaultSize();\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this._dispatchSpriteChange(SpritePropertyDirtyFlag.size);\n      }\n    }\n\n    /**\n     * The height of the sprite (in world coordinates).\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      this._height === undefined && this._calDefaultSize();\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this._dispatchSpriteChange(SpritePropertyDirtyFlag.size);\n      }\n    }\n\n    /**\n     * Is it rotated 90 degrees clockwise when packing.\n     */\n  }, {\n    key: \"atlasRotated\",\n    get: function get() {\n      return this._atlasRotated;\n    },\n    set: function set(value) {\n      if (this._atlasRotated != value) {\n        this._atlasRotated = value;\n      }\n    }\n\n    /**\n     * The rectangle region of the original texture on its atlas texture, specified in normalized.\n     */\n  }, {\n    key: \"atlasRegion\",\n    get: function get() {\n      return this._atlasRegion;\n    },\n    set: function set(value) {\n      var x = MathUtil.clamp(value.x, 0, 1);\n      var y = MathUtil.clamp(value.y, 0, 1);\n      this._atlasRegion.set(x, y, MathUtil.clamp(value.width, 0, 1 - x), MathUtil.clamp(value.height, 0, 1 - y));\n      this._dispatchSpriteChange(SpritePropertyDirtyFlag.atlasRegion);\n    }\n\n    /**\n     * The rectangle region offset of the original texture on its atlas texture, specified in normalized.\n     */\n  }, {\n    key: \"atlasRegionOffset\",\n    get: function get() {\n      return this._atlasRegionOffset;\n    },\n    set: function set(value) {\n      var x = MathUtil.clamp(value.x, 0, 1);\n      var y = MathUtil.clamp(value.y, 0, 1);\n      this._atlasRegionOffset.set(x, y, MathUtil.clamp(value.z, 0, 1 - x), MathUtil.clamp(value.w, 0, 1 - y));\n      this._dispatchSpriteChange(SpritePropertyDirtyFlag.atlasRegionOffset);\n    }\n\n    /**\n     * The rectangle region of the sprite, specified in normalized.\n     */\n  }, {\n    key: \"region\",\n    get: function get() {\n      return this._region;\n    },\n    set: function set(value) {\n      var region = this._region;\n      var x = MathUtil.clamp(value.x, 0, 1);\n      var y = MathUtil.clamp(value.y, 0, 1);\n      region.set(x, y, MathUtil.clamp(value.width, 0, 1 - x), MathUtil.clamp(value.height, 0, 1 - y));\n      this._dispatchSpriteChange(SpritePropertyDirtyFlag.region);\n    }\n\n    /**\n     * Location of the sprite's center point in the rectangle region, specified in normalized.\n     * The origin is at the bottom left and the default value is (0.5, 0.5).\n     */\n  }, {\n    key: \"pivot\",\n    get: function get() {\n      return this._pivot;\n    },\n    set: function set(value) {\n      var pivot = this._pivot;\n      if (pivot === value) {\n        this._dispatchSpriteChange(SpritePropertyDirtyFlag.pivot);\n      } else {\n        var x = value.x,\n          y = value.y;\n        if (pivot.x !== x || pivot.y !== y) {\n          pivot.set(x, y);\n          this._dispatchSpriteChange(SpritePropertyDirtyFlag.pivot);\n        }\n      }\n    }\n\n    /**\n     * Get the border of the sprite.\n     *  x      y       z     w\n     *  |      |       |     |\n     * Left, bottom, right, top.\n     * @remarks only use in sliced mode.\n     */\n  }, {\n    key: \"border\",\n    get: function get() {\n      return this._border;\n    },\n    set: function set(value) {\n      var border = this._border;\n      var x = MathUtil.clamp(value.x, 0, 1);\n      var y = MathUtil.clamp(value.y, 0, 1);\n      border.set(x, y, MathUtil.clamp(value.z, 0, 1 - x), MathUtil.clamp(value.w, 0, 1 - y));\n      this._dispatchSpriteChange(SpritePropertyDirtyFlag.border);\n    }\n  }]);\n  return Sprite;\n}(RefObject);\nvar DirtyFlag$2;\n(function (DirtyFlag) {\n  DirtyFlag[DirtyFlag[\"positions\"] = 1] = \"positions\";\n  DirtyFlag[DirtyFlag[\"uvs\"] = 2] = \"uvs\";\n  DirtyFlag[DirtyFlag[\"all\"] = 3] = \"all\";\n})(DirtyFlag$2 || (DirtyFlag$2 = {}));\n\nvar _dec, _class$3, _class2$3;\n\n/**\n * @internal\n */\nvar SlicedSpriteAssembler = (_dec = StaticInterfaceImplement(), _dec(_class$3 = (_class2$3 = /*#__PURE__*/function () {\n  function SlicedSpriteAssembler() {}\n  SlicedSpriteAssembler.resetData = function resetData(renderer) {\n    var renderData = renderer._renderData;\n    var positions = renderData.positions,\n      uvs = renderData.uvs;\n    if (positions.length < 16) {\n      for (var i = positions.length; i < 16; i++) {\n        positions.push(new Vector3());\n        uvs.push(new Vector2());\n      }\n    }\n    renderData.triangles = [];\n  };\n  SlicedSpriteAssembler.updatePositions = function updatePositions(renderer) {\n    var width = renderer.width,\n      height = renderer.height,\n      sprite = renderer.sprite;\n    var _renderer$_renderData = renderer._renderData,\n      positions = _renderer$_renderData.positions,\n      uvs = _renderer$_renderData.uvs,\n      triangles = _renderer$_renderData.triangles;\n    var border = sprite.border;\n    var spriteUVs = sprite._getUVs();\n    // Update local positions.\n    var spritePositions = sprite._getPositions();\n    var _spritePositions$ = spritePositions[0],\n      left = _spritePositions$.x,\n      bottom = _spritePositions$.y;\n    var _spritePositions$2 = spritePositions[3],\n      right = _spritePositions$2.x,\n      top = _spritePositions$2.y;\n    var expectWidth = sprite.width,\n      expectHeight = sprite.height;\n    var fixedLeft = expectWidth * border.x;\n    var fixedBottom = expectHeight * border.y;\n    var fixedRight = expectHeight * border.z;\n    var fixedTop = expectWidth * border.w;\n\n    // ------------------------\n    //     [3]\n    //      |\n    //     [2]\n    //      |\n    //     [1]\n    //      |\n    // row [0] - [1] - [2] - [3]\n    //    column\n    // ------------------------\n    // Calculate row and column.\n    var row, column;\n    if (fixedLeft + fixedRight > width) {\n      var widthScale = width / (fixedLeft + fixedRight);\n      row = [expectWidth * left * widthScale, fixedLeft * widthScale, fixedLeft * widthScale, width - expectWidth * (1 - right) * widthScale];\n    } else {\n      row = [expectWidth * left, fixedLeft, width - fixedRight, width - expectWidth * (1 - right)];\n    }\n    if (fixedTop + fixedBottom > height) {\n      var heightScale = height / (fixedTop + fixedBottom);\n      column = [expectHeight * bottom * heightScale, fixedBottom * heightScale, fixedBottom * heightScale, height - expectHeight * (1 - top) * heightScale];\n    } else {\n      column = [expectHeight * bottom, fixedBottom, height - fixedTop, height - expectHeight * (1 - top)];\n    }\n\n    // Update renderer's worldMatrix.\n    var _renderer$sprite$pivo = renderer.sprite.pivot,\n      pivotX = _renderer$sprite$pivo.x,\n      pivotY = _renderer$sprite$pivo.y;\n    var localTransX = renderer.width * pivotX;\n    var localTransY = renderer.height * pivotY;\n    // Renderer's worldMatrix.\n    var worldMatrix = SlicedSpriteAssembler._worldMatrix;\n    var wE = worldMatrix.elements;\n    // Parent's worldMatrix.\n    var pWE = renderer.entity.transform.worldMatrix.elements;\n    var sx = renderer.flipX ? -1 : 1;\n    var sy = renderer.flipY ? -1 : 1;\n    wE[0] = pWE[0] * sx, wE[1] = pWE[1] * sx, wE[2] = pWE[2] * sx;\n    wE[4] = pWE[4] * sy, wE[5] = pWE[5] * sy, wE[6] = pWE[6] * sy;\n    wE[8] = pWE[8], wE[9] = pWE[9], wE[10] = pWE[10];\n    wE[12] = pWE[12] - localTransX * wE[0] - localTransY * wE[4];\n    wE[13] = pWE[13] - localTransX * wE[1] - localTransY * wE[5];\n    wE[14] = pWE[14] - localTransX * wE[2] - localTransY * wE[6];\n\n    // ------------------------\n    //  3 - 7 - 11 - 15\n    //  |   |   |    |\n    //  2 - 6 - 10 - 14\n    //  |   |   |    |\n    //  1 - 5 - 9  - 13\n    //  |   |   |    |\n    //  0 - 4 - 8  - 12\n    // ------------------------\n    // Assemble position and uv.\n    var vertexCount = 0;\n    var realICount = 0;\n    for (var i = 0; i < 4; i++) {\n      var rowValue = row[i];\n      var rowU = spriteUVs[i].x;\n      for (var j = 0; j < 4; j++) {\n        var columnValue = column[j];\n        positions[vertexCount].set(wE[0] * rowValue + wE[4] * columnValue + wE[12], wE[1] * rowValue + wE[5] * columnValue + wE[13], wE[2] * rowValue + wE[6] * columnValue + wE[14]);\n        uvs[vertexCount].set(rowU, spriteUVs[j].y);\n        ++vertexCount;\n      }\n      ++realICount;\n    }\n    var realJCount = vertexCount / realICount;\n    var indexOffset = 0;\n    for (var _i = 0; _i < realICount - 1; ++_i) {\n      for (var _j = 0; _j < realJCount - 1; ++_j) {\n        var start = _i * realJCount + _j;\n        triangles[indexOffset++] = start;\n        triangles[indexOffset++] = start + 1;\n        triangles[indexOffset++] = start + realJCount;\n        triangles[indexOffset++] = start + 1;\n        triangles[indexOffset++] = start + realJCount + 1;\n        triangles[indexOffset++] = start + realJCount;\n      }\n    }\n    renderer._renderData.vertexCount = realICount * realJCount;\n    triangles.length = (realICount - 1) * (realJCount - 1) * 6;\n    var _renderer$_bounds = renderer._bounds,\n      min = _renderer$_bounds.min,\n      max = _renderer$_bounds.max;\n    min.set(row[0], column[0], 0);\n    max.set(row[3], column[3], 0);\n    renderer._bounds.transform(worldMatrix);\n  };\n  SlicedSpriteAssembler.updateUVs = function updateUVs(renderer) {};\n  return SlicedSpriteAssembler;\n}(), _class2$3._worldMatrix = new Matrix(), _class2$3)) || _class$3);\n\nvar _class$2, _descriptor$2, _descriptor2$2, _descriptor3$2, _descriptor4$2, _descriptor5$2, _descriptor6$2, _descriptor7$2, _descriptor8$2, _descriptor9$2, _descriptor10$1, _descriptor11$1, _descriptor12$1, _descriptor13$1, _class2$2;\n\n/**\n * Renders a Sprite for 2D graphics.\n */\nvar SpriteRenderer = (_class$2 = (_class2$2 = /*#__PURE__*/function (_Renderer) {\n  _inheritsLoose(SpriteRenderer, _Renderer);\n  /**\n   * @internal\n   */\n  function SpriteRenderer(entity) {\n    var _this;\n    _this = _Renderer.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"_renderData\", _descriptor$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_drawMode\", _descriptor2$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_assembler\", _descriptor3$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_color\", _descriptor4$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_sprite\", _descriptor5$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_width\", _descriptor6$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_height\", _descriptor7$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_flipX\", _descriptor8$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_flipY\", _descriptor9$2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_maskLayer\", _descriptor10$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_maskInteraction\", _descriptor11$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_dirtyFlag\", _descriptor12$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_spriteChangeFlag\", _descriptor13$1, _assertThisInitialized(_this));\n    _this._renderData = new RenderData2D(4, [], [], null, _this._color);\n    _this.drawMode = SpriteDrawMode.Simple;\n    _this.setMaterial(_this._engine._spriteDefaultMaterial);\n    _this._onSpriteChange = _this._onSpriteChange.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = SpriteRenderer.prototype;\n  _proto._render = function _render(camera) {\n    var _this$sprite;\n    if (!((_this$sprite = this.sprite) !== null && _this$sprite !== void 0 && _this$sprite.texture) || !this.width || !this.height) {\n      return;\n    }\n\n    // Update position.\n    if (this._transformChangeFlag.flag || this._dirtyFlag & DirtyFlag$1.Position) {\n      this._assembler.updatePositions(this);\n      this._dirtyFlag &= ~DirtyFlag$1.Position;\n      this._transformChangeFlag.flag = false;\n    }\n\n    // Update uv.\n    if (this._dirtyFlag & DirtyFlag$1.UV) {\n      this._assembler.updateUVs(this);\n      this._dirtyFlag &= ~DirtyFlag$1.UV;\n    }\n\n    // Push primitive.\n    var spriteElement = this._engine._spriteElementPool.getFromPool();\n    spriteElement.setValue(this, this._renderData, this.getMaterial(), this.sprite.texture);\n    camera._renderPipeline.pushPrimitive(spriteElement);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._cloneTo = function _cloneTo(target) {\n    target.sprite = this._sprite;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    this._color = null;\n    this._sprite = null;\n    this._assembler = null;\n    this._renderData = null;\n    if (this._spriteChangeFlag) {\n      this._spriteChangeFlag.destroy();\n      this._spriteChangeFlag = null;\n    }\n    _Renderer.prototype._onDestroy.call(this);\n  };\n  _proto._updateStencilState = function _updateStencilState() {\n    // Update stencil.\n    var material = this.getInstanceMaterial();\n    var stencilState = material.renderState.stencilState;\n    var maskInteraction = this._maskInteraction;\n    if (maskInteraction === SpriteMaskInteraction.None) {\n      stencilState.enabled = false;\n      stencilState.writeMask = 0xff;\n      stencilState.referenceValue = 0;\n      stencilState.compareFunctionFront = stencilState.compareFunctionBack = CompareFunction.Always;\n    } else {\n      stencilState.enabled = true;\n      stencilState.writeMask = 0x00;\n      stencilState.referenceValue = 1;\n      var compare = maskInteraction === SpriteMaskInteraction.VisibleInsideMask ? CompareFunction.LessEqual : CompareFunction.Greater;\n      stencilState.compareFunctionFront = compare;\n      stencilState.compareFunctionBack = compare;\n    }\n  };\n  _proto._onSpriteChange = function _onSpriteChange(dirtyFlag) {\n    switch (dirtyFlag) {\n      case SpritePropertyDirtyFlag.texture:\n        this.shaderData.setTexture(SpriteRenderer._textureProperty, this.sprite.texture);\n        break;\n      case SpritePropertyDirtyFlag.size:\n        this._drawMode === SpriteDrawMode.Sliced && (this._dirtyFlag |= DirtyFlag$1.Position);\n        break;\n      case SpritePropertyDirtyFlag.border:\n        this._drawMode === SpriteDrawMode.Sliced && (this._dirtyFlag |= DirtyFlag$1.All);\n        break;\n      case SpritePropertyDirtyFlag.region:\n      case SpritePropertyDirtyFlag.atlasRegionOffset:\n        this._dirtyFlag |= DirtyFlag$1.All;\n        break;\n      case SpritePropertyDirtyFlag.atlasRegion:\n        this._dirtyFlag |= DirtyFlag$1.UV;\n        break;\n      case SpritePropertyDirtyFlag.pivot:\n        this._dirtyFlag |= DirtyFlag$1.Position;\n        break;\n    }\n  };\n  _createClass(SpriteRenderer, [{\n    key: \"drawMode\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /**\n     * The draw mode of the sprite renderer.\n     */\n    function get() {\n      return this._drawMode;\n    },\n    set: function set(drawMode) {\n      if (this._drawMode !== drawMode) {\n        this._drawMode = drawMode;\n        switch (drawMode) {\n          case SpriteDrawMode.Simple:\n            this._assembler = SimpleSpriteAssembler;\n            break;\n          case SpriteDrawMode.Sliced:\n            this._assembler = SlicedSpriteAssembler;\n            break;\n        }\n        this._assembler.resetData(this);\n        this._dirtyFlag |= DirtyFlag$1.All;\n      }\n    }\n\n    /**\n     * The Sprite to render.\n     */\n  }, {\n    key: \"sprite\",\n    get: function get() {\n      return this._sprite;\n    },\n    set: function set(value) {\n      if (this._sprite !== value) {\n        this._sprite = value;\n        this._spriteChangeFlag && this._spriteChangeFlag.destroy();\n        if (value) {\n          this._spriteChangeFlag = value._registerUpdateFlag();\n          this._spriteChangeFlag.listener = this._onSpriteChange;\n          this._dirtyFlag |= DirtyFlag$1.All;\n          this.shaderData.setTexture(SpriteRenderer._textureProperty, value.texture);\n        } else {\n          this._spriteChangeFlag = null;\n          this.shaderData.setTexture(SpriteRenderer._textureProperty, null);\n        }\n      }\n    }\n\n    /**\n     * Rendering color for the Sprite graphic.\n     */\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this._color;\n    },\n    set: function set(value) {\n      if (this._color !== value) {\n        this._color.copyFrom(value);\n      }\n    }\n\n    /**\n     * Render width.\n     */\n  }, {\n    key: \"width\",\n    get: function get() {\n      if (this._width === undefined && this._sprite) {\n        this.width = this._sprite.width;\n      }\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this._dirtyFlag |= DirtyFlag$1.Position;\n      }\n    }\n\n    /**\n     * Render height.\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      if (this._height === undefined && this._sprite) {\n        this.height = this._sprite.height;\n      }\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this._dirtyFlag |= DirtyFlag$1.Position;\n      }\n    }\n\n    /**\n     * Flips the sprite on the X axis.\n     */\n  }, {\n    key: \"flipX\",\n    get: function get() {\n      return this._flipX;\n    },\n    set: function set(value) {\n      if (this._flipX !== value) {\n        this._flipX = value;\n        this._dirtyFlag |= DirtyFlag$1.Position;\n      }\n    }\n\n    /**\n     * Flips the sprite on the Y axis.\n     */\n  }, {\n    key: \"flipY\",\n    get: function get() {\n      return this._flipY;\n    },\n    set: function set(value) {\n      if (this._flipY !== value) {\n        this._flipY = value;\n        this._dirtyFlag |= DirtyFlag$1.Position;\n      }\n    }\n\n    /**\n     * The bounding volume of the spriteRenderer.\n     */\n  }, {\n    key: \"bounds\",\n    get: function get() {\n      var _this$sprite2;\n      if (!((_this$sprite2 = this.sprite) !== null && _this$sprite2 !== void 0 && _this$sprite2.texture) || !this.width || !this.height) {\n        return Engine._defaultBoundingBox;\n      } else if (this._transformChangeFlag.flag || this._dirtyFlag & DirtyFlag$1.Position) {\n        this._assembler.updatePositions(this);\n        this._dirtyFlag &= ~DirtyFlag$1.Position;\n        this._transformChangeFlag.flag = false;\n      }\n      return this._bounds;\n    }\n\n    /**\n     * The mask layer the sprite renderer belongs to.\n     */\n  }, {\n    key: \"maskLayer\",\n    get: function get() {\n      return this._maskLayer;\n    },\n    set: function set(value) {\n      this._maskLayer = value;\n    }\n\n    /**\n     * Interacts with the masks.\n     */\n  }, {\n    key: \"maskInteraction\",\n    get: function get() {\n      return this._maskInteraction;\n    },\n    set: function set(value) {\n      if (this._maskInteraction !== value) {\n        this._maskInteraction = value;\n        this._updateStencilState();\n      }\n    }\n  }]);\n  return SpriteRenderer;\n}(Renderer), _class2$2._textureProperty = Shader.getPropertyByName(\"u_spriteTexture\"), _class2$2), (_descriptor$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_renderData\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_drawMode\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_assembler\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_color\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Color(1, 1, 1, 1);\n  }\n}), _descriptor5$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_sprite\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor6$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_width\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return undefined;\n  }\n}), _descriptor7$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_height\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return undefined;\n  }\n}), _descriptor8$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_flipX\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor9$2 = _applyDecoratedDescriptor(_class$2.prototype, \"_flipY\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor10$1 = _applyDecoratedDescriptor(_class$2.prototype, \"_maskLayer\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return SpriteMaskLayer.Layer0;\n  }\n}), _descriptor11$1 = _applyDecoratedDescriptor(_class$2.prototype, \"_maskInteraction\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return SpriteMaskInteraction.None;\n  }\n}), _descriptor12$1 = _applyDecoratedDescriptor(_class$2.prototype, \"_dirtyFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor13$1 = _applyDecoratedDescriptor(_class$2.prototype, \"_spriteChangeFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n})), _class$2);\nvar DirtyFlag$1;\n(function (DirtyFlag) {\n  DirtyFlag[DirtyFlag[\"Position\"] = 1] = \"Position\";\n  DirtyFlag[DirtyFlag[\"UV\"] = 2] = \"UV\";\n  DirtyFlag[DirtyFlag[\"All\"] = 3] = \"All\";\n})(DirtyFlag$1 || (DirtyFlag$1 = {}));\n\n/**\n * @internal\n * Font Atlas.\n */\nvar FontAtlas = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(FontAtlas, _RefObject);\n  /**\n   * Constructor a FontAtlas.\n   * @param engine - Engine to which the FontAtlas belongs\n   */\n  function FontAtlas(engine) {\n    var _this;\n    _this = _RefObject.call(this, engine) || this;\n    _this._charInfoMap = {};\n    _this._texture = void 0;\n    _this._space = 1;\n    _this._curX = 1;\n    _this._curY = 1;\n    _this._nextY = 1;\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = FontAtlas.prototype;\n  _proto._onDestroy = function _onDestroy() {\n    this._texture.destroy();\n    this._texture = null;\n    this._charInfoMap = {};\n  };\n  _proto.uploadCharTexture = function uploadCharTexture(charInfo) {\n    var width = charInfo.w,\n      height = charInfo.h,\n      data = charInfo.data;\n    var space = this._space,\n      texture = this.texture;\n    var textureSize = texture.width;\n    var offsetWidth = width + space;\n    var offsetHeight = height + space;\n    if (1 + offsetWidth >= textureSize || 1 + offsetHeight >= textureSize) {\n      throw Error(\"The char fontSize is too large.\");\n    }\n    var endX = this._curX + offsetWidth;\n    if (endX >= textureSize) {\n      this._curX = space;\n      this._curY = this._nextY + space;\n    }\n    var endY = this._curY + offsetHeight;\n    if (endY > this._nextY) {\n      this._nextY = endY;\n    }\n    if (endY >= textureSize) {\n      return false;\n    }\n    if (width > 0 && height > 0 && data) {\n      texture.setPixelBuffer(data, 0, this._curX, this._curY, width, height);\n      texture.generateMipmaps();\n    }\n    var textureSizeReciprocal = 1.0 / textureSize;\n    var x = this._curX;\n    var y = this._curY;\n    var w = width;\n    var h = height;\n    var u0 = x * textureSizeReciprocal;\n    var u1 = (x + w) * textureSizeReciprocal;\n    var v0 = y * textureSizeReciprocal;\n    var v1 = (y + h) * textureSizeReciprocal;\n    charInfo.x = x;\n    charInfo.y = y;\n    var uvs = charInfo.uvs;\n    uvs[0].set(u0, v0);\n    uvs[1].set(u1, v0);\n    uvs[2].set(u1, v1);\n    uvs[3].set(u0, v1);\n    this._curX += offsetWidth + space;\n    return true;\n  };\n  _proto.addCharInfo = function addCharInfo(char, charInfo) {\n    this._charInfoMap[char.charCodeAt(0)] = charInfo;\n  };\n  _proto.getCharInfo = function getCharInfo(char) {\n    return this._charInfoMap[char.charCodeAt(0)];\n  };\n  _createClass(FontAtlas, [{\n    key: \"texture\",\n    get: function get() {\n      return this._texture;\n    },\n    set: function set(value) {\n      this._texture = value;\n    }\n  }]);\n  return FontAtlas;\n}(RefObject);\n\n/**\n * Font.\n */\nvar Font = /*#__PURE__*/function (_RefObject) {\n  _inheritsLoose(Font, _RefObject);\n  /**\n   * Create a font from OS.\n   * @param engine - Engine to which the font belongs\n   * @param name - The name of font\n   * @returns The font object has been create\n   */\n  Font.createFromOS = function createFromOS(engine, name) {\n    if (name === void 0) {\n      name = \"\";\n    }\n    var fontMap = Font._fontMap;\n    var font = fontMap[name];\n    if (font) {\n      return font;\n    }\n    font = new Font(engine, name);\n    fontMap[name] = font;\n    return font;\n  };\n  function Font(engine, name) {\n    var _this;\n    if (name === void 0) {\n      name = \"\";\n    }\n    _this = _RefObject.call(this, engine) || this;\n    _this._name = \"\";\n    _this._fontAtlases = [];\n    _this._lastIndex = -1;\n    _this._name = name;\n    return _this;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = Font.prototype;\n  _proto._uploadCharTexture = function _uploadCharTexture(charInfo) {\n    var fontAtlases = this._fontAtlases;\n    var lastIndex = this._lastIndex;\n    if (lastIndex === -1) {\n      this._createFontAtlas();\n      lastIndex++;\n    }\n    var fontAtlas = fontAtlases[lastIndex];\n    if (!fontAtlas.uploadCharTexture(charInfo)) {\n      fontAtlas = this._createFontAtlas();\n      fontAtlas.uploadCharTexture(charInfo);\n      lastIndex++;\n    }\n    this._lastIndex = lastIndex;\n    charInfo.data = null;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._addCharInfo = function _addCharInfo(char, charInfo) {\n    var lastIndex = this._lastIndex;\n    charInfo.index = lastIndex;\n    this._fontAtlases[lastIndex].addCharInfo(char, charInfo);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getCharInfo = function _getCharInfo(char) {\n    var fontAtlases = this._fontAtlases;\n    for (var i = 0, n = fontAtlases.length; i < n; ++i) {\n      var fontAtlas = fontAtlases[i];\n      var charInfo = fontAtlas.getCharInfo(char);\n      if (charInfo) {\n        return charInfo;\n      }\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getTextureByIndex = function _getTextureByIndex(index) {\n    var fontAtlas = this._fontAtlases[index];\n    if (fontAtlas) {\n      return fontAtlas.texture;\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getLastIndex = function _getLastIndex() {\n    return this._lastIndex;\n  }\n\n  /**\n   * @override\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    var fontAtlases = this._fontAtlases;\n    for (var i = 0, n = fontAtlases.length; i < n; ++i) {\n      fontAtlases[i].destroy(true);\n    }\n    fontAtlases.length = 0;\n    delete Font._fontMap[this._name];\n  };\n  _proto._createFontAtlas = function _createFontAtlas() {\n    var engine = this.engine;\n    var fontAtlas = new FontAtlas(engine);\n    var texture = new Texture2D(engine, 256, 256);\n    fontAtlas.texture = texture;\n    this._fontAtlases.push(fontAtlas);\n    return fontAtlas;\n  };\n  _createClass(Font, [{\n    key: \"name\",\n    get:\n    /**\n     * The name of the font object.\n     */\n    function get() {\n      return this._name;\n    }\n  }]);\n  return Font;\n}(RefObject);\nFont._fontMap = {};\n\n/**\n * @internal\n */\nvar CharRenderData = /** x:Top y:Left z:Bottom w:Right */\n\nfunction CharRenderData() {\n  this.texture = void 0;\n  this.localPositions = new Vector4();\n  this.renderData = void 0;\n  var positions = [new Vector3(), new Vector3(), new Vector3(), new Vector3()];\n  this.renderData = new RenderData2D(4, positions, null, CharRenderData.triangles, null);\n};\nCharRenderData.triangles = [0, 2, 1, 2, 0, 3];\n\n/**\n * @internal\n */\nvar CharRenderDataPool = /*#__PURE__*/function () {\n  function CharRenderDataPool(type, length) {\n    this._elements = [];\n    this._type = void 0;\n    this._type = type;\n    var elements = this._elements;\n    for (var i = 0; i < length; ++i) {\n      elements[i] = new type();\n    }\n  }\n  var _proto = CharRenderDataPool.prototype;\n  _proto.get = function get() {\n    if (this._elements.length > 0) {\n      return this._elements.pop();\n    }\n    return new this._type();\n  };\n  _proto.put = function put(data) {\n    this._elements.push(data);\n  };\n  return CharRenderDataPool;\n}();\n\n/**\n * @internal\n * TextUtils includes some helper function for text.\n */\nvar TextUtils = /*#__PURE__*/function () {\n  function TextUtils() {}\n  /** @internal */\n  /** These characters are all tall to help calculate the height required for text. */\n  /**\n   * The instance function to get an object includes 2d context and canvas.\n   * @returns the TextContext object\n   */\n  TextUtils.textContext = function textContext() {\n    var textContext = TextUtils._textContext;\n    if (!textContext) {\n      var canvas;\n      try {\n        canvas = new OffscreenCanvas(0, 0);\n      } catch (_unused) {\n        canvas = document.createElement(\"canvas\");\n      }\n      var context = canvas.getContext(\"2d\");\n      textContext = {\n        canvas: canvas,\n        context: context\n      };\n      TextUtils._textContext = textContext;\n    }\n    return textContext;\n  }\n\n  /**\n   * Measure the font.\n   * @param fontString - the string of the font\n   * @returns the font size info\n   */;\n  TextUtils.measureFont = function measureFont(fontString) {\n    var fontSizeInfoCache = TextUtils._fontSizeInfoCache;\n    var info = fontSizeInfoCache[fontString];\n    if (info) {\n      return info;\n    }\n    info = TextUtils._measureFontOrChar(fontString);\n    fontSizeInfoCache[fontString] = info;\n    return info;\n  }\n\n  /**\n   * Get native font string.\n   * @param fontName - The font name\n   * @param fontSize - The font size\n   * @param style - The font style\n   * @returns The native font string\n   */;\n  TextUtils.getNativeFontString = function getNativeFontString(fontName, fontSize, style) {\n    var str = style & FontStyle.Bold ? \"bold \" : \"\";\n    style & FontStyle.Italic && (str += \"italic \");\n    // Check if font already contains strings\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontName) && TextUtils._genericFontFamilies.indexOf(fontName) == -1) {\n      fontName = \"\\\"\" + fontName + \"\\\"\";\n    }\n    str += fontSize + \"px \" + fontName;\n    return str;\n  };\n  TextUtils.measureChar = function measureChar(char, fontString) {\n    return TextUtils._measureFontOrChar(fontString, char);\n  };\n  TextUtils.measureTextWithWrap = function measureTextWithWrap(renderer) {\n    var fontSize = renderer.fontSize,\n      fontStyle = renderer.fontStyle;\n    var name = renderer.font.name;\n    var fontString = TextUtils.getNativeFontString(name, fontSize, fontStyle);\n    var charFont = renderer._styleFont;\n    var fontSizeInfo = TextUtils.measureFont(fontString);\n    var subTexts = renderer.text.split(/(?:\\r\\n|\\r|\\n)/);\n    var lines = new Array();\n    var lineWidths = new Array();\n    var lineMaxSizes = new Array();\n    var _pixelsPerUnit = Engine._pixelsPerUnit;\n    var lineHeight = fontSizeInfo.size + renderer.lineSpacing * _pixelsPerUnit;\n    var wrapWidth = renderer.width * _pixelsPerUnit;\n    var width = 0;\n    for (var i = 0, n = subTexts.length; i < n; ++i) {\n      var subText = subTexts[i];\n      var chars = \"\";\n      var charsWidth = 0;\n      var maxAscent = -1;\n      var maxDescent = -1;\n      for (var j = 0, m = subText.length; j < m; ++j) {\n        var char = subText[j];\n        var charInfo = TextUtils._getCharInfo(char, fontString, charFont);\n        var w = charInfo.w,\n          offsetY = charInfo.offsetY;\n        var halfH = charInfo.h * 0.5;\n        var ascent = halfH + offsetY;\n        var descent = halfH - offsetY;\n        if (charsWidth + w > wrapWidth) {\n          if (charsWidth === 0) {\n            lines.push(char);\n            lineWidths.push(w);\n            lineMaxSizes.push({\n              ascent: ascent,\n              descent: descent,\n              size: ascent + descent\n            });\n          } else {\n            lines.push(chars);\n            lineWidths.push(charsWidth);\n            lineMaxSizes.push({\n              ascent: maxAscent,\n              descent: maxDescent,\n              size: maxAscent + maxDescent\n            });\n            chars = char;\n            charsWidth = charInfo.xAdvance;\n            maxAscent = ascent;\n            maxDescent = descent;\n          }\n        } else {\n          chars += char;\n          charsWidth += charInfo.xAdvance;\n          maxAscent < ascent && (maxAscent = ascent);\n          maxDescent < descent && (maxDescent = descent);\n        }\n      }\n      if (charsWidth > 0) {\n        lines.push(chars);\n        lineWidths.push(charsWidth);\n        lineMaxSizes.push({\n          ascent: maxAscent,\n          descent: maxDescent,\n          size: maxAscent + maxDescent\n        });\n      }\n    }\n    var height = renderer.height * _pixelsPerUnit;\n    if (renderer.overflowMode === OverflowMode.Overflow) {\n      height = lineHeight * lines.length;\n    }\n    return {\n      width: width,\n      height: height,\n      lines: lines,\n      lineWidths: lineWidths,\n      lineHeight: lineHeight,\n      lineMaxSizes: lineMaxSizes\n    };\n  };\n  TextUtils.measureTextWithoutWrap = function measureTextWithoutWrap(renderer) {\n    var fontSize = renderer.fontSize,\n      fontStyle = renderer.fontStyle;\n    var name = renderer.font.name;\n    var fontString = TextUtils.getNativeFontString(name, fontSize, fontStyle);\n    var charFont = renderer._styleFont;\n    var fontSizeInfo = TextUtils.measureFont(fontString);\n    var lines = renderer.text.split(/(?:\\r\\n|\\r|\\n)/);\n    var lineCount = lines.length;\n    var lineWidths = new Array();\n    var lineMaxSizes = new Array();\n    var _pixelsPerUnit = Engine._pixelsPerUnit;\n    var lineHeight = fontSizeInfo.size + renderer.lineSpacing * _pixelsPerUnit;\n    var width = 0;\n    var height = renderer.height * _pixelsPerUnit;\n    if (renderer.overflowMode === OverflowMode.Overflow) {\n      height = lineHeight * lineCount;\n    }\n    for (var i = 0; i < lineCount; ++i) {\n      var line = lines[i];\n      var curWidth = 0;\n      var maxAscent = -1;\n      var maxDescent = -1;\n      for (var j = 0, m = line.length; j < m; ++j) {\n        var charInfo = TextUtils._getCharInfo(line[j], fontString, charFont);\n        curWidth += charInfo.xAdvance;\n        var offsetY = charInfo.offsetY;\n        var halfH = charInfo.h * 0.5;\n        var ascent = halfH + offsetY;\n        var descent = halfH - offsetY;\n        maxAscent < ascent && (maxAscent = ascent);\n        maxDescent < descent && (maxDescent = descent);\n      }\n      lineWidths[i] = curWidth;\n      lineMaxSizes[i] = {\n        ascent: maxAscent,\n        descent: maxDescent,\n        size: maxAscent + maxDescent\n      };\n      if (curWidth > width) {\n        width = curWidth;\n      }\n    }\n    return {\n      width: width,\n      height: height,\n      lines: lines,\n      lineWidths: lineWidths,\n      lineHeight: lineHeight,\n      lineMaxSizes: lineMaxSizes\n    };\n  }\n\n  /**\n   * Get native font hash.\n   * @param fontName - The font name\n   * @param fontSize - The font size\n   * @param style - The font style\n   * @returns The native font hash\n   */;\n  TextUtils.getNativeFontHash = function getNativeFontHash(fontName, fontSize, style) {\n    var str = style & FontStyle.Bold ? \"bold\" : \"\";\n    style & FontStyle.Italic && (str += \"italic\");\n    // Check if font already contains strings\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontName) && TextUtils._genericFontFamilies.indexOf(fontName) == -1) {\n      fontName = \"\" + fontName;\n    }\n    str += fontSize + \"px\" + fontName;\n    return str;\n  };\n  TextUtils._measureFontOrChar = function _measureFontOrChar(fontString, char) {\n    if (char === void 0) {\n      char = \"\";\n    }\n    var _TextUtils$textContex = TextUtils.textContext(),\n      canvas = _TextUtils$textContex.canvas,\n      context = _TextUtils$textContex.context;\n    context.font = fontString;\n    var measureString = char || TextUtils._measureString;\n    // Safari gets data confusion through getImageData when the canvas width is not an integer.\n    // @todo: Text layout may vary from standard.\n    var width = Math.round(context.measureText(measureString).width);\n    var baseline = Math.ceil(context.measureText(TextUtils._measureBaseline).width);\n    var height = baseline * TextUtils._heightMultiplier;\n    baseline = TextUtils._baselineMultiplier * baseline | 0;\n    canvas.width = width;\n    canvas.height = height;\n    context.font = fontString;\n    context.fillStyle = \"#000\";\n    context.clearRect(0, 0, width, height);\n    context.textBaseline = \"middle\";\n    context.fillStyle = \"#fff\";\n    context.fillText(measureString, 0, baseline);\n    var colorData = context.getImageData(0, 0, width, height).data;\n    var len = colorData.length;\n    var top = -1;\n    var bottom = -1;\n    var y;\n    var ascent = 0;\n    var descent = 0;\n    var size = 0;\n    var integerW = canvas.width;\n    var integerWReciprocal = 1.0 / integerW;\n    for (var i = 0; i < len; i += 4) {\n      if (colorData[i + 3] !== 0) {\n        var idx = i * 0.25;\n        y = ~~(idx * integerWReciprocal);\n        if (top === -1) {\n          top = y;\n        }\n        if (y > bottom) {\n          bottom = y;\n        }\n      }\n    }\n    if (top !== -1 && bottom !== -1) {\n      ascent = baseline - top;\n      descent = bottom - baseline + 1;\n      size = ascent + descent;\n    }\n    var sizeInfo = {\n      ascent: ascent,\n      descent: descent,\n      size: size\n    };\n    if (char) {\n      var data = null;\n      if (size > 0) {\n        var lineIntegerW = integerW * 4;\n        // gl.texSubImage2D uploading data of type Uint8ClampedArray is not supported in some devices(eg: IphoneX IOS 13.6.1).\n        data = new Uint8Array(colorData.buffer, top * lineIntegerW, size * lineIntegerW);\n      }\n      return {\n        x: 0,\n        y: 0,\n        w: width,\n        h: size,\n        offsetX: 0,\n        offsetY: (ascent - descent) * 0.5,\n        xAdvance: width,\n        uvs: [new Vector2(), new Vector2(), new Vector2(), new Vector2()],\n        ascent: ascent,\n        descent: descent,\n        index: 0,\n        data: data\n      };\n    } else {\n      return sizeInfo;\n    }\n  };\n  TextUtils._getCharInfo = function _getCharInfo(char, fontString, font) {\n    var charInfo = font._getCharInfo(char);\n    if (!charInfo) {\n      charInfo = TextUtils.measureChar(char, fontString);\n      font._uploadCharTexture(charInfo);\n      font._addCharInfo(char, charInfo);\n    }\n    return charInfo;\n  };\n  return TextUtils;\n}();\n\n/**\n * @internal\n * TextContext.\n */\nTextUtils._genericFontFamilies = [\"serif\", \"sans-serif\", \"monospace\", \"cursive\", \"fantasy\", \"system-ui\", \"math\", \"emoji\", \"fangsong\"];\nTextUtils._measureString = \"|ÉqÅ\";\nTextUtils._measureBaseline = \"M\";\nTextUtils._heightMultiplier = 2;\nTextUtils._baselineMultiplier = 1.4;\nTextUtils._fontSizeInfoCache = {};\nTextUtils._textContext = null;\n\nvar _class$1, _descriptor$1, _descriptor2$1, _descriptor3$1, _descriptor4$1, _descriptor5$1, _descriptor6$1, _descriptor7$1, _descriptor8$1, _descriptor9$1, _descriptor10, _descriptor11, _descriptor12, _descriptor13, _descriptor14, _descriptor15, _descriptor16, _descriptor17, _descriptor18, _descriptor19, _class2$1;\n\n/**\n * Renders a text for 2D graphics.\n */\nvar TextRenderer = (_class$1 = (_class2$1 = /*#__PURE__*/function (_Renderer) {\n  _inheritsLoose(TextRenderer, _Renderer);\n  function TextRenderer(entity) {\n    var _this;\n    _this = _Renderer.call(this, entity) || this;\n    _initializerDefineProperty(_this, \"_styleFont\", _descriptor$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_charRenderDatas\", _descriptor2$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_dirtyFlag\", _descriptor3$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_isWorldMatrixDirty\", _descriptor4$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_color\", _descriptor5$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_text\", _descriptor6$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_width\", _descriptor7$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_height\", _descriptor8$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_localBounds\", _descriptor9$1, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_font\", _descriptor10, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_fontSize\", _descriptor11, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_fontStyle\", _descriptor12, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_lineSpacing\", _descriptor13, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_horizontalAlignment\", _descriptor14, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_verticalAlignment\", _descriptor15, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_enableWrapping\", _descriptor16, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_overflowMode\", _descriptor17, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_maskInteraction\", _descriptor18, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_maskLayer\", _descriptor19, _assertThisInitialized(_this));\n    var _assertThisInitialize = _assertThisInitialized(_this),\n      engine = _assertThisInitialize.engine;\n    _this._isWorldMatrixDirty = entity.transform._registerWorldChangeListener();\n    _this._isWorldMatrixDirty.listener = function () {\n      _this._setDirtyFlagTrue(DirtyFlag.WorldPosition | DirtyFlag.WorldBounds);\n    };\n    _this.font = Font.createFromOS(engine);\n    _this.setMaterial(engine._spriteDefaultMaterial);\n    return _this;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = TextRenderer.prototype;\n  _proto._render = function _render(camera) {\n    if (this._text === \"\" || this.enableWrapping && this.width <= 0 || this.overflowMode === OverflowMode.Truncate && this.height <= 0) {\n      return;\n    }\n    if (this._isContainDirtyFlag(DirtyFlag.MaskInteraction)) {\n      this._updateStencilState();\n      this._setDirtyFlagFalse(DirtyFlag.MaskInteraction);\n    }\n    if (this._isContainDirtyFlag(DirtyFlag.StyleFont)) {\n      this._resetStyleFont();\n      this._setDirtyFlagFalse(DirtyFlag.StyleFont);\n    }\n    if (this._isContainDirtyFlag(DirtyFlag.LocalPositionBounds)) {\n      this._updateLocalData();\n      this._setDirtyFlagFalse(DirtyFlag.LocalPositionBounds);\n    }\n    if (this._isContainDirtyFlag(DirtyFlag.WorldPosition)) {\n      this._updatePosition();\n      this._setDirtyFlagFalse(DirtyFlag.WorldPosition);\n    }\n    var spriteElementPool = this._engine._spriteElementPool;\n    var textElement = this._engine._textElementPool.getFromPool();\n    var charElements = textElement.charElements;\n    var material = this.getMaterial();\n    var charRenderDatas = this._charRenderDatas;\n    var charCount = charRenderDatas.length;\n    textElement.component = this;\n    textElement.material = material;\n    charElements.length = charCount;\n    for (var i = 0; i < charCount; ++i) {\n      var charRenderData = charRenderDatas[i];\n      var spriteElement = spriteElementPool.getFromPool();\n      spriteElement.setValue(this, charRenderData.renderData, material, charRenderData.texture);\n      charElements[i] = spriteElement;\n    }\n    camera._renderPipeline.pushPrimitive(textElement);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._onDestroy = function _onDestroy() {\n    // Clear render data.\n    var charRenderDatas = this._charRenderDatas;\n    for (var i = 0, n = charRenderDatas.length; i < n; ++i) {\n      TextRenderer._charRenderDataPool.put(charRenderDatas[i]);\n    }\n    charRenderDatas.length = 0;\n    this._isWorldMatrixDirty.destroy();\n    _Renderer.prototype._onDestroy.call(this);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._cloneTo = function _cloneTo(target) {\n    target.font = this._font;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._isContainDirtyFlag = function _isContainDirtyFlag(type) {\n    return (this._dirtyFlag & type) != 0;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._setDirtyFlagTrue = function _setDirtyFlagTrue(type) {\n    this._dirtyFlag |= type;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._setDirtyFlagFalse = function _setDirtyFlagFalse(type) {\n    this._dirtyFlag &= ~type;\n  }\n\n  /**\n   * @override\n   */;\n  _proto._updateBounds = function _updateBounds(worldBounds) {\n    BoundingBox.transform(this._localBounds, this._entity.transform.worldMatrix, worldBounds);\n  };\n  _proto._updateStencilState = function _updateStencilState() {\n    // Update stencil.\n    var material = this.getInstanceMaterial();\n    var stencilState = material.renderState.stencilState;\n    var maskInteraction = this._maskInteraction;\n    if (maskInteraction === SpriteMaskInteraction.None) {\n      stencilState.enabled = false;\n      stencilState.writeMask = 0xff;\n      stencilState.referenceValue = 0;\n      stencilState.compareFunctionFront = stencilState.compareFunctionBack = CompareFunction.Always;\n    } else {\n      stencilState.enabled = true;\n      stencilState.writeMask = 0x00;\n      stencilState.referenceValue = 1;\n      var compare = maskInteraction === SpriteMaskInteraction.VisibleInsideMask ? CompareFunction.LessEqual : CompareFunction.Greater;\n      stencilState.compareFunctionFront = compare;\n      stencilState.compareFunctionBack = compare;\n    }\n  };\n  _proto._resetStyleFont = function _resetStyleFont() {\n    var lastStyleFont = this._styleFont;\n    if (lastStyleFont) {\n      lastStyleFont._addRefCount(-1);\n      lastStyleFont.destroy();\n    }\n    this._styleFont = Font.createFromOS(this.engine, TextUtils.getNativeFontHash(this.font.name, this.fontSize, this.fontStyle));\n    this._styleFont._addRefCount(1);\n  };\n  _proto._updatePosition = function _updatePosition() {\n    var transform = this.entity.transform;\n    var e = transform.worldMatrix.elements;\n    var charRenderDatas = this._charRenderDatas;\n\n    // prettier-ignore\n    var e0 = e[0],\n      e1 = e[1],\n      e2 = e[2];\n    // prettier-ignore\n    var e4 = e[4],\n      e5 = e[5],\n      e6 = e[6];\n    // prettier-ignore\n    var e12 = e[12],\n      e13 = e[13],\n      e14 = e[14];\n    var up = TextRenderer._tempVec31.set(e4, e5, e6);\n    var right = TextRenderer._tempVec30.set(e0, e1, e2);\n    for (var i = 0, n = charRenderDatas.length; i < n; ++i) {\n      var charRenderData = charRenderDatas[i];\n      var localPositions = charRenderData.localPositions;\n      var positions = charRenderData.renderData.positions;\n      var topLeftX = localPositions.x,\n        topLeftY = localPositions.y;\n\n      // Top-Left\n      var worldPosition0 = positions[0];\n      worldPosition0.x = topLeftX * e0 + topLeftY * e4 + e12;\n      worldPosition0.y = topLeftX * e1 + topLeftY * e5 + e13;\n      worldPosition0.z = topLeftX * e2 + topLeftY * e6 + e14;\n\n      // Right offset\n      var worldPosition1 = positions[1];\n      Vector3.scale(right, localPositions.z - topLeftX, worldPosition1);\n\n      // Top-Right\n      Vector3.add(worldPosition0, worldPosition1, worldPosition1);\n\n      // Up offset\n      var worldPosition2 = positions[2];\n      Vector3.scale(up, localPositions.w - topLeftY, worldPosition2);\n\n      // Bottom-Left\n      Vector3.add(worldPosition0, worldPosition2, positions[3]);\n      // Bottom-Right\n      Vector3.add(worldPosition1, worldPosition2, worldPosition2);\n    }\n  };\n  _proto._updateLocalData = function _updateLocalData() {\n    var color = this.color,\n      horizontalAlignment = this.horizontalAlignment,\n      verticalAlignment = this.verticalAlignment,\n      charRenderDatas = this._charRenderDatas;\n    var _this$_localBounds = this._localBounds,\n      min = _this$_localBounds.min,\n      max = _this$_localBounds.max;\n    min.set(0, 0, 0);\n    max.set(0, 0, 0);\n    var _pixelsPerUnit = Engine._pixelsPerUnit;\n    var pixelsPerUnitReciprocal = 1.0 / _pixelsPerUnit;\n    var charFont = this._styleFont;\n    var rendererWidth = this.width * _pixelsPerUnit;\n    var halfRendererWidth = rendererWidth * 0.5;\n    var rendererHeight = this.height * _pixelsPerUnit;\n    var textMetrics = this.enableWrapping ? TextUtils.measureTextWithWrap(this) : TextUtils.measureTextWithoutWrap(this);\n    var height = textMetrics.height,\n      lines = textMetrics.lines,\n      lineWidths = textMetrics.lineWidths,\n      lineHeight = textMetrics.lineHeight,\n      lineMaxSizes = textMetrics.lineMaxSizes;\n    var charRenderDataPool = TextRenderer._charRenderDataPool;\n    var halfLineHeight = lineHeight * 0.5;\n    var linesLen = lines.length;\n    var startY = 0;\n    var topDiff = lineHeight * 0.5 - lineMaxSizes[0].ascent;\n    var bottomDiff = lineHeight * 0.5 - lineMaxSizes[linesLen - 1].descent - 1;\n    switch (verticalAlignment) {\n      case TextVerticalAlignment.Top:\n        startY = rendererHeight * 0.5 - halfLineHeight + topDiff;\n        break;\n      case TextVerticalAlignment.Center:\n        startY = height * 0.5 - halfLineHeight - (bottomDiff - topDiff) * 0.5;\n        break;\n      case TextVerticalAlignment.Bottom:\n        startY = height - rendererHeight * 0.5 - halfLineHeight - bottomDiff;\n        break;\n    }\n    var renderDataCount = 0;\n    var minX = Number.MAX_SAFE_INTEGER;\n    var minY = Number.MAX_SAFE_INTEGER;\n    var maxX = Number.MIN_SAFE_INTEGER;\n    var maxY = Number.MIN_SAFE_INTEGER;\n    var lastLineIndex = linesLen - 1;\n    for (var i = 0; i < linesLen; ++i) {\n      var line = lines[i];\n      var lineWidth = lineWidths[i];\n      var startX = 0;\n      switch (horizontalAlignment) {\n        case TextHorizontalAlignment.Left:\n          startX = -halfRendererWidth;\n          break;\n        case TextHorizontalAlignment.Center:\n          startX = -lineWidth * 0.5;\n          break;\n        case TextHorizontalAlignment.Right:\n          startX = halfRendererWidth - lineWidth;\n          break;\n      }\n      for (var j = 0, m = line.length - 1; j <= m; ++j) {\n        var char = line[j];\n        var charInfo = charFont._getCharInfo(char);\n        if (charInfo.h > 0) {\n          var charRenderData = charRenderDatas[renderDataCount] || charRenderDataPool.get();\n          var renderData = charRenderData.renderData,\n            localPositions = charRenderData.localPositions;\n          charRenderData.texture = charFont._getTextureByIndex(charInfo.index);\n          renderData.color = color;\n          renderData.uvs = charInfo.uvs;\n          var w = charInfo.w,\n            ascent = charInfo.ascent,\n            descent = charInfo.descent;\n          var left = startX * pixelsPerUnitReciprocal;\n          var right = (startX + w) * pixelsPerUnitReciprocal;\n          var top = (startY + ascent) * pixelsPerUnitReciprocal;\n          var bottom = (startY - descent + 1) * pixelsPerUnitReciprocal;\n          localPositions.set(left, top, right, bottom);\n          charRenderDatas[renderDataCount] = charRenderData;\n          renderDataCount++;\n          i === 0 && (maxY = Math.max(maxY, top));\n          i === lastLineIndex && (minY = Math.min(minY, bottom));\n          j === 0 && (minX = Math.min(minX, left));\n          j === m && (maxX = Math.max(maxX, right));\n        }\n        startX += charInfo.xAdvance;\n      }\n      startY -= lineHeight;\n    }\n    min.set(minX, minY, 0);\n    max.set(maxX, maxY, 0);\n\n    // Revert excess render data to pool.\n    var lastRenderDataCount = charRenderDatas.length;\n    if (lastRenderDataCount > renderDataCount) {\n      for (var _i = renderDataCount; _i < lastRenderDataCount; ++_i) {\n        charRenderDataPool.put(charRenderDatas[_i]);\n      }\n      charRenderDatas.length = renderDataCount;\n    }\n    charFont._getLastIndex() > 0 && charRenderDatas.sort(function (a, b) {\n      return a.texture.instanceId - b.texture.instanceId;\n    });\n  };\n  _createClass(TextRenderer, [{\n    key: \"color\",\n    get: /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * Rendering color for the Text.\n     */\n    function get() {\n      return this._color;\n    },\n    set: function set(value) {\n      if (this._color !== value) {\n        this._color.copyFrom(value);\n      }\n    }\n\n    /**\n     * Rendering string for the Text.\n     */\n  }, {\n    key: \"text\",\n    get: function get() {\n      return this._text;\n    },\n    set: function set(value) {\n      value = value || \"\";\n      if (this._text !== value) {\n        this._text = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * The width of the TextRenderer (in 3D world coordinates).\n     */\n  }, {\n    key: \"width\",\n    get: function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._width = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * The height of the TextRenderer (in 3D world coordinates).\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._height = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * The font of the Text.\n     */\n  }, {\n    key: \"font\",\n    get: function get() {\n      return this._font;\n    },\n    set: function set(value) {\n      if (this._font !== value) {\n        this._font = value;\n        this._setDirtyFlagTrue(DirtyFlag.Font);\n      }\n    }\n\n    /**\n     * The font size of the Text.\n     */\n  }, {\n    key: \"fontSize\",\n    get: function get() {\n      return this._fontSize;\n    },\n    set: function set(value) {\n      if (this._fontSize !== value) {\n        this._fontSize = value;\n        this._setDirtyFlagTrue(DirtyFlag.Font);\n      }\n    }\n\n    /**\n     * The style of the font.\n     */\n  }, {\n    key: \"fontStyle\",\n    get: function get() {\n      return this._fontStyle;\n    },\n    set: function set(value) {\n      if (this.fontStyle !== value) {\n        this._fontStyle = value;\n        this._setDirtyFlagTrue(DirtyFlag.Font);\n      }\n    }\n\n    /**\n     * The space between two lines (in pixels).\n     */\n  }, {\n    key: \"lineSpacing\",\n    get: function get() {\n      return this._lineSpacing;\n    },\n    set: function set(value) {\n      if (this._lineSpacing !== value) {\n        this._lineSpacing = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * The horizontal alignment.\n     */\n  }, {\n    key: \"horizontalAlignment\",\n    get: function get() {\n      return this._horizontalAlignment;\n    },\n    set: function set(value) {\n      if (this._horizontalAlignment !== value) {\n        this._horizontalAlignment = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * The vertical alignment.\n     */\n  }, {\n    key: \"verticalAlignment\",\n    get: function get() {\n      return this._verticalAlignment;\n    },\n    set: function set(value) {\n      if (this._verticalAlignment !== value) {\n        this._verticalAlignment = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * Whether wrap text to next line when exceeds the width of the container.\n     */\n  }, {\n    key: \"enableWrapping\",\n    get: function get() {\n      return this._enableWrapping;\n    },\n    set: function set(value) {\n      if (this._enableWrapping !== value) {\n        this._enableWrapping = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * The overflow mode.\n     */\n  }, {\n    key: \"overflowMode\",\n    get: function get() {\n      return this._overflowMode;\n    },\n    set: function set(value) {\n      if (this._overflowMode !== value) {\n        this._overflowMode = value;\n        this._setDirtyFlagTrue(DirtyFlag.Position);\n      }\n    }\n\n    /**\n     * Interacts with the masks.\n     */\n  }, {\n    key: \"maskInteraction\",\n    get: function get() {\n      return this._maskInteraction;\n    },\n    set: function set(value) {\n      if (this._maskInteraction !== value) {\n        this._maskInteraction = value;\n        this._setDirtyFlagTrue(DirtyFlag.MaskInteraction);\n      }\n    }\n\n    /**\n     * The mask layer the sprite renderer belongs to.\n     */\n  }, {\n    key: \"maskLayer\",\n    get: function get() {\n      return this._maskLayer;\n    },\n    set: function set(value) {\n      this._maskLayer = value;\n    }\n\n    /**\n     * The bounding volume of the TextRenderer.\n     */\n  }, {\n    key: \"bounds\",\n    get: function get() {\n      this._isContainDirtyFlag(DirtyFlag.StyleFont) && this._resetStyleFont();\n      this._isContainDirtyFlag(DirtyFlag.LocalPositionBounds) && this._updateLocalData();\n      this._isContainDirtyFlag(DirtyFlag.WorldPosition) && this._updatePosition();\n      this._isContainDirtyFlag(DirtyFlag.WorldBounds) && this._updateBounds(this._bounds);\n      this._setDirtyFlagFalse(DirtyFlag.Font);\n      return this._bounds;\n    }\n  }]);\n  return TextRenderer;\n}(Renderer), _class2$1._charRenderDataPool = new CharRenderDataPool(CharRenderData, 50), _class2$1._tempVec30 = new Vector3(), _class2$1._tempVec31 = new Vector3(), _class2$1), (_descriptor$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_styleFont\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor2$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_charRenderDatas\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor3$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_dirtyFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return DirtyFlag.Font;\n  }\n}), _descriptor4$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_isWorldMatrixDirty\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_color\", [deepClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new Color(1, 1, 1, 1);\n  }\n}), _descriptor6$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_text\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return \"\";\n  }\n}), _descriptor7$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_width\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor8$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_height\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor9$1 = _applyDecoratedDescriptor(_class$1.prototype, \"_localBounds\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new BoundingBox();\n  }\n}), _descriptor10 = _applyDecoratedDescriptor(_class$1.prototype, \"_font\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return null;\n  }\n}), _descriptor11 = _applyDecoratedDescriptor(_class$1.prototype, \"_fontSize\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 24;\n  }\n}), _descriptor12 = _applyDecoratedDescriptor(_class$1.prototype, \"_fontStyle\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return FontStyle.None;\n  }\n}), _descriptor13 = _applyDecoratedDescriptor(_class$1.prototype, \"_lineSpacing\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 0;\n  }\n}), _descriptor14 = _applyDecoratedDescriptor(_class$1.prototype, \"_horizontalAlignment\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return TextHorizontalAlignment.Center;\n  }\n}), _descriptor15 = _applyDecoratedDescriptor(_class$1.prototype, \"_verticalAlignment\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return TextVerticalAlignment.Center;\n  }\n}), _descriptor16 = _applyDecoratedDescriptor(_class$1.prototype, \"_enableWrapping\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _descriptor17 = _applyDecoratedDescriptor(_class$1.prototype, \"_overflowMode\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return OverflowMode.Overflow;\n  }\n}), _descriptor18 = _applyDecoratedDescriptor(_class$1.prototype, \"_maskInteraction\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return SpriteMaskInteraction.None;\n  }\n}), _descriptor19 = _applyDecoratedDescriptor(_class$1.prototype, \"_maskLayer\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return SpriteMaskLayer.Layer0;\n  }\n})), _class$1);\nvar DirtyFlag;\n(function (DirtyFlag) {\n  DirtyFlag[DirtyFlag[\"StyleFont\"] = 1] = \"StyleFont\";\n  DirtyFlag[DirtyFlag[\"LocalPositionBounds\"] = 2] = \"LocalPositionBounds\";\n  DirtyFlag[DirtyFlag[\"WorldPosition\"] = 4] = \"WorldPosition\";\n  DirtyFlag[DirtyFlag[\"WorldBounds\"] = 8] = \"WorldBounds\";\n  DirtyFlag[DirtyFlag[\"MaskInteraction\"] = 16] = \"MaskInteraction\";\n  DirtyFlag[DirtyFlag[\"Position\"] = 14] = \"Position\";\n  DirtyFlag[DirtyFlag[\"Font\"] = 15] = \"Font\";\n})(DirtyFlag || (DirtyFlag = {}));\n\n/**\n * Associate AnimationCurve and the Entity\n */\nvar AnimationClipCurveBinding = function AnimationClipCurveBinding() {\n  this.relativePath = void 0;\n  this.type = void 0;\n  this.property = void 0;\n  this.curve = void 0;\n};\n\n/**\n * AnimationEvent lets you call a script function similar to SendMessage as part of playing back an animation.\n */\nvar AnimationEvent = function AnimationEvent() {\n  this.time = void 0;\n  this.functionName = void 0;\n  this.parameter = void 0;\n};\n\nvar AnimationProperty;\n(function (AnimationProperty) {\n  AnimationProperty[AnimationProperty[\"Position\"] = 0] = \"Position\";\n  AnimationProperty[AnimationProperty[\"Rotation\"] = 1] = \"Rotation\";\n  AnimationProperty[AnimationProperty[\"Scale\"] = 2] = \"Scale\";\n  AnimationProperty[AnimationProperty[\"BlendShapeWeights\"] = 3] = \"BlendShapeWeights\";\n})(AnimationProperty || (AnimationProperty = {}));\n\n/**\n * Base class for AnimationClips and BlendTrees.\n */\nvar Motion = function Motion() {};\n\n/**\n * Stores keyframe based animations.\n */\nvar AnimationClip = /*#__PURE__*/function (_Motion) {\n  _inheritsLoose(AnimationClip, _Motion);\n  /**\n   * @param name - The AnimationClip's name\n   */\n  function AnimationClip(name) {\n    var _this;\n    _this = _Motion.call(this) || this;\n    _this.name = name;\n    _this._curveBindings = [];\n    _this._length = 0;\n    _this._events = [];\n    return _this;\n  }\n\n  /**\n   * Adds an animation event to the clip.\n   * @param functionName - The name of the method called in the script\n   * @param time - The time when the event be triggered\n   * @param parameter - The parameter that is stored in the event and will be sent to the function\n   */\n  var _proto = AnimationClip.prototype;\n  _proto.addEvent = function addEvent(param, time, parameter) {\n    if (typeof param === \"string\") {\n      var _event = new AnimationEvent();\n      _event.functionName = param;\n      _event.time = time;\n      _event.parameter = parameter;\n      this._events.push(_event);\n    } else {\n      this._events.push(param);\n    }\n    this._events.sort(function (a, b) {\n      return a.time - b.time;\n    });\n  }\n\n  /**\n   * Clears all events from the clip.\n   */;\n  _proto.clearEvents = function clearEvents() {\n    this._events.length = 0;\n  }\n\n  /**\n   * Add curve binding for the clip.\n   * @param relativePath - Path to the game object this curve applies to. The relativePath is formatted similar to a pathname, e.g. \"/root/spine/leftArm\"\n   * @param type- The class type of the component that is animated\n   * @param propertyName - The name to the property being animated\n   * @param curve - The animation curve\n   */;\n  _proto.addCurveBinding = function addCurveBinding(relativePath, type, propertyName, curve) {\n    var property;\n    switch (propertyName) {\n      case \"position\":\n        property = AnimationProperty.Position;\n        break;\n      case \"rotation\":\n        property = AnimationProperty.Rotation;\n        break;\n      case \"scale\":\n        property = AnimationProperty.Scale;\n        break;\n      case \"blendShapeWeights\":\n        property = AnimationProperty.BlendShapeWeights;\n        break;\n    }\n    var curveBinding = new AnimationClipCurveBinding();\n    curveBinding.relativePath = relativePath;\n    curveBinding.type = type;\n    curveBinding.property = property;\n    curveBinding.curve = curve;\n    if (curve.length > this._length) {\n      this._length = curve.length;\n    }\n    this._curveBindings.push(curveBinding);\n  }\n\n  /**\n   * Clears all curve bindings from the clip.\n   */;\n  _proto.clearCurveBindings = function clearCurveBindings() {\n    this._curveBindings.length = 0;\n    this._length = 0;\n  }\n\n  /**\n   * @internal\n   * Samples an animation at a given time.\n   * @param entity - The animated entity\n   * @param time - The time to sample an animation\n   */;\n  _proto._sampleAnimation = function _sampleAnimation(entity, time) {\n    var length = this._curveBindings.length;\n    for (var i = length - 1; i >= 0; i--) {\n      var curveData = this._curveBindings[i];\n      var curve = curveData.curve,\n        property = curveData.property,\n        relativePath = curveData.relativePath,\n        type = curveData.type;\n      var val = curve.evaluate(time);\n      var target = entity.findByName(relativePath);\n      var transform = target.transform;\n      if (type === Transform) {\n        switch (property) {\n          case AnimationProperty.Position:\n            transform.position = val;\n            break;\n          case AnimationProperty.Rotation:\n            transform.rotationQuaternion = val;\n            break;\n          case AnimationProperty.Scale:\n            transform.scale = val;\n            break;\n        }\n      }\n    }\n  };\n  _createClass(AnimationClip, [{\n    key: \"events\",\n    get: /** @internal */\n\n    /**\n     * Animation events for this animation clip.\n     */\n    function get() {\n      return this._events;\n    }\n\n    /**\n     * Animation curve bindings for this animation clip.\n     */\n  }, {\n    key: \"curveBindings\",\n    get: function get() {\n      return this._curveBindings;\n    }\n\n    /**\n     * Animation length in seconds.\n     */\n  }, {\n    key: \"length\",\n    get: function get() {\n      return this._length;\n    }\n  }]);\n  return AnimationClip;\n}(Motion);\n\nvar InterpolableValueType;\n(function (InterpolableValueType) {\n  InterpolableValueType[InterpolableValueType[\"Float\"] = 0] = \"Float\";\n  InterpolableValueType[InterpolableValueType[\"FloatArray\"] = 1] = \"FloatArray\";\n  InterpolableValueType[InterpolableValueType[\"Vector2\"] = 2] = \"Vector2\";\n  InterpolableValueType[InterpolableValueType[\"Vector3\"] = 3] = \"Vector3\";\n  InterpolableValueType[InterpolableValueType[\"Vector4\"] = 4] = \"Vector4\";\n  InterpolableValueType[InterpolableValueType[\"Quaternion\"] = 5] = \"Quaternion\";\n})(InterpolableValueType || (InterpolableValueType = {}));\n\n/**\n * @internal\n */\nvar AnimatorUtils = /*#__PURE__*/function () {\n  function AnimatorUtils() {}\n  AnimatorUtils.scaleWeight = function scaleWeight(s, w, out) {\n    var sX = s.x;\n    var sY = s.y;\n    var sZ = s.z;\n    out.x = sX > 0 ? Math.pow(Math.abs(sX), w) : -Math.pow(Math.abs(sX), w);\n    out.y = sY > 0 ? Math.pow(Math.abs(sY), w) : -Math.pow(Math.abs(sY), w);\n    out.z = sZ > 0 ? Math.pow(Math.abs(sZ), w) : -Math.pow(Math.abs(sZ), w);\n  };\n  AnimatorUtils.scaleBlend = function scaleBlend(sa, sb, w, out) {\n    var saw = AnimatorUtils._tempVector30;\n    var sbw = AnimatorUtils._tempVector31;\n    AnimatorUtils.scaleWeight(sa, 1.0 - w, saw);\n    AnimatorUtils.scaleWeight(sb, w, sbw);\n    var sng = w > 0.5 ? sb : sa;\n    out.x = sng.x > 0 ? Math.abs(saw.x * sbw.x) : -Math.abs(saw.x * sbw.x);\n    out.y = sng.y > 0 ? Math.abs(saw.y * sbw.y) : -Math.abs(saw.y * sbw.y);\n    out.z = sng.z > 0 ? Math.abs(saw.z * sbw.z) : -Math.abs(saw.z * sbw.z);\n  };\n  AnimatorUtils.quaternionWeight = function quaternionWeight(s, w, out) {\n    out.x = s.x * w;\n    out.y = s.y * w;\n    out.z = s.z * w;\n    out.w = s.w;\n  };\n  return AnimatorUtils;\n}();\nAnimatorUtils._tempVector30 = new Vector3();\nAnimatorUtils._tempVector31 = new Vector3();\n\nvar AnimatorLayerBlendingMode;\n(function (AnimatorLayerBlendingMode) {\n  AnimatorLayerBlendingMode[AnimatorLayerBlendingMode[\"Override\"] = 0] = \"Override\";\n  AnimatorLayerBlendingMode[AnimatorLayerBlendingMode[\"Additive\"] = 1] = \"Additive\";\n})(AnimatorLayerBlendingMode || (AnimatorLayerBlendingMode = {}));\n\n/**\n * @internal\n */\nvar AnimatorStatePlayState;\n(function (AnimatorStatePlayState) {\n  AnimatorStatePlayState[AnimatorStatePlayState[\"UnStarted\"] = 0] = \"UnStarted\";\n  AnimatorStatePlayState[AnimatorStatePlayState[\"Playing\"] = 1] = \"Playing\";\n  AnimatorStatePlayState[AnimatorStatePlayState[\"Finished\"] = 2] = \"Finished\";\n})(AnimatorStatePlayState || (AnimatorStatePlayState = {}));\n\n/**\n * Layer state.\n */\nvar LayerState;\n(function (LayerState) {\n  LayerState[LayerState[\"Standby\"] = 0] = \"Standby\";\n  LayerState[LayerState[\"Playing\"] = 1] = \"Playing\";\n  LayerState[LayerState[\"CrossFading\"] = 2] = \"CrossFading\";\n  LayerState[LayerState[\"FixedCrossFading\"] = 3] = \"FixedCrossFading\";\n})(LayerState || (LayerState = {}));\n\n/**\n * @internal\n */\nvar AnimationCurveOwner = /*#__PURE__*/function () {\n  /** @internal */\n\n  function AnimationCurveOwner(target, type, property) {\n    this.crossCurveMark = 0;\n    this.crossCurveIndex = void 0;\n    this.target = void 0;\n    this.type = void 0;\n    this.property = void 0;\n    this.component = void 0;\n    this.defaultValue = void 0;\n    this.fixedPoseValue = void 0;\n    this._hasSavedDefaultValue = false;\n    this.target = target;\n    this.type = type;\n    this.property = property;\n    switch (property) {\n      case AnimationProperty.Position:\n        this.defaultValue = new Vector3();\n        this.fixedPoseValue = new Vector3();\n        this.component = target.transform;\n        break;\n      case AnimationProperty.Rotation:\n        this.defaultValue = new Quaternion();\n        this.fixedPoseValue = new Quaternion();\n        this.component = target.transform;\n        break;\n      case AnimationProperty.Scale:\n        this.defaultValue = new Vector3();\n        this.fixedPoseValue = new Vector3();\n        this.component = target.transform;\n        break;\n      case AnimationProperty.BlendShapeWeights:\n        this.component = target.getComponent(SkinnedMeshRenderer);\n        var weightLength = this.component.blendShapeWeights.length;\n        this.defaultValue = new Float32Array(weightLength);\n        this.fixedPoseValue = new Float32Array(weightLength);\n        break;\n    }\n  }\n  var _proto = AnimationCurveOwner.prototype;\n  _proto.saveDefaultValue = function saveDefaultValue() {\n    switch (this.property) {\n      case AnimationProperty.Position:\n        this.defaultValue.copyFrom(this.target.transform.position);\n        break;\n      case AnimationProperty.Rotation:\n        this.defaultValue.copyFrom(this.target.transform.rotationQuaternion);\n        break;\n      case AnimationProperty.Scale:\n        this.defaultValue.copyFrom(this.target.transform.scale);\n        break;\n      case AnimationProperty.BlendShapeWeights:\n        var _ref = this.component,\n          blendShapeWeights = _ref.blendShapeWeights;\n        for (var i = 0, length = blendShapeWeights.length; i < length; ++i) {\n          this.defaultValue[i] = blendShapeWeights[i];\n        }\n        break;\n    }\n    this._hasSavedDefaultValue = true;\n  };\n  _proto.saveFixedPoseValue = function saveFixedPoseValue() {\n    switch (this.property) {\n      case AnimationProperty.Position:\n        this.fixedPoseValue.copyFrom(this.target.transform.position);\n        break;\n      case AnimationProperty.Rotation:\n        this.fixedPoseValue.copyFrom(this.target.transform.rotationQuaternion);\n        break;\n      case AnimationProperty.Scale:\n        this.fixedPoseValue.copyFrom(this.target.transform.scale);\n        break;\n      case AnimationProperty.BlendShapeWeights:\n        var _ref2 = this.component,\n          blendShapeWeights = _ref2.blendShapeWeights;\n        for (var i = 0, length = blendShapeWeights.length; i < length; ++i) {\n          this.fixedPoseValue[i] = this.component.blendShapeWeights[i];\n        }\n        break;\n    }\n  };\n  return AnimationCurveOwner;\n}();\n\n/**\n * @internal\n */\nvar AnimationEventHandler = function AnimationEventHandler() {\n  this.event = void 0;\n  this.handlers = [];\n};\n\n/**\n * Transitions define when and how the state machine switch from on state to another. AnimatorTransition always originate from a StateMachine or a StateMachine entry.\n */\nvar AnimatorStateTransition = function AnimatorStateTransition() {\n  this.duration = 0;\n  this.offset = 0;\n  this.exitTime = 1;\n  this.destinationState = void 0;\n};\n\n/**\n * Animation wrap mode.\n */\nvar WrapMode;\n(function (WrapMode) {\n  WrapMode[WrapMode[\"Once\"] = 0] = \"Once\";\n  WrapMode[WrapMode[\"Loop\"] = 1] = \"Loop\";\n})(WrapMode || (WrapMode = {}));\n\n/**\n * @internal\n */\nvar AnimatorStatePlayData = /*#__PURE__*/function () {\n  function AnimatorStatePlayData() {\n    this.state = void 0;\n    this.stateData = void 0;\n    this.frameTime = void 0;\n    this.playState = void 0;\n    this.clipTime = void 0;\n    this.currentEventIndex = void 0;\n  }\n  var _proto = AnimatorStatePlayData.prototype;\n  _proto.reset = function reset(state, stateData, offsetFrameTime) {\n    this.state = state;\n    this.frameTime = offsetFrameTime;\n    this.stateData = stateData;\n    this.playState = AnimatorStatePlayState.UnStarted;\n    this.clipTime = state.clipStartTime * state.clip.length;\n    this.currentEventIndex = 0;\n  };\n  _proto.update = function update(isBackwards) {\n    var state = this.state;\n    var time = this.frameTime;\n    var duration = state._getDuration();\n    this.playState = AnimatorStatePlayState.Playing;\n    if (state.wrapMode === WrapMode.Loop) {\n      time = duration ? time % duration : 0;\n    } else {\n      if (Math.abs(time) > duration) {\n        time = time < 0 ? -duration : duration;\n        this.playState = AnimatorStatePlayState.Finished;\n      }\n    }\n    if (isBackwards && time === 0) {\n      this.clipTime = state.clipEndTime * state.clip.length;\n    } else {\n      time < 0 && (time += duration);\n      this.clipTime = time + state.clipStartTime * state.clip.length;\n    }\n  };\n  return AnimatorStatePlayData;\n}();\n\n/**\n * @internal\n */\nvar AnimatorLayerData = /*#__PURE__*/function () {\n  function AnimatorLayerData() {\n    this.animatorStateDataMap = {};\n    this.srcPlayData = new AnimatorStatePlayData();\n    this.destPlayData = new AnimatorStatePlayData();\n    this.layerState = LayerState.Standby;\n    this.crossCurveMark = 0;\n    this.manuallyTransition = new AnimatorStateTransition();\n    this.crossFadeTransition = void 0;\n  }\n  var _proto = AnimatorLayerData.prototype;\n  _proto.switchPlayData = function switchPlayData() {\n    var srcPlayData = this.destPlayData;\n    var switchTemp = this.srcPlayData;\n    this.srcPlayData = srcPlayData;\n    this.destPlayData = switchTemp;\n  };\n  return AnimatorLayerData;\n}();\n\n/**\n * @internal\n */\nvar AnimatorStateData = function AnimatorStateData() {\n  this.curveOwners = [];\n  this.eventHandlers = [];\n};\n\n/**\n * @internal\n */\nvar AnimatorStateInfo = function AnimatorStateInfo() {\n  this.layerIndex = void 0;\n  this.state = void 0;\n};\n\n/**\n * @internal\n */\nvar CrossCurveData = function CrossCurveData() {\n  this.curveOwner = void 0;\n  this.srcCurveIndex = void 0;\n  this.destCurveIndex = void 0;\n};\n\n/**\n * @internal\n */\nvar AnimatorTempValue = /*#__PURE__*/function () {\n  function AnimatorTempValue() {\n    this.vector2 = new Vector2();\n    this.vector3 = new Vector3();\n    this.vector4 = new Vector4();\n    this.quaternion = new Quaternion();\n    this._floatArrayPool = [];\n  }\n  var _proto = AnimatorTempValue.prototype;\n  _proto.getFloatArray = function getFloatArray(length) {\n    var floatArray = this._floatArrayPool[length];\n    if (!floatArray) {\n      this._floatArrayPool[length] = floatArray = new Float32Array(length);\n    }\n    return floatArray;\n  };\n  return AnimatorTempValue;\n}();\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _class2;\n/**\n * The controller of the animation system.\n */\nvar Animator = (_class = (_class2 = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Animator, _Component);\n  /**\n   * @internal\n   */\n  function Animator(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _this._animatorController = void 0;\n    _initializerDefineProperty(_this, \"_speed\", _descriptor, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_controllerUpdateFlag\", _descriptor2, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_animatorLayersData\", _descriptor3, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_crossCurveDataCollection\", _descriptor4, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_animationCurveOwners\", _descriptor5, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_crossCurveDataPool\", _descriptor6, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_animationEventHandlerPool\", _descriptor7, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_baseTempValue\", _descriptor8, _assertThisInitialized(_this));\n    _initializerDefineProperty(_this, \"_crossTempValue\", _descriptor9, _assertThisInitialized(_this));\n    return _this;\n  }\n\n  /**\n   * Play a state by name.\n   * @param stateName - The state name\n   * @param layerIndex - The layer index(default -1). If layer is -1, play the first state with the given state name\n   * @param normalizedTimeOffset - The time offset between 0 and 1(default 0)\n   */\n  var _proto = Animator.prototype;\n  _proto.play = function play(stateName, layerIndex, normalizedTimeOffset) {\n    var _this$_controllerUpda;\n    if (layerIndex === void 0) {\n      layerIndex = -1;\n    }\n    if (normalizedTimeOffset === void 0) {\n      normalizedTimeOffset = 0;\n    }\n    if ((_this$_controllerUpda = this._controllerUpdateFlag) !== null && _this$_controllerUpda !== void 0 && _this$_controllerUpda.flag) {\n      this._clearPlayData();\n    }\n    var animatorInfo = this._getAnimatorStateInfo(stateName, layerIndex, Animator._animatorInfo);\n    var state = animatorInfo.state;\n    if (!state) {\n      return;\n    }\n    if (!state.clip) {\n      console.warn(\"The state named \" + stateName + \" has no AnimationClip data.\");\n      return;\n    }\n    var animatorLayerData = this._getAnimatorLayerData(animatorInfo.layerIndex);\n    var srcPlayData = animatorLayerData.srcPlayData;\n    var curState = srcPlayData.state;\n    if (curState && curState !== state) {\n      this._revertDefaultValue(srcPlayData.state, srcPlayData.stateData);\n    }\n\n    //CM: Not consider same stateName, but different animation\n    var animatorStateData = this._getAnimatorStateData(stateName, state, animatorLayerData);\n    animatorLayerData.layerState = LayerState.Playing;\n    srcPlayData.reset(state, animatorStateData, state._getDuration() * normalizedTimeOffset);\n    this._saveDefaultValues(animatorStateData);\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._reset = function _reset() {\n    var animatorController = this._animatorController;\n    if (animatorController) {\n      var layers = animatorController.layers;\n      for (var i = 0, n = layers.length; i < n; ++i) {\n        var states = layers[i].stateMachine.states;\n        var animatorLayerData = this._getAnimatorLayerData(i);\n        for (var j = 0, m = states.length; j < m; ++j) {\n          var state = states[j];\n          var animatorStateData = this._getAnimatorStateData(state.name, state, animatorLayerData);\n          this._revertDefaultValue(state, animatorStateData);\n        }\n      }\n    }\n    this._clearPlayData();\n  }\n\n  /**\n   * Create a cross fade from the current state to another state.\n   * @param stateName - The state name\n   * @param normalizedTransitionDuration - The duration of the transition (normalized)\n   * @param layerIndex - The layer index(default -1). If layer is -1, play the first state with the given state name\n   * @param normalizedTimeOffset - The time offset between 0 and 1(default 0)\n   */;\n  _proto.crossFade = function crossFade(stateName, normalizedTransitionDuration, layerIndex, normalizedTimeOffset) {\n    var _this$_controllerUpda2;\n    if (layerIndex === void 0) {\n      layerIndex = -1;\n    }\n    if (normalizedTimeOffset === void 0) {\n      normalizedTimeOffset = 0;\n    }\n    if ((_this$_controllerUpda2 = this._controllerUpdateFlag) !== null && _this$_controllerUpda2 !== void 0 && _this$_controllerUpda2.flag) {\n      this._clearPlayData();\n    }\n    var _this$_getAnimatorSta = this._getAnimatorStateInfo(stateName, layerIndex, Animator._animatorInfo),\n      state = _this$_getAnimatorSta.state;\n    var _this$_getAnimatorLay = this._getAnimatorLayerData(layerIndex),\n      manuallyTransition = _this$_getAnimatorLay.manuallyTransition;\n    manuallyTransition.duration = normalizedTransitionDuration;\n    manuallyTransition.offset = normalizedTimeOffset;\n    manuallyTransition.destinationState = state;\n    this._crossFadeByTransition(manuallyTransition, layerIndex);\n  }\n\n  /**\n   * Evaluates the animator component based on deltaTime.\n   * @param deltaTime - The deltaTime when the animation update\n   */;\n  _proto.update = function update(deltaTime) {\n    var _this$_controllerUpda3;\n    if (this.speed === 0) {\n      return;\n    }\n    var animatorController = this._animatorController;\n    if (!animatorController) {\n      return;\n    }\n    if ((_this$_controllerUpda3 = this._controllerUpdateFlag) !== null && _this$_controllerUpda3 !== void 0 && _this$_controllerUpda3.flag) {\n      return;\n    }\n    deltaTime *= this.speed;\n    for (var i = 0, n = animatorController.layers.length; i < n; i++) {\n      var animatorLayerData = this._getAnimatorLayerData(i);\n      if (animatorLayerData.layerState === LayerState.Standby) {\n        continue;\n      }\n      this._updateLayer(i, i === 0, deltaTime / 1000);\n    }\n  }\n\n  /**\n   * Get the playing state from the target layerIndex.\n   * @param layerIndex - The layer index\n   */;\n  _proto.getCurrentAnimatorState = function getCurrentAnimatorState(layerIndex) {\n    var _this$_animatorLayers, _this$_animatorLayers2;\n    return (_this$_animatorLayers = this._animatorLayersData[layerIndex]) === null || _this$_animatorLayers === void 0 ? void 0 : (_this$_animatorLayers2 = _this$_animatorLayers.srcPlayData) === null || _this$_animatorLayers2 === void 0 ? void 0 : _this$_animatorLayers2.state;\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onEnable = function _onEnable() {\n    this.engine._componentsManager.addOnUpdateAnimations(this);\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.engine._componentsManager.removeOnUpdateAnimations(this);\n  };\n  _proto._getAnimatorStateInfo = function _getAnimatorStateInfo(stateName, layerIndex, out) {\n    var state = null;\n    var animatorController = this._animatorController;\n    if (animatorController) {\n      var layers = animatorController.layers;\n      if (layerIndex === -1) {\n        for (var i = 0, n = layers.length; i < n; i++) {\n          state = layers[i].stateMachine.findStateByName(stateName);\n          if (state) {\n            layerIndex = i;\n            break;\n          }\n        }\n      } else {\n        state = layers[layerIndex].stateMachine.findStateByName(stateName);\n      }\n    }\n    out.layerIndex = layerIndex;\n    out.state = state;\n    return out;\n  };\n  _proto._saveDefaultValues = function _saveDefaultValues(stateData) {\n    var curveOwners = stateData.curveOwners;\n    for (var i = curveOwners.length - 1; i >= 0; i--) {\n      curveOwners[i].saveDefaultValue();\n    }\n  };\n  _proto._getAnimatorStateData = function _getAnimatorStateData(stateName, animatorState, animatorLayerData) {\n    var animatorStateDataCollection = animatorLayerData.animatorStateDataMap;\n    var animatorStateData = animatorStateDataCollection[stateName];\n    if (!animatorStateData) {\n      animatorStateData = new AnimatorStateData();\n      animatorStateDataCollection[stateName] = animatorStateData;\n      this._saveAnimatorStateData(animatorState, animatorStateData);\n      this._saveAnimatorEventHandlers(animatorState, animatorStateData);\n    }\n    return animatorStateData;\n  };\n  _proto._saveAnimatorStateData = function _saveAnimatorStateData(animatorState, animatorStateData) {\n    var entity = this.entity,\n      animationCureOwners = this._animationCurveOwners;\n    var curveOwners = animatorStateData.curveOwners;\n    var curves = animatorState.clip._curveBindings;\n    for (var i = curves.length - 1; i >= 0; i--) {\n      var curve = curves[i];\n      var targetEntity = curve.relativePath === \"\" ? entity : entity.findByPath(curve.relativePath);\n      var property = curve.property;\n      var _targetEntity = targetEntity,\n        instanceId = _targetEntity.instanceId;\n      var propertyOwners = animationCureOwners[instanceId] || (animationCureOwners[instanceId] = []);\n      curveOwners[i] = propertyOwners[property] || (propertyOwners[property] = new AnimationCurveOwner(targetEntity, curve.type, property));\n    }\n  };\n  _proto._saveAnimatorEventHandlers = function _saveAnimatorEventHandlers(state, animatorStateData) {\n    var eventHandlerPool = this._animationEventHandlerPool;\n    var scripts = this._entity._scripts;\n    var scriptCount = scripts.length;\n    var eventHandlers = animatorStateData.eventHandlers;\n    var events = state.clip.events;\n    eventHandlers.length = 0;\n    for (var i = 0, n = events.length; i < n; i++) {\n      var event = events[i];\n      var eventHandler = eventHandlerPool.getFromPool();\n      var funcName = event.functionName;\n      var handlers = eventHandler.handlers;\n      eventHandler.event = event;\n      handlers.length = 0;\n      for (var j = scriptCount - 1; j >= 0; j--) {\n        var handler = scripts.get(j)[funcName];\n        handler && handlers.push(handler);\n      }\n      eventHandlers.push(eventHandler);\n    }\n  };\n  _proto._clearCrossData = function _clearCrossData(animatorLayerData) {\n    animatorLayerData.crossCurveMark++;\n    this._crossCurveDataCollection.length = 0;\n    this._crossCurveDataPool.resetPool();\n  };\n  _proto._addCrossCurveData = function _addCrossCurveData(crossCurveData, owner, curCurveIndex, nextCurveIndex) {\n    var dataItem = this._crossCurveDataPool.getFromPool();\n    dataItem.curveOwner = owner;\n    dataItem.srcCurveIndex = curCurveIndex;\n    dataItem.destCurveIndex = nextCurveIndex;\n    crossCurveData.push(dataItem);\n  };\n  _proto._prepareCrossFading = function _prepareCrossFading(animatorLayerData) {\n    var crossCurveData = this._crossCurveDataCollection;\n    var crossCurveMark = animatorLayerData.crossCurveMark;\n\n    // Add src cross curve data.\n    this._prepareSrcCrossData(crossCurveData, animatorLayerData.srcPlayData, crossCurveMark, false);\n    // Add dest cross curve data.\n    this._prepareDestCrossData(crossCurveData, animatorLayerData.destPlayData, crossCurveMark, false);\n  };\n  _proto._prepareStandbyCrossFading = function _prepareStandbyCrossFading(animatorLayerData) {\n    var crossCurveData = this._crossCurveDataCollection;\n    var srcPlayData = animatorLayerData.srcPlayData,\n      crossCurveMark = animatorLayerData.crossCurveMark;\n\n    // Standby have two sub state, one is never play, one is finished, never play srcPlayData.state is null.\n    srcPlayData.state && this._prepareSrcCrossData(crossCurveData, srcPlayData, crossCurveMark, true);\n    // Add dest cross curve data.\n    this._prepareDestCrossData(crossCurveData, animatorLayerData.destPlayData, crossCurveMark, true);\n  };\n  _proto._prepareFixedPoseCrossFading = function _prepareFixedPoseCrossFading(animatorLayerData) {\n    var crossCurveData = this._crossCurveDataCollection;\n\n    // Save current cross curve data owner fixed pose.\n    for (var i = crossCurveData.length - 1; i >= 0; i--) {\n      var item = crossCurveData[i];\n      item.curveOwner.saveFixedPoseValue();\n      // Reset destCurveIndex When fixed pose crossFading again.\n      item.destCurveIndex = -1;\n    }\n    // prepare dest AnimatorState cross data.\n    this._prepareDestCrossData(crossCurveData, animatorLayerData.destPlayData, animatorLayerData.crossCurveMark, true);\n  };\n  _proto._prepareSrcCrossData = function _prepareSrcCrossData(crossCurveData, srcPlayData, crossCurveMark, saveFixed) {\n    var curveOwners = srcPlayData.stateData.curveOwners;\n    for (var i = curveOwners.length - 1; i >= 0; i--) {\n      var owner = curveOwners[i];\n      owner.crossCurveMark = crossCurveMark;\n      owner.crossCurveIndex = crossCurveData.length;\n      saveFixed && owner.saveFixedPoseValue();\n      this._addCrossCurveData(crossCurveData, owner, i, -1);\n    }\n  };\n  _proto._prepareDestCrossData = function _prepareDestCrossData(crossCurveData, destPlayData, crossCurveMark, saveFixed) {\n    var curveOwners = destPlayData.stateData.curveOwners;\n    for (var i = curveOwners.length - 1; i >= 0; i--) {\n      var owner = curveOwners[i];\n      // Not include in previous AnimatorState.\n      if (owner.crossCurveMark === crossCurveMark) {\n        crossCurveData[owner.crossCurveIndex].destCurveIndex = i;\n      } else {\n        owner.saveDefaultValue();\n        saveFixed && owner.saveFixedPoseValue();\n        owner.crossCurveMark = crossCurveMark;\n        owner.crossCurveIndex = crossCurveData.length;\n        this._addCrossCurveData(crossCurveData, owner, -1, i);\n      }\n    }\n  };\n  _proto._evaluateCurve = function _evaluateCurve(property, curve, time, additive, tempValue) {\n    var baseValue;\n    if (additive) {\n      baseValue = curve.keys[0].value;\n    }\n    switch (curve._valueType) {\n      case InterpolableValueType.Float:\n        {\n          var value = curve.evaluate(time);\n          if (additive) {\n            return value - baseValue;\n          }\n          return value;\n        }\n      case InterpolableValueType.FloatArray:\n        {\n          var _value = tempValue.getFloatArray(curve._valueSize);\n          curve._evaluate(time, _value);\n          if (additive) {\n            for (var i = 0, n = _value.length; i < n; i++) {\n              _value[i] = _value[i] - baseValue[i];\n            }\n          }\n          return _value;\n        }\n      case InterpolableValueType.Vector2:\n        {\n          var _value2 = tempValue.vector2;\n          curve._evaluate(time, _value2);\n          if (additive) {\n            if (property === AnimationProperty.Scale) {\n              Vector2.divide(_value2, baseValue, _value2);\n            } else {\n              Vector2.subtract(_value2, baseValue, _value2);\n            }\n          }\n          return _value2;\n        }\n      case InterpolableValueType.Vector3:\n        {\n          var _value3 = tempValue.vector3;\n          curve._evaluate(time, _value3);\n          if (additive) {\n            if (property === AnimationProperty.Scale) {\n              Vector3.divide(_value3, baseValue, _value3);\n            } else {\n              Vector3.subtract(_value3, baseValue, _value3);\n            }\n          }\n          return _value3;\n        }\n      case InterpolableValueType.Vector4:\n        {\n          var _value4 = tempValue.vector4;\n          curve._evaluate(time, _value4);\n          if (additive) {\n            Vector4.subtract(_value4, baseValue, _value4);\n          }\n          return _value4;\n        }\n      case InterpolableValueType.Quaternion:\n        {\n          var _value5 = tempValue.quaternion;\n          curve._evaluate(time, _value5);\n          if (additive) {\n            var tempQuat = Animator._tempQuat;\n            Quaternion.conjugate(baseValue, tempQuat);\n            Quaternion.multiply(tempQuat, _value5, _value5);\n          }\n          return _value5;\n        }\n    }\n  };\n  _proto._getAnimatorLayerData = function _getAnimatorLayerData(layerIndex) {\n    var animatorLayerData = this._animatorLayersData[layerIndex];\n    animatorLayerData || (this._animatorLayersData[layerIndex] = animatorLayerData = new AnimatorLayerData());\n    return animatorLayerData;\n  };\n  _proto._updateLayer = function _updateLayer(layerIndex, firstLayer, deltaTime) {\n    var _this$_animatorContro = this._animatorController.layers[layerIndex],\n      blendingMode = _this$_animatorContro.blendingMode,\n      weight = _this$_animatorContro.weight;\n    var animLayerData = this._animatorLayersData[layerIndex];\n    var srcPlayData = animLayerData.srcPlayData,\n      destPlayData = animLayerData.destPlayData,\n      crossFadeTransitionInfo = animLayerData.crossFadeTransition;\n    var layerAdditive = blendingMode === AnimatorLayerBlendingMode.Additive;\n    var layerWeight = firstLayer ? 1.0 : weight;\n    //TODO: 任意情况都应该检查，后面要优化\n    animLayerData.layerState !== LayerState.FixedCrossFading && this._checkTransition(srcPlayData, crossFadeTransitionInfo, layerIndex);\n    switch (animLayerData.layerState) {\n      case LayerState.Playing:\n        this._updatePlayingState(srcPlayData, animLayerData, layerIndex, layerWeight, deltaTime, layerAdditive);\n        break;\n      case LayerState.FixedCrossFading:\n        this._updateCrossFadeFromPose(destPlayData, animLayerData, layerIndex, layerWeight, deltaTime, layerAdditive);\n        break;\n      case LayerState.CrossFading:\n        this._updateCrossFade(srcPlayData, destPlayData, animLayerData, layerIndex, layerWeight, deltaTime, layerAdditive);\n        break;\n    }\n  };\n  _proto._updatePlayingState = function _updatePlayingState(playData, layerData, layerIndex, weight, delta, additive) {\n    var _playData$stateData = playData.stateData,\n      curveOwners = _playData$stateData.curveOwners,\n      eventHandlers = _playData$stateData.eventHandlers;\n    var state = playData.state,\n      lastPlayState = playData.playState,\n      lastClipTime = playData.clipTime;\n    var curves = state.clip._curveBindings;\n    playData.update(this.speed < 0);\n    var clipTime = playData.clipTime,\n      playState = playData.playState;\n    eventHandlers.length && this._fireAnimationEvents(playData, eventHandlers, lastClipTime, clipTime);\n    for (var i = curves.length - 1; i >= 0; i--) {\n      var owner = curveOwners[i];\n      var value = this._evaluateCurve(owner.property, curves[i].curve, clipTime, additive, this._baseTempValue);\n      if (additive) {\n        this._applyClipValueAdditive(owner, value, weight);\n      } else {\n        this._applyClipValue(owner, value, weight);\n      }\n    }\n    playData.frameTime += state.speed * delta;\n    if (playState === AnimatorStatePlayState.Finished) {\n      layerData.layerState = LayerState.Standby;\n    }\n    if (lastPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(state, layerIndex);\n    }\n    if (playState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(state, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(state, layerIndex);\n    }\n  };\n  _proto._updateCrossFade = function _updateCrossFade(srcPlayData, destPlayData, layerData, layerIndex, weight, delta, additive) {\n    var crossCurveDataCollection = this._crossCurveDataCollection;\n    var srcCurves = srcPlayData.state.clip._curveBindings;\n    var srcState = srcPlayData.state,\n      srcStateData = srcPlayData.stateData,\n      lastSrcPlayState = srcPlayData.playState;\n    var srcEventHandler = srcStateData.eventHandlers;\n    var destState = destPlayData.state,\n      destStateData = destPlayData.stateData,\n      lastDstPlayState = destPlayData.playState;\n    var destEventHandler = destStateData.eventHandlers;\n    var destCurves = destState.clip._curveBindings;\n    var lastSrcClipTime = srcPlayData.clipTime;\n    var lastDestClipTime = destPlayData.clipTime;\n    var crossWeight = Math.abs(destPlayData.frameTime) / (destState._getDuration() * layerData.crossFadeTransition.duration);\n    crossWeight >= 1.0 && (crossWeight = 1.0);\n    srcPlayData.update(this.speed < 0);\n    destPlayData.update(this.speed < 0);\n    var srcPlayState = srcPlayData.playState;\n    var destPlayState = destPlayData.playState;\n    this._updateCrossFadeData(layerData, crossWeight, delta, false);\n    var srcClipTime = srcPlayData.clipTime;\n    var destClipTime = destPlayData.clipTime;\n    srcEventHandler.length && this._fireAnimationEvents(srcPlayData, srcEventHandler, lastSrcClipTime, srcClipTime);\n    destEventHandler.length && this._fireAnimationEvents(destPlayData, destEventHandler, lastDestClipTime, destClipTime);\n    if (lastSrcPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(srcState, layerIndex);\n    }\n    if (crossWeight === 1 || srcPlayState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(srcState, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(srcState, layerIndex);\n    }\n    if (lastDstPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(destState, layerIndex);\n    }\n    if (destPlayState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(destState, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(destState, layerIndex);\n    }\n    for (var i = crossCurveDataCollection.length - 1; i >= 0; i--) {\n      var _crossCurveDataCollec = crossCurveDataCollection[i],\n        curveOwner = _crossCurveDataCollec.curveOwner,\n        srcCurveIndex = _crossCurveDataCollec.srcCurveIndex,\n        destCurveIndex = _crossCurveDataCollec.destCurveIndex;\n      var property = curveOwner.property,\n        defaultValue = curveOwner.defaultValue;\n      var srcValue = srcCurveIndex >= 0 ? this._evaluateCurve(property, srcCurves[srcCurveIndex].curve, srcClipTime, additive, this._baseTempValue) : defaultValue;\n      var destValue = destCurveIndex >= 0 ? this._evaluateCurve(property, destCurves[destCurveIndex].curve, destClipTime, additive, this._crossTempValue) : defaultValue;\n      this._applyCrossClipValue(curveOwner, srcValue, destValue, crossWeight, weight, additive);\n    }\n  };\n  _proto._updateCrossFadeFromPose = function _updateCrossFadeFromPose(destPlayData, layerData, layerIndex, weight, delta, additive) {\n    var crossCurveDataCollection = this._crossCurveDataCollection;\n    var state = destPlayData.state,\n      stateData = destPlayData.stateData,\n      lastPlayState = destPlayData.playState;\n    var eventHandlers = stateData.eventHandlers;\n    var curves = state.clip._curveBindings;\n    var lastDestClipTime = destPlayData.clipTime;\n    var crossWeight = Math.abs(destPlayData.frameTime) / (state._getDuration() * layerData.crossFadeTransition.duration);\n    crossWeight >= 1.0 && (crossWeight = 1.0);\n    destPlayData.update(this.speed < 0);\n    var playState = destPlayData.playState;\n    this._updateCrossFadeData(layerData, crossWeight, delta, true);\n    var destClipTime = destPlayData.clipTime;\n    //TODO: srcState 少了最新一段时间的判断\n    eventHandlers.length && this._fireAnimationEvents(destPlayData, eventHandlers, lastDestClipTime, destClipTime);\n    if (lastPlayState === AnimatorStatePlayState.UnStarted) {\n      this._callAnimatorScriptOnEnter(state, layerIndex);\n    }\n    if (playState === AnimatorStatePlayState.Finished) {\n      this._callAnimatorScriptOnExit(state, layerIndex);\n    } else {\n      this._callAnimatorScriptOnUpdate(state, layerIndex);\n    }\n    for (var i = crossCurveDataCollection.length - 1; i >= 0; i--) {\n      var _crossCurveDataCollec2 = crossCurveDataCollection[i],\n        curveOwner = _crossCurveDataCollec2.curveOwner,\n        destCurveIndex = _crossCurveDataCollec2.destCurveIndex;\n      var destValue = destCurveIndex >= 0 ? this._evaluateCurve(curveOwner.property, curves[destCurveIndex].curve, destClipTime, additive, this._crossTempValue) : curveOwner.defaultValue;\n      this._applyCrossClipValue(curveOwner, curveOwner.fixedPoseValue, destValue, crossWeight, weight, additive);\n    }\n  };\n  _proto._updateCrossFadeData = function _updateCrossFadeData(layerData, crossWeight, delta, fixed) {\n    var destPlayData = layerData.destPlayData;\n    destPlayData.frameTime += destPlayData.state.speed * delta;\n    if (crossWeight === 1.0) {\n      if (destPlayData.playState === AnimatorStatePlayState.Finished) {\n        layerData.layerState = LayerState.Standby;\n      } else {\n        layerData.layerState = LayerState.Playing;\n      }\n      layerData.switchPlayData();\n    } else {\n      fixed || (layerData.srcPlayData.frameTime += layerData.srcPlayData.state.speed * delta);\n    }\n  };\n  _proto._applyCrossClipValue = function _applyCrossClipValue(owner, srcValue, destValue, crossWeight, layerWeight, additive) {\n    var value;\n    if (owner.type === Transform) {\n      switch (owner.property) {\n        case AnimationProperty.Position:\n          value = this._baseTempValue.vector3;\n          Vector3.lerp(srcValue, destValue, crossWeight, value);\n          break;\n        case AnimationProperty.Rotation:\n          value = this._baseTempValue.quaternion;\n          Quaternion.slerp(srcValue, destValue, crossWeight, value);\n          break;\n        case AnimationProperty.Scale:\n          {\n            value = this._baseTempValue.vector3;\n            Vector3.lerp(srcValue, destValue, crossWeight, value);\n            break;\n          }\n      }\n    } else if (owner.type === SkinnedMeshRenderer) {\n      switch (owner.property) {\n        case AnimationProperty.BlendShapeWeights:\n          value = this._baseTempValue.getFloatArray(srcValue.length);\n          for (var i = 0, length = value.length; i < length; ++i) {\n            value[i] = srcValue[i] + (destValue[i] - srcValue[i]) * crossWeight;\n          }\n          break;\n      }\n    }\n    if (additive) {\n      this._applyClipValueAdditive(owner, value, layerWeight);\n    } else {\n      this._applyClipValue(owner, value, layerWeight);\n    }\n  };\n  _proto._applyClipValue = function _applyClipValue(owner, value, weight) {\n    if (owner.type === Transform) {\n      var transform = owner.target.transform;\n      switch (owner.property) {\n        case AnimationProperty.Position:\n          if (weight === 1.0) {\n            transform.position = value;\n          } else {\n            var position = transform.position;\n            Vector3.lerp(position, value, weight, position);\n          }\n          break;\n        case AnimationProperty.Rotation:\n          if (weight === 1.0) {\n            transform.rotationQuaternion = value;\n          } else {\n            var rotationQuaternion = transform.rotationQuaternion;\n            Quaternion.slerp(rotationQuaternion, value, weight, rotationQuaternion);\n          }\n          break;\n        case AnimationProperty.Scale:\n          if (weight === 1.0) {\n            transform.scale = value;\n          } else {\n            var scale = transform.scale;\n            Vector3.lerp(scale, value, weight, scale);\n          }\n          break;\n      }\n    } else if (owner.type === SkinnedMeshRenderer) {\n      switch (owner.property) {\n        case AnimationProperty.BlendShapeWeights:\n          if (weight === 1.0) {\n            owner.component.blendShapeWeights = value;\n          } else {\n            var _ref = owner.component,\n              blendShapeWeights = _ref.blendShapeWeights;\n            for (var i = 0, length = blendShapeWeights.length; i < length; ++i) {\n              blendShapeWeights[i] += (value[i] - blendShapeWeights[i]) * weight;\n            }\n          }\n          break;\n      }\n    }\n  };\n  _proto._applyClipValueAdditive = function _applyClipValueAdditive(owner, additiveValue, weight) {\n    if (owner.type === Transform) {\n      var transform = owner.target.transform;\n      switch (owner.property) {\n        case AnimationProperty.Position:\n          var position = transform.position;\n          position.x += additiveValue.x * weight;\n          position.y += additiveValue.y * weight;\n          position.z += additiveValue.z * weight;\n          transform.position = position;\n          break;\n        case AnimationProperty.Rotation:\n          var rotationQuaternion = transform.rotationQuaternion;\n          AnimatorUtils.quaternionWeight(additiveValue, weight, additiveValue);\n          additiveValue.normalize();\n          rotationQuaternion.multiply(additiveValue);\n          transform.rotationQuaternion = rotationQuaternion;\n          break;\n        case AnimationProperty.Scale:\n          var scale = transform.scale;\n          AnimatorUtils.scaleWeight(scale, weight, scale);\n          Vector3.multiply(scale, additiveValue, scale);\n          transform.scale = scale;\n          break;\n        case AnimationProperty.BlendShapeWeights:\n          var _ref2 = owner.component,\n            blendShapeWeights = _ref2.blendShapeWeights;\n          for (var i = 0, length = blendShapeWeights.length; i < length; ++i) {\n            owner.component.blendShapeWeights[i] += additiveValue[i] * weight;\n          }\n          break;\n      }\n    }\n  };\n  _proto._revertDefaultValue = function _revertDefaultValue(state, stateData) {\n    var clip = state.clip;\n    if (clip) {\n      var curves = clip._curveBindings;\n      var curveOwners = stateData.curveOwners;\n      for (var i = curves.length - 1; i >= 0; i--) {\n        var owner = curveOwners[i];\n        var transform = owner.target.transform;\n        if (!owner._hasSavedDefaultValue) continue;\n        switch (owner.property) {\n          case AnimationProperty.Position:\n            transform.position = owner.defaultValue;\n            break;\n          case AnimationProperty.Rotation:\n            transform.rotationQuaternion = owner.defaultValue;\n            break;\n          case AnimationProperty.Scale:\n            transform.scale = owner.defaultValue;\n            break;\n          case AnimationProperty.BlendShapeWeights:\n            var _ref3 = owner.component,\n              blendShapeWeights = _ref3.blendShapeWeights;\n            for (var j = 0, length = blendShapeWeights.length; j < length; ++j) {\n              owner.component.blendShapeWeights[j] = owner.defaultValue[j];\n            }\n            break;\n        }\n      }\n    }\n  };\n  _proto._checkTransition = function _checkTransition(stateData, crossFadeTransition, layerIndex) {\n    var state = stateData.state,\n      clipTime = stateData.clipTime;\n    var duration = state._getDuration();\n    var transitions = state.transitions;\n    for (var i = 0, n = transitions.length; i < n; ++i) {\n      var transition = transitions[i];\n      if (duration * transition.exitTime <= clipTime) {\n        crossFadeTransition !== transition && this._crossFadeByTransition(transition, layerIndex);\n      }\n    }\n  };\n  _proto._crossFadeByTransition = function _crossFadeByTransition(transition, layerIndex) {\n    var name = transition.destinationState.name;\n    var animatorStateInfo = this._getAnimatorStateInfo(name, layerIndex, Animator._animatorInfo);\n    var crossState = animatorStateInfo.state;\n    if (!crossState) {\n      return;\n    }\n    if (!crossState.clip) {\n      console.warn(\"The state named \" + name + \" has no AnimationClip data.\");\n      return;\n    }\n    var animatorLayerData = this._getAnimatorLayerData(animatorStateInfo.layerIndex);\n    var layerState = animatorLayerData.layerState;\n    var destPlayData = animatorLayerData.destPlayData;\n    var animatorStateData = this._getAnimatorStateData(name, crossState, animatorLayerData);\n    var duration = crossState._getDuration();\n    var offset = duration * transition.offset;\n    destPlayData.reset(crossState, animatorStateData, offset);\n    switch (layerState) {\n      // Maybe not play, maybe end.\n      case LayerState.Standby:\n        animatorLayerData.layerState = LayerState.FixedCrossFading;\n        this._clearCrossData(animatorLayerData);\n        this._prepareStandbyCrossFading(animatorLayerData);\n        break;\n      case LayerState.Playing:\n        animatorLayerData.layerState = LayerState.CrossFading;\n        this._clearCrossData(animatorLayerData);\n        this._prepareCrossFading(animatorLayerData);\n        break;\n      case LayerState.CrossFading:\n        animatorLayerData.layerState = LayerState.FixedCrossFading;\n        this._prepareFixedPoseCrossFading(animatorLayerData);\n        break;\n      case LayerState.FixedCrossFading:\n        this._prepareFixedPoseCrossFading(animatorLayerData);\n        break;\n    }\n    animatorLayerData.crossFadeTransition = transition;\n  };\n  _proto._fireAnimationEvents = function _fireAnimationEvents(playState, eventHandlers, lastClipTime, clipTime) {\n    var state = playState.state;\n    var clipDuration = state.clip.length;\n    if (this.speed >= 0) {\n      if (clipTime < lastClipTime) {\n        this._fireSubAnimationEvents(playState, eventHandlers, lastClipTime, state.clipEndTime * clipDuration);\n        playState.currentEventIndex = 0;\n        this._fireSubAnimationEvents(playState, eventHandlers, state.clipStartTime * clipDuration, clipTime);\n      } else {\n        this._fireSubAnimationEvents(playState, eventHandlers, lastClipTime, clipTime);\n      }\n    } else {\n      if (clipTime > lastClipTime) {\n        this._fireBackwardSubAnimationEvents(playState, eventHandlers, lastClipTime, state.clipStartTime * clipDuration);\n        playState.currentEventIndex = eventHandlers.length - 1;\n        this._fireBackwardSubAnimationEvents(playState, eventHandlers, state.clipEndTime * clipDuration, clipTime);\n      } else {\n        this._fireBackwardSubAnimationEvents(playState, eventHandlers, lastClipTime, clipTime);\n      }\n    }\n  };\n  _proto._fireSubAnimationEvents = function _fireSubAnimationEvents(playState, eventHandlers, lastClipTime, curClipTime) {\n    var eventIndex = playState.currentEventIndex;\n    for (var n = eventHandlers.length; eventIndex < n; eventIndex++) {\n      var eventHandler = eventHandlers[eventIndex];\n      var _eventHandler$event = eventHandler.event,\n        time = _eventHandler$event.time,\n        parameter = _eventHandler$event.parameter;\n      if (time > curClipTime) {\n        break;\n      }\n      var _eventHandler = eventHandler,\n        handlers = _eventHandler.handlers;\n      if (time >= lastClipTime) {\n        for (var j = handlers.length - 1; j >= 0; j--) {\n          handlers[j](parameter);\n        }\n        playState.currentEventIndex = Math.min(eventIndex + 1, n - 1);\n      }\n    }\n  };\n  _proto._fireBackwardSubAnimationEvents = function _fireBackwardSubAnimationEvents(playState, eventHandlers, lastClipTime, curClipTime) {\n    var eventIndex = playState.currentEventIndex;\n    for (; eventIndex >= 0; eventIndex--) {\n      var eventHandler = eventHandlers[eventIndex];\n      var _eventHandler$event2 = eventHandler.event,\n        time = _eventHandler$event2.time,\n        parameter = _eventHandler$event2.parameter;\n      if (time < curClipTime) {\n        break;\n      }\n      var _eventHandler2 = eventHandler,\n        handlers = _eventHandler2.handlers;\n      if (time <= lastClipTime) {\n        for (var j = handlers.length - 1; j >= 0; j--) {\n          handlers[j](parameter);\n        }\n        playState.currentEventIndex = Math.max(eventIndex - 1, 0);\n      }\n    }\n  };\n  _proto._callAnimatorScriptOnEnter = function _callAnimatorScriptOnEnter(state, layerIndex) {\n    var scripts = state._onStateEnterScripts;\n    for (var i = 0, n = scripts.length; i < n; i++) {\n      scripts[i].onStateEnter(this, state, layerIndex);\n    }\n  };\n  _proto._callAnimatorScriptOnUpdate = function _callAnimatorScriptOnUpdate(state, layerIndex) {\n    var scripts = state._onStateUpdateScripts;\n    for (var i = 0, n = scripts.length; i < n; i++) {\n      scripts[i].onStateUpdate(this, state, layerIndex);\n    }\n  };\n  _proto._callAnimatorScriptOnExit = function _callAnimatorScriptOnExit(state, layerIndex) {\n    var scripts = state._onStateExitScripts;\n    for (var i = 0, n = scripts.length; i < n; i++) {\n      scripts[i].onStateExit(this, state, layerIndex);\n    }\n  };\n  _proto._clearPlayData = function _clearPlayData() {\n    this._animatorLayersData.length = 0;\n    this._crossCurveDataCollection.length = 0;\n    this._animationCurveOwners.length = 0;\n    this._animationEventHandlerPool.resetPool();\n    if (this._controllerUpdateFlag) {\n      this._controllerUpdateFlag.flag = false;\n    }\n  };\n  _createClass(Animator, [{\n    key: \"speed\",\n    get:\n    /**\n     * The playback speed of the Animator, 1.0 is normal playback speed.\n     */\n    function get() {\n      return this._speed;\n    },\n    set: function set(value) {\n      this._speed = value;\n    }\n\n    /**\n     * All layers from the AnimatorController which belongs this Animator.\n     */\n  }, {\n    key: \"animatorController\",\n    get: function get() {\n      return this._animatorController;\n    },\n    set: function set(animatorController) {\n      if (animatorController !== this._animatorController) {\n        this._controllerUpdateFlag && this._controllerUpdateFlag.destroy();\n        this._controllerUpdateFlag = animatorController && animatorController._registerChangeFlag();\n        this._animatorController = animatorController;\n      }\n    }\n  }]);\n  return Animator;\n}(Component), _class2._tempQuat = new Quaternion(), _class2._animatorInfo = new AnimatorStateInfo(), _class2), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"_speed\", [assignmentClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return 1.0;\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"_controllerUpdateFlag\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"_animatorLayersData\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"_crossCurveDataCollection\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"_animationCurveOwners\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return [];\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"_crossCurveDataPool\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ClassPool(CrossCurveData);\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"_animationEventHandlerPool\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new ClassPool(AnimationEventHandler);\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"_baseTempValue\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new AnimatorTempValue();\n  }\n}), _descriptor9 = _applyDecoratedDescriptor(_class.prototype, \"_crossTempValue\", [ignoreClone], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return new AnimatorTempValue();\n  }\n})), _class);\n\n/**\n * Store the data for Animator playback.\n */\nvar AnimatorController = /*#__PURE__*/function () {\n  function AnimatorController() {\n    this._updateFlagManager = new UpdateFlagManager();\n    this._layers = [];\n    this._layersMap = {};\n  }\n  var _proto = AnimatorController.prototype;\n  /**\n   * Get the layer by name.\n   * @param name - The layer's name.\n   */\n  _proto.findLayerByName = function findLayerByName(name) {\n    return this._layersMap[name];\n  }\n\n  /**\n   * Add a layer to the controller.\n   * @param layer - The layer to add\n   */;\n  _proto.addLayer = function addLayer(layer) {\n    this._layers.push(layer);\n    this._layersMap[layer.name] = layer;\n    this._distributeUpdateFlag();\n  }\n\n  /**\n   * Remove a layer from the controller.\n   * @param layerIndex - The index of the AnimatorLayer\n   */;\n  _proto.removeLayer = function removeLayer(layerIndex) {\n    var theLayer = this.layers[layerIndex];\n    this._layers.splice(layerIndex, 1);\n    delete this._layersMap[theLayer.name];\n    this._distributeUpdateFlag();\n  }\n\n  /**\n   * Clear layers.\n   */;\n  _proto.clearLayers = function clearLayers() {\n    this._layers.length = 0;\n    for (var name in this._layersMap) {\n      delete this._layersMap[name];\n    }\n    this._distributeUpdateFlag();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._registerChangeFlag = function _registerChangeFlag() {\n    return this._updateFlagManager.createFlag(BoolUpdateFlag);\n  };\n  _proto._distributeUpdateFlag = function _distributeUpdateFlag() {\n    this._updateFlagManager.dispatch();\n  };\n  _createClass(AnimatorController, [{\n    key: \"layers\",\n    get:\n    /**\n     * The layers in the controller.\n     */\n    function get() {\n      return this._layers;\n    }\n  }]);\n  return AnimatorController;\n}();\n\n/**\n * The Animation Layer contains a state machine that controls animations of a model or part of it.\n */\nvar AnimatorControllerLayer = /** The blending weight that the layers has. It is not taken into account for the first layer. */\n\n/** The blending mode used by the layer. It is not taken into account for the first layer. */\n\n/** The state machine for the layer. */\n\n/**\n * @param name - The layer's name\n */\nfunction AnimatorControllerLayer(name) {\n  this.name = name;\n  this.weight = 1.0;\n  this.blendingMode = AnimatorLayerBlendingMode.Override;\n  this.stateMachine = void 0;\n};\n\n/**\n * StateMachineScript is a component that can be added to a animator state. It's the base class every script on a state derives from.\n */\nvar StateMachineScript = /*#__PURE__*/function () {\n  function StateMachineScript() {\n    this._destroyed = false;\n    this._state = void 0;\n  }\n  var _proto = StateMachineScript.prototype;\n  /**\n   * onStateEnter is called when a transition starts and the state machine starts to evaluate this state.\n   * @param animator - The animator\n   * @param animatorState - The state be evaluated\n   * @param layerIndex - The index of the layer where the state is located\n   */\n  _proto.onStateEnter = function onStateEnter(animator, animatorState, layerIndex) {}\n\n  /**\n   * onStateUpdate is called on each Update frame between onStateEnter and onStateExit callbacks.\n   * @param animator - The animator\n   * @param animatorState - The state be evaluated\n   * @param layerIndex - The index of the layer where the state is located\n   */;\n  _proto.onStateUpdate = function onStateUpdate(animator, animatorState, layerIndex) {}\n\n  /**\n   * onStateExit is called when a transition ends and the state machine finishes evaluating this state.\n   * @param animator - The animator\n   * @param animatorState - The state be evaluated\n   * @param layerIndex - The index of the layer where the state is located\n   */;\n  _proto.onStateExit = function onStateExit(animator, animatorState, layerIndex) {}\n\n  /**\n   * Destroy this instance.\n   */;\n  _proto.destroy = function destroy() {\n    if (this._destroyed) {\n      return;\n    }\n    this._state._removeStateMachineScript(this);\n    this._destroyed = true;\n  };\n  return StateMachineScript;\n}();\n\n/**\n * States are the basic building blocks of a state machine. Each state contains a AnimationClip which will play while the character is in that state.\n */\nvar AnimatorState = /*#__PURE__*/function () {\n  /**\n   * @param name - The state's name\n   */\n  function AnimatorState(name) {\n    this.name = name;\n    this.speed = 1.0;\n    this.wrapMode = WrapMode.Loop;\n    this._onStateEnterScripts = [];\n    this._onStateUpdateScripts = [];\n    this._onStateExitScripts = [];\n    this._clipStartTime = 0;\n    this._clipEndTime = 1;\n    this._clip = void 0;\n    this._transitions = [];\n  }\n\n  /**\n   * Add an outgoing transition to the destination state.\n   * @param transition - The transition\n   */\n  var _proto = AnimatorState.prototype;\n  _proto.addTransition = function addTransition(transition) {\n    this._transitions.push(transition);\n  }\n\n  /**\n   * Remove a transition from the state.\n   * @param transition - The transition\n   */;\n  _proto.removeTransition = function removeTransition(transition) {\n    var index = this._transitions.indexOf(transition);\n    index !== -1 && this._transitions.splice(index, 1);\n  }\n\n  /**\n   * Adds a state machine script class of type T to the AnimatorState.\n   * @param scriptType - The state machine script class of type T\n   */;\n  _proto.addStateMachineScript = function addStateMachineScript(scriptType) {\n    var script = new scriptType();\n    script._state = this;\n    var prototype = StateMachineScript.prototype;\n    if (script.onStateEnter !== prototype.onStateEnter) {\n      this._onStateEnterScripts.push(script);\n    }\n    if (script.onStateUpdate !== prototype.onStateUpdate) {\n      this._onStateUpdateScripts.push(script);\n    }\n    if (script.onStateExit !== prototype.onStateExit) {\n      this._onStateExitScripts.push(script);\n    }\n    return script;\n  }\n\n  /**\n   * Clears all transitions from the state.\n   */;\n  _proto.clearTransitions = function clearTransitions() {\n    this._transitions.length = 0;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getDuration = function _getDuration() {\n    if (this.clip) {\n      return (this._clipEndTime - this._clipStartTime) * this.clip.length;\n    }\n    return null;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._removeStateMachineScript = function _removeStateMachineScript(script) {\n    var prototype = StateMachineScript.prototype;\n    if (script.onStateEnter !== prototype.onStateEnter) {\n      var index = this._onStateEnterScripts.indexOf(script);\n      index !== -1 && this._onStateEnterScripts.splice(index, 1);\n    }\n    if (script.onStateUpdate !== prototype.onStateUpdate) {\n      var _index = this._onStateUpdateScripts.indexOf(script);\n      _index !== -1 && this._onStateUpdateScripts.splice(_index, 1);\n    }\n    if (script.onStateExit !== prototype.onStateExit) {\n      var _index2 = this._onStateExitScripts.indexOf(script);\n      _index2 !== -1 && this._onStateExitScripts.splice(_index2, 1);\n    }\n  };\n  _createClass(AnimatorState, [{\n    key: \"transitions\",\n    get: /** The speed of the clip. 1 is normal speed, default 1. */\n\n    /** The wrap mode used in the state. */\n\n    /** @internal */\n\n    /** @internal */\n\n    /** @internal */\n\n    /**\n     * The transitions that are going out of the state.\n     */\n    function get() {\n      return this._transitions;\n    }\n\n    /**\n     * The clip that is being played by this animator state.\n     */\n  }, {\n    key: \"clip\",\n    get: function get() {\n      return this._clip;\n    },\n    set: function set(clip) {\n      this._clip = clip;\n      this._clipEndTime = Math.min(this._clipEndTime, 1);\n    }\n\n    /**\n     * The start time of the clip, the range is 0 to 1, default is 0.\n     */\n  }, {\n    key: \"clipStartTime\",\n    get: function get() {\n      return this._clipStartTime;\n    },\n    set: function set(time) {\n      this._clipStartTime = Math.max(time, 0);\n    }\n\n    /**\n     * The end time of the clip, the range is 0 to 1, default is 1.\n     */\n  }, {\n    key: \"clipEndTime\",\n    get: function get() {\n      return this._clipEndTime;\n    },\n    set: function set(time) {\n      this._clipEndTime = Math.min(time, 1);\n    }\n  }]);\n  return AnimatorState;\n}();\n\n/**\n * A graph controlling the interaction of states. Each state references a motion.\n */\nvar AnimatorStateMachine = /*#__PURE__*/function () {\n  function AnimatorStateMachine() {\n    this.states = [];\n    this._statesMap = {};\n  }\n  var _proto = AnimatorStateMachine.prototype;\n  /**\n   * Add a state to the state machine.\n   * @param name - The name of the new state\n   */\n  _proto.addState = function addState(name) {\n    var state = this.findStateByName(name);\n    if (!state) {\n      state = new AnimatorState(name);\n      this.states.push(state);\n      this._statesMap[name] = state;\n    } else {\n      console.warn(\"The state named \" + name + \" has existed.\");\n    }\n    return state;\n  }\n\n  /**\n   * Remove a state from the state machine.\n   * @param state - The state\n   */;\n  _proto.removeState = function removeState(state) {\n    var name = state.name;\n    var index = this.states.indexOf(state);\n    if (index > -1) {\n      this.states.splice(index, 1);\n    }\n    delete this._statesMap[name];\n  }\n\n  /**\n   * Get the state by name.\n   * @param name - The layer's name\n   */;\n  _proto.findStateByName = function findStateByName(name) {\n    return this._statesMap[name];\n  }\n\n  /**\n   * Makes a unique state name in the state machine.\n   * @param name - Desired name for the state.\n   * @returns Unique name.\n   */;\n  _proto.makeUniqueStateName = function makeUniqueStateName(name) {\n    var _statesMap = this._statesMap;\n    var originName = name;\n    var index = 0;\n    while (_statesMap[name]) {\n      name = originName + \" \" + index;\n      index++;\n    }\n    return name;\n  };\n  return AnimatorStateMachine;\n}();\n\n/**\n * Animation interpolation method.\n */\nvar InterpolationType;\n(function (InterpolationType) {\n  InterpolationType[InterpolationType[\"Linear\"] = 0] = \"Linear\";\n  InterpolationType[InterpolationType[\"CubicSpine\"] = 1] = \"CubicSpine\";\n  InterpolationType[InterpolationType[\"Step\"] = 2] = \"Step\";\n  InterpolationType[InterpolationType[\"Hermite\"] = 3] = \"Hermite\";\n})(InterpolationType || (InterpolationType = {}));\n\n/**\n * Store a collection of Keyframes that can be evaluated over time.\n */\nvar AnimationCurve = /*#__PURE__*/function () {\n  function AnimationCurve() {\n    this.keys = [];\n    this.interpolation = void 0;\n    this._valueSize = void 0;\n    this._valueType = void 0;\n    this._tempValue = void 0;\n    this._length = 0;\n    this._currentIndex = 0;\n  }\n  var _proto = AnimationCurve.prototype;\n  /**\n   * Add a new key to the curve.\n   * @param key - The keyframe\n   */\n  _proto.addKey = function addKey(key) {\n    var time = key.time;\n    this.keys.push(key);\n    if (time > this._length) {\n      this._length = time;\n    }\n    if (!this._valueSize) {\n      if (typeof key.value == \"number\") {\n        this._valueSize = 1;\n        this._valueType = InterpolableValueType.Float;\n        this._tempValue = 0;\n      }\n      if (key.value instanceof Vector2) {\n        this._valueSize = 2;\n        this._valueType = InterpolableValueType.Vector2;\n        this._tempValue = new Vector2();\n      }\n      if (key.value instanceof Vector3) {\n        this._valueSize = 3;\n        this._valueType = InterpolableValueType.Vector3;\n        this._tempValue = new Vector3();\n      }\n      if (key.value instanceof Vector4) {\n        this._valueSize = 4;\n        this._valueType = InterpolableValueType.Vector4;\n        this._tempValue = new Vector4();\n      }\n      if (key.value instanceof Quaternion) {\n        this._valueSize = 4;\n        this._valueType = InterpolableValueType.Quaternion;\n        this._tempValue = new Quaternion();\n      }\n      if (key.value instanceof Float32Array) {\n        var size = key.value.length;\n        this._valueSize = size;\n        this._valueType = InterpolableValueType.FloatArray;\n        this._tempValue = new Float32Array(size);\n      }\n    }\n    this.keys.sort(function (a, b) {\n      return a.time - b.time;\n    });\n  }\n\n  /**\n   * Evaluate the curve at time.\n   * @param time - The time within the curve you want to evaluate\n   */;\n  _proto.evaluate = function evaluate(time) {\n    return this._evaluate(time, this._tempValue);\n  }\n\n  /**\n   * Removes the keyframe at index and inserts key.\n   * @param index - The index of the key to move\n   * @param key - The key to insert\n   */;\n  _proto.moveKey = function moveKey(index, key) {\n    this.keys[index] = key;\n  }\n\n  /**\n   * Removes a key.\n   * @param index - The index of the key to remove\n   */;\n  _proto.removeKey = function removeKey(index) {\n    this.keys.splice(index, 1);\n    var keys = this.keys;\n    var count = this.keys.length;\n    var newLength = 0;\n    for (var i = count - 1; i >= 0; i--) {\n      if (keys[i].time > length) {\n        newLength = keys[i].time;\n      }\n    }\n    this._length = newLength;\n  }\n\n  /**\n   * @internal\n   * Samples an animation at a given time.\n   * @param time - The time to sample an animation\n   * @param out - The value calculated\n   */;\n  _proto._evaluate = function _evaluate(time, out) {\n    var keys = this.keys,\n      interpolation = this.interpolation;\n      this._valueType;\n    var length = this.keys.length;\n\n    // Compute curIndex and nextIndex.\n    var curIndex = this._currentIndex;\n\n    // Reset loop.\n    if (curIndex !== -1 && time < keys[curIndex].time) {\n      curIndex = -1;\n    }\n    var nextIndex = curIndex + 1;\n    while (nextIndex < length) {\n      if (time < keys[nextIndex].time) {\n        break;\n      }\n      curIndex++;\n      nextIndex++;\n    }\n    this._currentIndex = curIndex;\n    // Evaluate value.\n    var value;\n    if (curIndex === -1) {\n      value = this._evaluateStep(0, out);\n    } else if (nextIndex === length) {\n      value = this._evaluateStep(curIndex, out);\n    } else {\n      // Time between first frame and end frame.\n      var curFrameTime = keys[curIndex].time;\n      var duration = keys[nextIndex].time - curFrameTime;\n      var t = (time - curFrameTime) / duration;\n      var dur = duration;\n      switch (interpolation) {\n        case InterpolationType.Linear:\n          value = this._evaluateLinear(curIndex, nextIndex, t, out);\n          break;\n        case InterpolationType.Step:\n          value = this._evaluateStep(curIndex, out);\n          break;\n        case InterpolationType.CubicSpine:\n        case InterpolationType.Hermite:\n          value = this._evaluateHermite(curIndex, nextIndex, t, dur, out);\n      }\n    }\n    return value;\n  };\n  _proto._evaluateLinear = function _evaluateLinear(frameIndex, nextFrameIndex, t, out) {\n    var _valueType = this._valueType,\n      keys = this.keys;\n    switch (_valueType) {\n      case InterpolableValueType.Float:\n        return keys[frameIndex].value * (1 - t) + keys[nextFrameIndex].value * t;\n      case InterpolableValueType.FloatArray:\n        var value = keys[frameIndex].value;\n        var nextValue = keys[nextFrameIndex].value;\n        for (var i = 0, n = value.length; i < n; i++) {\n          out[i] = value[i] * (1 - t) + nextValue[i] * t;\n        }\n        return out;\n      case InterpolableValueType.Vector2:\n        Vector2.lerp(keys[frameIndex].value, keys[nextFrameIndex].value, t, out);\n        return out;\n      case InterpolableValueType.Vector3:\n        Vector3.lerp(keys[frameIndex].value, keys[nextFrameIndex].value, t, out);\n        return out;\n      case InterpolableValueType.Vector4:\n        Vector4.lerp(keys[frameIndex].value, keys[nextFrameIndex].value, t, out);\n        return out;\n      case InterpolableValueType.Quaternion:\n        Quaternion.slerp(keys[frameIndex].value, keys[nextFrameIndex].value, t, out);\n        return out;\n    }\n  };\n  _proto._evaluateStep = function _evaluateStep(frameIndex, out) {\n    var _valueType = this._valueType,\n      keys = this.keys;\n    switch (_valueType) {\n      case InterpolableValueType.Float:\n        return keys[frameIndex].value;\n      case InterpolableValueType.FloatArray:\n        var value = keys[frameIndex].value;\n        for (var i = 0, n = value.length; i < n; i++) {\n          out[i] = value[i];\n        }\n        return out;\n      case InterpolableValueType.Vector2:\n      case InterpolableValueType.Vector3:\n      case InterpolableValueType.Vector4:\n      case InterpolableValueType.Quaternion:\n        out.copyFrom(keys[frameIndex].value);\n        return out;\n    }\n  };\n  _proto._evaluateHermite = function _evaluateHermite(frameIndex, nextFrameIndex, t, dur, out) {\n    var _valueSize = this._valueSize,\n      keys = this.keys;\n    var curKey = keys[frameIndex];\n    var nextKey = keys[nextFrameIndex];\n    switch (_valueSize) {\n      case 1:\n        {\n          var t0 = curKey.outTangent,\n            t1 = nextKey.inTangent,\n            p0 = curKey.value,\n            p1 = nextKey.value;\n          if (Number.isFinite(t0) && Number.isFinite(t1)) {\n            var t2 = t * t;\n            var t3 = t2 * t;\n            var a = 2.0 * t3 - 3.0 * t2 + 1.0;\n            var b = t3 - 2.0 * t2 + t;\n            var c = t3 - t2;\n            var d = -2.0 * t3 + 3.0 * t2;\n            return a * p0 + b * t0 * dur + c * t1 * dur + d * p1;\n          } else {\n            return curKey.value;\n          }\n        }\n      case 2:\n        {\n          var _p = curKey.value;\n          var tan0 = curKey.outTangent;\n          var _p2 = nextKey.value;\n          var tan1 = nextKey.inTangent;\n          var _t = t * t;\n          var _t2 = _t * t;\n          var _a = 2.0 * _t2 - 3.0 * _t + 1.0;\n          var _b = _t2 - 2.0 * _t + t;\n          var _c = _t2 - _t;\n          var _d = -2.0 * _t2 + 3.0 * _t;\n          var _t3 = tan0.x,\n            _t4 = tan1.x;\n          if (Number.isFinite(_t3) && Number.isFinite(_t4)) {\n            out.x = _a * _p.x + _b * _t3 * dur + _c * _t4 * dur + _d * _p2.x;\n          } else {\n            out.x = _p.x;\n          }\n          _t3 = tan0.y, _t4 = tan1.y;\n          if (Number.isFinite(_t3) && Number.isFinite(_t4)) out.y = _a * _p.y + _b * _t3 * dur + _c * _t4 * dur + _d * _p2.y;else {\n            out.y = _p.y;\n          }\n          return out;\n        }\n      case 3:\n        {\n          var _p3 = curKey.value;\n          var _tan = curKey.outTangent;\n          var _p4 = nextKey.value;\n          var _tan2 = nextKey.inTangent;\n          var _t5 = t * t;\n          var _t6 = _t5 * t;\n          var _a2 = 2.0 * _t6 - 3.0 * _t5 + 1.0;\n          var _b2 = _t6 - 2.0 * _t5 + t;\n          var _c2 = _t6 - _t5;\n          var _d2 = -2.0 * _t6 + 3.0 * _t5;\n          var _t7 = _tan.x,\n            _t8 = _tan2.x;\n          if (Number.isFinite(_t7) && Number.isFinite(_t8)) {\n            out.x = _a2 * _p3.x + _b2 * _t7 * dur + _c2 * _t8 * dur + _d2 * _p4.x;\n          } else {\n            out.x = _p3.x;\n          }\n          _t7 = _tan.y, _t8 = _tan2.y;\n          if (Number.isFinite(_t7) && Number.isFinite(_t8)) {\n            out.y = _a2 * _p3.y + _b2 * _t7 * dur + _c2 * _t8 * dur + _d2 * _p4.y;\n          } else {\n            out.y = _p3.y;\n          }\n          _t7 = _tan.z, _t8 = _tan2.z;\n          if (Number.isFinite(_t7) && Number.isFinite(_t8)) {\n            out.z = _a2 * _p3.z + _b2 * _t7 * dur + _c2 * _t8 * dur + _d2 * _p4.z;\n          } else {\n            out.z = _p3.z;\n          }\n          return out;\n        }\n      case 4:\n        {\n          var _p5 = curKey.value;\n          var _tan3 = curKey.outTangent;\n          var _p6 = nextKey.value;\n          var _tan4 = nextKey.inTangent;\n          var _t9 = t * t;\n          var _t10 = _t9 * t;\n          var _a3 = 2.0 * _t10 - 3.0 * _t9 + 1.0;\n          var _b3 = _t10 - 2.0 * _t9 + t;\n          var _c3 = _t10 - _t9;\n          var _d3 = -2.0 * _t10 + 3.0 * _t9;\n          var _t11 = _tan3.x,\n            _t12 = _tan4.x;\n          if (Number.isFinite(_t11) && Number.isFinite(_t12)) {\n            out.x = _a3 * _p5.x + _b3 * _t11 * dur + _c3 * _t12 * dur + _d3 * _p6.x;\n          } else {\n            out.x = _p5.x;\n          }\n          _t11 = _tan3.y, _t12 = _tan4.y;\n          if (Number.isFinite(_t11) && Number.isFinite(_t12)) {\n            out.y = _a3 * _p5.y + _b3 * _t11 * dur + _c3 * _t12 * dur + _d3 * _p6.y;\n          } else {\n            out.y = _p5.y;\n          }\n          _t11 = _tan3.z, _t12 = _tan4.z;\n          if (Number.isFinite(_t11) && Number.isFinite(_t12)) {\n            out.z = _a3 * _p5.z + _b3 * _t11 * dur + _c3 * _t12 * dur + _d3 * _p6.z;\n          } else {\n            out.z = _p5.z;\n          }\n          _t11 = _tan3.w, _t12 = _tan4.w;\n          if (Number.isFinite(_t11) && Number.isFinite(_t12)) {\n            out.w = _a3 * _p5.w + _b3 * _t11 * dur + _c3 * _t12 * dur + _d3 * _p6.w;\n          } else {\n            out.w = _p5.w;\n          }\n          return out;\n        }\n    }\n  };\n  _createClass(AnimationCurve, [{\n    key: \"length\",\n    get:\n    /**\n     * Animation curve length in seconds.\n     */\n    function get() {\n      return this._length;\n    }\n  }]);\n  return AnimationCurve;\n}();\n\n/**\n * Keyframe.\n * @typeParam V - Type of Keyframe value\n */\nvar Keyframe = function Keyframe() {\n  this.time = void 0;\n  this.value = void 0;\n};\n\n/**\n * InterpolableKeyframe.\n * @typeParam T - Type of Tangent value\n * @typeParam V - Type of Keyframe value\n */\nvar InterpolableKeyframe = /*#__PURE__*/function (_Keyframe) {\n  _inheritsLoose(InterpolableKeyframe, _Keyframe);\n  function InterpolableKeyframe() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Keyframe.call.apply(_Keyframe, [this].concat(args)) || this;\n    _this.inTangent = void 0;\n    _this.outTangent = void 0;\n    return _this;\n  }\n  return InterpolableKeyframe;\n}(Keyframe);\n\nvar AnimatorConditionMode;\n(function (AnimatorConditionMode) {\n  AnimatorConditionMode[AnimatorConditionMode[\"If\"] = 0] = \"If\";\n  AnimatorConditionMode[AnimatorConditionMode[\"IfNot\"] = 1] = \"IfNot\";\n  AnimatorConditionMode[AnimatorConditionMode[\"Greater\"] = 2] = \"Greater\";\n  AnimatorConditionMode[AnimatorConditionMode[\"Less\"] = 3] = \"Less\";\n  AnimatorConditionMode[AnimatorConditionMode[\"Equals\"] = 4] = \"Equals\";\n  AnimatorConditionMode[AnimatorConditionMode[\"NotEquals\"] = 5] = \"NotEquals\";\n})(AnimatorConditionMode || (AnimatorConditionMode = {}));\n\n/**\n * SkyboxMaterial\n */\nvar SkyBoxMaterial = /*#__PURE__*/function (_Material) {\n  _inheritsLoose(SkyBoxMaterial, _Material);\n  function SkyBoxMaterial(engine) {\n    var _this;\n    _this = _Material.call(this, engine, Shader.find(\"skybox\")) || this;\n    _this._decodeParam = new Vector4(0, 5, 0, 0);\n    _this.renderState.rasterState.cullMode = CullMode.Off;\n    _this.renderState.depthState.compareFunction = CompareFunction.LessEqual;\n    _this.shaderData.setVector4(\"u_cubeDecodeParam\", _this._decodeParam);\n    return _this;\n  }\n  _createClass(SkyBoxMaterial, [{\n    key: \"textureDecodeRGBM\",\n    get:\n    /**\n     * Whether to decode from texture with RGBM format.\n     */\n    function get() {\n      return Boolean(this._decodeParam.x);\n    },\n    set: function set(value) {\n      this._decodeParam.x = Number(value);\n    }\n\n    /**\n     * RGBM decode factor, default 5.0.\n     */\n  }, {\n    key: \"RGBMDecodeFactor\",\n    get: function get() {\n      return this._decodeParam.y;\n    },\n    set: function set(value) {\n      this._decodeParam.y = value;\n    }\n\n    /**\n     * Texture cube map of the sky box material.\n     */\n  }, {\n    key: \"textureCubeMap\",\n    get: function get() {\n      return this.shaderData.getTexture(\"u_cube\");\n    },\n    set: function set(v) {\n      this.shaderData.setTexture(\"u_cube\", v);\n    }\n  }]);\n  return SkyBoxMaterial;\n}(Material);\n\nvar DirtyFlagType;\n/**\n * Blend mode enums of the particle renderer's material.\n */\n(function (DirtyFlagType) {\n  DirtyFlagType[DirtyFlagType[\"Position\"] = 1] = \"Position\";\n  DirtyFlagType[DirtyFlagType[\"Velocity\"] = 2] = \"Velocity\";\n  DirtyFlagType[DirtyFlagType[\"Acceleration\"] = 4] = \"Acceleration\";\n  DirtyFlagType[DirtyFlagType[\"Color\"] = 8] = \"Color\";\n  DirtyFlagType[DirtyFlagType[\"Alpha\"] = 16] = \"Alpha\";\n  DirtyFlagType[DirtyFlagType[\"Size\"] = 32] = \"Size\";\n  DirtyFlagType[DirtyFlagType[\"StartAngle\"] = 64] = \"StartAngle\";\n  DirtyFlagType[DirtyFlagType[\"StartTime\"] = 128] = \"StartTime\";\n  DirtyFlagType[DirtyFlagType[\"LifeTime\"] = 256] = \"LifeTime\";\n  DirtyFlagType[DirtyFlagType[\"RotateVelocity\"] = 512] = \"RotateVelocity\";\n  DirtyFlagType[DirtyFlagType[\"Scale\"] = 1024] = \"Scale\";\n  DirtyFlagType[DirtyFlagType[\"Everything\"] = 4294967295] = \"Everything\";\n})(DirtyFlagType || (DirtyFlagType = {}));\nvar ParticleRendererBlendMode;\n\n/**\n * Particle Renderer Component.\n */\n(function (ParticleRendererBlendMode) {\n  ParticleRendererBlendMode[ParticleRendererBlendMode[\"Transparent\"] = 0] = \"Transparent\";\n  ParticleRendererBlendMode[ParticleRendererBlendMode[\"Additive\"] = 1] = \"Additive\";\n})(ParticleRendererBlendMode || (ParticleRendererBlendMode = {}));\nvar ParticleRenderer = /*#__PURE__*/function (_MeshRenderer) {\n  _inheritsLoose(ParticleRenderer, _MeshRenderer);\n  /** The max number of indices that Uint16Array can support. */\n  ParticleRenderer._getRandom = function _getRandom() {\n    return Math.random() - 0.5;\n  };\n  function ParticleRenderer(props) {\n    var _this;\n    _this = _MeshRenderer.call(this, props) || this;\n    _this._vertexStride = void 0;\n    _this._vertices = void 0;\n    _this._vertexBuffer = void 0;\n    _this._maxCount = 1000;\n    _this._position = new Vector3();\n    _this._positionRandomness = new Vector3();\n    _this._positionArray = void 0;\n    _this._velocity = new Vector3();\n    _this._velocityRandomness = new Vector3();\n    _this._acceleration = new Vector3();\n    _this._accelerationRandomness = new Vector3();\n    _this._color = new Color(1, 1, 1, 1);\n    _this._colorRandomness = 0;\n    _this._size = 1;\n    _this._sizeRandomness = 0;\n    _this._alpha = 1;\n    _this._alphaRandomness = 0;\n    _this._startAngle = 0;\n    _this._startAngleRandomness = 0;\n    _this._rotateVelocity = 0;\n    _this._rotateVelocityRandomness = 0;\n    _this._lifetime = 5;\n    _this._startTimeRandomness = 0;\n    _this._scale = 1;\n    _this._isOnce = false;\n    _this._onceTime = 0;\n    _this._time = 0;\n    _this._isInit = false;\n    _this._isStart = false;\n    _this._updateDirtyFlag = DirtyFlagType.Everything;\n    _this._isRotateToVelocity = false;\n    _this._isUseOriginColor = false;\n    _this._isScaleByLifetime = false;\n    _this._is2d = true;\n    _this._isFadeIn = false;\n    _this._isFadeOut = false;\n    _this._playOnEnable = true;\n    _this._blendMode = ParticleRendererBlendMode.Transparent;\n    _this.spriteSheet = void 0;\n    _this.setMaterial(_this._createMaterial());\n    return _this;\n  }\n\n  /**\n   * @override\n   * @internal\n   */\n  var _proto = ParticleRenderer.prototype;\n  _proto.update = function update(deltaTime) {\n    if (!this._isInit || !this._isStart) {\n      return;\n    }\n\n    // Stop after play once\n    if (this._isOnce && this._time > this._onceTime) {\n      return this.stop();\n    }\n    if (this._updateDirtyFlag) {\n      this._updateBuffer();\n      this._updateDirtyFlag = 0;\n    }\n    this._time += deltaTime / 1000;\n    this.shaderData.setFloat(\"u_time\", this._time);\n  }\n\n  /**\n   * @override\n   * @internal\n   */;\n  _proto._onEnable = function _onEnable() {\n    _MeshRenderer.prototype._onEnable.call(this);\n    if (this._playOnEnable) {\n      this.start();\n    }\n  }\n\n  /**\n   * Start emitting.\n   */;\n  _proto.start = function start() {\n    this._isStart = true;\n    this._time = 0;\n  }\n\n  /**\n   * Stop emitting.\n   */;\n  _proto.stop = function stop() {\n    this._isStart = false;\n  };\n  _proto._createMaterial = function _createMaterial() {\n    var material = new Material(this.engine, Shader.find(\"particle-shader\"));\n    var renderState = material.renderState;\n    var target = renderState.blendState.targetBlendState;\n    target.enabled = true;\n    target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n    target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    target.sourceAlphaBlendFactor = BlendFactor.One;\n    target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n    renderState.depthState.writeEnabled = false;\n    material.renderQueueType = RenderQueueType.Transparent;\n    this.isUseOriginColor = true;\n    this.is2d = true;\n    this.isFadeOut = true;\n    return material;\n  };\n  _proto._createMesh = function _createMesh() {\n    var mesh = new BufferMesh(this._entity.engine, \"particleMesh\");\n    var vertexStride = 96;\n    var vertexCount = this._maxCount * 4;\n    var vertexFloatCount = vertexCount * vertexStride;\n    var vertices = new Float32Array(vertexFloatCount);\n    var indices = null;\n    var useUint32 = false;\n    if (vertexCount > ParticleRenderer._uint16VertexLimit) {\n      if (this.engine._hardwareRenderer.canIUse(GLCapabilityType.elementIndexUint)) {\n        useUint32 = true;\n        indices = new Uint32Array(6 * this._maxCount);\n      } else {\n        throw Error(\"The vertex count is over limit.\");\n      }\n    } else {\n      indices = new Uint16Array(6 * this._maxCount);\n    }\n    for (var i = 0, idx = 0; i < this._maxCount; ++i) {\n      var startIndex = i * 4;\n      indices[idx++] = startIndex;\n      indices[idx++] = startIndex + 1;\n      indices[idx++] = startIndex + 2;\n      indices[idx++] = startIndex;\n      indices[idx++] = startIndex + 2;\n      indices[idx++] = startIndex + 3;\n    }\n    var vertexElements = [new VertexElement(\"a_position\", 0, VertexElementFormat.Vector3, 0), new VertexElement(\"a_velocity\", 12, VertexElementFormat.Vector3, 0), new VertexElement(\"a_acceleration\", 24, VertexElementFormat.Vector3, 0), new VertexElement(\"a_color\", 36, VertexElementFormat.Vector4, 0), new VertexElement(\"a_lifeAndSize\", 52, VertexElementFormat.Vector4, 0), new VertexElement(\"a_rotation\", 68, VertexElementFormat.Vector2, 0), new VertexElement(\"a_uv\", 76, VertexElementFormat.Vector3, 0), new VertexElement(\"a_normalizedUv\", 88, VertexElementFormat.Vector2, 0)];\n    var vertexBuffer = new Buffer(this.engine, BufferBindFlag.VertexBuffer, vertexFloatCount * 4, BufferUsage.Dynamic);\n    var indexBuffer = new Buffer(this.engine, BufferBindFlag.IndexBuffer, indices, BufferUsage.Dynamic);\n    mesh.setVertexBufferBinding(vertexBuffer, vertexStride);\n    mesh.setIndexBufferBinding(indexBuffer, useUint32 ? IndexFormat.UInt32 : IndexFormat.UInt16);\n    mesh.setVertexElements(vertexElements);\n    mesh.addSubMesh(0, indices.length);\n    this._vertexBuffer = vertexBuffer;\n    this._vertexStride = vertexStride / 4;\n    this._vertices = vertices;\n    return mesh;\n  };\n  _proto._updateBuffer = function _updateBuffer() {\n    for (var x = 0; x < this._maxCount; x++) {\n      this._updateSingleBuffer(x);\n    }\n    this._vertexBuffer.setData(this._vertices);\n  };\n  _proto._updateSingleBuffer = function _updateSingleBuffer(i) {\n    var _updateDirtyFlag = this._updateDirtyFlag,\n      vertices = this._vertices,\n      vertexStride = this._vertexStride;\n    var getRandom = ParticleRenderer._getRandom;\n    var offset = i * 4;\n    var k0 = offset * vertexStride;\n    var k1 = (offset + 1) * vertexStride;\n    var k2 = (offset + 2) * vertexStride;\n    var k3 = (offset + 3) * vertexStride;\n    if (_updateDirtyFlag & DirtyFlagType.Position) {\n      var _this$_position = this._position,\n        x = _this$_position.x,\n        y = _this$_position.y,\n        z = _this$_position.z;\n      var _positionArray = this._positionArray,\n        _positionRandomness = this._positionRandomness;\n      if (_positionArray) {\n        if (_positionArray.length !== this._maxCount) {\n          throw Error(\"The length of positionArray must be equal to maxCount.\");\n        }\n        var pos = _positionArray[i];\n        x += pos.x;\n        y += pos.y;\n        z += pos.z;\n      } else {\n        x += getRandom() * _positionRandomness.x;\n        y += getRandom() * _positionRandomness.y;\n        z += getRandom() * _positionRandomness.z;\n      }\n      vertices[k0] = vertices[k1] = vertices[k2] = vertices[k3] = x;\n      vertices[k0 + 1] = vertices[k1 + 1] = vertices[k2 + 1] = vertices[k3 + 1] = y;\n      vertices[k0 + 2] = vertices[k1 + 2] = vertices[k2 + 2] = vertices[k3 + 2] = z;\n    }\n    if (_updateDirtyFlag & DirtyFlagType.Velocity) {\n      var _velocity = this._velocity,\n        _velocityRandomness = this._velocityRandomness;\n      vertices[k0 + 3] = vertices[k1 + 3] = vertices[k2 + 3] = vertices[k3 + 3] = _velocity.x + getRandom() * _velocityRandomness.x;\n      vertices[k0 + 4] = vertices[k1 + 4] = vertices[k2 + 4] = vertices[k3 + 4] = _velocity.y + getRandom() * _velocityRandomness.y;\n      vertices[k0 + 5] = vertices[k1 + 5] = vertices[k2 + 5] = vertices[k3 + 5] = _velocity.z + getRandom() * _velocityRandomness.z;\n    }\n    if (_updateDirtyFlag & DirtyFlagType.Acceleration) {\n      var _acceleration = this._acceleration,\n        _accelerationRandomness = this._accelerationRandomness;\n      vertices[k0 + 6] = vertices[k1 + 6] = vertices[k2 + 6] = vertices[k3 + 6] = _acceleration.x + getRandom() * _accelerationRandomness.x;\n      vertices[k0 + 7] = vertices[k1 + 7] = vertices[k2 + 7] = vertices[k3 + 7] = _acceleration.y + getRandom() * _accelerationRandomness.y;\n      vertices[k0 + 8] = vertices[k1 + 8] = vertices[k2 + 8] = vertices[k3 + 8] = _acceleration.z + getRandom() * _accelerationRandomness.z;\n    }\n    if (_updateDirtyFlag & DirtyFlagType.Color) {\n      var _color = this._color,\n        _colorRandomness = this._colorRandomness;\n      vertices[k0 + 9] = vertices[k1 + 9] = vertices[k2 + 9] = vertices[k3 + 9] = MathUtil.clamp(_color.r + getRandom() * _colorRandomness, 0, 1);\n      vertices[k0 + 10] = vertices[k1 + 10] = vertices[k2 + 10] = vertices[k3 + 10] = MathUtil.clamp(_color.g + getRandom() * _colorRandomness, 0, 1);\n      vertices[k0 + 11] = vertices[k1 + 11] = vertices[k2 + 11] = vertices[k3 + 11] = MathUtil.clamp(_color.b + getRandom() * _colorRandomness, 0, 1);\n    }\n    if (_updateDirtyFlag & DirtyFlagType.Alpha) {\n      vertices[k0 + 12] = vertices[k1 + 12] = vertices[k2 + 12] = vertices[k3 + 12] = MathUtil.clamp(this._alpha + getRandom() * this._alphaRandomness, 0, 1);\n    }\n    if (_updateDirtyFlag & DirtyFlagType.StartTime) {\n      vertices[k0 + 13] = vertices[k1 + 13] = vertices[k2 + 13] = vertices[k3 + 13] = Math.random() * this._startTimeRandomness;\n    }\n    if (_updateDirtyFlag & DirtyFlagType.LifeTime) {\n      var _lifetime = this._lifetime;\n      vertices[k0 + 14] = vertices[k1 + 14] = vertices[k2 + 14] = vertices[k3 + 14] = _lifetime + getRandom() * _lifetime;\n    }\n\n    // Update the duration of play once when startTime or lifetime changes.\n    if (_updateDirtyFlag & DirtyFlagType.StartTime || _updateDirtyFlag & DirtyFlagType.LifeTime) {\n      this._onceTime = Math.max(this._onceTime, vertices[k0 + 13] + vertices[k0 + 14]);\n    }\n    if (_updateDirtyFlag & DirtyFlagType.Size) {\n      var _size = this._size;\n      vertices[k0 + 15] = vertices[k1 + 15] = vertices[k2 + 15] = vertices[k3 + 15] = Math.max(_size + getRandom() * this._sizeRandomness * _size * 2, 0);\n    }\n    if (_updateDirtyFlag & DirtyFlagType.Scale) {\n      vertices[k0 + 16] = vertices[k1 + 16] = vertices[k2 + 16] = vertices[k3 + 16] = this._scale;\n    }\n    if (_updateDirtyFlag & DirtyFlagType.StartAngle) {\n      vertices[k0 + 17] = vertices[k1 + 17] = vertices[k2 + 17] = vertices[k3 + 17] = this._startAngle + getRandom() * Math.PI * this._startAngleRandomness * 2;\n    }\n    if (_updateDirtyFlag & DirtyFlagType.RotateVelocity) {\n      vertices[k0 + 18] = vertices[k1 + 18] = vertices[k2 + 18] = vertices[k3 + 18] = this._rotateVelocity + getRandom() * this._rotateVelocityRandomness;\n    }\n    this._updateSingleUv(i, k0, k1, k2, k3);\n  };\n  _proto._updateSingleUv = function _updateSingleUv(i, k0, k1, k2, k3) {\n    var spriteSheet = this.spriteSheet;\n    var texture = this.getMaterial().shaderData.getTexture(\"u_texture\");\n    var vertices = this._vertices;\n    if (texture) {\n      var width = texture.width;\n      var height = texture.height;\n      if (spriteSheet) {\n        var _spriteSheet = spriteSheet[i % spriteSheet.length],\n          x = _spriteSheet.x,\n          y = _spriteSheet.y,\n          w = _spriteSheet.w,\n          h = _spriteSheet.h;\n        var u = x / width;\n        var v = y / height;\n        var p = u + w / width;\n        var q = v + h / height;\n        var ratio = h / w;\n\n        // left bottom\n        vertices[k0 + 19] = u;\n        vertices[k0 + 20] = q;\n        vertices[k0 + 21] = ratio;\n\n        // right bottom\n        vertices[k1 + 19] = p;\n        vertices[k1 + 20] = q;\n        vertices[k1 + 21] = ratio;\n\n        // right top\n        vertices[k2 + 19] = p;\n        vertices[k2 + 20] = v;\n        vertices[k2 + 21] = ratio;\n\n        // left top\n        vertices[k3 + 19] = u;\n        vertices[k3 + 20] = v;\n        vertices[k3 + 21] = ratio;\n      } else {\n        var _ratio = height / width;\n\n        // left bottom\n        vertices[k0 + 19] = 0;\n        vertices[k0 + 20] = 1;\n        vertices[k0 + 21] = _ratio;\n\n        // right bottom\n        vertices[k1 + 19] = 1;\n        vertices[k1 + 20] = 1;\n        vertices[k1 + 21] = _ratio;\n\n        // right top\n        vertices[k2 + 19] = 1;\n        vertices[k2 + 20] = 0;\n        vertices[k2 + 21] = _ratio;\n\n        // left top\n        vertices[k3 + 19] = 0;\n        vertices[k3 + 20] = 0;\n        vertices[k3 + 21] = _ratio;\n      }\n    } else {\n      // left bottom\n      vertices[k0 + 19] = 0;\n      vertices[k0 + 20] = 0;\n      vertices[k0 + 21] = 1;\n\n      // right bottom\n      vertices[k1 + 19] = 1;\n      vertices[k1 + 20] = 0;\n      vertices[k1 + 21] = 1;\n\n      // right top\n      vertices[k2 + 19] = 1;\n      vertices[k2 + 20] = 1;\n      vertices[k2 + 21] = 1;\n\n      // left top\n      vertices[k3 + 19] = 0;\n      vertices[k3 + 20] = 1;\n      vertices[k3 + 21] = 1;\n    }\n    vertices[k0 + 22] = -0.5;\n    vertices[k0 + 23] = -0.5;\n    vertices[k1 + 22] = 0.5;\n    vertices[k1 + 23] = -0.5;\n    vertices[k2 + 22] = 0.5;\n    vertices[k2 + 23] = 0.5;\n    vertices[k3 + 22] = -0.5;\n    vertices[k3 + 23] = 0.5;\n  };\n  _createClass(ParticleRenderer, [{\n    key: \"texture\",\n    get:\n    /**\n     * Texture of particle.\n     */\n    function get() {\n      return this.getMaterial().shaderData.getTexture(\"u_texture\");\n    },\n    set: function set(texture) {\n      if (texture) {\n        this.shaderData.enableMacro(\"particleTexture\");\n        this.getMaterial().shaderData.setTexture(\"u_texture\", texture);\n      } else {\n        this.shaderData.disableMacro(\"particleTexture\");\n      }\n    }\n\n    /**\n     * Position of particles.\n     */\n  }, {\n    key: \"position\",\n    get: function get() {\n      return this._position;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Position;\n      this._position = value;\n    }\n\n    /**\n     * Random range of positions.\n     */\n  }, {\n    key: \"positionRandomness\",\n    get: function get() {\n      return this._positionRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Position;\n      this._positionRandomness = value;\n    }\n\n    /**\n     * Array of fixed positions.\n     */\n  }, {\n    key: \"positionArray\",\n    get: function get() {\n      return this._positionArray;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Position;\n      this._positionArray = value;\n    }\n\n    /**\n     * Velocity of particles.\n     */\n  }, {\n    key: \"velocity\",\n    get: function get() {\n      return this._velocity;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Velocity;\n      this._velocity = value;\n    }\n\n    /**\n     * Random range of velocity.\n     */\n  }, {\n    key: \"velocityRandomness\",\n    get: function get() {\n      return this._velocityRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Velocity;\n      this._velocityRandomness = value;\n    }\n\n    /**\n     * Acceleration of particles.\n     */\n  }, {\n    key: \"acceleration\",\n    get: function get() {\n      return this._acceleration;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Acceleration;\n      this._acceleration = value;\n    }\n\n    /**\n     * Random range of acceleration.\n     */\n  }, {\n    key: \"accelerationRandomness\",\n    get: function get() {\n      return this._accelerationRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Acceleration;\n      this._accelerationRandomness = value;\n    }\n\n    /**\n     * Color of particles.\n     */\n  }, {\n    key: \"color\",\n    get: function get() {\n      return this._color;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Color;\n      this._color = value;\n    }\n\n    /**\n     * Random range of color.\n     */\n  }, {\n    key: \"colorRandomness\",\n    get: function get() {\n      return this._colorRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Color;\n      this._colorRandomness = value;\n    }\n\n    /**\n     * Size of particles.\n     */\n  }, {\n    key: \"size\",\n    get: function get() {\n      return this._size;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Size;\n      this._size = value;\n    }\n\n    /**\n     * Random range of size.\n     */\n  }, {\n    key: \"sizeRandomness\",\n    get: function get() {\n      return this._sizeRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Size;\n      this._sizeRandomness = value;\n    }\n\n    /**\n     * Alpha of particles.\n     */\n  }, {\n    key: \"alpha\",\n    get: function get() {\n      return this._alpha;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Alpha;\n      this._alpha = value;\n    }\n\n    /**\n     * Random range of alpha.\n     */\n  }, {\n    key: \"alphaRandomness\",\n    get: function get() {\n      return this._alphaRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Alpha;\n      this._alphaRandomness = value;\n    }\n\n    /**\n     * Angle of particles.\n     */\n  }, {\n    key: \"angle\",\n    get: function get() {\n      return this._startAngle;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.StartAngle;\n      this._startAngle = value;\n    }\n\n    /**\n     * Random range of angle.\n     */\n  }, {\n    key: \"angleRandomness\",\n    get: function get() {\n      return this._startAngleRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.StartAngle;\n      this._startAngleRandomness = value;\n    }\n\n    /**\n     * Rotate velocity of particles.\n     */\n  }, {\n    key: \"rotateVelocity\",\n    get: function get() {\n      return this._rotateVelocity;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.RotateVelocity;\n      this._rotateVelocity = value;\n    }\n\n    /**\n     * Random range of rotate velocity.\n     */\n  }, {\n    key: \"rotateVelocityRandomness\",\n    get: function get() {\n      return this._rotateVelocityRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.RotateVelocity;\n      this._rotateVelocityRandomness = value;\n    }\n\n    /**\n     * Lifetime of particles.\n     */\n  }, {\n    key: \"lifetime\",\n    get: function get() {\n      return this._lifetime;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.LifeTime;\n      this._lifetime = value;\n      this._onceTime = 0;\n    }\n\n    /**\n     * Random range of start time.\n     */\n  }, {\n    key: \"startTimeRandomness\",\n    get: function get() {\n      return this._startTimeRandomness;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.StartTime;\n      this._startTimeRandomness = value;\n      this._onceTime = 0;\n    }\n\n    /**\n     * Scale factor of particles.\n     */\n  }, {\n    key: \"scale\",\n    get: function get() {\n      return this._scale;\n    },\n    set: function set(value) {\n      this._updateDirtyFlag |= DirtyFlagType.Scale;\n      this._scale = value;\n    }\n\n    /**\n     * Max count of particles.\n     */\n  }, {\n    key: \"maxCount\",\n    get: function get() {\n      return this._maxCount;\n    },\n    set: function set(value) {\n      this._isStart = false;\n      this._isInit = false;\n      this._maxCount = value;\n      this._updateDirtyFlag = DirtyFlagType.Everything;\n      this.mesh = this._createMesh();\n      this._updateBuffer();\n      this._isInit = true;\n      this.shaderData.setFloat(\"u_time\", 0);\n    }\n\n    /**\n     * Whether play once.\n     */\n  }, {\n    key: \"isOnce\",\n    get: function get() {\n      return this._isOnce;\n    },\n    set: function set(value) {\n      this._time = 0;\n      this.shaderData.setInt(\"u_once\", value ? 1 : 0);\n      this._isOnce = value;\n    }\n\n    /**\n     * Whether follow the direction of velocity.\n     */\n  }, {\n    key: \"isRotateToVelocity\",\n    get: function get() {\n      return this._isRotateToVelocity;\n    },\n    set: function set(value) {\n      if (value) {\n        this.shaderData.enableMacro(\"rotateToVelocity\");\n      } else {\n        this.shaderData.disableMacro(\"rotateToVelocity\");\n      }\n      this._isRotateToVelocity = value;\n    }\n\n    /**\n     * Whether use origin color.\n     */\n  }, {\n    key: \"isUseOriginColor\",\n    get: function get() {\n      return this._isUseOriginColor;\n    },\n    set: function set(value) {\n      if (value) {\n        this.shaderData.enableMacro(\"useOriginColor\");\n      } else {\n        this.shaderData.disableMacro(\"useOriginColor\");\n      }\n      this._isUseOriginColor = value;\n    }\n\n    /**\n     * Whether scale by lifetime.\n     */\n  }, {\n    key: \"isScaleByLifetime\",\n    get: function get() {\n      return this._isScaleByLifetime;\n    },\n    set: function set(value) {\n      if (value) {\n        this.shaderData.enableMacro(\"isScaleByLifetime\");\n      } else {\n        this.shaderData.disableMacro(\"isScaleByLifetime\");\n      }\n      this._isScaleByLifetime = value;\n    }\n\n    /**\n     * Whether 2D rendering.\n     */\n  }, {\n    key: \"is2d\",\n    get: function get() {\n      return this._is2d;\n    },\n    set: function set(value) {\n      if (value) {\n        this.shaderData.enableMacro(\"is2d\");\n      } else {\n        this.shaderData.disableMacro(\"is2d\");\n        this.getMaterial().renderState.rasterState.cullMode = CullMode.Off;\n      }\n      this._is2d = value;\n    }\n\n    /**\n     * Whether fade in.\n     */\n  }, {\n    key: \"isFadeIn\",\n    get: function get() {\n      return this._isFadeIn;\n    },\n    set: function set(value) {\n      if (value) {\n        this.shaderData.enableMacro(\"fadeIn\");\n      } else {\n        this.shaderData.disableMacro(\"fadeIn\");\n      }\n      this._isFadeIn = value;\n    }\n\n    /**\n     * Whether fade out.\n     */\n  }, {\n    key: \"isFadeOut\",\n    get: function get() {\n      return this._isFadeOut;\n    },\n    set: function set(value) {\n      if (value) {\n        this.shaderData.enableMacro(\"fadeOut\");\n      } else {\n        this.shaderData.disableMacro(\"fadeOut\");\n      }\n      this._isFadeOut = value;\n    }\n\n    /**\n     * Whether play on enable.\n     */\n  }, {\n    key: \"playOnEnable\",\n    get: function get() {\n      return this._playOnEnable;\n    },\n    set: function set(value) {\n      this._playOnEnable = value;\n      if (value) {\n        this.start();\n      } else {\n        this.stop();\n      }\n    }\n\n    /**\n     * Blend mode of the particle renderer's material.\n     */\n  }, {\n    key: \"blendMode\",\n    get: function get() {\n      return this._blendMode;\n    },\n    set: function set(value) {\n      var blendState = this.getMaterial().renderState.blendState;\n      var target = blendState.targetBlendState;\n      if (value === ParticleRendererBlendMode.Transparent) {\n        target.enabled = true;\n        target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n        target.destinationColorBlendFactor = BlendFactor.OneMinusSourceAlpha;\n        target.sourceAlphaBlendFactor = BlendFactor.One;\n        target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n      } else if (value === ParticleRendererBlendMode.Additive) {\n        target.enabled = true;\n        target.sourceColorBlendFactor = BlendFactor.SourceAlpha;\n        target.destinationColorBlendFactor = BlendFactor.One;\n        target.sourceAlphaBlendFactor = BlendFactor.One;\n        target.destinationAlphaBlendFactor = BlendFactor.OneMinusSourceAlpha;\n      }\n      this._blendMode = value;\n    }\n  }]);\n  return ParticleRenderer;\n}(MeshRenderer);\nParticleRenderer._uint16VertexLimit = 65535;\n\nvar FRAG_SHADER = \"#define GLSLIFY 1\\nvarying vec2 v_uv;uniform sampler2D u_texture;void main(void){gl_FragColor=texture2D(u_texture,v_uv);}\"; // eslint-disable-line\n\nvar VERT_SHADER = \"#define GLSLIFY 1\\nattribute vec3 POSITION;attribute vec2 TEXCOORD_0;varying vec2 v_uv;uniform mat4 u_projMat;uniform mat4 u_viewMat;void main(){gl_Position=u_projMat*u_viewMat*vec4(POSITION,1.0);v_uv=TEXCOORD_0;}\"; // eslint-disable-line\n\nShader.create(\"trail\", VERT_SHADER, FRAG_SHADER);\nvar TrailMaterial = /*#__PURE__*/function (_Material) {\n  _inheritsLoose(TrailMaterial, _Material);\n  function TrailMaterial(engine) {\n    var _this;\n    _this = _Material.call(this, engine, Shader.find(\"trail\")) || this;\n    var target = _this.renderState.blendState.targetBlendState;\n    target.enabled = true;\n    target.sourceColorBlendFactor = target.sourceAlphaBlendFactor = BlendFactor.SourceAlpha;\n    target.destinationColorBlendFactor = target.destinationAlphaBlendFactor = BlendFactor.One;\n    _this.renderState.depthState.writeEnabled = false;\n    return _this;\n  }\n  return TrailMaterial;\n}(Material);\n\nvar _tempVector3 = new Vector3();\n\n/**\n * @deprecated\n */\nvar TrailRenderer = /*#__PURE__*/function (_MeshRenderer) {\n  _inheritsLoose(TrailRenderer, _MeshRenderer);\n  /**\n   * @deprecated\n   */\n  function TrailRenderer(entity, props) {\n    var _this;\n    _this = _MeshRenderer.call(this, entity) || this;\n    _this._vertexStride = void 0;\n    _this._vertices = void 0;\n    _this._vertexBuffer = void 0;\n    _this._stroke = void 0;\n    _this._minSeg = void 0;\n    _this._lifetime = void 0;\n    _this._maxPointNum = void 0;\n    _this._points = void 0;\n    _this._pointStates = void 0;\n    _this._strapPoints = void 0;\n    _this._curPointNum = void 0;\n    _this._prePointsNum = void 0;\n    _this._stroke = props.stroke || 0.2;\n    _this._minSeg = props.minSeg || 0.02;\n    _this._lifetime = props.lifetime || 1000;\n    _this._maxPointNum = _this._lifetime / 1000.0 * entity.engine.targetFrameRate;\n    _this._points = [];\n    _this._pointStates = [];\n    _this._strapPoints = [];\n    for (var i = 0; i < _this._maxPointNum; i++) {\n      _this._points.push(new Vector3());\n      _this._pointStates.push(_this._lifetime);\n      _this._strapPoints.push(new Vector3());\n      _this._strapPoints.push(new Vector3());\n    }\n    _this._curPointNum = 0;\n    var mtl = props.material || new TrailMaterial(_this.engine);\n    _this.setMaterial(mtl);\n    _this.setTexture(props.texture);\n    _this._initGeometry();\n    return _this;\n  }\n\n  /**\n   * @internal\n   */\n  var _proto = TrailRenderer.prototype;\n  _proto.update = function update(deltaTime) {\n    var mov = 0,\n      newIdx = 0;\n    for (var i = 0; i < this._curPointNum; i++) {\n      this._pointStates[i] -= deltaTime;\n      if (this._pointStates[i] < 0) {\n        mov++;\n      } else if (mov > 0) {\n        newIdx = i - mov;\n\n        // Move data\n        this._pointStates[newIdx] = this._pointStates[i];\n\n        // Move point\n        this._points[newIdx].copyFrom(this._points[i]);\n      }\n    }\n    this._curPointNum -= mov;\n    var appendNewPoint = true;\n    if (this._curPointNum === this._maxPointNum) {\n      appendNewPoint = false;\n    } else if (this._curPointNum > 0) {\n      var lastPoint = this._points[this._points.length - 1];\n      if (Vector3.distance(this.entity.transform.worldPosition, lastPoint) < this._minSeg) {\n        appendNewPoint = false;\n      }\n    }\n    if (appendNewPoint) {\n      this._pointStates[this._curPointNum] = this._lifetime;\n      this._points[this._curPointNum].copyFrom(this.entity.transform.worldPosition);\n      this._curPointNum++;\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._render = function _render(camera) {\n    this._updateStrapVertices(camera, this._points);\n    this._updateStrapCoords();\n    this._vertexBuffer.setData(this._vertices);\n    _MeshRenderer.prototype._render.call(this, camera);\n  }\n\n  /**\n   * @deprecated\n   * Set trail texture.\n   * @param texture\n   */;\n  _proto.setTexture = function setTexture(texture) {\n    if (texture) {\n      this.getMaterial().shaderData.setTexture(\"u_texture\", texture);\n    }\n  };\n  _proto._initGeometry = function _initGeometry() {\n    var mesh = new BufferMesh(this._entity.engine);\n    var vertexStride = 20;\n    var vertexCount = this._maxPointNum * 2;\n    var vertexFloatCount = vertexCount * vertexStride;\n    var vertices = new Float32Array(vertexFloatCount);\n    var vertexElements = [new VertexElement(\"POSITION\", 0, VertexElementFormat.Vector3, 0), new VertexElement(\"TEXCOORD_0\", 12, VertexElementFormat.Vector2, 0)];\n    var vertexBuffer = new Buffer(this.engine, vertexFloatCount * 4, BufferUsage.Dynamic);\n    mesh.setVertexBufferBinding(vertexBuffer, vertexStride);\n    mesh.setVertexElements(vertexElements);\n    mesh.addSubMesh(0, vertexCount, MeshTopology.TriangleStrip);\n    this._vertexBuffer = vertexBuffer;\n    this._vertexStride = vertexStride;\n    this._vertices = vertices;\n    this.mesh = mesh;\n  };\n  _proto._updateStrapVertices = function _updateStrapVertices(camera, points) {\n    var m = camera.viewMatrix;\n    var e = m.elements;\n    var vx = new Vector3(e[0], e[4], e[8]);\n    var vy = new Vector3(e[1], e[5], e[9]);\n    var vz = new Vector3(e[2], e[6], e[10]);\n    var s = this._stroke;\n    vy.scale(s);\n    var up = new Vector3();\n    var down = new Vector3();\n    var rotation = new Quaternion();\n    Vector3.transformByQuat(vx, rotation, vx);\n    Vector3.transformByQuat(vy, rotation, vy);\n    var dy = new Vector3();\n    var cross = new Vector3();\n    var perpVector = new Vector3();\n    vx.normalize();\n    var vertices = this._vertices;\n    //-- quad pos\n    for (var i = 0; i < this._maxPointNum; i++) {\n      //-- center pos\n      if (i < this._curPointNum) {\n        var p = points[i];\n        if (i === this._curPointNum - 1 && i !== 0) {\n          Vector3.subtract(p, points[i - 1], perpVector);\n        } else {\n          Vector3.subtract(points[i + 1], p, perpVector);\n        }\n        this._projectOnPlane(perpVector, vz, perpVector);\n        perpVector.normalize();\n\n        // Calculate angle between vectors\n        var angle = Math.acos(Vector3.dot(vx, perpVector));\n        Vector3.cross(vx, perpVector, cross);\n        if (Vector3.dot(cross, vz) <= 0) {\n          angle = Math.PI * 2 - angle;\n        }\n        Quaternion.rotationAxisAngle(vz, angle, rotation);\n        Vector3.transformByQuat(vy, rotation, dy);\n        Vector3.add(p, dy, up);\n        Vector3.subtract(p, dy, down);\n      }\n      var p0 = i * 2 * this._vertexStride / 4;\n      var p1 = (i * 2 + 1) * this._vertexStride / 4;\n      vertices[p0] = up.x;\n      vertices[p0 + 1] = up.y;\n      vertices[p0 + 2] = up.z;\n      vertices[p1] = down.x;\n      vertices[p1 + 1] = down.y;\n      vertices[p1 + 2] = down.z;\n    }\n  };\n  _proto._updateStrapCoords = function _updateStrapCoords() {\n    if (this._prePointsNum === this._curPointNum) {\n      return;\n    }\n    this._prePointsNum = this._curPointNum;\n    var count = this._curPointNum;\n    var texDelta = 1.0 / count;\n    var vertices = this._vertices;\n    for (var i = 0; i < count; i++) {\n      var d = 1.0 - i * texDelta;\n      var p0 = i * 2 * this._vertexStride / 4;\n      var p1 = (i * 2 + 1) * this._vertexStride / 4;\n      vertices[p0] = 0;\n      vertices[p0 + 1] = d;\n      vertices[p1] = 1.0;\n      vertices[p1 + 1] = d;\n    }\n  };\n  _proto._projectOnVector = function _projectOnVector(a, p, out) {\n    var n_p = p.clone();\n    Vector3.normalize(n_p, n_p);\n    var cosine = Vector3.dot(a, n_p);\n    out.x = n_p.x * cosine;\n    out.y = n_p.y * cosine;\n    out.z = n_p.z * cosine;\n  };\n  _proto._projectOnPlane = function _projectOnPlane(a, n, out) {\n    this._projectOnVector(a, n, _tempVector3);\n    Vector3.subtract(a, _tempVector3, out);\n  };\n  return TrailRenderer;\n}(MeshRenderer);\n\n/**\n * Fog.\n */\nvar Fog = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Fog, _Component);\n  /**\n   * @internal\n   */\n  function Fog(entity) {\n    var _this;\n    _this = _Component.call(this, entity) || this;\n    _this._color = new Color(1, 0, 0, 1);\n    _this.color = _this._color;\n    return _this;\n  }\n\n  /**\n   * @internal\n   * @override\n   */\n  var _proto = Fog.prototype;\n  _proto._onEnable = function _onEnable() {\n    this.scene.shaderData.enableMacro(\"O3_HAS_FOG\");\n  }\n\n  /**\n   * @internal\n   * @override\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.scene.shaderData.disableMacro(\"O3_HAS_FOG\");\n  };\n  _createClass(Fog, [{\n    key: \"color\",\n    get:\n    /**\n     * Fog color.\n     */\n    function get() {\n      return this._color;\n    },\n    set: function set(value) {\n      this._color = value;\n      this.scene.shaderData.setColor(Fog._colorProperty, value);\n    }\n  }]);\n  return Fog;\n}(Component);\nFog._colorProperty = Shader.getPropertyByName(\"u_fogColor\");\n\n/**\n * Exponential fog.\n */\nvar EXP2Fog = /*#__PURE__*/function (_Fog) {\n  _inheritsLoose(EXP2Fog, _Fog);\n  function EXP2Fog(entity) {\n    var _this;\n    _this = _Fog.call(this, entity) || this;\n    _this._density = 0.0025;\n    _this.density = _this._density;\n    return _this;\n  }\n  /**\n   * @internal\n   * @override\n   */\n  var _proto = EXP2Fog.prototype;\n  _proto._onEnable = function _onEnable() {\n    this.scene.shaderData.enableMacro(\"O3_FOG_EXP2\");\n  }\n\n  /**\n   * @internal\n   * @override\n   */;\n  _proto._onDisable = function _onDisable() {\n    this.scene.shaderData.disableMacro(\"O3_FOG_EXP2\");\n  };\n  _createClass(EXP2Fog, [{\n    key: \"density\",\n    get:\n    /**\n     * Density of fog.\n     */\n    function get() {\n      return this._density;\n    },\n    set: function set(value) {\n      this._density = value;\n      this.scene.shaderData.setFloat(EXP2Fog._densityProperty, value);\n    }\n  }]);\n  return EXP2Fog;\n}(Fog);\nEXP2Fog._densityProperty = Shader.getPropertyByName(\"u_fogDensity\");\n\n/**\n * Linear fog, according to the distance of the camera linear difference fog density.\n */\nvar LinearFog = /*#__PURE__*/function (_Fog) {\n  _inheritsLoose(LinearFog, _Fog);\n  function LinearFog(entity) {\n    var _this;\n    _this = _Fog.call(this, entity) || this;\n    _this._near = 1;\n    _this._far = 1000;\n    _this.near = _this._near;\n    _this.far = _this._far;\n    return _this;\n  }\n  _createClass(LinearFog, [{\n    key: \"near\",\n    get:\n    /**\n     * Start of fog.\n     */\n    function get() {\n      return this._near;\n    },\n    set: function set(value) {\n      this._near = value;\n      this.scene.shaderData.setFloat(LinearFog._nearProperty, value);\n    }\n\n    /**\n     * End of fog.\n     */\n  }, {\n    key: \"far\",\n    get: function get() {\n      return this._far;\n    },\n    set: function set(value) {\n      this._far = value;\n      this.scene.shaderData.setFloat(LinearFog._farProperty, value);\n    }\n  }]);\n  return LinearFog;\n}(Fog);\nLinearFog._nearProperty = Shader.getPropertyByName(\"u_fogNear\");\nLinearFog._farProperty = Shader.getPropertyByName(\"u_fogFar\");\n\n/**\n * Environmental probes, providing necessary capabilities such as reflection and refraction.\n * @example\n * ```ts\n * const probe = cameraEntity.addComponent( CubeProbe )\n * probe.onTextureChange = cubeTexture => {\n *   envLight.specularTexture = cubeTexture;\n *   skybox.specularTexture = cubeTexture;\n * }\n * ```\n */\nvar Probe = /*#__PURE__*/function (_Script) {\n  _inheritsLoose(Probe, _Script);\n  function Probe() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Script.call.apply(_Script, [this].concat(args)) || this;\n    _this.probeLayer = Layer.Everything;\n    _this.width = 1024;\n    _this.height = 1024;\n    _this.antiAliasing = 1;\n    _this._isCube = false;\n    _this._oriCameraRenderTarget = void 0;\n    _this._renderTarget = void 0;\n    _this._renderTargetSwap = void 0;\n    _this._activeRenderTarget = void 0;\n    _this._camera = void 0;\n    _this._oriCameraCullingMask = void 0;\n    return _this;\n  }\n  var _proto = Probe.prototype;\n  /**\n   * Provide hooks for users to exchange Texture.\n   * @remarks Prevent issue: Feedback Loops Between Textures and the Framebuffer.\n   */\n  _proto.onTextureChange = function onTextureChange(renderColorTexture) {}\n\n  /**\n   * @override\n   */;\n  _proto.onBeginRender = function onBeginRender(camera) {\n    if (!this.enabled) return;\n    this._camera = camera;\n    this._oriCameraCullingMask = camera.cullingMask;\n    camera.cullingMask = this.probeLayer;\n    if (!this._activeRenderTarget || this._activeRenderTarget.width !== this.width || this._activeRenderTarget.height !== this.height || this._activeRenderTarget.antiAliasing !== this.antiAliasing) {\n      this._renderTarget = new RenderTarget(this.engine, this.width, this.height, this._isCube ? new TextureCube(this.engine, this.width) : new Texture2D(this.engine, this.width, this.height), RenderBufferDepthFormat.Depth, this.antiAliasing);\n      this._renderTargetSwap = new RenderTarget(this.engine, this.width, this.height, this._isCube ? new TextureCube(this.engine, this.width) : new Texture2D(this.engine, this.width, this.height), RenderBufferDepthFormat.Depth, this.antiAliasing);\n      this._activeRenderTarget = this._renderTarget;\n    }\n    this._oriCameraRenderTarget = camera.renderTarget;\n    camera.renderTarget = this._activeRenderTarget;\n  }\n\n  /**\n   * @override\n   */;\n  _proto.onEndRender = function onEndRender(camera) {\n    if (!this.enabled) return;\n    this.onTextureChange && this.onTextureChange(this._texture);\n    this._activeRenderTarget = this._activeRenderTarget === this._renderTarget ? this._renderTargetSwap : this._renderTarget;\n  };\n  _proto._reset = function _reset() {\n    if (!this.enabled) return;\n    this._camera.renderTarget = this._oriCameraRenderTarget;\n    this._camera.cullingMask = this._oriCameraCullingMask;\n  };\n  _createClass(Probe, [{\n    key: \"_texture\",\n    get: function get() {\n      var _this$_activeRenderTa;\n      return (_this$_activeRenderTa = this._activeRenderTarget) === null || _this$_activeRenderTa === void 0 ? void 0 : _this$_activeRenderTa.getColorTexture();\n    }\n  }]);\n  return Probe;\n}(Script);\n\nvar cacheTarget = new Vector3();\nvar cacheUp = new Vector3();\nvar cacheDir = new Vector3();\n\n/**\n * Cube probe, generate cubeTexture, used for dynamic environment reflection and other effects.\n */\nvar CubeProbe = /*#__PURE__*/function (_Probe) {\n  _inheritsLoose(CubeProbe, _Probe);\n  function CubeProbe() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Probe.call.apply(_Probe, [this].concat(args)) || this;\n    _this.position = new Vector3(0, 0, 0);\n    _this._isCube = true;\n    _this.oriViewMatrix = new Matrix();\n    _this._oriFieldOfView = void 0;\n    return _this;\n  }\n  var _proto = CubeProbe.prototype;\n  /**\n   * @override\n   */\n  _proto.onBeginRender = function onBeginRender(camera) {\n    if (!this.enabled) return;\n    _Probe.prototype.onBeginRender.call(this, camera);\n    this._storeCamera(camera);\n\n    // Render 6 faces\n    for (var faceIndex = 0; faceIndex < 6; faceIndex++) {\n      // Change camera parameters\n      this._setCamera(faceIndex, camera);\n      camera.render(TextureCubeFace.PositiveX + faceIndex);\n    }\n    this._restoreCamera(camera);\n    _Probe.prototype._reset.call(this);\n  }\n\n  /**\n   * Store original camera parameters.\n   */;\n  _proto._storeCamera = function _storeCamera(camera) {\n    this.oriViewMatrix.copyFrom(camera.viewMatrix);\n    this._oriFieldOfView = camera.fieldOfView;\n  }\n\n  /**\n   * Restore camera parameters.\n   */;\n  _proto._restoreCamera = function _restoreCamera(camera) {\n    camera.viewMatrix.copyFrom(this.oriViewMatrix);\n    camera.fieldOfView = this._oriFieldOfView;\n  }\n\n  /**\n   * Set camera parameters according to the rendering surface.\n   */;\n  _proto._setCamera = function _setCamera(faceIndex, camera) {\n    switch (faceIndex) {\n      // positive_x\n      case 0:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(1, 0, 0);\n        break;\n      // negative_x\n      case 1:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(-1, 0, 0);\n        break;\n      // positive_y\n      case 2:\n        cacheUp.set(0, 0, 1);\n        cacheDir.set(0, 1, 0);\n        break;\n      // negative_y\n      case 3:\n        cacheUp.set(0, 0, -1);\n        cacheDir.set(0, -1, 0);\n        break;\n      // positive_z\n      case 4:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(0, 0, 1);\n        break;\n      // negative_z\n      case 5:\n        cacheUp.set(0, -1, 0);\n        cacheDir.set(0, 0, -1);\n        break;\n    }\n    Vector3.add(this.position, cacheDir, cacheTarget);\n    Matrix.lookAt(this.position, cacheTarget, cacheUp, camera.viewMatrix);\n    camera.fieldOfView = 90;\n  };\n  return CubeProbe;\n}(Probe);\n\n/**\n * Shadow manager.\n */\nvar LightShadow = /*#__PURE__*/function () {\n  /**\n   * @internal\n   */\n  LightShadow._updateShaderData = function _updateShaderData(shaderData) {\n    var data = LightShadow._combinedData;\n    shaderData.setFloatArray(LightShadow._viewMatFromLightProperty, data.viewMatrix);\n    shaderData.setFloatArray(LightShadow._projMatFromLightProperty, data.projectionMatrix);\n    shaderData.setFloatArray(LightShadow._shadowBiasProperty, data.bias);\n    shaderData.setFloatArray(LightShadow._shadowIntensityProperty, data.intensity);\n    shaderData.setFloatArray(LightShadow._shadowRadiusProperty, data.radius);\n    shaderData.setFloatArray(LightShadow._shadowMapSizeProperty, data.mapSize);\n    shaderData.setTextureArray(LightShadow._shadowMapsProperty, data.map);\n  }\n\n  /**\n   * Clear all shadow maps.\n   */;\n  LightShadow.clearMap = function clearMap() {\n    LightShadow._combinedData.map.length = 0;\n  };\n  function LightShadow(light, props) {\n    if (props === void 0) {\n      props = {\n        engine: null,\n        width: 512,\n        height: 512\n      };\n    }\n    this._mapSize = void 0;\n    this._renderTarget = void 0;\n    this.light = void 0;\n    this.bias = 0.005;\n    this.intensity = 0.2;\n    this.radius = 1;\n    this.projectionMatrix = new Matrix();\n    this.light = light;\n    var _props = props,\n      engine = _props.engine,\n      width = _props.width,\n      height = _props.height;\n    this._mapSize = new Vector2(width, height);\n    this._renderTarget = new RenderTarget(engine, width, height, new Texture2D(engine, width, height));\n  }\n\n  /**\n   * The RenderTarget corresponding to the shadow map.\n   */\n  var _proto = LightShadow.prototype;\n  /**\n   * Initialize the projection matrix for lighting.\n   * @param light - The light to generate shadow\n   */\n  _proto.initShadowProjectionMatrix = function initShadowProjectionMatrix(light) {\n    /**\n     * Directional light projection matrix, the default coverage area is left: -5, right: 5, bottom: -5, up: 5, near: 0.5, far: 50.\n     */\n    if (light instanceof DirectLight) {\n      Matrix.ortho(-5, 5, -5, 5, 0.1, 50, this.projectionMatrix);\n    }\n\n    /**\n     * Point light projection matrix, default configuration: fov: 50, aspect: 1, near: 0.5, far: 50.\n     */\n    if (light instanceof PointLight) {\n      Matrix.perspective(MathUtil.degreeToRadian(50), 1, 0.5, 50, this.projectionMatrix);\n    }\n\n    /**\n     * Spotlight projection matrix, the default configuration: fov: this.angle * 2 * Math.sqrt(2), aspect: 1, near: 0.1, far: this.distance + 5\n     */\n    if (light instanceof SpotLight) {\n      var fov = Math.min(Math.PI / 2, light.angle * 2 * Math.sqrt(2));\n      Matrix.perspective(fov, 1, 0.1, light.distance + 5, this.projectionMatrix);\n    }\n  };\n  _proto.appendData = function appendData(lightIndex) {\n    var viewStart = lightIndex * 16;\n    var projectionStart = lightIndex * 16;\n    var biasStart = lightIndex;\n    var intensityStart = lightIndex;\n    var radiusStart = lightIndex;\n    var mapSizeStart = lightIndex * 2;\n    var mapStart = lightIndex;\n    var data = LightShadow._combinedData;\n    data.viewMatrix.set(this.light.viewMatrix.elements, viewStart);\n    data.projectionMatrix.set(this.projectionMatrix.elements, projectionStart);\n    data.bias[biasStart] = this.bias;\n    data.intensity[intensityStart] = this.intensity;\n    data.radius[radiusStart] = this.radius;\n    data.mapSize[mapSizeStart] = this.mapSize.x;\n    data.mapSize[mapSizeStart + 1] = this.mapSize.y;\n    data.map[mapStart] = this.map;\n  };\n  _createClass(LightShadow, [{\n    key: \"renderTarget\",\n    get: function get() {\n      return this._renderTarget;\n    }\n\n    /**\n     * Shadow map's color render texture.\n     */\n  }, {\n    key: \"map\",\n    get: function get() {\n      return this._renderTarget.getColorTexture();\n    }\n\n    /**\n     * Shadow map size.\n     */\n  }, {\n    key: \"mapSize\",\n    get: function get() {\n      return this._mapSize;\n    }\n  }]);\n  return LightShadow;\n}();\nLightShadow._viewMatFromLightProperty = Shader.getPropertyByName(\"u_viewMatFromLight\");\nLightShadow._projMatFromLightProperty = Shader.getPropertyByName(\"u_projMatFromLight\");\nLightShadow._shadowBiasProperty = Shader.getPropertyByName(\"u_shadowBias\");\nLightShadow._shadowIntensityProperty = Shader.getPropertyByName(\"u_shadowIntensity\");\nLightShadow._shadowRadiusProperty = Shader.getPropertyByName(\"u_shadowRadius\");\nLightShadow._shadowMapSizeProperty = Shader.getPropertyByName(\"u_shadowMapSize\");\nLightShadow._shadowMapsProperty = Shader.getPropertyByName(\"u_shadowMaps\");\nLightShadow._maxLight = 3;\nLightShadow._combinedData = {\n  viewMatrix: new Float32Array(16 * LightShadow._maxLight),\n  projectionMatrix: new Float32Array(16 * LightShadow._maxLight),\n  bias: new Float32Array(LightShadow._maxLight),\n  intensity: new Float32Array(LightShadow._maxLight),\n  radius: new Float32Array(LightShadow._maxLight),\n  mapSize: new Float32Array(2 * LightShadow._maxLight),\n  map: []\n};\n\n/**\n * Set whether the light to generate shadows.\n */\nObject.defineProperty(Light.prototype, \"enableShadow\", {\n  get: function get() {\n    return this._enableShadow;\n  },\n  set: function set(enabled) {\n    this._enableShadow = enabled;\n    if (this._enableShadow) {\n      if (this instanceof AmbientLight) {\n        this._enableShadow = false;\n        Logger.warn(\"Has no shadow!\");\n        return;\n      }\n      this.shadow = this.shadow || new LightShadow(this, {\n        engine: this.engine,\n        width: 512,\n        height: 512\n      });\n      this.shadow.initShadowProjectionMatrix(this);\n    }\n  }\n});\n\n/**\n * Set whether the renderer to receive shadows.\n */\nObject.defineProperty(Component.prototype, \"receiveShadow\", {\n  get: function get() {\n    return this._receiveShadow;\n  },\n  set: function set(enabled) {\n    this._receiveShadow = enabled;\n  }\n});\n\n/**\n * Set whether the renderer to cast shadows.\n */\nObject.defineProperty(Component.prototype, \"castShadow\", {\n  get: function get() {\n    return this._castShadow;\n  },\n  set: function set(enabled) {\n    this._castShadow = enabled;\n  }\n});\n\n/**\n * Shadow Map material.\n */\nvar ShadowMapMaterial = /*#__PURE__*/function (_Material) {\n  _inheritsLoose(ShadowMapMaterial, _Material);\n  function ShadowMapMaterial(engine) {\n    var _this;\n    _this = _Material.call(this, engine, Shader.find(\"shadow-map\")) || this;\n    _this.shaderData.enableMacro(\"O3_GENERATE_SHADOW_MAP\");\n    return _this;\n  }\n  return ShadowMapMaterial;\n}(Material);\n\n/**\n * RenderPass for rendering shadow map.\n */\nvar ShadowMapPass = /*#__PURE__*/function (_RenderPass) {\n  _inheritsLoose(ShadowMapPass, _RenderPass);\n  /**\n   * Constructor.\n   * @param light  - The light that the shadow belongs to\n   */\n  function ShadowMapPass(name, priority, renderTarget, replaceMaterial, mask, light) {\n    var _this;\n    _this = _RenderPass.call(this, name, priority, renderTarget, replaceMaterial, mask) || this;\n    _this.light = void 0;\n    _this.light = light;\n    _this.clearColor = new Color(1, 1, 1, 1);\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = ShadowMapPass.prototype;\n  _proto.preRender = function preRender(camera, queue) {\n    // The viewProjection matrix from the light.\n    var shaderData = this.replaceMaterial.shaderData;\n    shaderData.setMatrix(ShadowMapPass._viewMatFromLightProperty, this.light.viewMatrix);\n    shaderData.setMatrix(ShadowMapPass._projMatFromLightProperty, this.light.shadow.projectionMatrix);\n  };\n  return ShadowMapPass;\n}(RenderPass);\nShadowMapPass._viewMatFromLightProperty = Shader.getPropertyByName(\"u_viewMatFromLight\");\nShadowMapPass._projMatFromLightProperty = Shader.getPropertyByName(\"u_projMatFromLight\");\n\n/**\n * Shadow material.\n */\nvar ShadowMaterial = /*#__PURE__*/function (_Material) {\n  _inheritsLoose(ShadowMaterial, _Material);\n  function ShadowMaterial(engine) {\n    var _this;\n    _this = _Material.call(this, engine, Shader.find(\"shadow\")) || this;\n    var targetBlendState = _this.renderState.blendState.targetBlendState;\n    targetBlendState.enabled = true;\n    targetBlendState.sourceColorBlendFactor = targetBlendState.sourceAlphaBlendFactor = BlendFactor.DestinationColor;\n    targetBlendState.destinationColorBlendFactor = targetBlendState.destinationAlphaBlendFactor = BlendFactor.Zero;\n    _this.renderState.depthState.compareFunction = CompareFunction.LessEqual;\n    _this.renderQueueType = RenderQueueType.Transparent;\n    return _this;\n  }\n  return ShadowMaterial;\n}(Material);\n\n/**\n * RenderPass for rendering shadow.\n */\nvar ShadowPass = /*#__PURE__*/function (_RenderPass) {\n  _inheritsLoose(ShadowPass, _RenderPass);\n  function ShadowPass() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _RenderPass.call.apply(_RenderPass, [this].concat(args)) || this;\n    _this.clearFlags = CameraClearFlags.None;\n    return _this;\n  }\n\n  /**\n   * @override\n   */\n  var _proto = ShadowPass.prototype;\n  _proto.preRender = function preRender(camera, queue) {\n    this.enabled = false;\n    var lightMgr = camera.scene.findFeature(LightFeature);\n    var lights = lightMgr.visibleLights;\n    var shaderData = this.replaceMaterial.shaderData;\n\n    // keep render based on default render pass\n    var pass = camera._renderPipeline.defaultRenderPass;\n    this.renderTarget = pass.renderTarget;\n    var shadowMapCount = 0;\n    LightShadow.clearMap();\n    for (var i = 0, len = lights.length; i < len; i++) {\n      var lgt = lights[i];\n      if (lgt.enableShadow) {\n        lgt.shadow.appendData(shadowMapCount++);\n      }\n    }\n    if (shadowMapCount) {\n      this.enabled = true;\n      LightShadow._updateShaderData(shaderData);\n      shaderData.enableMacro(\"O3_SHADOW_MAP_COUNT\", shadowMapCount.toString());\n    } else {\n      shaderData.disableMacro(\"O3_SHADOW_MAP_COUNT\");\n    }\n  };\n  return ShadowPass;\n}(RenderPass);\n\n/**\n * Shadow plug-in.\n */\nvar ShadowFeature = /*#__PURE__*/function (_SceneFeature) {\n  _inheritsLoose(ShadowFeature, _SceneFeature);\n  function ShadowFeature() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _SceneFeature.call.apply(_SceneFeature, [this].concat(args)) || this;\n    _this._shadowPass = void 0;\n    _this._shadowMapMaterial = void 0;\n    return _this;\n  }\n  var _proto = ShadowFeature.prototype;\n  /**\n   * @override\n   */\n  _proto.preRender = function preRender(scene, camera) {\n    var lights = scene.findFeature(LightFeature).visibleLights;\n    if (lights.length > 0) {\n      // Check RenderPass for rendering shadows.\n      if (!this._shadowPass) {\n        this.addShadowPass(camera);\n      }\n\n      // Check RenderPass for rendering shadow map.\n      var renderPipeline = camera._renderPipeline;\n      for (var i = 0, len = lights.length; i < len; i++) {\n        var lgt = lights[i];\n        if (lgt.enableShadow && !lgt.shadowMapPass) {\n          lgt.shadowMapPass = this.addShadowMapPass(camera, lgt);\n        } else if (!lgt.enableShadow && lgt.shadowMapPass) {\n          renderPipeline.removeRenderPass(lgt.shadowMapPass);\n          lgt.shadowMapPass = null;\n        }\n      }\n      this.updatePassRenderFlag(renderPipeline._opaqueQueue);\n      this.updatePassRenderFlag(renderPipeline._alphaTestQueue);\n      this.updatePassRenderFlag(renderPipeline._transparentQueue);\n    }\n  }\n\n  /**\n   * Add RenderPass for rendering shadows.\n   * @param camera - The camera for rendering\n   */;\n  _proto.addShadowPass = function addShadowPass(camera) {\n    var shadowMaterial = new ShadowMaterial(camera.engine);\n    this._shadowPass = new ShadowPass(\"ShadowPass\", 1, null, shadowMaterial, Layer.Layer30); // SHADOW\n    var renderer = camera._renderPipeline;\n    renderer.addRenderPass(this._shadowPass);\n  }\n\n  /**\n   * Add RenderPass for rendering shadow map.\n   * @param camera - The camera for rendering\n   * @param light - The light that the shadow belongs to\n   */;\n  _proto.addShadowMapPass = function addShadowMapPass(camera, light) {\n    // Share shadow map material.\n    this._shadowMapMaterial = this._shadowMapMaterial || new ShadowMapMaterial(camera.engine);\n    var shadowMapPass = new ShadowMapPass(\"ShadowMapPass\", -1, light.shadow.renderTarget, this._shadowMapMaterial, Layer.Layer31,\n    // SHADOW_MAP\n    light);\n    var renderer = camera._renderPipeline;\n    renderer.addRenderPass(shadowMapPass);\n    return shadowMapPass;\n  }\n\n  /**\n   * Update the renderPassFlag state of renderers in the scene.\n   * @param renderQueue - Render queue\n   */;\n  _proto.updatePassRenderFlag = function updatePassRenderFlag(renderQueue) {\n    var items = renderQueue.items;\n    for (var i = 0, len = items.length; i < len; i++) {\n      var item = items[i];\n      var component = item.component;\n      var receiveShadow = component.receiveShadow;\n      var castShadow = component.castShadow;\n      if (receiveShadow === true) {\n        component.entity.layer |= Layer.Layer30; //SHADOW;\n      } else if (receiveShadow === false) {\n        component.entity.layer &= ~Layer.Layer30; //SHADOW;\n      }\n\n      if (castShadow === true) {\n        component.entity.layer |= Layer.Layer31; //SHADOW_MAP;\n      } else if (castShadow === false) {\n        component.entity.layer &= ~Layer.Layer31; //SHADOW_MAP;\n      }\n    }\n  };\n  return ShadowFeature;\n}(SceneFeature);\n\nScene.registerFeature(ShadowFeature);\n\nScene.registerFeature(LightFeature);\nScene.prototype.hasLight = hasLight;\n\nexport { AmbientLight, AnimationClip, AnimationClipCurveBinding, AnimationCurve, AnimationEvent, AnimationProperty, Animator, AnimatorConditionMode, AnimatorController, AnimatorControllerLayer, AnimatorLayerBlendingMode, AnimatorState, AnimatorStateMachine, AnimatorStateTransition, AssetPromise, AssetPromiseStatus, AssetType, Background, BackgroundMode, BackgroundTextureFillMode, BaseMaterial, BasicRenderPipeline, BlendFactor, BlendMode, BlendOperation, BlendShape, BlendShapeFrame, BlinnPhongMaterial, BoolUpdateFlag, BoxColliderShape, Buffer, BufferBindFlag, BufferMesh, BufferUsage, BufferUtil, Camera, CameraClearFlags, CapsuleColliderShape, CharacterController, CloneManager, Collider, ColliderShape, ColliderShapeUpAxis, CollisionDetectionMode, ColorSpace, ColorWriteMask, CompareFunction, Component, ControllerCollisionFlag, ControllerNonWalkableMode, CubeProbe, CullMode, DataType, DiffuseMode, DirectLight, DynamicCollider, DynamicColliderConstraints, EXP2Fog, Engine, EngineFeature, EngineObject, Entity, Event, EventDispatcher, FixedJoint, Fog, Font, FontStyle, GLCapabilityType, HingeJoint, HitResult, IndexBufferBinding, IndexFormat, InputManager, InterpolableKeyframe, InterpolableValueType, InterpolationType, Joint, JointLimits, JointMotor, Keyframe, Keys, Layer, Light, LinearFog, ListenerUpdateFlag, Loader, Logger, Material, Mesh, MeshRenderElement, MeshRenderer, MeshTopology, ModelMesh, ObjectValues, OverflowMode, PBRBaseMaterial, PBRMaterial, PBRSpecularMaterial, ParticleRenderer, ParticleRendererBlendMode, PhysicsManager, PhysicsMaterial, PhysicsMaterialCombineMode, PlaneColliderShape, PointLight, Pointer, PointerButton, PointerPhase, PrimitiveMesh, Probe, RefObject, RenderBufferDepthFormat, RenderFace, RenderPass, RenderQueue, RenderQueueType, RenderTarget, Renderer, ResourceManager, Scene, SceneFeature, SceneManager, Script, SetDataOptions, Shader, ShaderData, ShaderFactory, ShaderProperty, ShaderPropertyType, Skin, SkinnedMeshRenderer, Sky, SkyBoxMaterial, SphereColliderShape, SpotLight, SpringJoint, Sprite, SpriteAtlas, SpriteDrawMode, SpriteElement, SpriteMask, SpriteMaskInteraction, SpriteMaskLayer, SpriteRenderer, StateMachineScript, StaticCollider, StencilOperation, SubMesh, SystemInfo, TextHorizontalAlignment, TextRenderer, TextVerticalAlignment, Texture, Texture2D, Texture2DArray, TextureCoordinate, TextureCube, TextureCubeFace, TextureFilterMode, TextureFormat, TextureWrapMode, Time, TrailMaterial, TrailRenderer, Transform, UnlitMaterial, Util, VertexBufferBinding, VertexElement, VertexElementFormat, WrapMode, assignmentClone, deepClone, dependentComponents, ignoreClone, request, resourceLoader, shallowClone };\n//# sourceMappingURL=module.js.map\n","import { Vector2, Vector4, Color } from '@oasis-engine/math';\nimport { GLCapabilityType, Logger, TextureFormat, RenderBufferDepthFormat, TextureWrapMode, TextureFilterMode, TextureCube, Texture, CameraClearFlags, ColorWriteMask, Engine } from '@oasis-engine/core';\n\n/**\n * Smoothing plug-in.\n * */\n\n/**\n * @deprecated\n */\nvar GLCompressedTextureInternalFormat;\n(function (GLCompressedTextureInternalFormat) {\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_4X4_KHR\"] = 37808] = \"RGBA_ASTC_4X4_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_5X4_KHR\"] = 37809] = \"RGBA_ASTC_5X4_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_5X5_KHR\"] = 37810] = \"RGBA_ASTC_5X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_6X5_KHR\"] = 37811] = \"RGBA_ASTC_6X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_6X6_KHR\"] = 37812] = \"RGBA_ASTC_6X6_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_8X5_KHR\"] = 37813] = \"RGBA_ASTC_8X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_8X6_KHR\"] = 37814] = \"RGBA_ASTC_8X6_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_8X8_KHR\"] = 37815] = \"RGBA_ASTC_8X8_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_10X5_KHR\"] = 37816] = \"RGBA_ASTC_10X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_10X6_KHR\"] = 37817] = \"RGBA_ASTC_10X6_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_10X8_KHR\"] = 37818] = \"RGBA_ASTC_10X8_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_10X10_KHR\"] = 37819] = \"RGBA_ASTC_10X10_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_12X10_KHR\"] = 37820] = \"RGBA_ASTC_12X10_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_ASTC_12X12_KHR\"] = 37821] = \"RGBA_ASTC_12X12_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_4X4_KHR\"] = 37840] = \"SRGB8_ALPHA8_ASTC_4X4_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_5X4_KHR\"] = 37841] = \"SRGB8_ALPHA8_ASTC_5X4_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_5X5_KHR\"] = 37842] = \"SRGB8_ALPHA8_ASTC_5X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_6X5_KHR\"] = 37843] = \"SRGB8_ALPHA8_ASTC_6X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_6X6_KHR\"] = 37844] = \"SRGB8_ALPHA8_ASTC_6X6_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_8X5_KHR\"] = 37845] = \"SRGB8_ALPHA8_ASTC_8X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_8X6_KHR\"] = 37846] = \"SRGB8_ALPHA8_ASTC_8X6_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_8X8_KHR\"] = 37847] = \"SRGB8_ALPHA8_ASTC_8X8_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_10X5_KHR\"] = 37848] = \"SRGB8_ALPHA8_ASTC_10X5_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_10X6_KHR\"] = 37849] = \"SRGB8_ALPHA8_ASTC_10X6_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_10X8_KHR\"] = 37850] = \"SRGB8_ALPHA8_ASTC_10X8_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_10X10_KHR\"] = 37851] = \"SRGB8_ALPHA8_ASTC_10X10_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_12X10_KHR\"] = 37852] = \"SRGB8_ALPHA8_ASTC_12X10_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ASTC_12X12_KHR\"] = 37853] = \"SRGB8_ALPHA8_ASTC_12X12_KHR\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGB_ETC1_WEBGL\"] = 36196] = \"RGB_ETC1_WEBGL\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"R11_EAC\"] = 37488] = \"R11_EAC\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SIGNED_R11_EAC\"] = 37489] = \"SIGNED_R11_EAC\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RG11_EAC\"] = 37490] = \"RG11_EAC\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SIGNED_RG11_EAC\"] = 37491] = \"SIGNED_RG11_EAC\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGB8_ETC2\"] = 37492] = \"RGB8_ETC2\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ETC2\"] = 37493] = \"SRGB8_ETC2\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGB8_PUNCHTHROUGH_ALPHA1_ETC2\"] = 37494] = \"RGB8_PUNCHTHROUGH_ALPHA1_ETC2\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\"] = 37495] = \"SRGB8_PUNCHTHROUGH_ALPHA1_ETC2\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA8_ETC2_EAC\"] = 37496] = \"RGBA8_ETC2_EAC\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"SRGB8_ALPHA8_ETC2_EAC\"] = 37497] = \"SRGB8_ALPHA8_ETC2_EAC\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGB_PVRTC_4BPPV1_IMG\"] = 35840] = \"RGB_PVRTC_4BPPV1_IMG\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGB_PVRTC_2BPPV1_IMG\"] = 35841] = \"RGB_PVRTC_2BPPV1_IMG\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_PVRTC_4BPPV1_IMG\"] = 35842] = \"RGBA_PVRTC_4BPPV1_IMG\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_PVRTC_2BPPV1_IMG\"] = 35843] = \"RGBA_PVRTC_2BPPV1_IMG\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGB_S3TC_DXT1_EXT\"] = 33776] = \"RGB_S3TC_DXT1_EXT\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_S3TC_DXT1_EXT\"] = 33777] = \"RGBA_S3TC_DXT1_EXT\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_S3TC_DXT3_EXT\"] = 33778] = \"RGBA_S3TC_DXT3_EXT\";\n  GLCompressedTextureInternalFormat[GLCompressedTextureInternalFormat[\"RGBA_S3TC_DXT5_EXT\"] = 33779] = \"RGBA_S3TC_DXT5_EXT\";\n})(GLCompressedTextureInternalFormat || (GLCompressedTextureInternalFormat = {}));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\n/**\n * The canvas used on the web, which can support HTMLCanvasElement and OffscreenCanvas.\n */\nvar WebCanvas = /*#__PURE__*/function () {\n  var _proto = WebCanvas.prototype;\n  /**\n   * Resize the rendering size according to the clientWidth and clientHeight of the canvas.\n   * @param pixelRatio - Pixel ratio\n   */\n  _proto.resizeByClientSize = function resizeByClientSize(pixelRatio) {\n    if (pixelRatio === void 0) {\n      pixelRatio = window.devicePixelRatio;\n    }\n    var webCanvas = this._webCanvas;\n    if (typeof OffscreenCanvas === \"undefined\" || !(webCanvas instanceof OffscreenCanvas)) {\n      this.width = webCanvas.clientWidth * pixelRatio;\n      this.height = webCanvas.clientHeight * pixelRatio;\n    }\n  }\n\n  /**\n   * Create a web canvas.\n   * @param webCanvas - Web native canvas\n   */;\n  function WebCanvas(webCanvas) {\n    this._webCanvas = void 0;\n    this._width = void 0;\n    this._height = void 0;\n    this._scale = new Vector2();\n    var width = webCanvas.width;\n    var height = webCanvas.height;\n    this._webCanvas = webCanvas;\n    this._width = width;\n    this._height = height;\n  }\n\n  /**\n   * Set scale.\n   * @param x - Scale along the X axis\n   * @param y - Scale along the Y axis\n   */\n  _proto.setScale = function setScale(x, y) {\n    this._scale.set(x, y);\n    this.scale = this._scale;\n  };\n  _createClass(WebCanvas, [{\n    key: \"width\",\n    get:\n    /**\n     * @inheritdoc\n     */\n    function get() {\n      return this._width;\n    },\n    set: function set(value) {\n      if (this._width !== value) {\n        this._webCanvas.width = value;\n        this._width = value;\n      }\n    }\n\n    /**\n     * @inheritdoc\n     */\n  }, {\n    key: \"height\",\n    get: function get() {\n      return this._height;\n    },\n    set: function set(value) {\n      if (this._height !== value) {\n        this._webCanvas.height = value;\n        this._height = value;\n      }\n    }\n\n    /**\n     * The scale of canvas, the value is visible width/height divide the render width/height.\n     * @remarks Need to re-assign after modification to ensure that the modification takes effect.\n     */\n  }, {\n    key: \"scale\",\n    get: function get() {\n      var webCanvas = this._webCanvas;\n      if (typeof OffscreenCanvas === \"undefined\" || !(webCanvas instanceof OffscreenCanvas)) {\n        this._scale.set(webCanvas.clientWidth * devicePixelRatio / webCanvas.width, webCanvas.clientHeight * devicePixelRatio / webCanvas.height);\n      }\n      return this._scale;\n    },\n    set: function set(value) {\n      var webCanvas = this._webCanvas;\n      if (typeof OffscreenCanvas === \"undefined\" || !(webCanvas instanceof OffscreenCanvas)) {\n        webCanvas.style.transformOrigin = \"left top\";\n        webCanvas.style.transform = \"scale(\" + value.x + \", \" + value.y + \")\";\n      }\n    }\n  }]);\n  return WebCanvas;\n}();\n\n/**\n * GL capability.\n */\nvar GLCapability = /*#__PURE__*/function () {\n  function GLCapability(rhi) {\n    this._maxDrawBuffers = void 0;\n    this._maxAnisoLevel = void 0;\n    this._maxAntiAliasing = void 0;\n    this._rhi = void 0;\n    this.capabilityList = void 0;\n    this._rhi = rhi;\n    this.capabilityList = new Map();\n    this._init();\n    this._compatibleAllInterface();\n  }\n\n  /**\n   * Check device capabilities.\n   */\n  var _proto = GLCapability.prototype;\n  _proto.canIUse = function canIUse(capabilityType) {\n    return this.capabilityList.get(capabilityType);\n  }\n\n  /**\n   * Check if can use some compressed texture format.\n   */;\n  _proto.canIUseCompressedTextureInternalFormat = function canIUseCompressedTextureInternalFormat(internalType) {\n    var RGBA_ASTC_4X4_KHR = GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR,\n      RGBA_ASTC_12X12_KHR = GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR,\n      SRGB8_ALPHA8_ASTC_4X4_KHR = GLCompressedTextureInternalFormat.SRGB8_ALPHA8_ASTC_4X4_KHR,\n      SRGB8_ALPHA8_ASTC_12X12_KHR = GLCompressedTextureInternalFormat.SRGB8_ALPHA8_ASTC_12X12_KHR,\n      RGB_ETC1_WEBGL = GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL,\n      R11_EAC = GLCompressedTextureInternalFormat.R11_EAC,\n      SRGB8_ALPHA8_ETC2_EAC = GLCompressedTextureInternalFormat.SRGB8_ALPHA8_ETC2_EAC,\n      RGB_PVRTC_4BPPV1_IMG = GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG,\n      RGBA_PVRTC_2BPPV1_IMG = GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG,\n      RGB_S3TC_DXT1_EXT = GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT,\n      RGBA_S3TC_DXT5_EXT = GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT;\n    if (internalType >= RGBA_ASTC_4X4_KHR && RGBA_ASTC_12X12_KHR <= RGBA_ASTC_12X12_KHR || internalType >= SRGB8_ALPHA8_ASTC_4X4_KHR && internalType <= SRGB8_ALPHA8_ASTC_12X12_KHR) {\n      return this.canIUse(GLCapabilityType.astc);\n    } else if (internalType === RGB_ETC1_WEBGL) {\n      return this.canIUse(GLCapabilityType.etc1);\n    } else if (internalType >= R11_EAC && internalType <= SRGB8_ALPHA8_ETC2_EAC) {\n      return this.canIUse(GLCapabilityType.etc);\n    } else if (internalType >= RGB_PVRTC_4BPPV1_IMG && internalType <= RGBA_PVRTC_2BPPV1_IMG) {\n      return this.canIUse(GLCapabilityType.pvrtc);\n    } else if (internalType >= RGB_S3TC_DXT1_EXT && internalType <= RGBA_S3TC_DXT5_EXT) {\n      return this.canIUse(GLCapabilityType.s3tc);\n    }\n    return false;\n  }\n\n  /**\n   *  Init capabilities.\n   */;\n  _proto._init = function _init() {\n    var cap = this.capabilityList;\n    var isWebGL2 = this.rhi.isWebGL2;\n    var requireExtension = this.rhi.requireExtension.bind(this.rhi);\n    var shaderVertexID = GLCapabilityType.shaderVertexID,\n      standardDerivatives = GLCapabilityType.standardDerivatives,\n      shaderTextureLod = GLCapabilityType.shaderTextureLod,\n      elementIndexUint = GLCapabilityType.elementIndexUint,\n      depthTexture = GLCapabilityType.depthTexture,\n      vertexArrayObject = GLCapabilityType.vertexArrayObject,\n      instancedArrays = GLCapabilityType.instancedArrays,\n      multipleSample = GLCapabilityType.multipleSample,\n      drawBuffers = GLCapabilityType.drawBuffers,\n      astc = GLCapabilityType.astc,\n      astc_webkit = GLCapabilityType.astc_webkit,\n      etc = GLCapabilityType.etc,\n      etc_webkit = GLCapabilityType.etc_webkit,\n      etc1 = GLCapabilityType.etc1,\n      etc1_webkit = GLCapabilityType.etc1_webkit,\n      pvrtc = GLCapabilityType.pvrtc,\n      pvrtc_webkit = GLCapabilityType.pvrtc_webkit,\n      s3tc = GLCapabilityType.s3tc,\n      s3tc_webkit = GLCapabilityType.s3tc_webkit,\n      textureFloat = GLCapabilityType.textureFloat,\n      textureHalfFloat = GLCapabilityType.textureHalfFloat,\n      textureFloatLinear = GLCapabilityType.textureFloatLinear,\n      textureHalfFloatLinear = GLCapabilityType.textureHalfFloatLinear,\n      WEBGL_colorBufferFloat = GLCapabilityType.WEBGL_colorBufferFloat,\n      colorBufferFloat = GLCapabilityType.colorBufferFloat,\n      colorBufferHalfFloat = GLCapabilityType.colorBufferHalfFloat,\n      textureFilterAnisotropic = GLCapabilityType.textureFilterAnisotropic;\n    cap.set(shaderVertexID, isWebGL2);\n    cap.set(standardDerivatives, isWebGL2 || !!requireExtension(standardDerivatives));\n    cap.set(shaderTextureLod, isWebGL2 || !!requireExtension(shaderTextureLod));\n    cap.set(elementIndexUint, isWebGL2 || !!requireExtension(elementIndexUint));\n    cap.set(depthTexture, isWebGL2 || !!requireExtension(depthTexture));\n    cap.set(vertexArrayObject, isWebGL2 || !!requireExtension(vertexArrayObject));\n    cap.set(instancedArrays, isWebGL2 || !!requireExtension(instancedArrays));\n    cap.set(multipleSample, isWebGL2);\n    cap.set(drawBuffers, isWebGL2 || !!requireExtension(drawBuffers));\n    cap.set(textureFloat, isWebGL2 || !!requireExtension(textureFloat));\n    cap.set(textureHalfFloat, isWebGL2 || !!requireExtension(textureHalfFloat));\n    cap.set(textureFloatLinear, !!requireExtension(textureFloatLinear));\n    cap.set(textureHalfFloatLinear, isWebGL2 || !!requireExtension(textureHalfFloatLinear));\n    cap.set(colorBufferFloat, isWebGL2 && !!requireExtension(colorBufferFloat) || !!requireExtension(WEBGL_colorBufferFloat));\n    cap.set(colorBufferHalfFloat, isWebGL2 && !!requireExtension(colorBufferFloat) || !!requireExtension(colorBufferHalfFloat));\n    cap.set(textureFilterAnisotropic, !!requireExtension(textureFilterAnisotropic));\n    cap.set(astc, !!(requireExtension(astc) || requireExtension(astc_webkit)));\n    cap.set(etc, !!(requireExtension(etc) || requireExtension(etc_webkit)));\n    cap.set(etc1, !!(requireExtension(etc1) || requireExtension(etc1_webkit)));\n    cap.set(pvrtc, !!(requireExtension(pvrtc) || requireExtension(pvrtc_webkit)));\n    cap.set(s3tc, !!(requireExtension(s3tc) || requireExtension(s3tc_webkit)));\n  }\n\n  /**\n   * If there are extensions that can supplement this ability, smooth out the difference.\n   * @example\n   * compatible(GLCapabilityType.depthTexture,{\n   *    UNSIGNED_INT_24_8: \"UNSIGNED_INT_24_8_WEBGL\"\n   * })\n   * gl.UNSIGNED_INT_24_8 = ext.UNSIGNED_INT_24_8_WEBGL\n   */;\n  _proto._compatibleInterface = function _compatibleInterface(capabilityType, flatItem) {\n    var rhi = this.rhi;\n    var gl = rhi.gl;\n    var ext = null;\n    if (ext = rhi.requireExtension(capabilityType)) {\n      for (var _glKey in flatItem) {\n        var _extensionKey = flatItem[_glKey];\n        var extensionVal = ext[_extensionKey];\n\n        // Mini game hack the native function,use “.bind” to smooth out if is “Funcion”.\n        if (extensionVal !== null && extensionVal !== void 0 && extensionVal.bind) {\n          gl[_glKey] = extensionVal.bind(ext);\n        } else {\n          gl[_glKey] = extensionVal;\n        }\n      }\n    }\n  };\n  _proto._compatibleAllInterface = function _compatibleAllInterface() {\n    var depthTexture = GLCapabilityType.depthTexture,\n      vertexArrayObject = GLCapabilityType.vertexArrayObject,\n      instancedArrays = GLCapabilityType.instancedArrays,\n      drawBuffers = GLCapabilityType.drawBuffers,\n      textureFilterAnisotropic = GLCapabilityType.textureFilterAnisotropic,\n      textureHalfFloat = GLCapabilityType.textureHalfFloat,\n      colorBufferHalfFloat = GLCapabilityType.colorBufferHalfFloat,\n      WEBGL_colorBufferFloat = GLCapabilityType.WEBGL_colorBufferFloat;\n    var isWebGL2 = this.rhi.isWebGL2;\n    if (!isWebGL2) {\n      this._compatibleInterface(depthTexture, {\n        UNSIGNED_INT_24_8: \"UNSIGNED_INT_24_8_WEBGL\"\n      });\n      this._compatibleInterface(vertexArrayObject, {\n        createVertexArray: \"createVertexArrayOES\",\n        deleteVertexArray: \"deleteVertexArrayOES\",\n        isVertexArray: \"isVertexArrayOES\",\n        bindVertexArray: \"bindVertexArrayOES\"\n      });\n      this._compatibleInterface(instancedArrays, {\n        drawArraysInstanced: \"drawArraysInstancedANGLE\",\n        drawElementsInstanced: \"drawElementsInstancedANGLE\",\n        vertexAttribDivisor: \"vertexAttribDivisorANGLE\"\n      });\n      this._compatibleInterface(drawBuffers, {\n        MAX_DRAW_BUFFERS: \"MAX_DRAW_BUFFERS_WEBGL\"\n      });\n      var items = {};\n      if (this.canIUse(GLCapabilityType.drawBuffers)) {\n        var maxDrawBuffers = this.maxDrawBuffers;\n        for (var i = 0; i < maxDrawBuffers; i++) {\n          i != 0 && (items[\"COLOR_ATTACHMENT\" + i] = \"COLOR_ATTACHMENT\" + i + \"_WEBGL\");\n          items[\"DRAW_BUFFER\" + i] = \"DRAW_BUFFER\" + i + \"_WEBGL\";\n        }\n        this._compatibleInterface(drawBuffers, _objectSpread2({\n          drawBuffers: \"drawBuffersWEBGL\"\n        }, items));\n      }\n      this._compatibleInterface(textureHalfFloat, {\n        HAFL_FLOAT: \"HALF_FLOAT_OES\"\n      });\n      this._compatibleInterface(colorBufferHalfFloat, {\n        RGBA16F: \"RBGA16F_EXT\"\n      });\n      this._compatibleInterface(WEBGL_colorBufferFloat, {\n        RGBA32F: \"RBGA32F_EXT\"\n      });\n    }\n    this._compatibleInterface(textureFilterAnisotropic, {\n      TEXTURE_MAX_ANISOTROPY_EXT: \"TEXTURE_MAX_ANISOTROPY_EXT\"\n    });\n  };\n  _createClass(GLCapability, [{\n    key: \"maxTextureSize\",\n    get: function get() {\n      return this.rhi.renderStates.getParameter(this.rhi.gl.MAX_TEXTURE_SIZE);\n    }\n  }, {\n    key: \"canUseFloatTextureBlendShape\",\n    get: function get() {\n      return this.canIUse(GLCapabilityType.shaderVertexID) && this.canIUse(GLCapabilityType.textureFloat) && this.rhi.renderStates.getParameter(this.rhi.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;\n    }\n\n    /**\n     * Whether can use more joints.\n     */\n  }, {\n    key: \"canIUseMoreJoints\",\n    get: function get() {\n      return this.canIUse(GLCapabilityType.textureFloat) && this.rhi.renderStates.getParameter(this.rhi.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;\n    }\n  }, {\n    key: \"maxDrawBuffers\",\n    get: function get() {\n      if (!this._maxDrawBuffers) {\n        if (this.canIUse(GLCapabilityType.drawBuffers)) {\n          this._maxDrawBuffers = this._rhi.gl.getParameter(this._rhi.gl.MAX_DRAW_BUFFERS);\n        } else {\n          this._maxDrawBuffers = 1;\n        }\n      }\n      return this._maxDrawBuffers;\n    }\n\n    /**\n     * Max anisoLevel.\n     */\n  }, {\n    key: \"maxAnisoLevel\",\n    get: function get() {\n      if (!this._maxAnisoLevel) {\n        var ext = this._rhi.requireExtension(GLCapabilityType.textureFilterAnisotropic);\n        this._maxAnisoLevel = ext ? this._rhi.gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1;\n      }\n      return this._maxAnisoLevel;\n    }\n\n    /**\n     * Max MSAA count.\n     */\n  }, {\n    key: \"maxAntiAliasing\",\n    get: function get() {\n      if (!this._maxAntiAliasing) {\n        var gl = this._rhi.gl;\n        var canMSAA = this.canIUse(GLCapabilityType.multipleSample);\n        this._maxAntiAliasing = canMSAA ? gl.getParameter(gl.MAX_SAMPLES) : 1;\n      }\n      return this._maxAntiAliasing;\n    }\n  }, {\n    key: \"rhi\",\n    get: function get() {\n      return this._rhi;\n    }\n  }]);\n  return GLCapability;\n}();\n\n/**\n * GLContext extension.\n */\nvar GLExtensions = /*#__PURE__*/function () {\n  function GLExtensions(rhi) {\n    this.rhi = void 0;\n    this._requireResult = void 0;\n    this.rhi = rhi;\n    this._requireResult = {};\n  }\n\n  /**\n   * Require an extension.\n   */\n  var _proto = GLExtensions.prototype;\n  _proto.requireExtension = function requireExtension(ext) {\n    if (this._requireResult[ext] !== undefined) {\n      return this._requireResult[ext];\n    }\n    this._requireResult[ext] = this.rhi.gl.getExtension(ext);\n    return this._requireResult[ext];\n  };\n  return GLExtensions;\n}();\n\n/**\n * Improvement of VAO:\n * 1) WebGL2.0 must support VAO, almost all devices support vao extensions in webgl1.0, we can use PollyFill,only keep VAO mode.\n * 2) VAO implementation now has bugs, change IndexBuffer、VertexBuffer、VertexElements need to update VAO.\n */\n\n/**\n * @internal\n * GL platform primitive.\n */\nvar GLPrimitive = /*#__PURE__*/function () {\n  function GLPrimitive(rhi, primitive) {\n    this.attribLocArray = [];\n    this._primitive = void 0;\n    this.canUseInstancedArrays = void 0;\n    this.gl = void 0;\n    this.vao = new Map();\n    this._useVao = void 0;\n    this._primitive = primitive;\n    this.canUseInstancedArrays = rhi.canIUse(GLCapabilityType.instancedArrays);\n    this._useVao = rhi.canIUse(GLCapabilityType.vertexArrayObject);\n    this.gl = rhi.gl;\n  }\n\n  /**\n   * Draw the primitive.\n   */\n  var _proto = GLPrimitive.prototype;\n  _proto.draw = function draw(shaderProgram, subMesh) {\n    var gl = this.gl;\n    var primitive = this._primitive;\n    // @ts-ignore\n    var useVao = this._useVao && primitive._enableVAO;\n    if (useVao) {\n      if (!this.vao.has(shaderProgram.id)) {\n        this.registerVAO(shaderProgram);\n      }\n      var vao = this.vao.get(shaderProgram.id);\n      gl.bindVertexArray(vao);\n    } else {\n      this.bindBufferAndAttrib(shaderProgram);\n    }\n\n    // @ts-ignore\n    var _indexBufferBinding = primitive._indexBufferBinding,\n      _instanceCount = primitive._instanceCount,\n      _glIndexType = primitive._glIndexType,\n      _glIndexByteCount = primitive._glIndexByteCount;\n    var topology = subMesh.topology,\n      start = subMesh.start,\n      count = subMesh.count;\n    if (!_instanceCount) {\n      if (_indexBufferBinding) {\n        if (useVao) {\n          gl.drawElements(topology, count, _glIndexType, start * _glIndexByteCount);\n        } else {\n          var _nativeBuffer = _indexBufferBinding.buffer._nativeBuffer;\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, _nativeBuffer);\n          gl.drawElements(topology, count, _glIndexType, start * _glIndexByteCount);\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n        }\n      } else {\n        gl.drawArrays(topology, start, count);\n      }\n    } else {\n      if (this.canUseInstancedArrays) {\n        if (_indexBufferBinding) {\n          if (this._useVao) {\n            gl.drawElementsInstanced(topology, count, _glIndexType, start * _glIndexByteCount, _instanceCount);\n          } else {\n            var _nativeBuffer2 = _indexBufferBinding.buffer._nativeBuffer;\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, _nativeBuffer2);\n            gl.drawElementsInstanced(topology, count, _glIndexType, start * _glIndexByteCount, _instanceCount);\n            gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n          }\n        } else {\n          gl.drawArraysInstanced(topology, start, count, _instanceCount);\n        }\n      } else {\n        Logger.error(\"ANGLE_instanced_arrays extension is not supported\");\n      }\n    }\n\n    // unbind\n    if (this._useVao) {\n      gl.bindVertexArray(null);\n    } else {\n      this.disableAttrib();\n    }\n  };\n  _proto.destroy = function destroy() {\n    if (this._useVao) {\n      var gl = this.gl;\n      this.vao.forEach(function (vao) {\n        gl.deleteVertexArray(vao);\n      });\n      this.vao.clear();\n    }\n  }\n\n  /**\n   * Bind buffer and attribute.\n   */;\n  _proto.bindBufferAndAttrib = function bindBufferAndAttrib(shaderProgram) {\n    var gl = this.gl;\n    var primitive = this._primitive;\n    // @ts-ignore\n    var vertexBufferBindings = primitive._vertexBufferBindings;\n    this.attribLocArray.length = 0;\n    var attributeLocation = shaderProgram.attributeLocation;\n    var attributes = primitive._vertexElementMap;\n    var vbo;\n    var lastBoundVbo;\n    for (var name in attributeLocation) {\n      var loc = attributeLocation[name];\n      if (loc === -1) continue;\n      var element = attributes[name];\n      if (element) {\n        var _vertexBufferBindings = vertexBufferBindings[element.bindingIndex],\n          buffer = _vertexBufferBindings.buffer,\n          stride = _vertexBufferBindings.stride;\n        vbo = buffer._nativeBuffer;\n        // prevent binding the vbo which already bound at the last loop, e.g. a buffer with multiple attributes.\n        if (lastBoundVbo !== vbo) {\n          lastBoundVbo = vbo;\n          gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n        }\n        gl.enableVertexAttribArray(loc);\n        var elementInfo = element._glElementInfo;\n        gl.vertexAttribPointer(loc, elementInfo.size, elementInfo.type, elementInfo.normalized, stride, element.offset);\n        if (this.canUseInstancedArrays) {\n          gl.vertexAttribDivisor(loc, element.instanceStepRate);\n        }\n        this.attribLocArray.push(loc);\n      } else {\n        Logger.warn(\"vertex attribute not found: \" + name);\n      }\n    }\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n  };\n  _proto.disableAttrib = function disableAttrib() {\n    var gl = this.gl;\n    for (var i = 0, l = this.attribLocArray.length; i < l; i++) {\n      gl.disableVertexAttribArray(this.attribLocArray[i]);\n    }\n  };\n  _proto.registerVAO = function registerVAO(shaderProgram) {\n    var gl = this.gl;\n    var vao = gl.createVertexArray();\n\n    /** register VAO */\n    gl.bindVertexArray(vao);\n\n    // @ts-ignore\n    var _indexBufferBinding = this._primitive._indexBufferBinding;\n    if (_indexBufferBinding) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, _indexBufferBinding.buffer._nativeBuffer);\n    }\n    this.bindBufferAndAttrib(shaderProgram);\n\n    /** unbind */\n    gl.bindVertexArray(null);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    this.disableAttrib();\n    this.vao.set(shaderProgram.id, vao);\n  };\n  return GLPrimitive;\n}();\n\n/**\n * @private\n */\nvar GLRenderStates = /*#__PURE__*/function () {\n  /**\n   * @param {WebGLRenderingContext} gl\n   */\n  function GLRenderStates(gl) {\n    this._gl = void 0;\n    this._parameters = {};\n    this._gl = gl;\n    this._parameters = {}; // current gl state parameters\n\n    /** cache */\n    this._parameters[gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS] = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n    this._parameters[gl.MAX_VERTEX_UNIFORM_VECTORS] = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\n    this._parameters[gl.MAX_VERTEX_ATTRIBS] = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n    this._parameters[gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS] = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n    this._parameters[gl.MAX_TEXTURE_SIZE] = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n\n    // init blend state same as BlendState default value.\n    gl.blendFuncSeparate(gl.ONE, gl.ZERO, gl.ONE, gl.ZERO);\n    gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n    gl.colorMask(true, true, true, true);\n    gl.blendColor(0, 0, 0, 0);\n    gl.disable(gl.SAMPLE_ALPHA_TO_COVERAGE);\n\n    // init depth state same as DepthState default value.\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthFunc(gl.LESS);\n    gl.depthMask(true);\n\n    // init stencil state same as StencilState default value.\n    gl.disable(gl.STENCIL_TEST);\n    gl.stencilFuncSeparate(gl.FRONT, gl.ALWAYS, 0, 0xff);\n    gl.stencilFuncSeparate(gl.BACK, gl.ALWAYS, 0, 0xff);\n    gl.stencilOpSeparate(gl.FRONT, gl.KEEP, gl.KEEP, gl.KEEP);\n    gl.stencilOpSeparate(gl.BACK, gl.KEEP, gl.KEEP, gl.KEEP);\n    gl.stencilMask(0xff);\n\n    // init raster state same as RasterState default value.\n    gl.enable(gl.CULL_FACE);\n    gl.cullFace(gl.BACK);\n    gl.disable(gl.POLYGON_OFFSET_FILL);\n    gl.polygonOffset(0, 0);\n  }\n\n  /**\n   * Get a parameter.\n   */\n  var _proto = GLRenderStates.prototype;\n  _proto.getParameter = function getParameter(pname) {\n    return this._parameters[pname];\n  };\n  return GLRenderStates;\n}();\n\n/**\n * Texture in WebGL platform.\n */\nvar GLTexture = /*#__PURE__*/function () {\n  /** @internal */\n  GLTexture._isPowerOf2 = function _isPowerOf2(v) {\n    return (v & v - 1) === 0;\n  }\n\n  /**\n   * Get more texture info from TextureFormat.\n   * @internal\n   */;\n  GLTexture._getFormatDetail = function _getFormatDetail(format, gl, isWebGL2) {\n    switch (format) {\n      case TextureFormat.R8G8B8:\n        return {\n          internalFormat: isWebGL2 ? gl.RGB8 : gl.RGB,\n          baseFormat: gl.RGB,\n          dataType: gl.UNSIGNED_BYTE,\n          isCompressed: false\n        };\n      case TextureFormat.R8G8B8A8:\n        return {\n          internalFormat: isWebGL2 ? gl.RGBA8 : gl.RGBA,\n          baseFormat: gl.RGBA,\n          dataType: gl.UNSIGNED_BYTE,\n          isCompressed: false\n        };\n      case TextureFormat.R4G4B4A4:\n        return {\n          internalFormat: isWebGL2 ? gl.RGBA4 : gl.RGBA,\n          baseFormat: gl.RGBA,\n          dataType: gl.UNSIGNED_SHORT_4_4_4_4,\n          isCompressed: false\n        };\n      case TextureFormat.R5G5B5A1:\n        return {\n          internalFormat: isWebGL2 ? gl.RGB5_A1 : gl.RGBA,\n          baseFormat: gl.RGBA,\n          dataType: gl.UNSIGNED_SHORT_5_5_5_1,\n          isCompressed: false\n        };\n      case TextureFormat.R5G6B5:\n        return {\n          internalFormat: isWebGL2 ? gl.RGB565 : gl.RGB,\n          baseFormat: gl.RGB,\n          dataType: gl.UNSIGNED_SHORT_5_6_5,\n          isCompressed: false\n        };\n      case TextureFormat.Alpha8:\n        return {\n          internalFormat: gl.ALPHA,\n          baseFormat: gl.ALPHA,\n          dataType: gl.UNSIGNED_BYTE,\n          isCompressed: false\n        };\n      case TextureFormat.LuminanceAlpha:\n        return {\n          internalFormat: gl.LUMINANCE_ALPHA,\n          baseFormat: gl.LUMINANCE_ALPHA,\n          dataType: gl.UNSIGNED_BYTE,\n          isCompressed: false\n        };\n      case TextureFormat.R16G16B16A16:\n        return {\n          internalFormat: gl.RGBA16F,\n          baseFormat: gl.RGBA,\n          dataType: gl.HALF_FLOAT,\n          isCompressed: false\n        };\n      case TextureFormat.R32G32B32A32:\n        return {\n          internalFormat: gl.RGBA32F,\n          baseFormat: gl.RGBA,\n          dataType: gl.FLOAT,\n          isCompressed: false\n        };\n      case TextureFormat.DXT1:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT,\n          isCompressed: true\n        };\n      case TextureFormat.DXT5:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT,\n          isCompressed: true\n        };\n      case TextureFormat.ETC1_RGB:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL,\n          isCompressed: true\n        };\n      case TextureFormat.ETC2_RGB:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGB8_ETC2,\n          isCompressed: true\n        };\n      case TextureFormat.ETC2_RGBA5:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n          isCompressed: true\n        };\n      case TextureFormat.ETC2_RGBA8:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA8_ETC2_EAC,\n          isCompressed: true\n        };\n      case TextureFormat.PVRTC_RGB2:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGB_PVRTC_2BPPV1_IMG,\n          isCompressed: true\n        };\n      case TextureFormat.PVRTC_RGBA2:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG,\n          isCompressed: true\n        };\n      case TextureFormat.PVRTC_RGB4:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG,\n          isCompressed: true\n        };\n      case TextureFormat.PVRTC_RGBA4:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_PVRTC_4BPPV1_IMG,\n          isCompressed: true\n        };\n      case TextureFormat.ASTC_4x4:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR,\n          isCompressed: true\n        };\n      case TextureFormat.ASTC_5x5:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_ASTC_5X5_KHR,\n          isCompressed: true\n        };\n      case TextureFormat.ASTC_6x6:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_ASTC_6X6_KHR,\n          isCompressed: true\n        };\n      case TextureFormat.ASTC_8x8:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_ASTC_8X8_KHR,\n          isCompressed: true\n        };\n      case TextureFormat.ASTC_10x10:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_ASTC_10X10_KHR,\n          isCompressed: true\n        };\n      case TextureFormat.ASTC_12x12:\n        return {\n          internalFormat: GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR,\n          isCompressed: true\n        };\n      default:\n        throw new Error(\"this TextureFormat is not supported in Oasis Engine: \" + format);\n    }\n  }\n\n  /**\n   * In WebGL 1, internalformat must be the same as baseFormat when call texImage2D.\n   * @internal\n   */;\n  GLTexture._getRenderBufferDepthFormatDetail = function _getRenderBufferDepthFormatDetail(format, gl, isWebGL2) {\n    switch (format) {\n      case TextureFormat.Depth:\n      case RenderBufferDepthFormat.Depth:\n        return {\n          internalFormat: isWebGL2 ? gl.DEPTH_COMPONENT32F : gl.DEPTH_COMPONENT16,\n          baseFormat: gl.DEPTH_COMPONENT,\n          dataType: isWebGL2 ? gl.FLOAT : gl.UNSIGNED_INT,\n          isCompressed: false,\n          attachment: gl.DEPTH_ATTACHMENT\n        };\n      case TextureFormat.DepthStencil:\n      case RenderBufferDepthFormat.DepthStencil:\n        return {\n          internalFormat: isWebGL2 ? gl.DEPTH24_STENCIL8 : gl.DEPTH_STENCIL,\n          baseFormat: gl.DEPTH_STENCIL,\n          dataType: gl.UNSIGNED_INT_24_8,\n          isCompressed: false,\n          attachment: gl.DEPTH_STENCIL_ATTACHMENT\n        };\n      case TextureFormat.Stencil:\n      case RenderBufferDepthFormat.Stencil:\n        return {\n          internalFormat: gl.STENCIL_INDEX8,\n          baseFormat: gl.STENCIL_ATTACHMENT,\n          dataType: gl.UNSIGNED_BYTE,\n          isCompressed: false,\n          attachment: gl.STENCIL_ATTACHMENT\n        };\n      case TextureFormat.Depth16:\n      case RenderBufferDepthFormat.Depth16:\n        return {\n          internalFormat: isWebGL2 ? gl.DEPTH_COMPONENT16 : gl.DEPTH_COMPONENT16,\n          baseFormat: gl.DEPTH_COMPONENT,\n          dataType: gl.UNSIGNED_INT,\n          isCompressed: false,\n          attachment: gl.DEPTH_ATTACHMENT\n        };\n      case TextureFormat.Depth24:\n      case RenderBufferDepthFormat.Depth24:\n        return {\n          internalFormat: gl.DEPTH_COMPONENT24,\n          baseFormat: gl.DEPTH_COMPONENT,\n          dataType: gl.UNSIGNED_INT,\n          isCompressed: false,\n          attachment: gl.DEPTH_ATTACHMENT\n        };\n      case TextureFormat.Depth32:\n      case RenderBufferDepthFormat.Depth32:\n        return {\n          internalFormat: gl.DEPTH_COMPONENT32F,\n          baseFormat: gl.DEPTH_COMPONENT,\n          dataType: gl.FLOAT,\n          isCompressed: false,\n          attachment: gl.DEPTH_ATTACHMENT\n        };\n      case TextureFormat.Depth24Stencil8:\n      case RenderBufferDepthFormat.Depth24Stencil8:\n        return {\n          internalFormat: isWebGL2 ? gl.DEPTH24_STENCIL8 : gl.DEPTH_STENCIL,\n          baseFormat: gl.DEPTH_STENCIL,\n          dataType: gl.UNSIGNED_INT_24_8,\n          isCompressed: false,\n          attachment: gl.DEPTH_STENCIL_ATTACHMENT\n        };\n      case TextureFormat.Depth32Stencil8:\n      case RenderBufferDepthFormat.Depth32Stencil8:\n        return {\n          internalFormat: gl.DEPTH32F_STENCIL8,\n          baseFormat: gl.DEPTH_STENCIL,\n          dataType: gl.FLOAT_32_UNSIGNED_INT_24_8_REV,\n          isCompressed: false,\n          attachment: gl.DEPTH_STENCIL_ATTACHMENT\n        };\n      default:\n        throw new Error(\"this TextureFormat is not supported in Oasis Engine: \" + format);\n    }\n  }\n\n  /**\n   * Check whether the corresponding texture format is supported.\n   * @internal\n   */;\n  GLTexture._supportTextureFormat = function _supportTextureFormat(format, rhi) {\n    var isSupported = true;\n    switch (format) {\n      case TextureFormat.R16G16B16A16:\n        {\n          if (!rhi.canIUse(GLCapabilityType.textureHalfFloat)) {\n            isSupported = false;\n          }\n        }\n        break;\n      case TextureFormat.R32G32B32A32:\n        {\n          if (!rhi.canIUse(GLCapabilityType.textureFloat)) {\n            isSupported = false;\n          }\n        }\n        break;\n    }\n    return isSupported;\n  }\n\n  /**\n   * @internal\n   */;\n  GLTexture._supportRenderBufferColorFormat = function _supportRenderBufferColorFormat(format, rhi) {\n    var isSupported = true;\n    switch (format) {\n      case TextureFormat.R16G16B16A16:\n        {\n          if (!rhi.canIUse(GLCapabilityType.colorBufferHalfFloat) || !rhi.canIUse(GLCapabilityType.textureHalfFloat)) {\n            isSupported = false;\n          }\n        }\n        break;\n      case TextureFormat.R32G32B32A32:\n        {\n          if (!rhi.canIUse(GLCapabilityType.colorBufferFloat) || !rhi.canIUse(GLCapabilityType.textureFloat)) {\n            isSupported = false;\n          }\n        }\n        break;\n    }\n    return isSupported;\n  }\n\n  /**\n   * @internal\n   */;\n  GLTexture._supportRenderBufferDepthFormat = function _supportRenderBufferDepthFormat(format, rhi, isTexture) {\n    var isWebGL2 = rhi.isWebGL2;\n    var isSupported = true;\n    if (isTexture && !rhi.canIUse(GLCapabilityType.depthTexture)) {\n      return false;\n    }\n    switch (format) {\n      case RenderBufferDepthFormat.Stencil:\n      case TextureFormat.Stencil:\n        isSupported = false;\n        break;\n      case TextureFormat.Depth24:\n      case TextureFormat.Depth32:\n      case TextureFormat.Depth32Stencil8:\n      case RenderBufferDepthFormat.Depth24:\n      case RenderBufferDepthFormat.Depth32:\n      case RenderBufferDepthFormat.Depth32Stencil8:\n        if (!isWebGL2) {\n          isSupported = false;\n        }\n        break;\n    }\n    return isSupported;\n  }\n\n  /** @internal */;\n\n  /**\n   * Create texture in WebGL platform.\n   */\n  function GLTexture(rhi, texture, target) {\n    this._texture = void 0;\n    this._glTexture = void 0;\n    this._rhi = void 0;\n    this._gl = void 0;\n    this._isWebGL2 = void 0;\n    this._target = void 0;\n    this._formatDetail = void 0;\n    this._texture = texture;\n    this._rhi = rhi;\n    this._gl = rhi.gl;\n    this._isWebGL2 = rhi.isWebGL2;\n    this._target = target;\n    this._glTexture = this._gl.createTexture();\n  }\n\n  /**\n   * Destroy texture.\n   */\n  var _proto = GLTexture.prototype;\n  _proto.destroy = function destroy() {\n    this._gl.deleteTexture(this._glTexture);\n    this._texture = null;\n    this._glTexture = null;\n    this._formatDetail = null;\n  }\n\n  /**\n   * Generate multi-level textures based on the 0th level data.\n   */;\n  _proto.generateMipmaps = function generateMipmaps() {\n    this._bind();\n    this._gl.generateMipmap(this._target);\n  };\n  _proto._bind = function _bind() {\n    this._rhi.bindTexture(this);\n  }\n\n  /**\n   * Pre-development mipmapping GPU memory.\n   */;\n  _proto._initMipmap = function _initMipmap(isCube) {\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n    var _this$_formatDetail = this._formatDetail,\n      internalFormat = _this$_formatDetail.internalFormat,\n      baseFormat = _this$_formatDetail.baseFormat,\n      dataType = _this$_formatDetail.dataType;\n    var _this$_texture = this._texture,\n      mipmapCount = _this$_texture.mipmapCount,\n      width = _this$_texture.width,\n      height = _this$_texture.height;\n    this._bind();\n    if (isWebGL2 && !(baseFormat === gl.LUMINANCE_ALPHA || baseFormat === gl.ALPHA)) {\n      gl.texStorage2D(this._target, mipmapCount, internalFormat, width, height);\n    } else {\n      // In WebGL 1, internalformat must be the same as baseFormat\n      if (baseFormat !== internalFormat) {\n        internalFormat = baseFormat;\n      }\n      if (!isCube) {\n        for (var i = 0; i < mipmapCount; i++) {\n          var mipWidth = Math.max(1, width >> i);\n          var mipHeight = Math.max(1, height >> i);\n          gl.texImage2D(this._target, i, internalFormat, mipWidth, mipHeight, 0, baseFormat, dataType, null);\n        }\n      } else {\n        for (var _i = 0; _i < mipmapCount; _i++) {\n          var size = Math.max(1, width >> _i);\n          for (var faceIndex = 0; faceIndex < 6; faceIndex++) {\n            gl.texImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, _i, internalFormat, size, size, 0, baseFormat, dataType, null);\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Get the pixel color buffer according to the specified cube face and area.\n   * @param face - You can choose which cube face to read\n   * @param x - X coordinate of area start\n   * @param y - Y coordinate of area start\n   * @param width - Area width\n   * @param height - Area height\n   * @param out - Color buffer\n   * @param mipLevel - Set mip level the data want to get from\n   */;\n  _proto._getPixelBuffer = function _getPixelBuffer(face, x, y, width, height, mipLevel, out) {\n    var gl = this._gl;\n    var _this$_formatDetail2 = this._formatDetail,\n      baseFormat = _this$_formatDetail2.baseFormat,\n      dataType = _this$_formatDetail2.dataType;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._getReadFrameBuffer());\n    if (mipLevel > 0 && !this._isWebGL2) {\n      mipLevel = 0;\n      Logger.error(\"mipLevel only take effect in WebGL2.0\");\n    }\n    if (face != null) {\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, this._glTexture, mipLevel);\n    } else {\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this._glTexture, mipLevel);\n    }\n    gl.readPixels(x, y, width, height, baseFormat, dataType, out);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  };\n  _proto._setWrapMode = function _setWrapMode(value, pname) {\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n    var target = this._target;\n    var _this$_texture2 = this._texture,\n      width = _this$_texture2.width,\n      height = _this$_texture2.height;\n    if (!isWebGL2 && value !== TextureWrapMode.Clamp && (!GLTexture._isPowerOf2(width) || !GLTexture._isPowerOf2(height))) {\n      Logger.warn(\"non-power-2 texture is not supported for REPEAT or MIRRORED_REPEAT in WebGL1,and has automatically downgraded to CLAMP_TO_EDGE\");\n      value = TextureWrapMode.Clamp;\n    }\n    switch (value) {\n      case TextureWrapMode.Clamp:\n        gl.texParameteri(target, pname, gl.CLAMP_TO_EDGE);\n        break;\n      case TextureWrapMode.Repeat:\n        gl.texParameteri(target, pname, gl.REPEAT);\n        break;\n      case TextureWrapMode.Mirror:\n        gl.texParameteri(target, pname, gl.MIRRORED_REPEAT);\n        break;\n    }\n  };\n  _proto._getReadFrameBuffer = function _getReadFrameBuffer() {\n    var frameBuffer = this._rhi._readFrameBuffer;\n    if (!frameBuffer) {\n      this._rhi._readFrameBuffer = frameBuffer = this._gl.createFramebuffer();\n    }\n    return frameBuffer;\n  };\n  _createClass(GLTexture, [{\n    key: \"wrapModeU\",\n    set:\n    /**\n     * Wrapping mode for texture coordinate S.\n     */\n    function set(value) {\n      this._bind();\n      this._setWrapMode(value, this._gl.TEXTURE_WRAP_S);\n    }\n\n    /**\n     * Wrapping mode for texture coordinate T.\n     */\n  }, {\n    key: \"wrapModeV\",\n    set: function set(value) {\n      this._bind();\n      this._setWrapMode(value, this._gl.TEXTURE_WRAP_T);\n    }\n\n    /**\n     * Filter mode for texture.\n     */\n  }, {\n    key: \"filterMode\",\n    set: function set(value) {\n      var gl = this._gl;\n      var target = this._target;\n      /** @ts-ignore */\n      var _mipmap = this._texture._mipmap;\n      this._bind();\n      switch (value) {\n        case TextureFilterMode.Point:\n          gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n          gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, _mipmap ? gl.NEAREST_MIPMAP_NEAREST : gl.NEAREST);\n          break;\n        case TextureFilterMode.Bilinear:\n          gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n          gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, _mipmap ? gl.LINEAR_MIPMAP_NEAREST : gl.LINEAR);\n          break;\n        case TextureFilterMode.Trilinear:\n          gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n          gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, _mipmap ? gl.LINEAR_MIPMAP_LINEAR : gl.LINEAR);\n          break;\n      }\n    }\n\n    /**\n     * Anisotropic level for texture.\n     */\n  }, {\n    key: \"anisoLevel\",\n    set: function set(value) {\n      var gl = this._gl;\n      this._bind();\n      gl.texParameterf(this._target, gl.TEXTURE_MAX_ANISOTROPY_EXT, value);\n    }\n  }]);\n  return GLTexture;\n}();\n\n/**\n * The render target in WebGL platform is used for off-screen rendering.\n */\nvar GLRenderTarget = /*#__PURE__*/function () {\n  /**\n   * Create render target in WebGL platform.\n   */\n  function GLRenderTarget(rhi, target) {\n    this._gl = void 0;\n    this._isWebGL2 = void 0;\n    this._target = void 0;\n    this._frameBuffer = void 0;\n    this._MSAAFrameBuffer = void 0;\n    this._depthRenderBuffer = void 0;\n    this._MSAAColorRenderBuffers = [];\n    this._MSAADepthRenderBuffer = void 0;\n    this._oriDrawBuffers = void 0;\n    this._blitDrawBuffers = void 0;\n    this._curMipLevel = 0;\n    this._gl = rhi.gl;\n    this._isWebGL2 = rhi.isWebGL2;\n    this._target = target;\n\n    /** @ts-ignore */\n    var _colorTextures = target._colorTextures,\n      _depth = target._depth,\n      width = target.width,\n      height = target.height;\n    var isDepthTexture = _depth instanceof Texture;\n\n    /** todo\n     * MRT + Cube + [,MSAA]\n     * MRT + MSAA\n     */\n\n    for (var i = 0, n = _colorTextures.length; i < n; i++) {\n      var format = _colorTextures[i]._format;\n      if (!GLTexture._supportRenderBufferColorFormat(format, rhi)) {\n        throw new Error(\"TextureFormat is not supported:\" + TextureFormat[format] + \" in RenderTarget\");\n      }\n    }\n    if (!GLTexture._supportRenderBufferDepthFormat(isDepthTexture ? _depth.format : _depth, rhi, isDepthTexture)) {\n      throw new Error(\"TextureFormat is not supported:\" + TextureFormat[_depth] + \" in RenderTarget\");\n    }\n    if (_colorTextures.length > 1 && !rhi.canIUse(GLCapabilityType.drawBuffers)) {\n      throw new Error(\"MRT is not supported\");\n    }\n    if (_colorTextures.some(function (v) {\n      return v.width !== width || v.height !== height;\n    })) {\n      throw new Error(\"ColorTexture's size must as same as RenderTarget\");\n    }\n    if (isDepthTexture && (_depth.width !== width || _depth.height !== height)) {\n      throw new Error(\"DepthTexture's size must as same as RenderTarget\");\n    }\n\n    // todo: necessary to support MRT + Cube + [,MSAA] ?\n    if (_colorTextures.length > 1 && _colorTextures.some(function (v) {\n      return v instanceof TextureCube;\n    })) {\n      throw new Error(\"MRT+Cube+[,MSAA] is not supported\");\n    }\n    var maxAntiAliasing = rhi.capability.maxAntiAliasing;\n    if (target.antiAliasing > maxAntiAliasing) {\n      Logger.warn(\"MSAA antiAliasing exceeds the limit and is automatically downgraded to:\" + maxAntiAliasing);\n\n      /** @ts-ignore */\n      target._antiAliasing = maxAntiAliasing;\n    }\n    this._frameBuffer = this._gl.createFramebuffer();\n\n    // bind main FBO\n    this._bindMainFBO();\n\n    // bind MSAA FBO\n    if (target.antiAliasing > 1) {\n      this._MSAAFrameBuffer = this._gl.createFramebuffer();\n      this._bindMSAAFBO();\n    }\n  }\n\n  /**\n   * Set which face and mipLevel of the cube texture to render to.\n   * @param faceIndex - Cube texture face\n   * @param mipLevel - Set mip level the data want to write\n   */\n  var _proto = GLRenderTarget.prototype;\n  _proto.setRenderTargetInfo = function setRenderTargetInfo(faceIndex, mipLevel) {\n    var gl = this._gl,\n      target = this._target;\n    var depthTexture = target.depthTexture;\n    var colorTexture = target.getColorTexture(0);\n    var mipChanged = mipLevel !== this._curMipLevel;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n    if (colorTexture) {\n      var isCube = colorTexture instanceof TextureCube;\n      if (mipChanged || isCube) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, isCube ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex : gl.TEXTURE_2D, /** @ts-ignore */\n        colorTexture._platformTexture._glTexture, mipLevel);\n      }\n    }\n    if (depthTexture) {\n      var _isCube = depthTexture instanceof TextureCube;\n      if (mipChanged || _isCube) {\n        /** @ts-ignore */\n        var platformTexture = depthTexture._platformTexture;\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, platformTexture._formatDetail.attachment, _isCube ? gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex : gl.TEXTURE_2D, platformTexture._glTexture, mipLevel);\n      }\n    } else {\n      if (mipChanged) {\n        // @ts-ignore\n        var _GLTexture$_getRender = GLTexture._getRenderBufferDepthFormatDetail(target._depth, gl, this._isWebGL2),\n          internalFormat = _GLTexture$_getRender.internalFormat;\n        gl.bindRenderbuffer(gl.RENDERBUFFER, this._depthRenderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, target.width >> mipLevel, target.height >> mipLevel);\n      }\n    }\n    this._curMipLevel = mipLevel;\n\n    // revert current activated render target\n    this._activeRenderTarget();\n  }\n\n  /**\n   * Blit FBO.\n   */;\n  _proto.blitRenderTarget = function blitRenderTarget() {\n    if (!this._MSAAFrameBuffer) return;\n    var gl = this._gl;\n    var mask = gl.COLOR_BUFFER_BIT | (this._target.depthTexture ? gl.DEPTH_BUFFER_BIT : 0);\n    var _this$_target = this._target,\n      colorTextureCount = _this$_target.colorTextureCount,\n      width = _this$_target.width,\n      height = _this$_target.height;\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, this._MSAAFrameBuffer);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, this._frameBuffer);\n    for (var textureIndex = 0; textureIndex < colorTextureCount; textureIndex++) {\n      var attachment = gl.COLOR_ATTACHMENT0 + textureIndex;\n      this._blitDrawBuffers[textureIndex] = attachment;\n      gl.readBuffer(attachment);\n      gl.drawBuffers(this._blitDrawBuffers);\n      gl.blitFramebuffer(0, 0, width, height, 0, 0, width, height, mask, gl.NEAREST);\n      this._blitDrawBuffers[textureIndex] = gl.NONE;\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n\n  /**\n   * Destroy render target.\n   */;\n  _proto.destroy = function destroy() {\n    var gl = this._gl;\n    this._frameBuffer && gl.deleteFramebuffer(this._frameBuffer);\n    this._depthRenderBuffer && gl.deleteRenderbuffer(this._depthRenderBuffer);\n    this._MSAAFrameBuffer && gl.deleteFramebuffer(this._MSAAFrameBuffer);\n    this._MSAADepthRenderBuffer && gl.deleteRenderbuffer(this._MSAADepthRenderBuffer);\n    for (var i = 0; i < this._MSAAColorRenderBuffers.length; i++) {\n      gl.deleteRenderbuffer(this._MSAAColorRenderBuffers[i]);\n    }\n    this._frameBuffer = null;\n    this._depthRenderBuffer = null;\n    this._MSAAFrameBuffer = null;\n    this._MSAAColorRenderBuffers.length = 0;\n    this._MSAADepthRenderBuffer = null;\n  }\n\n  /**\n   * Activate this RenderTarget.\n   * @internal\n   * @remarks\n   * If MSAA is turned on, MSAA FBO is activated, and then this._blitRenderTarget() is performed to exchange FBO.\n   * If MSAA is not turned on, activate the main FBO.\n   */;\n  _proto._activeRenderTarget = function _activeRenderTarget() {\n    var gl = this._gl;\n    if (this._MSAAFrameBuffer) {\n      gl.bindFramebuffer(gl.FRAMEBUFFER, this._MSAAFrameBuffer);\n    } else {\n      gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n    }\n  };\n  _proto._bindMainFBO = function _bindMainFBO() {\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n\n    /** @ts-ignore */\n    var _this$_target2 = this._target,\n      _depth = _this$_target2._depth,\n      colorTextureCount = _this$_target2.colorTextureCount,\n      width = _this$_target2.width,\n      height = _this$_target2.height;\n    var drawBuffers = new Array(colorTextureCount);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._frameBuffer);\n\n    /** color render buffer */\n    for (var i = 0; i < colorTextureCount; i++) {\n      var colorTexture = this._target.getColorTexture(i);\n      var attachment = gl.COLOR_ATTACHMENT0 + i;\n      drawBuffers[i] = attachment;\n      if (!(colorTexture instanceof TextureCube)) {\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, attachment, gl.TEXTURE_2D, /** @ts-ignore */\n        colorTexture._platformTexture._glTexture, 0);\n      }\n    }\n    if (colorTextureCount > 1) {\n      gl.drawBuffers(drawBuffers);\n    }\n    this._oriDrawBuffers = drawBuffers;\n\n    /** depth render buffer */\n    if (_depth !== null) {\n      if (_depth instanceof Texture) {\n        if (!(_depth instanceof TextureCube)) {\n          gl.framebufferTexture2D(gl.FRAMEBUFFER, /** @ts-ignore */\n          _depth._platformTexture._formatDetail.attachment, gl.TEXTURE_2D, /** @ts-ignore */\n          _depth._platformTexture._glTexture, 0);\n        }\n      } else if (this._target.antiAliasing <= 1) {\n        var _GLTexture$_getRender2 = GLTexture._getRenderBufferDepthFormatDetail(_depth, gl, isWebGL2),\n          internalFormat = _GLTexture$_getRender2.internalFormat,\n          _attachment = _GLTexture$_getRender2.attachment;\n        var depthRenderBuffer = gl.createRenderbuffer();\n        this._depthRenderBuffer = depthRenderBuffer;\n        gl.bindRenderbuffer(gl.RENDERBUFFER, depthRenderBuffer);\n        gl.renderbufferStorage(gl.RENDERBUFFER, internalFormat, width, height);\n        gl.framebufferRenderbuffer(gl.FRAMEBUFFER, _attachment, gl.RENDERBUFFER, depthRenderBuffer);\n      }\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n  };\n  _proto._bindMSAAFBO = function _bindMSAAFBO() {\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n    var MSAADepthRenderBuffer = gl.createRenderbuffer();\n\n    /** @ts-ignore */\n    var _this$_target3 = this._target,\n      _depth = _this$_target3._depth,\n      colorTextureCount = _this$_target3.colorTextureCount,\n      antiAliasing = _this$_target3.antiAliasing,\n      width = _this$_target3.width,\n      height = _this$_target3.height;\n    this._blitDrawBuffers = new Array(colorTextureCount);\n    this._MSAADepthRenderBuffer = MSAADepthRenderBuffer;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._MSAAFrameBuffer);\n\n    // prepare MRT+MSAA color RBOs\n    for (var i = 0; i < colorTextureCount; i++) {\n      var MSAAColorRenderBuffer = gl.createRenderbuffer();\n      this._MSAAColorRenderBuffers[i] = MSAAColorRenderBuffer;\n      this._blitDrawBuffers[i] = gl.NONE;\n      gl.bindRenderbuffer(gl.RENDERBUFFER, MSAAColorRenderBuffer);\n      gl.renderbufferStorageMultisample(gl.RENDERBUFFER, antiAliasing, /** @ts-ignore */\n      this._target.getColorTexture(i)._platformTexture._formatDetail.internalFormat, width, height);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0 + i, gl.RENDERBUFFER, MSAAColorRenderBuffer);\n    }\n    gl.drawBuffers(this._oriDrawBuffers);\n\n    // prepare MSAA depth RBO\n    if (_depth !== null) {\n      var _ref = _depth instanceof Texture ? /** @ts-ignore */\n        _depth._platformTexture._formatDetail : GLTexture._getRenderBufferDepthFormatDetail(_depth, gl, isWebGL2),\n        internalFormat = _ref.internalFormat,\n        attachment = _ref.attachment;\n      gl.bindRenderbuffer(gl.RENDERBUFFER, MSAADepthRenderBuffer);\n      gl.renderbufferStorageMultisample(gl.RENDERBUFFER, antiAliasing, internalFormat, width, height);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, attachment, gl.RENDERBUFFER, MSAADepthRenderBuffer);\n    }\n    this._checkFrameBuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    gl.bindRenderbuffer(gl.RENDERBUFFER, null);\n  };\n  _proto._checkFrameBuffer = function _checkFrameBuffer() {\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n    var e = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n    switch (e) {\n      case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\n        throw new Error(\"The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete\");\n      case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\n        throw new Error(\"There is no attachment\");\n      case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\n        throw new Error(\" Height and width of the attachment are not the same.\");\n      case gl.FRAMEBUFFER_UNSUPPORTED:\n        throw new Error(\"The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer\");\n    }\n    if (isWebGL2 && e === gl.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE) {\n      throw new Error(\"The values of gl.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.\");\n    }\n  };\n  return GLRenderTarget;\n}();\n\n/**\n * Texture 2d in WebGL platform.\n */\nvar GLTexture2D = /*#__PURE__*/function (_GLTexture) {\n  _inheritsLoose(GLTexture2D, _GLTexture);\n  /** Backward compatible with WebGL1.0. */\n\n  function GLTexture2D(rhi, texture2D) {\n    var _this;\n    _this = _GLTexture.call(this, rhi, texture2D, rhi.gl.TEXTURE_2D) || this;\n\n    /** @ts-ignore */\n    _this._compressedMipFilled = 0;\n    var format = texture2D.format,\n      _mipmap = texture2D._mipmap,\n      width = texture2D.width,\n      height = texture2D.height;\n    var isWebGL2 = _this._isWebGL2;\n    if (!GLTexture._supportTextureFormat(format, rhi)) {\n      throw new Error(\"Texture format is not supported:\" + TextureFormat[format]);\n    }\n    if (_mipmap && !isWebGL2 && (!GLTexture._isPowerOf2(width) || !GLTexture._isPowerOf2(height))) {\n      Logger.warn(\"non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap\");\n\n      /** @ts-ignore */\n      texture2D._mipmap = false;\n      /** @ts-ignore */\n      texture2D._mipmapCount = texture2D._getMipmapCount();\n    }\n    _this._formatDetail = GLTexture._getFormatDetail(format, _this._gl, isWebGL2);\n    _this._formatDetail.isCompressed && !isWebGL2 || _this._initMipmap(false);\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IPlatformTexture2D.setPixelBuffer}\n   */\n  var _proto = GLTexture2D.prototype;\n  _proto.setPixelBuffer = function setPixelBuffer(colorBuffer, mipLevel, x, y, width, height) {\n    if (mipLevel === void 0) {\n      mipLevel = 0;\n    }\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n    var _this$_formatDetail = this._formatDetail,\n      internalFormat = _this$_formatDetail.internalFormat,\n      baseFormat = _this$_formatDetail.baseFormat,\n      dataType = _this$_formatDetail.dataType,\n      isCompressed = _this$_formatDetail.isCompressed;\n    var mipWidth = Math.max(1, this._texture.width >> mipLevel);\n    var mipHeight = Math.max(1, this._texture.height >> mipLevel);\n    width = width || mipWidth - x;\n    height = height || mipHeight - y;\n    this._bind();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n    if (isCompressed) {\n      var mipBit = 1 << mipLevel;\n      if (isWebGL2 || this._compressedMipFilled & mipBit) {\n        gl.compressedTexSubImage2D(this._target, mipLevel, x, y, width, height, internalFormat, colorBuffer);\n      } else {\n        gl.compressedTexImage2D(this._target, mipLevel, internalFormat, width, height, 0, colorBuffer);\n        this._compressedMipFilled |= mipBit;\n      }\n    } else {\n      gl.texSubImage2D(this._target, mipLevel, x, y, width, height, baseFormat, dataType, colorBuffer);\n    }\n  }\n\n  /**\n   * {@inheritDoc IPlatformTexture2D.setImageSource}\n   */;\n  _proto.setImageSource = function setImageSource(imageSource, mipLevel, flipY, premultiplyAlpha, x, y) {\n    var gl = this._gl;\n    var _this$_formatDetail2 = this._formatDetail,\n      baseFormat = _this$_formatDetail2.baseFormat,\n      dataType = _this$_formatDetail2.dataType;\n    this._bind();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, +flipY);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, +premultiplyAlpha);\n    gl.texSubImage2D(this._target, mipLevel, x || 0, y || 0, baseFormat, dataType, imageSource);\n  }\n\n  /**\n   * {@inheritDoc IPlatformTexture2D.getPixelBuffer }\n   */;\n  _proto.getPixelBuffer = function getPixelBuffer(x, y, width, height, mipLevel, out) {\n    if (this._formatDetail.isCompressed) {\n      throw new Error(\"Unable to read compressed texture\");\n    }\n    _GLTexture.prototype._getPixelBuffer.call(this, null, x, y, width, height, mipLevel, out);\n  };\n  return GLTexture2D;\n}(GLTexture);\n\n/**\n * Texture 2D array in WebGL platform.\n */\nvar GLTexture2DArray = /*#__PURE__*/function (_GLTexture) {\n  _inheritsLoose(GLTexture2DArray, _GLTexture);\n  function GLTexture2DArray(rhi, texture2DArray) {\n    var _this;\n    _this = _GLTexture.call(this, rhi, texture2DArray, rhi.gl.TEXTURE_2D_ARRAY) || this;\n    var format = texture2DArray.format,\n      width = texture2DArray.width,\n      height = texture2DArray.height,\n      length = texture2DArray.length,\n      mipmapCount = texture2DArray.mipmapCount;\n    if (!_this._isWebGL2) {\n      throw new Error(\"Texture2D Array is not supported in WebGL1.0\");\n    }\n    if (!GLTexture._supportTextureFormat(format, rhi)) {\n      throw new Error(\"Texture format is not supported:\" + TextureFormat[format]);\n    }\n    _this._bind();\n    _this._formatDetail = GLTexture._getFormatDetail(format, _this._gl, true);\n    _this._gl.texStorage3D(_this._target, mipmapCount, _this._formatDetail.internalFormat, width, height, length);\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IPlatformTexture2DArray.setPixelBuffer}\n   */\n  var _proto = GLTexture2DArray.prototype;\n  _proto.setPixelBuffer = function setPixelBuffer(offsetIndex, colorBuffer, mipLevel, x, y, width, height, length) {\n    var target = this._target,\n      gl = this._gl;\n    var _this$_formatDetail = this._formatDetail,\n      internalFormat = _this$_formatDetail.internalFormat,\n      baseFormat = _this$_formatDetail.baseFormat,\n      dataType = _this$_formatDetail.dataType,\n      isCompressed = _this$_formatDetail.isCompressed;\n    width = width || Math.max(1, this._texture.width >> mipLevel) - x;\n    height = height || Math.max(1, this._texture.height >> mipLevel) - y;\n    length = length || this._texture.length;\n    this._bind();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n    if (isCompressed) {\n      gl.compressedTexSubImage3D(target, mipLevel, x, y, offsetIndex, width, height, length, internalFormat, colorBuffer);\n    } else {\n      gl.texSubImage3D(target, mipLevel, x, y, offsetIndex, width, height, length, baseFormat, dataType, colorBuffer);\n    }\n  }\n\n  /**\n   * {@inheritDoc IPlatformTexture2DArray.setImageSource}\n   */;\n  _proto.setImageSource = function setImageSource(elementIndex, imageSource, mipLevel, flipY, premultiplyAlpha, x, y) {\n    var gl = this._gl;\n    var _this$_formatDetail2 = this._formatDetail,\n      baseFormat = _this$_formatDetail2.baseFormat,\n      dataType = _this$_formatDetail2.dataType;\n    this._bind();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, +flipY);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, +premultiplyAlpha);\n    gl.texSubImage3D(this._target, mipLevel, x, y, elementIndex, imageSource.width, imageSource.height, 1, baseFormat, dataType, imageSource);\n  }\n\n  /**\n   * {@inheritDoc IPlatformTexture2DArray.getPixelBuffer}\n   */;\n  _proto.getPixelBuffer = function getPixelBuffer(elementIndex, x, y, width, height, mipLevel, out) {\n    var gl = this._gl,\n      formatDetail = this._formatDetail;\n    if (formatDetail.isCompressed) {\n      throw new Error(\"Unable to read compressed texture\");\n    }\n    gl.bindFramebuffer(gl.FRAMEBUFFER, this._getReadFrameBuffer());\n    gl.framebufferTextureLayer(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, this._glTexture, mipLevel, elementIndex);\n    gl.readPixels(x, y, width, height, formatDetail.baseFormat, formatDetail.dataType, out);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  };\n  return GLTexture2DArray;\n}(GLTexture);\n\n/**\n * Cube texture in WebGL platform.\n */\nvar GLTextureCube = /*#__PURE__*/function (_GLTexture) {\n  _inheritsLoose(GLTextureCube, _GLTexture);\n  /** Backward compatible with WebGL1.0. */\n\n  function GLTextureCube(rhi, textureCube) {\n    var _this;\n    _this = _GLTexture.call(this, rhi, textureCube, rhi.gl.TEXTURE_CUBE_MAP) || this;\n\n    /** @ts-ignore */\n    _this._compressedFaceFilled = [0, 0, 0, 0, 0, 0];\n    var format = textureCube.format,\n      _mipmap = textureCube._mipmap,\n      size = textureCube.width;\n    var isWebGL2 = _this._isWebGL2;\n    if (!GLTexture._supportTextureFormat(format, rhi)) {\n      throw new Error(\"Texture format is not supported:\" + TextureFormat[format]);\n    }\n    if (_mipmap && !isWebGL2 && !GLTexture._isPowerOf2(size)) {\n      Logger.warn(\"non-power-2 texture is not supported for mipmap in WebGL1,and has automatically downgraded to non-mipmap\");\n\n      /** @ts-ignore */\n      textureCube._mipmap = false;\n      /** @ts-ignore */\n      textureCube._mipmapCount = textureCube._getMipmapCount();\n    }\n    _this._formatDetail = GLTexture._getFormatDetail(format, _this._gl, isWebGL2);\n    _this._formatDetail.isCompressed && !isWebGL2 || _this._initMipmap(true);\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IPlatformTextureCube.setPixelBuffer}\n   */\n  var _proto = GLTextureCube.prototype;\n  _proto.setPixelBuffer = function setPixelBuffer(face, colorBuffer, mipLevel, x, y, width, height) {\n    var gl = this._gl;\n    var isWebGL2 = this._isWebGL2;\n    var _this$_formatDetail = this._formatDetail,\n      internalFormat = _this$_formatDetail.internalFormat,\n      baseFormat = _this$_formatDetail.baseFormat,\n      dataType = _this$_formatDetail.dataType,\n      isCompressed = _this$_formatDetail.isCompressed;\n    var mipSize = Math.max(1, this._texture.width >> mipLevel);\n    width = width || mipSize - x;\n    height = height || mipSize - y;\n    this._bind();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 0);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);\n    if (isCompressed) {\n      var mipBit = 1 << mipLevel;\n      if (isWebGL2 || this._compressedFaceFilled[face] & mipBit) {\n        gl.compressedTexSubImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, x, y, width, height, internalFormat, colorBuffer);\n      } else {\n        gl.compressedTexImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, internalFormat, width, height, 0, colorBuffer);\n        this._compressedFaceFilled[face] |= mipBit;\n      }\n    } else {\n      gl.texSubImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, x, y, width, height, baseFormat, dataType, colorBuffer);\n    }\n  }\n\n  /**\n   * {@inheritDoc IPlatformTextureCube.setImageSource}\n   */;\n  _proto.setImageSource = function setImageSource(face, imageSource, mipLevel, flipY, premultiplyAlpha, x, y) {\n    var gl = this._gl;\n    var _this$_formatDetail2 = this._formatDetail,\n      baseFormat = _this$_formatDetail2.baseFormat,\n      dataType = _this$_formatDetail2.dataType;\n    this._bind();\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, +flipY);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, +premultiplyAlpha);\n    gl.texSubImage2D(gl.TEXTURE_CUBE_MAP_POSITIVE_X + face, mipLevel, x || 0, y || 0, baseFormat, dataType, imageSource);\n  }\n\n  /**\n   * {@inheritDoc IPlatformTextureCube.getPixelBuffer}\n   */;\n  _proto.getPixelBuffer = function getPixelBuffer(face, x, y, width, height, mipLevel, out) {\n    if (this._formatDetail.isCompressed) {\n      throw new Error(\"Unable to read compressed texture\");\n    }\n    _GLTexture.prototype._getPixelBuffer.call(this, face, x, y, width, height, mipLevel, out);\n  };\n  return GLTextureCube;\n}(GLTexture);\n\n/**\n * WebGL mode.\n */\nvar WebGLMode;\n\n/**\n * WebGL renderer options.\n */\n(function (WebGLMode) {\n  WebGLMode[WebGLMode[\"Auto\"] = 0] = \"Auto\";\n  WebGLMode[WebGLMode[\"WebGL2\"] = 1] = \"WebGL2\";\n  WebGLMode[WebGLMode[\"WebGL1\"] = 2] = \"WebGL1\";\n})(WebGLMode || (WebGLMode = {}));\n/**\n * WebGL renderer, including WebGL1.0 and WebGL2.0.\n */\nvar WebGLRenderer = /*#__PURE__*/function () {\n  function WebGLRenderer(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    this._readFrameBuffer = void 0;\n    this._currentBind = void 0;\n    this._options = void 0;\n    this._gl = void 0;\n    this._renderStates = void 0;\n    this._extensions = void 0;\n    this._capability = void 0;\n    this._isWebGL2 = void 0;\n    this._webCanvas = void 0;\n    this._activeTextureID = void 0;\n    this._activeTextures = new Array(32);\n    this._lastViewport = new Vector4(null, null, null, null);\n    this._lastClearColor = new Color(null, null, null, null);\n    this._scissorEnable = false;\n    this._options = options;\n  }\n  var _proto = WebGLRenderer.prototype;\n  _proto.init = function init(canvas) {\n    var option = this._options;\n    option.alpha === undefined && (option.alpha = false);\n    option.stencil === undefined && (option.stencil = true);\n    var webCanvas = this._webCanvas = canvas._webCanvas;\n    var webGLMode = option.webGLMode || WebGLMode.Auto;\n    var gl;\n    if (webGLMode == WebGLMode.Auto || webGLMode == WebGLMode.WebGL2) {\n      gl = webCanvas.getContext(\"webgl2\", option);\n      if (!gl && (typeof OffscreenCanvas === \"undefined\" || !(webCanvas instanceof OffscreenCanvas))) {\n        gl = webCanvas.getContext(\"experimental-webgl2\", option);\n      }\n      this._isWebGL2 = true;\n\n      // Prevent weird browsers to lie (such as safari!)\n      if (gl && !gl.deleteQuery) {\n        this._isWebGL2 = false;\n      }\n    }\n    if (!gl) {\n      if (webGLMode == WebGLMode.Auto || webGLMode == WebGLMode.WebGL1) {\n        gl = webCanvas.getContext(\"webgl\", option);\n        if (!gl && (typeof OffscreenCanvas === \"undefined\" || !(webCanvas instanceof OffscreenCanvas))) {\n          gl = webCanvas.getContext(\"experimental-webgl\", option);\n        }\n        this._isWebGL2 = false;\n      }\n    }\n    if (!gl) {\n      throw new Error(\"Get GL Context FAILED.\");\n    }\n    this._gl = gl;\n    this._activeTextureID = gl.TEXTURE0;\n    this._renderStates = new GLRenderStates(gl);\n    this._extensions = new GLExtensions(this);\n    this._capability = new GLCapability(this);\n    // Make sure the active texture in gl context is on default, because gl context may be used in other webgl renderer.\n    gl.activeTexture(gl.TEXTURE0);\n    this._options = null;\n  };\n  _proto.createPlatformPrimitive = function createPlatformPrimitive(primitive) {\n    return new GLPrimitive(this, primitive);\n  };\n  _proto.createPlatformTexture2D = function createPlatformTexture2D(texture2D) {\n    return new GLTexture2D(this, texture2D);\n  };\n  _proto.createPlatformTexture2DArray = function createPlatformTexture2DArray(texture2D) {\n    return new GLTexture2DArray(this, texture2D);\n  };\n  _proto.createPlatformTextureCube = function createPlatformTextureCube(textureCube) {\n    return new GLTextureCube(this, textureCube);\n  };\n  _proto.createPlatformRenderTarget = function createPlatformRenderTarget(target) {\n    return new GLRenderTarget(this, target);\n  };\n  _proto.requireExtension = function requireExtension(ext) {\n    return this._extensions.requireExtension(ext);\n  };\n  _proto.canIUse = function canIUse(capabilityType) {\n    return this.capability.canIUse(capabilityType);\n  };\n  _proto.canIUseCompressedTextureInternalFormat = function canIUseCompressedTextureInternalFormat(type) {\n    return this.capability.canIUseCompressedTextureInternalFormat(type);\n  };\n  _proto.viewport = function viewport(x, y, width, height) {\n    var gl = this._gl,\n      lv = this._lastViewport;\n    if (x !== lv.x || y !== lv.y || width !== lv.z || height !== lv.w) {\n      var webCanvas = this._webCanvas;\n      if (x === 0 && y === 0 && width === webCanvas.width && height === webCanvas.height) {\n        if (this._scissorEnable) {\n          gl.disable(gl.SCISSOR_TEST);\n          this._scissorEnable = false;\n        }\n      } else {\n        if (!this._scissorEnable) {\n          gl.enable(gl.SCISSOR_TEST);\n          this._scissorEnable = true;\n        }\n        gl.scissor(x, y, width, height);\n      }\n      gl.viewport(x, y, width, height);\n      lv.set(x, y, width, height);\n    }\n  };\n  _proto.colorMask = function colorMask(r, g, b, a) {\n    this._gl.colorMask(r, g, b, a);\n  };\n  _proto.clearRenderTarget = function clearRenderTarget(engine, clearFlags, clearColor) {\n    var gl = this._gl;\n    var _engine$_lastRenderSt = engine._lastRenderState,\n      targetBlendState = _engine$_lastRenderSt.blendState.targetBlendState,\n      depthState = _engine$_lastRenderSt.depthState,\n      stencilState = _engine$_lastRenderSt.stencilState;\n    var clearFlag = 0;\n    if (clearFlags & CameraClearFlags.Color) {\n      clearFlag |= gl.COLOR_BUFFER_BIT;\n      var lc = this._lastClearColor;\n      var r = clearColor.r,\n        g = clearColor.g,\n        b = clearColor.b,\n        a = clearColor.a;\n      if (clearColor && (r !== lc.r || g !== lc.g || b !== lc.b || a !== lc.a)) {\n        gl.clearColor(r, g, b, a);\n        lc.set(r, g, b, a);\n      }\n      if (targetBlendState.colorWriteMask !== ColorWriteMask.All) {\n        gl.colorMask(true, true, true, true);\n        targetBlendState.colorWriteMask = ColorWriteMask.All;\n      }\n    }\n    if (clearFlags & CameraClearFlags.Depth) {\n      clearFlag |= gl.DEPTH_BUFFER_BIT;\n      if (depthState.writeEnabled !== true) {\n        gl.depthMask(true);\n        depthState.writeEnabled = true;\n      }\n    }\n    if (clearFlags & CameraClearFlags.Stencil) {\n      clearFlag |= gl.STENCIL_BUFFER_BIT;\n      if (stencilState.writeMask !== 0xff) {\n        gl.stencilMask(0xff);\n        stencilState.writeMask = 0xff;\n      }\n    }\n    gl.clear(clearFlag);\n  };\n  _proto.drawPrimitive = function drawPrimitive(primitive, subPrimitive, shaderProgram) {\n    // todo: VAO not support morph animation\n    if (primitive) {\n      //@ts-ignore\n      primitive._draw(shaderProgram, subPrimitive);\n    } else {\n      Logger.error(\"draw primitive failed.\");\n    }\n  };\n  _proto.activeRenderTarget = function activeRenderTarget(renderTarget, camera, mipLevel) {\n    var gl = this._gl;\n    if (renderTarget) {\n      var _renderTarget$_platfo;\n      /** @ts-ignore */\n      (_renderTarget$_platfo = renderTarget._platformRenderTarget) === null || _renderTarget$_platfo === void 0 ? void 0 : _renderTarget$_platfo._activeRenderTarget();\n      var width = renderTarget.width,\n        height = renderTarget.height;\n      this.viewport(0, 0, width >> mipLevel, height >> mipLevel);\n    } else {\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      var viewport = camera.viewport;\n      var drawingBufferWidth = gl.drawingBufferWidth,\n        drawingBufferHeight = gl.drawingBufferHeight;\n      var _width = drawingBufferWidth * viewport.z;\n      var _height = drawingBufferHeight * viewport.w;\n      var x = viewport.x * drawingBufferWidth;\n      var y = drawingBufferHeight - viewport.y * drawingBufferHeight - _height;\n      this.viewport(x, y, _width, _height);\n    }\n  };\n  _proto.destroy = function destroy() {};\n  _proto.activeTexture = function activeTexture(textureID) {\n    if (this._activeTextureID !== textureID) {\n      this._gl.activeTexture(textureID);\n      this._activeTextureID = textureID;\n    }\n  };\n  _proto.bindTexture = function bindTexture(texture) {\n    var index = this._activeTextureID - this._gl.TEXTURE0;\n    if (this._activeTextures[index] !== texture) {\n      this._gl.bindTexture(texture._target, texture._glTexture);\n      this._activeTextures[index] = texture;\n    }\n  };\n  _createClass(WebGLRenderer, [{\n    key: \"isWebGL2\",\n    get: /** @internal */\n\n    // cache value\n\n    function get() {\n      return this._isWebGL2;\n    }\n\n    /**\n     * GL Context\n     * @member {WebGLRenderingContext}\n     */\n  }, {\n    key: \"gl\",\n    get: function get() {\n      return this._gl;\n    }\n  }, {\n    key: \"renderStates\",\n    get: function get() {\n      return this._renderStates;\n    }\n  }, {\n    key: \"capability\",\n    get: function get() {\n      return this._capability;\n    }\n  }, {\n    key: \"canIUseMoreJoints\",\n    get: function get() {\n      return this.capability.canIUseMoreJoints;\n    }\n  }]);\n  return WebGLRenderer;\n}();\n\n/**\n * WebGL platform engine,support includes WebGL1.0 and WebGL2.0.\n */\nvar WebGLEngine = /*#__PURE__*/function (_Engine) {\n  _inheritsLoose(WebGLEngine, _Engine);\n  /**\n   * Create an engine suitable for the WebGL platform.\n   * @param canvas - Native web canvas\n   * @param webGLRendererOptions - WebGL renderer options\n   */\n  function WebGLEngine(canvas, webGLRendererOptions) {\n    var webCanvas = new WebCanvas(typeof canvas === \"string\" ? document.getElementById(canvas) : canvas);\n    var hardwareRenderer = new WebGLRenderer(webGLRendererOptions);\n    return _Engine.call(this, webCanvas, hardwareRenderer) || this;\n  }\n\n  /**\n   * Web canvas.\n   */\n  _createClass(WebGLEngine, [{\n    key: \"canvas\",\n    get: function get() {\n      return this._canvas;\n    }\n  }]);\n  return WebGLEngine;\n}(Engine);\n\nexport { GLCompressedTextureInternalFormat, WebCanvas, WebGLEngine, WebGLMode, WebGLRenderer };\n//# sourceMappingURL=module.js.map\n","import { Logger, request } from '@oasis-engine/core';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nvar DRACOWorker = /*#__PURE__*/function () {\n  function DRACOWorker(workerSourceURL, decoderWASMBinary) {\n    var _this = this;\n    this._worker = void 0;\n    this._costs = {};\n    this._currentLoad = 0;\n    this._callbacks = {};\n    this._worker = new Worker(workerSourceURL);\n    this._worker.onmessage = function (e) {\n      var message = e.data;\n      switch (message.type) {\n        case \"decode\":\n          _this._callbacks[message.id].resolve(message.geometry);\n          break;\n        case \"error\":\n          _this._callbacks[message.id].reject(message);\n          break;\n        default:\n          Logger.error('DRACOWorker: Unexpected message, \"' + message.type + '\"');\n      }\n    };\n    if (decoderWASMBinary) {\n      this._worker.postMessage({\n        type: \"init\",\n        decoderConfig: {\n          wasmBinary: decoderWASMBinary\n        }\n      });\n    } else {\n      this._worker.postMessage({\n        type: \"init\",\n        decoderConfig: {}\n      });\n    }\n  }\n  var _proto = DRACOWorker.prototype;\n  _proto.setCosts = function setCosts(taskId, cost) {\n    this._costs[taskId] = cost;\n  };\n  _proto.addCurrentLoad = function addCurrentLoad(cost) {\n    this._currentLoad += cost;\n  };\n  _proto.setCallback = function setCallback(taskId, resolve, reject) {\n    this._callbacks[taskId] = {\n      resolve: resolve,\n      reject: reject\n    };\n  };\n  _proto.decode = function decode(taskId, taskConfig, buffer) {\n    this._worker.postMessage({\n      type: \"decode\",\n      id: taskId,\n      taskConfig: taskConfig,\n      buffer: buffer\n    }, [buffer]);\n  };\n  _proto.releaseTask = function releaseTask(taskId) {\n    this._currentLoad -= this._costs[taskId];\n    delete this._callbacks[taskId];\n    delete this._costs[taskId];\n  };\n  _createClass(DRACOWorker, [{\n    key: \"currentLoad\",\n    get:\n    // Worker instance.\n\n    // Record byteLength of each task.\n\n    // The sum of bytelength that the worker is currently dealing with, in order to sort the workers.\n\n    function get() {\n      return this._currentLoad;\n    }\n  }]);\n  return DRACOWorker;\n}();\n\nvar workerString = \"let decoderPending;\\nlet decoderConfig;\\n\\nonmessage = function(e) {\\n  const message = e.data;\\n\\n  switch (message.type) {\\n    case \\\"init\\\":\\n      decoderConfig = message.decoderConfig;\\n      decoderPending = new Promise(function(resolve /*, reject*/) {\\n        decoderConfig.onModuleLoaded = function(draco) {\\n          // Module is Promise-like. Wrap before resolving to avoid loop.\\n          resolve({ draco: draco });\\n        };\\n        DracoDecoderModule(decoderConfig);\\n      });\\n      break;\\n\\n    case \\\"decode\\\":\\n      const buffer = message.buffer;\\n      const taskConfig = message.taskConfig;\\n      decoderPending.then(module => {\\n        const draco = module.draco;\\n        const decoder = new draco.Decoder();\\n        const decoderBuffer = new draco.DecoderBuffer();\\n        decoderBuffer.Init(new Int8Array(buffer), buffer.byteLength);\\n        try {\\n          const geometry = decodeGeometry(draco, decoder, decoderBuffer, taskConfig);\\n          const buffers = geometry.attributes.map(attr => attr.array.buffer);\\n          if (geometry.index) buffers.push(geometry.index.array.buffer);\\n          self.postMessage({ type: \\\"decode\\\", id: message.id, geometry }, buffers);\\n        } catch (error) {\\n          console.error(error);\\n          self.postMessage({ type: \\\"error\\\", id: message.id, error: error.message });\\n        } finally {\\n          draco.destroy(decoderBuffer);\\n          draco.destroy(decoder);\\n        }\\n      });\\n      break;\\n  }\\n};\\n\\nfunction decodeGeometry(draco, decoder, decoderBuffer, taskConfig) {\\n  const attributeIDs = taskConfig.attributeIDs;\\n  const attributeTypes = taskConfig.attributeTypes;\\n\\n  let dracoGeometry;\\n  let decodingStatus;\\n\\n  const geometryType = decoder.GetEncodedGeometryType(decoderBuffer);\\n  if (geometryType === draco.TRIANGULAR_MESH) {\\n    dracoGeometry = new draco.Mesh();\\n    decodingStatus = decoder.DecodeBufferToMesh(decoderBuffer, dracoGeometry);\\n  } else {\\n    throw new Error(\\\"DRACODecoder worker: Unexpected geometry type.\\\");\\n  }\\n\\n  if (!decodingStatus.ok() || dracoGeometry.ptr === 0) {\\n    throw new Error(\\\"DRACODecoder worker: Decoding failed: \\\" + decodingStatus.error_msg());\\n  }\\n\\n  const geometry = { index: null, attributes: [] };\\n\\n  // Gather all vertex attributes.\\n  for (let attributeName in attributeIDs) {\\n    const attributeType = self[attributeTypes[attributeName]];\\n\\n    let attribute;\\n    let attributeID;\\n\\n    // A Draco file may be created with default vertex attributes, whose attribute IDs\\n    // are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\\n    // a Draco file may contain a custom set of attributes, identified by known unique\\n    // IDs. glTF files always do the latter, and .drc files typically do the former.\\n    if (taskConfig.useUniqueIDs) {\\n      attributeID = attributeIDs[attributeName];\\n      attribute = decoder.GetAttributeByUniqueId(dracoGeometry, attributeID);\\n    } else {\\n      attributeID = decoder.GetAttributeId(dracoGeometry, draco[attributeIDs[attributeName]]);\\n      if (attributeID === -1) continue;\\n      attribute = decoder.GetAttribute(dracoGeometry, attributeID);\\n    }\\n    geometry.attributes.push(decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute));\\n  }\\n  // Add index.\\n  if (geometryType === draco.TRIANGULAR_MESH) {\\n    // Generate mesh faces.\\n    const numFaces = dracoGeometry.num_faces();\\n    const numIndices = numFaces * 3;\\n    let dataSize;\\n    let ptr;\\n    let index;\\n    const indexType = self[taskConfig.indexType];\\n\\n    switch (indexType) {\\n      case Uint16Array:\\n        dataSize = numIndices * 2;\\n        ptr = draco._malloc(dataSize);\\n        decoder.GetTrianglesUInt16Array(dracoGeometry, dataSize, ptr);\\n        index = new Uint16Array(draco.HEAPU16.buffer, ptr, numIndices).slice();\\n        draco._free(ptr);\\n        break;\\n      case Uint32Array:\\n        dataSize = numIndices * 4;\\n        ptr = draco._malloc(dataSize);\\n        decoder.GetTrianglesUInt32Array(dracoGeometry, dataSize, ptr);\\n        index = new Uint32Array(draco.HEAPU32.buffer, ptr, numIndices).slice();\\n        draco._free(ptr);\\n        break;\\n      default:\\n        throw new Error(\\\"DRACODecoder: Unexpected index type.\\\");\\n    }\\n    geometry.index = { array: index, itemSize: 1 };\\n  }\\n  draco.destroy(dracoGeometry);\\n  return geometry;\\n}\\n\\nfunction decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute) {\\n  const numComponents = attribute.num_components();\\n  const numPoints = dracoGeometry.num_points();\\n  const numValues = numPoints * numComponents;\\n  let ptr;\\n  let array;\\n  let dataSize;\\n  switch (attributeType) {\\n    case Float32Array:\\n      dataSize = numValues * 4;\\n      ptr = draco._malloc(dataSize);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_FLOAT32, dataSize, ptr);\\n      array = new Float32Array(draco.HEAPF32.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    case Int8Array:\\n      ptr = draco._malloc(numValues);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_INT8, numValues, ptr);\\n      array = new Int8Array(draco.HEAP8.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    case Int16Array:\\n      dataSize = numValues * 2;\\n      ptr = draco._malloc(dataSize);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_INT16, dataSize, ptr);\\n      array = new Int16Array(draco.HEAP16.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    case Int32Array:\\n      dataSize = numValues * 4;\\n      ptr = draco._malloc(dataSize);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_INT32, dataSize, ptr);\\n      array = new Int32Array(draco.HEAP32.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    case Uint8Array:\\n      ptr = draco._malloc(numValues);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_UINT8, numValues, ptr);\\n      array = new Uint8Array(draco.HEAPU8.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    case Uint16Array:\\n      dataSize = numValues * 2;\\n      ptr = draco._malloc(dataSize);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_UINT16, dataSize, ptr);\\n      array = new Uint16Array(draco.HEAPU16.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    case Uint32Array:\\n      dataSize = numValues * 4;\\n      ptr = draco._malloc(dataSize);\\n      decoder.GetAttributeDataArrayForAllPoints(dracoGeometry, attribute, draco.DT_UINT32, dataSize, ptr);\\n      array = new Uint32Array(draco.HEAPU32.buffer, ptr, numValues).slice();\\n      draco._free(ptr);\\n      break;\\n\\n    default:\\n      throw new Error(\\\"DRACODecoder: Unexpected attribute type.\\\");\\n  }\\n\\n  return {\\n    name: attributeName,\\n    array: array,\\n    itemSize: numComponents\\n  };\\n}\\n\";\n\nvar LIB_PATH = \"https://gw.alipayobjects.com/os/lib/alipay/draco-javascript/1.3.6/lib/\";\nvar JS_FILE = \"draco_decoder_gltf.js\";\nvar WASM_FILE = \"draco_decoder_gltf.r3bin\";\nvar WASM_WRAPPER_FILE = \"draco_wasm_wrapper_gltf.js\";\nvar DRACODecoder = /*#__PURE__*/function () {\n  function DRACODecoder(config) {\n    if (config === void 0) {\n      config = {\n        type: \"wasm\",\n        workerLimit: 4\n      };\n    }\n    this.pool = [];\n    this.workerLimit = Math.min(navigator.hardwareConcurrency || 4, 4);\n    this.useJS = void 0;\n    this.currentTaskId = 1;\n    this.taskCache = new WeakMap();\n    this.loadLibPromise = void 0;\n    if (config.workerLimit > this.workerLimit) {\n      Logger.warn(\"DRACOWorkerPool: Can not initialize worker pool with limit:\" + config.workerLimit);\n    } else {\n      var _config$workerLimit;\n      this.workerLimit = (_config$workerLimit = config.workerLimit) != null ? _config$workerLimit : 4;\n    }\n    this.useJS = typeof WebAssembly !== \"object\" || config.type === \"js\";\n    this.loadLibPromise = this.preloadLib();\n  }\n  var _proto = DRACODecoder.prototype;\n  _proto.preloadLib = function preloadLib() {\n    var _this = this;\n    if (this.loadLibPromise) {\n      return this.loadLibPromise;\n    }\n    return new Promise(function (resolve, reject) {\n      if (_this.useJS) {\n        request(\"\" + LIB_PATH + JS_FILE, {\n          type: \"text\"\n        }).then(function (jsSource) {\n          var body = [jsSource, workerString].join(\"\\n\");\n          var workerSourceURL = URL.createObjectURL(new Blob([body]));\n          resolve({\n            workerSourceURL: workerSourceURL,\n            decoderWASMBinary: null\n          });\n        }).catch(function (reason) {\n          reject(reason);\n        });\n      } else {\n        Promise.all([request(\"\" + LIB_PATH + WASM_WRAPPER_FILE, {\n          type: \"text\"\n        }), request(\"\" + LIB_PATH + WASM_FILE, {\n          type: \"arraybuffer\"\n        })]).then(function (resources) {\n          var wrapperSource = resources[0],\n            decoderWASMBinary = resources[1];\n          var body = [wrapperSource, workerString].join(\"\\n\");\n          var workerSourceURL = URL.createObjectURL(new Blob([body]));\n          resolve({\n            workerSourceURL: workerSourceURL,\n            decoderWASMBinary: decoderWASMBinary\n          });\n        }).catch(function (reason) {\n          reject(reason);\n        });\n      }\n    });\n  };\n  _proto.getWorker = function getWorker() {\n    var _this2 = this;\n    return this.preloadLib().then(function (worderResources) {\n      if (_this2.pool.length < _this2.workerLimit) {\n        var dracoWorker = new DRACOWorker(worderResources.workerSourceURL, worderResources.decoderWASMBinary);\n        _this2.pool.push(dracoWorker);\n      } else {\n        _this2.pool.sort(function (a, b) {\n          return a.currentLoad > b.currentLoad ? -1 : 1;\n        });\n      }\n      return _this2.pool[_this2.pool.length - 1];\n    });\n  };\n  _proto.decode = function decode(buffer, taskConfig) {\n    var _this3 = this;\n    var taskKey = JSON.stringify(taskConfig);\n\n    // Check for an existing task using this buffer. A transferred buffer cannot be transferred.\n    // again from this thread.\n    if (this.taskCache.has(buffer)) {\n      var cachedTask = this.taskCache.get(buffer);\n      if (cachedTask.key === taskKey) {\n        return cachedTask.promise;\n      } else if (buffer.byteLength === 0) {\n        // After using transferable to transfer data, the data in the original environment will be cleared, so it is judged that byteLength is 0, which means it has been transferred.\n        // Technically, it would be possible to wait for the previous task to complete,\n        // transfer the buffer back, and decode again with the second configuration. That\n        // is complex, and I don't know of any reason to decode a Draco buffer twice in\n        // different ways, so this is left unimplemented.\n        throw new Error(\"DRACODecoder: Unable to re-decode a buffer with different \" + \"settings. Buffer has already been transferred.\");\n      }\n    }\n    var taskId = this.currentTaskId++;\n    var cost = buffer.byteLength;\n    var taskWorker;\n    var task = new Promise(function (resolve, reject) {\n      _this3.getWorker().then(function (worker) {\n        taskWorker = worker;\n        worker.setCosts(taskId, cost);\n        worker.addCurrentLoad(cost);\n        worker.setCallback(taskId, resolve, reject);\n        worker.decode(taskId, taskConfig, buffer);\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n    task.finally(function () {\n      if (taskWorker && taskId) {\n        taskWorker.releaseTask(taskId);\n      }\n    });\n    this.taskCache.set(buffer, {\n      key: taskKey,\n      promise: task\n    });\n    return task;\n  };\n  return DRACODecoder;\n}();\n\nexport { DRACODecoder };\n//# sourceMappingURL=module.js.map\n","import { resourceLoader, AssetType, AssetPromise, Loader, VertexElement, IndexFormat, VertexElementFormat, AnimationClip, InterpolationType, InterpolableValueType, AnimationCurve, InterpolableKeyframe, SkinnedMeshRenderer, Transform, Entity, PBRMaterial, TextureCoordinate, Logger, RenderFace, BlendShape, ModelMesh, BlinnPhongMaterial, Camera, Animator, AnimatorController, AnimatorControllerLayer, AnimatorStateMachine, MeshRenderer, Skin, TextureWrapMode as TextureWrapMode$1, Texture2D, EngineObject, TextureFormat, TextureCube, TextureCubeFace, Sprite, SpriteAtlas, TextureFilterMode, AmbientLight, DiffuseMode, DirectLight, PointLight, SpotLight, PBRSpecularMaterial, UnlitMaterial, Scene, AnimatorStateTransition, BackgroundMode, SkyBoxMaterial, PrimitiveMesh } from '@oasis-engine/core';\nimport { Vector2, Vector3, Vector4, Color, Quaternion, Matrix, Rect, SphericalHarmonics3 } from '@oasis-engine/math';\nimport { GLCompressedTextureInternalFormat } from '@oasis-engine/rhi-webgl';\nimport { DRACODecoder } from '@oasis-engine/draco';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _regeneratorRuntime() {\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function (method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return ContinueSentinel;\n    }\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar _dec$r, _class$r;\nfunction isBase64(url) {\n  return /^data:(.+?);base64,/.test(url);\n}\n(_dec$r = resourceLoader(AssetType.Buffer, [\"bin\", \"r3bin\"], false), _dec$r(_class$r = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(BufferLoader, _Loader);\n  function BufferLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = BufferLoader.prototype;\n  _proto.load = function load(item) {\n    var url = item.url;\n    if (isBase64(url)) {\n      return new AssetPromise(function (resolve) {\n        var base64Str = url.slice(13 + RegExp.$1.length);\n        var result = Uint8Array.from(atob(base64Str), function (c) {\n          return c.charCodeAt(0);\n        });\n        resolve(result.buffer);\n      });\n    }\n    return this.request(url, _objectSpread2(_objectSpread2({}, item), {}, {\n      type: \"arraybuffer\"\n    }));\n  };\n  return BufferLoader;\n}(Loader)) || _class$r);\n\n/**\n * Module for glTF 2.0 Interface\n */\n\n/**\n * The datatype of the components in the attribute\n */\nvar AccessorComponentType;\n\n/**\n * Specifies if the attirbute is a scalar, vector, or matrix\n */\n(function (AccessorComponentType) {\n  AccessorComponentType[AccessorComponentType[\"BYTE\"] = 5120] = \"BYTE\";\n  AccessorComponentType[AccessorComponentType[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n  AccessorComponentType[AccessorComponentType[\"SHORT\"] = 5122] = \"SHORT\";\n  AccessorComponentType[AccessorComponentType[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n  AccessorComponentType[AccessorComponentType[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n  AccessorComponentType[AccessorComponentType[\"FLOAT\"] = 5126] = \"FLOAT\";\n})(AccessorComponentType || (AccessorComponentType = {}));\nvar AccessorType;\n\n/**\n * The name of the node's TRS property to modify, or the weights of the Morph Targets it instantiates\n */\n(function (AccessorType) {\n  AccessorType[\"SCALAR\"] = \"SCALAR\";\n  AccessorType[\"VEC2\"] = \"VEC2\";\n  AccessorType[\"VEC3\"] = \"VEC3\";\n  AccessorType[\"VEC4\"] = \"VEC4\";\n  AccessorType[\"MAT2\"] = \"MAT2\";\n  AccessorType[\"MAT3\"] = \"MAT3\";\n  AccessorType[\"MAT4\"] = \"MAT4\";\n})(AccessorType || (AccessorType = {}));\nvar AnimationChannelTargetPath;\n\n/**\n * Interpolation algorithm\n */\n(function (AnimationChannelTargetPath) {\n  AnimationChannelTargetPath[\"TRANSLATION\"] = \"translation\";\n  AnimationChannelTargetPath[\"ROTATION\"] = \"rotation\";\n  AnimationChannelTargetPath[\"SCALE\"] = \"scale\";\n  AnimationChannelTargetPath[\"WEIGHTS\"] = \"weights\";\n})(AnimationChannelTargetPath || (AnimationChannelTargetPath = {}));\nvar AnimationSamplerInterpolation;\n\n/**\n * A camera's projection.  A node can reference a camera to apply a transform to place the camera in the scene\n */\n(function (AnimationSamplerInterpolation) {\n  AnimationSamplerInterpolation[\"Linear\"] = \"LINEAR\";\n  AnimationSamplerInterpolation[\"Step\"] = \"STEP\";\n  AnimationSamplerInterpolation[\"CubicSpine\"] = \"CUBICSPLINE\";\n})(AnimationSamplerInterpolation || (AnimationSamplerInterpolation = {}));\nvar CameraType;\n\n/**\n * The mime-type of the image\n */\n(function (CameraType) {\n  CameraType[\"PERSPECTIVE\"] = \"perspective\";\n  CameraType[\"ORTHOGRAPHIC\"] = \"orthographic\";\n})(CameraType || (CameraType = {}));\nvar ImageMimeType;\n\n/**\n * The alpha rendering mode of the material\n */\n(function (ImageMimeType) {\n  ImageMimeType[\"JPEG\"] = \"image/jpeg\";\n  ImageMimeType[\"PNG\"] = \"image/png\";\n})(ImageMimeType || (ImageMimeType = {}));\nvar MaterialAlphaMode;\n\n/**\n * Magnification filter.  Valid values correspond to WebGL enums: 9728 (NEAREST) and 9729 (LINEAR)\n */\n(function (MaterialAlphaMode) {\n  MaterialAlphaMode[\"OPAQUE\"] = \"OPAQUE\";\n  MaterialAlphaMode[\"MASK\"] = \"MASK\";\n  MaterialAlphaMode[\"BLEND\"] = \"BLEND\";\n})(MaterialAlphaMode || (MaterialAlphaMode = {}));\nvar TextureMagFilter;\n\n/**\n * Minification filter.  All valid values correspond to WebGL enums\n */\n(function (TextureMagFilter) {\n  TextureMagFilter[TextureMagFilter[\"NEAREST\"] = 9728] = \"NEAREST\";\n  TextureMagFilter[TextureMagFilter[\"LINEAR\"] = 9729] = \"LINEAR\";\n})(TextureMagFilter || (TextureMagFilter = {}));\nvar TextureMinFilter;\n\n/**\n * S (U) wrapping mode.  All valid values correspond to WebGL enums\n */\n(function (TextureMinFilter) {\n  TextureMinFilter[TextureMinFilter[\"NEAREST\"] = 9728] = \"NEAREST\";\n  TextureMinFilter[TextureMinFilter[\"LINEAR\"] = 9729] = \"LINEAR\";\n  TextureMinFilter[TextureMinFilter[\"NEAREST_MIPMAP_NEAREST\"] = 9984] = \"NEAREST_MIPMAP_NEAREST\";\n  TextureMinFilter[TextureMinFilter[\"LINEAR_MIPMAP_NEAREST\"] = 9985] = \"LINEAR_MIPMAP_NEAREST\";\n  TextureMinFilter[TextureMinFilter[\"NEAREST_MIPMAP_LINEAR\"] = 9986] = \"NEAREST_MIPMAP_LINEAR\";\n  TextureMinFilter[TextureMinFilter[\"LINEAR_MIPMAP_LINEAR\"] = 9987] = \"LINEAR_MIPMAP_LINEAR\";\n})(TextureMinFilter || (TextureMinFilter = {}));\nvar TextureWrapMode;\n\n/**\n * glTF Property\n */\n(function (TextureWrapMode) {\n  TextureWrapMode[TextureWrapMode[\"CLAMP_TO_EDGE\"] = 33071] = \"CLAMP_TO_EDGE\";\n  TextureWrapMode[TextureWrapMode[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\n  TextureWrapMode[TextureWrapMode[\"REPEAT\"] = 10497] = \"REPEAT\";\n})(TextureWrapMode || (TextureWrapMode = {}));\n\n/**\n * @internal\n */\nvar GLTFUtil = /*#__PURE__*/function () {\n  function GLTFUtil() {}\n  GLTFUtil.floatBufferToVector2Array = function floatBufferToVector2Array(buffer) {\n    var bufferLen = buffer.length;\n    var array = new Array(bufferLen / 2);\n    for (var i = 0; i < bufferLen; i += 2) {\n      array[i / 2] = new Vector2(buffer[i], buffer[i + 1]);\n    }\n    return array;\n  };\n  GLTFUtil.floatBufferToVector3Array = function floatBufferToVector3Array(buffer) {\n    var bufferLen = buffer.length;\n    var array = new Array(bufferLen / 3);\n    for (var i = 0; i < bufferLen; i += 3) {\n      array[i / 3] = new Vector3(buffer[i], buffer[i + 1], buffer[i + 2]);\n    }\n    return array;\n  };\n  GLTFUtil.floatBufferToVector4Array = function floatBufferToVector4Array(buffer) {\n    var bufferLen = buffer.length;\n    var array = new Array(bufferLen / 4);\n    for (var i = 0; i < bufferLen; i += 4) {\n      array[i / 4] = new Vector4(buffer[i], buffer[i + 1], buffer[i + 2], buffer[i + 3]);\n    }\n    return array;\n  };\n  GLTFUtil.floatBufferToColorArray = function floatBufferToColorArray(buffer, isColor3) {\n    var bufferLen = buffer.length;\n    var colors = new Array(bufferLen / (isColor3 ? 3 : 4));\n    if (isColor3) {\n      for (var i = 0; i < bufferLen; i += 3) {\n        colors[i / 3] = new Color(buffer[i], buffer[i + 1], buffer[i + 2], 1.0);\n      }\n    } else {\n      for (var _i = 0; _i < bufferLen; _i += 4) {\n        colors[_i / 4] = new Color(buffer[_i], buffer[_i + 1], buffer[_i + 2], buffer[_i + 3]);\n      }\n    }\n    return colors;\n  }\n\n  /**\n   * Parse binary text for glb loader.\n   */;\n  GLTFUtil.decodeText = function decodeText(array) {\n    if (typeof TextDecoder !== \"undefined\") {\n      return new TextDecoder().decode(array);\n    }\n\n    // TextDecoder polyfill\n    var s = \"\";\n    for (var i = 0, il = array.length; i < il; i++) {\n      s += String.fromCharCode(array[i]);\n    }\n    return decodeURIComponent(encodeURIComponent(s));\n  }\n\n  /**\n   * Get the number of bytes occupied by accessor type.\n   */;\n  GLTFUtil.getAccessorTypeSize = function getAccessorTypeSize(accessorType) {\n    switch (accessorType) {\n      case AccessorType.SCALAR:\n        return 1;\n      case AccessorType.VEC2:\n        return 2;\n      case AccessorType.VEC3:\n        return 3;\n      case AccessorType.VEC4:\n        return 4;\n      case AccessorType.MAT2:\n        return 4;\n      case AccessorType.MAT3:\n        return 9;\n      case AccessorType.MAT4:\n        return 16;\n    }\n  }\n\n  /**\n   * Get the TypedArray corresponding to the component type.\n   */;\n  GLTFUtil.getComponentType = function getComponentType(componentType) {\n    switch (componentType) {\n      case AccessorComponentType.BYTE:\n        return Int8Array;\n      case AccessorComponentType.UNSIGNED_BYTE:\n        return Uint8Array;\n      case AccessorComponentType.SHORT:\n        return Int16Array;\n      case AccessorComponentType.UNSIGNED_SHORT:\n        return Uint16Array;\n      case AccessorComponentType.UNSIGNED_INT:\n        return Uint32Array;\n      case AccessorComponentType.FLOAT:\n        return Float32Array;\n    }\n  }\n\n  /**\n   * Get accessor data.\n   */;\n  GLTFUtil.getAccessorData = function getAccessorData(gltf, accessor, buffers) {\n    var _bufferView$byteStrid;\n    var bufferViews = gltf.bufferViews;\n    var bufferView = bufferViews[accessor.bufferView];\n    var arrayBuffer = buffers[bufferView.buffer];\n    var accessorByteOffset = accessor.hasOwnProperty(\"byteOffset\") ? accessor.byteOffset : 0;\n    var bufferViewByteOffset = bufferView.hasOwnProperty(\"byteOffset\") ? bufferView.byteOffset : 0;\n    var byteOffset = accessorByteOffset + bufferViewByteOffset;\n    var accessorTypeSize = GLTFUtil.getAccessorTypeSize(accessor.type);\n    var length = accessorTypeSize * accessor.count;\n    var byteStride = (_bufferView$byteStrid = bufferView.byteStride) != null ? _bufferView$byteStrid : 0;\n    var arrayType = GLTFUtil.getComponentType(accessor.componentType);\n    var uint8Array;\n    if (byteStride) {\n      var accessorByteSize = accessorTypeSize * arrayType.BYTES_PER_ELEMENT;\n      uint8Array = new Uint8Array(accessor.count * accessorByteSize);\n      var originalBufferView = new Uint8Array(arrayBuffer, bufferViewByteOffset, bufferView.byteLength);\n      for (var i = 0; i < accessor.count; i++) {\n        for (var j = 0; j < accessorByteSize; j++) {\n          uint8Array[i * accessorByteSize + j] = originalBufferView[i * byteStride + accessorByteOffset + j];\n        }\n      }\n    } else {\n      uint8Array = new Uint8Array(arrayBuffer.slice(byteOffset, byteOffset + length * arrayType.BYTES_PER_ELEMENT));\n    }\n    var typedArray = new arrayType(uint8Array.buffer);\n    if (accessor.sparse) {\n      var _indices$byteOffset, _indicesBufferView$by, _values$byteOffset, _valuesBufferView$byt;\n      var _accessor$sparse = accessor.sparse,\n        count = _accessor$sparse.count,\n        indices = _accessor$sparse.indices,\n        values = _accessor$sparse.values;\n      var indicesBufferView = bufferViews[indices.bufferView];\n      var valuesBufferView = bufferViews[values.bufferView];\n      var indicesArrayBuffer = buffers[indicesBufferView.buffer];\n      var valuesArrayBuffer = buffers[valuesBufferView.buffer];\n      var indicesByteOffset = ((_indices$byteOffset = indices.byteOffset) != null ? _indices$byteOffset : 0) + ((_indicesBufferView$by = indicesBufferView.byteOffset) != null ? _indicesBufferView$by : 0);\n      var indicesByteLength = indicesBufferView.byteLength;\n      var valuesByteOffset = ((_values$byteOffset = values.byteOffset) != null ? _values$byteOffset : 0) + ((_valuesBufferView$byt = valuesBufferView.byteOffset) != null ? _valuesBufferView$byt : 0);\n      var valuesByteLength = valuesBufferView.byteLength;\n      var indicesType = GLTFUtil.getComponentType(indices.componentType);\n      var indicesArray = new indicesType(indicesArrayBuffer, indicesByteOffset, indicesByteLength / indicesType.BYTES_PER_ELEMENT);\n      var valuesArray = new arrayType(valuesArrayBuffer, valuesByteOffset, valuesByteLength / arrayType.BYTES_PER_ELEMENT);\n      for (var _i2 = 0; _i2 < count; _i2++) {\n        var replaceIndex = indicesArray[_i2];\n        for (var _j = 0; _j < accessorTypeSize; _j++) {\n          typedArray[replaceIndex * accessorTypeSize + _j] = valuesArray[_i2 * accessorTypeSize + _j];\n        }\n      }\n    }\n    return typedArray;\n  };\n  GLTFUtil.getBufferViewData = function getBufferViewData(bufferView, buffers) {\n    var buffer = bufferView.buffer,\n      _bufferView$byteOffse = bufferView.byteOffset,\n      byteOffset = _bufferView$byteOffse === void 0 ? 0 : _bufferView$byteOffse,\n      byteLength = bufferView.byteLength;\n    var arrayBuffer = buffers[buffer];\n    return arrayBuffer.slice(byteOffset, byteOffset + byteLength);\n  };\n  GLTFUtil.getVertexStride = function getVertexStride(gltf, accessor) {\n    var _accessor$bufferView;\n    var stride = gltf.bufferViews[(_accessor$bufferView = accessor.bufferView) != null ? _accessor$bufferView : 0].byteStride;\n    if (stride) {\n      return stride;\n    }\n    var size = GLTFUtil.getAccessorTypeSize(accessor.type);\n    var componentType = GLTFUtil.getComponentType(accessor.componentType);\n    return size * componentType.BYTES_PER_ELEMENT;\n  };\n  GLTFUtil.createVertexElement = function createVertexElement(semantic, accessor, index) {\n    var size = GLTFUtil.getAccessorTypeSize(accessor.type);\n    return new VertexElement(semantic, 0, GLTFUtil.getElementFormat(accessor.componentType, size, accessor.normalized), index);\n  };\n  GLTFUtil.getIndexFormat = function getIndexFormat(type) {\n    switch (type) {\n      case AccessorComponentType.UNSIGNED_BYTE:\n        return IndexFormat.UInt8;\n      case AccessorComponentType.UNSIGNED_SHORT:\n        return IndexFormat.UInt16;\n      case AccessorComponentType.UNSIGNED_INT:\n        return IndexFormat.UInt32;\n    }\n  };\n  GLTFUtil.getElementFormat = function getElementFormat(type, size, normalized) {\n    if (normalized === void 0) {\n      normalized = false;\n    }\n    if (type == AccessorComponentType.FLOAT) {\n      switch (size) {\n        case 1:\n          return VertexElementFormat.Float;\n        case 2:\n          return VertexElementFormat.Vector2;\n        case 3:\n          return VertexElementFormat.Vector3;\n        case 4:\n          return VertexElementFormat.Vector4;\n      }\n    }\n    if (type == AccessorComponentType.SHORT) {\n      switch (size) {\n        case 2:\n          return normalized ? VertexElementFormat.NormalizedShort2 : VertexElementFormat.Short2;\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedShort4 : VertexElementFormat.Short4;\n      }\n    }\n    if (type == AccessorComponentType.UNSIGNED_SHORT) {\n      switch (size) {\n        case 2:\n          return normalized ? VertexElementFormat.NormalizedUShort2 : VertexElementFormat.UShort2;\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedUShort4 : VertexElementFormat.UShort4;\n      }\n    }\n    if (type == AccessorComponentType.BYTE) {\n      switch (size) {\n        case 2:\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedByte4 : VertexElementFormat.Byte4;\n      }\n    }\n    if (type == AccessorComponentType.UNSIGNED_BYTE) {\n      switch (size) {\n        case 2:\n        case 3:\n        case 4:\n          return normalized ? VertexElementFormat.NormalizedUByte4 : VertexElementFormat.UByte4;\n      }\n    }\n  }\n\n  /**\n   * Load image buffer\n   */;\n  GLTFUtil.loadImageBuffer = function loadImageBuffer(imageBuffer, type) {\n    return new Promise(function (resolve, reject) {\n      var blob = new window.Blob([imageBuffer], {\n        type: type\n      });\n      var img = new Image();\n      img.onerror = function () {\n        reject(new Error(\"Failed to load image buffer\"));\n      };\n      img.onload = function () {\n        // Call requestAnimationFrame to avoid iOS's bug.\n        requestAnimationFrame(function () {\n          resolve(img);\n          img.onload = null;\n          img.onerror = null;\n          img.onabort = null;\n        });\n      };\n      img.crossOrigin = \"anonymous\";\n      img.src = URL.createObjectURL(blob);\n    });\n  };\n  GLTFUtil.isAbsoluteUrl = function isAbsoluteUrl(url) {\n    return /^(?:http|blob|data:|\\/)/.test(url);\n  };\n  GLTFUtil.parseRelativeUrl = function parseRelativeUrl(baseUrl, relativeUrl) {\n    if (GLTFUtil.isAbsoluteUrl(relativeUrl)) {\n      return relativeUrl;\n    }\n    var char0 = relativeUrl.charAt(0);\n    if (char0 === \".\") {\n      return GLTFUtil._formatRelativePath(relativeUrl + relativeUrl);\n    }\n    return baseUrl.substring(0, baseUrl.lastIndexOf(\"/\") + 1) + relativeUrl;\n  }\n\n  /**\n   * Parse the glb format.\n   */;\n  GLTFUtil.parseGLB = function parseGLB(glb) {\n    var UINT32_LENGTH = 4;\n    var GLB_HEADER_MAGIC = 0x46546c67; // 'glTF'\n    var GLB_HEADER_LENGTH = 12;\n    var GLB_CHUNK_TYPES = {\n      JSON: 0x4e4f534a,\n      BIN: 0x004e4942\n    };\n    var dataView = new DataView(glb);\n\n    // read header\n    var header = {\n      magic: dataView.getUint32(0, true),\n      version: dataView.getUint32(UINT32_LENGTH, true),\n      length: dataView.getUint32(2 * UINT32_LENGTH, true)\n    };\n    if (header.magic !== GLB_HEADER_MAGIC) {\n      console.error(\"Invalid glb magic number. Expected 0x46546C67, found 0x\" + header.magic.toString(16));\n      return null;\n    }\n\n    // read main data\n    var chunkLength = dataView.getUint32(GLB_HEADER_LENGTH, true);\n    var chunkType = dataView.getUint32(GLB_HEADER_LENGTH + UINT32_LENGTH, true);\n\n    // read glTF json\n    if (chunkType !== GLB_CHUNK_TYPES.JSON) {\n      console.error(\"Invalid glb chunk type. Expected 0x4E4F534A, found 0x\" + chunkType.toString(16));\n      return null;\n    }\n    var glTFData = new Uint8Array(glb, GLB_HEADER_LENGTH + 2 * UINT32_LENGTH, chunkLength);\n    var gltf = JSON.parse(GLTFUtil.decodeText(glTFData));\n\n    // read all buffers\n    var buffers = [];\n    var byteOffset = GLB_HEADER_LENGTH + 2 * UINT32_LENGTH + chunkLength;\n    while (byteOffset < header.length) {\n      chunkLength = dataView.getUint32(byteOffset, true);\n      chunkType = dataView.getUint32(byteOffset + UINT32_LENGTH, true);\n      if (chunkType !== GLB_CHUNK_TYPES.BIN) {\n        console.error(\"Invalid glb chunk type. Expected 0x004E4942, found 0x\" + chunkType.toString(16));\n        return null;\n      }\n      var currentOffset = byteOffset + 2 * UINT32_LENGTH;\n      var buffer = glb.slice(currentOffset, currentOffset + chunkLength);\n      buffers.push(buffer);\n      byteOffset += chunkLength + 2 * UINT32_LENGTH;\n    }\n    return {\n      gltf: gltf,\n      buffers: buffers\n    };\n  };\n  GLTFUtil._formatRelativePath = function _formatRelativePath(value) {\n    var parts = value.split(\"/\");\n    for (var i = 0, n = parts.length; i < n; i++) {\n      if (parts[i] == \"..\") {\n        parts.splice(i - 1, 2);\n        i -= 2;\n      }\n    }\n    return parts.join(\"/\");\n  };\n  return GLTFUtil;\n}();\n\nvar Parser = /*#__PURE__*/function () {\n  function Parser() {}\n  Parser.parseEngineResource = function parseEngineResource(extensionName, extensionSchema, parseResource, context) {\n    var parsers = Parser._extensionParsers[extensionName];\n    if (parsers !== null && parsers !== void 0 && parsers.length) {\n      for (var _len = arguments.length, extra = new Array(_len > 4 ? _len - 4 : 0), _key = 4; _key < _len; _key++) {\n        extra[_key - 4] = arguments[_key];\n      }\n      for (var i = 0; i < parsers.length; i++) {\n        var _parsers$i;\n        (_parsers$i = parsers[i]).parseEngineResource.apply(_parsers$i, [extensionSchema, parseResource, context].concat(extra));\n      }\n    }\n  };\n  Parser.createEngineResource = function createEngineResource(extensionName, extensionSchema, context) {\n    var parsers = Parser._extensionParsers[extensionName];\n    if (parsers !== null && parsers !== void 0 && parsers.length) {\n      var _parsers$;\n      for (var _len2 = arguments.length, extra = new Array(_len2 > 3 ? _len2 - 3 : 0), _key2 = 3; _key2 < _len2; _key2++) {\n        extra[_key2 - 3] = arguments[_key2];\n      }\n      return (_parsers$ = parsers[0]).createEngineResource.apply(_parsers$, [extensionSchema, context].concat(extra));\n    }\n  };\n  Parser.hasExtensionParser = function hasExtensionParser(extensionName) {\n    var parsers = Parser._extensionParsers[extensionName];\n    return !!(parsers !== null && parsers !== void 0 && parsers.length);\n  };\n  Parser.initialize = function initialize(extensionName) {\n    var parsers = Parser._extensionParsers[extensionName];\n    if (parsers !== null && parsers !== void 0 && parsers.length) {\n      for (var i = 0; i < parsers.length; i++) {\n        parsers[i].initialize();\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */;\n  Parser._addExtensionParser = function _addExtensionParser(extensionName, extensionParser) {\n    if (!Parser._extensionParsers[extensionName]) {\n      Parser._extensionParsers[extensionName] = [];\n    }\n    Parser._extensionParsers[extensionName].push(extensionParser);\n  };\n  return Parser;\n}();\n\n/**\n * Declare ExtensionParser's decorator.\n * @param extensionName - Extension name\n */\nParser._extensionParsers = {};\nfunction registerExtension(extensionName) {\n  return function (parser) {\n    var extensionParser = new parser();\n    Parser._addExtensionParser(extensionName, extensionParser);\n  };\n}\n\nvar AnimationParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(AnimationParser, _Parser);\n  function AnimationParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = AnimationParser.prototype;\n  _proto.parse = function parse(context) {\n    var gltf = context.gltf,\n      buffers = context.buffers,\n      entities = context.entities;\n    var animations = gltf.animations,\n      accessors = gltf.accessors;\n    if (!animations) {\n      return;\n    }\n    var animationClipCount = animations.length;\n    var animationClips = new Array(animationClipCount);\n    var animationsIndices = new Array(animationClipCount);\n    for (var i = 0; i < animationClipCount; i++) {\n      var gltfAnimation = animations[i];\n      var channels = gltfAnimation.channels,\n        samplers = gltfAnimation.samplers,\n        _gltfAnimation$name = gltfAnimation.name,\n        name = _gltfAnimation$name === void 0 ? \"AnimationClip\" + i : _gltfAnimation$name;\n      var animationClip = new AnimationClip(name);\n      var sampleDataCollection = new Array();\n\n      // parse samplers\n      for (var _i = 0; _i < samplers.length; _i++) {\n        var _gltfSampler$interpol;\n        var gltfSampler = samplers[_i];\n        var inputAccessor = accessors[gltfSampler.input];\n        var outputAccessor = accessors[gltfSampler.output];\n        var input = GLTFUtil.getAccessorData(gltf, inputAccessor, buffers);\n        var output = GLTFUtil.getAccessorData(gltf, outputAccessor, buffers);\n        var outputAccessorSize = output.length / input.length;\n        var interpolation = (_gltfSampler$interpol = gltfSampler.interpolation) != null ? _gltfSampler$interpol : AnimationSamplerInterpolation.Linear;\n        var samplerInterpolation = void 0;\n        switch (interpolation) {\n          case AnimationSamplerInterpolation.CubicSpine:\n            samplerInterpolation = InterpolationType.CubicSpine;\n            break;\n          case AnimationSamplerInterpolation.Step:\n            samplerInterpolation = InterpolationType.Step;\n            break;\n          case AnimationSamplerInterpolation.Linear:\n            samplerInterpolation = InterpolationType.Linear;\n            break;\n        }\n        input[input.length - 1];\n        sampleDataCollection.push({\n          type: outputAccessor.type,\n          interpolation: samplerInterpolation,\n          input: input,\n          output: output,\n          outputSize: outputAccessorSize\n        });\n      }\n      for (var _i2 = 0; _i2 < channels.length; _i2++) {\n        var gltfChannel = channels[_i2];\n        var target = gltfChannel.target;\n        var channelTargetEntity = entities[target.node];\n        var relativePath = \"\";\n        var entity = channelTargetEntity;\n        while (entity.parent) {\n          relativePath = relativePath === \"\" ? \"\" + entity.name : entity.name + \"/\" + relativePath;\n          entity = entity.parent;\n        }\n        var compType = void 0;\n        var propertyName = void 0;\n        var interpolableValueType = void 0;\n        switch (target.path) {\n          case AnimationChannelTargetPath.TRANSLATION:\n            compType = Transform;\n            propertyName = \"position\";\n            interpolableValueType = InterpolableValueType.Vector3;\n            break;\n          case AnimationChannelTargetPath.ROTATION:\n            compType = Transform;\n            propertyName = \"rotation\";\n            interpolableValueType = InterpolableValueType.Quaternion;\n            break;\n          case AnimationChannelTargetPath.SCALE:\n            compType = Transform;\n            propertyName = \"scale\";\n            interpolableValueType = InterpolableValueType.Vector3;\n            break;\n          case AnimationChannelTargetPath.WEIGHTS:\n            compType = SkinnedMeshRenderer;\n            propertyName = \"blendShapeWeights\";\n            interpolableValueType = InterpolableValueType.FloatArray;\n            break;\n        }\n        var curve = this._addCurve(interpolableValueType, gltfChannel, sampleDataCollection);\n        animationClip.addCurveBinding(relativePath, compType, propertyName, curve);\n      }\n      animationClips[i] = animationClip;\n      animationsIndices[i] = {\n        name: name,\n        index: i\n      };\n    }\n    context.animations = animationClips;\n    // @ts-ignore for editor\n    context._animationsIndices = animationsIndices;\n  };\n  _proto._addCurve = function _addCurve(interpolableValueType, gltfChannel, sampleDataCollection) {\n    var curve = new AnimationCurve();\n    var sampleData = sampleDataCollection[gltfChannel.sampler];\n    var input = sampleData.input,\n      output = sampleData.output,\n      outputSize = sampleData.outputSize;\n    curve.interpolation = sampleData.interpolation;\n    for (var j = 0, n = input.length; j < n; j++) {\n      var offset = j * outputSize;\n      if (interpolableValueType === InterpolableValueType.Float) {\n        var keyframe = new InterpolableKeyframe();\n        keyframe.time = input[j];\n        keyframe.inTangent = 0;\n        keyframe.outTangent = 0;\n        keyframe.value = output[offset];\n        curve.addKey(keyframe);\n      } else if (interpolableValueType === InterpolableValueType.FloatArray) {\n        var _keyframe = new InterpolableKeyframe();\n        _keyframe.time = input[j];\n        _keyframe.inTangent = new Float32Array(outputSize);\n        _keyframe.outTangent = new Float32Array(outputSize);\n        _keyframe.value = output.subarray(offset, offset + outputSize);\n        curve.addKey(_keyframe);\n      } else if (interpolableValueType === InterpolableValueType.Vector2) {\n        var _keyframe2 = new InterpolableKeyframe();\n        _keyframe2.time = input[j];\n        _keyframe2.value = new Vector2(output[offset], output[offset + 1]);\n        _keyframe2.inTangent = new Vector2();\n        _keyframe2.outTangent = new Vector2();\n        curve.addKey(_keyframe2);\n      } else if (interpolableValueType === InterpolableValueType.Vector3) {\n        var _keyframe3 = new InterpolableKeyframe();\n        _keyframe3.time = input[j];\n        _keyframe3.value = new Vector3(output[offset], output[offset + 1], output[offset + 2]);\n        _keyframe3.inTangent = new Vector3();\n        _keyframe3.outTangent = new Vector3();\n        curve.addKey(_keyframe3);\n      } else if (interpolableValueType === InterpolableValueType.Vector4) {\n        var _keyframe4 = new InterpolableKeyframe();\n        _keyframe4.time = input[j];\n        _keyframe4.value = new Vector4(output[offset], output[offset + 1], output[offset + 2], output[offset + 3]);\n        _keyframe4.inTangent = new Vector4();\n        _keyframe4.outTangent = new Vector4();\n        curve.addKey(_keyframe4);\n      } else if (interpolableValueType === InterpolableValueType.Quaternion) {\n        var _keyframe5 = new InterpolableKeyframe();\n        _keyframe5.time = input[j];\n        _keyframe5.value = new Quaternion(output[offset], output[offset + 1], output[offset + 2], output[offset + 3]);\n        _keyframe5.inTangent = new Vector4();\n        _keyframe5.outTangent = new Vector4();\n        curve.addKey(_keyframe5);\n      }\n    }\n    return curve;\n  };\n  return AnimationParser;\n}(Parser);\n\nvar BufferParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(BufferParser, _Parser);\n  function BufferParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = BufferParser.prototype;\n  _proto.parse = function parse(context) {\n    var url = context.url,\n      engine = context.engine;\n    if (this._isGLB(url)) {\n      return engine.resourceManager.load({\n        url: url,\n        type: AssetType.Buffer\n      }).then(GLTFUtil.parseGLB).then(function (_ref) {\n        var gltf = _ref.gltf,\n          buffers = _ref.buffers;\n        context.gltf = gltf;\n        context.buffers = buffers;\n      });\n    } else {\n      return engine.resourceManager.load({\n        url: url,\n        type: AssetType.JSON\n      }).then(function (gltf) {\n        context.gltf = gltf;\n        return Promise.all(gltf.buffers.map(function (buffer) {\n          return engine.resourceManager.load({\n            type: AssetType.Buffer,\n            url: GLTFUtil.parseRelativeUrl(url, buffer.uri)\n          });\n        })).then(function (buffers) {\n          context.buffers = buffers;\n        });\n      });\n    }\n  };\n  _proto._isGLB = function _isGLB(url) {\n    return url.substring(url.lastIndexOf(\".\") + 1) === \"glb\";\n  };\n  return BufferParser;\n}(Parser);\n\nvar EntityParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(EntityParser, _Parser);\n  function EntityParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = EntityParser.prototype;\n  /** @internal */\n  _proto.parse = function parse(context) {\n    var engine = context.engine,\n      nodes = context.gltf.nodes;\n    if (!nodes) return;\n    var entities = [];\n    for (var i = 0; i < nodes.length; i++) {\n      var gltfNode = nodes[i];\n      var matrix = gltfNode.matrix,\n        translation = gltfNode.translation,\n        rotation = gltfNode.rotation,\n        scale = gltfNode.scale;\n      var entity = new Entity(engine, gltfNode.name || \"\" + EntityParser._defaultName + i);\n      var _entity = entity,\n        transform = _entity.transform;\n      if (matrix) {\n        var localMatrix = transform.localMatrix;\n        localMatrix.copyFromArray(matrix);\n        transform.localMatrix = localMatrix;\n      } else {\n        if (translation) {\n          transform.setPosition(translation[0], translation[1], translation[2]);\n        }\n        if (rotation) {\n          transform.setRotationQuaternion(rotation[0], rotation[1], rotation[2], rotation[3]);\n        }\n        if (scale) {\n          transform.setScale(scale[0], scale[1], scale[2]);\n        }\n      }\n      entities[i] = entity;\n    }\n    context.entities = entities;\n    this._buildEntityTree(context);\n    this._createSceneRoots(context);\n  };\n  _proto._buildEntityTree = function _buildEntityTree(context) {\n    var nodes = context.gltf.nodes,\n      entities = context.entities;\n    for (var i = 0; i < nodes.length; i++) {\n      var children = nodes[i].children;\n      var entity = entities[i];\n      if (children) {\n        for (var j = 0; j < children.length; j++) {\n          var childEntity = entities[children[j]];\n          entity.addChild(childEntity);\n        }\n      }\n    }\n  };\n  _proto._createSceneRoots = function _createSceneRoots(context) {\n    var engine = context.engine,\n      _context$gltf = context.gltf,\n      _context$gltf$scene = _context$gltf.scene,\n      sceneID = _context$gltf$scene === void 0 ? 0 : _context$gltf$scene,\n      scenes = _context$gltf.scenes,\n      entities = context.entities;\n    if (!scenes) return;\n    var sceneRoots = [];\n    for (var i = 0; i < scenes.length; i++) {\n      var nodes = scenes[i].nodes;\n      if (!nodes) continue;\n      if (nodes.length === 1) {\n        sceneRoots[i] = entities[nodes[0]];\n      } else {\n        var rootEntity = new Entity(engine, \"GLTF_ROOT\");\n        for (var j = 0; j < nodes.length; j++) {\n          rootEntity.addChild(entities[nodes[j]]);\n        }\n        sceneRoots[i] = rootEntity;\n      }\n    }\n    context.sceneRoots = sceneRoots;\n    context.defaultSceneRoot = sceneRoots[sceneID];\n  };\n  return EntityParser;\n}(Parser);\nEntityParser._defaultName = \"_GLTF_ENTITY_\";\n\nvar MaterialParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(MaterialParser, _Parser);\n  function MaterialParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  /** @internal */\n  MaterialParser._parseTextureTransform = function _parseTextureTransform(material, extensions, context) {\n    if (extensions === void 0) {\n      extensions = {};\n    }\n    var schema = extensions.KHR_texture_transform;\n    if (schema) {\n      Parser.parseEngineResource(\"KHR_texture_transform\", schema, material, context);\n    }\n  };\n  var _proto = MaterialParser.prototype;\n  _proto.parse = function parse(context) {\n    var gltf = context.gltf,\n      engine = context.engine,\n      textures = context.textures;\n    if (!gltf.materials) return;\n    var materials = [];\n    for (var i = 0; i < gltf.materials.length; i++) {\n      var _gltf$materials$i = gltf.materials[i],\n        _gltf$materials$i$ext = _gltf$materials$i.extensions,\n        extensions = _gltf$materials$i$ext === void 0 ? {} : _gltf$materials$i$ext,\n        pbrMetallicRoughness = _gltf$materials$i.pbrMetallicRoughness,\n        normalTexture = _gltf$materials$i.normalTexture,\n        occlusionTexture = _gltf$materials$i.occlusionTexture,\n        emissiveTexture = _gltf$materials$i.emissiveTexture,\n        emissiveFactor = _gltf$materials$i.emissiveFactor,\n        alphaMode = _gltf$materials$i.alphaMode,\n        alphaCutoff = _gltf$materials$i.alphaCutoff,\n        doubleSided = _gltf$materials$i.doubleSided,\n        _gltf$materials$i$nam = _gltf$materials$i.name,\n        name = _gltf$materials$i$nam === void 0 ? \"\" : _gltf$materials$i$nam;\n      var KHR_materials_unlit = extensions.KHR_materials_unlit,\n        KHR_materials_pbrSpecularGlossiness = extensions.KHR_materials_pbrSpecularGlossiness,\n        KHR_materials_clearcoat = extensions.KHR_materials_clearcoat,\n        OASIS_materials_remap = extensions.OASIS_materials_remap;\n      var material = null;\n      if (KHR_materials_unlit) {\n        material = Parser.createEngineResource(\"KHR_materials_unlit\", KHR_materials_unlit, context);\n      } else if (KHR_materials_pbrSpecularGlossiness) {\n        material = Parser.createEngineResource(\"KHR_materials_pbrSpecularGlossiness\", KHR_materials_pbrSpecularGlossiness, context);\n      } else {\n        material = new PBRMaterial(engine);\n      }\n      material.name = name;\n      if (KHR_materials_clearcoat) {\n        Parser.parseEngineResource(\"KHR_materials_clearcoat\", KHR_materials_clearcoat, material, context);\n      }\n      if (pbrMetallicRoughness) {\n        var baseColorFactor = pbrMetallicRoughness.baseColorFactor,\n          baseColorTexture = pbrMetallicRoughness.baseColorTexture,\n          metallicFactor = pbrMetallicRoughness.metallicFactor,\n          roughnessFactor = pbrMetallicRoughness.roughnessFactor,\n          metallicRoughnessTexture = pbrMetallicRoughness.metallicRoughnessTexture;\n        if (baseColorFactor) {\n          material.baseColor = new Color(Color.linearToGammaSpace(baseColorFactor[0]), Color.linearToGammaSpace(baseColorFactor[1]), Color.linearToGammaSpace(baseColorFactor[2]), baseColorFactor[3]);\n        }\n        if (baseColorTexture) {\n          material.baseTexture = textures[baseColorTexture.index];\n          MaterialParser._parseTextureTransform(material, baseColorTexture.extensions, context);\n        }\n        if (!KHR_materials_unlit && !KHR_materials_pbrSpecularGlossiness) {\n          var m = material;\n          m.metallic = metallicFactor != null ? metallicFactor : 1;\n          m.roughness = roughnessFactor != null ? roughnessFactor : 1;\n          if (metallicRoughnessTexture) {\n            m.roughnessMetallicTexture = textures[metallicRoughnessTexture.index];\n            MaterialParser._parseTextureTransform(material, metallicRoughnessTexture.extensions, context);\n          }\n        }\n      }\n      if (!KHR_materials_unlit) {\n        var _m = material;\n        if (emissiveTexture) {\n          _m.emissiveTexture = textures[emissiveTexture.index];\n          MaterialParser._parseTextureTransform(material, emissiveTexture.extensions, context);\n        }\n        if (emissiveFactor) {\n          _m.emissiveColor = new Color(Color.linearToGammaSpace(emissiveFactor[0]), Color.linearToGammaSpace(emissiveFactor[1]), Color.linearToGammaSpace(emissiveFactor[2]));\n        }\n        if (normalTexture) {\n          var index = normalTexture.index,\n            scale = normalTexture.scale;\n          _m.normalTexture = textures[index];\n          MaterialParser._parseTextureTransform(material, normalTexture.extensions, context);\n          if (scale !== undefined) {\n            _m.normalTextureIntensity = scale;\n          }\n        }\n        if (occlusionTexture) {\n          var _index = occlusionTexture.index,\n            strength = occlusionTexture.strength,\n            texCoord = occlusionTexture.texCoord;\n          _m.occlusionTexture = textures[_index];\n          MaterialParser._parseTextureTransform(material, occlusionTexture.extensions, context);\n          if (strength !== undefined) {\n            _m.occlusionTextureIntensity = strength;\n          }\n          if (texCoord === TextureCoordinate.UV1) {\n            _m.occlusionTextureCoord = TextureCoordinate.UV1;\n          } else if (texCoord > TextureCoordinate.UV1) {\n            Logger.warn(\"Occlusion texture uv coordinate must be UV0 or UV1.\");\n          }\n        }\n      }\n      if (OASIS_materials_remap) {\n        var _context$gltf$extensi, _context$gltf$extensi2;\n        context.gltf.extensions = (_context$gltf$extensi = context.gltf.extensions) != null ? _context$gltf$extensi : {};\n        context.gltf.extensions[\"OASIS_materials_remap\"] = (_context$gltf$extensi2 = context.gltf.extensions[\"OASIS_materials_remap\"]) != null ? _context$gltf$extensi2 : {};\n        context.gltf.extensions[\"OASIS_materials_remap\"][i] = Parser.createEngineResource(\"OASIS_materials_remap\", OASIS_materials_remap, context);\n      }\n      if (doubleSided) {\n        material.renderFace = RenderFace.Double;\n      } else {\n        material.renderFace = RenderFace.Front;\n      }\n      switch (alphaMode) {\n        case MaterialAlphaMode.OPAQUE:\n          material.isTransparent = false;\n          break;\n        case MaterialAlphaMode.BLEND:\n          material.isTransparent = true;\n          break;\n        case MaterialAlphaMode.MASK:\n          material.alphaCutoff = alphaCutoff != null ? alphaCutoff : 0.5;\n          break;\n      }\n      materials[i] = material;\n    }\n    context.materials = materials;\n  };\n  return MaterialParser;\n}(Parser);\n\nvar MeshParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(MeshParser, _Parser);\n  function MeshParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = MeshParser.prototype;\n  _proto.parse = function parse(context) {\n    var _this = this;\n    var engine = context.engine,\n      gltf = context.gltf,\n      buffers = context.buffers;\n    if (!gltf.meshes) return;\n    var meshPromises = [];\n    var _loop = function _loop(i) {\n      var gltfMesh = gltf.meshes[i];\n      var primitivePromises = [];\n      var _loop2 = function _loop2(j) {\n        var gltfPrimitive = gltfMesh.primitives[j];\n        var _gltfPrimitive$extens = gltfPrimitive.extensions,\n          extensions = _gltfPrimitive$extens === void 0 ? {} : _gltfPrimitive$extens;\n        var KHR_draco_mesh_compression = extensions.KHR_draco_mesh_compression;\n        primitivePromises.push(new Promise(function (resolve) {\n          var mesh = new ModelMesh(engine, gltfMesh.name || j + \"\");\n          if (KHR_draco_mesh_compression) {\n            Parser.createEngineResource(\"KHR_draco_mesh_compression\", KHR_draco_mesh_compression, context, gltfPrimitive).then(function (decodedGeometry) {\n              return _this._parseMeshFromGLTFPrimitive(mesh, gltfMesh, gltfPrimitive, gltf, function (attributeSemantic) {\n                for (var _j = 0; _j < decodedGeometry.attributes.length; _j++) {\n                  if (decodedGeometry.attributes[_j].name === attributeSemantic) {\n                    return decodedGeometry.attributes[_j].array;\n                  }\n                }\n                return null;\n              }, function (attributeSemantic, shapeIndex) {\n                throw \"BlendShape animation is not supported when using draco.\";\n              }, function () {\n                return decodedGeometry.index.array;\n              }, engine);\n            }).then(resolve);\n          } else {\n            _this._parseMeshFromGLTFPrimitive(mesh, gltfMesh, gltfPrimitive, gltf, function (attributeSemantic) {\n              var accessorIdx = gltfPrimitive.attributes[attributeSemantic];\n              var accessor = gltf.accessors[accessorIdx];\n              return GLTFUtil.getAccessorData(gltf, accessor, buffers);\n            }, function (attributeName, shapeIndex) {\n              var shapeAccessorIdx = gltfPrimitive.targets[shapeIndex];\n              var attributeAccessorIdx = shapeAccessorIdx[attributeName];\n              if (attributeAccessorIdx) {\n                var accessor = gltf.accessors[attributeAccessorIdx];\n                return GLTFUtil.getAccessorData(gltf, accessor, buffers);\n              } else {\n                return null;\n              }\n            }, function () {\n              var indexAccessor = gltf.accessors[gltfPrimitive.indices];\n              return GLTFUtil.getAccessorData(gltf, indexAccessor, buffers);\n            }, engine).then(resolve);\n          }\n        }));\n      };\n      for (var j = 0; j < gltfMesh.primitives.length; j++) {\n        _loop2(j);\n      }\n      meshPromises.push(Promise.all(primitivePromises));\n    };\n    for (var i = 0; i < gltf.meshes.length; i++) {\n      _loop(i);\n    }\n    return Promise.all(meshPromises).then(function (meshes) {\n      context.meshes = meshes;\n    });\n  };\n  _proto._parseMeshFromGLTFPrimitive = function _parseMeshFromGLTFPrimitive(mesh, gltfMesh, gltfPrimitive, gltf, getVertexBufferData, getBlendShapeData, getIndexBufferData, engine) {\n    var attributes = gltfPrimitive.attributes,\n      targets = gltfPrimitive.targets,\n      indices = gltfPrimitive.indices,\n      mode = gltfPrimitive.mode;\n    var vertexCount;\n    var accessors = gltf.accessors;\n    var accessor = accessors[attributes[\"POSITION\"]];\n    var positionBuffer = getVertexBufferData(\"POSITION\");\n    var positions = GLTFUtil.floatBufferToVector3Array(positionBuffer);\n    mesh.setPositions(positions);\n    var bounds = mesh.bounds;\n    vertexCount = accessor.count;\n    if (accessor.min && accessor.max) {\n      bounds.min.copyFromArray(accessor.min);\n      bounds.max.copyFromArray(accessor.max);\n    } else {\n      var position = MeshParser._tempVector3;\n      var min = bounds.min,\n        max = bounds.max;\n      min.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n      max.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);\n      var stride = positionBuffer.length / vertexCount;\n      for (var j = 0; j < vertexCount; j++) {\n        var offset = j * stride;\n        position.copyFromArray(positionBuffer, offset);\n        Vector3.min(min, position, min);\n        Vector3.max(max, position, max);\n      }\n    }\n    for (var attributeSemantic in attributes) {\n      if (attributeSemantic === \"POSITION\") {\n        continue;\n      }\n      var bufferData = getVertexBufferData(attributeSemantic);\n      switch (attributeSemantic) {\n        case \"NORMAL\":\n          var normals = GLTFUtil.floatBufferToVector3Array(bufferData);\n          mesh.setNormals(normals);\n          break;\n        case \"TEXCOORD_0\":\n          var texturecoords = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords, 0);\n          break;\n        case \"TEXCOORD_1\":\n          var texturecoords1 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords1, 1);\n          break;\n        case \"TEXCOORD_2\":\n          var texturecoords2 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords2, 2);\n          break;\n        case \"TEXCOORD_3\":\n          var texturecoords3 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords3, 3);\n          break;\n        case \"TEXCOORD_4\":\n          var texturecoords4 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords4, 4);\n          break;\n        case \"TEXCOORD_5\":\n          var texturecoords5 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords5, 5);\n          break;\n        case \"TEXCOORD_6\":\n          var texturecoords6 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords6, 6);\n          break;\n        case \"TEXCOORD_7\":\n          var texturecoords7 = GLTFUtil.floatBufferToVector2Array(bufferData);\n          mesh.setUVs(texturecoords7, 7);\n          break;\n        case \"COLOR_0\":\n          var colors = GLTFUtil.floatBufferToColorArray(bufferData, accessors[attributes[\"COLOR_0\"]].type === AccessorType.VEC3);\n          mesh.setColors(colors);\n          break;\n        case \"TANGENT\":\n          var tangents = GLTFUtil.floatBufferToVector4Array(bufferData);\n          mesh.setTangents(tangents);\n          break;\n        case \"JOINTS_0\":\n          var joints = GLTFUtil.floatBufferToVector4Array(bufferData);\n          mesh.setBoneIndices(joints);\n          break;\n        case \"WEIGHTS_0\":\n          var weights = GLTFUtil.floatBufferToVector4Array(bufferData);\n          mesh.setBoneWeights(weights);\n          break;\n      }\n    }\n\n    // Indices\n    if (indices !== undefined) {\n      var indexAccessor = gltf.accessors[indices];\n      var indexData = getIndexBufferData();\n      mesh.setIndices(indexData);\n      mesh.addSubMesh(0, indexAccessor.count, mode);\n    } else {\n      mesh.addSubMesh(0, vertexCount, mode);\n    }\n\n    // BlendShapes\n    targets && this._createBlendShape(mesh, gltfMesh, targets, getBlendShapeData);\n    mesh.uploadData(true);\n    return Promise.resolve(mesh);\n  };\n  _proto._createBlendShape = function _createBlendShape(mesh, glTFMesh, glTFTargets, getBlendShapeData) {\n    var blendShapeNames = glTFMesh.extras ? glTFMesh.extras.targetNames : null;\n    for (var i = 0, n = glTFTargets.length; i < n; i++) {\n      var _name = blendShapeNames ? blendShapeNames[i] : \"blendShape\" + i;\n      var deltaPosBuffer = getBlendShapeData(\"POSITION\", i);\n      var deltaNorBuffer = getBlendShapeData(\"NORMAL\", i);\n      var deltaTanBuffer = getBlendShapeData(\"TANGENT\", i);\n      var deltaPositions = deltaPosBuffer ? GLTFUtil.floatBufferToVector3Array(deltaPosBuffer) : null;\n      var deltaNormals = deltaNorBuffer ? GLTFUtil.floatBufferToVector3Array(deltaNorBuffer) : null;\n      var deltaTangents = deltaTanBuffer ? GLTFUtil.floatBufferToVector3Array(deltaTanBuffer) : null;\n      var blendShape = new BlendShape(_name);\n      blendShape.addFrame(1.0, deltaPositions, deltaNormals, deltaTangents);\n      mesh.addBlendShape(blendShape);\n    }\n  };\n  return MeshParser;\n}(Parser);\nMeshParser._tempVector3 = new Vector3();\n\nvar SceneParser$1 = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(SceneParser, _Parser);\n  function SceneParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  SceneParser._getDefaultMaterial = function _getDefaultMaterial(engine) {\n    if (!SceneParser._defaultMaterial) {\n      SceneParser._defaultMaterial = new BlinnPhongMaterial(engine);\n    }\n    return SceneParser._defaultMaterial;\n  };\n  var _proto = SceneParser.prototype;\n  _proto.parse = function parse(context) {\n    var _context$gltf = context.gltf,\n      nodes = _context$gltf.nodes,\n      gltfCameras = _context$gltf.cameras,\n      entities = context.entities;\n    if (!nodes) return;\n    var promises = [];\n    for (var i = 0; i < nodes.length; i++) {\n      var gltfNode = nodes[i];\n      var cameraID = gltfNode.camera,\n        meshID = gltfNode.mesh,\n        _gltfNode$extensions = gltfNode.extensions,\n        extensions = _gltfNode$extensions === void 0 ? {} : _gltfNode$extensions;\n      var KHR_lights_punctual = extensions.KHR_lights_punctual;\n      var entity = entities[i];\n      if (cameraID !== undefined) {\n        this._createCamera(context, gltfCameras[cameraID], entity);\n      }\n      if (meshID !== undefined) {\n        promises.push(this._createRenderer(context, gltfNode, entity));\n      }\n      if (KHR_lights_punctual) {\n        var lightIndex = KHR_lights_punctual.light;\n        var lights = context.gltf.extensions.KHR_lights_punctual.lights;\n        Parser.parseEngineResource(\"KHR_lights_punctual\", lights[lightIndex], entity, context);\n      }\n    }\n    if (context.defaultSceneRoot) {\n      this._createAnimator(context);\n    }\n    context.gltf.extensions && delete context.gltf.extensions[\"OASIS_materials_remap\"];\n    return Promise.all(promises);\n  };\n  _proto._createCamera = function _createCamera(context, cameraSchema, entity) {\n    var orthographic = cameraSchema.orthographic,\n      perspective = cameraSchema.perspective,\n      type = cameraSchema.type;\n    var camera = entity.addComponent(Camera);\n    if (type === CameraType.ORTHOGRAPHIC) {\n      var xmag = orthographic.xmag,\n        ymag = orthographic.ymag,\n        zfar = orthographic.zfar,\n        znear = orthographic.znear;\n      camera.isOrthographic = true;\n      if (znear !== undefined) {\n        camera.nearClipPlane = znear;\n      }\n      if (zfar !== undefined) {\n        camera.farClipPlane = zfar;\n      }\n      camera.orthographicSize = Math.max(ymag != null ? ymag : 0, xmag != null ? xmag : 0) / 2;\n    } else if (type === CameraType.PERSPECTIVE) {\n      var aspectRatio = perspective.aspectRatio,\n        yfov = perspective.yfov,\n        _zfar = perspective.zfar,\n        _znear = perspective.znear;\n      if (aspectRatio !== undefined) {\n        camera.aspectRatio = aspectRatio;\n      }\n      if (yfov !== undefined) {\n        camera.fieldOfView = yfov * 180 / Math.PI;\n      }\n      if (_zfar !== undefined) {\n        camera.farClipPlane = _zfar;\n      }\n      if (_znear !== undefined) {\n        camera.nearClipPlane = _znear;\n      }\n    }\n    if (!context.cameras) context.cameras = [];\n    context.cameras.push(camera);\n    // @todo: use engine camera by default\n    camera.enabled = false;\n  };\n  _proto._createRenderer = function _createRenderer(context, gltfNode, entity) {\n    var engine = context.engine,\n      gltfMeshes = context.gltf.meshes,\n      meshes = context.meshes,\n      materials = context.materials,\n      skins = context.skins;\n    var meshID = gltfNode.mesh,\n      skinID = gltfNode.skin;\n    var glTFMesh = gltfMeshes[meshID];\n    var gltfMeshPrimitives = glTFMesh.primitives;\n    var blendShapeWeights = gltfNode.weights || glTFMesh.weights;\n    var promises = [];\n    var _loop = function _loop(i) {\n      var mesh = meshes[meshID][i];\n      var renderer = void 0;\n      if (skinID !== undefined || blendShapeWeights) {\n        var skinRenderer = entity.addComponent(SkinnedMeshRenderer);\n        skinRenderer.mesh = mesh;\n        if (skinID !== undefined) {\n          skinRenderer.skin = skins[skinID];\n        }\n        if (blendShapeWeights) {\n          skinRenderer.blendShapeWeights = new Float32Array(blendShapeWeights);\n        }\n        renderer = skinRenderer;\n      } else {\n        renderer = entity.addComponent(MeshRenderer);\n        renderer.mesh = mesh;\n      }\n      var materialIndex = gltfMeshPrimitives[i].material;\n      var remapMaterials = context.gltf.extensions && context.gltf.extensions[\"OASIS_materials_remap\"];\n      if (remapMaterials && remapMaterials[materialIndex]) {\n        promises.push(remapMaterials[materialIndex].then(function (mtl) {\n          renderer.setMaterial(mtl);\n        }));\n      } else {\n        var material = (materials === null || materials === void 0 ? void 0 : materials[materialIndex]) || SceneParser._getDefaultMaterial(engine);\n        renderer.setMaterial(material);\n      }\n      var _gltfMeshPrimitives$i = gltfMeshPrimitives[i].extensions,\n        extensions = _gltfMeshPrimitives$i === void 0 ? {} : _gltfMeshPrimitives$i;\n      var KHR_materials_variants = extensions.KHR_materials_variants;\n      if (KHR_materials_variants) {\n        Parser.parseEngineResource(\"KHR_materials_variants\", KHR_materials_variants, renderer, context);\n      }\n    };\n    for (var i = 0; i < gltfMeshPrimitives.length; i++) {\n      _loop(i);\n    }\n    return Promise.all(promises);\n  };\n  _proto._createAnimator = function _createAnimator(context) {\n    var defaultSceneRoot = context.defaultSceneRoot,\n      animations = context.animations;\n    if (!animations) return;\n    var animator = defaultSceneRoot.addComponent(Animator);\n    var animatorController = new AnimatorController();\n    var layer = new AnimatorControllerLayer(\"layer\");\n    var animatorStateMachine = new AnimatorStateMachine();\n    animatorController.addLayer(layer);\n    animator.animatorController = animatorController;\n    layer.stateMachine = animatorStateMachine;\n    if (animations) {\n      for (var i = 0; i < animations.length; i++) {\n        var animationClip = animations[i];\n        var name = animationClip.name;\n        var uniqueName = animatorStateMachine.makeUniqueStateName(name);\n        if (uniqueName !== name) {\n          console.warn(\"AnimatorState name is existed, name: \" + name + \" reset to \" + uniqueName);\n        }\n        var animatorState = animatorStateMachine.addState(uniqueName);\n        animatorState.clip = animationClip;\n      }\n    }\n  };\n  return SceneParser;\n}(Parser);\nSceneParser$1._defaultMaterial = void 0;\n\nvar SkinParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(SkinParser, _Parser);\n  function SkinParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = SkinParser.prototype;\n  _proto.parse = function parse(context) {\n    var gltf = context.gltf,\n      buffers = context.buffers,\n      entities = context.entities,\n      defaultSceneRoot = context.defaultSceneRoot;\n    var gltfSkins = gltf.skins;\n    if (!gltfSkins) return;\n    var skins = [];\n    for (var i = 0; i < gltfSkins.length; i++) {\n      var _gltfSkins$i = gltfSkins[i],\n        inverseBindMatrices = _gltfSkins$i.inverseBindMatrices,\n        skeleton = _gltfSkins$i.skeleton,\n        joints = _gltfSkins$i.joints,\n        _gltfSkins$i$name = _gltfSkins$i.name,\n        name = _gltfSkins$i$name === void 0 ? \"SKIN_\" + i : _gltfSkins$i$name;\n      var jointCount = joints.length;\n      var skin = new Skin(name);\n      skin.inverseBindMatrices.length = jointCount;\n\n      // parse IBM\n      var accessor = gltf.accessors[inverseBindMatrices];\n      var buffer = GLTFUtil.getAccessorData(gltf, accessor, buffers);\n      for (var _i = 0; _i < jointCount; _i++) {\n        var inverseBindMatrix = new Matrix();\n        inverseBindMatrix.copyFromArray(buffer, _i * 16);\n        skin.inverseBindMatrices[_i] = inverseBindMatrix;\n      }\n\n      // get joints\n      for (var _i2 = 0; _i2 < jointCount; _i2++) {\n        skin.joints[_i2] = entities[joints[_i2]].name;\n      }\n\n      // get skeleton\n      if (skeleton !== undefined) {\n        skin.skeleton = entities[skeleton].name;\n      } else {\n        skin.skeleton = defaultSceneRoot.name;\n      }\n      skins[i] = skin;\n    }\n    context.skins = skins;\n  };\n  return SkinParser;\n}(Parser);\n\nvar TextureParser = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(TextureParser, _Parser);\n  function TextureParser() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = TextureParser.prototype;\n  _proto.parse = function parse(context) {\n    var _this = this;\n    var gltf = context.gltf,\n      buffers = context.buffers,\n      engine = context.engine,\n      url = context.url;\n    if (gltf.textures) {\n      return Promise.all(gltf.textures.map(function (_ref, index) {\n        var sampler = _ref.sampler,\n          _ref$source = _ref.source,\n          source = _ref$source === void 0 ? 0 : _ref$source,\n          textureName = _ref.name;\n        var _gltf$images$source = gltf.images[source],\n          uri = _gltf$images$source.uri,\n          bufferViewIndex = _gltf$images$source.bufferView,\n          mimeType = _gltf$images$source.mimeType,\n          imageName = _gltf$images$source.name;\n        if (uri) {\n          return engine.resourceManager.load({\n            url: GLTFUtil.parseRelativeUrl(url, uri),\n            type: AssetType.Texture2D\n          }).then(function (texture) {\n            if (!texture.name) {\n              texture.name = textureName || imageName || \"texture_\" + index;\n            }\n            if (sampler !== undefined) {\n              _this._parseSampler(texture, gltf.samplers[sampler]);\n            }\n            return texture;\n          });\n        } else {\n          var bufferView = gltf.bufferViews[bufferViewIndex];\n          var bufferViewData = GLTFUtil.getBufferViewData(bufferView, buffers);\n          return GLTFUtil.loadImageBuffer(bufferViewData, mimeType).then(function (image) {\n            var texture = new Texture2D(engine, image.width, image.height);\n            texture.setImageSource(image);\n            texture.generateMipmaps();\n            texture.name = textureName || imageName || \"texture_\" + index;\n            if (sampler !== undefined) {\n              _this._parseSampler(texture, gltf.samplers[sampler]);\n            }\n            return texture;\n          });\n        }\n      })).then(function (textures) {\n        context.textures = textures;\n      });\n    }\n  };\n  _proto._parseSampler = function _parseSampler(texture, sampler) {\n    var magFilter = sampler.magFilter,\n      minFilter = sampler.minFilter,\n      wrapS = sampler.wrapS,\n      wrapT = sampler.wrapT;\n    if (magFilter || minFilter) {\n      Logger.warn(\"texture use filterMode in engine\");\n    }\n    if (wrapS) {\n      texture.wrapModeU = TextureParser._wrapMap[wrapS];\n    }\n    if (wrapT) {\n      texture.wrapModeV = TextureParser._wrapMap[wrapT];\n    }\n  };\n  return TextureParser;\n}(Parser);\nTextureParser._wrapMap = {\n  33071: TextureWrapMode$1.Clamp,\n  33648: TextureWrapMode$1.Mirror,\n  10497: TextureWrapMode$1.Repeat\n};\n\nvar Validator = /*#__PURE__*/function (_Parser) {\n  _inheritsLoose(Validator, _Parser);\n  function Validator() {\n    return _Parser.apply(this, arguments) || this;\n  }\n  var _proto = Validator.prototype;\n  _proto.parse = function parse(context) {\n    var _context$gltf = context.gltf,\n      version = _context$gltf.asset.version,\n      extensionsUsed = _context$gltf.extensionsUsed,\n      extensionsRequired = _context$gltf.extensionsRequired;\n    var gltfVersion = Number(version);\n    if (!(gltfVersion >= 2 && gltfVersion < 3)) {\n      throw \"Only support gltf 2.x.\";\n    }\n    if (extensionsUsed) {\n      Logger.info(\"extensionsUsed: \", extensionsUsed);\n      for (var i = 0; i < extensionsUsed.length; i++) {\n        if (!Parser.hasExtensionParser(extensionsUsed[i])) {\n          Logger.warn(\"Extension \" + extensionsUsed[i] + \" is not implemented, you can customize this extension in gltf.\");\n        }\n      }\n    }\n    if (extensionsRequired) {\n      Logger.info(\"extensionsRequired: \" + extensionsRequired);\n      for (var _i = 0; _i < extensionsRequired.length; _i++) {\n        var extensionRequired = extensionsRequired[_i];\n        if (!Parser.hasExtensionParser(extensionRequired)) {\n          Logger.error(\"GLTF parser has not supported required extension \" + extensionRequired + \".\");\n        } else {\n          Parser.initialize(extensionRequired);\n        }\n      }\n    }\n  };\n  return Validator;\n}(Parser);\n\nvar GLTFParser = /*#__PURE__*/function () {\n  function GLTFParser(pipes) {\n    var _this = this;\n    this._pipes = [];\n    pipes.forEach(function (pipe, index) {\n      _this._pipes[index] = new pipe();\n    });\n  }\n  var _proto = GLTFParser.prototype;\n  _proto.parse = function parse(context) {\n    var _this2 = this;\n    var lastPipe;\n    return new Promise(function (resolve, reject) {\n      _this2._pipes.forEach(function (parser) {\n        if (lastPipe) {\n          lastPipe = lastPipe.then(function () {\n            return parser.parse(context);\n          });\n        } else {\n          lastPipe = parser.parse(context);\n        }\n      });\n      if (lastPipe) {\n        lastPipe.then(function () {\n          resolve(context);\n        }).catch(reject);\n      } else {\n        resolve(context);\n      }\n    });\n  };\n  return GLTFParser;\n}();\nGLTFParser.instance = new GLTFParser([BufferParser, Validator, TextureParser, MaterialParser, MeshParser, EntityParser, SkinParser, AnimationParser, SceneParser$1]);\n\n/**\n * Product after GLTF parser, usually, `defaultSceneRoot` is only needed to use.\n */\nvar GLTFResource = /*#__PURE__*/function (_EngineObject) {\n  _inheritsLoose(GLTFResource, _EngineObject);\n  function GLTFResource() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _EngineObject.call.apply(_EngineObject, [this].concat(args)) || this;\n    _this.url = void 0;\n    _this.gltf = void 0;\n    _this.buffers = void 0;\n    _this.textures = void 0;\n    _this.materials = void 0;\n    _this.meshes = void 0;\n    _this.skins = void 0;\n    _this.animations = void 0;\n    _this.entities = void 0;\n    _this.cameras = void 0;\n    _this.lights = void 0;\n    _this.sceneRoots = void 0;\n    _this.defaultSceneRoot = void 0;\n    _this.variants = void 0;\n    return _this;\n  }\n  return GLTFResource;\n}(EngineObject);\n\nvar _dec$q, _class$q;\n(_dec$q = resourceLoader(AssetType.Prefab, [\"gltf\", \"glb\"]), _dec$q(_class$q = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(GLTFLoader, _Loader);\n  function GLTFLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = GLTFLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var url = item.url;\n    return new AssetPromise(function (resolve, reject) {\n      var resource = new GLTFResource(resourceManager.engine);\n      resource.url = url;\n      GLTFParser.instance.parse(resource).then(resolve).catch(function (e) {\n        console.error(e);\n        reject(\"Error loading glTF model from \" + url + \" .\");\n      });\n    });\n  };\n  return GLTFLoader;\n}(Loader)) || _class$q);\n\nvar _dec$p, _class$p;\n(_dec$p = resourceLoader(AssetType.JSON, [\"json\"], false), _dec$p(_class$p = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(JSONLoader, _Loader);\n  function JSONLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = JSONLoader.prototype;\n  _proto.load = function load(item) {\n    return this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n      type: \"json\"\n    }));\n  };\n  return JSONLoader;\n}(Loader)) || _class$p);\n\n/**\n *\n * ported from https://github.com/BabylonJS/Babylon.js/blob/master/src/Tools/babylon.khronosTextureContainer.ts\n */\nvar HEADER_LEN = 12 + 13 * 4; // identifier + header elements (not including key value meta-data pairs)\n\n// load types\nvar COMPRESSED_2D = 0; // uses a gl.compressedTexImage2D()\n\nfunction getMipmaps(ktxContainer, loadMipmaps) {\n  var mipmaps = [];\n\n  // initialize width & height for level 1\n  var dataOffset = HEADER_LEN + ktxContainer.bytesOfKeyValueData;\n  var width = ktxContainer.pixelWidth;\n  var height = ktxContainer.pixelHeight;\n  var mipmapCount = loadMipmaps ? ktxContainer.numberOfMipmapLevels : 1;\n  for (var level = 0; level < mipmapCount; level++) {\n    var imageSize = new Int32Array(ktxContainer.buffer, dataOffset, 1)[0]; // size per face, since not supporting array cubemaps\n    dataOffset += 4; // size of the image + 4 for the imageSize field\n\n    for (var face = 0; face < ktxContainer.numberOfFaces; face++) {\n      var byteArray = new Uint8Array(ktxContainer.buffer, dataOffset, imageSize);\n      mipmaps.push({\n        data: byteArray,\n        width: width,\n        height: height\n      });\n      dataOffset += imageSize;\n      dataOffset += 3 - (imageSize + 3) % 4; // add padding for odd sized image\n    }\n\n    width = Math.max(1.0, width * 0.5);\n    height = Math.max(1.0, height * 0.5);\n  }\n  return mipmaps;\n}\n\n/**\n * Checks if the given data starts with a KTX file identifier.\n * @param data the data to check\n * @returns true if the data is a KTX file or false otherwise\n */\nfunction isValid(data) {\n  if (data.byteLength >= 12) {\n    // '«', 'K', 'T', 'X', ' ', '1', '1', '»', '\\r', '\\n', '\\x1A', '\\n'\n    var identifier = new Uint8Array(data, 0, 12);\n    if (identifier[0] === 0xab && identifier[1] === 0x4b && identifier[2] === 0x54 && identifier[3] === 0x58 && identifier[4] === 0x20 && identifier[5] === 0x31 && identifier[6] === 0x31 && identifier[7] === 0xbb && identifier[8] === 0x0d && identifier[9] === 0x0a && identifier[10] === 0x1a && identifier[11] === 0x0a) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction getEngineFormat(internalFormat) {\n  switch (internalFormat) {\n    // case GLCompressedTextureInternalFormat.RGBA_S3TC_DXT3_EXT:\n    // case GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT:\n    // break;\n    case GLCompressedTextureInternalFormat.RGB_S3TC_DXT1_EXT:\n      return TextureFormat.DXT1;\n    case GLCompressedTextureInternalFormat.RGBA_S3TC_DXT5_EXT:\n      return TextureFormat.DXT5;\n    case GLCompressedTextureInternalFormat.RGB_ETC1_WEBGL:\n      return TextureFormat.ETC1_RGB;\n    case GLCompressedTextureInternalFormat.RGB8_ETC2:\n      return TextureFormat.ETC2_RGB;\n    case GLCompressedTextureInternalFormat.RGB8_PUNCHTHROUGH_ALPHA1_ETC2:\n      return TextureFormat.ETC2_RGBA5;\n    case GLCompressedTextureInternalFormat.RGBA8_ETC2_EAC:\n      return TextureFormat.ETC2_RGBA8;\n    case GLCompressedTextureInternalFormat.RGB_PVRTC_2BPPV1_IMG:\n      return TextureFormat.PVRTC_RGB2;\n    case GLCompressedTextureInternalFormat.RGBA_PVRTC_2BPPV1_IMG:\n      return TextureFormat.PVRTC_RGBA2;\n    case GLCompressedTextureInternalFormat.RGB_PVRTC_4BPPV1_IMG:\n      return TextureFormat.PVRTC_RGB4;\n    case GLCompressedTextureInternalFormat.RGBA_PVRTC_4BPPV1_IMG:\n      return TextureFormat.PVRTC_RGBA4;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_4X4_KHR:\n      return TextureFormat.ASTC_4x4;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_5X5_KHR:\n      return TextureFormat.ASTC_5x5;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_6X6_KHR:\n      return TextureFormat.ASTC_6x6;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_8X8_KHR:\n      return TextureFormat.ASTC_8x8;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_10X10_KHR:\n      return TextureFormat.ASTC_10x10;\n    case GLCompressedTextureInternalFormat.RGBA_ASTC_12X12_KHR:\n      return TextureFormat.ASTC_12x12;\n    default:\n      var formatName = GLCompressedTextureInternalFormat[internalFormat];\n      throw new Error(\"this format is not supported in Oasis Engine: \" + formatName);\n  }\n}\n/**\n * for description see https://www.khronos.org/opengles/sdk/tools/KTX/\n * for file layout see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/\n */\nvar khronosTextureContainerParser = {\n  /**\n   *\n   * @param buffer contents of the KTX container file\n   * @param facesExpected should be either 1 or 6, based whether a cube texture or or\n   * @param threeDExpected provision for indicating that data should be a 3D texture, not implemented\n   * @param textureArrayExpected provision for indicating that data should be a texture array, not implemented\n   * @param mapEngineFormat get Oasis Engine native TextureFormat?\n   */\n  parse: function parse(buffer, facesExpected, withMipmaps, mapEngineFormat) {\n    if (mapEngineFormat === void 0) {\n      mapEngineFormat = false;\n    }\n    if (!isValid(buffer)) {\n      throw new Error(\"khronosTextureContainerParser: invalid KTX file, texture missing KTX identifier\");\n    }\n\n    // load the reset of the header in native 32 bit uint\n    var dataSize = Uint32Array.BYTES_PER_ELEMENT;\n    var headerDataView = new DataView(buffer, 12, 13 * dataSize);\n    var endianness = headerDataView.getUint32(0, true);\n    var littleEndian = endianness === 0x04030201;\n    var parsedResult = {\n      buffer: buffer,\n      glType: headerDataView.getUint32(1 * dataSize, littleEndian),\n      // must be 0 for compressed textures\n      glTypeSize: headerDataView.getUint32(2 * dataSize, littleEndian),\n      // must be 1 for compressed textures\n      glFormat: headerDataView.getUint32(3 * dataSize, littleEndian),\n      // must be 0 for compressed textures\n      glInternalFormat: headerDataView.getUint32(4 * dataSize, littleEndian),\n      // the value of arg passed to gl.compressedTexImage2D(,,x,,,,)\n      glBaseInternalFormat: headerDataView.getUint32(5 * dataSize, littleEndian),\n      // specify GL_RGB, GL_RGBA, GL_ALPHA, etc (un-compressed only)\n      pixelWidth: headerDataView.getUint32(6 * dataSize, littleEndian),\n      // level 0 value of arg passed to gl.compressedTexImage2D(,,,x,,,)\n      pixelHeight: headerDataView.getUint32(7 * dataSize, littleEndian),\n      // level 0 value of arg passed to gl.compressedTexImage2D(,,,,x,,)\n      pixelDepth: headerDataView.getUint32(8 * dataSize, littleEndian),\n      // level 0 value of arg passed to gl.compressedTexImage3D(,,,,,x,,)\n      numberOfArrayElements: headerDataView.getUint32(9 * dataSize, littleEndian),\n      // used for texture arrays\n      numberOfFaces: headerDataView.getUint32(10 * dataSize, littleEndian),\n      // used for cubemap textures, should either be 1 or 6\n      numberOfMipmapLevels: headerDataView.getUint32(11 * dataSize, littleEndian),\n      // number of levels; disregard possibility of 0 for compressed textures\n      bytesOfKeyValueData: headerDataView.getUint32(12 * dataSize, littleEndian),\n      // the amount of space after the header for meta-data\n      // would need to make this more elaborate & adjust checks above to support more than one load type\n      loadType: COMPRESSED_2D\n    };\n\n    // Make sure we have a compressed type.  Not only reduces work, but probably better to let dev know they are not compressing.\n    if (parsedResult.glType !== 0) {\n      throw new Error(\"only compressed formats currently supported\");\n    } else {\n      // value of zero is an indication to generate mipmaps @ runtime.  Not usually allowed for compressed, so disregard.\n      parsedResult.numberOfMipmapLevels = Math.max(1, parsedResult.numberOfMipmapLevels);\n    }\n    if (parsedResult.pixelHeight === 0 || parsedResult.pixelDepth !== 0) {\n      throw new Error(\"only 2D textures currently supported\");\n    }\n    if (parsedResult.numberOfArrayElements !== 0) {\n      throw new Error(\"texture arrays not currently supported\");\n    }\n    if (parsedResult.numberOfFaces !== facesExpected) {\n      throw new Error(\"number of faces expected\" + facesExpected + \", but found \" + parsedResult.numberOfFaces);\n    }\n    if (withMipmaps) {\n      parsedResult.mipmaps = getMipmaps(parsedResult, true);\n    }\n    if (mapEngineFormat) {\n      parsedResult.engineFormat = getEngineFormat(parsedResult.glInternalFormat);\n    }\n    return parsedResult;\n  }\n};\n\nfunction parseSingleKTX(data) {\n  var ktx = khronosTextureContainerParser.parse(data, 1, true, true);\n  return {\n    mipmaps: ktx.mipmaps,\n    engineFormat: ktx.engineFormat,\n    internalFormat: ktx.glInternalFormat,\n    width: ktx.pixelWidth,\n    height: ktx.pixelHeight\n  };\n}\nfunction parseCubeKTX(dataArray) {\n  var mipmapsFaces = [];\n  var internalFormat;\n  var engineFormat;\n  var width;\n  var height;\n  for (var i = 0; i < dataArray.length; i++) {\n    var ktx = khronosTextureContainerParser.parse(dataArray[i], 1, true, true);\n    mipmapsFaces.push(ktx.mipmaps);\n    if (i === 0) {\n      width = ktx.pixelWidth;\n      height = ktx.pixelHeight;\n      internalFormat = ktx.glInternalFormat;\n      engineFormat = ktx.engineFormat;\n    }\n  }\n  return {\n    mipmapsFaces: mipmapsFaces,\n    engineFormat: engineFormat,\n    internalFormat: internalFormat,\n    width: width,\n    height: height\n  };\n}\n\nvar _dec$o, _class$o;\n(_dec$o = resourceLoader(AssetType.KTXCube, []), _dec$o(_class$o = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(KTXCubeLoader, _Loader);\n  function KTXCubeLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = KTXCubeLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      Promise.all(item.urls.map(function (url) {\n        return _this.request(url, _objectSpread2(_objectSpread2({}, item), {}, {\n          type: \"arraybuffer\"\n        }));\n      })).then(function (data) {\n        var parsedData = parseCubeKTX(data);\n        var width = parsedData.width,\n          mipmapsFaces = parsedData.mipmapsFaces,\n          engineFormat = parsedData.engineFormat;\n        var mipmap = mipmapsFaces[0].length > 1;\n        var texture = new TextureCube(resourceManager.engine, width, engineFormat, mipmap);\n        for (var face = 0; face < 6; face++) {\n          var length = mipmapsFaces[face].length;\n          for (var miplevel = 0; miplevel < length; miplevel++) {\n            var _mipmapsFaces$face$mi = mipmapsFaces[face][miplevel],\n              _data = _mipmapsFaces$face$mi.data,\n              _width = _mipmapsFaces$face$mi.width,\n              height = _mipmapsFaces$face$mi.height;\n            texture.setPixelBuffer(TextureCubeFace.PositiveX + face, _data, miplevel, 0, 0, _width, height);\n          }\n        }\n        resolve(texture);\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n  return KTXCubeLoader;\n}(Loader)) || _class$o);\n\nvar _dec$n, _class$n;\n(_dec$n = resourceLoader(AssetType.KTX, [\"ktx\"]), _dec$n(_class$n = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(KTXLoader, _Loader);\n  function KTXLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = KTXLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"arraybuffer\"\n      })).then(function (bin) {\n        var parsedData = parseSingleKTX(bin);\n        var width = parsedData.width,\n          height = parsedData.height,\n          mipmaps = parsedData.mipmaps,\n          engineFormat = parsedData.engineFormat;\n        var mipmap = mipmaps.length > 1;\n        var texture = new Texture2D(resourceManager.engine, width, height, engineFormat, mipmap);\n        for (var miplevel = 0; miplevel < mipmaps.length; miplevel++) {\n          var _mipmaps$miplevel = mipmaps[miplevel],\n            _width = _mipmaps$miplevel.width,\n            _height = _mipmaps$miplevel.height,\n            data = _mipmaps$miplevel.data;\n          texture.setPixelBuffer(data, miplevel, 0, 0, _width, _height);\n        }\n        resolve(texture);\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n  return KTXLoader;\n}(Loader)) || _class$n);\n\nvar _dec$m, _class$m;\n(_dec$m = resourceLoader(AssetType.Texture2D, [\"png\", \"jpg\", \"webp\", \"jpeg\"]), _dec$m(_class$m = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(Texture2DLoader, _Loader);\n  function Texture2DLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = Texture2DLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"image\"\n      })).then(function (image) {\n        var texture = new Texture2D(resourceManager.engine, image.width, image.height);\n        /** @ts-ignore */\n        if (!texture._platformTexture) return;\n        texture.setImageSource(image);\n        texture.generateMipmaps();\n        if (item.url.indexOf(\"data:\") !== 0) {\n          var splitPath = item.url.split(\"/\");\n          texture.name = splitPath[splitPath.length - 1];\n        }\n        resolve(texture);\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n  return Texture2DLoader;\n}(Loader)) || _class$m);\n\nvar _dec$l, _class$l;\n(_dec$l = resourceLoader(AssetType.TextureCube, [\"\"]), _dec$l(_class$l = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(TextureCubeLoader, _Loader);\n  function TextureCubeLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = TextureCubeLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      Promise.all(item.urls.map(function (url) {\n        return _this.request(url, _objectSpread2(_objectSpread2({}, item), {}, {\n          type: \"image\"\n        }));\n      })).then(function (images) {\n        var _images$ = images[0],\n          width = _images$.width,\n          height = _images$.height;\n        if (width !== height) {\n          console.error(\"The cube texture must have the same width and height\");\n          return;\n        }\n        var tex = new TextureCube(resourceManager.engine, width);\n\n        /** @ts-ignore */\n        if (!tex._platformTexture) return;\n        for (var faceIndex = 0; faceIndex < 6; faceIndex++) {\n          tex.setImageSource(TextureCubeFace.PositiveX + faceIndex, images[faceIndex], 0);\n        }\n        tex.generateMipmaps();\n        resolve(tex);\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n  return TextureCubeLoader;\n}(Loader)) || _class$l);\n\nvar _dec$k, _class$k;\n(_dec$k = resourceLoader(AssetType.Sprite, [\"sprite\"], false), _dec$k(_class$k = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(SpriteLoader, _Loader);\n  function SpriteLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = SpriteLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"json\"\n      })).then(function (data) {\n        resourceManager.getResourceByRef(data.texture).then(function (texture) {\n          var sprite = new Sprite(resourceManager.engine, texture);\n          sprite.region = data.region;\n          sprite.pivot = data.pivot;\n          resolve(sprite);\n        });\n      });\n    });\n  };\n  return SpriteLoader;\n}(Loader)) || _class$k);\n\nvar _dec$j, _class$j;\n(_dec$j = resourceLoader(AssetType.SpriteAtlas, [\"atlas\"], false), _dec$j(_class$j = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(SpriteAtlasLoader, _Loader);\n  function SpriteAtlasLoader() {\n    var _this;\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _Loader.call.apply(_Loader, [this].concat(args)) || this;\n    _this._tempRect = new Rect();\n    _this._tempVec2 = new Vector2();\n    return _this;\n  }\n  var _proto = SpriteAtlasLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this2 = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this2.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"json\"\n      })).then(function (atlasData) {\n        var atlasItems = atlasData.atlasItems,\n          format = atlasData.format;\n        var atlasItemsLen = atlasItems.length;\n        Promise.all(atlasItems.map(function (_ref) {\n          var img = _ref.img;\n          return _this2.request(GLTFUtil.parseRelativeUrl(item.url, img), _objectSpread2(_objectSpread2({}, item), {}, {\n            type: \"image\"\n          }));\n        })).then(function (imgs) {\n          var engine = resourceManager.engine;\n          // Generate a SpriteAtlas object.\n          var tempRect = _this2._tempRect,\n            tempVec2 = _this2._tempVec2;\n          var spriteAtlas = new SpriteAtlas(engine);\n          for (var i = 0; i < atlasItemsLen; i++) {\n            // Generate Texture2D according to configuration.\n            var originalImg = imgs[i];\n            var width = originalImg.width,\n              height = originalImg.height;\n            var texture = new Texture2D(engine, width, height, format);\n            texture.setImageSource(originalImg);\n            texture.generateMipmaps();\n            // Generate all the sprites on this texture.\n            var atlasItem = atlasItems[i];\n            var sprites = atlasItem.sprites;\n            var sourceWidthReciprocal = 1.0 / width;\n            var sourceHeightReciprocal = 1.0 / height;\n            for (var j = sprites.length - 1; j >= 0; j--) {\n              var atlasSprite = sprites[j];\n              var region = atlasSprite.region,\n                atlasRegionOffset = atlasSprite.atlasRegionOffset,\n                atlasRegion = atlasSprite.atlasRegion,\n                id = atlasSprite.id,\n                pivot = atlasSprite.pivot;\n              var sprite = new Sprite(engine, texture, region ? tempRect.set(region.x, region.y, region.w, region.h) : undefined, pivot ? tempVec2.set(pivot.x, pivot.y) : undefined, undefined, atlasSprite.name);\n              sprite.atlasRegion.set(atlasRegion.x * sourceWidthReciprocal, atlasRegion.y * sourceHeightReciprocal, atlasRegion.w * sourceWidthReciprocal, atlasRegion.h * sourceHeightReciprocal);\n              atlasSprite.atlasRotated && (sprite.atlasRotated = true);\n              if (atlasRegionOffset) {\n                var offsetLeft = atlasRegionOffset.x,\n                  offsetTop = atlasRegionOffset.y,\n                  offsetRight = atlasRegionOffset.z,\n                  offsetBottom = atlasRegionOffset.w;\n                sprite.atlasRegionOffset.set(offsetLeft * sourceWidthReciprocal, offsetTop * sourceHeightReciprocal, offsetRight * sourceWidthReciprocal, offsetBottom * sourceHeightReciprocal);\n              }\n              if (id !== undefined) {\n                // @ts-ignore\n                sprite._assetID = id;\n              }\n              // @ts-ignore\n              spriteAtlas._addSprite(sprite);\n            }\n          }\n          resolve(spriteAtlas);\n        });\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n  return SpriteAtlasLoader;\n}(Loader)) || _class$j);\n\nvar _dec$i, _class$i;\n(_dec$i = resourceLoader(AssetType.Env, [\"env\"]), _dec$i(_class$i = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(EnvLoader, _Loader);\n  function EnvLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = EnvLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, {\n        type: \"arraybuffer\"\n      }).then(function (arraybuffer) {\n        var _Uint16Array;\n        var shArray = new Float32Array(arraybuffer, 0, 27);\n        var shByteLength = 27 * 4;\n        var size = (_Uint16Array = new Uint16Array(arraybuffer, shByteLength, 1)) === null || _Uint16Array === void 0 ? void 0 : _Uint16Array[0];\n        var texture = new TextureCube(resourceManager.engine, size);\n        texture.filterMode = TextureFilterMode.Trilinear;\n        var mipmapCount = texture.mipmapCount;\n        var offset = shByteLength + 2;\n        for (var mipLevel = 0; mipLevel < mipmapCount; mipLevel++) {\n          var mipSize = size >> mipLevel;\n          for (var face = 0; face < 6; face++) {\n            var dataSize = mipSize * mipSize * 4;\n            var data = new Uint8Array(arraybuffer, offset, dataSize);\n            offset += dataSize;\n            texture.setPixelBuffer(TextureCubeFace.PositiveX + face, data, mipLevel);\n          }\n        }\n        var ambientLight = new AmbientLight();\n        var sh = new SphericalHarmonics3();\n        ambientLight.diffuseMode = DiffuseMode.SphericalHarmonics;\n        sh.copyFromArray(shArray);\n        ambientLight.diffuseSphericalHarmonics = sh;\n        ambientLight.specularTexture = texture;\n        ambientLight.specularTextureDecodeRGBM = true;\n        resolve(ambientLight);\n      }).catch(function (e) {\n        reject(e);\n      });\n    });\n  };\n  return EnvLoader;\n}(Loader)) || _class$i);\n\nvar _dec$h, _class$h, _class2$1;\nvar PI = Math.PI;\n(_dec$h = resourceLoader(AssetType.HDR, [\"hdr\"]), _dec$h(_class$h = (_class2$1 = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(HDRLoader, _Loader);\n  function HDRLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  HDRLoader._convertToCubemap = function _convertToCubemap(pixels, inputWidth, inputHeight, size) {\n    if (!pixels) {\n      throw \"ConvertPanoramaToCubemap: input cannot be null\";\n    }\n    if (pixels.length != inputWidth * inputHeight * 4) {\n      throw \"ConvertPanoramaToCubemap: input size is wrong\";\n    }\n    var textureRight = this._createCubemapData(size, this._faceRight, pixels, inputWidth, inputHeight);\n    var textureLeft = this._createCubemapData(size, this._faceLeft, pixels, inputWidth, inputHeight);\n    var textureUp = this._createCubemapData(size, this._faceUp, pixels, inputWidth, inputHeight);\n    var textureDown = this._createCubemapData(size, this._faceBottom, pixels, inputWidth, inputHeight);\n    var textureFront = this._createCubemapData(size, this._faceFront, pixels, inputWidth, inputHeight);\n    var textureBack = this._createCubemapData(size, this._faceBack, pixels, inputWidth, inputHeight);\n    return [textureRight, textureLeft, textureUp, textureDown, textureFront, textureBack];\n  };\n  HDRLoader._createCubemapData = function _createCubemapData(texSize, faceData, pixels, inputWidth, inputHeight) {\n    var textureArray = new Uint8ClampedArray(texSize * texSize * 4);\n    var rotDX1 = this._tempVector3.set(0, 0, 0).add(faceData[1]).subtract(faceData[0]).scale(1 / texSize);\n    var rotDX2 = this._temp2Vector3.set(0, 0, 0).add(faceData[3]).subtract(faceData[2]).scale(1 / texSize);\n    var dy = 1 / texSize;\n    var fy = 0;\n    for (var y = 0; y < texSize; y++) {\n      var xv1 = this._temp3Vector3.set(0, 0, 0).add(faceData[0]);\n      var xv2 = this._temp4Vector3.set(0, 0, 0).add(faceData[2]);\n      for (var x = 0; x < texSize; x++) {\n        var v = this._temp5Vector3.set(0, 0, 0).add(xv2).subtract(xv1).scale(fy).add(xv1);\n        v.normalize();\n        var color = this._calcProjectionSpherical(v, pixels, inputWidth, inputHeight);\n        this._RGBEToLinear(color);\n        this._linearToRGBM(color, 5);\n\n        // 4 channels per pixels\n        var index = y * texSize * 4 + x * 4;\n        textureArray[index] = color.r;\n        textureArray[index + 1] = color.g;\n        textureArray[index + 2] = color.b;\n        textureArray[index + 3] = color.a;\n        xv1.add(rotDX1);\n        xv2.add(rotDX2);\n      }\n      fy += dy;\n    }\n    return textureArray;\n  };\n  HDRLoader._calcProjectionSpherical = function _calcProjectionSpherical(vDir, pixels, inputWidth, inputHeight) {\n    var theta = Math.atan2(vDir.z, -vDir.x);\n    var phi = Math.acos(vDir.y);\n    while (theta < -PI) {\n      theta += 2 * PI;\n    }\n    while (theta > PI) {\n      theta -= 2 * PI;\n    }\n    var dx = theta / PI;\n    var dy = phi / PI;\n\n    // recenter.\n    dx = dx * 0.5 + 0.5;\n    var px = Math.round(dx * inputWidth);\n    if (px < 0) {\n      px = 0;\n    } else if (px >= inputWidth) {\n      px = inputWidth - 1;\n    }\n    var py = Math.round(dy * inputHeight);\n    if (py < 0) {\n      py = 0;\n    } else if (py >= inputHeight) {\n      py = inputHeight - 1;\n    }\n    var inputY = inputHeight - py - 1;\n    var index = inputY * inputWidth * 4 + px * 4;\n    var r = pixels[index];\n    var g = pixels[index + 1];\n    var b = pixels[index + 2];\n    var a = pixels[index + 3];\n    return new Color(r, g, b, a);\n  };\n  HDRLoader._readStringLine = function _readStringLine(uint8array, startIndex) {\n    var line = \"\";\n    var character = \"\";\n    for (var i = startIndex; i < uint8array.length - startIndex; i++) {\n      character = String.fromCharCode(uint8array[i]);\n      if (character == \"\\n\") {\n        break;\n      }\n      line += character;\n    }\n    return line;\n  };\n  HDRLoader._parseHeader = function _parseHeader(uint8array) {\n    var height = 0;\n    var width = 0;\n    var line = this._readStringLine(uint8array, 0);\n    if (line[0] != \"#\" || line[1] != \"?\") {\n      throw \"Bad HDR Format.\";\n    }\n    var endOfHeader = false;\n    var findFormat = false;\n    var lineIndex = 0;\n    do {\n      lineIndex += line.length + 1;\n      line = this._readStringLine(uint8array, lineIndex);\n      if (line == \"FORMAT=32-bit_rle_rgbe\") {\n        findFormat = true;\n      } else if (line.length == 0) {\n        endOfHeader = true;\n      }\n    } while (!endOfHeader);\n    if (!findFormat) {\n      throw \"HDR Bad header format, unsupported FORMAT\";\n    }\n    lineIndex += line.length + 1;\n    line = this._readStringLine(uint8array, lineIndex);\n    var sizeRegexp = /^\\-Y (.*) \\+X (.*)$/g;\n    var match = sizeRegexp.exec(line);\n\n    // TODO. Support +Y and -X if needed.\n    if (!match || match.length < 3) {\n      throw \"HDR Bad header format, no size\";\n    }\n    width = parseInt(match[2]);\n    height = parseInt(match[1]);\n    if (width < 8 || width > 0x7fff) {\n      throw \"HDR Bad header format, unsupported size\";\n    }\n    lineIndex += line.length + 1;\n    return {\n      height: height,\n      width: width,\n      dataPosition: lineIndex\n    };\n  };\n  HDRLoader._readPixels = function _readPixels(buffer, width, height) {\n    var scanLineWidth = width;\n    var byteLength = buffer.byteLength;\n    var dataRGBA = new Uint8Array(4 * width * height);\n    var offset = 0,\n      pos = 0;\n    var ptrEnd = 4 * scanLineWidth;\n    var rgbeStart = new Uint8Array(4);\n    var scanLineBuffer = new Uint8Array(ptrEnd);\n    var numScanLines = height; // read in each successive scanLine\n\n    while (numScanLines > 0 && pos < byteLength) {\n      rgbeStart[0] = buffer[pos++];\n      rgbeStart[1] = buffer[pos++];\n      rgbeStart[2] = buffer[pos++];\n      rgbeStart[3] = buffer[pos++];\n      if (2 != rgbeStart[0] || 2 != rgbeStart[1] || (rgbeStart[2] << 8 | rgbeStart[3]) != scanLineWidth) {\n        throw \"HDR Bad header format, wrong scan line width\";\n      }\n\n      // read each of the four channels for the scanline into the buffer\n      // first red, then green, then blue, then exponent\n\n      var ptr = 0,\n        count = void 0;\n      while (ptr < ptrEnd && pos < byteLength) {\n        count = buffer[pos++];\n        var isEncodedRun = count > 128;\n        if (isEncodedRun) count -= 128;\n        if (0 === count || ptr + count > ptrEnd) {\n          throw \"HDR Bad Format, bad scanline data (run)\";\n        }\n        if (isEncodedRun) {\n          // a (encoded) run of the same value\n          var byteValue = buffer[pos++];\n          for (var i = 0; i < count; i++) {\n            scanLineBuffer[ptr++] = byteValue;\n          } //ptr += count;\n        } else {\n          // a literal-run\n          scanLineBuffer.set(buffer.subarray(pos, pos + count), ptr);\n          ptr += count;\n          pos += count;\n        }\n      } // now convert data from buffer into rgba\n      // first red, then green, then blue, then exponent (alpha)\n\n      var l = scanLineWidth; //scanLine_buffer.byteLength;\n\n      for (var _i = 0; _i < l; _i++) {\n        var off = 0;\n        dataRGBA[offset] = scanLineBuffer[_i + off];\n        off += scanLineWidth;\n        dataRGBA[offset + 1] = scanLineBuffer[_i + off];\n        off += scanLineWidth;\n        dataRGBA[offset + 2] = scanLineBuffer[_i + off];\n        off += scanLineWidth;\n        dataRGBA[offset + 3] = scanLineBuffer[_i + off];\n        offset += 4;\n      }\n      numScanLines--;\n    }\n    return dataRGBA;\n  };\n  HDRLoader._RGBEToLinear = function _RGBEToLinear(color) {\n    var scaleFactor = Math.pow(2, color.a - 128) / 255;\n    color.r *= scaleFactor;\n    color.g *= scaleFactor;\n    color.b *= scaleFactor;\n    color.a = 1;\n  };\n  HDRLoader._linearToRGBM = function _linearToRGBM(color, maxRange) {\n    var maxRGB = Math.max(color.r, Math.max(color.g, color.b));\n    var M = Math.min(maxRGB / maxRange, 1);\n    M = Math.ceil(M * 255);\n    var scaleFactor = 65025 / (M * maxRange); // 255 * (255 / (M * maxRange) )\n\n    color.r *= scaleFactor;\n    color.g *= scaleFactor;\n    color.b *= scaleFactor;\n    color.a *= M;\n  };\n  var _proto = HDRLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      var engine = resourceManager.engine;\n      _this.request(item.url, {\n        type: \"arraybuffer\"\n      }).then(function (buffer) {\n        var uint8Array = new Uint8Array(buffer);\n        var _HDRLoader$_parseHead = HDRLoader._parseHeader(uint8Array),\n          width = _HDRLoader$_parseHead.width,\n          height = _HDRLoader$_parseHead.height,\n          dataPosition = _HDRLoader$_parseHead.dataPosition;\n        var pixels = HDRLoader._readPixels(uint8Array.subarray(dataPosition), width, height);\n        var cubeSize = height >> 1;\n        var cubeMapData = HDRLoader._convertToCubemap(pixels, width, height, cubeSize);\n        var texture = new TextureCube(engine, cubeSize);\n        for (var faceIndex = 0; faceIndex < 6; faceIndex++) {\n          texture.setPixelBuffer(TextureCubeFace.PositiveX + faceIndex, cubeMapData[faceIndex], 0);\n        }\n        texture.generateMipmaps();\n        resolve(texture);\n      }).catch(reject);\n    });\n  };\n  return HDRLoader;\n}(Loader), _class2$1._rightBottomBack = new Vector3(1.0, -1.0, -1.0), _class2$1._rightBottomFront = new Vector3(1.0, -1.0, 1.0), _class2$1._rightUpBack = new Vector3(1.0, 1.0, -1.0), _class2$1._rightUpFront = new Vector3(1.0, 1.0, 1.0), _class2$1._leftBottomBack = new Vector3(-1.0, -1.0, -1.0), _class2$1._leftBottomFront = new Vector3(-1.0, -1.0, 1.0), _class2$1._leftUpBack = new Vector3(-1.0, 1.0, -1.0), _class2$1._leftUpFront = new Vector3(-1.0, 1.0, 1.0), _class2$1._faceRight = [_class2$1._rightBottomBack, _class2$1._rightBottomFront, _class2$1._rightUpBack, _class2$1._rightUpFront], _class2$1._faceLeft = [_class2$1._leftBottomFront, _class2$1._leftBottomBack, _class2$1._leftUpFront, _class2$1._leftUpBack], _class2$1._faceUp = [_class2$1._leftBottomFront, _class2$1._rightBottomFront, _class2$1._leftBottomBack, _class2$1._rightBottomBack], _class2$1._faceBottom = [_class2$1._leftUpBack, _class2$1._rightUpBack, _class2$1._leftUpFront, _class2$1._rightUpFront], _class2$1._faceFront = [_class2$1._leftBottomBack, _class2$1._rightBottomBack, _class2$1._leftUpBack, _class2$1._rightUpBack], _class2$1._faceBack = [_class2$1._rightBottomFront, _class2$1._leftBottomFront, _class2$1._rightUpFront, _class2$1._leftUpFront], _class2$1._tempVector3 = new Vector3(), _class2$1._temp2Vector3 = new Vector3(), _class2$1._temp3Vector3 = new Vector3(), _class2$1._temp4Vector3 = new Vector3(), _class2$1._temp5Vector3 = new Vector3(), _class2$1)) || _class$h);\n\nvar ExtensionParser = /*#__PURE__*/function () {\n  function ExtensionParser() {}\n  var _proto = ExtensionParser.prototype;\n  _proto.initialize = function initialize() {};\n  _proto.parseEngineResource = function parseEngineResource(schema, parseResource, context) {};\n  _proto.createEngineResource = function createEngineResource(schema, context) {\n    return null;\n  };\n  return ExtensionParser;\n}();\n\nvar _dec$g, _class$g, _class2;\n(_dec$g = registerExtension(\"KHR_draco_mesh_compression\"), _dec$g(_class$g = (_class2 = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_draco_mesh_compression, _ExtensionParser);\n  function KHR_draco_mesh_compression() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_draco_mesh_compression.prototype;\n  _proto.initialize = function initialize() {\n    if (!KHR_draco_mesh_compression._decoder) {\n      KHR_draco_mesh_compression._decoder = new DRACODecoder();\n    }\n  };\n  _proto.createEngineResource = function createEngineResource(schema, context, gltfPrimitive) {\n    var gltf = context.gltf,\n      buffers = context.buffers;\n    var bufferViews = gltf.bufferViews,\n      accessors = gltf.accessors;\n    var bufferViewIndex = schema.bufferView,\n      gltfAttributeMap = schema.attributes;\n    var attributeMap = {};\n    var attributeTypeMap = {};\n    for (var attributeName in gltfAttributeMap) {\n      attributeMap[attributeName] = gltfAttributeMap[attributeName];\n    }\n    for (var _attributeName in gltfPrimitive.attributes) {\n      if (gltfAttributeMap[_attributeName] !== undefined) {\n        var accessorDef = accessors[gltfPrimitive.attributes[_attributeName]];\n        attributeTypeMap[_attributeName] = GLTFUtil.getComponentType(accessorDef.componentType).name;\n      }\n    }\n    var indexAccessor = accessors[gltfPrimitive.indices];\n    var indexType = GLTFUtil.getComponentType(indexAccessor.componentType).name;\n    var taskConfig = {\n      attributeIDs: attributeMap,\n      attributeTypes: attributeTypeMap,\n      useUniqueIDs: true,\n      indexType: indexType\n    };\n    var buffer = GLTFUtil.getBufferViewData(bufferViews[bufferViewIndex], buffers);\n    return KHR_draco_mesh_compression._decoder.decode(buffer, taskConfig).then(function (parsedGeometry) {\n      return parsedGeometry;\n    });\n  };\n  return KHR_draco_mesh_compression;\n}(ExtensionParser), _class2._decoder = void 0, _class2)) || _class$g);\n\nvar _dec$f, _class$f;\n(_dec$f = registerExtension(\"KHR_lights_punctual\"), _dec$f(_class$f = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_lights_punctual, _ExtensionParser);\n  function KHR_lights_punctual() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_lights_punctual.prototype;\n  _proto.parseEngineResource = function parseEngineResource(schema, entity, context) {\n    var color = schema.color,\n      _schema$intensity = schema.intensity,\n      intensity = _schema$intensity === void 0 ? 1 : _schema$intensity,\n      type = schema.type,\n      range = schema.range,\n      spot = schema.spot;\n    var light;\n    if (type === \"directional\") {\n      light = entity.addComponent(DirectLight);\n    } else if (type === \"point\") {\n      light = entity.addComponent(PointLight);\n    } else if (type === \"spot\") {\n      light = entity.addComponent(SpotLight);\n    }\n    if (color) {\n      light.color.set(color[0], color[1], color[2], 1);\n    }\n    light.intensity = intensity;\n    if (range && !(light instanceof DirectLight)) {\n      light.distance = range;\n    }\n    if (spot && light instanceof SpotLight) {\n      var _spot$innerConeAngle = spot.innerConeAngle,\n        innerConeAngle = _spot$innerConeAngle === void 0 ? 0 : _spot$innerConeAngle,\n        _spot$outerConeAngle = spot.outerConeAngle,\n        outerConeAngle = _spot$outerConeAngle === void 0 ? Math.PI / 4 : _spot$outerConeAngle;\n      light.angle = innerConeAngle;\n      light.penumbra = outerConeAngle - innerConeAngle;\n    }\n    if (!context.lights) context.lights = [];\n    context.lights.push(light);\n  };\n  return KHR_lights_punctual;\n}(ExtensionParser)) || _class$f);\n\nvar _dec$e, _class$e;\n(_dec$e = registerExtension(\"KHR_materials_clearcoat\"), _dec$e(_class$e = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_materials_clearcoat, _ExtensionParser);\n  function KHR_materials_clearcoat() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_materials_clearcoat.prototype;\n  _proto.parseEngineResource = function parseEngineResource(schema, material, context) {\n    var textures = context.textures;\n    var _schema$clearcoatFact = schema.clearcoatFactor,\n      clearcoatFactor = _schema$clearcoatFact === void 0 ? 0 : _schema$clearcoatFact,\n      clearcoatTexture = schema.clearcoatTexture,\n      _schema$clearcoatRoug = schema.clearcoatRoughnessFactor,\n      clearcoatRoughnessFactor = _schema$clearcoatRoug === void 0 ? 0 : _schema$clearcoatRoug,\n      clearcoatRoughnessTexture = schema.clearcoatRoughnessTexture,\n      clearcoatNormalTexture = schema.clearcoatNormalTexture;\n    material.clearCoat = clearcoatFactor;\n    material.clearCoatRoughness = clearcoatRoughnessFactor;\n    if (clearcoatTexture) {\n      material.clearCoatTexture = textures[clearcoatTexture.index];\n      MaterialParser._parseTextureTransform(material, clearcoatTexture.extensions, context);\n    }\n    if (clearcoatRoughnessTexture) {\n      material.clearCoatRoughnessTexture = textures[clearcoatRoughnessTexture.index];\n      MaterialParser._parseTextureTransform(material, clearcoatRoughnessTexture.extensions, context);\n    }\n    if (clearcoatNormalTexture) {\n      material.clearCoatNormalTexture = textures[clearcoatNormalTexture.index];\n      MaterialParser._parseTextureTransform(material, clearcoatNormalTexture.extensions, context);\n    }\n  };\n  return KHR_materials_clearcoat;\n}(ExtensionParser)) || _class$e);\n\nvar _dec$d, _class$d;\n(_dec$d = registerExtension(\"KHR_materials_pbrSpecularGlossiness\"), _dec$d(_class$d = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_materials_pbrSpecularGlossiness, _ExtensionParser);\n  function KHR_materials_pbrSpecularGlossiness() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_materials_pbrSpecularGlossiness.prototype;\n  _proto.createEngineResource = function createEngineResource(schema, context) {\n    var engine = context.engine,\n      textures = context.textures;\n    var material = new PBRSpecularMaterial(engine);\n    var diffuseFactor = schema.diffuseFactor,\n      diffuseTexture = schema.diffuseTexture,\n      specularFactor = schema.specularFactor,\n      glossinessFactor = schema.glossinessFactor,\n      specularGlossinessTexture = schema.specularGlossinessTexture;\n    if (diffuseFactor) {\n      material.baseColor = new Color(Color.linearToGammaSpace(diffuseFactor[0]), Color.linearToGammaSpace(diffuseFactor[1]), Color.linearToGammaSpace(diffuseFactor[2]), diffuseFactor[3]);\n    }\n    if (diffuseTexture) {\n      material.baseTexture = textures[diffuseTexture.index];\n      MaterialParser._parseTextureTransform(material, diffuseTexture.extensions, context);\n    }\n    if (specularFactor) {\n      material.specularColor = new Color(Color.linearToGammaSpace(specularFactor[0]), Color.linearToGammaSpace(specularFactor[1]), Color.linearToGammaSpace(specularFactor[2]));\n    }\n    if (glossinessFactor !== undefined) {\n      material.glossiness = glossinessFactor;\n    }\n    if (specularGlossinessTexture) {\n      material.specularGlossinessTexture = textures[specularGlossinessTexture.index];\n      MaterialParser._parseTextureTransform(material, specularGlossinessTexture.extensions, context);\n    }\n    return material;\n  };\n  return KHR_materials_pbrSpecularGlossiness;\n}(ExtensionParser)) || _class$d);\n\nvar _dec$c, _class$c;\n(_dec$c = registerExtension(\"KHR_materials_unlit\"), _dec$c(_class$c = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_materials_unlit, _ExtensionParser);\n  function KHR_materials_unlit() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_materials_unlit.prototype;\n  _proto.createEngineResource = function createEngineResource(schema, context) {\n    var engine = context.engine;\n    var material = new UnlitMaterial(engine);\n    return material;\n  };\n  return KHR_materials_unlit;\n}(ExtensionParser)) || _class$c);\n\nvar _dec$b, _class$b;\n(_dec$b = registerExtension(\"KHR_materials_variants\"), _dec$b(_class$b = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_materials_variants, _ExtensionParser);\n  function KHR_materials_variants() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_materials_variants.prototype;\n  _proto.parseEngineResource = function parseEngineResource(schema, renderer, context) {\n    var variantNames = context.gltf.extensions.KHR_materials_variants.variants,\n      materials = context.materials;\n    var mappings = schema.mappings;\n    for (var i = 0; i < mappings.length; i++) {\n      var _mappings$i = mappings[i],\n        material = _mappings$i.material,\n        variants = _mappings$i.variants;\n      if (!context.variants) context.variants = [];\n      context.variants.push({\n        renderer: renderer,\n        material: materials[material],\n        variants: variants.map(function (index) {\n          return variantNames[index].name;\n        })\n      });\n    }\n  };\n  return KHR_materials_variants;\n}(ExtensionParser)) || _class$b);\n\nvar _dec$a, _class$a;\n(_dec$a = registerExtension(\"KHR_mesh_quantization\"), _dec$a(_class$a = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_mesh_quantization, _ExtensionParser);\n  function KHR_mesh_quantization() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  return KHR_mesh_quantization;\n}(ExtensionParser)) || _class$a);\n\nvar _dec$9, _class$9;\n(_dec$9 = registerExtension(\"KHR_texture_transform\"), _dec$9(_class$9 = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(KHR_texture_transform, _ExtensionParser);\n  function KHR_texture_transform() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = KHR_texture_transform.prototype;\n  _proto.parseEngineResource = function parseEngineResource(schema, material, context) {\n    var offset = schema.offset,\n      rotation = schema.rotation,\n      scale = schema.scale,\n      texCoord = schema.texCoord;\n    if (offset) {\n      material.tilingOffset.z = offset[0];\n      material.tilingOffset.w = offset[1];\n    }\n    if (scale) {\n      material.tilingOffset.x = scale[0];\n      material.tilingOffset.y = scale[1];\n    }\n    if (rotation) {\n      Logger.warn(\"rotation in KHR_texture_transform is not supported now\");\n    }\n    if (texCoord) {\n      Logger.warn(\"texCoord in KHR_texture_transform is not supported now\");\n    }\n  };\n  return KHR_texture_transform;\n}(ExtensionParser)) || _class$9);\n\nvar _dec$8, _class$8;\n(_dec$8 = registerExtension(\"OASIS_materials_remap\"), _dec$8(_class$8 = /*#__PURE__*/function (_ExtensionParser) {\n  _inheritsLoose(OasisMaterialsRemap, _ExtensionParser);\n  function OasisMaterialsRemap() {\n    return _ExtensionParser.apply(this, arguments) || this;\n  }\n  var _proto = OasisMaterialsRemap.prototype;\n  _proto.createEngineResource = function createEngineResource(schema, context) {\n    var engine = context.engine;\n    return engine.resourceManager.getResourceByRef(schema);\n  };\n  return OasisMaterialsRemap;\n}(ExtensionParser)) || _class$8);\n\nvar _dec$7, _class$7;\n(_dec$7 = resourceLoader(AssetType.Material, [\"json\"]), _dec$7(_class$7 = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(MaterialLoader, _Loader);\n  function MaterialLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = MaterialLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"json\"\n      })).then(function (json) {\n        var engine = resourceManager.engine;\n        var shader = json.shader,\n          shaderData = json.shaderData,\n          macros = json.macros,\n          renderState = json.renderState;\n        var material;\n        switch (shader) {\n          case \"pbr\":\n            material = new PBRMaterial(engine);\n            break;\n          case \"pbr-specular\":\n            material = new PBRSpecularMaterial(engine);\n            break;\n          case \"unlit\":\n            material = new UnlitMaterial(engine);\n            break;\n          case \"blinn-phong\":\n            material = new BlinnPhongMaterial(engine);\n            break;\n        }\n        var texturePromises = new Array();\n        var materialShaderData = material.shaderData;\n        var _loop = function _loop(_key) {\n          var _shaderData$_key = shaderData[_key],\n            type = _shaderData$_key.type,\n            value = _shaderData$_key.value;\n          switch (type) {\n            case \"Vector2\":\n              materialShaderData.setVector2(_key, new Vector2(value.x, value.y));\n              break;\n            case \"Vector3\":\n              materialShaderData.setVector3(_key, new Vector3(value.x, value.y, value.z));\n              break;\n            case \"Vector4\":\n              materialShaderData.setVector4(_key, new Vector4(value.x, value.y, value.z, value.w));\n              break;\n            case \"Color\":\n              materialShaderData.setColor(_key, new Color(value.r, value.g, value.b, value.a));\n              break;\n            case \"Float\":\n              materialShaderData.setFloat(_key, value);\n              break;\n            case \"Texture\":\n              texturePromises.push(resourceManager.getResourceByRef(value).then(function (texture) {\n                materialShaderData.setTexture(_key, texture);\n              }));\n              break;\n          }\n        };\n        for (var _key in shaderData) {\n          _loop(_key);\n        }\n        for (var i = 0, length = macros.length; i < length; i++) {\n          var _macros$i = macros[i],\n            name = _macros$i.name,\n            value = _macros$i.value;\n          if (value == undefined) {\n            materialShaderData.enableMacro(name);\n          } else {\n            materialShaderData.enableMacro(name, value);\n          }\n        }\n        for (var _key2 in renderState) {\n          material[_key2] = renderState[_key2];\n        }\n        Promise.all(texturePromises).then(function () {\n          resolve(material);\n        });\n      });\n    });\n  };\n  return MaterialLoader;\n}(Loader)) || _class$7);\n\nvar BufferReader = /*#__PURE__*/function () {\n  function BufferReader(buffer, byteOffset, byteLength, littleEndian) {\n    if (byteOffset === void 0) {\n      byteOffset = 0;\n    }\n    if (littleEndian === void 0) {\n      littleEndian = true;\n    }\n    this.buffer = buffer;\n    this._dataView = void 0;\n    this._littleEndian = void 0;\n    this._offset = void 0;\n    // byteLength = byteLength ?? _buffer.byteLength;\n    this._dataView = new DataView(buffer);\n    this._littleEndian = littleEndian;\n    this._offset = byteOffset;\n  }\n  var _proto = BufferReader.prototype;\n  _proto.nextUint8 = function nextUint8() {\n    var value = this._dataView.getUint8(this._offset);\n    this._offset += 1;\n    return value;\n  };\n  _proto.nextUint16 = function nextUint16() {\n    var value = this._dataView.getUint16(this._offset, this._littleEndian);\n    this._offset += 2;\n    return value;\n  };\n  _proto.nextUint32 = function nextUint32() {\n    var value = this._dataView.getUint32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  };\n  _proto.nextInt32 = function nextInt32() {\n    var value = this._dataView.getInt32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  };\n  _proto.nextInt32Array = function nextInt32Array(len) {\n    var value = new Int32Array(this.buffer, this._offset, len);\n    this._offset += 4 * len;\n    return value;\n  };\n  _proto.nextFloat32 = function nextFloat32() {\n    var value = this._dataView.getFloat32(this._offset, this._littleEndian);\n    this._offset += 4;\n    return value;\n  };\n  _proto.nextFloat32Array = function nextFloat32Array(len) {\n    var value = new Float32Array(this.buffer, this._offset, len);\n    this._offset += 4 * len;\n    return value;\n  };\n  _proto.nextUint32Array = function nextUint32Array(len) {\n    var value = new Uint32Array(this.buffer, this._offset, len);\n    this._offset += 4 * len;\n    return value;\n  };\n  _proto.nextUint8Array = function nextUint8Array(len) {\n    var value = new Uint8Array(this.buffer, this._offset, len);\n    this._offset += len;\n    return value;\n  };\n  _proto.nextUint64 = function nextUint64() {\n    var left = this._dataView.getUint32(this._offset, this._littleEndian);\n    var right = this._dataView.getUint32(this._offset + 4, this._littleEndian);\n    var value = left + Math.pow(2, 32) * right;\n    this._offset += 8;\n    return value;\n  };\n  _proto.nextStr = function nextStr() {\n    var strByteLength = this.nextUint16();\n    var uint8Array = new Uint8Array(this.buffer, this._offset, strByteLength);\n    this._offset += strByteLength;\n    return GLTFUtil.decodeText(uint8Array);\n  }\n\n  /**\n   * image data 放在最后\n   */;\n  _proto.nextImageData = function nextImageData(count) {\n    return this.buffer.slice(this._offset);\n  };\n  _proto.nextImagesData = function nextImagesData(count) {\n    var imagesLen = new Array(count);\n    // Start offset of Uint32Array should be a multiple of 4. ref: https://stackoverflow.com/questions/15417310/why-typed-array-constructors-require-offset-to-be-multiple-of-underlying-type-si\n    for (var i = 0; i < count; i++) {\n      var len = this._dataView.getUint32(this._offset, this._littleEndian);\n      imagesLen[i] = len;\n      this._offset += 4;\n    }\n    var imagesData = [];\n    for (var _i = 0; _i < count; _i++) {\n      var _len = imagesLen[_i];\n      var _buffer = this.buffer.slice(this._offset, this._offset + _len);\n      this._offset += _len;\n      imagesData.push(_buffer);\n    }\n    return imagesData;\n  };\n  _proto.skip = function skip(bytes) {\n    this._offset += bytes;\n    return this;\n  };\n  _proto.scan = function scan(maxByteLength, term) {\n    if (term === void 0) {\n      term = 0x00;\n    }\n    var byteOffset = this._offset;\n    var byteLength = 0;\n    while (this._dataView.getUint8(this._offset) !== term && byteLength < maxByteLength) {\n      byteLength++;\n      this._offset++;\n    }\n    if (byteLength < maxByteLength) this._offset++;\n    return new Uint8Array(this._dataView.buffer, this._dataView.byteOffset + byteOffset, byteLength);\n  };\n  _createClass(BufferReader, [{\n    key: \"offset\",\n    get: function get() {\n      return this._offset;\n    }\n  }]);\n  return BufferReader;\n}();\nBufferReader.imageMapping = {\n  0: \"image/png\",\n  1: \"image/jpg\",\n  2: \"image/webp\",\n  3: \"ktx\"\n};\n\nvar decoderMap = {};\n\n/**\n * Decoder decorator generator.\n * @param type - resource file type.\n * @returns Decoder decorator\n */\nfunction decoder(type) {\n  return function (target) {\n    decoderMap[type] = target;\n  };\n}\n\nvar FileHeader = /*#__PURE__*/function () {\n  function FileHeader() {\n    this.totalLength = 0;\n    this.version = 0;\n    this.type = \"\";\n    this.name = \"\";\n    this.headerLength = 0;\n  }\n  FileHeader.decode = function decode(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var totalLen = dataView.getUint32(0, true);\n    var fileVersion = dataView.getUint8(4);\n    var typeLen = dataView.getUint16(5, true);\n    var typeUint8Array = new Uint8Array(arrayBuffer, 7, typeLen);\n    var nameLen = dataView.getUint16(7 + typeLen, true);\n    var nameUint8Array = new Uint8Array(arrayBuffer, 9 + typeLen, nameLen);\n    var name = GLTFUtil.decodeText(nameUint8Array);\n    var type = GLTFUtil.decodeText(typeUint8Array);\n    var header = new FileHeader();\n    header.totalLength = totalLen;\n    header.name = name;\n    header.type = type;\n    header.version = fileVersion;\n    header.headerLength = nameUint8Array.byteLength + typeUint8Array.byteLength + 9;\n    return header;\n  };\n  _createClass(FileHeader, [{\n    key: \"dataLength\",\n    get: function get() {\n      return this.totalLength - this.headerLength;\n    }\n  }]);\n  return FileHeader;\n}();\n\nvar _dec$6, _class$6;\nvar MeshDecoder = (_dec$6 = decoder(\"Mesh\"), _dec$6(_class$6 = /*#__PURE__*/function () {\n  function MeshDecoder() {}\n  MeshDecoder.decode = function decode(engine, bufferReader) {\n    return new Promise(function (resolve) {\n      var modelMesh = new ModelMesh(engine);\n      var jsonDataString = bufferReader.nextStr();\n      var encodedMeshData = JSON.parse(jsonDataString);\n      var offset = Math.ceil(bufferReader.offset / 4) * 4;\n      var float32Array = new Float32Array(bufferReader.buffer, encodedMeshData.positions.start + offset, (encodedMeshData.positions.end - encodedMeshData.positions.start) / 4);\n      var vertexCount = float32Array.length / 3;\n      var positions = float32ArrayToVector3(float32Array, vertexCount);\n      modelMesh.setPositions(positions);\n      if (encodedMeshData.normals) {\n        var _float32Array = new Float32Array(bufferReader.buffer, encodedMeshData.normals.start + offset, (encodedMeshData.normals.end - encodedMeshData.normals.start) / 4);\n        var normals = float32ArrayToVector3(_float32Array, vertexCount);\n        modelMesh.setNormals(normals);\n      }\n      if (encodedMeshData.uvs) {\n        var _float32Array2 = new Float32Array(bufferReader.buffer, encodedMeshData.uvs.start + offset, (encodedMeshData.uvs.end - encodedMeshData.uvs.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array2, vertexCount));\n      }\n      if (encodedMeshData.uv1) {\n        var _float32Array3 = new Float32Array(bufferReader.buffer, encodedMeshData.uv1.start + offset, (encodedMeshData.uv1.end - encodedMeshData.uv1.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array3, vertexCount), 1);\n      }\n      if (encodedMeshData.uv2) {\n        var _float32Array4 = new Float32Array(bufferReader.buffer, encodedMeshData.uv2.start + offset, (encodedMeshData.uv2.end - encodedMeshData.uv2.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array4, vertexCount), 2);\n      }\n      if (encodedMeshData.uv3) {\n        var _float32Array5 = new Float32Array(bufferReader.buffer, encodedMeshData.uv3.start + offset, (encodedMeshData.uv3.end - encodedMeshData.uv3.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array5, vertexCount), 3);\n      }\n      if (encodedMeshData.uv4) {\n        var _float32Array6 = new Float32Array(bufferReader.buffer, encodedMeshData.uv4.start + offset, (encodedMeshData.uv4.end - encodedMeshData.uv4.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array6, vertexCount), 4);\n      }\n      if (encodedMeshData.uv5) {\n        var _float32Array7 = new Float32Array(bufferReader.buffer, encodedMeshData.uv5.start + offset, (encodedMeshData.uv5.end - encodedMeshData.uv5.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array7, vertexCount), 5);\n      }\n      if (encodedMeshData.uv6) {\n        var _float32Array8 = new Float32Array(bufferReader.buffer, encodedMeshData.uv6.start + offset, (encodedMeshData.uv6.end - encodedMeshData.uv6.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array8, vertexCount), 6);\n      }\n      if (encodedMeshData.uv7) {\n        var _float32Array9 = new Float32Array(bufferReader.buffer, encodedMeshData.uv7.start + offset, (encodedMeshData.uv7.end - encodedMeshData.uv7.start) / 4);\n        modelMesh.setUVs(float32ArrayToVector2(_float32Array9, vertexCount), 7);\n      }\n      if (encodedMeshData.colors) {\n        var _float32Array10 = new Float32Array(bufferReader.buffer, encodedMeshData.colors.start + offset, (encodedMeshData.colors.end - encodedMeshData.colors.start) / 4);\n        modelMesh.setColors(float32ArrayToVColor(_float32Array10, vertexCount));\n      }\n      if (encodedMeshData.boneWeights) {\n        var _float32Array11 = new Float32Array(bufferReader.buffer, encodedMeshData.boneWeights.start + offset, (encodedMeshData.boneWeights.end - encodedMeshData.boneWeights.start) / 4);\n        modelMesh.setBoneWeights(float32ArrayToVector4(_float32Array11, vertexCount));\n      }\n      if (encodedMeshData.boneIndices) {\n        var _float32Array12 = new Float32Array(bufferReader.buffer, encodedMeshData.boneIndices.start + offset, (encodedMeshData.boneIndices.end - encodedMeshData.boneIndices.start) / 4);\n        modelMesh.setBoneIndices(float32ArrayToVector4(_float32Array12, vertexCount));\n      }\n      if (encodedMeshData.blendShapes) {\n        encodedMeshData.blendShapes.forEach(function (blendShapeData) {\n          var blendShape = new BlendShape(blendShapeData.name);\n          blendShapeData.frames.forEach(function (frameData) {\n            var positionArray = new Float32Array(bufferReader.buffer, frameData.deltaPosition.start + offset, (frameData.deltaPosition.end - frameData.deltaPosition.start) / 4);\n            var count = positionArray.length / 3;\n            var deltaPosition = float32ArrayToVector3(positionArray, count);\n            if (frameData.deltaNormals) {\n              var normalsArray = new Float32Array(bufferReader.buffer, frameData.deltaNormals.start + offset, (frameData.deltaNormals.end - frameData.deltaNormals.start) / 4);\n              float32ArrayToVector3(normalsArray, count);\n            }\n            if (frameData.deltaTangents) {\n              var tangentsArray = new Float32Array(bufferReader.buffer, frameData.deltaTangents.start + offset, (frameData.deltaTangents.end - frameData.deltaTangents.start) / 4);\n              float32ArrayToVector4(tangentsArray, count);\n            }\n            blendShape.addFrame(frameData.weight, deltaPosition);\n          });\n          modelMesh.addBlendShape(blendShape);\n        });\n      }\n      if (encodedMeshData.indices) {\n        var indices = null;\n        if (encodedMeshData.indices.type === 0) {\n          indices = new Uint16Array(bufferReader.buffer, encodedMeshData.indices.start + offset, (encodedMeshData.indices.end - encodedMeshData.indices.start) / 2);\n        } else {\n          indices = new Uint32Array(bufferReader.buffer, encodedMeshData.indices.start + offset, (encodedMeshData.indices.end - encodedMeshData.indices.start) / 4);\n        }\n        modelMesh.setIndices(indices);\n      }\n      encodedMeshData.subMeshes.forEach(function (subMesh) {\n        modelMesh.addSubMesh(subMesh);\n      });\n      modelMesh.uploadData(false);\n      resolve(modelMesh);\n    });\n  };\n  return MeshDecoder;\n}()) || _class$6);\nfunction float32ArrayToVColor(float32Array, vertexCount) {\n  var array = new Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    array[i] = new Color(float32Array[i * 4], float32Array[i * 4 + 1], float32Array[i * 4 + 2], float32Array[i * 4 + 3]);\n  }\n  return array;\n}\nfunction float32ArrayToVector4(float32Array, vertexCount) {\n  var array = new Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    array[i] = new Vector4(float32Array[i * 4], float32Array[i * 4 + 1], float32Array[i * 4 + 2], float32Array[i * 4 + 3]);\n  }\n  return array;\n}\nfunction float32ArrayToVector3(float32Array, vertexCount) {\n  var array = new Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    array[i] = new Vector3(float32Array[i * 3], float32Array[i * 3 + 1], float32Array[i * 3 + 2]);\n  }\n  return array;\n}\nfunction float32ArrayToVector2(float32Array, vertexCount) {\n  var array = new Array(vertexCount);\n  for (var i = 0; i < vertexCount; i++) {\n    array[i] = new Vector2(float32Array[i * 2], float32Array[i * 2 + 1]);\n  }\n  return array;\n}\n\nvar _dec$5, _class$5;\nvar Texture2DDecoder = (_dec$5 = decoder(\"Texture2D\"), _dec$5(_class$5 = /*#__PURE__*/function () {\n  function Texture2DDecoder() {}\n  Texture2DDecoder.decode = function decode(engine, bufferReader) {\n    return new Promise(function (resolve, reject) {\n      var objectId = bufferReader.nextStr();\n      var mipmap = !!bufferReader.nextUint8();\n      var filterMode = bufferReader.nextUint8();\n      var anisoLevel = bufferReader.nextUint8();\n      var wrapModeU = bufferReader.nextUint8();\n      var wrapModeV = bufferReader.nextUint8();\n      var format = bufferReader.nextUint8();\n      var width = bufferReader.nextUint16();\n      var height = bufferReader.nextUint16();\n      var isPixelBuffer = bufferReader.nextUint8();\n      var mipCount = bufferReader.nextUint8();\n      var imagesData = bufferReader.nextImagesData(mipCount);\n      var texture2D = new Texture2D(engine, width, height, format, mipmap);\n      texture2D.filterMode = filterMode;\n      texture2D.anisoLevel = anisoLevel;\n      texture2D.wrapModeU = wrapModeU;\n      texture2D.wrapModeV = wrapModeV;\n      if (isPixelBuffer) {\n        var pixelBuffer = new Uint8Array(imagesData[0]);\n        texture2D.setPixelBuffer(pixelBuffer);\n        if (mipmap) {\n          texture2D.generateMipmaps();\n          for (var i = 1; i < mipCount; i++) {\n            var _pixelBuffer = new Uint8Array(imagesData[i]);\n            texture2D.setPixelBuffer(_pixelBuffer, i);\n          }\n        }\n        // @ts-ignore\n        engine.resourceManager._objectPool[objectId] = texture2D;\n        resolve(texture2D);\n      } else {\n        var blob = new window.Blob([imagesData[0]]);\n        var img = new Image();\n        img.onload = function () {\n          texture2D.setImageSource(img);\n          var completedCount = 0;\n          var onComplete = function onComplete() {\n            completedCount++;\n            if (completedCount >= mipCount) {\n              resolve(texture2D);\n            }\n          };\n          onComplete();\n          if (mipmap) {\n            texture2D.generateMipmaps();\n            var _loop = function _loop(_i) {\n              var blob = new window.Blob([imagesData[_i]]);\n              var img = new Image();\n              img.onload = function () {\n                texture2D.setImageSource(img, _i);\n                onComplete();\n              };\n              img.src = URL.createObjectURL(blob);\n            };\n            for (var _i = 1; _i < mipCount; _i++) {\n              _loop(_i);\n            }\n          }\n        };\n        img.src = URL.createObjectURL(blob);\n      }\n    });\n  };\n  return Texture2DDecoder;\n}()) || _class$5);\n\nvar ReflectionParser = /*#__PURE__*/function () {\n  function ReflectionParser() {}\n  ReflectionParser.parseEntity = function parseEntity(entityConfig, engine) {\n    var _this = this;\n    return ReflectionParser.getEntityByConfig(entityConfig, engine).then(function (entity) {\n      var _entityConfig$isActiv;\n      entity.isActive = (_entityConfig$isActiv = entityConfig.isActive) != null ? _entityConfig$isActiv : true;\n      var position = entityConfig.position,\n        rotation = entityConfig.rotation,\n        scale = entityConfig.scale;\n      if (position) {\n        entity.transform.setPosition(position.x, position.y, position.z);\n      }\n      if (rotation) {\n        entity.transform.setRotation(rotation.x, rotation.y, rotation.z);\n      }\n      if (scale) {\n        entity.transform.setScale(scale.x, scale.y, scale.z);\n      }\n      var promises = [];\n      for (var i = 0; i < entityConfig.components.length; i++) {\n        var componentConfig = entityConfig.components[i];\n        var key = !componentConfig.refId ? componentConfig.class : componentConfig.refId;\n        var component = void 0;\n        if (key === \"Animator\") {\n          component = entity.getComponent(Loader.getClass(key));\n        }\n        component = component || entity.addComponent(Loader.getClass(key));\n        var promise = _this.parsePropsAndMethods(component, componentConfig, engine);\n        promises.push(promise);\n      }\n      return Promise.all(promises).then(function () {\n        return entity;\n      });\n    });\n  };\n  ReflectionParser.getEntityByConfig = function getEntityByConfig(entityConfig, engine) {\n    // @ts-ignore\n    var assetRefId = entityConfig.assetRefId;\n    if (assetRefId) {\n      // @ts-ignore\n      return engine.resourceManager.getResourceByRef({\n        refId: assetRefId,\n        key: entityConfig.key\n      });\n    } else {\n      var entity = new Entity(engine, entityConfig.name);\n      return Promise.resolve(entity);\n    }\n  };\n  ReflectionParser.parseClassObject = function parseClassObject(item, engine, resourceManager) {\n    var _item$constructParams;\n    if (resourceManager === void 0) {\n      resourceManager = engine.resourceManager;\n    }\n    var Class = Loader.getClass(item.class);\n    var params = (_item$constructParams = item.constructParams) != null ? _item$constructParams : [];\n    var instance = _construct(Class, params);\n    return this.parsePropsAndMethods(instance, item, engine, resourceManager);\n  };\n  ReflectionParser.parseBasicType = function parseBasicType(value, engine, resourceManager) {\n    var _this2 = this;\n    if (resourceManager === void 0) {\n      resourceManager = engine.resourceManager;\n    }\n    if (Array.isArray(value)) {\n      return Promise.all(value.map(function (item) {\n        return _this2.parseBasicType(item, engine, resourceManager);\n      }));\n    } else if (typeof value === \"object\" && value != null) {\n      if (this._isClass(value)) {\n        // 类对象\n        return this.parseClassObject(value, engine, resourceManager);\n      } else if (this._isRef(value)) {\n        // 引用对象\n        return resourceManager.getResourceByRef(value);\n      } else {\n        // 基础类型\n        return Promise.resolve(value);\n      }\n    } else {\n      return Promise.resolve(value);\n    }\n  };\n  ReflectionParser.parsePropsAndMethods = function parsePropsAndMethods(instance, item, engine, resourceManager) {\n    var _this3 = this;\n    if (resourceManager === void 0) {\n      resourceManager = engine.resourceManager;\n    }\n    var promises = [];\n    if (item.methods) {\n      for (var methodName in item.methods) {\n        var methodParams = item.methods[methodName];\n        for (var i = 0, count = methodParams.length; i < count; i++) {\n          var params = methodParams[i];\n          var promise = this.parseMethod(instance, methodName, params, engine, resourceManager);\n          promises.push(promise);\n        }\n      }\n    }\n    if (item.props) {\n      var _loop = function _loop(key) {\n        var value = item.props[key];\n        var promise = _this3.parseBasicType(value, engine).then(function (v) {\n          return instance[key] = v;\n        });\n        promises.push(promise);\n      };\n      for (var key in item.props) {\n        _loop(key);\n      }\n    }\n    return Promise.all(promises).then(function () {\n      return instance;\n    });\n  };\n  ReflectionParser.parseMethod = function parseMethod(instance, methodName, methodParams, engine, resourceManager) {\n    var _this4 = this;\n    if (resourceManager === void 0) {\n      resourceManager = engine.resourceManager;\n    }\n    return Promise.all(methodParams.map(function (param) {\n      return _this4.parseBasicType(param, engine, resourceManager);\n    })).then(function (result) {\n      return instance[methodName].apply(instance, result);\n    });\n  };\n  ReflectionParser._isClass = function _isClass(value) {\n    return value[\"class\"] != undefined;\n  };\n  ReflectionParser._isRef = function _isRef(value) {\n    return value[\"refId\"] != undefined;\n  };\n  return ReflectionParser;\n}();\n\nvar PrefabParser = /*#__PURE__*/function () {\n  function PrefabParser(_engine) {\n    this._engine = _engine;\n  }\n  var _proto = PrefabParser.prototype;\n  _proto.parse = function parse(data) {\n    var entitiesMap = {};\n    var entitiesConfigMap = {};\n    var promises = [];\n    var entitiesConfig = data.entities;\n    for (var _iterator = _createForOfIteratorHelperLoose(entitiesConfig), _step; !(_step = _iterator()).done;) {\n      var entity = _step.value;\n      entitiesConfigMap[entity.id] = entity;\n      promises.push(ReflectionParser.parseEntity(entity, this._engine));\n    }\n    return Promise.all(promises).then(function (entities) {\n      var rootId = entitiesConfig[0].id;\n      entities.forEach(function (entity, index) {\n        entitiesMap[entitiesConfig[index].id] = entity;\n      });\n      PrefabParser.parseChildren(entitiesConfigMap, entitiesMap, rootId);\n      return entitiesMap[rootId];\n    });\n  };\n  PrefabParser.parseChildren = function parseChildren(entitiesConfig, entities, parentId) {\n    var children = entitiesConfig[parentId].children;\n    if (children && children.length > 0) {\n      var parent = entities[parentId];\n      for (var i = 0; i < children.length; i++) {\n        var childId = children[i];\n        var entity = entities[childId];\n        parent.addChild(entity);\n        this.parseChildren(entitiesConfig, entities, childId);\n      }\n    }\n  };\n  return PrefabParser;\n}();\n\nvar SceneParser = /*#__PURE__*/function () {\n  function SceneParser() {}\n  SceneParser.parse = function parse(engine, sceneData) {\n    var scene = new Scene(engine);\n    var entitiesMap = {};\n    var entitiesConfigMap = {};\n    var promises = [];\n    var entitiesConfig = sceneData.entities;\n    for (var _iterator = _createForOfIteratorHelperLoose(entitiesConfig), _step; !(_step = _iterator()).done;) {\n      var entity = _step.value;\n      entitiesConfigMap[entity.id] = entity;\n      promises.push(ReflectionParser.parseEntity(entity, engine));\n    }\n    return Promise.all(promises).then(function (entities) {\n      var rootIds = [];\n      entities.forEach(function (entity, index) {\n        entitiesMap[entitiesConfig[index].id] = entity;\n        if (!entitiesConfig[index].parent) {\n          rootIds.push(entitiesConfig[index].id);\n        }\n      });\n      for (var _i = 0, _rootIds = rootIds; _i < _rootIds.length; _i++) {\n        var rootId = _rootIds[_i];\n        PrefabParser.parseChildren(entitiesConfigMap, entitiesMap, rootId);\n      }\n      var rootEntities = rootIds.map(function (id) {\n        return entitiesMap[id];\n      });\n      for (var i = 0; i < rootEntities.length; i++) {\n        scene.addRootEntity(rootEntities[i]);\n      }\n      return scene;\n    });\n  };\n  return SceneParser;\n}();\n\nvar _dec$4, _class$4;\nvar MeshLoader = (_dec$4 = resourceLoader(\"Mesh\", [\"prefab\"], true), _dec$4(_class$4 = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(MeshLoader, _Loader);\n  function MeshLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = MeshLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, {\n        type: \"arraybuffer\"\n      }).then(function (data) {\n        decode(data, resourceManager.engine).then(function (mesh) {\n          resolve(mesh);\n        });\n      });\n    });\n  };\n  return MeshLoader;\n}(Loader)) || _class$4);\n\nvar _dec$3, _class$3;\nvar EditorTextureLoader = (_dec$3 = resourceLoader(\"EditorTexture2D\", [\"prefab\"], true), _dec$3(_class$3 = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(EditorTextureLoader, _Loader);\n  function EditorTextureLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = EditorTextureLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve) {\n      _this.request(item.url, {\n        type: \"arraybuffer\"\n      }).then(function (data) {\n        decode(data, resourceManager.engine).then(function (texture) {\n          resolve(texture);\n        });\n      });\n    });\n  };\n  return EditorTextureLoader;\n}(Loader)) || _class$3);\n\n/**\n * Decode engine binary resource.\n * @param arrayBuffer - array buffer of decode binary file\n * @param engine - engine\n * @returns\n */\nfunction decode(arrayBuffer, engine) {\n  var header = FileHeader.decode(arrayBuffer);\n  var bufferReader = new BufferReader(arrayBuffer, header.headerLength, header.dataLength);\n  return decoderMap[header.type].decode(engine, bufferReader).then(function (object) {\n    object.name = header.name;\n    return object;\n  });\n}\n\nvar _dec$2, _class$2;\n(_dec$2 = resourceLoader(AssetType.Mesh, [\"mesh\"]), _dec$2(_class$2 = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(MeshLoader, _Loader);\n  function MeshLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = MeshLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve) {\n      _this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"arraybuffer\"\n      })).then(function (data) {\n        return decode(data, resourceManager.engine);\n      }).then(function (mesh) {\n        resolve(mesh);\n      });\n    });\n  };\n  return MeshLoader;\n}(Loader)) || _class$2);\n\nvar _dec$1, _class$1;\n(_dec$1 = resourceLoader(AssetType.AnimatorController, [\"json\"], false), _dec$1(_class$1 = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(AnimatorControllerLoader, _Loader);\n  function AnimatorControllerLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = AnimatorControllerLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    return new AssetPromise(function (resolve, reject) {\n      _this.request(item.url, _objectSpread2(_objectSpread2({}, item), {}, {\n        type: \"json\"\n      })).then( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data) {\n          var animatorController, layers, promises;\n          return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  animatorController = new AnimatorController();\n                  layers = data.layers;\n                  promises = [];\n                  layers.forEach(function (layerData, layerIndex) {\n                    var name = layerData.name,\n                      blendingMode = layerData.blendingMode,\n                      weight = layerData.weight,\n                      stateMachineData = layerData.stateMachine;\n                    var layer = new AnimatorControllerLayer(name);\n                    layer.blendingMode = blendingMode;\n                    layer.weight = weight;\n                    if (stateMachineData) {\n                      var states = stateMachineData.states;\n                      var stateMachine = layer.stateMachine = new AnimatorStateMachine();\n                      states.forEach(function (stateData, stateIndex) {\n                        var name = stateData.name,\n                          speed = stateData.speed,\n                          wrapMode = stateData.wrapMode,\n                          clipStartNormalizedTime = stateData.clipStartNormalizedTime,\n                          clipEndNormalizedTime = stateData.clipEndNormalizedTime;\n                          stateData.isDefaultState;\n                          var clipData = stateData.clip;\n                        var state = stateMachine.addState(name);\n                        state.speed = speed;\n                        state.wrapMode = wrapMode;\n                        state.clipStartTime = clipStartNormalizedTime;\n                        state.clipEndTime = clipEndNormalizedTime;\n                        if (clipData) {\n                          promises.push(new Promise( /*#__PURE__*/function () {\n                            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(resolve) {\n                              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                                while (1) {\n                                  switch (_context.prev = _context.next) {\n                                    case 0:\n                                      _context.t0 = resolve;\n                                      _context.t1 = layerIndex;\n                                      _context.t2 = stateIndex;\n                                      _context.next = 5;\n                                      return resourceManager.getResourceByRef(clipData);\n                                    case 5:\n                                      _context.t3 = _context.sent;\n                                      _context.t4 = {\n                                        layerIndex: _context.t1,\n                                        stateIndex: _context.t2,\n                                        clip: _context.t3\n                                      };\n                                      (0, _context.t0)(_context.t4);\n                                    case 8:\n                                    case \"end\":\n                                      return _context.stop();\n                                  }\n                                }\n                              }, _callee);\n                            }));\n                            return function (_x2) {\n                              return _ref2.apply(this, arguments);\n                            };\n                          }()));\n                        }\n                      });\n                      states.forEach(function (stateData) {\n                        var name = stateData.name,\n                          transitions = stateData.transitions;\n                        transitions.forEach(function (transitionData) {\n                          var targetStateName = transitionData.targetStateName,\n                            duration = transitionData.duration,\n                            offset = transitionData.offset,\n                            exitTime = transitionData.exitTime;\n                          var sourceState = stateMachine.findStateByName(name);\n                          var destState = stateMachine.findStateByName(targetStateName);\n                          var transition = new AnimatorStateTransition();\n                          transition.destinationState = destState;\n                          transition.duration = duration;\n                          transition.exitTime = exitTime;\n                          transition.offset = offset;\n                          sourceState.addTransition(transition);\n                        });\n                      });\n                    }\n                    animatorController.addLayer(layer);\n                  });\n                  Promise.all(promises).then(function (clipData) {\n                    clipData.forEach(function (data) {\n                      var layerIndex = data.layerIndex,\n                        stateIndex = data.stateIndex,\n                        clip = data.clip;\n                      animatorController.layers[layerIndex].stateMachine.states[stateIndex].clip = clip;\n                    });\n                    resolve(animatorController);\n                  });\n                case 5:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    });\n  };\n  return AnimatorControllerLoader;\n}(Loader)) || _class$1);\n\nvar _dec, _class;\n(_dec = resourceLoader(AssetType.Scene, [\"prefab\"], true), _dec(_class = /*#__PURE__*/function (_Loader) {\n  _inheritsLoose(SceneLoader, _Loader);\n  function SceneLoader() {\n    return _Loader.apply(this, arguments) || this;\n  }\n  var _proto = SceneLoader.prototype;\n  _proto.load = function load(item, resourceManager) {\n    var _this = this;\n    var engine = resourceManager.engine;\n    return new AssetPromise(function (resolve, reject) {\n      return _this.request(item.url, {\n        type: \"json\"\n      }).then(function (data) {\n        // @ts-ignore\n        engine.resourceManager.initVirtualResources(data.files);\n        return SceneParser.parse(engine, data).then(function (scene) {\n          var ambient = data.scene.ambient;\n          var ambientLightPromise = Promise.resolve();\n          if (ambient.ambientLight) {\n            ambientLightPromise = resourceManager.getResourceByRef(data.scene.ambient.ambientLight).then(function (light) {\n              scene.ambientLight = light;\n              scene.ambientLight.diffuseIntensity = ambient.diffuseIntensity;\n              scene.ambientLight.specularIntensity = ambient.specularIntensity;\n            });\n          }\n          var background = data.scene.background;\n          scene.background.mode = background.mode;\n          var backgroundPromise = Promise.resolve();\n          switch (scene.background.mode) {\n            case BackgroundMode.SolidColor:\n              scene.background.solidColor.copyFrom(background.color);\n              break;\n            case BackgroundMode.Sky:\n              if (background.sky) {\n                backgroundPromise = resourceManager.getResourceByRef(background.sky).then(function (light) {\n                  var sky = scene.background.sky;\n                  var skyMaterial = new SkyBoxMaterial(engine);\n                  skyMaterial.textureCubeMap = light.specularTexture;\n                  skyMaterial.textureDecodeRGBM = true;\n                  sky.material = skyMaterial;\n                  sky.mesh = PrimitiveMesh.createCuboid(engine, 1, 1, 1);\n                });\n              }\n              break;\n            case BackgroundMode.Texture:\n              if (background.texture) {\n                backgroundPromise = resourceManager.getResourceByRef(background.texture).then(function (texture) {\n                  scene.background.texture = texture;\n                });\n              }\n              break;\n          }\n          Promise.all([ambientLightPromise, backgroundPromise]).then(function () {\n            resolve(scene);\n          });\n        });\n      });\n      //\n    });\n  };\n  return SceneLoader;\n}(Loader)) || _class);\n\nexport { EditorTextureLoader, GLTFResource, MeshDecoder, MeshLoader, PrefabParser, ReflectionParser, SceneParser, Texture2DDecoder, decode, parseSingleKTX };\n//# sourceMappingURL=module.js.map\n","import * as CoreObjects from '@oasis-engine/core';\nimport { Loader } from '@oasis-engine/core';\nexport * from '@oasis-engine/core';\nexport * from '@oasis-engine/loader';\nexport * from '@oasis-engine/math';\nexport * from '@oasis-engine/rhi-webgl';\n\n//@ts-ignore\nvar version = \"0.8.2\";\nconsole.log(\"oasis engine version: \" + version);\nfor (var key in CoreObjects) {\n  Loader.registerClass(key, CoreObjects[key]);\n}\n\nexport { version };\n//# sourceMappingURL=module.js.map\n","import { Vector2 } from \"oasis-engine\";\nimport { reactive } from \"vue\";\nexport interface Ipos {\n  x: number;\n  y: number;\n}\n\nexport interface IMovePos extends Ipos {\n  normal: Vector2;\n  deg: number;\n}\n\nexport default class JoyStick {\n  windowWidth: number = window.screen.width;\n  windowHeight: number = window.screen.height;\n  eleW: number = 0;\n  eleH: number = 0;\n  ele: HTMLElement | null = null;\n  circleEle: HTMLElement | null = null;\n  eleT: number = 0;\n  eleL: number = 0;\n  pointStart: Vector2 = new Vector2();\n  baseVector: Vector2 = new Vector2();\n  originVec: Vector2 = new Vector2();\n  constructor(ele: HTMLElement, circle: HTMLElement) {\n    this.circleEle = circle;\n    this.ele = ele;\n    this.init();\n  }\n  init() {\n    this.eleW = this.ele.offsetWidth;\n    this.eleH = this.ele.offsetHeight;\n    this.eleT = this.ele.offsetTop;\n    this.eleL = this.ele.offsetLeft;\n    this.baseVector.set(this.eleL, this.eleT);\n    this.originVec.set(this.eleW / 2, this.eleH / 2);\n  }\n  touchStart(position: Ipos) {\n    // console.log(position);\n    let pos = new Vector2(position.x, position.y).subtract(\n      this.baseVector.clone()\n    );\n    this.pointStart.set(pos.x, pos.y);\n    return { x: pos.x, y: pos.y };\n  }\n  touchMove(position: Ipos): IMovePos {\n    // console.log(\"position\", position);\n    let move = new Vector2(position.x, position.y).subtract(\n      this.baseVector.clone()\n    );\n    let dis = move.clone().subtract(this.pointStart.clone()).length();\n    let normal = move.subtract(this.originVec).normalize();\n    let len = this.eleW / 2;\n    let deg = Math.atan2(normal.x, normal.y);\n    if (dis > len) {\n      let { x, y } = new Vector2(normal.x * len, normal.y * len).add(\n        this.originVec\n      );\n      let _normal = new Vector2(x, y).subtract(this.originVec).normalize();\n      return { x, y, normal: _normal, deg };\n    } else {\n      let { x, y } = new Vector2(normal.x * dis, normal.y * dis).add(\n        this.originVec\n      );\n      return { x, y, normal, deg };\n    }\n  }\n\n  touchEnd(position: Ipos) {\n    console.log(position);\n  }\n}\n","<template>\n  <div\n    class=\"circle\"\n    @touchstart.self=\"toucheStart\"\n    @touchmove.self=\"touchMove\"\n    @touchend.self=\"touchEnd\"\n  >\n    <div\n      class=\"circle_inner\"\n      :style=\"{ left: pos.x + 'px', top: pos.y + 'px' }\"\n    ></div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport JoyStick from \"./JoyStick\";\nimport { onMounted, defineEmits } from \"vue\";\nimport { reactive } from \"vue\";\nimport { Vector2 } from \"oasis-engine\";\nlet joyStick: JoyStick = null;\nlet pos = reactive({ x: 50, y: 50 });\ninterface IdirInfo {\n  dir: Vector2;\n  deg: number;\n}\nonMounted(() => {\n  joyStick = new JoyStick(\n    document.querySelector(\".circle\"),\n    document.querySelector(\".circle_inner\")\n  );\n});\nconst emit = defineEmits<{\n  (e: \"dir\", dir: IdirInfo): IdirInfo;\n  (e: \"start\");\n  (e: \"end\");\n}>();\n\nconst toucheStart = (e) => {\n  let x = e.touches[0].pageX | 0;\n  let y = e.touches[0].pageY | 0;\n  if (joyStick) {\n    let { x: px, y: py } = joyStick.touchStart({ x, y });\n    pos.x = px;\n    pos.y = py;\n  }\n  emit(\"start\");\n};\nconst touchMove = (e) => {\n  let x = e.touches[0].pageX | 0;\n  let y = e.touches[0].pageY | 0;\n  if (joyStick) {\n    let { x: px, y: py, normal, deg } = joyStick.touchMove({ x, y });\n    pos.x = px;\n    pos.y = py;\n    emit(\"dir\", { dir: normal, deg });\n\n    // console.log(normal);\n  }\n};\nconst touchEnd = (e) => {\n  let x = 0;\n  let y = 0;\n  pos.x = 50;\n  pos.y = 50;\n  emit(\"dir\", { dir: new Vector2(0, 0), deg: 0 });\n  emit(\"end\");\n  //   if (joyStick) {\n  //     joyStick.touchEnd({ x, y });\n  //   }\n};\n</script>\n\n<style scoped>\n.circle {\n  width: 100px;\n  height: 100px;\n  /* border: 2px solid yellow; */\n  border-radius: 50%;\n  position: fixed;\n  left: 30px;\n  bottom: 30px;\n  pointer-events: none;\n  opacity: 0;\n  background: url(\"../../../assets/circle.png\") no-repeat center center;\n  background-size: 100% 100%;\n}\n.circle_inner {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  /* background-color: blue; */\n  opacity: 0.8;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  pointer-events: none;\n  background: url(\"../../../assets/circle_inner.png\") no-repeat center center;\n  background-size: 100% 100%;\n}\n</style>\n","import { Vector3, Quaternion } from 'oasis-engine';\n\n/**\n * PhysX runtime mode.\n */\nvar PhysXRuntimeMode;\n(function (PhysXRuntimeMode) {\n  PhysXRuntimeMode[PhysXRuntimeMode[\"Auto\"] = 0] = \"Auto\";\n  PhysXRuntimeMode[PhysXRuntimeMode[\"WebAssembly\"] = 1] = \"WebAssembly\";\n  PhysXRuntimeMode[PhysXRuntimeMode[\"JavaScript\"] = 2] = \"JavaScript\";\n})(PhysXRuntimeMode || (PhysXRuntimeMode = {}));\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\n/**\n * High-performance unordered array, delete uses exchange method to improve performance, internal capacity only increases.\n */\nvar DisorderedArray = /*#__PURE__*/function () {\n  function DisorderedArray(count) {\n    if (count === void 0) {\n      count = 0;\n    }\n    this._elements = void 0;\n    this.length = 0;\n    this._elements = new Array(count);\n  }\n  var _proto = DisorderedArray.prototype;\n  _proto.add = function add(element) {\n    if (this.length === this._elements.length) this._elements.push(element);else this._elements[this.length] = element;\n    this.length++;\n  };\n  _proto.delete = function _delete(element) {\n    //TODO: It can be optimized for custom binary search and other algorithms, currently this._elements>=this.length wastes performance.\n    var index = this._elements.indexOf(element);\n    this.deleteByIndex(index);\n  };\n  _proto.get = function get(index) {\n    if (index >= this.length) {\n      throw \"Index is out of range.\";\n    }\n    return this._elements[index];\n  }\n\n  /**\n   *\n   * @param index\n   * @returns The replaced item is used to reset its index.\n   */;\n  _proto.deleteByIndex = function deleteByIndex(index) {\n    var elements = this._elements;\n    var end = null;\n    var lastIndex = this.length - 1;\n    if (index !== lastIndex) {\n      end = elements[lastIndex];\n      elements[index] = end;\n    }\n    this.length--;\n    return end;\n  };\n  _proto.garbageCollection = function garbageCollection() {\n    this._elements.length = this.length;\n  };\n  return DisorderedArray;\n}();\n\n/**\n * Flags which affect the behavior of Shapes.\n */\nvar ShapeFlag;\n\n/**\n * Abstract class for collider shapes.\n */\n(function (ShapeFlag) {\n  ShapeFlag[ShapeFlag[\"SIMULATION_SHAPE\"] = 1] = \"SIMULATION_SHAPE\";\n  ShapeFlag[ShapeFlag[\"SCENE_QUERY_SHAPE\"] = 2] = \"SCENE_QUERY_SHAPE\";\n  ShapeFlag[ShapeFlag[\"TRIGGER_SHAPE\"] = 4] = \"TRIGGER_SHAPE\";\n})(ShapeFlag || (ShapeFlag = {}));\nvar PhysXColliderShape = /*#__PURE__*/function () {\n  function PhysXColliderShape() {\n    this._controllers = new DisorderedArray();\n    this._position = new Vector3();\n    this._rotation = new Quaternion();\n    this._scale = new Vector3(1, 1, 1);\n    this._shapeFlags = ShapeFlag.SCENE_QUERY_SHAPE | ShapeFlag.SIMULATION_SHAPE;\n    this._pxMaterials = new Array(1);\n    this._pxShape = void 0;\n    this._pxGeometry = void 0;\n    this._id = void 0;\n    this._contactOffset = 0;\n  }\n  var _proto = PhysXColliderShape.prototype;\n  /**\n   * {@inheritDoc IColliderShape.setPosition }\n   */\n  _proto.setPosition = function setPosition(value) {\n    if (value !== this._position) {\n      this._position.copyFrom(value);\n    }\n    this._setLocalPose();\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setWorldScale }\n   */;\n  /**\n   * {@inheritDoc IColliderShape.setContactOffset }\n   */\n  _proto.setContactOffset = function setContactOffset(offset) {\n    this._contactOffset = offset;\n    this._pxShape.setContactOffset(offset);\n    var controllers = this._controllers;\n    for (var i = 0, n = controllers.length; i < n; i++) {\n      controllers.get(i)._pxController.setContactOffset(offset);\n    }\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setMaterial }\n   */;\n  _proto.setMaterial = function setMaterial(value) {\n    this._pxMaterials[0] = value._pxMaterial;\n    this._pxShape.setMaterials(this._pxMaterials);\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setIsTrigger }\n   */;\n  _proto.setIsTrigger = function setIsTrigger(value) {\n    this._modifyFlag(ShapeFlag.SIMULATION_SHAPE, !value);\n    this._modifyFlag(ShapeFlag.TRIGGER_SHAPE, value);\n    this._setShapeFlags(this._shapeFlags);\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setIsSceneQuery }\n   */;\n  _proto.setIsSceneQuery = function setIsSceneQuery(value) {\n    this._modifyFlag(ShapeFlag.SCENE_QUERY_SHAPE, value);\n    this._setShapeFlags(this._shapeFlags);\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.destroy }\n   */;\n  _proto.destroy = function destroy() {\n    this._pxShape.release();\n  }\n\n  /**\n   *  @internal\n   */;\n  _proto._setShapeFlags = function _setShapeFlags(flags) {\n    this._shapeFlags = flags;\n    this._pxShape.setFlags(new PhysXPhysics._physX.PxShapeFlags(this._shapeFlags));\n  };\n  _proto._setLocalPose = function _setLocalPose() {\n    var transform = PhysXColliderShape.transform;\n    Vector3.multiply(this._position, this._scale, transform.translation);\n    transform.rotation = this._rotation;\n    this._pxShape.setLocalPose(transform);\n  };\n  _proto._initialize = function _initialize(material, id) {\n    this._id = id;\n    this._pxMaterials[0] = material._pxMaterial;\n    this._pxShape = PhysXPhysics._pxPhysics.createShape(this._pxGeometry, material._pxMaterial, true, new PhysXPhysics._physX.PxShapeFlags(this._shapeFlags));\n    this._pxShape.setQueryFilterData(new PhysXPhysics._physX.PxFilterData(id, 0, 0, 0));\n  };\n  _proto._modifyFlag = function _modifyFlag(flag, value) {\n    this._shapeFlags = value ? this._shapeFlags | flag : this._shapeFlags & ~flag;\n  };\n  return PhysXColliderShape;\n}();\nPhysXColliderShape.halfSqrt = 0.70710678118655;\nPhysXColliderShape.transform = {\n  translation: new Vector3(),\n  rotation: null\n};\n\n/**\n * Box collider shape in PhysX.\n */\nvar PhysXBoxColliderShape = /*#__PURE__*/function (_PhysXColliderShape) {\n  _inheritsLoose(PhysXBoxColliderShape, _PhysXColliderShape);\n  /** @internal */\n\n  /**\n   * Init Box Shape and alloc PhysX objects.\n   * @param uniqueID - UniqueID mark Shape.\n   * @param size - Size of Shape.\n   * @param material - Material of PhysXCollider.\n   */\n  function PhysXBoxColliderShape(uniqueID, size, material) {\n    var _this;\n    _this = _PhysXColliderShape.call(this) || this;\n    _this._halfSize = new Vector3();\n    _this._halfSize.set(size.x * 0.5, size.y * 0.5, size.z * 0.5);\n    _this._pxGeometry = new PhysXPhysics._physX.PxBoxGeometry(_this._halfSize.x * _this._scale.x, _this._halfSize.y * _this._scale.y, _this._halfSize.z * _this._scale.z);\n    _this._initialize(material, uniqueID);\n    _this._setLocalPose();\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IBoxColliderShape.setSize }\n   */\n  var _proto = PhysXBoxColliderShape.prototype;\n  _proto.setSize = function setSize(value) {\n    this._halfSize.set(value.x * 0.5, value.y * 0.5, value.z * 0.5);\n    Vector3.multiply(this._halfSize, this._scale, PhysXBoxColliderShape._tempHalfExtents);\n    this._pxGeometry.halfExtents = PhysXBoxColliderShape._tempHalfExtents;\n    this._pxShape.setGeometry(this._pxGeometry);\n    var controllers = this._controllers;\n    for (var i = 0, n = controllers.length; i < n; i++) {\n      var pxController = controllers.get(i)._pxController;\n      pxController.setHalfHeight(this._halfSize.x);\n      pxController.setHalfSideExtent(this._halfSize.y);\n      pxController.setHalfForwardExtent(this._halfSize.z);\n    }\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setWorldScale }\n   */;\n  _proto.setWorldScale = function setWorldScale(scale) {\n    this._scale.copyFrom(scale);\n    this._setLocalPose();\n    Vector3.multiply(this._halfSize, this._scale, PhysXBoxColliderShape._tempHalfExtents);\n    this._pxGeometry.halfExtents = PhysXBoxColliderShape._tempHalfExtents;\n    this._pxShape.setGeometry(this._pxGeometry);\n  };\n  return PhysXBoxColliderShape;\n}(PhysXColliderShape);\nPhysXBoxColliderShape._tempHalfExtents = new Vector3();\n\n/**\n * Capsule collider shape in PhysX.\n */\nvar PhysXCapsuleColliderShape = /*#__PURE__*/function (_PhysXColliderShape) {\n  _inheritsLoose(PhysXCapsuleColliderShape, _PhysXColliderShape);\n  /** @internal */\n\n  /** @internal */\n\n  /**\n   * Init PhysXCollider and alloc PhysX objects.\n   * @param uniqueID - UniqueID mark collider\n   * @param radius - Radius of CapsuleCollider\n   * @param height - Height of CapsuleCollider\n   * @param material - Material of PhysXCollider\n   */\n  function PhysXCapsuleColliderShape(uniqueID, radius, height, material) {\n    var _this;\n    _this = _PhysXColliderShape.call(this) || this;\n    _this._radius = void 0;\n    _this._halfHeight = void 0;\n    _this._upAxis = ColliderShapeUpAxis.Y;\n    _this._radius = radius;\n    _this._halfHeight = height * 0.5;\n    _this._pxGeometry = new PhysXPhysics._physX.PxCapsuleGeometry(_this._radius, _this._halfHeight);\n    _this._initialize(material, uniqueID);\n    _this._setLocalPose();\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc ICapsuleColliderShape.setRadius }\n   */\n  var _proto = PhysXCapsuleColliderShape.prototype;\n  _proto.setRadius = function setRadius(value) {\n    this._radius = value;\n    switch (this._upAxis) {\n      case ColliderShapeUpAxis.X:\n        this._pxGeometry.radius = this._radius * Math.max(this._scale.y, this._scale.z);\n        break;\n      case ColliderShapeUpAxis.Y:\n        this._pxGeometry.radius = this._radius * Math.max(this._scale.x, this._scale.z);\n        break;\n      case ColliderShapeUpAxis.Z:\n        this._pxGeometry.radius = this._radius * Math.max(this._scale.x, this._scale.y);\n        break;\n    }\n    this._pxShape.setGeometry(this._pxGeometry);\n    var controllers = this._controllers;\n    for (var i = 0, n = controllers.length; i < n; i++) {\n      controllers.get(i)._pxController.setRadius(value);\n    }\n  }\n\n  /**\n   * {@inheritDoc ICapsuleColliderShape.setHeight }\n   */;\n  _proto.setHeight = function setHeight(value) {\n    this._halfHeight = value * 0.5;\n    switch (this._upAxis) {\n      case ColliderShapeUpAxis.X:\n        this._pxGeometry.halfHeight = this._halfHeight * this._scale.x;\n        break;\n      case ColliderShapeUpAxis.Y:\n        this._pxGeometry.halfHeight = this._halfHeight * this._scale.y;\n        break;\n      case ColliderShapeUpAxis.Z:\n        this._pxGeometry.halfHeight = this._halfHeight * this._scale.z;\n        break;\n    }\n    this._pxShape.setGeometry(this._pxGeometry);\n    var controllers = this._controllers;\n    for (var i = 0, n = controllers.length; i < n; i++) {\n      controllers.get(i)._pxController.setHeight(value);\n    }\n  }\n\n  /**\n   * {@inheritDoc ICapsuleColliderShape.setUpAxis }\n   */;\n  _proto.setUpAxis = function setUpAxis(upAxis) {\n    this._upAxis = upAxis;\n    switch (this._upAxis) {\n      case ColliderShapeUpAxis.X:\n        this._rotation.set(0, 0, 0, 1);\n        break;\n      case ColliderShapeUpAxis.Y:\n        this._rotation.set(0, 0, PhysXColliderShape.halfSqrt, PhysXColliderShape.halfSqrt);\n        break;\n      case ColliderShapeUpAxis.Z:\n        this._rotation.set(0, PhysXColliderShape.halfSqrt, 0, PhysXColliderShape.halfSqrt);\n        break;\n    }\n    this._setLocalPose();\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setWorldScale }\n   */;\n  _proto.setWorldScale = function setWorldScale(scale) {\n    this._scale.copyFrom(scale);\n    this._setLocalPose();\n    switch (this._upAxis) {\n      case ColliderShapeUpAxis.X:\n        this._pxGeometry.radius = this._radius * Math.max(scale.y, scale.z);\n        this._pxGeometry.halfHeight = this._halfHeight * scale.x;\n        break;\n      case ColliderShapeUpAxis.Y:\n        this._pxGeometry.radius = this._radius * Math.max(scale.x, scale.z);\n        this._pxGeometry.halfHeight = this._halfHeight * scale.y;\n        break;\n      case ColliderShapeUpAxis.Z:\n        this._pxGeometry.radius = this._radius * Math.max(scale.x, scale.y);\n        this._pxGeometry.halfHeight = this._halfHeight * scale.z;\n        break;\n    }\n    this._pxShape.setGeometry(this._pxGeometry);\n  };\n  return PhysXCapsuleColliderShape;\n}(PhysXColliderShape);\n\n/**\n * The up axis of the collider shape.\n */\nvar ColliderShapeUpAxis;\n(function (ColliderShapeUpAxis) {\n  ColliderShapeUpAxis[ColliderShapeUpAxis[\"X\"] = 0] = \"X\";\n  ColliderShapeUpAxis[ColliderShapeUpAxis[\"Y\"] = 1] = \"Y\";\n  ColliderShapeUpAxis[ColliderShapeUpAxis[\"Z\"] = 2] = \"Z\";\n})(ColliderShapeUpAxis || (ColliderShapeUpAxis = {}));\n\n/**\n * Base class for character controllers.\n */\nvar PhysXCharacterController = /*#__PURE__*/function () {\n  function PhysXCharacterController() {\n    this._id = void 0;\n    this._pxController = void 0;\n    this._pxManager = void 0;\n    this._shape = void 0;\n  }\n  var _proto = PhysXCharacterController.prototype;\n  /**\n   * {@inheritDoc ICharacterController.move }\n   */\n  _proto.move = function move(disp, minDist, elapsedTime) {\n    return this._pxController.move(disp, minDist, elapsedTime);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.setWorldPosition }\n   */;\n  _proto.setWorldPosition = function setWorldPosition(position) {\n    this._pxController && this._pxController.setPosition(position);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.getWorldPosition }\n   */;\n  _proto.getWorldPosition = function getWorldPosition(position) {\n    position.copyFrom(this._pxController.getPosition());\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.setStepOffset }\n   */;\n  _proto.setStepOffset = function setStepOffset(offset) {\n    this._pxController.setStepOffset(offset);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.setNonWalkableMode }\n   */;\n  _proto.setNonWalkableMode = function setNonWalkableMode(flag) {\n    this._pxController.setNonWalkableMode(flag);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.setUpDirection }\n   */;\n  _proto.setUpDirection = function setUpDirection(up) {\n    this._pxController.setUpDirection(up);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.setSlopeLimit }\n   */;\n  _proto.setSlopeLimit = function setSlopeLimit(slopeLimit) {\n    this._pxController.setSlopeLimit(slopeLimit);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.addShape }\n   */;\n  _proto.addShape = function addShape(shape) {\n    this._pxManager && this._createPXController(this._pxManager, shape);\n    this._shape = shape;\n    shape._controllers.add(this);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.removeShape }\n   */;\n  _proto.removeShape = function removeShape(shape) {\n    this._destroyPXController();\n    this._shape = null;\n    shape._controllers.delete(this);\n  }\n\n  /**\n   * {@inheritDoc ICharacterController.destroy }\n   */;\n  _proto.destroy = function destroy() {\n    this._destroyPXController();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._createPXController = function _createPXController(pxManager, shape) {\n    var desc;\n    if (shape instanceof PhysXBoxColliderShape) {\n      desc = new PhysXPhysics._physX.PxBoxControllerDesc();\n      desc.halfHeight = shape._halfSize.x;\n      desc.halfSideExtent = shape._halfSize.y;\n      desc.halfForwardExtent = shape._halfSize.z;\n    } else if (shape instanceof PhysXCapsuleColliderShape) {\n      desc = new PhysXPhysics._physX.PxCapsuleControllerDesc();\n      desc.radius = shape._radius;\n      desc.height = shape._halfHeight * 2;\n      desc.climbingMode = 1; // constraint mode\n    } else {\n      throw \"unsupported shape type\";\n    }\n    desc.setMaterial(shape._pxMaterials[0]);\n    this._pxController = pxManager._getControllerManager().createController(desc);\n    this._pxController.setQueryFilterData(new PhysXPhysics._physX.PxFilterData(shape._id, 0, 0, 0));\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._destroyPXController = function _destroyPXController() {\n    if (this._pxController) {\n      this._pxController.release();\n      this._pxController = null;\n    }\n  };\n  return PhysXCharacterController;\n}();\n\n/**\n * Abstract class of physical collider.\n */\nvar PhysXCollider = /*#__PURE__*/function () {\n  function PhysXCollider() {\n    this._pxActor = void 0;\n  }\n  var _proto = PhysXCollider.prototype;\n  /**\n   * {@inheritDoc ICollider.addShape }\n   */\n  _proto.addShape = function addShape(shape) {\n    this._pxActor.attachShape(shape._pxShape);\n  }\n\n  /**\n   * {@inheritDoc ICollider.removeShape }\n   */;\n  _proto.removeShape = function removeShape(shape) {\n    this._pxActor.detachShape(shape._pxShape, true);\n  }\n\n  /**\n   * {@inheritDoc ICollider.setWorldTransform }\n   */;\n  _proto.setWorldTransform = function setWorldTransform(position, rotation) {\n    this._pxActor.setGlobalPose(this._transform(position, rotation), true);\n  }\n\n  /**\n   * {@inheritDoc ICollider.getWorldTransform }\n   */;\n  _proto.getWorldTransform = function getWorldTransform(outPosition, outRotation) {\n    var transform = this._pxActor.getGlobalPose();\n    outPosition.set(transform.translation.x, transform.translation.y, transform.translation.z);\n    outRotation.set(transform.rotation.x, transform.rotation.y, transform.rotation.z, transform.rotation.w);\n  }\n\n  /**\n   * {@inheritDoc ICollider.destroy }\n   */;\n  _proto.destroy = function destroy() {\n    this._pxActor.release();\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._transform = function _transform(pos, rot) {\n    var transform = PhysXCollider._tempTransform;\n    transform.translation = pos;\n    transform.rotation = rot.normalize();\n    return transform;\n  };\n  return PhysXCollider;\n}();\nPhysXCollider._tempTransform = {\n  translation: null,\n  rotation: null\n};\n\n/**\n * The collision detection mode constants used for PhysXDynamicCollider.collisionDetectionMode.\n * */\nvar CollisionDetectionMode;\n\n/**\n * A dynamic collider can act with self-defined movement or physical force\n */\n(function (CollisionDetectionMode) {\n  CollisionDetectionMode[CollisionDetectionMode[\"Discrete\"] = 0] = \"Discrete\";\n  CollisionDetectionMode[CollisionDetectionMode[\"Continuous\"] = 1] = \"Continuous\";\n  CollisionDetectionMode[CollisionDetectionMode[\"ContinuousDynamic\"] = 2] = \"ContinuousDynamic\";\n  CollisionDetectionMode[CollisionDetectionMode[\"ContinuousSpeculative\"] = 3] = \"ContinuousSpeculative\";\n})(CollisionDetectionMode || (CollisionDetectionMode = {}));\nvar PhysXDynamicCollider = /*#__PURE__*/function (_PhysXCollider) {\n  _inheritsLoose(PhysXDynamicCollider, _PhysXCollider);\n  function PhysXDynamicCollider(position, rotation) {\n    var _this;\n    _this = _PhysXCollider.call(this) || this;\n    var transform = _this._transform(position, rotation);\n    _this._pxActor = PhysXPhysics._pxPhysics.createRigidDynamic(transform);\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setLinearDamping }\n   */\n  var _proto = PhysXDynamicCollider.prototype;\n  _proto.setLinearDamping = function setLinearDamping(value) {\n    this._pxActor.setLinearDamping(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setAngularDamping }\n   */;\n  _proto.setAngularDamping = function setAngularDamping(value) {\n    this._pxActor.setAngularDamping(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setLinearVelocity }\n   */;\n  _proto.setLinearVelocity = function setLinearVelocity(value) {\n    this._pxActor.setLinearVelocity(value, true);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setAngularVelocity }\n   */;\n  _proto.setAngularVelocity = function setAngularVelocity(value) {\n    this._pxActor.setAngularVelocity(value, true);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setMass }\n   */;\n  _proto.setMass = function setMass(value) {\n    this._pxActor.setMass(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setCenterOfMass }\n   */;\n  _proto.setCenterOfMass = function setCenterOfMass(position) {\n    this._pxActor.setCMassLocalPose(position);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setInertiaTensor }\n   */;\n  _proto.setInertiaTensor = function setInertiaTensor(value) {\n    this._pxActor.setMassSpaceInertiaTensor(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setMaxAngularVelocity }\n   */;\n  _proto.setMaxAngularVelocity = function setMaxAngularVelocity(value) {\n    this._pxActor.setMaxAngularVelocity(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setMaxDepenetrationVelocity }\n   */;\n  _proto.setMaxDepenetrationVelocity = function setMaxDepenetrationVelocity(value) {\n    this._pxActor.setMaxDepenetrationVelocity(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setSleepThreshold }\n   */;\n  _proto.setSleepThreshold = function setSleepThreshold(value) {\n    this._pxActor.setSleepThreshold(value);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setSolverIterations }\n   */;\n  _proto.setSolverIterations = function setSolverIterations(value) {\n    this._pxActor.setSolverIterationCounts(value, 1);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setCollisionDetectionMode }\n   */;\n  _proto.setCollisionDetectionMode = function setCollisionDetectionMode(value) {\n    switch (value) {\n      case CollisionDetectionMode.Continuous:\n        this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eENABLE_CCD, true);\n        break;\n      case CollisionDetectionMode.ContinuousDynamic:\n        this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eENABLE_CCD_FRICTION, true);\n        break;\n      case CollisionDetectionMode.ContinuousSpeculative:\n        this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eENABLE_SPECULATIVE_CCD, true);\n        break;\n      case CollisionDetectionMode.Discrete:\n        this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eENABLE_CCD, false);\n        this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eENABLE_CCD_FRICTION, false);\n        this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eENABLE_SPECULATIVE_CCD, false);\n        break;\n    }\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setIsKinematic }\n   */;\n  _proto.setIsKinematic = function setIsKinematic(value) {\n    if (value) {\n      this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eKINEMATIC, true);\n    } else {\n      this._pxActor.setRigidBodyFlag(PhysXPhysics._physX.PxRigidBodyFlag.eKINEMATIC, false);\n    }\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.setConstraints }\n   */;\n  _proto.setConstraints = function setConstraints(flags) {\n    this._pxActor.setRigidDynamicLockFlags(flags);\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.addForce }\n   */;\n  _proto.addForce = function addForce(force) {\n    this._pxActor.addForce({\n      x: force.x,\n      y: force.y,\n      z: force.z\n    });\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.addTorque }\n   */;\n  _proto.addTorque = function addTorque(torque) {\n    this._pxActor.addTorque({\n      x: torque.x,\n      y: torque.y,\n      z: torque.z\n    });\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.move }\n   */;\n  _proto.move = function move(positionOrRotation, rotation) {\n    if (rotation) {\n      this._pxActor.setKinematicTarget(positionOrRotation, rotation);\n      return;\n    }\n    var tempTranslation = PhysXDynamicCollider._tempTranslation;\n    var tempRotation = PhysXDynamicCollider._tempRotation;\n    this.getWorldTransform(tempTranslation, tempRotation);\n    if (positionOrRotation instanceof Vector3) {\n      this._pxActor.setKinematicTarget(positionOrRotation, tempRotation);\n    } else {\n      this._pxActor.setKinematicTarget(tempTranslation, positionOrRotation);\n    }\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.sleep }\n   */;\n  _proto.sleep = function sleep() {\n    return this._pxActor.putToSleep();\n  }\n\n  /**\n   * {@inheritDoc IDynamicCollider.wakeUp }\n   */;\n  _proto.wakeUp = function wakeUp() {\n    return this._pxActor.wakeUp();\n  };\n  return PhysXDynamicCollider;\n}(PhysXCollider);\nPhysXDynamicCollider._tempTranslation = new Vector3();\nPhysXDynamicCollider._tempRotation = new Quaternion();\n\n/**\n * A manager is a collection of colliders and constraints which can interact.\n */\nvar PhysXPhysicsManager = /*#__PURE__*/function () {\n  /** @internal */\n  PhysXPhysicsManager._init = function _init() {\n    PhysXPhysicsManager._pxRaycastHit = new PhysXPhysics._physX.PxRaycastHit();\n    PhysXPhysicsManager._pxFilterData = new PhysXPhysics._physX.PxQueryFilterData();\n    PhysXPhysicsManager._pxFilterData.flags = new PhysXPhysics._physX.PxQueryFlags(QueryFlag.STATIC | QueryFlag.DYNAMIC);\n  };\n  function PhysXPhysicsManager(onContactEnter, onContactExit, onContactStay, onTriggerEnter, onTriggerExit, onTriggerStay) {\n    var _this = this;\n    this._pxControllerManager = null;\n    this._pxScene = void 0;\n    this._onContactEnter = void 0;\n    this._onContactExit = void 0;\n    this._onContactStay = void 0;\n    this._onTriggerEnter = void 0;\n    this._onTriggerExit = void 0;\n    this._onTriggerStay = void 0;\n    this._currentEvents = new DisorderedArray();\n    this._eventMap = {};\n    this._eventPool = [];\n    this._onContactEnter = onContactEnter;\n    this._onContactExit = onContactExit;\n    this._onContactStay = onContactStay;\n    this._onTriggerEnter = onTriggerEnter;\n    this._onTriggerExit = onTriggerExit;\n    this._onTriggerStay = onTriggerStay;\n    var triggerCallback = {\n      onContactBegin: function onContactBegin(obj1, obj2) {\n        var index1 = obj1.getQueryFilterData().word0;\n        var index2 = obj2.getQueryFilterData().word0;\n        _this._onContactEnter(index1, index2);\n      },\n      onContactEnd: function onContactEnd(obj1, obj2) {\n        var index1 = obj1.getQueryFilterData().word0;\n        var index2 = obj2.getQueryFilterData().word0;\n        _this._onContactExit(index1, index2);\n      },\n      onContactPersist: function onContactPersist(obj1, obj2) {\n        var index1 = obj1.getQueryFilterData().word0;\n        var index2 = obj2.getQueryFilterData().word0;\n        _this._onContactStay(index1, index2);\n      },\n      onTriggerBegin: function onTriggerBegin(obj1, obj2) {\n        var index1 = obj1.getQueryFilterData().word0;\n        var index2 = obj2.getQueryFilterData().word0;\n        var event = index1 < index2 ? _this._getTrigger(index1, index2) : _this._getTrigger(index2, index1);\n        event.state = TriggerEventState.Enter;\n        _this._currentEvents.add(event);\n      },\n      onTriggerEnd: function onTriggerEnd(obj1, obj2) {\n        var index1 = obj1.getQueryFilterData().word0;\n        var index2 = obj2.getQueryFilterData().word0;\n        var event;\n        if (index1 < index2) {\n          var subMap = _this._eventMap[index1];\n          event = subMap[index2];\n          subMap[index2] = undefined;\n        } else {\n          var _subMap = _this._eventMap[index2];\n          event = _subMap[index1];\n          _subMap[index1] = undefined;\n        }\n        event.state = TriggerEventState.Exit;\n      }\n    };\n    var PHYSXSimulationCallbackInstance = PhysXPhysics._physX.PxSimulationEventCallback.implement(triggerCallback);\n    var sceneDesc = PhysXPhysics._physX.getDefaultSceneDesc(PhysXPhysics._pxPhysics.getTolerancesScale(), 0, PHYSXSimulationCallbackInstance);\n    this._pxScene = PhysXPhysics._pxPhysics.createScene(sceneDesc);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.setGravity }\n   */\n  var _proto = PhysXPhysicsManager.prototype;\n  _proto.setGravity = function setGravity(value) {\n    this._pxScene.setGravity(value);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.addColliderShape }\n   */;\n  _proto.addColliderShape = function addColliderShape(colliderShape) {\n    this._eventMap[colliderShape._id] = {};\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.removeColliderShape }\n   */;\n  _proto.removeColliderShape = function removeColliderShape(colliderShape) {\n    var eventPool = this._eventPool,\n      currentEvents = this._currentEvents;\n    var shapeID = colliderShape._id;\n    for (var i = currentEvents.length - 1; i >= 0; i--) {\n      var event = currentEvents.get(i);\n      if (event.index1 == shapeID || event.index2 == shapeID) {\n        currentEvents.deleteByIndex(i);\n        eventPool.push(event);\n      }\n    }\n    delete this._eventMap[shapeID];\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.addCollider }\n   */;\n  _proto.addCollider = function addCollider(collider) {\n    this._pxScene.addActor(collider._pxActor, null);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.removeCollider }\n   */;\n  _proto.removeCollider = function removeCollider(collider) {\n    this._pxScene.removeActor(collider._pxActor, true);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.addCharacterController }\n   */;\n  _proto.addCharacterController = function addCharacterController(characterController) {\n    var lastPXManager = characterController._pxManager;\n    var shape = characterController._shape;\n    if (shape) {\n      if (lastPXManager !== this) {\n        lastPXManager && characterController._destroyPXController();\n        characterController._createPXController(this, shape);\n      }\n      this._pxScene.addController(characterController._pxController);\n    }\n    characterController._pxManager = this;\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.removeCharacterController }\n   */;\n  _proto.removeCharacterController = function removeCharacterController(characterController) {\n    if (characterController._shape) {\n      this._pxScene.removeController(characterController._pxController);\n    }\n    characterController._pxManager = null;\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.update }\n   */;\n  _proto.update = function update(elapsedTime) {\n    this._simulate(elapsedTime);\n    this._fetchResults();\n    this._fireEvent();\n  }\n\n  /**\n   * {@inheritDoc IPhysicsManager.raycast }\n   */;\n  _proto.raycast = function raycast(ray, distance, hit) {\n    var pxHitResult = PhysXPhysicsManager._pxRaycastHit;\n    distance = Math.min(distance, 3.4e38); // float32 max value limit in physx raycast.\n\n    var result = this._pxScene.raycastSingle(ray.origin, ray.direction, distance, pxHitResult, PhysXPhysicsManager._pxFilterData);\n    if (result && hit != undefined) {\n      var _position = PhysXPhysicsManager._tempPosition,\n        _normal = PhysXPhysicsManager._tempNormal;\n      var pxPosition = pxHitResult.position,\n        pxNormal = pxHitResult.normal;\n      _position.set(pxPosition.x, pxPosition.y, pxPosition.z);\n      _normal.set(pxNormal.x, pxNormal.y, pxNormal.z);\n      hit(pxHitResult.getShape().getQueryFilterData().word0, pxHitResult.distance, _position, _normal);\n    }\n    return result;\n  }\n\n  /**\n   * @internal\n   */;\n  _proto._getControllerManager = function _getControllerManager() {\n    var pxControllerManager = this._pxControllerManager;\n    if (pxControllerManager === null) {\n      this._pxControllerManager = pxControllerManager = this._pxScene.createControllerManager();\n    }\n    return pxControllerManager;\n  };\n  _proto._simulate = function _simulate(elapsedTime) {\n    this._pxScene.simulate(elapsedTime, true);\n  };\n  _proto._fetchResults = function _fetchResults(block) {\n    if (block === void 0) {\n      block = true;\n    }\n    this._pxScene.fetchResults(block);\n  };\n  _proto._getTrigger = function _getTrigger(index1, index2) {\n    var event;\n    if (this._eventPool.length) {\n      event = this._eventPool.pop();\n      event.index1 = index1;\n      event.index2 = index2;\n    } else {\n      event = new TriggerEvent(index1, index2);\n    }\n    this._eventMap[index1][index2] = event;\n    return event;\n  };\n  _proto._fireEvent = function _fireEvent() {\n    var eventPool = this._eventPool,\n      currentEvents = this._currentEvents;\n    for (var i = currentEvents.length - 1; i >= 0; i--) {\n      var event = currentEvents.get(i);\n      if (event.state == TriggerEventState.Enter) {\n        this._onTriggerEnter(event.index1, event.index2);\n        event.state = TriggerEventState.Stay;\n      } else if (event.state == TriggerEventState.Stay) {\n        this._onTriggerStay(event.index1, event.index2);\n      } else if (event.state == TriggerEventState.Exit) {\n        this._onTriggerExit(event.index1, event.index2);\n        currentEvents.deleteByIndex(i);\n        eventPool.push(event);\n      }\n    }\n  };\n  return PhysXPhysicsManager;\n}();\n\n/**\n * Filtering flags for scene queries.\n */\nPhysXPhysicsManager._tempPosition = new Vector3();\nPhysXPhysicsManager._tempNormal = new Vector3();\nPhysXPhysicsManager._pxRaycastHit = void 0;\nPhysXPhysicsManager._pxFilterData = void 0;\nvar QueryFlag;\n/**\n * Physics state\n */\n(function (QueryFlag) {\n  QueryFlag[QueryFlag[\"STATIC\"] = 1] = \"STATIC\";\n  QueryFlag[QueryFlag[\"DYNAMIC\"] = 2] = \"DYNAMIC\";\n  QueryFlag[QueryFlag[\"ANY_HIT\"] = 16] = \"ANY_HIT\";\n  QueryFlag[QueryFlag[\"NO_BLOCK\"] = 32] = \"NO_BLOCK\";\n})(QueryFlag || (QueryFlag = {}));\nvar TriggerEventState;\n/**\n * Trigger event to store interactive object ids and state.\n */\n(function (TriggerEventState) {\n  TriggerEventState[TriggerEventState[\"Enter\"] = 0] = \"Enter\";\n  TriggerEventState[TriggerEventState[\"Stay\"] = 1] = \"Stay\";\n  TriggerEventState[TriggerEventState[\"Exit\"] = 2] = \"Exit\";\n})(TriggerEventState || (TriggerEventState = {}));\nvar TriggerEvent = function TriggerEvent(index1, index2) {\n  this.state = void 0;\n  this.index1 = void 0;\n  this.index2 = void 0;\n  this.index1 = index1;\n  this.index2 = index2;\n};\n\n/**\n * Physics material describes how to handle colliding objects (friction, bounciness).\n */\nvar PhysXPhysicsMaterial = /*#__PURE__*/function () {\n  /** @internal */\n\n  function PhysXPhysicsMaterial(staticFriction, dynamicFriction, bounciness, frictionCombine, bounceCombine) {\n    this._pxMaterial = void 0;\n    var pxMaterial = PhysXPhysics._pxPhysics.createMaterial(staticFriction, dynamicFriction, bounciness);\n    pxMaterial.setFrictionCombineMode(frictionCombine);\n    pxMaterial.setRestitutionCombineMode(bounceCombine);\n    this._pxMaterial = pxMaterial;\n  }\n\n  /**\n   * {@inheritDoc IPhysicsMaterial.setBounciness }\n   */\n  var _proto = PhysXPhysicsMaterial.prototype;\n  _proto.setBounciness = function setBounciness(value) {\n    this._pxMaterial.setRestitution(value);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsMaterial.setDynamicFriction }\n   */;\n  _proto.setDynamicFriction = function setDynamicFriction(value) {\n    this._pxMaterial.setDynamicFriction(value);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsMaterial.setStaticFriction }\n   */;\n  _proto.setStaticFriction = function setStaticFriction(value) {\n    this._pxMaterial.setStaticFriction(value);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsMaterial.setBounceCombine }\n   */;\n  _proto.setBounceCombine = function setBounceCombine(value) {\n    this._pxMaterial.setRestitutionCombineMode(value);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsMaterial.setFrictionCombine }\n   */;\n  _proto.setFrictionCombine = function setFrictionCombine(value) {\n    this._pxMaterial.setFrictionCombineMode(value);\n  }\n\n  /**\n   * {@inheritDoc IPhysicsMaterial.destroy }\n   */;\n  _proto.destroy = function destroy() {\n    this._pxMaterial.release();\n  };\n  return PhysXPhysicsMaterial;\n}();\n\n/**\n * Describes how physics materials of the colliding objects are combined.\n */\nvar CombineMode;\n(function (CombineMode) {\n  CombineMode[CombineMode[\"Average\"] = 0] = \"Average\";\n  CombineMode[CombineMode[\"Minimum\"] = 1] = \"Minimum\";\n  CombineMode[CombineMode[\"Multiply\"] = 2] = \"Multiply\";\n  CombineMode[CombineMode[\"Maximum\"] = 3] = \"Maximum\";\n})(CombineMode || (CombineMode = {}));\n\n/**\n * A static collider component that will not move.\n * @remarks Mostly used for object which always stays at the same place and never moves around.\n */\nvar PhysXStaticCollider = /*#__PURE__*/function (_PhysXCollider) {\n  _inheritsLoose(PhysXStaticCollider, _PhysXCollider);\n  /**\n   * Initialize PhysX static actor.\n   * @param position - The global position\n   * @param rotation - The global rotation\n   */\n  function PhysXStaticCollider(position, rotation) {\n    var _this;\n    _this = _PhysXCollider.call(this) || this;\n    _this._pxActor = PhysXPhysics._pxPhysics.createRigidStatic(_this._transform(position, rotation));\n    return _this;\n  }\n  return PhysXStaticCollider;\n}(PhysXCollider);\n\n/**\n * Plane collider shape in PhysX.\n */\nvar PhysXPlaneColliderShape = /*#__PURE__*/function (_PhysXColliderShape) {\n  _inheritsLoose(PhysXPlaneColliderShape, _PhysXColliderShape);\n  /**\n   * Init PhysXCollider and alloc PhysX objects.\n   * @param uniqueID - UniqueID mark collider\n   * @param material - Material of PhysXCollider\n   */\n  function PhysXPlaneColliderShape(uniqueID, material) {\n    var _this;\n    _this = _PhysXColliderShape.call(this) || this;\n    _this._rotation.set(0, 0, PhysXColliderShape.halfSqrt, PhysXColliderShape.halfSqrt);\n    _this._pxGeometry = new PhysXPhysics._physX.PxPlaneGeometry();\n    _this._initialize(material, uniqueID);\n    _this._setLocalPose();\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IPlaneColliderShape.setRotation }\n   */\n  var _proto = PhysXPlaneColliderShape.prototype;\n  _proto.setRotation = function setRotation(value) {\n    Quaternion.rotationYawPitchRoll(value.x, value.y, value.z, this._rotation);\n    Quaternion.rotateZ(this._rotation, Math.PI * 0.5, this._rotation);\n    this._rotation.normalize();\n    this._setLocalPose();\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setWorldScale }\n   */;\n  _proto.setWorldScale = function setWorldScale(scale) {\n    this._scale.copyFrom(scale);\n    this._setLocalPose();\n  };\n  return PhysXPlaneColliderShape;\n}(PhysXColliderShape);\n\n/**\n * Sphere collider shape in PhysX.\n */\nvar PhysXSphereColliderShape = /*#__PURE__*/function (_PhysXColliderShape) {\n  _inheritsLoose(PhysXSphereColliderShape, _PhysXColliderShape);\n  /**\n   * Init PhysXCollider and alloc PhysX objects.\n   * @param uniqueID - UniqueID mark collider\n   * @param radius - Size of SphereCollider\n   * @param material - Material of PhysXCollider\n   */\n  function PhysXSphereColliderShape(uniqueID, radius, material) {\n    var _this;\n    _this = _PhysXColliderShape.call(this) || this;\n    _this._radius = void 0;\n    _this._maxScale = 1;\n    _this._radius = radius;\n    _this._pxGeometry = new PhysXPhysics._physX.PxSphereGeometry(_this._radius * _this._maxScale);\n    _this._initialize(material, uniqueID);\n    _this._setLocalPose();\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc ISphereColliderShape.setRadius }\n   */\n  var _proto = PhysXSphereColliderShape.prototype;\n  _proto.setRadius = function setRadius(value) {\n    this._radius = value;\n    this._pxGeometry.radius = value * this._maxScale;\n    this._pxShape.setGeometry(this._pxGeometry);\n  }\n\n  /**\n   * {@inheritDoc IColliderShape.setWorldScale }\n   */;\n  _proto.setWorldScale = function setWorldScale(scale) {\n    this._scale.copyFrom(scale);\n    this._setLocalPose();\n    this._maxScale = Math.max(scale.x, Math.max(scale.x, scale.y));\n    this._pxGeometry.radius = this._radius * this._maxScale;\n    this._pxShape.setGeometry(this._pxGeometry);\n  };\n  return PhysXSphereColliderShape;\n}(PhysXColliderShape);\n\n/**\n * a base interface providing common functionality for PhysX joints\n */\nvar PhysXJoint = /*#__PURE__*/function () {\n  function PhysXJoint() {\n    this._pxJoint = void 0;\n    this._collider = void 0;\n    this._connectedAnchor = new Vector3();\n    this._breakForce = Number.MAX_VALUE;\n    this._breakTorque = Number.MAX_VALUE;\n  }\n  var _proto = PhysXJoint.prototype;\n  /**\n   * {@inheritDoc IJoint.setConnectedCollider }\n   */\n  _proto.setConnectedCollider = function setConnectedCollider(value) {\n    var _this$_collider;\n    this._pxJoint.setActors((value === null || value === void 0 ? void 0 : value._pxActor) || null, ((_this$_collider = this._collider) === null || _this$_collider === void 0 ? void 0 : _this$_collider._pxActor) || null);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setConnectedAnchor }\n   */;\n  _proto.setConnectedAnchor = function setConnectedAnchor(value) {\n    this._connectedAnchor.copyFrom(value);\n    this._setLocalPose(0, value, PhysXJoint._defaultQuat);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setConnectedMassScale }\n   */;\n  _proto.setConnectedMassScale = function setConnectedMassScale(value) {\n    this._pxJoint.setInvMassScale0(1 / value);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setConnectedInertiaScale }\n   */;\n  _proto.setConnectedInertiaScale = function setConnectedInertiaScale(value) {\n    this._pxJoint.setInvInertiaScale0(1 / value);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setMassScale }\n   */;\n  _proto.setMassScale = function setMassScale(value) {\n    this._pxJoint.setInvMassScale1(1 / value);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setInertiaScale }\n   */;\n  _proto.setInertiaScale = function setInertiaScale(value) {\n    this._pxJoint.setInvInertiaScale1(1 / value);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setBreakForce }\n   */;\n  _proto.setBreakForce = function setBreakForce(value) {\n    this._breakForce = value;\n    this._pxJoint.setBreakForce(this._breakForce, this._breakTorque);\n  }\n\n  /**\n   * {@inheritDoc IJoint.setBreakTorque }\n   */;\n  _proto.setBreakTorque = function setBreakTorque(value) {\n    this._breakTorque = value;\n    this._pxJoint.setBreakForce(this._breakForce, this._breakTorque);\n  }\n\n  /**\n   * Set the joint local pose for an actor.\n   * @param actor 0 for the first actor, 1 for the second actor.\n   * @param position the local position for the actor this joint\n   * @param rotation the local rotation for the actor this joint\n   */;\n  _proto._setLocalPose = function _setLocalPose(actor, position, rotation) {\n    this._pxJoint.setLocalPose(actor, position, rotation);\n  };\n  return PhysXJoint;\n}();\nPhysXJoint._xAxis = new Vector3(1, 0, 0);\nPhysXJoint._defaultVec = new Vector3();\nPhysXJoint._defaultQuat = new Quaternion();\n\n/**\n * A fixed joint permits no relative movement between two colliders. ie the bodies are glued together.\n */\nvar PhysXFixedJoint = /*#__PURE__*/function (_PhysXJoint) {\n  _inheritsLoose(PhysXFixedJoint, _PhysXJoint);\n  function PhysXFixedJoint(collider) {\n    var _this;\n    _this = _PhysXJoint.call(this) || this;\n    _this._collider = collider;\n    _this._pxJoint = PhysXPhysics._pxPhysics.createFixedJoint(null, PhysXJoint._defaultVec, PhysXJoint._defaultQuat, collider._pxActor, PhysXJoint._defaultVec, PhysXJoint._defaultQuat);\n    return _this;\n  }\n  return PhysXFixedJoint;\n}(PhysXJoint);\n\n/**\n * A joint which behaves in a similar way to a hinge or axle.\n */\nvar PhysXHingeJoint = /*#__PURE__*/function (_PhysXJoint) {\n  _inheritsLoose(PhysXHingeJoint, _PhysXJoint);\n  function PhysXHingeJoint(collider) {\n    var _this;\n    _this = _PhysXJoint.call(this) || this;\n    _this._axisRotationQuaternion = new Quaternion();\n    _this._swingOffset = new Vector3();\n    _this._velocity = new Vector3();\n    _this._collider = collider;\n    _this._pxJoint = PhysXPhysics._pxPhysics.createRevoluteJoint(null, PhysXJoint._defaultVec, PhysXJoint._defaultQuat, collider._pxActor, PhysXJoint._defaultVec, PhysXJoint._defaultQuat);\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setAxis }\n   */\n  var _proto = PhysXHingeJoint.prototype;\n  _proto.setAxis = function setAxis(value) {\n    var xAxis = PhysXJoint._xAxis;\n    var axisRotationQuaternion = this._axisRotationQuaternion;\n    xAxis.set(1, 0, 0);\n    value.normalize();\n    var angle = Math.acos(Vector3.dot(xAxis, value));\n    Vector3.cross(xAxis, value, xAxis);\n    Quaternion.rotationAxisAngle(xAxis, angle, axisRotationQuaternion);\n    this._setLocalPose(0, this._swingOffset, axisRotationQuaternion);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setSwingOffset }\n   */;\n  _proto.setSwingOffset = function setSwingOffset(value) {\n    this._swingOffset.copyFrom(value);\n    this._setLocalPose(1, this._swingOffset, this._axisRotationQuaternion);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.getAngle }\n   */;\n  _proto.getAngle = function getAngle() {\n    return this._pxJoint.getAngle();\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.getVelocity }\n   */;\n  _proto.getVelocity = function getVelocity() {\n    var velocity = this._velocity;\n    velocity.copyFrom(this._pxJoint.getVelocity());\n    return velocity;\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setHardLimitCone }\n   */;\n  _proto.setHardLimit = function setHardLimit(lowerLimit, upperLimit, contactDist) {\n    this._pxJoint.setHardLimit(lowerLimit, upperLimit, contactDist);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setHardLimitCone }\n   */;\n  _proto.setSoftLimit = function setSoftLimit(lowerLimit, upperLimit, stiffness, damping) {\n    this._pxJoint.setSoftLimit(lowerLimit, upperLimit, stiffness, damping);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setDriveVelocity }\n   */;\n  _proto.setDriveVelocity = function setDriveVelocity(velocity) {\n    this._pxJoint.setDriveVelocity(velocity);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setDriveForceLimit }\n   */;\n  _proto.setDriveForceLimit = function setDriveForceLimit(limit) {\n    this._pxJoint.setDriveForceLimit(limit);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setDriveGearRatio }\n   */;\n  _proto.setDriveGearRatio = function setDriveGearRatio(ratio) {\n    this._pxJoint.setDriveGearRatio(ratio);\n  }\n\n  /**\n   * {@inheritDoc IHingeJoint.setHingeJointFlag }\n   */;\n  _proto.setHingeJointFlag = function setHingeJointFlag(flag, value) {\n    this._pxJoint.setRevoluteJointFlag(flag, value);\n  };\n  return PhysXHingeJoint;\n}(PhysXJoint);\n\n/**\n * a joint that maintains an upper or lower bound (or both) on the distance between two points on different objects\n */\nvar PhysXSpringJoint = /*#__PURE__*/function (_PhysXJoint) {\n  _inheritsLoose(PhysXSpringJoint, _PhysXJoint);\n  function PhysXSpringJoint(collider) {\n    var _this;\n    _this = _PhysXJoint.call(this) || this;\n    _this._swingOffset = new Vector3();\n    _this._collider = collider;\n    _this._pxJoint = PhysXPhysics._pxPhysics.createDistanceJoint(null, PhysXJoint._defaultVec, PhysXJoint._defaultQuat, collider._pxActor, PhysXJoint._defaultVec, PhysXJoint._defaultQuat);\n    _this._pxJoint.setDistanceJointFlag(1, true); // enable max distance;\n    _this._pxJoint.setDistanceJointFlag(2, true); // enable min distance;\n    _this._pxJoint.setDistanceJointFlag(4, true); // enable spring;\n    return _this;\n  }\n\n  /**\n   * {@inheritDoc ISpringJoint.setSwingOffset }\n   */\n  var _proto = PhysXSpringJoint.prototype;\n  _proto.setSwingOffset = function setSwingOffset(value) {\n    this._swingOffset.copyFrom(value);\n    this._setLocalPose(1, value, PhysXJoint._defaultQuat);\n  }\n\n  /**\n   * {@inheritDoc ISpringJoint.setMinDistance }\n   */;\n  _proto.setMinDistance = function setMinDistance(distance) {\n    this._pxJoint.setMinDistance(distance);\n  }\n\n  /**\n   * {@inheritDoc ISpringJoint.setMaxDistance }\n   */;\n  _proto.setMaxDistance = function setMaxDistance(distance) {\n    this._pxJoint.setMaxDistance(distance);\n  }\n\n  /**\n   * {@inheritDoc ISpringJoint.setTolerance }\n   */;\n  _proto.setTolerance = function setTolerance(tolerance) {\n    this._pxJoint.setTolerance(tolerance);\n  }\n\n  /**\n   * {@inheritDoc ISpringJoint.setStiffness }\n   */;\n  _proto.setStiffness = function setStiffness(stiffness) {\n    this._pxJoint.setStiffness(stiffness);\n  }\n\n  /**\n   * {@inheritDoc ISpringJoint.setDamping }\n   */;\n  _proto.setDamping = function setDamping(damping) {\n    this._pxJoint.setDamping(damping);\n  };\n  return PhysXSpringJoint;\n}(PhysXJoint);\n\n/**\n *  Static interface implement decorator.\n *  https://stackoverflow.com/questions/13955157/how-to-define-static-property-in-typescript-interface\n */\nfunction StaticInterfaceImplement() {\n  return function (constructor) {\n  };\n}\n\nvar _dec, _class, _class2;\n/**\n * PhysX object creation.\n */\nvar PhysXPhysics = (_dec = StaticInterfaceImplement(), _dec(_class = (_class2 = /*#__PURE__*/function () {\n  function PhysXPhysics() {}\n  /** @internal PhysX wasm object */\n  /** @internal PhysX Foundation SDK singleton class */\n  /** @internal Physx physics object */\n  /**\n   * Initialize PhysXPhysics.\n   * @param runtimeMode - Runtime mode\n   * @returns Promise object\n   */\n  PhysXPhysics.initialize = function initialize(runtimeMode) {\n    if (runtimeMode === void 0) {\n      runtimeMode = PhysXRuntimeMode.Auto;\n    }\n    var scriptPromise = new Promise(function (resolve) {\n      var script = document.createElement(\"script\");\n      document.body.appendChild(script);\n      script.async = true;\n      script.onload = resolve;\n      var supported = function () {\n        try {\n          if (typeof WebAssembly === \"object\" && typeof WebAssembly.instantiate === \"function\") {\n            var module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\n            if (module instanceof WebAssembly.Module) return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\n          }\n        } catch (e) {}\n        return false;\n      }();\n      if (runtimeMode == PhysXRuntimeMode.Auto) {\n        if (supported) {\n          runtimeMode = PhysXRuntimeMode.WebAssembly;\n        } else {\n          runtimeMode = PhysXRuntimeMode.JavaScript;\n        }\n      }\n      if (runtimeMode == PhysXRuntimeMode.JavaScript) {\n        script.src = \"https://gw.alipayobjects.com/os/lib/oasis-engine/physics-physx/0.8.0-beta.10/libs/physx.release.js.js\";\n      } else if (runtimeMode == PhysXRuntimeMode.WebAssembly) {\n        script.src = \"https://gw.alipayobjects.com/os/lib/oasis-engine/physics-physx/0.8.0-beta.10/libs/physx.release.js\";\n      }\n    });\n    return new Promise(function (resolve) {\n      scriptPromise.then(function () {\n        window.PHYSX().then(function (PHYSX) {\n          PhysXPhysics._init(PHYSX);\n          PhysXPhysicsManager._init();\n          console.log(\"PhysX loaded.\");\n          resolve();\n        });\n      });\n    });\n  }\n\n  /**\n   * Destroy PhysXPhysics.\n   */;\n  PhysXPhysics.destroy = function destroy() {\n    this._pxFoundation.release();\n    this._pxPhysics.release();\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createPhysicsManager }\n   */;\n  PhysXPhysics.createPhysicsManager = function createPhysicsManager(onContactBegin, onContactEnd, onContactStay, onTriggerBegin, onTriggerEnd, onTriggerStay) {\n    return new PhysXPhysicsManager(onContactBegin, onContactEnd, onContactStay, onTriggerBegin, onTriggerEnd, onTriggerStay);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createStaticCollider }\n   */;\n  PhysXPhysics.createStaticCollider = function createStaticCollider(position, rotation) {\n    return new PhysXStaticCollider(position, rotation);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createDynamicCollider }\n   */;\n  PhysXPhysics.createDynamicCollider = function createDynamicCollider(position, rotation) {\n    return new PhysXDynamicCollider(position, rotation);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createCharacterController }\n   */;\n  PhysXPhysics.createCharacterController = function createCharacterController() {\n    return new PhysXCharacterController();\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createPhysicsMaterial }\n   */;\n  PhysXPhysics.createPhysicsMaterial = function createPhysicsMaterial(staticFriction, dynamicFriction, bounciness, frictionCombine, bounceCombine) {\n    return new PhysXPhysicsMaterial(staticFriction, dynamicFriction, bounciness, frictionCombine, bounceCombine);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createBoxColliderShape }\n   */;\n  PhysXPhysics.createBoxColliderShape = function createBoxColliderShape(uniqueID, size, material) {\n    return new PhysXBoxColliderShape(uniqueID, size, material);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createSphereColliderShape }\n   */;\n  PhysXPhysics.createSphereColliderShape = function createSphereColliderShape(uniqueID, radius, material) {\n    return new PhysXSphereColliderShape(uniqueID, radius, material);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createPlaneColliderShape }\n   */;\n  PhysXPhysics.createPlaneColliderShape = function createPlaneColliderShape(uniqueID, material) {\n    return new PhysXPlaneColliderShape(uniqueID, material);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createCapsuleColliderShape }\n   */;\n  PhysXPhysics.createCapsuleColliderShape = function createCapsuleColliderShape(uniqueID, radius, height, material) {\n    return new PhysXCapsuleColliderShape(uniqueID, radius, height, material);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createFixedJoint }\n   */;\n  PhysXPhysics.createFixedJoint = function createFixedJoint(collider) {\n    return new PhysXFixedJoint(collider);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createHingeJoint }\n   */;\n  PhysXPhysics.createHingeJoint = function createHingeJoint(collider) {\n    return new PhysXHingeJoint(collider);\n  }\n\n  /**\n   * {@inheritDoc IPhysics.createSpringJoint }\n   */;\n  PhysXPhysics.createSpringJoint = function createSpringJoint(collider) {\n    return new PhysXSpringJoint(collider);\n  };\n  PhysXPhysics._init = function _init(PHYSX) {\n    PhysXPhysics._physX = PHYSX;\n    var version = PhysXPhysics._physX.PX_PHYSICS_VERSION;\n    var defaultErrorCallback = new PhysXPhysics._physX.PxDefaultErrorCallback();\n    var allocator = new PhysXPhysics._physX.PxDefaultAllocator();\n    PhysXPhysics._pxFoundation = PhysXPhysics._physX.PxCreateFoundation(version, allocator, defaultErrorCallback);\n    this._pxPhysics = PhysXPhysics._physX.PxCreatePhysics(version, PhysXPhysics._pxFoundation, new PhysXPhysics._physX.PxTolerancesScale(), false, null);\n    PhysXPhysics._physX.PxInitExtensions(this._pxPhysics, null);\n  };\n  return PhysXPhysics;\n}(), _class2._physX = void 0, _class2._pxFoundation = void 0, _class2._pxPhysics = void 0, _class2)) || _class);\n\nexport { PhysXPhysics, PhysXRuntimeMode };\n//# sourceMappingURL=module.js.map\n","import { Vector3, MathUtil, dependentComponents, MeshRenderer, Matrix, Camera, SpotLight, DirectLight, PointLight, Collider, BoxColliderShape, SphereColliderShape, CapsuleColliderShape, ColliderShapeUpAxis, ModelMesh, UnlitMaterial, GLCapabilityType, MeshTopology, Script } from 'oasis-engine';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\n/**\n * Wireframe primitive.\n */\n\nvar WireframePrimitive = /*#__PURE__*/function () {\n  function WireframePrimitive() {}\n\n  /**\n   * Store cuboid wireframe mesh data.\n   * The origin located in center of cuboid.\n   * @param width - Cuboid width\n   * @param height - Cuboid height\n   * @param depth - Cuboid depth\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  WireframePrimitive.createCuboidWireframe = function createCuboidWireframe(width, height, depth, positions, positionOffset, indices, indicesOffset) {\n    var halfWidth = width / 2;\n    var halfHeight = height / 2;\n    var halfDepth = depth / 2; // Up\n\n    positions.push(new Vector3(-halfWidth, halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, halfHeight, halfDepth));\n    positions.push(new Vector3(-halfWidth, halfHeight, halfDepth)); // Down\n\n    positions.push(new Vector3(-halfWidth, -halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, -halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, -halfHeight, halfDepth));\n    positions.push(new Vector3(-halfWidth, -halfHeight, halfDepth)); // Left\n\n    positions.push(new Vector3(-halfWidth, halfHeight, -halfDepth));\n    positions.push(new Vector3(-halfWidth, halfHeight, halfDepth));\n    positions.push(new Vector3(-halfWidth, -halfHeight, halfDepth));\n    positions.push(new Vector3(-halfWidth, -halfHeight, -halfDepth)); // Right\n\n    positions.push(new Vector3(halfWidth, halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, halfHeight, halfDepth));\n    positions.push(new Vector3(halfWidth, -halfHeight, halfDepth));\n    positions.push(new Vector3(halfWidth, -halfHeight, -halfDepth)); // Front\n\n    positions.push(new Vector3(-halfWidth, halfHeight, halfDepth));\n    positions.push(new Vector3(halfWidth, halfHeight, halfDepth));\n    positions.push(new Vector3(halfWidth, -halfHeight, halfDepth));\n    positions.push(new Vector3(-halfWidth, -halfHeight, halfDepth)); // Back\n\n    positions.push(new Vector3(-halfWidth, halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, halfHeight, -halfDepth));\n    positions.push(new Vector3(halfWidth, -halfHeight, -halfDepth));\n    positions.push(new Vector3(-halfWidth, -halfHeight, -halfDepth)); // Up\n\n    indices[indicesOffset++] = positionOffset;\n    indices[indicesOffset++] = positionOffset + 1;\n    indices[indicesOffset++] = positionOffset + 1;\n    indices[indicesOffset++] = positionOffset + 2;\n    indices[indicesOffset++] = positionOffset + 2;\n    indices[indicesOffset++] = positionOffset + 3;\n    indices[indicesOffset++] = positionOffset + 3;\n    indices[indicesOffset++] = positionOffset; // Down\n\n    indices[indicesOffset++] = positionOffset + 4;\n    indices[indicesOffset++] = positionOffset + 5;\n    indices[indicesOffset++] = positionOffset + 5;\n    indices[indicesOffset++] = positionOffset + 6;\n    indices[indicesOffset++] = positionOffset + 6;\n    indices[indicesOffset++] = positionOffset + 7;\n    indices[indicesOffset++] = positionOffset + 7;\n    indices[indicesOffset++] = positionOffset + 4; // Left\n\n    indices[indicesOffset++] = positionOffset + 8;\n    indices[indicesOffset++] = positionOffset + 9;\n    indices[indicesOffset++] = positionOffset + 9;\n    indices[indicesOffset++] = positionOffset + 10;\n    indices[indicesOffset++] = positionOffset + 10;\n    indices[indicesOffset++] = positionOffset + 11;\n    indices[indicesOffset++] = positionOffset + 11;\n    indices[indicesOffset++] = positionOffset + 8; // Right\n\n    indices[indicesOffset++] = positionOffset + 12;\n    indices[indicesOffset++] = positionOffset + 13;\n    indices[indicesOffset++] = positionOffset + 13;\n    indices[indicesOffset++] = positionOffset + 14;\n    indices[indicesOffset++] = positionOffset + 14;\n    indices[indicesOffset++] = positionOffset + 15;\n    indices[indicesOffset++] = positionOffset + 15;\n    indices[indicesOffset++] = positionOffset + 12; // Front\n\n    indices[indicesOffset++] = positionOffset + 16;\n    indices[indicesOffset++] = positionOffset + 17;\n    indices[indicesOffset++] = positionOffset + 17;\n    indices[indicesOffset++] = positionOffset + 18;\n    indices[indicesOffset++] = positionOffset + 18;\n    indices[indicesOffset++] = positionOffset + 19;\n    indices[indicesOffset++] = positionOffset + 19;\n    indices[indicesOffset++] = positionOffset + 16; // Back\n\n    indices[indicesOffset++] = positionOffset + 20;\n    indices[indicesOffset++] = positionOffset + 21;\n    indices[indicesOffset++] = positionOffset + 21;\n    indices[indicesOffset++] = positionOffset + 22;\n    indices[indicesOffset++] = positionOffset + 22;\n    indices[indicesOffset++] = positionOffset + 23;\n    indices[indicesOffset++] = positionOffset + 23;\n    indices[indicesOffset++] = positionOffset + 20;\n  }\n  /**\n   * Store sphere wireframe mesh data.\n   * The origin located in center of sphere.\n   * @param radius - Sphere radius\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  ;\n\n  WireframePrimitive.createSphereWireframe = function createSphereWireframe(radius, positions, positionOffset, indices, indicesOffset) {\n    var shift = new Vector3(); // X\n\n    WireframePrimitive.createCircleWireframe(radius, 0, shift, positions, positionOffset, indices, indicesOffset); // Y\n\n    WireframePrimitive.createCircleWireframe(radius, 1, shift, positions, positionOffset + WireframePrimitive.circleVertexCount, indices, indicesOffset + WireframePrimitive.circleIndexCount); // Z\n\n    WireframePrimitive.createCircleWireframe(radius, 2, shift, positions, positionOffset + WireframePrimitive.circleVertexCount * 2, indices, indicesOffset + WireframePrimitive.circleIndexCount * 2);\n  }\n  /**\n   * Store cone wireframe mesh data.\n   * The origin located in top of cone.\n   * @param radius - The radius of cap\n   * @param height - The height of cone\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  ;\n\n  WireframePrimitive.createConeWireframe = function createConeWireframe(radius, height, positions, positionOffset, indices, indicesOffset) {\n    var shift = new Vector3(); // Y\n\n    shift.y = -height;\n    WireframePrimitive.createCircleWireframe(radius, 1, shift, positions, positionOffset, indices, indicesOffset);\n    positions.push(new Vector3());\n    positions.push(new Vector3(-radius, -height, 0));\n    positions.push(new Vector3(radius, -height, 0));\n    positions.push(new Vector3(0, -height, radius));\n    positions.push(new Vector3(0, -height, -radius));\n    var indexBegin = positionOffset + WireframePrimitive.circleVertexCount;\n    indicesOffset += WireframePrimitive.circleIndexCount;\n    indices[indicesOffset++] = indexBegin;\n    indices[indicesOffset++] = indexBegin + 1;\n    indices[indicesOffset++] = indexBegin;\n    indices[indicesOffset++] = indexBegin + 2;\n    indices[indicesOffset++] = indexBegin;\n    indices[indicesOffset++] = indexBegin + 3;\n    indices[indicesOffset++] = indexBegin;\n    indices[indicesOffset++] = indexBegin + 4;\n  }\n  /**\n   * Store unbound cylinder wireframe mesh data.\n   * The origin located in center of sphere.\n   * @param radius - The radius\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  ;\n\n  WireframePrimitive.createUnboundCylinderWireframe = function createUnboundCylinderWireframe(radius, positions, positionOffset, indices, indicesOffset) {\n    var height = 5;\n    var shift = new Vector3(); // Y\n\n    WireframePrimitive.createCircleWireframe(radius, 1, shift, positions, positionOffset, indices, indicesOffset);\n    var indexBegin = positionOffset + WireframePrimitive.circleVertexCount;\n    indicesOffset += WireframePrimitive.circleIndexCount;\n\n    for (var i = 0; i < 8; i++) {\n      var radian = MathUtil.degreeToRadian(45 * i);\n      positions.push(new Vector3(radius * Math.cos(radian), 0, radius * Math.sin(radian)));\n      positions.push(new Vector3(radius * Math.cos(radian), -height, radius * Math.sin(radian)));\n      indices[indicesOffset + i * 2] = indexBegin + 2 * i;\n      indices[indicesOffset + i * 2 + 1] = indexBegin + 2 * i + 1;\n    }\n  }\n  /**\n   * Store capsule wireframe mesh data.\n   * The origin located in center of capsule.\n   * @param radius - The radius of the two hemispherical ends\n   * @param height - The height of the cylindrical part, measured between the centers of the hemispherical ends\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  ;\n\n  WireframePrimitive.createCapsuleWireframe = function createCapsuleWireframe(radius, height, positions, positionOffset, indices, indicesOffset) {\n    var circleIndicesCount = WireframePrimitive.circleIndexCount;\n    var vertexCount = WireframePrimitive.circleVertexCount;\n    var shift = new Vector3();\n    var halfHeight = height / 2; // Y-Top\n\n    shift.y = halfHeight;\n    WireframePrimitive.createCircleWireframe(radius, 1, shift, positions, positionOffset, indices, indicesOffset); // Y-Bottom\n\n    shift.y = -halfHeight;\n    WireframePrimitive.createCircleWireframe(radius, 1, shift, positions, positionOffset + vertexCount, indices, indicesOffset + circleIndicesCount); // X-Elliptic\n\n    WireframePrimitive.createEllipticWireframe(radius, halfHeight, 2, positions, positionOffset + vertexCount * 2, indices, indicesOffset + circleIndicesCount * 2); // Z-Elliptic\n\n    WireframePrimitive.createEllipticWireframe(radius, halfHeight, 0, positions, positionOffset + vertexCount * 3, indices, indicesOffset + circleIndicesCount * 2 + WireframePrimitive.ellipticIndexCount);\n  }\n  /**\n   * Store circle wireframe mesh data.\n   * @param radius - The radius\n   * @param axis - The default direction\n   * @param shift - The default shift\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  ;\n\n  WireframePrimitive.createCircleWireframe = function createCircleWireframe(radius, axis, shift, positions, positionOffset, indices, indicesOffset) {\n    var vertexCount = WireframePrimitive.circleVertexCount;\n    var twoPi = Math.PI * 2;\n    var countReciprocal = 1.0 / vertexCount;\n\n    for (var i = 0; i < vertexCount; ++i) {\n      var v = i * countReciprocal;\n      var thetaDelta = v * twoPi;\n\n      switch (axis) {\n        case 0:\n          positions.push(new Vector3(shift.x, radius * Math.cos(thetaDelta) + shift.y, radius * Math.sin(thetaDelta) + shift.z));\n          break;\n\n        case 1:\n          positions.push(new Vector3(radius * Math.cos(thetaDelta) + shift.x, shift.y, radius * Math.sin(thetaDelta) + shift.z));\n          break;\n\n        case 2:\n          positions.push(new Vector3(radius * Math.cos(thetaDelta) + shift.x, radius * Math.sin(thetaDelta) + shift.y, shift.z));\n          break;\n      }\n\n      var globalIndex = i + positionOffset;\n\n      if (i < vertexCount - 1) {\n        indices[indicesOffset + 2 * i] = globalIndex;\n        indices[indicesOffset + 2 * i + 1] = globalIndex + 1;\n      } else {\n        indices[indicesOffset + 2 * i] = globalIndex;\n        indices[indicesOffset + 2 * i + 1] = positionOffset;\n      }\n    }\n  }\n  /**\n   * Store elliptic wireframe mesh data.\n   * @param radius - The radius of the two hemispherical ends\n   * @param height - The height of the cylindrical part, measured between the centers of the hemispherical ends\n   * @param axis - The default direction\n   * @param positions - position array\n   * @param positionOffset - The min of index list\n   * @param indices - index array\n   * @param indicesOffset - index array offset\n   */\n  ;\n\n  WireframePrimitive.createEllipticWireframe = function createEllipticWireframe(radius, height, axis, positions, positionOffset, indices, indicesOffset) {\n    var vertexCount = WireframePrimitive.circleVertexCount;\n    var twoPi = Math.PI * 2;\n    var countReciprocal = 1.0 / vertexCount;\n\n    for (var i = 0; i < vertexCount; ++i) {\n      var v = i * countReciprocal;\n      var thetaDelta = v * twoPi;\n\n      switch (axis) {\n        case 0:\n          positions.push(new Vector3(0, radius * Math.sin(thetaDelta) + height, radius * Math.cos(thetaDelta)));\n          break;\n\n        case 1:\n          positions.push(new Vector3(radius * Math.cos(thetaDelta), height, radius * Math.sin(thetaDelta)));\n          break;\n\n        case 2:\n          positions.push(new Vector3(radius * Math.cos(thetaDelta), radius * Math.sin(thetaDelta) + height, 0));\n          break;\n      }\n\n      if (i == vertexCount / 2) {\n        height = -height;\n      }\n\n      var globalIndex = i + positionOffset;\n\n      if (i < vertexCount - 1) {\n        indices[indicesOffset + 2 * i] = globalIndex;\n        indices[indicesOffset + 2 * i + 1] = globalIndex + 1;\n      } else {\n        indices[indicesOffset + 2 * i] = globalIndex;\n        indices[indicesOffset + 2 * i + 1] = positionOffset;\n      }\n    }\n  };\n\n  _createClass(WireframePrimitive, null, [{\n    key: \"cuboidIndexCount\",\n    get:\n    /** global settings for vertex count */\n\n    /**\n     * Get cuboid wire frame index count.\n     */\n    function get() {\n      return 48;\n    }\n    /**\n     * Get sphere wire frame index count.\n     */\n\n  }, {\n    key: \"sphereIndexCount\",\n    get: function get() {\n      return WireframePrimitive.circleIndexCount * 3;\n    }\n    /**\n     * Get cone wire frame index count.\n     */\n\n  }, {\n    key: \"coneIndexCount\",\n    get: function get() {\n      return WireframePrimitive.circleIndexCount + 8;\n    }\n    /**\n     * Get unbound cylinder wire frame index count.\n     */\n\n  }, {\n    key: \"unboundCylinderIndexCount\",\n    get: function get() {\n      return WireframePrimitive.circleIndexCount + 16;\n    }\n    /**\n     * Get capsule wire frame index count.\n     */\n\n  }, {\n    key: \"capsuleIndexCount\",\n    get: function get() {\n      return (WireframePrimitive.circleIndexCount + WireframePrimitive.ellipticIndexCount) * 2;\n    }\n    /**\n     * Get circle wire frame index count.\n     */\n\n  }, {\n    key: \"circleIndexCount\",\n    get: function get() {\n      return WireframePrimitive.circleVertexCount * 2;\n    }\n    /**\n     * Get elliptic wire frame index count.\n     */\n\n  }, {\n    key: \"ellipticIndexCount\",\n    get: function get() {\n      return WireframePrimitive.circleVertexCount * 2;\n    }\n  }]);\n\n  return WireframePrimitive;\n}();\nWireframePrimitive.circleVertexCount = 40;\n\nvar _dec, _class, _class2;\n/**\n * Wireframe Auxiliary Manager.\n * @decorator `@dependentComponents(MeshRenderer)`\n */\n\nvar WireframeManager = (_dec = dependentComponents(MeshRenderer), _dec(_class = (_class2 = /*#__PURE__*/function (_Script) {\n  _inheritsLoose(WireframeManager, _Script);\n\n  function WireframeManager() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Script.call.apply(_Script, [this].concat(args)) || this;\n    _this._cameraPositions = [new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3(), new Vector3()];\n    _this._localPositions = [];\n    _this._globalPositions = [];\n    _this._indices = null;\n    _this._indicesCount = 0;\n    _this._supportUint32Array = void 0;\n    _this._wireframeElements = [];\n    _this._renderer = void 0;\n    _this._material = void 0;\n    _this._mesh = void 0;\n    return _this;\n  }\n\n  WireframeManager._getPositionFromPool = function _getPositionFromPool(positionIndex) {\n    var position;\n    var positionPool = WireframeManager._positionPool;\n\n    if (positionIndex < positionPool.length) {\n      position = positionPool[positionIndex];\n    } else {\n      position = new Vector3();\n\n      WireframeManager._positionPool.push(position);\n    }\n\n    return position;\n  }\n  /**\n   * Clear all wireframe.\n   */\n  ;\n\n  var _proto = WireframeManager.prototype;\n\n  _proto.clear = function clear() {\n    this._wireframeElements.length = 0;\n    this._localPositions.length = 0;\n    this._globalPositions.length = 0;\n    this._indicesCount = 0;\n    this._mesh.subMesh.count = 0;\n  }\n  /**\n   * Create auxiliary mesh for entity.\n   * @param entity - The entity\n   * @param includeChildren - whether include child entity(default is true)\n   */\n  ;\n\n  _proto.addEntityWireframe = function addEntityWireframe(entity, includeChildren) {\n    if (includeChildren === void 0) {\n      includeChildren = true;\n    }\n\n    if (includeChildren) {\n      var components = new Array();\n      entity.getComponentsIncludeChildren(Camera, components);\n\n      for (var i = 0, n = components.length; i < n; i++) {\n        this.addCameraWireframe(components[i]);\n      }\n\n      var componentsOffset = components.length;\n      entity.getComponentsIncludeChildren(SpotLight, components);\n\n      for (var _i = componentsOffset, _n = components.length; _i < _n; _i++) {\n        this.addSpotLightWireframe(components[_i]);\n      }\n\n      componentsOffset = components.length;\n      entity.getComponentsIncludeChildren(DirectLight, components);\n\n      for (var _i2 = componentsOffset, _n2 = components.length; _i2 < _n2; _i2++) {\n        this.addDirectLightWireframe(components[_i2]);\n      }\n\n      componentsOffset = components.length;\n      entity.getComponentsIncludeChildren(PointLight, components);\n\n      for (var _i3 = componentsOffset, _n3 = components.length; _i3 < _n3; _i3++) {\n        this.addPointLightWireframe(components[_i3]);\n      }\n\n      componentsOffset = components.length;\n      entity.getComponentsIncludeChildren(Collider, components);\n\n      for (var _i4 = componentsOffset, _n4 = components.length; _i4 < _n4; _i4++) {\n        this.addCollideWireframe(components[_i4]);\n      }\n    } else {\n      var camera = entity.getComponent(Camera);\n      camera && this.addCameraWireframe(camera);\n      var spotLight = entity.getComponent(SpotLight);\n      spotLight && this.addSpotLightWireframe(spotLight);\n      var directLight = entity.getComponent(DirectLight);\n      directLight && this.addDirectLightWireframe(directLight);\n      var pointLight = entity.getComponent(PointLight);\n      pointLight && this.addPointLightWireframe(pointLight);\n      var collider = entity.getComponent(Collider);\n      collider && this.addCollideWireframe(collider);\n    }\n  }\n  /**\n   * Create auxiliary mesh for camera.\n   * @param camera - The Camera\n   */\n  ;\n\n  _proto.addCameraWireframe = function addCameraWireframe(camera) {\n    var transform = camera.entity.transform;\n    var inverseProj = camera.projectionMatrix.clone();\n    inverseProj.invert();\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n\n    this._wireframeElements.push(new WireframeElement(transform, positionsOffset));\n\n    var ndcPosition = WireframeManager._ndcPosition; // front\n\n    for (var i = 0; i < 4; i++) {\n      var newPosition = this._cameraPositions[i];\n      newPosition.copyFrom(ndcPosition[i]);\n      newPosition.transformCoordinate(inverseProj);\n      localPositions.push(newPosition);\n    } // back\n\n\n    for (var _i5 = 0; _i5 < 4; _i5++) {\n      var _newPosition = this._cameraPositions[_i5 + 4];\n\n      _newPosition.copyFrom(ndcPosition[_i5]);\n\n      _newPosition.z = 1;\n\n      _newPosition.transformCoordinate(inverseProj);\n\n      localPositions.push(_newPosition);\n    }\n\n    this._growthIndexMemory(24);\n\n    var indices = this._indices;\n    indices[this._indicesCount++] = positionsOffset;\n    indices[this._indicesCount++] = positionsOffset + 1;\n    indices[this._indicesCount++] = positionsOffset + 1;\n    indices[this._indicesCount++] = positionsOffset + 2;\n    indices[this._indicesCount++] = positionsOffset + 2;\n    indices[this._indicesCount++] = positionsOffset + 3;\n    indices[this._indicesCount++] = positionsOffset + 3;\n    indices[this._indicesCount++] = positionsOffset; // front\n\n    indices[this._indicesCount++] = positionsOffset;\n    indices[this._indicesCount++] = positionsOffset + 4;\n    indices[this._indicesCount++] = positionsOffset + 1;\n    indices[this._indicesCount++] = positionsOffset + 5;\n    indices[this._indicesCount++] = positionsOffset + 2;\n    indices[this._indicesCount++] = positionsOffset + 6;\n    indices[this._indicesCount++] = positionsOffset + 3;\n    indices[this._indicesCount++] = positionsOffset + 7; // link\n\n    indices[this._indicesCount++] = positionsOffset + 4;\n    indices[this._indicesCount++] = positionsOffset + 5;\n    indices[this._indicesCount++] = positionsOffset + 5;\n    indices[this._indicesCount++] = positionsOffset + 6;\n    indices[this._indicesCount++] = positionsOffset + 6;\n    indices[this._indicesCount++] = positionsOffset + 7;\n    indices[this._indicesCount++] = positionsOffset + 7;\n    indices[this._indicesCount++] = positionsOffset + 4; // back\n  }\n  /**\n   * Create auxiliary mesh for spot light.\n   * @param light - The SpotLight\n   */\n  ;\n\n  _proto.addSpotLightWireframe = function addSpotLightWireframe(light) {\n    var height = light.distance;\n    var radius = Math.tan(light.angle / 2) * height;\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n    var coneIndicesCount = WireframePrimitive.coneIndexCount;\n\n    this._growthIndexMemory(coneIndicesCount);\n\n    var indices = this._indices;\n    WireframePrimitive.createConeWireframe(radius, height, localPositions, positionsOffset, indices, this._indicesCount);\n    this._indicesCount += coneIndicesCount; // rotation to default transform forward direction(-Z)\n\n    this._rotateAroundX(positionsOffset);\n\n    this._wireframeElements.push(new WireframeElement(light.entity.transform, positionsOffset));\n  }\n  /**\n   * Create auxiliary mesh for point light.\n   * @param light - The PointLight\n   */\n  ;\n\n  _proto.addPointLightWireframe = function addPointLightWireframe(light) {\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n    var sphereIndicesCount = WireframePrimitive.sphereIndexCount;\n\n    this._growthIndexMemory(sphereIndicesCount);\n\n    var indices = this._indices;\n    WireframePrimitive.createSphereWireframe(light.distance, localPositions, positionsOffset, indices, this._indicesCount);\n    this._indicesCount += sphereIndicesCount;\n\n    this._wireframeElements.push(new WireframeElement(light.entity.transform, positionsOffset));\n  }\n  /**\n   * Create auxiliary mesh for directional light.\n   * @param light - The DirectLight\n   */\n  ;\n\n  _proto.addDirectLightWireframe = function addDirectLightWireframe(light) {\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n    var unboundCylinderIndicesCount = WireframePrimitive.unboundCylinderIndexCount;\n\n    this._growthIndexMemory(unboundCylinderIndicesCount);\n\n    var indices = this._indices;\n    WireframePrimitive.createUnboundCylinderWireframe(1, localPositions, positionsOffset, indices, this._indicesCount);\n    this._indicesCount += unboundCylinderIndicesCount; // rotation to default transform forward direction(-Z)\n\n    this._rotateAroundX(positionsOffset);\n\n    this._wireframeElements.push(new WireframeElement(light.entity.transform, positionsOffset));\n  }\n  /**\n   * Create auxiliary mesh for collider.\n   * @param collider - The Collider\n   */\n  ;\n\n  _proto.addCollideWireframe = function addCollideWireframe(collider) {\n    var shapes = collider.shapes;\n\n    for (var i = 0, n = shapes.length; i < n; i++) {\n      var shape = shapes[i];\n\n      if (shape instanceof BoxColliderShape) {\n        this.addBoxColliderShapeWireframe(shape);\n      } else if (shape instanceof SphereColliderShape) {\n        this.addSphereColliderShapeWireframe(shape);\n      } else if (shape instanceof CapsuleColliderShape) {\n        this.addCapsuleColliderShapeWireframe(shape);\n      }\n    }\n  }\n  /**\n   * Create auxiliary mesh for box collider shape.\n   * @param shape - The BoxColliderShape\n   */\n  ;\n\n  _proto.addBoxColliderShapeWireframe = function addBoxColliderShapeWireframe(shape) {\n    var transform = shape.collider.entity.transform;\n    var worldScale = transform.lossyWorldScale;\n    var size = shape.size;\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n    var cuboidIndicesCount = WireframePrimitive.cuboidIndexCount;\n\n    this._growthIndexMemory(cuboidIndicesCount);\n\n    var indices = this._indices;\n    WireframePrimitive.createCuboidWireframe(worldScale.x * size.x, worldScale.y * size.y, worldScale.z * size.z, localPositions, positionsOffset, indices, this._indicesCount);\n\n    this._localTranslate(positionsOffset, shape.position);\n\n    this._indicesCount += cuboidIndicesCount;\n\n    this._wireframeElements.push(new WireframeElement(transform, positionsOffset));\n  }\n  /**\n   * Create auxiliary mesh for sphere collider shape.\n   * @param shape - The SphereColliderShape\n   */\n  ;\n\n  _proto.addSphereColliderShapeWireframe = function addSphereColliderShapeWireframe(shape) {\n    var transform = shape.collider.entity.transform;\n    var worldScale = transform.lossyWorldScale;\n    var radius = shape.radius;\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n    var sphereIndicesCount = WireframePrimitive.sphereIndexCount;\n\n    this._growthIndexMemory(sphereIndicesCount);\n\n    var indices = this._indices;\n    WireframePrimitive.createSphereWireframe(Math.max(worldScale.x, worldScale.y, worldScale.z) * radius, localPositions, positionsOffset, indices, this._indicesCount);\n\n    this._localTranslate(positionsOffset, shape.position);\n\n    this._indicesCount += sphereIndicesCount;\n\n    this._wireframeElements.push(new WireframeElement(transform, positionsOffset));\n  }\n  /**\n   * Create auxiliary mesh for capsule collider shape.\n   * @param shape - The CapsuleColliderShape\n   */\n  ;\n\n  _proto.addCapsuleColliderShapeWireframe = function addCapsuleColliderShapeWireframe(shape) {\n    var transform = shape.collider.entity.transform;\n    var worldScale = transform.lossyWorldScale;\n    var maxScale = Math.max(worldScale.x, worldScale.y, worldScale.z);\n    var radius = shape.radius;\n    var height = shape.height;\n    var upAxis = shape.upAxis;\n    var localPositions = this._localPositions;\n    var positionsOffset = localPositions.length;\n    var capsuleIndicesCount = WireframePrimitive.capsuleIndexCount;\n\n    this._growthIndexMemory(capsuleIndicesCount);\n\n    var indices = this._indices;\n    WireframePrimitive.createCapsuleWireframe(maxScale * radius, maxScale * height, localPositions, positionsOffset, indices, this._indicesCount);\n\n    switch (upAxis) {\n      case ColliderShapeUpAxis.X:\n        this._rotateAroundZ(positionsOffset);\n\n        break;\n\n      case ColliderShapeUpAxis.Z:\n        this._rotateAroundX(positionsOffset);\n\n    }\n\n    this._localTranslate(positionsOffset, shape.position);\n\n    this._indicesCount += capsuleIndicesCount;\n\n    this._wireframeElements.push(new WireframeElement(transform, positionsOffset));\n  }\n  /**\n   * @override\n   */\n  ;\n\n  _proto.onAwake = function onAwake() {\n    var engine = this.engine;\n    var mesh = new ModelMesh(engine);\n    var material = new UnlitMaterial(engine);\n    var renderer = this.entity.getComponent(MeshRenderer);\n\n    var supportUint32Array = engine._hardwareRenderer.canIUse(GLCapabilityType.elementIndexUint); // @ts-ignore\n\n\n    mesh._enableVAO = false;\n    mesh.addSubMesh(0, this._indicesCount, MeshTopology.Lines);\n    renderer.mesh = mesh;\n    renderer.setMaterial(material);\n    this._mesh = mesh;\n    this._material = material;\n    this._renderer = renderer;\n    this._indices = supportUint32Array ? new Uint32Array(128) : new Uint16Array(128);\n    this._supportUint32Array = supportUint32Array;\n  }\n  /**\n   * @override\n   */\n  ;\n\n  _proto.onEnable = function onEnable() {\n    this._renderer.enabled = true;\n  }\n  /**\n   * @override\n   */\n  ;\n\n  _proto.onDisable = function onDisable() {\n    this._renderer.enabled = false;\n  }\n  /**\n   * @override\n   * @param deltaTime\n   */\n  ;\n\n  _proto.onUpdate = function onUpdate(deltaTime) {\n    var mesh = this._mesh;\n    var localPositions = this._localPositions;\n    var globalPositions = this._globalPositions;\n    var wireframeElements = this._wireframeElements;\n    var localPositionLength = localPositions.length;\n    globalPositions.length = localPositionLength;\n    var positionIndex = 0;\n    var needUpdate = false;\n\n    for (var i = 0, n = wireframeElements.length; i < n; i++) {\n      var wireframeElement = wireframeElements[i];\n      var beginIndex = wireframeElement.transformRanges;\n      var endIndex = i < n - 1 ? wireframeElements[i + 1].transformRanges : localPositionLength;\n\n      if (wireframeElement.updateFlag.flag) {\n        var _transform = wireframeElement.transform;\n        var worldMatrix = WireframeManager._tempMatrix;\n        Matrix.rotationTranslation(_transform.worldRotationQuaternion, _transform.worldPosition, worldMatrix);\n\n        for (var j = beginIndex; j < endIndex; j++) {\n          var localPosition = localPositions[positionIndex];\n\n          var globalPosition = WireframeManager._getPositionFromPool(positionIndex);\n\n          Vector3.transformCoordinate(localPosition, worldMatrix, globalPosition);\n          globalPositions[positionIndex] = globalPosition;\n          positionIndex++;\n        }\n\n        wireframeElement.updateFlag.flag = false;\n        needUpdate = true;\n      } else {\n        positionIndex += endIndex - beginIndex;\n      }\n    }\n\n    if (needUpdate) {\n      mesh.setPositions(globalPositions);\n      mesh.setIndices(this._indices);\n      mesh.uploadData(false);\n      mesh.subMesh.count = this._indicesCount;\n    }\n  };\n\n  _proto._growthIndexMemory = function _growthIndexMemory(length) {\n    var indices = this._indices;\n    var neededLength = this._indicesCount + length;\n\n    if (neededLength > indices.length) {\n      var maxLength = this._supportUint32Array ? 4294967295 : 65535;\n\n      if (neededLength > maxLength) {\n        throw Error(\"The vertex count is over limit.\");\n      }\n\n      var newIndices = this._supportUint32Array ? new Uint32Array(neededLength) : new Uint16Array(neededLength);\n      newIndices.set(indices);\n      this._indices = newIndices;\n    }\n  };\n\n  _proto._localTranslate = function _localTranslate(positionsOffset, offset) {\n    var localPositions = this._localPositions;\n\n    for (var i = positionsOffset; i < localPositions.length; i++) {\n      var position = localPositions[i];\n      position.add(offset);\n    }\n  };\n\n  _proto._rotateAroundX = function _rotateAroundX(positionsOffset) {\n    var localPositions = this._localPositions;\n\n    for (var i = positionsOffset; i < localPositions.length; i++) {\n      var position = localPositions[i];\n      var py = position.y;\n      var pz = position.z;\n      position.z = py;\n      position.y = -pz;\n    }\n  };\n\n  _proto._rotateAroundZ = function _rotateAroundZ(positionsOffset) {\n    var localPositions = this._localPositions;\n\n    for (var i = positionsOffset; i < localPositions.length; i++) {\n      var position = localPositions[i];\n      var px = position.x;\n      var py = position.y;\n      position.y = px;\n      position.x = -py;\n    }\n  };\n\n  return WireframeManager;\n}(Script), _class2._positionPool = [], _class2._ndcPosition = [new Vector3(-1, 1, -1), new Vector3(1, 1, -1), new Vector3(1, -1, -1), new Vector3(-1, -1, -1)], _class2._tempMatrix = new Matrix(), _class2)) || _class);\n/**\n * @internal\n * Store Wireframe element info.\n */\n\nvar WireframeElement = function WireframeElement(transform, transformRanges) {\n  this.transform = transform;\n  this.transformRanges = transformRanges;\n  this.updateFlag = void 0;\n  this.updateFlag = transform.registerWorldChangeFlag();\n};\n\nexport { WireframeManager, WireframePrimitive };\n//# sourceMappingURL=module.js.map\n","<template>\n  <div class=\"mask\">\n    <!-- <img src=\"../../../assets/33.gif\" alt=\"\" style=\"width: 100%\" /> -->\n    <div class=\"wave-progress\">\n      <div id=\"num_box\">\n        <div class=\"num_box\">\n          <div id=\"num\" style=\"font-size: 25px\">0</div>\n          <div style=\"font-size: 15px\">%</div>\n        </div>\n        <div style=\"font-size: 12px; line-height: 1.1\">加载中...</div>\n      </div>\n      <div class=\"wave\"></div>\n      <div id=\"wave-mask\"></div>\n    </div>\n    <div class=\"circle_1\">\n      <div class=\"circle_3\"></div>\n      <div class=\"circle_2\"></div>\n    </div>\n\n    <!-- <div style=\"text-align: center; color: #ffffff; font-size: 12px\">\n      正在加载资源中...\n    </div> -->\n    <div class=\"process_bar\" style=\"display: none\">\n      <!-- <div class=\"one_line url_text\">source:{{ url }}</div> -->\n      <div class=\"process_progrom\">\n        <div class=\"percent\" :style=\"{ width: barcurrentRate + '%' }\"></div>\n      </div>\n      <!-- <van-progress :percentage=\"barcurrentRate\" :show-pivot=\"false\" /> -->\n    </div>\n    <div class=\"point_group\">\n      <div v-for=\"item in [1, 2]\" :key=\"item\" class=\"item\">\n        <div\n          class=\"point\"\n          style=\"left: 27%; top: 3%; transform: scale(1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 27%; top: 3%; transform: scale(1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"left: 27%; bottom: 2%; transform: scale(1.1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 27%; bottom: 2%; transform: scale(1.3)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"left: 27%; top: 40%; transform: scale(1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 27%; top: 50%; transform: scale(1.3)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"left: 27%; top: 35%; transform: scale(1.1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 27%; top: 40%; transform: scale(0.8)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"top: 30%; left: 10%; width: 20px; height: 20px\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"top: 40%; right: 10%; width: 20px; height: 20px\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"top: 12%; left: 30%; transform: scale(0.75)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"top: 10%; right: 30%; transform: scale(0.6)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"left: 27%; bottom: 22%; transform: scale(0.7)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 17%; bottom: 24%; transform: scale(0.9)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"left: 27%; bottom: 32%; transform: scale(1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 27%; bottom: 34%; transform: scale(1.1)\"\n        ></div>\n        <div\n          class=\"point\"\n          style=\"right: 50%; top: 50%; transform: translateX(-50%) scale(1.3)\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, defineProps, onMounted } from \"vue\";\n\nconst props = defineProps({\n  url: {\n    type: String,\n  },\n  barpercent: {\n    type: Number,\n  },\n});\n\nlet barcurrentRate = ref(0);\n\nwatch(\n  () => props.barpercent,\n  (v, n) => {\n    barcurrentRate.value = n * 100;\n  }\n);\n</script>\n\n<style scoped>\n.mask {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: transparent;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #f1f4ed;\n}\n.box {\n  width: 100%;\n  height: 100%;\n}\n.process_bar {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  bottom: 30px;\n  width: 90%;\n}\n.process_progrom {\n  width: 100%;\n  height: 10px;\n  border-radius: 5px;\n  background-color: #fff;\n  position: relative;\n  overflow: hidden;\n  font-size: 10px;\n}\n.percent {\n  position: absolute;\n  left: 0;\n  height: 100%;\n  width: 0;\n  background-color: rgb(27, 101, 231);\n  transition: all 0.2s;\n}\n@keyframes spin {\n  50% {\n    transform: translate(-50%, -101%) rotate(500deg);\n  }\n  100% {\n    transform: translate(-50%, -101%) rotate(1000deg);\n  }\n}\n.wave-progress {\n  width: 100px;\n  height: 100px;\n  border-radius: 50%;\n  /* background: #ffffff; */\n  overflow: hidden;\n  position: relative;\n  z-index: 1;\n}\n.wave {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  /* background: red; */\n  background-image: linear-gradient(-180deg, #eb769a 13%, #eb769a 100%);\n  border-radius: 50%;\n  /* opacity: 0; */\n}\n#wave-mask {\n  position: absolute;\n  width: 200%;\n  height: 200%;\n  top: 100%;\n  left: 50%;\n  border-radius: 40%;\n  transform: translate(-50%, -101%) rotate(0);\n  animation: spin 15s linear infinite;\n  z-index: 0;\n  background-color: #0e3d72;\n  /* transition: all 0.2s linear; */\n}\n#num_box {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  color: #fff;\n  font-size: 18px;\n  /* line-height: 100px; */\n  font-weight: bold;\n  text-align: center;\n  z-index: 100;\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  margin-top: 3px;\n}\n.num_box {\n  display: flex;\n  justify-content: center;\n  align-items: baseline;\n}\n.point_group {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  z-index: 99999;\n}\n.item {\n  animation: slide 5s linear infinite;\n  width: 100%;\n  height: 100vh;\n}\n\n@keyframes slide {\n  0% {\n    transform: translateY(0);\n  }\n  100% {\n    transform: translateY(-100%);\n  }\n}\n.point {\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  background-color: #eb769a;\n  border-radius: 50%;\n  /* transform: translateX(-50%) translateY(-50%); */\n}\n.circle_1 {\n  width: 150px;\n  height: 150px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* background: red; */\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n}\n.circle_2 {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%);\n  border-left: 1px solid #eb769a;\n  border-top: 1px solid #eb769a;\n  /* border-right: 1px solid #fff; */\n  border-top-left-radius: 50%;\n  border-bottom-left-radius: 50%;\n  border-top-right-radius: 50%;\n  /* border-bottom-right-radius: 50%; */\n  animation: circle 5s linear infinite;\n}\n.circle_3 {\n  width: 85%;\n  height: 85%;\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translateX(-50%) translateY(-50%) rotateZ(90deg);\n  border-left: 1px solid #eb769a;\n  border-top: 1px solid #eb769a;\n  /* border-right: 1px solid #fff; */\n  border-top-left-radius: 50%;\n  border-bottom-left-radius: 50%;\n  border-top-right-radius: 50%;\n  /* border-bottom-right-radius: 50%; */\n  animation: circle2 3s linear infinite;\n}\n@keyframes circle {\n  0% {\n    transform: translateX(-50%) translateY(-50%) rotateZ(0);\n  }\n  100% {\n    transform: translateX(-50%) translateY(-50%) rotateZ(360deg);\n  }\n}\n@keyframes circle2 {\n  0% {\n    transform: translateX(-50%) translateY(-50%) rotateZ(30deg);\n  }\n  100% {\n    transform: translateX(-50%) translateY(-50%) rotateZ(360deg);\n  }\n}\n</style>\n","import {\n  AssetType,\n  Camera,\n  Color,\n  Component,\n  DirectLight,\n  Engine,\n  Entity,\n  ParticleRenderer,\n  ParticleRendererBlendMode,\n  Scene,\n  SceneManager,\n  Script,\n  Texture2D,\n  Vector3,\n  WebGLEngine,\n} from \"oasis-engine\";\nimport { WireframeManager } from \"@oasis-engine-toolkit/auxiliary-lines\";\nimport { createApp, h, getCurrentInstance } from \"vue\";\nimport LoadingComponent from \"../components/loading.vue\";\nimport LoadingComponentProcess from \"../components/process-bar.vue\";\nexport default class ScencePro {\n  engine: WebGLEngine | Engine | null = null;\n  rootEntity: Entity | null = null;\n  scence: Scene;\n  camera: Entity;\n  wireframe: WireframeManager = null;\n  loadScence: LoadScence;\n  loadingEntity: Component;\n  particle: Entity;\n\n  constructor(sceneManager: SceneManager, engine: Engine, scenceName: string) {\n    this.scence = new Scene(sceneManager.engine);\n    this.engine = engine;\n    this.rootEntity = this.scence.createRootEntity(scenceName);\n\n    this.loadScence = LoadScence.getInstance(sceneManager);\n    this.loadScence.addScence(scenceName, this.scence);\n\n    this.wireframe = this.rootEntity.addComponent(WireframeManager);\n  }\n  loading() {\n    this.loadingEntity = this.rootEntity.addComponent(Particle);\n    if (this.particle) {\n      this.rootEntity.addChild(this.particle);\n    }\n  }\n  hidden() {\n    if (this.loadingEntity) {\n      // this.loadingEntity.destroy();\n      this.particle = this.rootEntity.findByName(\"particle\");\n      console.log(this.particle);\n      this.rootEntity.removeChild(this.rootEntity.findByName(\"particle\"));\n    }\n  }\n  addInstance<T>(instanceName: string, instance: T) {\n    this.loadScence.addInstance(instanceName, instance);\n  }\n  async loadSource(list, callBack?: (per: number) => void) {\n    let div = document.createElement(\"div\");\n    div.setAttribute(\"loading\", \"1\");\n    document.body.append(div);\n    const app = createApp({\n      name: \"root\",\n      data() {\n        return {\n          progress: 0,\n        };\n      },\n      render() {\n        return h(LoadingComponentProcess, {\n          percent: this.progress,\n        });\n      },\n    });\n    let loading = 0;\n    app.mount(div);\n    return await this.engine.resourceManager\n      .load(list)\n      .onProgress((progress: number) => {\n        // loading.setVal(progress);\n        // console.log(`当前加载进度为 ${progress}`);\n\n        // if (app._instance?.data) {\n        //   app._instance.data.progress = progress;\n        // }\n        let dom = document.querySelector(\".percent\") as HTMLElement;\n        // let urlDom = document.querySelector(\".url_text\") as HTMLElement;\n\n        let numEle = document.getElementById(\"num\") as HTMLElement;\n        let maskEle = document.getElementById(\"wave-mask\") as HTMLElement;\n\n        if (dom) {\n          dom.style.width = progress * 100 + \"%\";\n          console.log(`当前加载进度为 ${progress}`);\n          numEle.innerHTML = progress * 100 + \"\";\n          maskEle.style.top = 100 - progress * 100 + \"%\";\n          if (progress > 0) {\n            maskEle.style.opacity = \"1\";\n          }\n        }\n        // if (urlDom) {\n        //   urlDom.textContent = \"source:\" + url;\n        // }\n        if (callBack) {\n          callBack(progress);\n        }\n\n        if (progress == 1) {\n          app.unmount();\n          // document.body.removeChild(div);\n        }\n      });\n  }\n}\nexport interface IInit {\n  initCamera: () => void;\n  initLight: () => void;\n}\n\nexport class Particle extends Script {\n  particles: ParticleRenderer;\n  spriteSheet = [\n    {\n      x: 0,\n      y: 0,\n      w: 100,\n      h: 95,\n      offX: 0,\n      offY: 0,\n      sourceW: 100,\n      sourceH: 95,\n    },\n    {\n      x: 100,\n      y: 0,\n      w: 48,\n      h: 46,\n      offX: 0,\n      offY: 0,\n      sourceW: 48,\n      sourceH: 46,\n    },\n    {\n      x: 148,\n      y: 0,\n      w: 97,\n      h: 90,\n      offX: 0,\n      offY: 0,\n      sourceW: 97,\n      sourceH: 90,\n    },\n    {\n      x: 245,\n      y: 0,\n      w: 148,\n      h: 128,\n      offX: 0,\n      offY: 0,\n      sourceW: 148,\n      sourceH: 128,\n    },\n    {\n      x: 393,\n      y: 0,\n      w: 118,\n      h: 249,\n      offX: 0,\n      offY: 0,\n      sourceW: 118,\n      sourceH: 249,\n    },\n    {\n      x: 100,\n      y: 90,\n      w: 124,\n      h: 94,\n      offX: 0,\n      offY: 0,\n      sourceW: 124,\n      sourceH: 94,\n    },\n    {\n      x: 0,\n      y: 184,\n      w: 249,\n      h: 185,\n      offX: 0,\n      offY: 0,\n      sourceW: 249,\n      sourceH: 185,\n    },\n    {\n      x: 0,\n      y: 95,\n      w: 86,\n      h: 83,\n      offX: 0,\n      offY: 0,\n      sourceW: 86,\n      sourceH: 83,\n    },\n  ];\n\n  onStart() {\n    const particleEntity = this.entity.createChild(\"particle\");\n    this.particles = particleEntity.addComponent(ParticleRenderer);\n\n    let particles = this.particles;\n\n    this.engine.resourceManager\n      .load<Texture2D>({\n        url: \"https://gw.alipayobjects.com/mdn/rms_d27172/afts/img/A*kxloQYq2YDEAAAAAAAAAAAAAARQnAQ\",\n        // url: \"https://gw.alipayobjects.com/mdn/rms_d27172/afts/img/A*_oorR5SrpXcAAAAAAAAAAAAAARQnAQ\",\n        type: AssetType.Texture2D,\n      })\n      .then((resource) => {\n        particles.maxCount = 500;\n        particles.startTimeRandomness = 5;\n        particles.position = new Vector3(0, 0, 0);\n        particles.positionRandomness = new Vector3(0.5, 0, 0.5);\n        particles.velocity = new Vector3(0, 20, 0);\n        particles.velocityRandomness = new Vector3(5, 20, 5);\n        particles.acceleration = new Vector3(0, -10, 0);\n        particles.accelerationRandomness = new Vector3(2, 4, 5);\n        particles.rotateVelocity = 1;\n        particles.rotateVelocityRandomness = 1;\n        particles.size = 0.1;\n        // particles.sizeRandomness = 1;\n        // particles.color = new Color(0.5, 0.5, 0.5);\n        // particles.colorRandomness = 1;\n        // particles.isFadeIn = true;\n        // particles.isFadeOut = true;\n        particles.texture = resource;\n        // particles.spriteSheet = this.spriteSheet;\n        // particles.blendMode = ParticleRendererBlendMode.Transparent;\n        particles.start();\n      });\n  }\n}\n\nexport class LoadScence {\n  private static instance: LoadScence;\n  private sceneManager: SceneManager = null;\n  private constructor(sceneManager: SceneManager) {\n    this.sceneManager = sceneManager;\n  }\n  scenceMap: { scenceName: string; scence: Scene } | Object = {};\n  instanceMap: { instanceName: string; instance: any } | Object = {};\n\n  addScence(scenceName: string, scence: Scene) {\n    this.scenceMap[scenceName] = scence;\n  }\n  addInstance<T>(instanceName: string, instance: T) {\n    this.instanceMap[instanceName] = instance as T;\n  }\n  toScence(scenceName: string) {\n    // this.sceneManager.activeScene = this.scenceMap[scenceName];\n    for (let key in this.scenceMap) {\n      this.scenceMap[key].isActive = false;\n    }\n    this.scenceMap[scenceName].isActive = true;\n    this.sceneManager.activeScene = this.scenceMap[scenceName];\n    if (this.instanceMap[scenceName]) {\n      this.instanceMap[scenceName].loadSrc();\n    }\n  }\n  public static getInstance(sceneManager?: SceneManager) {\n    if (!LoadScence.instance) {\n      LoadScence.instance = new LoadScence(sceneManager);\n    }\n\n    return LoadScence.instance;\n  }\n}\n","import { MathUtil, Vector3, Script, Keys, PointerButton, Vector2, Camera } from 'oasis-engine';\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nvar ESP$1 = MathUtil.zeroTolerance; // Spherical.\n\nvar Spherical = /*#__PURE__*/function () {\n  function Spherical(radius, phi, theta) {\n    this.radius = radius;\n    this.phi = phi;\n    this.theta = theta;\n    this.radius = radius !== undefined ? radius : 1.0;\n    this.phi = phi !== undefined ? phi : 0;\n    this.theta = theta !== undefined ? theta : 0;\n  }\n\n  var _proto = Spherical.prototype;\n\n  _proto.set = function set(radius, phi, theta) {\n    this.radius = radius;\n    this.phi = phi;\n    this.theta = theta;\n    return this;\n  };\n\n  _proto.makeSafe = function makeSafe() {\n    this.phi = MathUtil.clamp(this.phi, ESP$1, Math.PI - ESP$1);\n    return this;\n  };\n\n  _proto.setFromVec3 = function setFromVec3(value) {\n    this.radius = value.length();\n\n    if (this.radius === 0) {\n      this.theta = 0;\n      this.phi = 0;\n    } else {\n      this.theta = Math.atan2(value.x, value.z);\n      this.phi = Math.acos(MathUtil.clamp(value.y / this.radius, -1, 1));\n    }\n\n    return this;\n  };\n\n  _proto.setToVec3 = function setToVec3(value) {\n    var radius = this.radius,\n        phi = this.phi,\n        theta = this.theta;\n    var sinPhiRadius = Math.sin(phi) * radius;\n    value.set(sinPhiRadius * Math.sin(theta), radius * Math.cos(phi), sinPhiRadius * Math.cos(theta));\n    return this;\n  };\n\n  return Spherical;\n}();\n\nvar ESP = MathUtil.zeroTolerance;\n\nfunction includes(array) {\n  for (var _len = arguments.length, filterArray = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    filterArray[_key - 1] = arguments[_key];\n  }\n\n  return filterArray.some(function (e) {\n    return array.indexOf(e) !== -1;\n  });\n}\n/**\n * The camera's roaming controller, can move up and down, left and right, and rotate the viewing angle.\n */\n\n\nvar FreeControl = /*#__PURE__*/function (_Script) {\n  _inheritsLoose(FreeControl, _Script);\n\n  /**\n   * Movement distance per second, the unit is the unit before MVP conversion.\n   */\n\n  /**\n   * Rotate speed.\n   */\n\n  /**\n   * Simulate a ground.\n   */\n\n  /**\n   * Simulated ground height.\n   */\n\n  /**\n   * Only rotate when press=true\n   */\n\n  /**\n   * Radian of spherical.theta.\n   */\n\n  /**\n   * Radian of spherical.phi.\n   */\n  function FreeControl(entity) {\n    var _this;\n\n    _this = _Script.call(this, entity) || this;\n    _this._forward = new Vector3();\n    _this._right = new Vector3();\n    _this.camera = void 0;\n    _this.mainElement = void 0;\n    _this.domElement = void 0;\n    _this.movementSpeed = void 0;\n    _this.rotateSpeed = void 0;\n    _this.floorMock = void 0;\n    _this.floorY = void 0;\n    _this.press = void 0;\n    _this.keysForward = void 0;\n    _this.keysBackward = void 0;\n    _this.keysLeft = void 0;\n    _this.keysRight = void 0;\n    _this._theta = void 0;\n    _this._phi = void 0;\n    _this._moveForward = void 0;\n    _this._moveBackward = void 0;\n    _this._moveLeft = void 0;\n    _this._moveRight = void 0;\n    _this._v3Cache = void 0;\n    _this._spherical = void 0;\n    _this._rotateOri = void 0;\n    _this._events = void 0;\n    _this.camera = entity; // @ts-ignore\n    // @todo In the future, the dependence on html elements will be removed and realized through the input of the packaging engine.\n\n    _this.mainElement = _this.engine.canvas._webCanvas;\n    _this.domElement = document;\n    _this.movementSpeed = 1.0;\n    _this.rotateSpeed = 1.0;\n    _this.floorMock = true;\n    _this.floorY = 0;\n    _this.press = false;\n    _this.keysForward = [\"KeyW\", \"ArrowUp\"];\n    _this.keysBackward = [\"KeyS\", \"ArrowDown\"];\n    _this.keysLeft = [\"KeyA\", \"ArrowLeft\"];\n    _this.keysRight = [\"KeyD\", \"ArrowRight\"];\n    _this._theta = 0;\n    _this._phi = 0; // private variables\n\n    _this._moveForward = false;\n    _this._moveBackward = false;\n    _this._moveLeft = false;\n    _this._moveRight = false;\n    _this._v3Cache = new Vector3();\n    _this._spherical = new Spherical();\n    _this._rotateOri = [0, 0];\n    _this._events = [{\n      type: \"mousemove\",\n      listener: _this.onMouseMove.bind(_assertThisInitialized(_this))\n    }, {\n      type: \"touchmove\",\n      listener: _this.onMouseMove.bind(_assertThisInitialized(_this))\n    }, {\n      type: \"mousedown\",\n      listener: _this.onMouseDown.bind(_assertThisInitialized(_this))\n    }, {\n      type: \"touchstart\",\n      listener: _this.onMouseDown.bind(_assertThisInitialized(_this))\n    }, {\n      type: \"mouseup\",\n      listener: _this.onMouseUp.bind(_assertThisInitialized(_this))\n    }, {\n      type: \"touchend\",\n      listener: _this.onMouseUp.bind(_assertThisInitialized(_this))\n    }, {\n      type: \"keydown\",\n      listener: _this.onKeyDown.bind(_assertThisInitialized(_this)),\n      element: window\n    }, {\n      type: \"keyup\",\n      listener: _this.onKeyUp.bind(_assertThisInitialized(_this)),\n      element: window\n    }, {\n      type: \"contextmenu\",\n      listener: _this.onContextMenu.bind(_assertThisInitialized(_this))\n    }];\n\n    _this.initEvents(); // init spherical\n\n\n    _this.updateSpherical();\n\n    return _this;\n  }\n  /**\n   * Browser right click event.\n   */\n\n\n  var _proto = FreeControl.prototype;\n\n  _proto.onContextMenu = function onContextMenu(event) {\n    event.preventDefault();\n  }\n  /**\n   * Keyboard press event.\n   */\n  ;\n\n  _proto.onKeyDown = function onKeyDown(event) {\n    var code = event.code,\n        key = event.key,\n        keyCode = event.keyCode;\n\n    if (includes(this.keysForward, code, key, keyCode)) {\n      this._moveForward = true;\n    } else if (includes(this.keysBackward, code, key, keyCode)) {\n      this._moveBackward = true;\n    } else if (includes(this.keysLeft, code, key, keyCode)) {\n      this._moveLeft = true;\n    } else if (includes(this.keysRight, code, key, keyCode)) {\n      this._moveRight = true;\n    }\n  }\n  /**\n   * Keyboard up event.\n   */\n  ;\n\n  _proto.onKeyUp = function onKeyUp(event) {\n    var code = event.code,\n        key = event.key,\n        keyCode = event.keyCode;\n\n    if (includes(this.keysForward, code, key, keyCode)) {\n      this._moveForward = false;\n    } else if (includes(this.keysBackward, code, key, keyCode)) {\n      this._moveBackward = false;\n    } else if (includes(this.keysLeft, code, key, keyCode)) {\n      this._moveLeft = false;\n    } else if (includes(this.keysRight, code, key, keyCode)) {\n      this._moveRight = false;\n    }\n  }\n  /**\n   * Mouse press event.\n   */\n  ;\n\n  _proto.onMouseDown = function onMouseDown(event) {\n    event.stopPropagation();\n    event = event.changedTouches && event.changedTouches[0] || event;\n\n    if (this.domElement !== document) {\n      this.domElement.focus();\n    }\n\n    this.press = true;\n    this._rotateOri = [event.clientX, event.clientY];\n  }\n  /**\n   * Mouse up event.\n   */\n  ;\n\n  _proto.onMouseUp = function onMouseUp(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.press = false;\n  }\n  /**\n   * Mouse movement event.\n   */\n  ;\n\n  _proto.onMouseMove = function onMouseMove(event) {\n    if (this.press === false) return;\n    if (this.enabled === false) return;\n    event.preventDefault();\n    event.stopPropagation();\n    event = event.changedTouches && event.changedTouches[0] || event;\n    var movementX = event.clientX - this._rotateOri[0];\n    var movementY = event.clientY - this._rotateOri[1];\n    this._rotateOri[0] = event.clientX;\n    this._rotateOri[1] = event.clientY;\n    var factorX = 180 / this.mainElement.width;\n    var factorY = 180 / this.mainElement.height;\n    var actualX = movementX * factorX;\n    var actualY = movementY * factorY;\n    this.rotate(-actualX, actualY);\n  }\n  /**\n   * The angle of rotation around the y axis and the x axis respectively.\n   * @param alpha - Radian to rotate around the y axis\n   * @param beta - Radian to rotate around the x axis\n   */\n  ;\n\n  _proto.rotate = function rotate(alpha, beta) {\n    if (alpha === void 0) {\n      alpha = 0;\n    }\n\n    if (beta === void 0) {\n      beta = 0;\n    }\n\n    this._theta += MathUtil.degreeToRadian(alpha);\n    this._phi += MathUtil.degreeToRadian(beta);\n    this._phi = MathUtil.clamp(this._phi, ESP, Math.PI - ESP);\n    this._spherical.theta = this._theta;\n    this._spherical.phi = this._phi;\n\n    this._spherical.setToVec3(this._v3Cache);\n\n    Vector3.add(this.camera.transform.position, this._v3Cache, this._v3Cache);\n    this.camera.transform.lookAt(this._v3Cache, new Vector3(0, 1, 0));\n  };\n\n  _proto.onUpdate = function onUpdate(delta) {\n    if (this.enabled === false) return;\n    var actualMoveSpeed = delta / 1000 * this.movementSpeed;\n    this.camera.transform.getWorldForward(this._forward);\n    this.camera.transform.getWorldRight(this._right);\n\n    if (this._moveForward) {\n      this.camera.transform.translate(this._forward.scale(actualMoveSpeed), false);\n    }\n\n    if (this._moveBackward) {\n      this.camera.transform.translate(this._forward.scale(-actualMoveSpeed), false);\n    }\n\n    if (this._moveLeft) {\n      this.camera.transform.translate(this._right.scale(-actualMoveSpeed), false);\n    }\n\n    if (this._moveRight) {\n      this.camera.transform.translate(this._right.scale(actualMoveSpeed), false);\n    }\n\n    if (this.floorMock) {\n      var position = this.camera.transform.position;\n\n      if (position.y !== this.floorY) {\n        this.camera.transform.setPosition(position.x, this.floorY, position.z);\n      }\n    }\n  }\n  /**\n   * Register browser events.\n   */\n  ;\n\n  _proto.initEvents = function initEvents() {\n    var _this2 = this;\n\n    this._events.forEach(function (ele) {\n      if (ele.element) {\n        ele.element.addEventListener(ele.type, ele.listener, false);\n      } else {\n        _this2.mainElement.addEventListener(ele.type, ele.listener, false);\n      }\n    });\n  };\n\n  _proto.onDestroy = function onDestroy() {\n    var _this3 = this;\n\n    this._events.forEach(function (ele) {\n      if (ele.element) {\n        ele.element.removeEventListener(ele.type, ele.listener, false);\n      } else {\n        _this3.mainElement.removeEventListener(ele.type, ele.listener, false);\n      }\n    });\n  }\n  /**\n   * must updateSpherical after quaternion has been changed\n   * @example\n   * Entity#lookAt([0,1,0],[0,1,0]);\n   * AFreeControls#updateSpherical();\n   */\n  ;\n\n  _proto.updateSpherical = function updateSpherical() {\n    this._v3Cache.set(0, 0, -1);\n\n    Vector3.transformByQuat(this._v3Cache, this.camera.transform.rotationQuaternion, this._v3Cache);\n\n    this._spherical.setFromVec3(this._v3Cache);\n\n    this._theta = this._spherical.theta;\n    this._phi = this._spherical.phi;\n  };\n\n  return FreeControl;\n}(Script);\n\nvar ControlHandlerType;\n\n(function (ControlHandlerType) {\n  ControlHandlerType[ControlHandlerType[\"None\"] = 0] = \"None\";\n  ControlHandlerType[ControlHandlerType[\"ROTATE\"] = 1] = \"ROTATE\";\n  ControlHandlerType[ControlHandlerType[\"ZOOM\"] = 2] = \"ZOOM\";\n  ControlHandlerType[ControlHandlerType[\"PAN\"] = 4] = \"PAN\";\n  ControlHandlerType[ControlHandlerType[\"All\"] = 7] = \"All\";\n})(ControlHandlerType || (ControlHandlerType = {}));\n\n/**\n *  Static interface implement decorator.\n *  https://stackoverflow.com/questions/13955157/how-to-define-static-property-in-typescript-interface\n */\nfunction StaticInterfaceImplement() {\n  return function (constructor) {\n  };\n}\n\nvar _dec$2, _class$2;\nvar ControlKeyboard = (_dec$2 = StaticInterfaceImplement(), _dec$2(_class$2 = /*#__PURE__*/function () {\n  function ControlKeyboard() {}\n\n  ControlKeyboard.onUpdateHandler = function onUpdateHandler(input) {\n    if (input.isKeyHeldDown(Keys.ArrowLeft) || input.isKeyHeldDown(Keys.ArrowRight) || input.isKeyHeldDown(Keys.ArrowUp) || input.isKeyHeldDown(Keys.ArrowDown)) {\n      return ControlHandlerType.PAN;\n    } else {\n      return ControlHandlerType.None;\n    }\n  };\n\n  ControlKeyboard.onUpdateDelta = function onUpdateDelta(control, outDelta) {\n    var keyPanSpeed = control.keyPanSpeed,\n        input = control.input;\n    outDelta.x = outDelta.y = 0;\n\n    if (input.isKeyHeldDown(Keys.ArrowLeft)) {\n      outDelta.x += keyPanSpeed;\n    }\n\n    if (input.isKeyHeldDown(Keys.ArrowRight)) {\n      outDelta.x -= keyPanSpeed;\n    }\n\n    if (input.isKeyHeldDown(Keys.ArrowUp)) {\n      outDelta.y += keyPanSpeed;\n    }\n\n    if (input.isKeyHeldDown(Keys.ArrowDown)) {\n      outDelta.y -= keyPanSpeed;\n    }\n  };\n\n  return ControlKeyboard;\n}()) || _class$2);\n\nvar _dec$1, _class$1, _class2;\nvar DeltaType;\n\n(function (DeltaType) {\n  DeltaType[DeltaType[\"Moving\"] = 0] = \"Moving\";\n  DeltaType[DeltaType[\"Distance\"] = 1] = \"Distance\";\n})(DeltaType || (DeltaType = {}));\n\nvar ControlPointer = (_dec$1 = StaticInterfaceImplement(), _dec$1(_class$1 = (_class2 = /*#__PURE__*/function () {\n  function ControlPointer() {}\n\n  ControlPointer.onUpdateHandler = function onUpdateHandler(input) {\n    ++this._frameIndex;\n    var pointers = input.pointers;\n\n    switch (pointers.length) {\n      case 1:\n        if (input.isPointerHeldDown(PointerButton.Secondary)) {\n          this._updateType(ControlHandlerType.PAN, DeltaType.Moving);\n        } else if (input.isPointerHeldDown(PointerButton.Auxiliary)) {\n          this._updateType(ControlHandlerType.ZOOM, DeltaType.Moving);\n        } else if (input.isPointerHeldDown(PointerButton.Primary)) {\n          this._updateType(ControlHandlerType.ROTATE, DeltaType.Moving);\n        } else {\n          this._updateType(ControlHandlerType.None, DeltaType.Moving);\n        }\n\n        break;\n\n      case 2:\n        this._updateType(ControlHandlerType.ZOOM, DeltaType.Distance);\n\n        break;\n\n      case 3:\n        this._updateType(ControlHandlerType.PAN, DeltaType.Moving);\n\n        break;\n\n      default:\n        this._updateType(ControlHandlerType.None, DeltaType.Moving);\n\n        break;\n    }\n\n    return this._handlerType;\n  };\n\n  ControlPointer.onUpdateDelta = function onUpdateDelta(control, outDelta) {\n    var frameIndex = this._frameIndex;\n\n    switch (this._deltaType) {\n      case DeltaType.Moving:\n        if (this._lastUsefulFrameIndex === frameIndex - 1) {\n          var pointerMovingDelta = control.input.pointerMovingDelta;\n          outDelta.x = pointerMovingDelta.x;\n          outDelta.y = pointerMovingDelta.y;\n        } else {\n          outDelta.x = 0;\n          outDelta.y = 0;\n        }\n\n        break;\n\n      case DeltaType.Distance:\n        var pointers = control.input.pointers;\n        var pointer1 = pointers[0];\n        var pointer2 = pointers[1];\n        var curDistance = Vector2.distance(pointer1.position, pointer2.position);\n\n        if (this._lastUsefulFrameIndex === frameIndex - 1) {\n          outDelta.set(0, this._distanceOfPointers - curDistance, 0);\n        } else {\n          outDelta.set(0, 0, 0);\n        }\n\n        this._distanceOfPointers = curDistance;\n        break;\n    }\n\n    this._lastUsefulFrameIndex = frameIndex;\n  };\n\n  ControlPointer._updateType = function _updateType(handlerType, deltaType) {\n    if (this._handlerType !== handlerType || this._deltaType !== deltaType) {\n      this._handlerType = handlerType;\n      this._deltaType = deltaType;\n      this._lastUsefulFrameIndex = -1;\n    }\n  };\n\n  return ControlPointer;\n}(), _class2._deltaType = DeltaType.Moving, _class2._handlerType = ControlHandlerType.None, _class2._frameIndex = 0, _class2._lastUsefulFrameIndex = -1, _class2._distanceOfPointers = 0, _class2)) || _class$1);\n\nvar _dec, _class;\nvar ControlWheel = (_dec = StaticInterfaceImplement(), _dec(_class = /*#__PURE__*/function () {\n  function ControlWheel() {}\n\n  ControlWheel.onUpdateHandler = function onUpdateHandler(input) {\n    var wheelDelta = input.wheelDelta;\n\n    if (wheelDelta.x === 0 && wheelDelta.y === 0 && wheelDelta.z === 0) {\n      return ControlHandlerType.None;\n    } else {\n      return ControlHandlerType.ZOOM;\n    }\n  };\n\n  ControlWheel.onUpdateDelta = function onUpdateDelta(control, outDelta) {\n    outDelta.copyFrom(control.input.wheelDelta);\n  };\n\n  return ControlWheel;\n}()) || _class);\n\n/**\n * The camera's track controller, can rotate, zoom, pan, support mouse and touch events.\n */\n\nvar OrbitControl = /*#__PURE__*/function (_Script) {\n  _inheritsLoose(OrbitControl, _Script);\n\n  function OrbitControl() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Script.call.apply(_Script, [this].concat(args)) || this;\n    _this.canvas = void 0;\n    _this.input = void 0;\n    _this.inputDevices = [ControlKeyboard, ControlPointer, ControlWheel];\n    _this.camera = void 0;\n    _this.cameraTransform = void 0;\n    _this.target = new Vector3();\n    _this.up = new Vector3(0, 1, 0);\n    _this.autoRotate = false;\n    _this.autoRotateSpeed = Math.PI;\n    _this.enableKeys = false;\n    _this.enableDamping = true;\n    _this.rotateSpeed = 1.0;\n    _this.zoomSpeed = 1.0;\n    _this.keyPanSpeed = 7.0;\n    _this.dampingFactor = 0.1;\n    _this.zoomFactor = 0.2;\n    _this.minDistance = 0.1;\n    _this.maxDistance = Infinity;\n    _this.minZoom = 0.0;\n    _this.maxZoom = Infinity;\n    _this.minPolarAngle = 0.0;\n    _this.maxPolarAngle = Math.PI;\n    _this.minAzimuthAngle = -Infinity;\n    _this.maxAzimuthAngle = Infinity;\n    _this._spherical = new Spherical();\n    _this._sphericalDelta = new Spherical();\n    _this._sphericalDump = new Spherical();\n    _this._zoomFrag = 0;\n    _this._scale = 1;\n    _this._panOffset = new Vector3();\n    _this._tempVec3 = new Vector3();\n    _this._enableHandler = ControlHandlerType.All;\n    return _this;\n  }\n\n  var _proto = OrbitControl.prototype;\n\n  _proto.onAwake = function onAwake() {\n    var engine = this.engine,\n        entity = this.entity;\n    this.canvas = engine.canvas;\n    this.input = engine.inputManager;\n    this.camera = entity.getComponent(Camera);\n    this.cameraTransform = entity.transform;\n  };\n\n  _proto.onUpdate = function onUpdate(deltaTime) {\n    /** Update this._sphericalDelta, this._scale and this._panOffset. */\n    this._updateInputDelta(deltaTime);\n    /** Update camera's transform. */\n\n\n    this._updateTransform();\n  };\n\n  _proto._updateInputDelta = function _updateInputDelta(deltaTime) {\n    var curHandlerType = ControlHandlerType.None;\n    var delta = this._tempVec3,\n        enableHandler = this._enableHandler;\n    var inputDevices = this.inputDevices,\n        input = this.input;\n\n    for (var i = inputDevices.length - 1; i >= 0; i--) {\n      var handler = inputDevices[i];\n      var handlerType = handler.onUpdateHandler(input);\n\n      if (handlerType & enableHandler) {\n        curHandlerType |= handlerType;\n        handler.onUpdateDelta(this, delta);\n\n        switch (handlerType) {\n          case ControlHandlerType.ROTATE:\n            this._rotate(delta);\n\n            break;\n\n          case ControlHandlerType.ZOOM:\n            this._zoom(delta);\n\n            break;\n\n          case ControlHandlerType.PAN:\n            this._pan(delta);\n\n            break;\n        }\n      }\n    }\n\n    var _sphericalDump = this._sphericalDump,\n        _sphericalDelta = this._sphericalDelta;\n\n    if (this.autoRotate) {\n      var rotateAngle = this.autoRotateSpeed / 1000 * deltaTime;\n      this._sphericalDelta.theta -= rotateAngle;\n    }\n\n    if (this.enableDamping) {\n      if (enableHandler & ControlHandlerType.ZOOM && curHandlerType ^ ControlHandlerType.ZOOM) {\n        this._zoomFrag *= 1 - this.zoomFactor;\n      }\n\n      if (enableHandler & ControlHandlerType.ROTATE && curHandlerType ^ ControlHandlerType.ROTATE) {\n        _sphericalDelta.theta = _sphericalDump.theta *= 1 - this.dampingFactor;\n        _sphericalDelta.phi = _sphericalDump.phi *= 1 - this.dampingFactor;\n      }\n    }\n  };\n\n  _proto._rotate = function _rotate(delta) {\n    var radianLeft = 2 * Math.PI * delta.x / this.canvas.width * this.rotateSpeed;\n    this._sphericalDelta.theta -= radianLeft;\n    var radianUp = 2 * Math.PI * delta.y / this.canvas.height * this.rotateSpeed;\n    this._sphericalDelta.phi -= radianUp;\n\n    if (this.enableDamping) {\n      this._sphericalDump.theta = -radianLeft;\n      this._sphericalDump.phi = -radianUp;\n    }\n  };\n\n  _proto._zoom = function _zoom(delta) {\n    if (delta.y > 0) {\n      this._scale /= Math.pow(0.95, this.zoomSpeed);\n    } else if (delta.y < 0) {\n      this._scale *= Math.pow(0.95, this.zoomSpeed);\n    }\n  };\n\n  _proto._pan = function _pan(delta) {\n    var cameraTransform = this.cameraTransform;\n    var elements = cameraTransform.worldMatrix.elements;\n    var height = this.canvas.height;\n    var targetDistance = Vector3.distance(cameraTransform.position, this.target) * (this.camera.fieldOfView / 2) * (Math.PI / 180);\n    var distanceLeft = -2 * delta.x * (targetDistance / height);\n    var distanceUp = 2 * delta.y * (targetDistance / height);\n    this._panOffset.x += elements[0] * distanceLeft + elements[4] * distanceUp;\n    this._panOffset.y += elements[1] * distanceLeft + elements[5] * distanceUp;\n    this._panOffset.z += elements[2] * distanceLeft + elements[6] * distanceUp;\n  };\n\n  _proto._updateTransform = function _updateTransform() {\n    var cameraTransform = this.cameraTransform,\n        target = this.target,\n        _tempVec3 = this._tempVec3,\n        _spherical = this._spherical,\n        _sphericalDelta = this._sphericalDelta,\n        _panOffset = this._panOffset;\n    Vector3.subtract(cameraTransform.position, target, _tempVec3);\n\n    _spherical.setFromVec3(_tempVec3);\n\n    _spherical.theta += _sphericalDelta.theta;\n    _spherical.phi += _sphericalDelta.phi;\n    _spherical.theta = Math.max(this.minAzimuthAngle, Math.min(this.maxAzimuthAngle, _spherical.theta));\n    _spherical.phi = Math.max(this.minPolarAngle, Math.min(this.maxPolarAngle, _spherical.phi));\n\n    _spherical.makeSafe();\n\n    if (this._scale !== 1) {\n      this._zoomFrag = _spherical.radius * (this._scale - 1);\n    }\n\n    _spherical.radius += this._zoomFrag;\n    _spherical.radius = Math.max(this.minDistance, Math.min(this.maxDistance, _spherical.radius));\n\n    _spherical.setToVec3(_tempVec3);\n\n    Vector3.add(target.add(_panOffset), _tempVec3, cameraTransform.position);\n    cameraTransform.lookAt(target, this.up);\n    /** Reset cache value. */\n\n    this._zoomFrag = 0;\n    this._scale = 1;\n\n    _sphericalDelta.set(0, 0, 0);\n\n    _panOffset.set(0, 0, 0);\n  };\n\n  _createClass(OrbitControl, [{\n    key: \"enableRotate\",\n    get:\n    /**\n     *  Return Whether to enable rotation, the default is true.\n     */\n    function get() {\n      return (this._enableHandler & ControlHandlerType.ROTATE) !== 0;\n    },\n    set: function set(value) {\n      if (value) {\n        this._enableHandler |= ControlHandlerType.ROTATE;\n      } else {\n        this._enableHandler &= ~ControlHandlerType.ROTATE;\n      }\n    }\n    /**\n     *  Whether to enable camera damping, the default is true.\n     */\n\n  }, {\n    key: \"enableZoom\",\n    get: function get() {\n      return (this._enableHandler & ControlHandlerType.ZOOM) !== 0;\n    },\n    set: function set(value) {\n      if (value) {\n        this._enableHandler |= ControlHandlerType.ZOOM;\n      } else {\n        this._enableHandler &= ~ControlHandlerType.ZOOM;\n      }\n    }\n    /**\n     *  Whether to enable translation, the default is true.\n     */\n\n  }, {\n    key: \"enablePan\",\n    get: function get() {\n      return (this._enableHandler & ControlHandlerType.PAN) !== 0;\n    },\n    set: function set(value) {\n      if (value) {\n        this._enableHandler |= ControlHandlerType.PAN;\n      } else {\n        this._enableHandler &= ~ControlHandlerType.PAN;\n      }\n    }\n  }]);\n\n  return OrbitControl;\n}(Script);\n\n/**\n * The camera's track controller, can rotate, zoom, pan, support mouse and touch events.\n */\n\nvar OrthoControl = /*#__PURE__*/function (_Script) {\n  _inheritsLoose(OrthoControl, _Script);\n\n  function OrthoControl(entity) {\n    var _this;\n\n    _this = _Script.call(this, entity) || this;\n    _this.canvas = void 0;\n    _this.input = void 0;\n    _this.inputDevices = [ControlKeyboard, ControlPointer, ControlWheel];\n    _this.camera = void 0;\n    _this.cameraTransform = void 0;\n    _this.target = new Vector3();\n    _this.up = new Vector3(0, 1, 0);\n    _this.autoRotate = false;\n    _this.autoRotateSpeed = Math.PI;\n    _this.enableKeys = false;\n    _this.enableDamping = true;\n    _this.rotateSpeed = 1.0;\n    _this.zoomSpeed = 1.0;\n    _this.keyPanSpeed = 7.0;\n    _this.dampingFactor = 0.1;\n    _this.zoomFactor = 0.2;\n    _this.minDistance = 0.1;\n    _this.maxDistance = Infinity;\n    _this.minZoom = 0.0;\n    _this.maxZoom = Infinity;\n    _this.minPolarAngle = 0.0;\n    _this.maxPolarAngle = Math.PI;\n    _this.minAzimuthAngle = -Infinity;\n    _this.maxAzimuthAngle = Infinity;\n    _this._zoomScaleUnit = 25;\n    _this._scale = 1;\n    _this._panOffset = new Vector3();\n    _this._tempVec3 = new Vector3();\n    _this._enableHandler = ControlHandlerType.All;\n    _this.enableRotate = false;\n    return _this;\n  }\n\n  var _proto = OrthoControl.prototype;\n\n  _proto.onAwake = function onAwake() {\n    var engine = this.engine,\n        entity = this.entity;\n    this.canvas = engine.canvas;\n    this.input = engine.inputManager;\n    this.camera = entity.getComponent(Camera);\n    this.cameraTransform = entity.transform;\n  };\n\n  _proto.onUpdate = function onUpdate(deltaTime) {\n    /** Update this._sphericalDelta, this._scale and this._panOffset. */\n    this._updateInputDelta(deltaTime);\n    /** Update camera's transform. */\n\n\n    this._updateCamera();\n  };\n\n  _proto._updateInputDelta = function _updateInputDelta(deltaTime) {\n    ControlHandlerType.None;\n    var delta = this._tempVec3,\n        enableHandler = this._enableHandler;\n    var inputDevices = this.inputDevices,\n        input = this.input;\n\n    for (var i = inputDevices.length - 1; i >= 0; i--) {\n      var handler = inputDevices[i];\n      var handlerType = handler.onUpdateHandler(input);\n\n      if (handlerType & enableHandler) {\n        handler.onUpdateDelta(this, delta);\n\n        switch (handlerType) {\n          case ControlHandlerType.ZOOM:\n            this._zoom(delta);\n\n            break;\n\n          case ControlHandlerType.PAN:\n            this._pan(delta);\n\n            break;\n        }\n      }\n    }\n  };\n\n  _proto._zoom = function _zoom(delta) {\n    if (delta.y > 0) {\n      this._scale /= Math.pow(0.95, this.zoomSpeed);\n    } else if (delta.y < 0) {\n      this._scale *= Math.pow(0.95, this.zoomSpeed);\n    }\n  };\n\n  _proto._pan = function _pan(delta) {\n    this._panOffset.copyFrom(delta);\n  };\n\n  _proto._updateCamera = function _updateCamera() {\n    var cameraTransform = this.cameraTransform,\n        camera = this.camera,\n        _panOffset = this._panOffset; // Update Zoom\n\n    var sizeDiff = this._zoomScaleUnit * (this._scale - 1);\n    var size = camera.orthographicSize + sizeDiff;\n    camera.orthographicSize = Math.max(this.minZoom, Math.min(this.maxZoom, size)); // Update X and Y\n\n    var _this$canvas = this.canvas,\n        width = _this$canvas.width,\n        height = _this$canvas.height;\n    var x = _panOffset.x,\n        y = _panOffset.y;\n    var doubleOrthographicSize = camera.orthographicSize * 2;\n    var width3D = doubleOrthographicSize * camera.aspectRatio;\n    var height3D = doubleOrthographicSize;\n    var cameraPosition = cameraTransform.position;\n    var curPosition = this._tempVec3;\n    curPosition.x = cameraPosition.x - x * width3D / width;\n    curPosition.y = cameraPosition.y + y * height3D / height;\n    curPosition.z = cameraPosition.z; // Update camera transform\n\n    cameraTransform.position = curPosition;\n    /** Reset cache value. */\n\n    this._scale = 1;\n\n    _panOffset.set(0, 0, 0);\n  };\n\n  _createClass(OrthoControl, [{\n    key: \"enableRotate\",\n    get:\n    /** Target position. */\n\n    /** Up vector */\n\n    /** Whether to automatically rotate the camera, the default is false. */\n\n    /** The radian of automatic rotation per second. */\n\n    /** Whether to enable keyboard. */\n\n    /** Whether to enable camera damping, the default is true. */\n\n    /** Rotation speed, default is 1.0 . */\n\n    /** Camera zoom speed, the default is 1.0. */\n\n    /** Keyboard translation speed, the default is 7.0 . */\n\n    /** Rotation damping parameter, default is 0.1 . */\n\n    /** Zoom damping parameter, default is 0.2 . */\n\n    /**  The minimum distance, the default is 0.1, should be greater than 0. */\n\n    /** The maximum distance, the default is infinite, should be greater than the minimum distance. */\n\n    /** Minimum zoom speed, the default is 0.0. */\n\n    /** Maximum zoom speed, the default is positive infinity. */\n\n    /** The minimum radian in the vertical direction, the default is 0 radian, the value range is 0 - Math.PI. */\n\n    /** The maximum radian in the vertical direction, the default is Math.PI, and the value range is 0 - Math.PI. */\n\n    /** The minimum radian in the horizontal direction, the default is negative infinity. */\n\n    /** The maximum radian in the horizontal direction, the default is positive infinity.  */\n\n    /**\n     *  Return Whether to enable rotation, the default is true.\n     */\n    function get() {\n      return (this._enableHandler & ControlHandlerType.ROTATE) !== 0;\n    },\n    set: function set(value) {\n      if (value) {\n        this._enableHandler |= ControlHandlerType.ROTATE;\n      } else {\n        this._enableHandler &= ~ControlHandlerType.ROTATE;\n      }\n    }\n    /**\n     *  Whether to enable camera damping, the default is true.\n     */\n\n  }, {\n    key: \"enableZoom\",\n    get: function get() {\n      return (this._enableHandler & ControlHandlerType.ZOOM) !== 0;\n    },\n    set: function set(value) {\n      if (value) {\n        this._enableHandler |= ControlHandlerType.ZOOM;\n      } else {\n        this._enableHandler &= ~ControlHandlerType.ZOOM;\n      }\n    }\n    /**\n     *  Whether to enable translation, the default is true.\n     */\n\n  }, {\n    key: \"enablePan\",\n    get: function get() {\n      return (this._enableHandler & ControlHandlerType.PAN) !== 0;\n    },\n    set: function set(value) {\n      if (value) {\n        this._enableHandler |= ControlHandlerType.PAN;\n      } else {\n        this._enableHandler &= ~ControlHandlerType.PAN;\n      }\n    }\n  }]);\n\n  return OrthoControl;\n}(Script);\n\nexport { ControlHandlerType, ControlKeyboard, ControlPointer, ControlWheel, FreeControl, OrbitControl, OrthoControl, StaticInterfaceImplement };\n//# sourceMappingURL=module.js.map\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = {\n    Linear: {\n        None: function (amount) {\n            return amount;\n        },\n    },\n    Quadratic: {\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    },\n    Cubic: {\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    },\n    Quartic: {\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    },\n    Quintic: {\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    },\n    Sinusoidal: {\n        In: function (amount) {\n            return 1 - Math.cos((amount * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\n        },\n    },\n    Exponential: {\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    },\n    Circular: {\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    },\n    Elastic: {\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    },\n    Back: {\n        In: function (amount) {\n            var s = 1.70158;\n            return amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    },\n    Bounce: {\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    },\n};\n\nvar now;\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\n// eslint-disable-next-line\n// @ts-ignore\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n    now = function () {\n        // eslint-disable-next-line\n        // @ts-ignore\n        var time = process.hrtime();\n        // Convert [seconds, nanoseconds] to milliseconds.\n        return time[0] * 1000 + time[1] / 1000000;\n    };\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n    now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n    now = function () {\n        return new Date().getTime();\n    };\n}\nvar now$1 = now;\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now$1(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (properties, duration) {\n        // TODO? restore this, then update the 07_dynamic_to example to set fox\n        // tween's to on each update. That way the behavior is opt-in (there's\n        // currently no opt-out).\n        // for (const prop in properties) this._valuesEnd[prop] = properties[prop]\n        this._valuesEnd = Object.create(properties);\n        if (duration !== undefined) {\n            this._duration = duration;\n        }\n        return this;\n    };\n    Tween.prototype.duration = function (d) {\n        this._duration = d;\n        return this;\n    };\n    Tween.prototype.start = function (time) {\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time !== undefined ? (typeof time === 'string' ? now$1() + parseFloat(time) : time) : now$1();\n        this._startTime += this._delayTime;\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n        return this;\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // handle an array of relative values\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\n                // Create a local copy of the Array with the start value at the front\n                _valuesEnd[property] = [startValue].concat(endValues);\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                // eslint-disable-next-line\n                for (var prop in startValue) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property][prop] = startValue[prop];\n                }\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n            }\n            else {\n                // Save the starting value, but only once.\n                if (typeof _valuesStart[property] === 'undefined') {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now$1(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        else {\n            return parseFloat(end);\n        }\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '18.6.4';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now$1,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport default exports;\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, getAll, nextId, now$1 as now, remove, removeAll, update };\n","import {\n  Animator,\n  AnimatorController,\n  AnimatorControllerLayer,\n  AnimatorLayerBlendingMode,\n  AnimatorStateMachine,\n  AssetType,\n  BoxColliderShape,\n  Camera,\n  Color,\n  DirectLight,\n  Engine,\n  Entity,\n  HitResult,\n  Layer,\n  Material,\n  Matrix,\n  MeshRenderer,\n  PBRBaseMaterial,\n  PointLight,\n  Quaternion,\n  Ray,\n  SceneManager,\n  Script,\n  SphereColliderShape,\n  Sprite,\n  SpriteDrawMode,\n  SpriteRenderer,\n  StaticCollider,\n  Texture2D,\n  Vector2,\n  Vector3,\n  Vector4,\n  WrapMode,\n} from \"oasis-engine\";\n\nimport ScencePro, { IInit, LoadScence } from \"./scene\";\nimport { OrbitControl, FreeControl } from \"@oasis-engine-toolkit/controls\";\nimport TWEEN from \"@tweenjs/tween.js\";\nimport { WireframeManager } from \"@oasis-engine-toolkit/auxiliary-lines\";\nimport LoadSrc from \"../loadSrc/index\";\nexport default class ModelScenc extends ScencePro implements IInit {\n  windowEntity: Entity = null;\n  cameraEntity: Entity = null;\n  orbit: OrbitControl;\n  constructor(sceneManager: SceneManager, engine: Engine) {\n    super(sceneManager, engine, \"model_scence_2\");\n    super.addInstance<ModelScenc>(\"model_scence_2\", this);\n    this.initCamera();\n    this.initLight();\n    this.loadSrc();\n  }\n  initCamera() {\n    let { rootEntity } = this;\n    if (rootEntity) {\n      const cameraEntity = rootEntity.createChild(\"camera\");\n      cameraEntity.transform.position = new Vector3(0, 20, 0);\n      this.cameraEntity = cameraEntity;\n\n      let camera = cameraEntity.addComponent(Camera);\n      camera.cullingMask = Layer.Layer0;\n      camera.farClipPlane = 1000;\n      camera.fieldOfView = 70;\n      //   camera.aspectRatio = 40;\n\n      this.camera = cameraEntity;\n\n      let controal = (this.orbit = cameraEntity.addComponent(OrbitControl));\n      //   controal.minPolarAngle = (50 * Math.PI) / 180;\n      //   controal.maxPolarAngle = (90 * Math.PI) / 180;\n      //   controal.target = new Vector3(0, -1.5, 0);\n      controal.enableRotate = false;\n      controal.enableZoom = false;\n      controal.maxZoom = 2;\n      controal.minZoom = 2;\n      controal.enablePan = false;\n    }\n  }\n  resetCamera() {\n    // this.orbit.minPolarAngle = (0 * Math.PI) / 180;\n    this.orbit.maxPolarAngle = (90 * Math.PI) / 180;\n    this.orbit.enableRotate = true;\n    this.camera.transform.position = new Vector3(14, 17, 0);\n    // this.orbit.target = new Vector3(0, 0, 0);\n    // let pos = this.cameraEntity.transform.position.clone();\n    // let tween = new TWEEN.Tween(pos); //创建一段tween动画\n    // tween.to(new Vector3(0, 0, 9), 1000); //4000：表示动画执行时间4000毫秒(ms)\n    // tween.onUpdate(() => {\n    //   // console.log(11)\n    //   this.cameraEntity.transform.position = pos;\n    //   // clearTimeout(this.timmer || 0)\n    //   // this.timmer=null\n    // });\n    // tween.onComplete(() => {\n    //   console.log(\"onComplete\");\n    // });\n    // tween.start();\n    // this.createBack();\n  }\n  initLight() {\n    let { rootEntity } = this;\n    if (rootEntity) {\n      const lightNode = rootEntity.createChild(\"lightNode\");\n      let directLight = lightNode.addComponent(DirectLight);\n      lightNode.transform.position.set(0, 14, 0);\n      // directLight.intensity = 2;\n      lightNode.transform.setRotation(-90, 0, 0);\n      directLight.color.set(1, 1, 1, 1);\n\n      const pointLightNode = rootEntity.createChild(\"pointLight\");\n      let light = pointLightNode.addComponent(PointLight);\n      light.intensity = 0.5;\n\n      pointLightNode.transform.position = new Vector3(10, 14, 0);\n      lightNode.transform.lookAt(new Vector3(0, 0, 0));\n    }\n    {\n      const directLightNode = rootEntity.createChild(\"dir_light\");\n      const directLightNode2 = rootEntity.createChild(\"dir_light2\");\n      directLightNode.addComponent(DirectLight);\n      directLightNode2.addComponent(DirectLight);\n      directLightNode.transform.setRotation(30, 0, 0);\n      directLightNode2.transform.setRotation(-30, 180, 0);\n    }\n  }\n  async loadSrc() {\n    let { engine, rootEntity } = this;\n    let carUrl = \"\";\n    if (import.meta.env.MODE == \"development\") {\n      carUrl = \"./public/asset/car/0704/car.gltf\";\n    } else {\n      carUrl = \"./asset/car/0704/car.gltf\";\n    }\n    let env = \"\";\n    if (import.meta.env.MODE == \"development\") {\n      env = \"./public/asset/car/ring/environment.gltf\";\n    } else {\n      env = \"./asset/car/ring/environment.gltf\";\n    }\n    let listSource = [carUrl, env];\n    // await LoadSrc.loadAll(listSource);\n    //@ts-ignore\n    let [caModel, envModel] = await this.loadSource([...listSource]);\n    //@ts-ignore\n    // let [caModel, envModel] = await this.engine.resourceManager.load([\n    //   ...listSource,\n    // ]);\n    // let [animations, defaultSceneRoot] = caModel;\n    //@ts-ignore\n    let carModelClone = caModel.defaultSceneRoot.clone();\n\n    let scale = new Vector3(1, 1, 1);\n    //@ts-ignore\n    carModelClone.transform.scale = scale;\n    console.log(carModelClone.name);\n    if (rootEntity.findByName(\"car\")) {\n      //@ts-ignore\n      rootEntity.removeChild(rootEntity.findByName(\"car\"));\n    }\n    rootEntity.addChild(carModelClone);\n\n    if (!rootEntity.findByName(\"environment\")) {\n      //@ts-ignore\n      rootEntity.addChild(envModel.defaultSceneRoot);\n    }\n\n    // console.log(envModel.defaultSceneRoot.name);\n    // let list = [];\n    // //@ts-ignore\n    // caModel.animations?.forEach((item) => {\n    //   //@ts-ignore\n    //   list.push(item.name);\n    // });\n    // console.log(list);\n    //@ts-ignore\n    let animator: Animator = carModelClone.getComponent(Animator);\n    // this.setAnimation(animator, caModel);\n    // const { animatorController } = animator;\n    // const animatorStateMachine = new AnimatorStateMachine();\n    // const additiveLayer = new AnimatorControllerLayer(\"additiveLayer\");\n    // additiveLayer.stateMachine = animatorStateMachine;\n    // additiveLayer.blendingMode = AnimatorLayerBlendingMode.Additive;\n    // animatorController.addLayer(additiveLayer);\n    //@ts-ignore\n    carModelClone.addComponent(SelectHotPoint);\n    // //@ts-ignore\n    // caModel.animations.forEach((item) => {\n    //   const newState = animatorStateMachine.addState(item.name);\n    //   // newState.clipStartTime = 1;\n    //   newState.clip = item;\n    // });\n\n    // animator.play(\"hot\", 0);\n\n    // currentState.wrapMode = WrapMode.Once;\n    // animator.play(\"a_o\", 1);\n    this.setAnimation(animator, caModel);\n    carModelClone.findByName(\"pSphere4 (5)\").isActive = false;\n    carModelClone.findByName(\"pSphere4\").isActive = false;\n    carModelClone.findByName(\"pSphere3 (5)\").isActive = false;\n    carModelClone.findByName(\"pSphere3\").isActive = false;\n    this.resetCamera();\n  }\n  setAnimation(animator: Animator, carModelClone) {\n    const animations = carModelClone.animations;\n\n    const animatorController = new AnimatorController();\n    animations.forEach((clip) => {\n      const layer = new AnimatorControllerLayer(clip.name);\n      const animatorStateMachine = new AnimatorStateMachine();\n      animatorController.addLayer(layer);\n      layer.stateMachine = animatorStateMachine;\n      const animatorState = animatorStateMachine.addState(clip.name);\n      animatorState.clip = clip;\n      if (clip.name !== \"hot\") {\n        animatorState.wrapMode = WrapMode.Once;\n      }\n    });\n    animator.animatorController = animatorController;\n    animator.play(\"hot\");\n    // carModelClone.findByName(\"pSphere3 (5)\").isActive = false;\n  }\n  createBack() {\n    let { engine, rootEntity } = this;\n    let url = \"\";\n    if (import.meta.env.MODE == \"development\") {\n      url = \"./public/asset/back.png\";\n    } else {\n      url = \"./asset/back.png\";\n    }\n    engine.resourceManager\n      .load<Texture2D>({\n        url,\n        type: AssetType.Texture2D,\n      })\n      .then((texture) => {\n        let spriteEntity = new Entity(this.engine, \"sprite_back\");\n        const boxCollider: StaticCollider =\n          spriteEntity.addComponent(StaticCollider);\n        const boxColliderShape = new BoxColliderShape();\n        boxColliderShape.setSize(1, 0.5, 0.1);\n        boxCollider.addShape(boxColliderShape);\n        this.camera.addChild(spriteEntity);\n        spriteEntity.transform.position = new Vector3(-3.4, 6.5, -10);\n        spriteEntity.addComponent(SpriteIcon);\n\n        // this.wireframe.addEntityWireframe(spriteEntity);\n        const spriteRenderer = spriteEntity.addComponent(SpriteRenderer);\n\n        const sprite = (spriteRenderer.sprite = new Sprite(engine, texture));\n        spriteRenderer.drawMode = SpriteDrawMode.Sliced;\n        let per = texture.width / texture.height;\n\n        sprite.width = per * 0.4;\n        sprite.height = 0.4;\n        const { transform } = this.camera;\n      });\n  }\n}\nclass SpriteIcon extends Script {\n  camera: Entity;\n  loadScence: LoadScence;\n  onAwake() {\n    this.loadScence = LoadScence.getInstance();\n  }\n  onPointerClick() {\n    this.loadScence.toScence(\"index_scence\");\n    let dom = document.querySelector(\".point\") as HTMLElement;\n    let innerCarDom = document.querySelector(\".inner_car\") as HTMLElement;\n    if (innerCarDom) {\n      innerCarDom.style.display = \"none\";\n    }\n    if (dom) {\n      dom.style.left = \"100000px\";\n      dom.style.top = \"100000px\";\n      dom.style.opacity = \"0\";\n      dom.style.pointerEvents = \"none\";\n    }\n    {\n      let dom = document.querySelector(\".circle\") as HTMLElement;\n      // let button = document.querySelector(\".buttom\") as HTMLElement;\n      // let pause = document.querySelector(\".pause\") as HTMLElement;\n      if (dom) {\n        dom.style.display = \"block\";\n        // button.style.display = \"block\";\n        // pause.style.display = \"block\";\n      }\n    }\n  }\n}\n\nclass SelectHotPoint extends Script {\n  rightFontDoor: Entity;\n  camera: Camera;\n  wireframe: WireframeManager;\n  animator: Animator;\n  orbit: OrbitControl;\n  originCamerPos: Vector3;\n  originCamerRoate: Quaternion;\n  animationCurrent: string;\n  animationCurrentObj = {\n    c_o: false,\n    d_o: false,\n    a_o: false,\n    b_o: false,\n  };\n  //  let animator = caModel.defaultSceneRoot.getComponent(Animator);\n  constructor(entity: Entity) {\n    super(entity);\n    this.wireframe = this.entity.addComponent(WireframeManager);\n    this.createButton();\n  }\n  onAwake() {\n    this.setCollider();\n  }\n  onEnable() {\n    console.log(12);\n    this.animator = this.entity.getComponent(Animator);\n    this.camera = this.entity.parent.findByName(\"camera\").getComponent(Camera);\n    this.orbit = this.entity.parent\n      .findByName(\"camera\")\n      .getComponent(OrbitControl);\n    this.createCarButton();\n  }\n  setCollider() {\n    let list = [\n      \"pSphere3 (1)\", //\n      \"pSphere3 (2)\",\n      \"pSphere3 (3)\",\n      \"pSphere3 (4)\",\n      // \"pSphere3 (5)\",\n      // \"pSphere3\",\n    ];\n    list.forEach((item) => {\n      let entity = this.entity.findByName(item);\n\n      const physicsSphere = new SphereColliderShape();\n      physicsSphere.radius = 4;\n      physicsSphere.position = new Vector3(0, 0, 0); //this.rightFontDoor.transform.worldPosition.clone();\n      const sphereCollider = entity.addComponent(StaticCollider);\n      sphereCollider.addShape(physicsSphere);\n    });\n  }\n  onUpdate() {\n    TWEEN.update();\n    const { inputManager } = this.engine;\n    //@ts-ignore 取消动画\n    if (inputManager.isPointerDown()) {\n      let pos = inputManager.pointerPosition;\n      const ratio = 1;\n      let ray = new Ray();\n      this.camera.screenPointToRay(new Vector2(pos.x, pos.y).scale(ratio), ray);\n\n      const hit = new HitResult();\n      let result = this.engine.physicsManager.raycast(\n        ray,\n        Number.MAX_VALUE,\n        Layer.Everything,\n        hit\n      );\n      if (result) {\n        console.log(hit.entity.name);\n        if (hit.entity.name === \"pSphere3 (1)\") {\n          if (this.animationCurrentObj[\"c_o\"]) {\n            this.animator.play(\"c_c\");\n            this.animationCurrentObj[\"c_o\"] = false;\n          } else {\n            this.animator.play(\"c_o\");\n            this.animationCurrentObj[\"c_o\"] = true;\n          }\n        }\n        if (hit.entity.name === \"pSphere3 (3)\") {\n          if (this.animationCurrentObj[\"d_o\"]) {\n            this.animator.play(\"d_c\");\n            this.animationCurrentObj[\"d_o\"] = false;\n          } else {\n            this.animator.play(\"d_o\");\n            this.animationCurrentObj[\"d_o\"] = true;\n          }\n        }\n        if (hit.entity.name === \"pSphere3 (2)\") {\n          if (this.animationCurrentObj[\"a_o\"]) {\n            this.animator.play(\"a_c\");\n            this.animationCurrentObj[\"a_o\"] = false;\n          } else {\n            this.animator.play(\"a_o\");\n            this.animationCurrentObj[\"a_o\"] = true;\n          }\n          // this.animator.play(\"a_o\");\n        }\n        if (hit.entity.name === \"pSphere3 (4)\") {\n          // if (\n\n          if (this.animationCurrentObj[\"b_o\"]) {\n            this.animator.play(\"b_c\");\n            this.animationCurrentObj[\"b_o\"] = false;\n          } else {\n            this.animator.play(\"b_o\");\n            this.animationCurrentObj[\"b_o\"] = true;\n          }\n          // this.animator.play(\"b_o\");\n        }\n      }\n      // const currentState = this.animator.getCurrentAnimatorState(0);\n      // currentState.wrapMode = WrapMode.Once;\n\n      // this.screenToViewPoint(inputManager.pointerPosition);\n    }\n  }\n  innerCar() {\n    let forword = new Vector3();\n    this.entity.transform.getWorldForward(forword);\n\n    let target = new Vector3(\n      0.8068933486938477,\n      2.1422691345214844,\n      -6.121748447418213\n    ).add(new Vector3(0, 1, 3));\n    this.tweenMove(\n      this.camera.entity.transform.position.clone(),\n      target,\n      (pos) => {\n        this.camera.entity.transform.position = pos;\n      }\n    )();\n    this.tweenMove(\n      this.orbit.target.clone(),\n      new Vector3(target.clone().x + 0.1, target.clone().y, target.clone().z),\n      (pos) => {\n        this.orbit.target = pos;\n      }\n    )();\n    this.camera.fieldOfView = 110;\n    this.orbit.maxPolarAngle = Math.PI;\n\n    // this.camera.entity.transform.position = target;\n    // this.orbit.target = new Vector3(target.x + 0.1, target.y, target.z);\n\n    // let q = new Quaternion();\n    // q.rotateX((0 * Math.PI) / 180);\n    // let m = new Matrix();\n    // Matrix.rotationQuaternion(q, m);\n    // let q2 = new Quaternion();\n    // q2.rotateY((90 * Math.PI) / 180);\n    // let m2 = new Matrix();\n    // Matrix.rotationQuaternion(q2, m2);\n    // let m3 = new Matrix();\n    // Matrix.multiply(m2, m, m3);\n    // console.log(m3);\n    // let v = new Vector3();\n    // Vector3.transformToVec3(new Vector3(0, 3, -3), m3, v);\n    // this.camera.entity.transform.position = v;\n    // this.orbit.target = new Vector3(v.x, v.y + 0.1, v.z);\n    // this.camera.fieldOfView = 100;\n\n    // let target = new Vector3(0, 3, -3);\n  }\n  createButton() {\n    if (document.querySelector(\".inner_car\")) {\n      document.querySelector(\".inner_car\").remove();\n    }\n    let div = document.createElement(\"div\");\n    div.className = \"inner_car\";\n    document.body.append(div);\n    //@ts-ignore\n    div.style = `\n    position: absolute;\n    right: 0px;\n    top: 20px;\n    width: 85px;\n    line-height: 34px;\n    background-color: #00000066;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    text-align: center;\n    color: rgb(255, 255, 255);\n    font-size: 14px;\n    \n    `;\n    div.innerText = \"车内\";\n    div.onclick = () => {\n      if (div.hasAttribute(\"data-id\")) {\n        // this.camera.entity.transform.position = this.originCamerPos;\n        this.tweenMove(\n          this.camera.entity.transform.position.clone(),\n          this.originCamerPos,\n          (pos) => {\n            this.camera.entity.transform.position = pos;\n          }\n        )();\n        // this.camera.entity.transform.rotationQuaternion = this.originCamerRoate;\n        this.camera.fieldOfView = 70;\n        this.orbit.maxPolarAngle = Math.PI;\n        this.orbit.maxPolarAngle = (90 * Math.PI) / 180;\n        this.orbit.target = new Vector3(0, 0, 0);\n\n        div.removeAttribute(\"data-id\");\n        div.innerText = \"车内\";\n        document.querySelectorAll(\".point\").forEach((item) => {\n          let ele = item as HTMLElement;\n          ele.style.pointerEvents = \"none\";\n          ele.style.opacity = \"0\";\n        });\n        console.log(\"车外\");\n\n        let backIcon = this.entity.parent.findByName(\"sprite_back\");\n        backIcon.isActive = true;\n      } else {\n        this.innerCar();\n        div.innerText = \"车外\";\n        div.setAttribute(\"data-id\", \"1\");\n        this.originCamerRoate =\n          this.camera.entity.transform.rotationQuaternion.clone();\n        this.originCamerPos = this.camera.entity.transform.position.clone();\n\n        document.querySelectorAll(\".point\").forEach((item, index) => {\n          if (index != 1) {\n            let ele = item as HTMLElement;\n            ele.style.pointerEvents = \"all\";\n            ele.style.opacity = \"1\";\n          }\n        });\n        let backIcon = this.entity.parent.findByName(\"sprite_back\");\n        backIcon.isActive = false;\n        this.orbit.maxPolarAngle = Math.PI;\n      }\n    };\n  }\n  tweenMove(\n    start: Vector3,\n    end: Vector3,\n    callback: (res: Vector3) => void,\n    time: number = 500\n  ) {\n    return () => {\n      new TWEEN.Tween(start)\n        .to(end, time)\n        .onUpdate(() => {\n          callback(start);\n        })\n        .start();\n    };\n  }\n  createCarButton() {\n    document.querySelectorAll(\".point\").forEach((item) => {\n      item.remove();\n    });\n    let pointEle = {\n      \"pSphere3 (1)\": new Vector3(0, 1, -3), //前左\n      \"pSphere3 (2)\": new Vector3(0, 1, 3), //前右\n      \"pSphere3 (3)\": new Vector3(0, 1, -3), // 后右\n      \"pSphere3 (4)\": new Vector3(0, 1, 4), // 后左\n    };\n    for (let key in pointEle) {\n      let entity = this.entity.findByName(key);\n\n      if (entity) {\n        let render2D = entity.addComponent(Renderer2DScript);\n        render2D.setCamera(this.camera);\n        render2D.setPos(\n          entity.transform.worldPosition.clone().add(pointEle[key])\n        );\n        render2D.setOrb(this.orbit);\n      }\n    }\n  }\n}\n\nclass Renderer2DScript extends Script {\n  screen: Vector3 = new Vector3();\n  widthRatio: number;\n  heightRatio: number;\n  camera: Camera;\n  dom: HTMLElement;\n  orb: OrbitControl;\n\n  constructor(entity: Entity) {\n    super(entity);\n\n    this.widthRatio =\n      //@ts-ignore\n      this.engine.canvas.width / this.engine.canvas._webCanvas.clientWidth;\n\n    this.heightRatio =\n      //@ts-ignore\n      this.engine.canvas.height / this.engine.canvas._webCanvas.clientHeight;\n\n    this.dom = document.createElement(\"div\");\n    this.dom.className = \"point\";\n\n    this.dom.setAttribute(\n      \"style\",\n      ` \n          pointer-events: none;\n          opacity:0;\n          width:15px;\n          height:15px;\n          position:absolute;\n          top:-1000px;\n          left:-1000px;\n          background: #dde405;\n          border-radius:50%;\n          color:#333333`\n    );\n    this.dom.onclick = () => {\n      this.moveCameraTo();\n      this.camera.fieldOfView = 110;\n\n      // this.camera.entity.transform.position = this.screen;\n      // this.orb.target = new Vector3();\n\n      // this.orb.target = new Vector3(\n      //   this.screen.x + 0.1,\n      //   this.screen.y,\n      //   this.screen.z\n      // );\n      this.orb.maxPolarAngle = Math.PI;\n      // 如果是当前位置，则隐藏，其他显示\n      document.querySelectorAll(\".point\").forEach((item: HTMLElement) => {\n        if (item == this.dom) {\n          this.dom.style.opacity = \"0\";\n          this.dom.style.pointerEvents = \"none\";\n        } else {\n          item.style.opacity = \"1\";\n          item.style.pointerEvents = \"all\";\n        }\n      });\n    };\n\n    document.body.appendChild(this.dom);\n  }\n  moveCameraTo() {\n    this.tweenMove(\n      this.camera.entity.transform.position.clone(),\n      this.screen,\n      (pos) => {\n        this.camera.entity.transform.position = pos;\n      }\n    )();\n\n    this.tweenMove(\n      this.orb.target.clone(),\n      new Vector3(this.screen.x + 0.1, this.screen.y, this.screen.z),\n      (pos) => {\n        this.orb.target = pos;\n      }\n    )();\n  }\n  tweenMove(\n    start: Vector3,\n    end: Vector3,\n    callback: (res: Vector3) => void,\n    time: number = 500\n  ) {\n    return () => {\n      new TWEEN.Tween(start)\n        .to(end, time)\n        .onUpdate(() => {\n          callback(start);\n        })\n        .start();\n    };\n  }\n  onStart() {\n    // this.camera = this.entity.parent.parent.parent\n    //   .findByName(\"camera\")\n    //   .getComponent(Camera);\n    // this.screen = this.entity.transform.worldPosition.clone();\n  }\n  setCamera(camera: Camera) {\n    this.camera = camera;\n  }\n  setPos(pos: Vector3) {\n    this.screen = pos;\n  }\n  setOrb(orb: OrbitControl) {\n    this.orb = orb;\n  }\n  screenToViewPoint(pos: Vector2) {\n    let { x: clientX, y: clientY } = pos;\n    console.log(pos);\n    // const { left, top, width, height } = {\n    //   left: 0,\n    //   top: 0,\n    //   width: this.engine.canvas.width,\n    //   height: this.engine.canvas.height,\n    // };\n    // const [cssX, cssY] = [clientX - left, clientY - top];\n    // //解决坐标原点位置的差异\n    // const [halfWidth, halfHeight] = [width / 2, height / 2];\n    // const [xBaseCenter, yBaseCenter] = [cssX - halfWidth, cssY - halfHeight];\n    // // 解决y 方向的差异\n    // const yBaseCenterTop = -yBaseCenter;\n    // //解决坐标基底的差异\n\n    // let v3 = new Vector3(\n    //   xBaseCenter / halfWidth,\n    //   yBaseCenterTop / halfHeight,\n    //   1\n    // );\n\n    // this.camera.worldToScreenPoint(v3, this.screen);\n    // this.dom.style.left = `${this.screen.x / this.widthRatio}px`;\n    // this.dom.style.top = `${this.screen.y / this.heightRatio}px`;\n\n    let p = new Vector3();\n    const ratio = 1; // window.devicePixelRatio;\n    let ray = new Ray();\n    this.camera.screenPointToRay(\n      new Vector2(\n        this.engine.canvas.width / 2,\n        this.engine.canvas.height / 2\n      ).scale(ratio),\n      ray\n    );\n    ray.getPoint(1, this.screen);\n    let p2 = new Vector3();\n    Vector3.transformToVec3(\n      this.screen,\n      this.camera.projectionMatrix.clone().invert(),\n      p2\n    );\n    this.camera.worldToScreenPoint(p2, this.screen);\n    this.dom.style.left = `${this.screen.x / this.widthRatio}px`;\n    this.dom.style.top = `${this.screen.y / this.heightRatio}px`;\n    console.log(p);\n  }\n  hiddenDom() {\n    let markWp = this.screen.clone();\n    let position = this.camera.entity.transform.position.clone();\n    let targt = this.camera.entity.getComponent(OrbitControl).target.clone();\n    let dot = Vector3.dot(\n      markWp.subtract(position),\n      targt.clone().subtract(position)\n    );\n\n    if (dot > 0) {\n      this.dom.style.display = \"block\";\n    } else {\n      this.dom.style.display = \"none\";\n    }\n  }\n\n  onUpdate() {\n    if (!this.camera) return;\n\n    //tween 更新\n    // TWEEN.update();\n\n    let p2 = this.screen; //new Vector3();\n\n    var screen = new Vector3();\n    this.camera.worldToScreenPoint(p2, screen);\n    this.dom.style.left = `${screen.x / this.widthRatio}px`;\n    this.dom.style.top = `${screen.y / this.heightRatio}px`;\n    // this.dom.style.opacity = \"1\";\n    // this.dom.style.pointerEvents = \"all\";\n    this.hiddenDom();\n  }\n}\n","import {\n  AmbientLight,\n  AnimationClip,\n  Animator,\n  AnimatorController,\n  AnimatorControllerLayer,\n  AnimatorStateMachine,\n  AssetType,\n  BackgroundMode,\n  BoxColliderShape,\n  Camera,\n  CapsuleColliderShape,\n  CharacterController,\n  Color,\n  ControllerCollisionFlag,\n  DirectLight,\n  Engine,\n  Entity,\n  Font,\n  GLTFResource,\n  Keys,\n  Logger,\n  Material,\n  Matrix,\n  MeshRenderer,\n  PBRMaterial,\n  PlaneColliderShape,\n  PrimitiveMesh,\n  Quaternion,\n  Renderer,\n  RenderFace,\n  Script,\n  SkyBoxMaterial,\n  StaticCollider,\n  TextRenderer,\n  Texture2D,\n  Vector2,\n  Vector3,\n  WebGLEngine,\n  WebCanvas,\n  WebGLRenderer,\n  PointLight,\n  BlinnPhongMaterial,\n  TextureFormat,\n  TextureWrapMode,\n  BoundingBox,\n  Scene,\n  SceneManager,\n} from \"oasis-engine\";\nimport { OrbitControl, FreeControl } from \"@oasis-engine-toolkit/controls\";\n// @oasis-engine/physics-physx\nimport { PhysXPhysics } from \"@oasis-engine/physics-physx\";\nimport Player from \"./Player\";\nimport ControllerScript, { UserClick } from \"./ControllerScript\";\nimport UpdateVideoScript, { VideoMaterial } from \"./texture-vide\";\nimport AddColliderShape from \"./addColliderShape\";\nimport { WireframeManager } from \"@oasis-engine-toolkit/auxiliary-lines\";\nimport IndexScene from \"./scences/index-scene\";\nimport ModelScenc from \"./scences/model-scene\";\nimport ModelScene2 from \"./scences/model-scene-2\";\nimport { LoadScence } from \"./scences/scene\";\nexport enum State {\n  Run = \"Run\",\n  Idle = \"Idle\",\n  Jump = \"Jump_In\",\n  Fall = \"Fall\",\n  Landing = \"Landing\",\n}\nexport default class Page {\n  engine: WebGLEngine | Engine | null = null;\n  rootEntity: Entity | null = null;\n  npc: Entity | null = null;\n  animator: Animator | null = null;\n  video: any;\n  camera: Entity | null = null;\n  wireframe = null;\n  sceneList = [];\n  indexScens: IndexScene = null;\n  modelScens: ModelScenc = null;\n  modelScens2: ModelScene2 = null;\n  constructor(canvasId: string, cb: () => void) {\n    PhysXPhysics.initialize().then(() => {\n      // this.initEngine(canvasId);\n      cb && cb();\n    });\n  }\n  initEngine(canvasId: string) {\n    let sceneManager = this.createScence(canvasId).sceneManager;\n    this.engine = sceneManager.engine;\n    this.engine.physicsManager.initialize(PhysXPhysics);\n\n    this.initScences(sceneManager);\n    document.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState == \"visible\") {\n        console.log(\"visible\");\n        this.engine.resume();\n      }\n      if (document.visibilityState == \"hidden\") {\n        console.log(\"hidden\");\n        this.engine.pause();\n      }\n    });\n\n    this.engine.run();\n    // @ts-ignore\n    window.removeEventListener(\"blur\", this.engine.inputManager._onBlur);\n  }\n  initScences(sceneManager: SceneManager) {\n    // let indexScens = new IndexScene(sceneManager, this.engine);\n\n    // this.indexScens = indexScens;\n    this.modelScens2 = new ModelScene2(sceneManager, this.engine); //new ModelScenc(sceneManager, this.engine);\n\n    sceneManager.activeScene = this.modelScens2.scence; //this.indexScens.scence;\n  }\n  createScence(canvasId: string) {\n    const canvas = document.getElementById(canvasId);\n    let webCanvas = new WebCanvas(canvas);\n    const webGLRenderer = new WebGLRenderer();\n    const engine = new Engine(webCanvas, webGLRenderer);\n\n    const pixelRatio = window.devicePixelRatio; // 如果已经设置 meta scale，请设置为 1\n    const scale = 3 / 3; // 3 倍高清屏按 2 倍屏来计算画布尺寸\n\n    /**\n     * 设置节能模式，默认全屏，也可以自己设置任意高宽\n     */\n    webCanvas.width = (window.innerWidth * pixelRatio) / scale;\n    webCanvas.height = (window.innerHeight * pixelRatio) / scale;\n    webCanvas.setScale(scale, scale); // 拉伸画布\n    return {\n      sceneManager: engine.sceneManager,\n      engine,\n    };\n  }\n}\n","import {\n  Animator,\n  CharacterController,\n  ControllerCollisionFlag,\n  Entity,\n  Keys,\n  Matrix,\n  Quaternion,\n  Script,\n  Transform,\n  Vector2,\n  Vector3,\n} from \"oasis-engine\";\nimport { OrbitControl } from \"@oasis-engine-toolkit/controls\";\nexport enum State {\n  Run = \"Run\",\n  Idle = \"Idle\",\n  Jump = \"Jump_In\",\n  Fall = \"Fall\",\n  Landing = \"Landing\",\n}\nexport class AnimationState {\n  private _state: State = State.Idle;\n  private _lastKey: Keys = null;\n\n  get state(): State {\n    return this._state;\n  }\n\n  setMoveKey(value: Keys) {\n    this._lastKey = value;\n    if (this._state === State.Fall || this._state === State.Jump) {\n      return;\n    }\n\n    if (\n      this._lastKey === null &&\n      (this._state === State.Run || this._state === State.Idle)\n    ) {\n      this._state = State.Idle;\n    } else {\n      this._state = State.Run;\n    }\n  }\n\n  setJumpKey() {\n    this._state = State.Jump;\n  }\n\n  setFallKey() {\n    this._state = State.Fall;\n  }\n\n  setIdleKey() {\n    if (this._state == State.Jump) {\n      return;\n    }\n\n    if (this._state === State.Fall) {\n      this._state = State.Landing;\n    }\n\n    if (this._state === State.Landing) {\n      this._state = State.Idle;\n    }\n  }\n}\n\nexport default class ControllerScript extends Script {\n  _camera: Entity;\n  _character: Entity;\n  _controller: CharacterController;\n  canMove: boolean = false;\n\n  _displacement = new Vector3();\n  _forward = new Vector3();\n  _cross = new Vector3();\n  _fallAccumulateTime = 0;\n\n  _yAxisMove = new Vector3(0, 0, 0);\n\n  dir = new Vector2();\n  deg: number = 0;\n  isPc: boolean =\n    !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    );\n  speed: number = 0.05;\n  orb: OrbitControl = null;\n\n  quaternion: Vector3 = new Vector3();\n\n  _predictPosition = new Vector3();\n  _rotMat = new Matrix();\n  _rotation = new Quaternion();\n  _newRotation = new Quaternion();\n\n  _up = new Vector3(0, 1, 0);\n  _isInit = false;\n\n  lenDirNormal: Vector3 = new Vector3();\n  len: number = 0;\n\n  currentPos: Vector3;\n\n  animator: Animator;\n  flag: boolean = true;\n\n  onEnable() {\n    if (this.currentPos) {\n      this.entity.transform.position = this.currentPos;\n    } else {\n      this.currentPos = this.entity.transform.position;\n    }\n  }\n  isMobile() {\n    let flag =\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      );\n    return flag;\n  }\n\n  onAwake() {\n    console.log(232323 + \"onAwake\");\n    this._controller = this.entity.getComponent(CharacterController);\n    // const physicsManager = this.engine.physicsManager;\n  }\n  targetCamera(camera: Entity) {\n    this._camera = camera;\n    this.orb = this._camera && this._camera.getComponent(OrbitControl);\n    this.cameraDis();\n  }\n  targetCharacter(character: Entity) {\n    this._character = character;\n    this.orb.target = this._character.transform.position.clone();\n    // this._animator = character.getComponent(Animator);\n  }\n  controlMove({ dir, deg }: { dir: Vector2; deg: number }) {\n    this.canMove = dir.length() > 0;\n    this.dir.set(dir.x, dir.y).normalize();\n    this.deg = deg;\n    // this.orb.maxPolarAngle = (70 * Math.PI) / 180;\n  }\n  controlStart() {\n    if (this._camera) {\n      this._isInit = true;\n      // this.orb.maxPolarAngle = (70 * Math.PI) / 180;\n    }\n    this._fallAccumulateTime = 0;\n  }\n  cameraDis() {\n    this.lenDirNormal = this._camera.transform.worldPosition\n      .clone()\n      .subtract(this.entity.transform.worldPosition.clone())\n      .normalize();\n    if (this.len == 0) {\n      this.len = this._camera.transform.worldPosition\n        .clone()\n        .subtract(this.entity.transform.worldPosition.clone())\n        .length();\n    }\n  }\n  controalEnd() {\n    this._isInit = false;\n    // this.orb.maxPolarAngle = (90 * Math.PI) / 180;\n    // this.orb.rotateSpeed = 1;\n  }\n  onUpdate(deltaTime: number) {\n    // console.log(deltaTime);\n\n    const inputManager = this.engine.inputManager;\n    if (this.animator == undefined) {\n      this.animator = this.entity.findByName(\"RootNode\").getComponent(Animator);\n    }\n    if (this.isPc == false) {\n      this.mobilePlayMove();\n      return;\n    }\n    if (inputManager.isKeyHeldDown()) {\n      // if(this.canMove){\n\n      this._camera.transform.getWorldForward(this._forward);\n      this.orb.target = this.entity.transform.worldPosition.clone();\n      this._forward.y = 0;\n      this._forward.normalize();\n\n      this._cross.set(this._forward.z, 0, -this._forward.x);\n      const animationSpeed = 0.04;\n      const displacement = this._displacement;\n      // console.log(displacement);\n      if (inputManager.isKeyHeldDown(Keys.KeyW)) {\n        Vector3.scale(this._forward, animationSpeed, displacement);\n      }\n      if (inputManager.isKeyHeldDown(Keys.KeyS)) {\n        Vector3.scale(this._forward, -animationSpeed, displacement);\n      }\n      if (inputManager.isKeyHeldDown(Keys.KeyA)) {\n        Vector3.scale(this._cross, animationSpeed, displacement);\n      }\n      if (inputManager.isKeyHeldDown(Keys.KeyD)) {\n        Vector3.scale(this._cross, -animationSpeed, displacement);\n      }\n      if (inputManager.isKeyDown(Keys.Space)) {\n        displacement.set(0, 0.05, 0);\n      }\n      if (this.animator) {\n        if (this.flag) {\n          this.flag = false;\n          this.animator.play(State.Run);\n        }\n      }\n    } else {\n      this._displacement.set(0, 0, 0);\n      if (this.flag == false) {\n        this.flag = true;\n        this.animator.play(State.Idle);\n      }\n    }\n  }\n  onPhysicsUpdate() {\n    const physicsManager = this.engine.physicsManager;\n    const gravity = physicsManager.gravity;\n\n    const fixedTimeStep = physicsManager.fixedTimeStep;\n    const character = this._controller;\n    if (this._isInit == false) {\n      this._fallAccumulateTime = 0;\n    } else {\n      this._fallAccumulateTime += fixedTimeStep;\n    }\n\n    this._isInit = true;\n\n    character.move(this._displacement, 0.0001, fixedTimeStep);\n    const transform = this._character.transform;\n    const yAxisMove = this._yAxisMove;\n    yAxisMove.set(0, gravity.y * fixedTimeStep * this._fallAccumulateTime, 0);\n    // console.log(yAxisMove);\n    const flag = character.move(yAxisMove, 0.0001, fixedTimeStep);\n\n    if (flag & ControllerCollisionFlag.Down) {\n      this._fallAccumulateTime = 0;\n      // this._animationState.setIdleKey();\n    } else {\n      // this._animationState.setFallKey();\n    }\n\n    // this._playAnimation();\n\n    if (this._displacement.x != 0 || this._displacement.z != 0) {\n      this._predictPosition.copyFrom(transform.worldPosition);\n      this._predictPosition.subtract(this._displacement);\n      Matrix.lookAt(\n        transform.worldPosition, // 人物当前坐标\n        this._predictPosition, // 要移动距离\n        this._up,\n        this._rotMat //\n      );\n\n      this._rotMat.getRotation(this._rotation).invert();\n      // const currentRot = transform.rotationQuaternion;\n      // Quaternion.slerp(currentRot, this._rotation, 0.01, this._newRotation);\n      transform.rotationQuaternion = this._rotation; //this._newRotation;\n      this.cameraDis();\n      let pos = this.entity.transform.worldPosition.clone();\n      let dis = new Vector3();\n      Vector3.scale(this.lenDirNormal, this.len, dis);\n\n      this._camera.transform.worldPosition = new Vector3(\n        pos.x,\n        pos.y,\n        pos.z\n      ).add(dis);\n      // this.currentTransform = this.entity.transform;\n      this.currentPos = this.entity.transform.position.clone();\n    }\n  }\n  mobilePlayMove() {\n    if (this.canMove) {\n      if (this.orb) {\n        this.orb.target = this.entity.transform.worldPosition.clone();\n        // @ts-ignore\n        let theta = this.orb._spherical.theta;\n\n        let x = Math.cos(this.deg + theta);\n        let y = Math.sin(this.deg + theta);\n        let dir = new Vector3(y, 0, x);\n        this._forward = dir;\n      } else {\n        this._forward = new Vector3(this.dir.x, 0, this.dir.y);\n      }\n\n      this._forward.y = 0;\n\n      this._forward.normalize();\n\n      const animationSpeed = 0.05;\n      const displacement = this._displacement;\n      Vector3.scale(this._forward, animationSpeed, displacement);\n    } else {\n      this._displacement.set(0, 0, 0);\n    }\n  }\n}\nexport class UserClick extends Script {\n  onAwake() {\n    console.log(23);\n  }\n  onPointerClick() {\n    console.log(232);\n  }\n}\n","<template>\n  <div>\n    <canvas id=\"canvas\" />\n    <!-- <div\n      class=\"touch_div\"\n      @touchstart=\"onTouchStart\"\n      @touchend=\"onTouchEnd\"\n      @touchmove=\"onTouchMove\"\n      @touchcancel=\"onTouchCancel\"\n    ></div> -->\n    <Joystick @dir=\"onStick\" @start=\"onStart\" @end=\"onEnd\"></Joystick>\n\n    <Dialog ref=\"dialog\" @onload=\"onLoad\"></Dialog>\n    <div id=\"loading\"></div>\n    <div id=\"loading_process\"></div>\n    <!-- <startPageVue v-if=\"startShow && !isWx\">\n      <div v-if=\"showStartBtn\" class=\"Start_btn\" @click=\"onStartPage\"></div>\n    </startPageVue> -->\n    <!-- <button class=\"buttom\" @click=\"onplay\">play</button>\n    <button class=\"pause\" style=\"right: 0\" @click=\"onPause\">pause</button> -->\n    <!-- <van-overlay :show=\"show\" @click=\"show = false\">\n      <van-circle :rate=\"30\" :speed=\"100\" />\n    </van-overlay> -->\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport Dialog from \"./components/dialog.vue\";\nimport Joystick from \"./components/JoyStick.vue\";\nimport { onMounted, Ref, ref, VueElement } from \"vue\";\nimport startPageVue from \"./components/start-page.vue\";\n// import nipplejs from \"nipplejs\";\nimport Page, { State } from \"./init\";\nimport Player from \"./Player\";\n\nimport ControllerScript from \"./ControllerScript\";\nlet page: Page | null = null;\nlet player = null;\nlet dialog = ref();\nlet startShow = ref(true);\nlet show: Ref<boolean> = ref<boolean>(true);\nlet showStartBtn: Ref<boolean> = ref<boolean>(false);\nlet isWx: Ref<boolean> = ref<boolean>(getQueryVariable(\"src\") === \"wx\");\nconst onTouchStart = (e) => {\n  document.getElementById(\"canvas\").dispatchEvent(e);\n};\nconst onTouchMove = (e) => {\n  document.getElementById(\"canvas\").dispatchEvent(e);\n};\nconst onTouchEnd = (e) => {\n  document.getElementById(\"canvas\").dispatchEvent(e);\n};\nconst onTouchCancel = (e) => {\n  document.getElementById(\"canvas\").dispatchEvent(e);\n};\nconst onStick = (e) => {\n  if (player) {\n    player.controlMove(e);\n  }\n};\nconst onplay = () => {\n  page.indexScens.video.play();\n};\nconst onPause = () => {\n  page.indexScens.video.pause();\n};\nconst onStart = () => {\n  if (player == null) {\n    player = page.indexScens.npc.getComponent(ControllerScript);\n    // player = page.npc.getComponent(Player);\n  }\n  if (player) {\n    player.controlStart();\n  }\n  if (page) {\n    page.indexScens.animator.play(State.Run);\n  }\n};\nconst onEnd = () => {\n  if (page) {\n    page.indexScens.animator.play(State.Idle);\n  }\n  if (player) {\n    player.controalEnd();\n  }\n};\nconst onLoad = () => {};\nonMounted(() => {\n  page = new Page(\"canvas\", () => {\n    // page.loadSrc();\n    showStartBtn.value = true;\n    onStartPage();\n    if (isWx.value) {\n      onStartPage();\n    }\n  });\n\n  // setInterval(() => {\n  //   window.dispatchEvent(new Event(\"focus\"));\n  // }, 1000);\n});\nfunction getQueryVariable(variable) {\n  var query = window.location.search.substring(1);\n  var vars = query.split(\"&\");\n  for (var i = 0; i < vars.length; i++) {\n    var pair = vars[i].split(\"=\");\n    if (pair[0] == variable) {\n      return pair[1];\n    }\n  }\n  return false;\n}\nconst onStartPage = () => {\n  if (page) {\n    page.initEngine(\"canvas\");\n    startShow.value = false;\n  }\n};\n</script>\n\n<style scoped>\n#canvas {\n  width: 100vw;\n  height: 100vh;\n}\n.buttom {\n  position: fixed;\n  left: 0;\n  top: 20px;\n  width: 80px;\n\n  background: #28242480;\n  border-radius: unset;\n  border-top-right-radius: 10px;\n  border-bottom-right-radius: 10px;\n}\n\n.pause {\n  position: fixed;\n  left: 0;\n  top: 80px;\n  width: 80px;\n\n  background: #28242480;\n  border-radius: unset;\n  border-top-right-radius: 10px;\n  border-bottom-right-radius: 10px;\n}\n.Start_btn {\n  width: 138px;\n  height: 42px;\n  background: url(\"./components/img/start.png\") no-repeat center center;\n  background-size: 100% 100%;\n  position: absolute;\n  left: 50%;\n\n  transform: translateX(-50%) translateY(0%);\n  bottom: 10%;\n}\n.touch_div {\n  width: 100vw;\n  height: 100vh;\n  position: fixed;\n  top: 0;\n  left: 0;\n}\n</style>\n","import { createApp } from \"vue\";\nimport \"./style.css\";\nimport App from \"./App.vue\";\nimport VConsole from \"vconsole\";\nimport \"vant/lib/index.css\";\nif (import.meta.env.MODE == \"development\") {\n} else {\n  // new VConsole();\n}\n\ncreateApp(App).mount(\"#app\");\nconsole.log(import.meta.env);\n"],"names":["require_index_73a726c7","__commonJSMin","exports","relList","link","processPreload","mutations","mutation","node","getFetchOpts","script","fetchOpts","makeMap","str","expectsLowerCase","map","list","i","val","specialBooleanAttrs","isSpecialBooleanAttr","includeBooleanAttr","value","normalizeStyle","isArray","res","item","normalized","isString","parseStringStyle","key","isObject","listDelimiterRE","propertyDelimiterRE","cssText","ret","tmp","normalizeClass","name","EMPTY_OBJ","EMPTY_ARR","NOOP","NO","onRE","isOn","isModelListener","extend","remove","arr","el","hasOwnProperty","hasOwn","isMap","toTypeString","isSet","isFunction","isSymbol","isPromise","objectToString","toRawType","isPlainObject","isIntegerKey","isReservedProp","cacheStringFunction","fn","cache","camelizeRE","camelize","_","c","hyphenateRE","hyphenate","capitalize","toHandlerKey","hasChanged","oldValue","invokeArrayFns","fns","arg","def","obj","toNumber","n","_globalThis","getGlobalThis","activeEffectScope","EffectScope","detached","currentEffectScope","fromParent","l","last","recordEffectScope","effect","scope","createDep","effects","dep","wasTracked","trackOpBit","newTracked","initDepMarkers","deps","finalizeDepMarkers","ptr","targetMap","effectTrackDepth","maxMarkerBits","activeEffect","ITERATE_KEY","MAP_KEY_ITERATE_KEY","ReactiveEffect","scheduler","parent","lastShouldTrack","shouldTrack","cleanupEffect","trackStack","pauseTracking","resetTracking","track","target","type","depsMap","trackEffects","debuggerEventExtraInfo","trigger","newValue","oldTarget","triggerEffects","triggerEffect","isNonTrackableKeys","builtInSymbols","get","createGetter","shallowGet","readonlyGet","arrayInstrumentations","createArrayInstrumentations","instrumentations","args","toRaw","isReadonly","shallow","receiver","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","targetIsArray","isRef","readonly","reactive","set","createSetter","shallowSet","isShallow","hadKey","result","deleteProperty","has","ownKeys","mutableHandlers","readonlyHandlers","shallowReactiveHandlers","toShallow","getProto","v","get$1","rawTarget","rawKey","wrap","toReadonly","toReactive","has$1","size","add","set$1","deleteEntry","clear","hadItems","createForEach","callback","thisArg","observed","createIterableMethod","method","targetIsMap","isPair","isKeyOnly","innerIterator","done","createReadonlyMethod","createInstrumentations","mutableInstrumentations","shallowInstrumentations","readonlyInstrumentations","shallowReadonlyInstrumentations","createInstrumentationGetter","mutableCollectionHandlers","shallowCollectionHandlers","readonlyCollectionHandlers","targetTypeMap","rawType","getTargetType","createReactiveObject","shallowReactive","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","proxy","isReactive","isProxy","raw","markRaw","trackRefValue","ref","triggerRefValue","newVal","createRef","rawValue","RefImpl","__v_isShallow","useDirectValue","unref","shallowUnwrapHandlers","proxyRefs","objectWithRefs","_a","ComputedRefImpl","getter","_setter","isSSR","self","computed","getterOrOptions","debugOptions","setter","onlyGetter","callWithErrorHandling","instance","err","handleError","callWithAsyncErrorHandling","values","throwInDev","contextVNode","cur","exposedInstance","errorInfo","errorCapturedHooks","appErrorHandler","logError","isFlushing","isFlushPending","queue","flushIndex","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","resolvedPromise","currentFlushPromise","nextTick","p","findInsertionIndex","id","start","end","middle","getId","queueJob","job","queueFlush","flushJobs","invalidateJob","queuePostFlushCb","cb","flushPreFlushCbs","seen","flushPostFlushCbs","deduped","a","b","comparator","diff","check","emit$1","event","rawArgs","props","modelArg","modifiersKey","number","trim","handlerName","handler","onceHandler","normalizeEmitsOptions","comp","appContext","asMixin","cached","hasExtends","extendEmits","normalizedFromExtend","isEmitListener","options","currentRenderingInstance","currentScopeId","setCurrentRenderingInstance","prev","pushScopeId","popScopeId","withCtx","ctx","isNonScopedSlot","renderFnWithContext","setBlockTracking","prevInstance","renderComponentRoot","Component","vnode","withProxy","propsOptions","slots","attrs","emit","render","renderCache","data","setupState","inheritAttrs","fallthroughAttrs","proxyToUse","normalizeVNode","getFunctionalFallthrough","blockStack","createVNode","Comment","root","keys","shapeFlag","filterModelListeners","cloneVNode","shouldUpdateComponent","prevVNode","nextVNode","optimized","prevProps","prevChildren","component","nextProps","nextChildren","patchFlag","emits","hasPropsChanged","dynamicProps","emitsOptions","nextKeys","updateHOCHostEl","isSuspense","queueEffectWithSuspense","suspense","provide","currentInstance","provides","parentProvides","inject","defaultValue","treatDefaultAsFactory","watchEffect","doWatch","INITIAL_WATCHER_VALUE","watch","source","immediate","deep","flush","onTrack","onTrigger","forceTrigger","isMultiSource","isShallow$1","s","traverse","cleanup","onCleanup","baseGetter","isInSSRComponentSetup","queuePostRenderEffect","instanceWatch","publicThis","createPathGetter","setCurrentInstance","unsetCurrentInstance","path","segments","useTransitionState","state","onMounted","onBeforeUnmount","TransitionHookValidator","BaseTransitionImpl","getCurrentInstance","prevTransitionKey","children","getTransitionRawChildren","child","rawProps","mode","emptyPlaceholder","innerChild","getKeepAliveChild","enterHooks","resolveTransitionHooks","setTransitionHooks","oldChild","oldInnerChild","transitionKeyChanged","getTransitionKey","isSameVNodeType","leavingHooks","earlyRemove","delayedLeave","leavingVNodesCache","getLeavingNodesForType","BaseTransition","leavingVNodes","appear","persisted","onBeforeEnter","onEnter","onAfterEnter","onEnterCancelled","onBeforeLeave","onLeave","onAfterLeave","onLeaveCancelled","onBeforeAppear","onAppear","onAfterAppear","onAppearCancelled","callHook","hook","callAsyncHook","hooks","leavingVNode","afterHook","cancelHook","called","cancelled","isKeepAlive","keepComment","parentKey","keyedFragmentCount","Fragment","defineComponent","isAsyncWrapper","onActivated","registerKeepAliveHook","onDeactivated","wrappedHook","current","injectHook","injectToKeepAliveRoot","keepAliveRoot","injected","onUnmounted","prepend","createHook","lifecycle","onBeforeMount","onBeforeUpdate","onUpdated","onServerPrefetch","onRenderTriggered","onRenderTracked","onErrorCaptured","invokeDirectiveHook","bindings","oldBindings","binding","NULL_DYNAMIC_COMPONENT","renderList","renderItem","index","getPublicInstance","isStatefulComponent","getExposeProxy","publicPropertiesMap","resolveMergedOptions","PublicInstanceProxyHandlers","accessCache","normalizedProps","shouldCacheAccess","publicGetter","cssModule","globalProperties","descriptor","applyOptions","dataOptions","computedOptions","methods","watchOptions","provideOptions","injectOptions","created","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","renderTracked","renderTriggered","errorCaptured","serverPrefetch","expose","components","directives","filters","resolveInjections","methodHandler","opt","createWatcher","registerLifecycleHook","register","_hook","exposed","checkDuplicateProperties","unwrapRef","normalizeInject","h","r","base","mixins","extendsOptions","globalMixins","optionMergeStrategies","resolved","m","mergeOptions","to","from","strats","strat","internalOptionMergeStrats","mergeDataFn","mergeObjectOptions","mergeAsArray","mergeWatchOptions","mergeInject","merged","initProps","isStateful","InternalObjectKey","setFullProps","updateProps","rawPrevProps","rawCurrentProps","hasAttrsChanged","propsToUpdate","camelizedKey","resolvePropValue","kebabKey","needCastKeys","rawCastValues","camelKey","castValues","isAbsent","hasDefault","propsDefaults","normalizePropsOptions","extendProps","normalizedKey","validatePropName","prop","booleanIndex","getTypeIndex","stringIndex","getType","ctor","match","isSameType","expectedTypes","t","isInternalKey","normalizeSlotValue","normalizeSlot","rawSlot","normalizeObjectSlots","rawSlots","normalizeVNodeSlots","initSlots","updateSlots","needDeletionCheck","deletionComparisonTarget","createAppContext","uid","createAppAPI","hydrate","rootComponent","rootProps","context","installedPlugins","isMounted","app","version","plugin","mixin","directive","rootContainer","isHydrate","isSVG","setRef","rawRef","oldRawRef","parentSuspense","isUnmount","refValue","owner","oldRef","refs","_isString","_isRef","doSet","existing","createRenderer","baseCreateRenderer","createHydrationFns","hostInsert","hostRemove","hostPatchProp","hostCreateElement","hostCreateText","hostCreateComment","hostSetText","hostSetElementText","hostParentNode","hostNextSibling","hostSetScopeId","hostInsertStaticContent","patch","n1","n2","container","anchor","parentComponent","slotScopeIds","getNextHostNode","unmount","Text","processText","processCommentNode","Static","mountStaticNode","processFragment","processElement","processComponent","internals","moveStaticNode","nextSibling","next","removeStaticNode","mountElement","patchElement","vnodeHook","transition","dirs","mountChildren","unmountChildren","invokeVNodeHook","setScopeId","needCallTransitionHooks","scopeId","subTree","parentVNode","cloneIfMounted","dynamicChildren","oldProps","newProps","toggleRecurse","areChildrenSVG","patchBlockChildren","patchChildren","patchProps","oldChildren","newChildren","fallbackContainer","oldVNode","newVNode","fragmentStartAnchor","fragmentEndAnchor","fragmentSlotScopeIds","traverseStaticChildren","mountComponent","updateComponent","initialVNode","createComponentInstance","setupComponent","setupRenderEffect","placeholder","updateComponentPreRender","componentUpdateFn","bu","u","originNext","nextTree","prevTree","bm","isAsyncWrapperVNode","hydrateNode","hydrateSubTree","scopedInitialVNode","update","c1","prevShapeFlag","c2","patchKeyedChildren","patchUnkeyedChildren","oldLength","newLength","commonLength","nextChild","parentAnchor","l2","e1","e2","nextPos","s1","s2","keyToNewIndexMap","j","patched","toBePatched","moved","maxNewIndexSoFar","newIndexToOldIndexMap","prevChild","newIndex","increasingNewIndexSequence","getSequence","nextIndex","move","moveType","leave","delayLeave","afterLeave","performLeave","doRemove","shouldInvokeDirs","shouldInvokeVnodeHook","unmountComponent","removeFragment","performRemove","bum","um","allowed","ch1","ch2","len","arrI","isTeleport","currentBlock","openBlock","disableTracking","closeBlock","isBlockTreeEnabled","setupBlock","createElementBlock","createBaseVNode","isVNode","normalizeKey","normalizeRef","ref_key","ref_for","isBlockNode","needFullChildrenNormalization","normalizeChildren","_createVNode","cloned","isClassComponent","guardReactiveProps","klass","style","extraProps","mergeRef","mergedProps","mergeProps","createTextVNode","text","flag","createStaticVNode","content","numberOfNodes","slot","slotFlag","toMerge","incoming","emptyAppContext","uid$1","setupResult","setupStatefulComponent","setup","setupContext","createSetupContext","resolvedResult","handleSetupResult","e","finishComponentSetup","compile","skipOptions","template","isCustomElement","compilerOptions","delimiters","componentCompilerOptions","finalCompilerOptions","createAttrsProxy","computed$1","propsOrChildren","svgNS","doc","templateContainer","nodeOps","tag","is","selector","before","wrapper","patchClass","transitionClasses","patchStyle","isCssString","setStyle","currentDisplay","importantRE","prefixed","autoPrefix","prefixes","prefixCache","rawName","xlinkNS","patchAttr","isBoolean","patchDOMProp","needRemove","addEventListener","removeEventListener","patchEvent","prevValue","nextValue","invokers","existingInvoker","parseName","invoker","createInvoker","optionsModifierRE","cachedNow","getNow","initialValue","patchStopImmediatePropagation","originalStop","nativeOnRE","patchProp","shouldSetAsProp","DOMTransitionPropsValidators","systemModifiers","modifierGuards","modifiers","withModifiers","guard","rendererOptions","renderer","ensureRenderer","createApp","mount","containerOrSelector","normalizeContainer","isDef","isNumeric","isIOS","inBrowser","object","toArray","unknownProp","numericProp","truthProp","makeNumericProp","defaultVal","makeStringProp","useParent","unlink","internalChildren","ref2","flattenVNodes","children2","sortChildren","publicChildren","vnodes","orderedPublicChildren","indexA","indexB","useChildren","getCurrentInstance2","onMountedOrActivated","onActivated2","useEventListener","listener","passive","capture","attached","target2","element","unref2","onUnmounted2","onDeactivated2","oldVal","width","height","useWindowSize","ref4","CUSTOM_FIELD_INJECTION_KEY","setScrollTop","getRootScrollTop","setRootScrollTop","checkIsIOS","resetScroll","stopPropagation","preventDefault","isStopPropagation","addUnit","getSizeStyle","originSize","kebabCase","trimExtraChar","char","regExp","formatNumber","allowDot","allowMinus","assignKey","deepAssign","stdin_default","year","month","maxRange","discount","condition","count","lang","messages","defaultMessages","Locale","newLang","newMessages","createTranslate","prefix","locale","message","genBem","mods","createBEM","createNamespace","prefixedName","BORDER","BORDER_SURROUND","BORDER_TOP_BOTTOM","FORM_KEY","withInstall","useExpose","apis","routeProps","route","url","replace","router","useRoute","vm","bem","badgeProps","hasContent","showZero","renderContent","dot","max","style2","x","y","renderBadge","Badge","_Badge","setGlobalZIndex","CONFIG_PROVIDER_KEY","configProviderProps","mapThemeVarsToCSSVars","themeVars","cssVars","isImage","name2","iconProps","config","classPrefix","badge","color","isImageIcon","_mergeProps","Icon","_Icon","SpinIcon","CircularIcon","loadingProps","spinnerStyle","renderText","vertical","Loading","_Loading","buttonProps","renderLoadingIcon","renderIcon","getStyle","plain","onClick","block","round","square","loading","disabled","hairline","nativeType","iconPosition","classes","Button","_Button","cellSharedProps","cellProps","renderLabel","renderTitle","renderValue","hasTitle","renderLeftIcon","renderRightIcon","_b","center","border","isLink","required","clickable","Cell","_Cell","formProps","linkChildren","getFieldsByNames","names","field","validateSeq","resolve","reject","errors","promise","error","validateAll","fields","validateField","matched","validate","resetValidation","getValidationStatus","form","scrollToField","getValues","submit","onSubmit","Form","_Form","isEmptyValue","runSyncRule","rule","runRuleValidator","returnVal","getRuleMessage","startComposing","endComposing","resizeTextarea","input","autosize","scrollTop","maxHeight","minHeight","mapInputType","getStringLength","cutString","maxlength","useId","fieldSharedProps","fieldProps","inputRef","clearIconRef","customValue","getModelValue","getProp","showClear","hasValue","formValue","runRules","rules","endValidate","validateWithTrigger","validateTrigger","defaultTrigger","limitValueLength","modelValue","updateValue","isNumber","onInput","blur","focus","adjustTextareaSize","onFocus","onBlur","onClickInput","onClickLeftIcon","onClickRightIcon","onClear","showError","labelStyle","labelWidth","onKeypress","getInputId","renderInput","controlClass","inputAttrs","leftIconSlot","rightIconSlot","renderWordLimit","_createTextVNode","renderMessage","errorMessageAlign","colon","renderFieldBody","labelAlign","Label","LeftIcon","Field","_Field","cellGroupProps","renderGroup","_Fragment","CellGroup","_CellGroup","username","password","divDom","ContainmentType","PlaneIntersectionType","_defineProperties","_createClass","Constructor","protoProps","staticProps","MathUtil","min","d","Vector3","left","right","out","ax","ay","az","bx","by","bz","z","_x","_y","_z","w","quaternion","qx","qy","qz","qw","ix","iy","iz","iw","_proto","array","offset","outOffset","BoundingBox","extent","points","point","sphere","radius","matrix","box1","box2","minX","minY","minZ","maxX","maxY","maxZ","CollisionUtil","plane","distance","box","normal","front","back","ray","zeroTolerance","dir","position","origin","direction","dirX","dirY","dirZ","oriX","oriY","oriZ","tmax","inverse","t1","t2","temp","_inverse","_t","_t2","_temp","_inverse2","_t3","_t4","_temp2","discriminant","boxA","boxB","sphereA","sphereB","radiisum","closestPoint","frustum","intersectionType","Plane","factor","point0","point1","point2","x0","y0","z0","x1","y1","z1","x2","y2","z2","yz","xz","xy","invPyth","BoundingFrustum","me","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","nearNormal","farNormal","leftNormal","rightNormal","topNormal","bottomNormal","Matrix3x3","le","re","oe","l11","l12","l13","l21","l22","l23","l31","l32","l33","r11","r12","r13","r21","r22","r23","r31","r32","r33","se","ee","inv","xx","yx","yy","zx","zy","zz","wx","wy","wz","_translation","ae","a11","a12","a13","a21","a22","a23","a31","a32","a33","b12","b22","b32","det","mat4","a14","a24","a34","a41","a42","a43","a44","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","translation","srce","Quaternion","aw","bw","axis","rad","normalAxis","yaw","pitch","roll","halfRoll","halfPitch","halfYaw","sinRoll","cosRoll","sinPitch","cosPitch","sinYaw","cosYaw","cosYawPitch","sinYawPitch","scale","sqrt","half","invDot","scale0","scale1","cosom","omega","sinom","_w","length","quat","zw","yw","xw","Matrix","l14","l24","l34","l41","l42","l43","l44","r14","r24","r34","r41","r42","r43","r44","rotation","sx","sy","sz","eye","up","xAxis","yAxis","zAxis","bottom","top","near","far","lr","bt","nf","fovY","aspect","f","b13","b21","b23","b31","b33","rm","rme","xs","ys","zs","invSX","invSY","invSZ","trace","_s","_s2","_s3","Ray","Vector2","Vector4","q","Color","g","Rect","SphericalHarmonics3","deltaSolidAngle","coe","bv0","bv1","bv2","bv3","bv4","bv5","bv6","bv7","bv8","src","sh","enumerableOnly","symbols","sym","_objectSpread2","_defineProperty","_extends","_inheritsLoose","subClass","superClass","_setPrototypeOf","_getPrototypeOf","o","_isNativeReflectConstruct","_construct","Parent","Class","_isNativeFunction","_wrapNativeSuper","_cache","Wrapper","_assertThisInitialized","_unsupportedIterableToArray","minLen","_arrayLikeToArray","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","_initializerDefineProperty","property","_applyDecoratedDescriptor","decorators","desc","decorator","Util","rst","k","blob","fileName","removeFromArray","ObjectValues","Utils","pathArr","string","charCodeOfDot","rePropName","expression","quote","subString","reEscapeChar","AssetPromiseStatus","AssetPromise","_Promise","promises","setProgress","completed","total","results","executor","_this","newReject","progress","_iterator","_step","reason","ResourceManager","loader","extNames","engine","assetInfo","_this2","_this$_loadingPromise","_this2$_loadingPromis","instanceId","refId","isClone","_this3","asset","_assetInfo$type","_assetInfo$retryCount","_assetInfo$timeout","_assetInfo$retryInter","_assetInfo$url","_this4","info","infoUrl","forceDestroy","objects","resourceLoader","assetType","extnames","useCache","Target","Event","bubbles","CloneMode","ignoreClone","propertyKey","CloneManager","assignmentClone","shallowClone","deepClone","cloneModes","objectType","cloneModeMap","subCloneModes","customSource","_i","_n","sourceItem","itemType","sourceTypeArrayItem","targetTypeArrayItem","sourceArrayItem","targetArrayItem","sourceCustomItem","targetCustomItem","targetItem","_class$g","_descriptor$d","EventDispatcher","listeners","once","events","noop","debug","warn","Logger","Time","now","_class$f","_descriptor$c","_descriptor2$b","_class2$c","EngineObject","_this$_engine$resourc","DataType","GLCapabilityType","DisorderedArray","elements","lastIndex","ShaderMacroCollection","outMask","minSize","maxSize","minMask","maxMask","macro","mask","maskStart","endIndex","macroCollection","addMask","addSize","maskSize","removeMask","unionMask","ComponentsManager","replaced","animation","onStartScripts","deltaTime","camera","transform","forward","disableScripts","destroyScripts","disableScript","scripts","componentContainer","ComponentCloner","cloneMode","sourcePropS","tarProp","sourcePropD","_tarProp","ComponentsDependencies","currentComponent","dependentComponent","entity","dependentComponents","invDependencies","_len","_key","Layer","UpdateFlag","flagManagers","BoolUpdateFlag","_UpdateFlag","_class$e","_descriptor$b","_descriptor2$a","_descriptor3$9","_descriptor4$9","_descriptor5$9","_EngineObject","ListenerUpdateFlag","param","UpdateFlagManager","updateFlags","_class$d","_descriptor$a","_descriptor2$9","_descriptor3$8","_descriptor4$8","_descriptor5$8","_descriptor6$8","_descriptor7$8","_descriptor8$8","_descriptor9$7","_descriptor10$4","_descriptor11$4","_descriptor12$4","_descriptor13$3","_class2$b","Transform","_Component","TransformFlag","translationOrX","relativeToLocalOrY","relativeToLocal","_translate2","rotationOrX","angle","targetPosition","worldUp","axisLen","rotMat","isInvert","nodeChildren","_nodeChildren$i$trans","_nodeChildren$i$trans2","_nodeChildren$i$trans3","_nodeChildren$i$trans4","_nodeChildren$i$trans5","_nodeChildren$i$trans6","parentCache","invRotation","invRotationMat","worldRotScaMat","scaMat","targetDirtyFlags","rotateQuat","_tempVec30","radFactor","rotQuat","worldPosition","worldRotation","worldRotationQuaternion","invParentQuaternion","rotationQuaternion","scaleMat","Entity","_child","scene","indexOrChild","newScene","_child2","grandson","splits","split","_child3","cloneEntity","_child4","sourceComp","targetComp","_i2","oldParent","oldSibling","_index","childCount","siblingIndex","parentScene","_i3","isActive","activeChangedComponents","_i4","_child5","_i5","_child6","sibling","oldIndex","_child7","_i6","_child8","FeatureManager","IFeature","featureArray","objectArray","_engine","features","feature","Keys","KeyboardManager","htmlCanvas","frameCount","nativeEvents","curFrameDownList","curFrameUpList","curHeldDownKeyToIndexMap","curFrameHeldDownList","downKeyToFrameCountMap","upKeyToFrameCountMap","evt","codeKey","delIndex","swapCode","CameraClearFlags","HitResult","PhysicsManager","obj1","obj2","shape1","shape2","_script","_len2","_script2","_len3","_script3","_len4","_script4","_script5","_len5","_script6","physics","distanceOrResult","layerMaskOrResult","outHitResult","hitResult","layerMask","idx","fixedTimeStep","nativePhysicsManager","componentsManager","simulateTime","step","colliderShape","collider","controller","gravity","PhysicsMaterialCombineMode","PhysicsMaterial","_dec$5","_class$c","_class2$a","_descriptor$9","Collider","shape","oldCollider","shapes","worldScale","ControllerNonWalkableMode","CharacterController","_Collider","disp","minDist","elapsedTime","ColliderShape","BoxColliderShape","_ColliderShape","SphereColliderShape","PlaneColliderShape","ColliderShapeUpAxis","CapsuleColliderShape","_dec$4","_class$b","Joint","JointCollider","connectedAnchor","FixedJoint","_Joint","HingeJointFlag","HingeJoint","swingOffset","SpringJoint","JointLimits","JointMotor","ControllerCollisionFlag","StaticCollider","DynamicCollider","CollisionDetectionMode","force","torque","positionOrRotation","DynamicColliderConstraints","PointerPhase","PointerButton","Pointer","PointerManager","onPointerEvent","rayCastEntity","keyEventCount","keyEventList","PointerKeyEvent","pointers","deleteCount","totalCount","pointerId","phase","lastCount","pointerPool","pointer","pointerIndex","leavePointer","updatedPointer","upMap","downMap","upList","downList","activePointerCount","pixelRatioW","pixelRatioH","nativeEventsLen","pointerButton","pointerCount","currentPosition","lastX","lastY","lastNativeEvent","cameras","_camera$viewport","vpX","vpY","vpW","vpH","_scripts","pressedEntity","sameTarget","WheelManager","delta","InputManager","canvas","enabled","RenderQueueType","RefObject","resourceManager","refCount","ShaderDataGroup","Texture","_RefObject","ShaderPropertyType","common","common_vert","common_frag","color_share","normal_share","uv_share","worldpos_share","shadow_share","fog_share","begin_normal_vert","begin_position_vert","position_vert","color_vert","normal_vert","skinning_vert","blendShape_input","blendShape_vert","uv_vert","worldpos_vert","shadow_vert","fog_vert","light_frag_define","mobile_material_frag","fog_frag","begin_mobile_frag","begin_viewdir_frag","mobile_blinnphong_frag","noise_common","noise_cellular_2D","noise_cellular_2x2","noise_cellular_2x2x2","noise_cellular_3D","noise_cellular","noise_perlin_2D","noise_perlin_3D","noise_perlin_4D","noise_perlin","noise_psrd_2D","noise_simplex_2D","noise_simplex_3D_grad","noise_simplex_3D","noise_simplex_4D","noise_simplex","pbr_frag_define","pbr_helper","brdf","direct_irradiance_frag_define","ibl_frag_define","pbr_frag","PBRShaderLib","normal_get","ShaderLib","ShaderFactory","macros","regex","slice","extensions","shader","isFrag","isMRT","declaration","mrtIndexSet","ShaderMacro","maskIndex","maskValue","macroNameIDMap","nameID","ColorSpace","ShaderUniform","rhi","shaderUniform","cacheValue","textureIndices","texture","ShaderUniformBlock","ShaderProgram","lines","limitLength","line","vertexSource","fragmentSource","uniformBlock","shaderData","propertyValueMap","constUniforms","uniform","textureUniforms","_this$otherUniformBlo","gl","uniforms","isTexture","group","Shader","vertexShader","fragmentShader","program","shaderType","shaderSource","uniformInfos","attributeInfos","_ref","location","defaultTexture","defaultTextures","glTextureIndices","textureIndex","_ref2","uniformCount","attributeCount","ShaderProperty","shaderMap","maskMap","counter","bit","propertyNameMap","propertyName","shaderProperty","subMaskMap","subMask","compileMacros","shaderProgramPool","shaderProgram","isWebGL2","macroNameList","macroNameStr","versionStr","precisionStr","ShaderData","lastValue","lastMacro","currentMacro","macroMap","properties","propertyIdMap","targetPropertyValueMap","_property","targetProperty","_property2","BlendFactor","BlendOperation","ColorWriteMask","RenderTargetBlendState","BlendState","blendFactor","blendOperation","hardwareRenderer","lastRenderState","lastState","lastTargetBlendState","_this$targetBlendStat","colorBlendOperation","alphaBlendOperation","sourceColorBlendFactor","destinationColorBlendFactor","sourceAlphaBlendFactor","destinationAlphaBlendFactor","colorWriteMask","blendColor","alphaToCoverage","CompareFunction","DepthState","compareFunction","writeEnabled","CullMode","RasterState","frontFaceInvert","cullMode","depthBias","slopeScaledDepthBias","cullFaceEnable","StencilOperation","StencilState","referenceValue","compareFunctionFront","compareFunctionBack","failOperationFront","zFailOperationFront","passOperationFront","failOperationBack","zFailOperationBack","passOperationBack","writeMask","referenceOrMaskChange","RenderState","Material","dest","renderElement","ClassPool","pool","RenderElement","MeshRenderElement","_RenderElement","mesh","subMesh","material","RenderContext","SpriteElement","renderDate","SpriteMaskElement","renderData","SpriteMaskInteraction","_dec$3","_class$a","_class2$9","_descriptor$8","_descriptor2$8","_descriptor3$7","_descriptor4$7","_descriptor5$7","_descriptor6$7","_descriptor7$7","_descriptor8$7","_descriptor9$6","_descriptor10$3","_descriptor11$3","_descriptor12$3","_descriptor13$2","_descriptor14$1","_descriptor15$1","_descriptor16$1","_class3$1","Renderer","prototype","materials","_material","indexOrMaterial","materialsInstance","internalMaterials","materialsInstanced","internalMaterial","_internalMaterial","_material2","worldMatrix","mvMatrix","mvpMatrix","mvInvMatrix","normalMatrix","_materials$i","worldBounds","insMaterial","changeFlag","StaticInterfaceImplement","constructor","_dec$2","_class$9","_class2$8","SimpleSpriteAssembler","vertexCount","positions","uvs","sprite","_sprite$pivot","pivotX","pivotY","wE","pWE","spritePositions","_spritePositions$i","spriteUVs","renderUVs","_spriteUVs$","_spriteUVs$2","RenderData2D","triangles","SpritePropertyDirtyFlag","SpriteMaskLayer","_class$8","_descriptor$7","_descriptor2$7","_descriptor3$6","_descriptor4$6","_descriptor5$6","_descriptor6$6","_descriptor7$6","_descriptor8$6","_descriptor9$5","_class2$7","SpriteMask","_Renderer","_this$sprite","DirtyFlag$3","spriteMaskElementPool","maskElement","dirtyFlag","_this$sprite2","Engine","DirtyFlag","VertexElementFormat","BufferUsage","IndexFormat","BufferUtil","bufferUsage","indexFormat","format","VertexElement","semantic","bindingIndex","instanceStepRate","BufferBindFlag","SetDataOptions","Buffer","byteLengthOrData","glBufferUsage","glBindTarget","bufferByteOffset","dataOffset","dataLength","byteSize","dataByteLength","isArrayBufferView","subData","MeshTopology","IndexBufferBinding","buffer","SubMesh","topology","Mesh","startOrSubMesh","subMeshes","vertexElementMap","lastBinding","vertexBufferBindings","VertexBufferBinding","stride","RenderBufferDepthFormat","TextureCubeFace","TextureFilterMode","TextureFormat","TextureWrapMode","RenderTarget","renderTexture","depth","antiAliasing","_colorTextures","_colorTexture","faceIndex","mipLevel","Texture2D","_Texture","mipmap","colorBuffer","imageSource","flipY","premultiplyAlpha","xOrMipLevelOrOut","yOrMipLevel","mipLevelOrOut","argsLength","Texture2DArray","offsetIndex","elementIndex","TextureCube","face","BlendShapeManager","modelMesh","blendShape","subDataDirtyFlags","skinnedMeshRenderer","blendShapeCount","maxBlendCount","condensedBlendShapeWeights","maxSupportCount","vertexCountChange","noLongerAccessible","useTexture","createHost","blendShapes","blendShapeNamesMap","dataChangedFlags","vertexBuffers","vertexFloatCount","vertexByteCount","maxCountSingleBuffer","bufferCount","floatCount","containCount","byteLength","usage","blendShapeBuffer","maxTextureSize","vertexPixelStride","textureWidth","textureHeight","blendShapeDataTexture","vertices","storeInfos","blendShapeFloatStride","blendShapeByteStride","dataChangedFlag","frames","endFrame","bufferIndex","indexInBuffer","bufferFloatStride","storeInfo","_endFrame","deltaPositions","deltaPosition","_endFrame2","deltaNormals","_j","_start","deltaNormal","_endFrame3","deltaTangents","_j2","_start2","deltaTangent","vertexTexture","subDirtyFlag","subBlendShapeDataStride","_endFrame4","tangent","notFirst","vertexElementCount","useBlendNormal","useBlendTangent","vertexElements","vertexBufferStoreInfo","condensedIndex","elementOffset","_vertexBufferStoreInf","vertexElement","_vertexElement","_vertexElement2","blendShapeWeights","condensedWeightsCount","thresholdWeight","thresholdIndex","weight","condensedWeight","ModelMesh","_Mesh","ValueChanged","normals","colors","boneWeights","boneIndices","tangents","uv","channelIndex","_channelIndex","_channelIndex2","indices","_this$_vertexBufferBi","_this$_indexBufferBin","vertexElementChanged","vertexBuffer","elementCount","newVertexBuffer","_vertices","indexBuffer","newIndexBuffer","blendShapeManager","attributeMode","POSITION_VERTEX_ELEMENT","_vertexStrideFloat","_vertexCount","_positions","_normals","_colors","_vertexChangeFlag","_boneWeights","_boneIndices","_tangents","_uv","_uv1","_uv2","_uv3","_uv4","_uv5","_uv6","_uv7","_start3","_verticesUint8","_start4","joint","internalStart","_start5","_start6","_uv8","_i7","_start7","_uv9","_i8","_start8","_uv10","_i9","_start9","_uv11","_i10","_start10","_uv12","_i11","_start11","_uv13","_i12","_start12","_uv14","_i13","_start13","_uv15","Skin","_class$7","_descriptor$6","_descriptor2$6","_class2$6","MeshRenderer","renderPipeline","renderElementPool","localBounds","lastMesh","_class$6","_descriptor$5","_descriptor2$5","_descriptor3$5","_descriptor4$5","_descriptor5$5","_descriptor6$5","_descriptor7$5","_descriptor8$5","_class2$5","SkinnedMeshRenderer","_MeshRenderer","skin","joints","jointNodes","maxAttribUniformVec4","maxJoints","jointCount","_maxJoints","nodeName","ibms","matrixPalette","worldToLocal","mat","newBlendShapeCount","lastBlendShapeWeights","newBlendShapeWeights","PrimitiveMesh","rectangleCount","thetaRange","alphaRange","countReciprocal","segmentsReciprocal","alphaDelta","thetaDelta","sinTheta","posX","posY","posZ","bounds","halfWidth","halfHeight","halfDepth","horizontalSegments","verticalSegments","horizontalCount","verticalCount","gridWidth","gridHeight","horizontalCountReciprocal","horizontalSegmentsReciprocal","verticalSegmentsReciprocal","_x2","radiusTop","radiusBottom","radialSegments","heightSegments","radialCount","unitHeight","torsoVertexCount","torsoRectangleCount","capTriangleCount","totalVertexCount","radialCountReciprocal","radialSegmentsReciprocal","heightSegmentsReciprocal","indicesOffset","thetaStart","radiusDiff","slope","radiusSlope","theta","cosTheta","_x3","_y2","diameterTopReciprocal","diameterBottomReciprocal","positionStride","curPosBottom","curPosX","curPosZ","curPosTop","topCapIndex","bottomIndiceIndex","topIndiceIndex","firstStride","secondStride","radiusMax","tubeRadius","tubularSegments","arc","cosV","sinV","cosU","sinU","centerX","centerY","outerRadius","curRadius","_x4","_y3","curPos","capVertexCount","capRectangleCount","_x5","_y4","indexCount","capAlphaRange","posIndex","_x6","_y5","BufferMesh","bufferOrBinding","strideOrFirstIndex","isBinding","firstIndex","needLength","BlendShapeFrame","BlendShape","frameOrWeight","_frame","frame","useNormal","useTangent","useBlendShapeNormal","useBlendShapeTangent","Basic2DBatcher","MAX_VERTEX_COUNT","_meshes","_meshCount","replaceMaterial","batchedQueue","meshes","indiceBuffers","_n2","vertexStride","_flushId","vertexIndex","indiceIndex","vertexStartIndex","curIndiceStartIndex","curMeshIndex","preElement","_curElement","triangleNum","SpriteMaskBatcher","_Basic2DBatcher","curElement","preShaderData","curShaderData","textureProperty","alphaCutoffProperty","_element$renderData","curUV","sceneData","cameraData","spriteMaskElement","stencilState","op","SpriteMaskManager","preMaskLayer","curMaskLayer","allMasks","commonLayer","addLayer","reduceLayer","allMaskElements","influenceLayers","maskRenderElement","_maskRenderElement","TextRenderElement","BackgroundMode","BackgroundTextureFillMode","Sky","Background","_backgroundTextureMesh","fitWidthScale","fitHeightScale","DiffuseMode","AmbientLight","scenes","sceneShaderData","SceneFeature","Light","LightFeature","DirectLight","_Light","lightIndex","colorStart","directionStart","lightColor","PointLight","positionStart","distanceStart","lightPosition","SpotLight","penumbraCosStart","angleCosStart","hasLight","_SceneFeature","light","directLightCount","pointLightCount","spotLightCount","lights","Scene","isRoot","oldScene","_entity","findEntity","allScenes","active","rootEntities","_entity2","rootEntity","rootEntityCount","Feature","lastAmbientLight","SceneManager","destroyOldScene","scenePromise","sourceScene","destScene","oldRootEntities","blinnPhongFs","blinnPhongVs","particleFs","particleVs","pbrFs","pbrSpecularFs","pbrVs","shadowMapFs","shadowMapVs","shadowFs","skyboxFs","skyboxVs","spriteMaskFs","spriteMaskVs","spriteFs","spriteVs","unlitFs","unlitVs","backgroundTextureVs","backgroundTextureFs","ShaderPool","ShaderProgramPool","cacheMap","maskLength","maxEndIndex","subCacheShaders","cacheKey","hierarchy","resizeLength","_k","engineFeatureManager","_EventDispatcher","settings","magentaPixel","magentaTexture2D","magentaTextureCube","magentaTexture2DArray","magentaMaterial","backgroundTextureMaterial","colorSpace","time","camera1","camera2","shaderProgramPools","renderState","SystemInfo","ua","EngineFeature","currentScene","_class$5","_descriptor$4","_descriptor2$4","_descriptor3$4","_descriptor4$4","_descriptor5$4","_descriptor6$4","_descriptor7$4","_descriptor8$4","_descriptor9$4","Script","other","passNum","RenderPass","priority","renderTarget","opaqueQueue","alphaTestQueue","transparentQueue","SpriteBatcher","preRenderer","curRenderer","leftMaskInteraction","maskManager","spriteElement","RenderQueue","items","renderCount","renderPassFlag","rendererData","materialData","switchProgram","switchRenderCount","compareFunc","third_index","v0","v1","v2","c01","c02","_tmp","c12","_tmp2","pivot","low_end","high_start","partition","order","top_elem","BasicRenderPipeline","nameOrPass","renderPass","p1","p2","pass","cubeFace","_pass$clearFlags","_pass$clearColor","background","clearFlags","_backgroundTextureMaterial","sky","_matrix","viewMatrix","projectionMatrix","_dec$1","_class$4","_class2$4","_descriptor$3","_descriptor2$3","_descriptor3$3","_descriptor4$3","_descriptor5$3","_descriptor6$3","_descriptor7$3","_descriptor8$3","_descriptor9$3","_descriptor10$2","_descriptor11$2","_descriptor12$2","_class3","MathTemp","Camera","cameraPoint","viewportPoint","nearClipPlane","farClipPlane","pointZ","invViewProjMat","viewport","_this$_renderPipeline","clipPoint","_this$_customAspectRa","aspectRatio","mimeType","defaultRetryCount","defaultTimeout","defaultInterval","request","_config$retryCount","_config$retryInterval","_config$timeout","_config$type","retryCount","retryInterval","getMimeTypeFromUrl","realRequest","requestImage","requestRes","lastError","MultiExecutor","timeout","img","onerror","timeoutId","_config$method","xhr","_xhr$response","headers","extname","execFunc","interval","Loader","className","classDefine","AssetType","RenderFace","BlendMode","TextureCoordinate","BaseMaterial","_Material","_this$renderState","depthState","targetBlendState","BlinnPhongMaterial","_BaseMaterial","baseColor","specularColor","emissiveColor","tilingOffset","PBRBaseMaterial","PBRMaterial","_PBRBaseMaterial","PBRSpecularMaterial","UnlitMaterial","TextHorizontalAlignment","TextVerticalAlignment","OverflowMode","FontStyle","SpriteAtlas","outSprites","_sprites","SpriteDrawMode","Sprite","region","DirtyFlag$2","cloneSprite","_texture","_atlasRegion","_atlasRegionOffset","_region","pixelsPerUnitReciprocal","blank","_this$_region","regionX","regionY","regionW","regionH","regionRight","regionBottom","_this$_bounds","atlasRegionOffset","_this$_region2","_this$_atlasRegion","atlasRegionX","atlasRegionY","atlasRegionW","atlasRegionH","offsetLeft","offsetTop","offsetRight","offsetBottom","realWidth","realHeight","_this$_border","borderLeft","borderBottom","borderRight","borderTop","_dec","_class$3","_class2$3","SlicedSpriteAssembler","_renderer$_renderData","_spritePositions$","_spritePositions$2","expectWidth","expectHeight","fixedLeft","fixedBottom","fixedRight","fixedTop","row","column","widthScale","heightScale","_renderer$sprite$pivo","localTransX","localTransY","realICount","rowValue","rowU","columnValue","realJCount","indexOffset","_renderer$_bounds","_class$2","_descriptor$2","_descriptor2$2","_descriptor3$2","_descriptor4$2","_descriptor5$2","_descriptor6$2","_descriptor7$2","_descriptor8$2","_descriptor9$2","_descriptor10$1","_descriptor11$1","_descriptor12$1","_descriptor13$1","_class2$2","SpriteRenderer","DirtyFlag$1","maskInteraction","compare","drawMode","FontAtlas","charInfo","space","textureSize","offsetWidth","offsetHeight","endX","endY","textureSizeReciprocal","u0","u1","Font","fontMap","font","fontAtlases","fontAtlas","CharRenderData","CharRenderDataPool","TextUtils","textContext","fontString","fontSizeInfoCache","fontName","fontSize","fontStyle","charFont","fontSizeInfo","subTexts","lineWidths","lineMaxSizes","_pixelsPerUnit","lineHeight","wrapWidth","subText","chars","charsWidth","maxAscent","maxDescent","offsetY","halfH","ascent","descent","lineCount","curWidth","_TextUtils$textContex","measureString","baseline","colorData","integerW","integerWReciprocal","sizeInfo","lineIntegerW","_class$1","_descriptor$1","_descriptor2$1","_descriptor3$1","_descriptor4$1","_descriptor5$1","_descriptor6$1","_descriptor7$1","_descriptor8$1","_descriptor9$1","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_class2$1","TextRenderer","_assertThisInitialize","spriteElementPool","textElement","charElements","charRenderDatas","charCount","charRenderData","lastStyleFont","e0","e4","e5","e6","e12","e13","e14","localPositions","topLeftX","topLeftY","worldPosition0","worldPosition1","worldPosition2","horizontalAlignment","verticalAlignment","_this$_localBounds","rendererWidth","halfRendererWidth","rendererHeight","textMetrics","charRenderDataPool","halfLineHeight","linesLen","startY","topDiff","bottomDiff","renderDataCount","lastLineIndex","lineWidth","startX","lastRenderDataCount","AnimationClipCurveBinding","AnimationEvent","AnimationProperty","Motion","AnimationClip","_Motion","parameter","_event","relativePath","curve","curveBinding","curveData","InterpolableValueType","AnimatorUtils","sX","sY","sZ","sa","sb","saw","sbw","sng","AnimatorLayerBlendingMode","AnimatorStatePlayState","LayerState","AnimationCurveOwner","weightLength","AnimationEventHandler","AnimatorStateTransition","WrapMode","AnimatorStatePlayData","stateData","offsetFrameTime","isBackwards","duration","AnimatorLayerData","srcPlayData","switchTemp","AnimatorStateData","AnimatorStateInfo","CrossCurveData","AnimatorTempValue","floatArray","_class","_descriptor","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_descriptor8","_descriptor9","_class2","Animator","stateName","layerIndex","normalizedTimeOffset","_this$_controllerUpda","animatorInfo","animatorLayerData","curState","animatorStateData","animatorController","layers","states","normalizedTransitionDuration","_this$_controllerUpda2","_this$_getAnimatorSta","_this$_getAnimatorLay","manuallyTransition","_this$_controllerUpda3","_this$_animatorLayers","_this$_animatorLayers2","curveOwners","animatorState","animatorStateDataCollection","animationCureOwners","curves","targetEntity","_targetEntity","propertyOwners","eventHandlerPool","scriptCount","eventHandlers","eventHandler","funcName","handlers","crossCurveData","curCurveIndex","nextCurveIndex","dataItem","crossCurveMark","saveFixed","destPlayData","additive","tempValue","baseValue","_value","_value2","_value3","_value4","_value5","tempQuat","firstLayer","_this$_animatorContro","blendingMode","animLayerData","crossFadeTransitionInfo","layerAdditive","layerWeight","playData","layerData","_playData$stateData","lastPlayState","lastClipTime","clipTime","playState","crossCurveDataCollection","srcCurves","srcState","srcStateData","lastSrcPlayState","srcEventHandler","destState","destStateData","lastDstPlayState","destEventHandler","destCurves","lastSrcClipTime","lastDestClipTime","crossWeight","srcPlayState","destPlayState","srcClipTime","destClipTime","_crossCurveDataCollec","curveOwner","srcCurveIndex","destCurveIndex","srcValue","destValue","_crossCurveDataCollec2","fixed","additiveValue","clip","_ref3","crossFadeTransition","transitions","animatorStateInfo","crossState","layerState","clipDuration","curClipTime","eventIndex","_eventHandler$event","_eventHandler","_eventHandler$event2","_eventHandler2","AnimatorController","layer","theLayer","AnimatorControllerLayer","StateMachineScript","animator","AnimatorState","scriptType","_index2","AnimatorStateMachine","_statesMap","originName","InterpolationType","AnimationCurve","interpolation","curIndex","curFrameTime","dur","frameIndex","nextFrameIndex","_valueType","_valueSize","curKey","nextKey","t0","p0","t3","_p","tan0","_p2","tan1","_c","_d","_p3","_tan","_p4","_tan2","_t5","_t6","_a2","_b2","_c2","_d2","_t7","_t8","_p5","_tan3","_p6","_tan4","_t9","_t10","_a3","_b3","_c3","_d3","_t11","_t12","Keyframe","InterpolableKeyframe","_Keyframe","AnimatorConditionMode","SkyBoxMaterial","DirtyFlagType","ParticleRendererBlendMode","ParticleRenderer","useUint32","startIndex","_updateDirtyFlag","getRandom","k0","k1","k2","k3","_this$_position","_positionArray","_positionRandomness","pos","_velocity","_velocityRandomness","_acceleration","_accelerationRandomness","_color","_colorRandomness","_lifetime","_size","spriteSheet","_spriteSheet","ratio","_ratio","blendState","FRAG_SHADER","VERT_SHADER","TrailMaterial","_tempVector3","TrailRenderer","mtl","mov","newIdx","appendNewPoint","lastPoint","vx","vy","vz","down","dy","cross","perpVector","texDelta","n_p","cosine","Fog","EXP2Fog","_Fog","LinearFog","Probe","_Script","renderColorTexture","_this$_activeRenderTa","cacheTarget","cacheUp","cacheDir","CubeProbe","_Probe","LightShadow","_props","fov","viewStart","projectionStart","biasStart","intensityStart","radiusStart","mapSizeStart","mapStart","ShadowMapMaterial","ShadowMapPass","_RenderPass","ShadowMaterial","ShadowPass","lightMgr","shadowMapCount","lgt","ShadowFeature","shadowMaterial","shadowMapPass","renderQueue","receiveShadow","castShadow","GLCompressedTextureInternalFormat","WebCanvas","pixelRatio","webCanvas","GLCapability","capabilityType","internalType","RGBA_ASTC_4X4_KHR","RGBA_ASTC_12X12_KHR","SRGB8_ALPHA8_ASTC_4X4_KHR","SRGB8_ALPHA8_ASTC_12X12_KHR","RGB_ETC1_WEBGL","R11_EAC","SRGB8_ALPHA8_ETC2_EAC","RGB_PVRTC_4BPPV1_IMG","RGBA_PVRTC_2BPPV1_IMG","RGB_S3TC_DXT1_EXT","RGBA_S3TC_DXT5_EXT","cap","requireExtension","shaderVertexID","standardDerivatives","shaderTextureLod","elementIndexUint","depthTexture","vertexArrayObject","instancedArrays","multipleSample","drawBuffers","astc","astc_webkit","etc","etc_webkit","etc1","etc1_webkit","pvrtc","pvrtc_webkit","s3tc","s3tc_webkit","textureFloat","textureHalfFloat","textureFloatLinear","textureHalfFloatLinear","WEBGL_colorBufferFloat","colorBufferFloat","colorBufferHalfFloat","textureFilterAnisotropic","flatItem","ext","_glKey","_extensionKey","extensionVal","maxDrawBuffers","canMSAA","GLExtensions","GLPrimitive","primitive","useVao","vao","_indexBufferBinding","_instanceCount","_glIndexType","_glIndexByteCount","_nativeBuffer2","_nativeBuffer","attributeLocation","attributes","vbo","lastBoundVbo","loc","_vertexBufferBindings","elementInfo","GLRenderStates","pname","GLTexture","isSupported","isCube","_this$_formatDetail","internalFormat","baseFormat","dataType","_this$_texture","mipmapCount","mipWidth","mipHeight","_this$_formatDetail2","_this$_texture2","frameBuffer","_mipmap","GLRenderTarget","_depth","isDepthTexture","maxAntiAliasing","colorTexture","mipChanged","_isCube","platformTexture","_GLTexture$_getRender","_this$_target","colorTextureCount","attachment","_this$_target2","_GLTexture$_getRender2","_attachment","depthRenderBuffer","MSAADepthRenderBuffer","_this$_target3","MSAAColorRenderBuffer","GLTexture2D","_GLTexture","texture2D","isCompressed","mipBit","GLTexture2DArray","texture2DArray","formatDetail","GLTextureCube","textureCube","mipSize","WebGLMode","WebGLRenderer","option","webGLMode","lv","clearColor","_engine$_lastRenderSt","clearFlag","lc","subPrimitive","_renderTarget$_platfo","drawingBufferWidth","drawingBufferHeight","_width","_height","textureID","DRACOWorker","workerSourceURL","decoderWASMBinary","taskId","cost","taskConfig","workerString","LIB_PATH","JS_FILE","WASM_FILE","WASM_WRAPPER_FILE","DRACODecoder","_config$workerLimit","jsSource","body","resources","wrapperSource","worderResources","dracoWorker","taskKey","cachedTask","taskWorker","task","worker","_regeneratorRuntime","Op","defineProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","toStringTagSymbol","define","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","record","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","pushTryEntry","locs","entry","resetTryEntry","iterable","iteratorMethod","genFun","iter","skipTempReset","rootRecord","exception","handle","caught","hasCatch","hasFinally","finallyEntry","afterLoc","finallyLoc","tryLoc","thrown","resultName","nextLoc","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_dec$r","_class$r","isBase64","_Loader","BufferLoader","base64Str","AccessorComponentType","AccessorType","AnimationChannelTargetPath","AnimationSamplerInterpolation","CameraType","ImageMimeType","MaterialAlphaMode","TextureMagFilter","TextureMinFilter","GLTFUtil","bufferLen","isColor3","il","accessorType","componentType","gltf","accessor","buffers","_bufferView$byteStrid","bufferViews","bufferView","arrayBuffer","accessorByteOffset","bufferViewByteOffset","byteOffset","accessorTypeSize","byteStride","arrayType","uint8Array","accessorByteSize","originalBufferView","typedArray","_indices$byteOffset","_indicesBufferView$by","_values$byteOffset","_valuesBufferView$byt","_accessor$sparse","indicesBufferView","valuesBufferView","indicesArrayBuffer","valuesArrayBuffer","indicesByteOffset","indicesByteLength","valuesByteOffset","valuesByteLength","indicesType","indicesArray","valuesArray","replaceIndex","_bufferView$byteOffse","_accessor$bufferView","imageBuffer","baseUrl","relativeUrl","char0","glb","UINT32_LENGTH","GLB_HEADER_MAGIC","GLB_HEADER_LENGTH","GLB_CHUNK_TYPES","dataView","header","chunkLength","chunkType","glTFData","currentOffset","parts","Parser","extensionName","extensionSchema","parseResource","parsers","extra","_parsers$i","_parsers$","_key2","extensionParser","registerExtension","parser","AnimationParser","_Parser","entities","animations","accessors","animationClipCount","animationClips","animationsIndices","gltfAnimation","channels","samplers","_gltfAnimation$name","animationClip","sampleDataCollection","_gltfSampler$interpol","gltfSampler","inputAccessor","outputAccessor","output","outputAccessorSize","samplerInterpolation","gltfChannel","channelTargetEntity","compType","interpolableValueType","sampleData","outputSize","keyframe","_keyframe","_keyframe2","_keyframe3","_keyframe4","_keyframe5","BufferParser","EntityParser","nodes","gltfNode","localMatrix","childEntity","_context$gltf","_context$gltf$scene","sceneID","sceneRoots","MaterialParser","schema","textures","_gltf$materials$i","_gltf$materials$i$ext","pbrMetallicRoughness","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","alphaMode","alphaCutoff","doubleSided","_gltf$materials$i$nam","KHR_materials_unlit","KHR_materials_pbrSpecularGlossiness","KHR_materials_clearcoat","OASIS_materials_remap","baseColorFactor","baseColorTexture","metallicFactor","roughnessFactor","metallicRoughnessTexture","_m","strength","texCoord","_context$gltf$extensi","_context$gltf$extensi2","MeshParser","meshPromises","_loop","gltfMesh","primitivePromises","_loop2","gltfPrimitive","_gltfPrimitive$extens","KHR_draco_mesh_compression","decodedGeometry","attributeSemantic","shapeIndex","accessorIdx","attributeName","shapeAccessorIdx","attributeAccessorIdx","indexAccessor","getVertexBufferData","getBlendShapeData","getIndexBufferData","targets","positionBuffer","bufferData","texturecoords","texturecoords1","texturecoords2","texturecoords3","texturecoords4","texturecoords5","texturecoords6","texturecoords7","weights","indexData","glTFMesh","glTFTargets","blendShapeNames","_name","deltaPosBuffer","deltaNorBuffer","deltaTanBuffer","SceneParser$1","SceneParser","gltfCameras","cameraID","meshID","_gltfNode$extensions","KHR_lights_punctual","cameraSchema","orthographic","perspective","xmag","ymag","zfar","znear","yfov","_zfar","_znear","gltfMeshes","skins","skinID","gltfMeshPrimitives","skinRenderer","materialIndex","remapMaterials","_gltfMeshPrimitives$i","KHR_materials_variants","defaultSceneRoot","animatorStateMachine","uniqueName","SkinParser","gltfSkins","_gltfSkins$i","inverseBindMatrices","skeleton","_gltfSkins$i$name","inverseBindMatrix","TextureParser","sampler","_ref$source","textureName","_gltf$images$source","uri","bufferViewIndex","imageName","bufferViewData","image","magFilter","minFilter","wrapS","wrapT","TextureWrapMode$1","Validator","extensionsUsed","extensionsRequired","gltfVersion","extensionRequired","GLTFParser","pipes","pipe","lastPipe","GLTFResource","_dec$q","_class$q","GLTFLoader","resource","_dec$p","_class$p","JSONLoader","HEADER_LEN","COMPRESSED_2D","getMipmaps","ktxContainer","loadMipmaps","mipmaps","level","imageSize","byteArray","isValid","identifier","getEngineFormat","formatName","khronosTextureContainerParser","facesExpected","withMipmaps","mapEngineFormat","dataSize","headerDataView","endianness","littleEndian","parsedResult","parseSingleKTX","ktx","parseCubeKTX","dataArray","mipmapsFaces","engineFormat","_dec$o","_class$o","KTXCubeLoader","parsedData","miplevel","_mipmapsFaces$face$mi","_data","_dec$n","_class$n","KTXLoader","bin","_mipmaps$miplevel","_dec$m","_class$m","Texture2DLoader","splitPath","_dec$l","_class$l","TextureCubeLoader","images","_images$","tex","_dec$k","_class$k","SpriteLoader","_dec$j","_class$j","SpriteAtlasLoader","atlasData","atlasItems","atlasItemsLen","imgs","tempRect","tempVec2","spriteAtlas","originalImg","atlasItem","sprites","sourceWidthReciprocal","sourceHeightReciprocal","atlasSprite","atlasRegion","_dec$i","_class$i","EnvLoader","arraybuffer","_Uint16Array","shArray","shByteLength","ambientLight","_dec$h","_class$h","PI","HDRLoader","pixels","inputWidth","inputHeight","textureRight","textureLeft","textureUp","textureDown","textureFront","textureBack","texSize","faceData","textureArray","rotDX1","rotDX2","fy","xv1","xv2","vDir","phi","dx","px","py","inputY","uint8array","character","endOfHeader","findFormat","lineIndex","sizeRegexp","scanLineWidth","dataRGBA","ptrEnd","rgbeStart","scanLineBuffer","numScanLines","isEncodedRun","byteValue","off","scaleFactor","maxRGB","M","_HDRLoader$_parseHead","dataPosition","cubeSize","cubeMapData","ExtensionParser","_dec$g","_ExtensionParser","gltfAttributeMap","attributeMap","attributeTypeMap","_attributeName","accessorDef","indexType","parsedGeometry","_dec$f","_schema$intensity","intensity","range","spot","_spot$innerConeAngle","innerConeAngle","_spot$outerConeAngle","outerConeAngle","_dec$e","_schema$clearcoatFact","clearcoatFactor","clearcoatTexture","_schema$clearcoatRoug","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","_dec$d","diffuseFactor","diffuseTexture","specularFactor","glossinessFactor","specularGlossinessTexture","_dec$c","_dec$b","variantNames","mappings","_mappings$i","variants","_dec$a","KHR_mesh_quantization","_dec$9","KHR_texture_transform","_dec$8","OasisMaterialsRemap","_dec$7","MaterialLoader","json","texturePromises","materialShaderData","_shaderData$_key","_macros$i","BufferReader","strByteLength","imagesLen","imagesData","_buffer","bytes","maxByteLength","term","decoderMap","decoder","FileHeader","totalLen","fileVersion","typeLen","typeUint8Array","nameLen","nameUint8Array","_dec$6","MeshDecoder","bufferReader","jsonDataString","encodedMeshData","float32Array","float32ArrayToVector3","_float32Array","_float32Array2","float32ArrayToVector2","_float32Array3","_float32Array4","_float32Array5","_float32Array6","_float32Array7","_float32Array8","_float32Array9","_float32Array10","float32ArrayToVColor","_float32Array11","float32ArrayToVector4","_float32Array12","blendShapeData","frameData","positionArray","normalsArray","tangentsArray","Texture2DDecoder","objectId","filterMode","anisoLevel","wrapModeU","wrapModeV","isPixelBuffer","mipCount","pixelBuffer","_pixelBuffer","completedCount","onComplete","ReflectionParser","entityConfig","_entityConfig$isActiv","componentConfig","assetRefId","_item$constructParams","params","methodName","methodParams","PrefabParser","entitiesMap","entitiesConfigMap","entitiesConfig","rootId","parentId","childId","rootIds","_rootIds","MeshLoader","decode","EditorTextureLoader","AnimatorControllerLoader","_callee2","_context2","stateMachineData","stateMachine","stateIndex","speed","wrapMode","clipStartNormalizedTime","clipEndNormalizedTime","clipData","_callee","_context","transitionData","targetStateName","exitTime","sourceState","SceneLoader","ambient","ambientLightPromise","backgroundPromise","skyMaterial","CoreObjects","JoyStick","ele","circle","__publicField","dis","deg","_normal","joyStick","toucheStart","touchMove","touchEnd","PhysXRuntimeMode","ShapeFlag","PhysXColliderShape","controllers","flags","PhysXPhysics","PhysXBoxColliderShape","_PhysXColliderShape","uniqueID","pxController","PhysXCapsuleColliderShape","upAxis","PhysXCharacterController","slopeLimit","pxManager","PhysXCollider","outPosition","outRotation","rot","PhysXDynamicCollider","_PhysXCollider","tempTranslation","tempRotation","PhysXPhysicsManager","QueryFlag","onContactEnter","onContactExit","onContactStay","onTriggerEnter","onTriggerExit","onTriggerStay","triggerCallback","index1","index2","TriggerEventState","subMap","_subMap","PHYSXSimulationCallbackInstance","sceneDesc","eventPool","currentEvents","shapeID","characterController","lastPXManager","hit","pxHitResult","_position","pxPosition","pxNormal","pxControllerManager","TriggerEvent","PhysXPhysicsMaterial","staticFriction","dynamicFriction","bounciness","frictionCombine","bounceCombine","pxMaterial","CombineMode","PhysXStaticCollider","PhysXPlaneColliderShape","PhysXSphereColliderShape","PhysXJoint","_this$_collider","actor","PhysXFixedJoint","_PhysXJoint","PhysXHingeJoint","axisRotationQuaternion","velocity","lowerLimit","upperLimit","contactDist","stiffness","damping","limit","PhysXSpringJoint","tolerance","runtimeMode","scriptPromise","supported","module","PHYSX","onContactBegin","onContactEnd","onTriggerBegin","onTriggerEnd","defaultErrorCallback","allocator","WireframePrimitive","positionOffset","shift","indexBegin","radian","circleIndicesCount","twoPi","globalIndex","WireframeManager","positionIndex","positionPool","includeChildren","componentsOffset","_n3","_n4","spotLight","directLight","pointLight","inverseProj","positionsOffset","WireframeElement","ndcPosition","newPosition","_newPosition","coneIndicesCount","sphereIndicesCount","unboundCylinderIndicesCount","cuboidIndicesCount","maxScale","capsuleIndicesCount","supportUint32Array","globalPositions","wireframeElements","localPositionLength","needUpdate","wireframeElement","beginIndex","_transform","localPosition","globalPosition","neededLength","maxLength","newIndices","pz","transformRanges","barcurrentRate","ScencePro","sceneManager","scenceName","LoadScence","Particle","instanceName","callBack","div","LoadingComponentProcess","dom","numEle","maskEle","particleEntity","particles","_LoadScence","scence","ESP$1","Spherical","sinPhiRadius","ControlHandlerType","ControlKeyboard","control","outDelta","keyPanSpeed","DeltaType","ControlPointer","pointerMovingDelta","pointer1","pointer2","curDistance","handlerType","deltaType","ControlWheel","wheelDelta","OrbitControl","curHandlerType","enableHandler","inputDevices","_sphericalDump","_sphericalDelta","rotateAngle","radianLeft","radianUp","cameraTransform","targetDistance","distanceLeft","distanceUp","_tempVec3","_spherical","_panOffset","Easing","amount","now$1","Group","tweenId","tween","preserve","tweenIds","autoStart","Interpolation","pw","bn","fc","p3","Sequence","mainGroup","Tween","_object","_group","_valuesStart","_valuesEnd","_valuesStartRepeat","startValue","startValueIsArray","propType","isInterpolationList","endValues","numChainedTweens","times","yoyo","easingFunction","interpolationFunction","tweens","elapsed","endTime","startIsArray","endIsArray","endValue","VERSION","nextId","TWEEN","getAll","removeAll","ModelScenc","cameraEntity","controal","lightNode","pointLightNode","directLightNode","directLightNode2","carUrl","env","listSource","caModel","envModel","carModelClone","SelectHotPoint","spriteEntity","boxCollider","boxColliderShape","SpriteIcon","spriteRenderer","per","innerCarDom","physicsSphere","inputManager","forword","backIcon","pointEle","render2D","Renderer2DScript","orb","markWp","targt","screen","State","Page","canvasId","ModelScene2","webGLRenderer","ControllerScript","animationSpeed","displacement","physicsManager","yAxisMove","page","player","dialog","startShow","showStartBtn","isWx","getQueryVariable","onStick","onStart","onEnd","onLoad","onStartPage","variable","query","vars","pair","App"],"mappings":"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QuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAE3Bt0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAE5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,EAE5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAE5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAE5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,EAAQuI,KAAmB+rD,EAAiB,GAC5Ct0D,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"}